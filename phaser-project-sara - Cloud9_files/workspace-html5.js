!function(){function getInlineDeps(fn){var deps=[]
return fn.length&&(fn.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep,index,str){
for(var i=index;str.charCodeAt(i-=1)<=32;);"."!==str.charAt(i)&&deps.push(dep)}),deps=["require","exports","module"].concat(deps)),
deps}function undefOne(module,path){delete define.errors[module],delete define.loaded[module],delete define.modules[module],
delete define.loading[module],delete define.fetchedUrls[path]}function undefAll(module,hash){Object.keys(hash).forEach(function(key){
var i=key.indexOf("!")+1
if(0==key.lastIndexOf(module,0)&&undefOne(key,require.toUrl(key,".js")),i){var plugin=key.slice(0,i-1),resource=key.slice(i)


0!=resource.lastIndexOf(module,0)&&0!=plugin.lastIndexOf(module,0)||(undefOne(key,require.toUrl(key,"")),
undefOne(resource,require.toUrl(resource,"")))}})}function hashCode(string){var i,chr,len,result=0
if(0==string.length)return result
for(i=0,len=string.length;i<len;i++)chr=string.charCodeAt(i),result=(result<<5)-result+chr,result|=0
return result}function loadText(path,cb){var xhr=new window.XMLHttpRequest
xhr.open("GET",path,!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),
xhr.onload=function(e){return xhr.status>399&&xhr.status<600?cb(xhr):void cb(null,xhr.responseText,xhr)

},xhr.onabort=xhr.onerror=function(e){cb(e)},xhr.send("")}function checkCache(){var baseUrl
return ideCachePromiss=config.useCache&&window.caches.open("ide")["catch"](function(e){console.error(e),
config.useCache=ideCachePromiss=ideCache=null}).then(function(ideCache_){return ideCache=ideCache_,ideCache?ideCache.keys():[]

}).then(function(keys){baseUrl=config.baseUrl,"/"==baseUrl[0]&&(baseUrl=host+baseUrl)
var val=keys.map(function(r){var url=r.url
if(url.startsWith(baseUrl))url=url.slice(baseUrl.length)
else if(/^\w+:/.test(url))return""
return r.headers.get("etag")+" "+url}).join("\n")+"\n"
return val.length<=1?(ideCachePromiss=null,ideCache):new Promise(function(resolve){var checked=0,buffer="",toDelete=[]


post(baseUrl+"__check__",val,function(t){var e=t.slice(checked)
checked=t.length
var parts=(buffer+e).split("\n")
buffer=parts.pop()
for(var i=0;i<parts.length;i++)if(parts[i]){var del=ideCache["delete"](baseUrl+parts[i])
toDelete.push(del)}},function(e,t){ideCachePromiss=null,Promise.all(toDelete).then(function(){resolve(ideCache)

}),setTimeout(function(){setTimeout(function(){config.useCache=!1},5e3)},5e3)})})})}function post(path,val,progress,cb){
var xhr=new window.XMLHttpRequest
xhr.open("POST",path,!0),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),
xhr.onload=function(e){return xhr.status>399&&xhr.status<600?cb(xhr):void cb(null,xhr.responseText,xhr)

},xhr.onreadystatechange=function(e){progress(xhr.responseText,xhr)},xhr.onabort=xhr.onerror=function(e){
cb(e)},xhr.send(val)}function definePlugin(plugin,p){require[plugin]=function(moduleName,processLoadQueue){
p.load(moduleName,require,function(value){define(plugin+moduleName,[],function(){return value}),processLoadQueue()

})}}var MODULE_LOAD_URL="https://static.c9.io/nc-3.1.3863-27558ad6/modules",global=function(){return this

}()
global||"undefined"==typeof window||(global=window)
var nextModule,commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,define=function(name,deps,callback){
return"string"!=typeof name&&(callback=deps,deps=name,name=null),deps&&!Array.isArray(deps)&&(callback=deps,
deps=null),nextModule&&(name&&name!=nextModule.name||(name=nextModule.name,deps=deps||nextModule.deps,
nextModule=null)),name?void(define.loaded[name]||(deps||"function"!=typeof callback||(deps=getInlineDeps(callback)),
define.loaded[name]={id:name,deps:normalizeNames(name,deps||[]),factory:callback,exports:{},packaged:!0
},define.loading[name]&&delete define.loading[name],define.lastModule?define.pending.push(name):define.lastModule=name)):defQueue.push([deps,callback])

},defQueue=[],addToLoadQueue=function(missing,deps,callback,errback){var toLoad=missing.length,map={}


define.queue.push({deps:deps,map:map,toLoad:toLoad,callback:callback,errback:errback})
for(var i=0;i<missing.length;++i){var p=missing[i]
map[p]=1,define.loading[p]||(require.load(p),define.loading[p]=1)}},processLoadQueue=function(err,id){
var changed=!1
if(err?(define.errors[err.id]=err,define.queue.forEach(function(r){r.map[err.id]&&(r.toLoad=-1,r.errback&&r.errback(err))

}),define.lastModule==err.id&&(define.lastModule=null),define.pending=define.pending.filter(function(p){
return p!=err.id}),changed=!0):!id||defQueue.length||define.loaded[id]||(defQueue=[config.shim&&config.shim[id]||[[],null]]),
defQueue.length){if(defQueue.length>1)throw new Error("more than one module in defqueue")
define(id,defQueue[0][0],defQueue[0][1]),defQueue.length=0}var pending=define.pending
define.queue.forEach(function(r){pending.forEach(function(id){r.map[id]&&r.toLoad--}),r.map[define.lastModule]&&r.toLoad--,
r.toLoad||(changed=!0,_require("",r.deps,r.callback,r.errback))}),define.lastModule=null,pending.length&&(define.pending=[]),
changed&&(define.queue=define.queue.filter(function(r){return r.toLoad>0}))}
define.amd={},define.queue=[],define.loaded={},define.errors={},define.loading={},define.pending=[],define.modules={
require:1,exports:1,module:1},define.fetchedUrls={}
var activateModule=function(name){var module=define.loaded[name],exports=module.exports
if("function"!=typeof module.factory)exports=module.factory
else{var req=function(path,callback){return _require(name,path,callback)}
req.toUrl=function(namePlusExt,_1,_2,skipBalancers){return require.toUrl(normalizeName(name,namePlusExt),null,null,skipBalancers)

},req.config=require.config
var modules=define.modules,missing=checkMissing(module.deps)
if(missing.length)return missing
module.define=define,modules.require=req,modules.exports=exports,modules.module=module,define.modules[name]=exports


var args=module.deps.slice(0,module.factory.length),returnValue=args.length?module.factory.apply(module,args.map(lookup)):module.factory(req,exports,module)


exports=void 0==returnValue?module.exports:returnValue}delete define.loaded[name],define.modules[name]=exports

},checkMissing=function(deps,seen,missing){missing=missing||{},seen=seen||{}
for(var i=0;i<deps.length;++i){var depName=deps[i]
if(!define.modules[depName]){var dep=define.loaded[depName]
dep?missing[depName]||seen[depName]||(seen[depName]=1,checkMissing(dep.deps,seen,missing)):missing[depName]=1

}}return Object.keys(missing)},lookup=function(moduleName){var mod=define.modules[moduleName]
return void 0===mod&&define.loaded[moduleName]&&(activateModule(moduleName),mod=define.modules[moduleName]),
mod},_require=function(parentId,moduleName,callback,errback){if("string"==typeof moduleName){var depName=normalizeName(parentId,moduleName),module=lookup(depName)


if(void 0!==module)return"function"==typeof callback&&callback(module),module}else if(Array.isArray(moduleName)){
var deps=normalizeNames(parentId,moduleName),missing=checkMissing(deps)
if(missing.length)return addToLoadQueue(missing,deps,callback,errback)
var args=deps.map(lookup)
return callback&&callback.apply(null,args)}if(_require.original)return _require.original.call(this,moduleName,callback)

},normalizeName=function(parentId,moduleName){if(moduleName.indexOf("!")!==-1){var chunks=moduleName.split("!")


return normalizeName(parentId,chunks[0])+"!"+normalizeName(parentId,chunks[1])}if("."==moduleName.charAt(0)){
var base=parentId.split("/").slice(0,-1).join("/")
for(moduleName=(base||parentId)+"/"+moduleName;moduleName.indexOf(".")!==-1&&previous!=moduleName;){var previous=moduleName


moduleName=moduleName.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return moduleName},normalizeNames=function(parentId,moduleNames){
return moduleNames.map(function(name){return normalizeName(parentId,name)})},require=function(module,callback,errback){
return _require("",module,callback,errback)},config=require.config=function(cfg){cfg.baseUrl&&(config.baseUrl=cfg.baseUrl.replace(/\/*$/,"/")),
cfg.packages&&cfg.packages.forEach(function(pkg){"string"==typeof pkg&&(pkg={name:pkg}),config.packages[pkg.name]={
name:pkg.name,location:(pkg.location||pkg.name).replace(/\/*$/,"/"),main:(pkg.main||"main").replace(/\.js$/,"").replace(/^\.\//,"")
}}),cfg.paths&&Object.keys(cfg.paths).forEach(function(p){config.paths[p]=cfg.paths[p]}),cfg.useCache&&global.caches&&(config.useCache=!0,
checkCache()),cfg.baseUrlLoadBalancers&&(config.baseUrlLoadBalancers=cfg.baseUrlLoadBalancers)}
require.resetConfig=function(){config.packages=Object.create(null),config.paths=Object.create(null),config.baseUrl="",
config.useCache=!1},require.resetConfig(),define.undef=require.undef=function(module,recursive){if(module=normalizeName("",module),
recursive){var root=(module+"/").replace(/\/+$/,"/")
undefAll(root,define.errors),undefAll(root,define.loaded),undefAll(root,define.modules),undefAll(root,define.loading)

}else undefOne(module,require.toUrl(module,".js"))},require.MODULE_LOAD_URL=MODULE_LOAD_URL,require.toUrl=function(moduleName,ext,skipExt,skipBalancers){
var absRe=/^([\w\+\.\-]+:|\/)/,index=moduleName.indexOf("!")
index===-1&&ext&&!/^\/|\.js$/.test(moduleName)||(ext="")
for(var paths=config.paths,pkgs=config.packages,testPath=moduleName,tail="";testPath;){if(paths[testPath]){
moduleName=paths[testPath]+tail
break}if(pkgs[testPath]){moduleName=pkgs[testPath].location+(tail||pkgs[testPath].main)
break}var i=testPath.lastIndexOf("/")
if(i===-1)break
tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}if(skipExt)return testPath
var url=moduleName+ext
if(absRe.test(url)||(url=(config.baseUrl||require.MODULE_LOAD_URL+"/")+url),"/"===url[0]&&config.baseUrlLoadBalancers&&!skipBalancers&&!config.useCache){
var n=Math.abs(hashCode(url))%config.baseUrlLoadBalancers.length
url=config.baseUrlLoadBalancers[n]+url}return url}
var ideCache,ideCachePromiss,loadScriptWithTag=function(path,id,callback){var head=document.head||document.documentElement,s=document.createElement("script")


s.src=path,s.charset="utf-8",s.async=!0,0==path.lastIndexOf(require.MODULE_LOAD_URL,0)&&"/"!=path[0]&&(s.crossOrigin=!0),
s.onload=s.onreadystatechange=function(_,isAbort){!isAbort&&s.readyState&&"loaded"!=s.readyState&&"complete"!=s.readyState||(s=s.onload=s.onreadystatechange=null,
isAbort||callback(null,id))},s.onerror=function(e){processLoadQueue({message:"Error loading script "+id+":"+path,
id:id,path:path})},head.appendChild(s)},host=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),loadScript=function(path,id,callback){
if(!config.useCache)return loadScriptWithTag(path,id,callback);/^https?:/.test(path)||(path=host+path)


var cb=function(e,val,deps){return e?processLoadQueue({id:id,path:path}):(nextModule={name:id,deps:deps
},window.eval(val+"\n//# sourceURL="+path),callback(null,id),define.loaded[id])}
loadCached(path,cb)},loadCached=function(path,cb){function loadNew(){loadText(path,function(e,val,xhr){
try{var m=cb(e,val)}catch(err){throw ideCache["delete"](path),err}if(!e){var ETAG=xhr.getResponseHeader("ETAG")


if(!ETAG)return
var res=new Response(val)
res.headers.set("ETAG",ETAG)
var req=new Request(path)
req.headers.set("ETAG",ETAG),m&&m.deps&&res.headers.set("deps",m.deps.join(",")),ideCache.put(req,res)["catch"](function(){
ideCache["delete"](path)})}})}return config.useCache?(ideCache||ideCachePromiss||checkCache(),ideCachePromiss?ideCachePromiss.then(function(i){
i&&(ideCache=i),loadCached(path,cb)}):void ideCache.match(path).then(function(e){return e?e.text().then(function(val){
var deps=e.headers.get("deps")
"string"==typeof deps&&(deps=deps?deps.split(","):[]),cb(null,val,deps)}):loadNew()})["catch"](function(){
loadNew(),ideCache["delete"](path)})):loadText(path,cb)}
require.clearCache=function(callback){ideCachePromiss=window.caches.open("ide").then(function(ideCache_){
return ideCache=ideCache_,ideCache.keys()}).then(function(keys){var toDelete=keys.map(function(i){ideCache["delete"](i)

})
Promise.all(toDelete).then(function(){callback&&callback()},function(e){callback&&callback(e)})})},require.load=function(module){
var i=module.indexOf("!")+1
if(i){var plugin=module.substring(0,i)
if(module=module.substr(i),"function"==typeof require[plugin])require[plugin](module,processLoadQueue)
else if(config.baseUrl){if(require[plugin])return require[plugin][plugin+module]=1
require[plugin]=Object.create(null),require[plugin][plugin+module]=1,require([plugin.slice(0,-1)],function(p){
var pending=require[plugin]
definePlugin(plugin,p),Object.keys(pending).forEach(function(p){delete define.loading[p]}),require(Object.keys(pending))

})}else console.error("require plugin "+plugin+"missing")}else{var url=require.toUrl(module,".js")
if(1&define.fetchedUrls[url])return!1
define.fetchedUrls[url]|=1,loadScript(url,module,processLoadQueue)}},require["text!"]=function(module,callback){
var url=require.toUrl(module)
if(2&define.fetchedUrls[url])return!1
define.fetchedUrls[url]|=2
var cb=function(e,val){e&&console.error("Couldn't load module "+module,e),define("text!"+module,[],val),
callback()}
loadCached(url,cb)},require["ace/requirejs/text!"]=function(module,callback){var url=require.toUrl(module)


if(2&define.fetchedUrls[url])return!1
define.fetchedUrls[url]|=2
var cb=function(e,val){e&&console.error("Couldn't load module "+module,e),define("ace/requirejs/text!"+module,[],val),
callback()}
loadCached(url,cb)},global.define&&global.define.packaged||(define.original=global.define,global.define=define,
global.define.packaged=!0),global.require&&global.require.packaged||(global.require=require,global.require.packaged=!0),
global.requirejs||(global.requirejs=require),global.miniRequire=require}()


define("events",[],function(require,exports,module){var EventEmitter=exports.EventEmitter=function(){},toString=Object.prototype.toString,isArray=Array.isArray||function(obj){
return"[object Array]"===toString.call(obj)},defaultMaxListeners=10
EventEmitter.prototype.setMaxListeners=function(n){this._events||(this._events={}),this._events.maxListeners=n

},EventEmitter.prototype.emit=function(type){if(this._events){var handler=this._events[type]
if(handler){var returnValue
if("function"==typeof handler)switch(arguments.length){case 1:return handler.call(this)
case 2:return handler.call(this,arguments[1])
case 3:return handler.call(this,arguments[1],arguments[2])
default:var args=Array.prototype.slice.call(arguments,1)
returnValue=handler.apply(this,args)}else if(isArray(handler))for(var temp,args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),i=0,l=listeners.length;i<l;i++)temp=listeners[i].apply(this,args),
void 0!==temp&&(returnValue=temp)
return returnValue}}},EventEmitter.prototype.addListener=function(type,listener,plugin){if("function"!=typeof listener)throw new Error("addListener only takes instances of Function")


this._events||(this._events={})
var eventList=this._events[type]
if(eventList)if(isArray(eventList)){if(!eventList.warned){var m
m=void 0!==this._events.maxListeners?this._events.maxListeners:defaultMaxListeners,m&&m>0&&eventList.length>m&&(eventList.warned=!0,
console.error('warning: possible EventEmitter memory leak detected. " + eventList.length + " listeners of type "'+type+'" added. Use emitter.setMaxListeners() to increase limit.'),
console.trace())}eventList.push(listener)}else this._events[type]=[eventList,listener]
else this._events[type]=listener
return"newListener"!=type&&this.emit("newListener",type,listener),plugin&&plugin.addEvent(this,type,listener),
this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener,plugin){
var self=this,wrapped=function(){return self.removeListener(type,listener),listener.apply(self,arguments)

}
return wrapped.listener=listener,self.on(type,wrapped,plugin),this},EventEmitter.prototype.removeListener=function(type,listener){
if("function"!=typeof listener)throw new Error("removeListener only takes instances of Function")
if(!this._events||!this._events[type])return this
var list=this._events[type]
if(isArray(list)){if(!list.some(function(l,i){if((l.listener||l)==listener)return list.splice(i,1),!0

}))return this
0===list.length&&delete this._events[type]}else(this._events[type].listener||this._events[type])===listener&&delete this._events[type]


return"removeListener"!=type&&this.emit("removeListener",type,listener),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,
EventEmitter.prototype.removeAllListeners=function(type){return type&&this._events&&this._events[type]&&(this._events[type]=null),
this},EventEmitter.prototype.listeners=function(type){return this._events||(this._events={}),this._events[type]||(this._events[type]=[]),
isArray(this._events[type])||(this._events[type]=[this._events[type]]),this._events[type]}})


define("path",[],function(require,exports,module){function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length-1;i>=0;i--){
var last=parts[i]
"."===last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..")


return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(filename){
return splitPathRe.exec(filename).slice(1)}
exports.resolve=function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){
var path=i>=0?arguments[i]:"/"
if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings")
path&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path.charAt(0))}return resolvedPath=normalizeArray(resolvedPath.split("/").filter(function(p){
return!!p}),!resolvedAbsolute).join("/"),(resolvedAbsolute?"/":"")+resolvedPath||"."},exports.normalize=function(path){
var isAbsolute=exports.isAbsolute(path),trailingSlash="/"===path.substr(-1)
return path=normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/"),path||isAbsolute||(path="."),
path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},exports.isAbsolute=function(path){return"/"===path.charAt(0)

},exports.join=function(){var paths=Array.prototype.slice.call(arguments,0)
return exports.normalize(paths.filter(function(p,index){if("string"!=typeof p)throw new TypeError("Arguments to path.join must be strings")


return p}).join("/"))},exports.relative=function(from,to){function trim(arr){for(var start=0;start<arr.length&&""===arr[start];start++);
for(var end=arr.length-1;end>=0&&""===arr[end];end--);return start>end?[]:arr.slice(start,end-start+1)

}from=exports.resolve(from).substr(1),to=exports.resolve(to).substr(1)
for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){
samePartsLength=i
break}for(var outputParts=[],i=samePartsLength;i<fromParts.length;i++)outputParts.push("..")
return outputParts=outputParts.concat(toParts.slice(samePartsLength)),outputParts.join("/")},exports.dirname=function(path){
var result=splitPath(path),root=result[0],dir=result[1]
return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."},exports.basename=function(path,ext){
var f=splitPath(path)[2]
return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},exports.extname=function(path){
return splitPath(path)[3]},exports._makeLong=function(path){return path}})


define("lib/architect/architect",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,("undefined"!=typeof module&&function(m){module.exports=m(require("events"))

}||"function"==typeof define&&function(m){define(["events"],m)})(function(events){"use strict"
function checkConfig(config,lookup){return config.forEach(function(plugin){if(!plugin.checked){if(!plugin.hasOwnProperty("setup"))throw new Error("Plugin is missing the setup function "+JSON.stringify(plugin))


if(!plugin.hasOwnProperty("provides"))throw new Error("Plugin is missing the provides array "+JSON.stringify(plugin))


if(!plugin.hasOwnProperty("consumes"))throw new Error("Plugin is missing the consumes array "+JSON.stringify(plugin))

}}),checkCycles(config,lookup)}function checkCycles(config,lookup){var plugins=[]
config.forEach(function(pluginConfig,index){plugins.push({packagePath:pluginConfig.packagePath,provides:pluginConfig.provides.concat(),
consumes:pluginConfig.consumes.concat(),i:index})})
for(var resolved={hub:!0,app:!0},changed=!0,sorted=[];plugins.length&&changed;)changed=!1,plugins.concat().forEach(function(plugin){
for(var consumes=plugin.consumes.concat(),resolvedAll=!0,i=0;i<consumes.length;i++){var service=consumes[i]


resolved[service]||lookup&&lookup(service)?plugin.consumes.splice(plugin.consumes.indexOf(service),1):resolvedAll=!1

}resolvedAll&&(plugins.splice(plugins.indexOf(plugin),1),plugin.provides.forEach(function(service){resolved[service]=!0

}),sorted.push(config[plugin.i]),changed=!0)})
if(plugins.length){var unresolved={}
plugins.forEach(function(plugin){plugin.consumes.forEach(function(name){unresolved[name]!==!1&&(unresolved[name]||(unresolved[name]=[]),
unresolved[name].push(plugin.packagePath))}),plugin.provides.forEach(function(name){unresolved[name]=!1

})}),Object.keys(unresolved).forEach(function(name){unresolved[name]===!1&&delete unresolved[name]})
var unresolvedList=Object.keys(unresolved),resolvedList=Object.keys(resolved),err=new Error("Could not resolve dependencies\n"+(unresolvedList.length?"Missing services: "+JSON.stringify(unresolved,null,4):"Config contains cyclic dependencies"))


throw err.unresolved=unresolvedList,err.resolved=resolvedList,err}return sorted}function Architect(config){
function startPlugins(additional){function register(err,provided){return err?app.emit("error",err):(plugin.provides.forEach(function(name){
if(!provided.hasOwnProperty(name)){var err=new Error("Plugin failed to provide "+name+" service. "+JSON.stringify(plugin))


return err.plugin=plugin,app.emit("error",err)}services[name]=provided[name],app.serviceToPlugin[name]=plugin,
plugin.__isAdditionalMode=isAdditionalMode,app.emit("service",name,services[name],plugin)}),provided&&provided.hasOwnProperty("onDestroy")&&destructors.push(provided.onDestroy),
app.emit("plugin",plugin),recur?callnext=!0:void startPlugins(additional))}var plugin=sortedPlugins.shift()


if(!plugin)return ready=!0,app.emit(additional?"ready-additional":"ready",app)
var imports={}
if(plugin.consumes&&plugin.consumes.forEach(function(name){imports[name]=services[name]}),DEBUG){for(recur++,
plugin.setup(plugin,imports,register);callnext&&recur<=1;)callnext=!1,startPlugins(additional)
recur--}else try{recur++,plugin.setup(plugin,imports,register)}catch(e){throw e.plugin=plugin,app.emit("error",e),
e}finally{for(;callnext&&recur<=1;)callnext=!1,startPlugins(additional)
recur--}}var app=this
app.config=config,app.serviceToPlugin={}
var isAdditionalMode,callnext,ready,services=app.services={hub:app,app:app},sortedPlugins=checkConfig(config),destructors=[],recur=0

;("object"==typeof process?process.nextTick:setTimeout)(startPlugins),this.loadAdditionalPlugins=function(additionalConfig,callback){
isAdditionalMode=!0,exports.resolveConfig(additionalConfig,function(err,additionalConfig){if(err)return callback(err)


app.once(ready?"ready-additional":"ready",function(app){callback(null,app)})
var _sortedPlugins=checkConfig(additionalConfig,function(name){return services[name]})
ready?(sortedPlugins=_sortedPlugins,startPlugins(!0)):_sortedPlugins.forEach(function(item){sortedPlugins.push(item)

})})},this.destroy=function(){destructors.forEach(function(destroy){destroy()}),destructors=[]}}function createApp(config,callback){
function onReady(app){done()}function done(err){err&&app.destroy(),app.removeListener("error",done),app.removeListener("ready",onReady),
callback(err,app)}var app
try{app=new Architect(config)}catch(err){if(!callback)throw err
return callback(err,app)}return callback&&(app.on("error",done),app.on("ready",onReady)),app}var EventEmitter=events.EventEmitter,exports={},DEBUG=!("undefined"==typeof location||!location.href.match(/debug=[123]/))


return"object"==typeof module?function(){function loadConfig(configPath,callback){var config=require(configPath),base=dirname(configPath)


return resolveConfig(config,base,callback)}function resolveConfig(config,base,callback){if(!callback)return resolveConfigSync(config,base)


try{var result=resolveConfigSync(config,base)}catch(e){var err=e}process.nextTick(function(){callback(err,result)

})}function resolveConfigSync(config,base){return config.forEach(function(plugin,index){if("string"==typeof plugin&&(plugin=config[index]={
packagePath:plugin}),plugin.hasOwnProperty("packagePath")&&!plugin.hasOwnProperty("setup")){var defaults=resolveModuleSync(base,plugin.packagePath)


Object.keys(defaults).forEach(function(key){plugin.hasOwnProperty(key)||(plugin[key]=defaults[key])}),
plugin.packagePath=defaults.packagePath,plugin.setup=require(plugin.packagePath)}}),config}function resolveModuleSync(base,modulePath){
var packagePath
try{packagePath=resolvePackageSync(base,modulePath+"/package.json")}catch(err){if("ENOENT"!==err.code&&"MODULE_NOT_FOUND"!==err.code)throw err

}var metadata=packagePath&&require(packagePath).plugin||{}
modulePath=packagePath?dirname(packagePath):resolvePackageSync(base,modulePath)
var module=require(modulePath)
return metadata.provides=metadata.provides||module.provides||[],metadata.consumes=metadata.consumes||module.consumes||[],
metadata.packagePath=modulePath,metadata}function resolvePackageSync(base,packagePath){return Module._resolveFilename(packagePath,{
paths:Module._nodeModulePaths(base),filename:base+"/package.json",id:base+"/package.json"})}var dirname=require("path").dirname,Module=require("module")


exports.loadConfig=loadConfig,exports.resolveConfig=resolveConfig}():function(){function loadConfig(path,callback){
require([path],function(config){resolveConfig(config,callback)})}function resolveConfig(config,base,callback,errback){
if("function"==typeof base)return resolveConfig(config,"",arguments[1],arguments[2])
var paths=[],pluginIndexes={}
config.forEach(function(plugin,index){"string"==typeof plugin&&(plugin=config[index]={packagePath:plugin
}),plugin.hasOwnProperty("packagePath")&&!plugin.hasOwnProperty("setup")&&(paths.push((base||"")+plugin.packagePath),
pluginIndexes[plugin.packagePath]=index)}),require(paths,function(){var args=arguments,err=[]
return paths.forEach(function(name,i){var module=args[i],plugin=config[pluginIndexes[name]]
return module&&plugin?(plugin.setup=module,plugin.provides=module.provides||[],void(plugin.consumes=module.consumes||[])):err.push(name)

}),err.length?callback(new Error("Missing plugins: "+err)):void callback(null,config)},errback||function(err){
callback(err)})}exports.loadConfig=loadConfig,exports.resolveConfig=resolveConfig}(),exports.createApp=createApp,
exports.Architect=Architect,Architect.prototype=Object.create(EventEmitter.prototype,{constructor:{value:Architect
}}),Architect.prototype.getService=function(name){if(!this.services[name])throw new Error("Service '"+name+"' not found in architect app!")


return this.services[name]},exports})})


define("plugins/c9.ide.quota/quota",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,void setTimeout(function(){
proc.execFile("df",{args:[options.workspaceDir]},function(err,stdout,stderr){return err?console.error(err):void(/(99|100)%/.test(stdout)&&showError("Your workspace is running out of quota. Please make some free space.",-1))

})},45e3))}var Plugin=imports.Plugin,proc=imports.proc,showError=imports["dialog.error"].show,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),register(null,{quota:plugin})}return main.consumes=["Plugin","dialog.error","proc"],
main.provides=["quota"],main})


define("outplan",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,function(root,factory){if("object"==typeof exports&&"object"==typeof module)module.exports=factory()
else if("function"==typeof define&&define.amd)define([],factory)
else{var a=factory()
for(var i in a)("object"==typeof exports?exports:root)[i]=a[i]}}(this,function(){return function(modules){
function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports


var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1}
return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,
module.exports}var installedModules={}
return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",
__webpack_require__(0)}([function(module,exports,__webpack_require__){function getValue(choice,experiment){
if("string"==typeof experiment.choiceData[0])return choice
for(var i=0;i<experiment.choiceData.length;i++)if(experiment.choiceData[i].name===choice)return experiment.choiceData[i]


throw new Error("Unexpected error: could not find choice "+choice)}var logFunction,planout=__webpack_require__(1),sha1=__webpack_require__(7),salt="salt",experiments=Object.create(null),compatibleHash=!1


module.exports.UniformChoice=planout.Ops.Random.UniformChoice,module.exports.WeightedChoice=planout.Ops.Random.WeightedChoice,
module.exports.PlanOutOpRandom=planout.Ops.Random.PlanOutOpRandom,module.exports.Sample=planout.Ops.Random.Sample,
module.exports.BernoulliFilter=planout.Ops.Random.BernoulliFilter,module.exports.BernoulliTrial=planout.Ops.Random.BernoulliTrial,
module.exports.RandomInteger=planout.Ops.Random.RandomInteger,module.exports.RandomFloat=planout.Ops.Random.RandomFloat,
module.exports.configure=function(options){if(logFunction=options.logFunction||logFunction,experiments=options.experiments||experiments,
null!=options.compatibleHash){if(options.compatibleHash&&sha1.$shimmed)throw new Error("compatibleHash is only supported in planout_full")


compatibleHash=options.compatibleHash}return salt=options.salt||String(salt),sha1.$salt=options.alt||String(salt),
this},module.exports.getExperiments=function(){return experiments},module.exports.create=function(name,choices,options){
return options=options||{},options.operator=options.operator||module.exports.UniformChoice,options.choiceData=choices,
options.choices=choices.map(function(c){if("string"==typeof c)return c
if(!c.name)throw new Error("Property 'name' expected in choices")
return c.name}),experiments[name]=options,{create:this.create.bind(this),getExperiments:this.getExperiments.bind(this),
expose:this.expose.bind(this,name),configure:this.configure.bind(this)}},module.exports.expose=function(name,userId,options){
if(null==userId)throw new Error("Missing argument. Expected: name, userId")
if(!experiments[name])throw new Error("Experiment not defined: "+name)
var experiment=experiments[name]
experiment.unit=String(userId),experiment.salt=salt
var operator=new experiment.operator(experiment),assignment=new planout.Assignment(name)
planout.ExperimentSetup.toggleCompatibleHash(compatibleHash)
var choice=operator.execute(assignment),result=getValue(choice,experiment)
return options&&options.log===!1?result:logFunction?(logFunction({name:name,inputs:{userId:userId},params:{
name:choice,value:result},event:"exposure",salt:salt,time:Date.now()/1e3}),result):(console.warn("Called outplan.expose() without setting logFunction"),
result)}},function(module,exports,__webpack_require__){"use strict"
function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj
var newObj={}
if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key])


return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{
"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0})
var _experiment=__webpack_require__(2),_experiment2=_interopRequireDefault(_experiment),_interpreter=__webpack_require__(14),_interpreter2=_interopRequireDefault(_interpreter),_random=__webpack_require__(4),_random2=_interopRequireDefault(_random),_core=__webpack_require__(16),_core2=_interopRequireDefault(_core),_namespace=__webpack_require__(17),Namespace=_interopRequireWildcard(_namespace),_assignment=__webpack_require__(3),_assignment2=_interopRequireDefault(_assignment),_experimentSetup=__webpack_require__(12),_experimentSetup2=_interopRequireDefault(_experimentSetup)


exports["default"]={Namespace:Namespace,Assignment:_assignment2["default"],Interpreter:_interpreter2["default"],
Experiment:_experiment2["default"],ExperimentSetup:_experimentSetup2["default"],Ops:{Random:_random2["default"],
Core:_core2["default"]}},module.exports=exports["default"]},function(module,exports,__webpack_require__){
"use strict"
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){
if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{
value:!0})
var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i]


descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),
Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){
return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),
Constructor}}(),_assignment=__webpack_require__(3),_assignment2=_interopRequireDefault(_assignment),_utils=__webpack_require__(6),Experiment=function(){
function Experiment(inputs){_classCallCheck(this,Experiment),this.inputs=inputs,this._exposureLogged=!1,
this._salt=null,this._inExperiment=!0,this.name=this.getDefaultExperimentName(),this._autoExposureLog=!0,
this.setup(),this._assignment=new _assignment2["default"](this.getSalt()),this._assigned=!1}return _createClass(Experiment,[{
key:"getDefaultExperimentName",value:function(){if((0,_utils.isObject)(this)&&this.constructor&&this!==this.window){
var arr=this.constructor.toString().match(/function\s*(\w+)/)
if(arr&&2===arr.length)return arr[1]}return"GenericExperiment"}},{key:"getDefaultParamNames",value:function(){
var assignmentFxn=this.assign.toString(),possibleKeys=assignmentFxn.split(".set(")
return possibleKeys.splice(0,1),(0,_utils.map)(possibleKeys,function(val){var str=(0,_utils.trimTrailingWhitespace)(val.split(",")[0])


return str.substr(1,str.length-2)})}},{key:"requireAssignment",value:function(){this._assigned||this._assign()

}},{key:"requireExposureLogging",value:function(paramName){this.shouldLogExposure(paramName)&&this.logExposure()

}},{key:"_assign",value:function(){this.configureLogger()
var assignVal=this.assign(this._assignment,this.inputs)
assignVal||void 0===assignVal?this._inExperiment=!0:this._inExperiment=!1,this._assigned=!0}},{key:"setup",
value:function(){}},{key:"inExperiment",value:function(){return this._inExperiment}},{key:"addOverride",
value:function(key,value){this._assignment.addOverride(key,value)}},{key:"setOverrides",value:function(value){
this._assignment.setOverrides(value)
var o=this._assignment.getOverrides(),self=this;(0,_utils.forEach)(Object.keys(o),function(key){void 0!==self.inputs[key]&&(self.inputs[key]=o[key])

})}},{key:"getSalt",value:function(){return this._salt?this._salt:this.name}},{key:"setSalt",value:function(value){
this._salt=value,this._assignment&&(this._assignment.experimentSalt=value)}},{key:"getName",value:function(){
return this.name}},{key:"assign",value:function(params,args){throw"IMPLEMENT assign"}},{key:"getParamNames",
value:function(){throw"IMPLEMENT getParamNames"}},{key:"shouldFetchExperimentParameter",value:function(name){
var experimentalParams=this.getParamNames()
return experimentalParams.indexOf(name)>=0}},{key:"setName",value:function(value){var re=/\s+/g
this.name=value.replace(re,"-"),this._assignment&&(this._assignment.experimentSalt=this.getSalt())}},{
key:"__asBlob",value:function(){var extras=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],d={
name:this.getName(),time:(new Date).getTime()/1e3,salt:this.getSalt(),inputs:this.inputs,params:this._assignment.getParams()
}
return(0,_utils.extend)(d,extras),d}},{key:"setAutoExposureLogging",value:function(value){this._autoExposureLog=value

}},{key:"getParams",value:function(){return this.requireAssignment(),this.requireExposureLogging(),this._assignment.getParams()

}},{key:"get",value:function(name,def){return this.requireAssignment(),this.requireExposureLogging(name),
this._assignment.get(name,def)}},{key:"toString",value:function(){return this.requireAssignment(),this.requireExposureLogging(),
JSON.stringify(this.__asBlob())}},{key:"logExposure",value:function(extras){this.inExperiment()&&(this._exposureLogged=!0,
this.logEvent("exposure",extras))}},{key:"shouldLogExposure",value:function(paramName){return!(void 0!==paramName&&!this.shouldFetchExperimentParameter(paramName))&&(this._autoExposureLog&&!this.previouslyLogged())

}},{key:"logEvent",value:function(eventType,extras){if(this.inExperiment()){var extraPayload
extraPayload=extras?{event:eventType,extra_data:(0,_utils.shallowCopy)(extras)}:{event:eventType},this.log(this.__asBlob(extraPayload))

}}},{key:"configureLogger",value:function(){throw"IMPLEMENT configureLogger"}},{key:"log",value:function(data){
throw"IMPLEMENT log"}},{key:"previouslyLogged",value:function(){throw"IMPLEMENT previouslyLogged"}}]),
Experiment}()
exports["default"]=Experiment,module.exports=exports["default"]},function(module,exports,__webpack_require__){
"use strict"
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")

}Object.defineProperty(exports,"__esModule",{value:!0})
var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i]


descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),
Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){
return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),
Constructor}}(),_random=__webpack_require__(4),_utils=__webpack_require__(6),Assignment=function(){function Assignment(experimentSalt,overrides){
_classCallCheck(this,Assignment),overrides||(overrides={}),this.experimentSalt=experimentSalt,this._overrides=(0,
_utils.shallowCopy)(overrides),this._data=(0,_utils.shallowCopy)(overrides)}return _createClass(Assignment,[{
key:"evaluate",value:function(value){return value}},{key:"getOverrides",value:function(){return this._overrides

}},{key:"addOverride",value:function(key,value){this._overrides[key]=value,this._data[key]=value}},{key:"setOverrides",
value:function(overrides){this._overrides=(0,_utils.shallowCopy)(overrides)
var self=this;(0,_utils.forEach)(Object.keys(this._overrides),function(overrideKey){self._data[overrideKey]=self._overrides[overrideKey]

})}},{key:"set",value:function(name,value){return"_data"===name?void(this._data=value):"_overrides"===name?void(this._overrides=value):"experimentSalt"===name?void(this.experimentSalt=value):void((0,
_utils.hasKey)(this._overrides,name)||(value instanceof _random.PlanOutOpRandom?(value.args.salt||(value.args.salt=name),
this._data[name]=value.execute(this)):this._data[name]=value))}},{key:"get",value:function(name){return"_data"===name?this._data:"_overrides"===name?this._overrides:"experimentSalt"===name?this.experimentSalt:this._data[name]

}},{key:"getParams",value:function(){return this._data}},{key:"del",value:function(name){delete this._data[name]

}},{key:"toString",value:function(){return String(this._data)}},{key:"length",value:function(){return Object.keys(this._data).length

}}]),Assignment}()
exports["default"]=Assignment,module.exports=exports["default"]},function(module,exports,__webpack_require__){
"use strict"
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){
if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){
if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){
if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)


subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,
writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)

}Object.defineProperty(exports,"__esModule",{value:!0})
var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i]


descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),
Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){
return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),
Constructor}}(),_base=__webpack_require__(5),_sha=__webpack_require__(7),_sha2=_interopRequireDefault(_sha),_utils=__webpack_require__(6),_experimentSetup=__webpack_require__(12),_bignumber=__webpack_require__(13),_bignumber2=_interopRequireDefault(_bignumber),PlanOutOpRandom=function(_PlanOutOpSimple){
function PlanOutOpRandom(args){_classCallCheck(this,PlanOutOpRandom)
var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(PlanOutOpRandom).call(this,args))
return _this.LONG_SCALE_NON_COMPAT=0xfffffffffffff,_this.LONG_SCALE_COMPAT=new _bignumber2["default"]("FFFFFFFFFFFFFFF",16),
_this}return _inherits(PlanOutOpRandom,_PlanOutOpSimple),_createClass(PlanOutOpRandom,[{key:"getUnit",
value:function(appendedUnit){var unit=this.getArgMixed("unit")
return(0,_utils.isArray)(unit)||(unit=[unit]),appendedUnit&&unit.push(appendedUnit),unit}},{key:"getUniform",
value:function(){var zeroToOne,minVal=arguments.length<=0||void 0===arguments[0]?0:arguments[0],maxVal=arguments.length<=1||void 0===arguments[1]?1:arguments[1],appendedUnit=arguments[2]


return zeroToOne=(0,_experimentSetup.usingCompatibleHash)()?this.getHash(appendedUnit).dividedBy(this.LONG_SCALE_COMPAT).toNumber():this.getHash(appendedUnit)/this.LONG_SCALE_NON_COMPAT,
zeroToOne*(maxVal-minVal)+minVal}},{key:"getHash",value:function(appendedUnit){var fullSalt
if(this.args.full_salt)fullSalt=this.getArgString("full_salt")
else{var salt=this.getArgString("salt")
fullSalt=this.mapper.get("experimentSalt")+"."+salt}var unitStr=this.getUnit(appendedUnit).map(function(element){
return String(element)}).join("."),hashStr=fullSalt+"."+unitStr,hash=(0,_sha2["default"])(hashStr)
return(0,_experimentSetup.usingCompatibleHash)()?new _bignumber2["default"](hash.substr(0,15),16):parseInt(hash.substr(0,13),16)

}}]),PlanOutOpRandom}(_base.PlanOutOpSimple),RandomFloat=function(_PlanOutOpRandom){function RandomFloat(){
return _classCallCheck(this,RandomFloat),_possibleConstructorReturn(this,Object.getPrototypeOf(RandomFloat).apply(this,arguments))

}return _inherits(RandomFloat,_PlanOutOpRandom),_createClass(RandomFloat,[{key:"simpleExecute",value:function(){
var minVal=this.getArgNumber("min"),maxVal=this.getArgNumber("max")
return this.getUniform(minVal,maxVal)}}]),RandomFloat}(PlanOutOpRandom),RandomInteger=function(_PlanOutOpRandom2){
function RandomInteger(){return _classCallCheck(this,RandomInteger),_possibleConstructorReturn(this,Object.getPrototypeOf(RandomInteger).apply(this,arguments))

}return _inherits(RandomInteger,_PlanOutOpRandom2),_createClass(RandomInteger,[{key:"simpleExecute",value:function(){
var minVal=this.getArgNumber("min"),maxVal=this.getArgNumber("max")
return(0,_experimentSetup.usingCompatibleHash)()?this.getHash().plus(minVal).modulo(maxVal-minVal+1).toNumber():(this.getHash()+minVal)%(maxVal-minVal+1)

}}]),RandomInteger}(PlanOutOpRandom),BernoulliTrial=function(_PlanOutOpRandom3){function BernoulliTrial(){
return _classCallCheck(this,BernoulliTrial),_possibleConstructorReturn(this,Object.getPrototypeOf(BernoulliTrial).apply(this,arguments))

}return _inherits(BernoulliTrial,_PlanOutOpRandom3),_createClass(BernoulliTrial,[{key:"simpleExecute",
value:function(){var p=this.getArgNumber("p")
if(p<0||p>1)throw"Invalid probability"
return this.getUniform(0,1)<=p?1:0}}]),BernoulliTrial}(PlanOutOpRandom),BernoulliFilter=function(_PlanOutOpRandom4){
function BernoulliFilter(){return _classCallCheck(this,BernoulliFilter),_possibleConstructorReturn(this,Object.getPrototypeOf(BernoulliFilter).apply(this,arguments))

}return _inherits(BernoulliFilter,_PlanOutOpRandom4),_createClass(BernoulliFilter,[{key:"simpleExecute",
value:function(){var p=this.getArgNumber("p"),values=this.getArgList("choices")
if(p<0||p>1)throw"Invalid probability"
if(0==values.length)return[]
for(var ret=[],i=0;i<values.length;i++){var cur=values[i]
this.getUniform(0,1,cur)<=p&&ret.push(cur)}return ret}}]),BernoulliFilter}(PlanOutOpRandom),UniformChoice=function(_PlanOutOpRandom5){
function UniformChoice(){return _classCallCheck(this,UniformChoice),_possibleConstructorReturn(this,Object.getPrototypeOf(UniformChoice).apply(this,arguments))

}return _inherits(UniformChoice,_PlanOutOpRandom5),_createClass(UniformChoice,[{key:"simpleExecute",value:function(){
var choices=this.getArgList("choices")
if(0===choices.length)return[]
var rand_index
return rand_index=(0,_experimentSetup.usingCompatibleHash)()?this.getHash().modulo(choices.length).toNumber():this.getHash()%choices.length,
choices[rand_index]}}]),UniformChoice}(PlanOutOpRandom),WeightedChoice=function(_PlanOutOpRandom6){function WeightedChoice(){
return _classCallCheck(this,WeightedChoice),_possibleConstructorReturn(this,Object.getPrototypeOf(WeightedChoice).apply(this,arguments))

}return _inherits(WeightedChoice,_PlanOutOpRandom6),_createClass(WeightedChoice,[{key:"simpleExecute",
value:function(){var choices=this.getArgList("choices"),weights=this.getArgList("weights")
if(0===choices.length)return[]
var cumSum=0,cumWeights=weights.map(function(weight){return cumSum+=weight}),stopVal=this.getUniform(0,cumSum)


return(0,_utils.reduce)(cumWeights,function(retVal,curVal,i){return retVal?retVal:stopVal<=curVal?choices[i]:retVal

},null)}}]),WeightedChoice}(PlanOutOpRandom),Sample=function(_PlanOutOpRandom7){function Sample(){return _classCallCheck(this,Sample),
_possibleConstructorReturn(this,Object.getPrototypeOf(Sample).apply(this,arguments))}return _inherits(Sample,_PlanOutOpRandom7),
_createClass(Sample,[{key:"sample",value:function(array,numDraws){for(var len=array.length,stoppingPoint=len-numDraws,c=(0,
_experimentSetup.usingCompatibleHash)(),i=len-1;i>0;i--){var j
j=c?this.getHash(i).modulo(i+1).toNumber():this.getHash(i)%(i+1)
var temp=array[i]
if(array[i]=array[j],array[j]=temp,!c&&stoppingPoint===i)return array.slice(i,len)}return array.slice(0,numDraws)

}},{key:"simpleExecute",value:function(){var choices=(0,_utils.shallowCopy)(this.getArgList("choices")),numDraws=0


return numDraws=void 0!==this.args.draws?this.getArgNumber("draws"):choices.length,this.sample(choices,numDraws)

}}]),Sample}(PlanOutOpRandom)
exports["default"]={PlanOutOpRandom:PlanOutOpRandom,Sample:Sample,WeightedChoice:WeightedChoice,UniformChoice:UniformChoice,
BernoulliFilter:BernoulliFilter,BernoulliTrial:BernoulliTrial,RandomInteger:RandomInteger,RandomFloat:RandomFloat
},module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict"
function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")


return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){
if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)


subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,
writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)

}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")

}Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlanOutOpUnary=exports.PlanOutOpBinary=exports.PlanOutOpCommutative=exports.PlanOutOpSimple=exports.PlanOutOp=void 0


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i]


descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),
Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){
return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),
Constructor}}(),_utils=__webpack_require__(6),PlanOutOp=function(){function PlanOutOp(args){_classCallCheck(this,PlanOutOp),
this.args=args}return _createClass(PlanOutOp,[{key:"execute",value:function(mapper){throw"Implement this function"

}},{key:"dumpArgs",value:function(){console.log(this.args)}},{key:"getArgMixed",value:function(name){
if(void 0===this.args[name])throw"Missing argument "+name
return this.args[name]}},{key:"getArgNumber",value:function(name){var cur=this.getArgMixed(name)
if("number"!=typeof cur)throw name+" is not a number."
return cur}},{key:"getArgString",value:function(name){var cur=this.getArgMixed(name)
if("string"!=typeof cur)throw name+" is not a string."
return cur}},{key:"getArgList",value:function(name){var cur=this.getArgMixed(name)
if("[object Array]"!==Object.prototype.toString.call(cur))throw name+" is not a list"
return cur}},{key:"getArgObject",value:function(name){var cur=this.getArgMixed(name)
if("[object Object]"!==Object.prototype.toString.call(cur))throw name+" is not an object."
return cur}},{key:"getArgIndexish",value:function(name){var cur=this.getArgMixed(name),type=Object.prototype.toString.call(cur)


if("[object Object]"!==type&&"[object Array]"!==type)throw name+" is not an list or object."
return cur}}]),PlanOutOp}(),PlanOutOpSimple=function(_PlanOutOp){function PlanOutOpSimple(){return _classCallCheck(this,PlanOutOpSimple),
_possibleConstructorReturn(this,Object.getPrototypeOf(PlanOutOpSimple).apply(this,arguments))}return _inherits(PlanOutOpSimple,_PlanOutOp),
_createClass(PlanOutOpSimple,[{key:"execute",value:function(mapper){this.mapper=mapper
var self=this
return(0,_utils.forEach)(Object.keys(this.args),function(key){self.args[key]=mapper.evaluate(self.args[key])

}),this.simpleExecute()}}]),PlanOutOpSimple}(PlanOutOp),PlanOutOpUnary=function(_PlanOutOpSimple){function PlanOutOpUnary(){
return _classCallCheck(this,PlanOutOpUnary),_possibleConstructorReturn(this,Object.getPrototypeOf(PlanOutOpUnary).apply(this,arguments))

}return _inherits(PlanOutOpUnary,_PlanOutOpSimple),_createClass(PlanOutOpUnary,[{key:"simpleExecute",
value:function(){return this.unaryExecute(this.getArgMixed("value"))}},{key:"getUnaryString",value:function(){
return this.args.op}},{key:"unaryExecute",value:function(value){throw"implement this"}}]),PlanOutOpUnary

}(PlanOutOpSimple),PlanOutOpBinary=function(_PlanOutOpSimple2){function PlanOutOpBinary(){return _classCallCheck(this,PlanOutOpBinary),
_possibleConstructorReturn(this,Object.getPrototypeOf(PlanOutOpBinary).apply(this,arguments))}return _inherits(PlanOutOpBinary,_PlanOutOpSimple2),
_createClass(PlanOutOpBinary,[{key:"simpleExecute",value:function(){this.getArgMixed("left")
return this.binaryExecute(this.getArgMixed("left"),this.getArgMixed("right"))}},{key:"getInfixString",
value:function(){return this.args.op}},{key:"binaryExecute",value:function(left,right){throw"implement this"

}}]),PlanOutOpBinary}(PlanOutOpSimple),PlanOutOpCommutative=function(_PlanOutOpSimple3){function PlanOutOpCommutative(){
return _classCallCheck(this,PlanOutOpCommutative),_possibleConstructorReturn(this,Object.getPrototypeOf(PlanOutOpCommutative).apply(this,arguments))

}return _inherits(PlanOutOpCommutative,_PlanOutOpSimple3),_createClass(PlanOutOpCommutative,[{key:"simpleExecute",
value:function(){return this.commutativeExecute(this.getArgList("values"))}},{key:"getCommutativeString",
value:function(){return this.args.op}},{key:"commutativeExecute",value:function(values){throw"implement this"

}}]),PlanOutOpCommutative}(PlanOutOpSimple)
exports.PlanOutOp=PlanOutOp,exports.PlanOutOpSimple=PlanOutOpSimple,exports.PlanOutOpCommutative=PlanOutOpCommutative,
exports.PlanOutOpBinary=PlanOutOpBinary,exports.PlanOutOpUnary=PlanOutOpUnary},function(module,exports){
"use strict"
function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length,constructor=obj.constructor,proto=isFunction(constructor)&&constructor.prototype||Object.Prototype,prop="constructor"


for(has(obj,prop)&&!contains(keys,prop)&&keys.push(prop);nonEnumIdx--;)prop=nonEnumerableProps[nonEnumIdx],
prop in obj&&obj[prop]!==proto[prop]&&!contains(keys,prop)&&keys.push(prop)}Object.defineProperty(exports,"__esModule",{
value:!0})
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj

}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},trimTrailingWhitespace=function(str){
return str.replace(/^\s+|\s+$/g,"")},getParameterByName=function(name){var queryParamVal,hasLocation="undefined"!=typeof location,hasWindow="undefined"!=typeof window


if(hasLocation){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")
var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search)
queryParamVal=null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}else queryParamVal=""


return null!==queryParamVal&&void 0!==queryParamVal&&0!==queryParamVal.length||!hasWindow||void 0===window.localStorage||null===window.localStorage?queryParamVal:window.localStorage.getItem(name)

},deepCopy=function deepCopy(obj){var newObj=obj
if(obj&&"object"===("undefined"==typeof obj?"undefined":_typeof(obj))){newObj="[object Array]"===Object.prototype.toString.call(obj)?[]:{}


for(var i in obj)newObj[i]=deepCopy(obj[i])}return newObj},isObject=function(obj){var type="undefined"==typeof obj?"undefined":_typeof(obj)


return"function"===type||"object"===type&&!!obj},isArray=function(object){return Array.isArray?Array.isArray(object):"[object Array]"===Object.prototype.toString.call(planout_code)

},isFunction=function(obj){return"function"==typeof obj||!1},keys=function keys(obj){if(!isObject(obj))return[]


if(Object.keys)return Object.keys(obj)
var keys=[]
for(var key in obj)has(obj,key)&&keys.push(key)
return hasEnumBug&&collectNonEnumProps(obj,keys),keys},allKeys=function(obj){if(!isObject(obj))return[]


var keys=[]
for(var key in obj)keys.push(key)
return hasEnumBug&&collectNonEnumProps(obj,keys),keys},extendHolder=function(keysFunc,undefinedOnly){
return function(obj){var length=arguments.length
if(length<2||null==obj)return obj
for(var index=1;index<length;index++)for(var source=arguments[index],keys=keysFunc(source),l=keys.length,i=0;i<l;i++){
var key=keys[i]
undefinedOnly&&void 0!==obj[key]||(obj[key]=source[key])}return obj}},extend=extendHolder(allKeys),extendOwn=extendHolder(keys),identity=function(value){
return value},isMatch=function(object,attrs){var keys=keys(attrs),length=keys.length
if(null==object)return!length
for(var obj=Object(object),i=0;i<length;i++){var key=keys[i]
if(attrs[key]!==obj[key]||!(key in obj))return!1}return!0},matcher=function(attrs){return attrs=extendOwn({},attrs),
function(obj){return isMatch(obj,attrs)}},cb=function(value,context,argCount){return null==value?identity:isFunction(value)?optimizeCb(value,context,argCount):isObject(value)?matcher(value):property(value)

},optimizeCb=function(func,context,argCount){if(void 0===context)return func
switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)}
case 2:return function(value,other){return func.call(context,value,other)}
case 3:return function(value,index,collection){return func.call(context,value,index,collection)}
case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)

}}return function(){return func.apply(context,arguments)}},forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context)


var i,length
if(isArrayLike(obj))for(i=0,length=obj.length;i<length;i++)iteratee(obj[i],i,obj)
else{var keys=keys(obj)
for(i=0,length=keys.length;i<length;i++)iteratee(obj[keys[i]],keys[i],obj)}return obj},map=function(obj,iteratee,context){
iteratee=cb(iteratee,context)
for(var keys=!isArrayLike(obj)&&keys(obj),length=(keys||obj).length,results=Array(length),index=0;index<length;index++){
var currentKey=keys?keys[index]:index
results[index]=iteratee(obj[currentKey],currentKey,obj)}return results},reduce=function(obj,iteratee,memo,context){
iteratee=optimizeCb(iteratee,context,4)
var keys=!isArrayLike(obj)&&keys(obj),length=(keys||obj).length,index=0
for(arguments.length<3&&(memo=obj[keys?keys[index]:index],index+=1);index>=0&&index<length;index++){var currentKey=keys?keys[index]:index


memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo},shallowCopy=function(obj){return isObject(obj)?isArray(obj)?obj.slice():extend({},obj):obj

},property=function(key){return function(obj){return null==obj?void 0:obj[key]}},MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=property("length"),isArrayLike=function(collection){
var length=getLength(collection)
return"number"==typeof length&&length>=0&&length<=MAX_ARRAY_INDEX},has=function(obj,key){return null!=obj&&Object.prototype.hasOwnProperty.call(obj,key)

},hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],contains=function(obj,item,fromIndex,guard){
return isArrayLike(obj)||(obj=values(obj)),("number"!=typeof fromIndex||guard)&&(fromIndex=0),obj.indexOf(item)>=0

},range=function(max){for(var l=[],i=0;i<max;i++)l.push(i)
return l},hasKey=function(obj,key){return"undefined"!=typeof obj[key]}
exports["default"]={deepCopy:deepCopy,map:map,reduce:reduce,getParameterByName:getParameterByName,forEach:forEach,
isFunction:isFunction,trimTrailingWhitespace:trimTrailingWhitespace,hasKey:hasKey,shallowCopy:shallowCopy,
extend:extend,isObject:isObject,isArray:isArray,range:range},module.exports=exports["default"]},function(module,exports,__webpack_require__){
var hash=__webpack_require__(8)
module.exports=function(text){return hash(text+this.$salt)},module.exports.$salt="salt",module.exports.$shimmed=!0

},function(module,exports,__webpack_require__){!function(){var crypt=__webpack_require__(9),utf8=__webpack_require__(10).utf8,isBuffer=__webpack_require__(11),bin=__webpack_require__(10).bin,md5=function(message,options){
message.constructor==String?message=options&&"binary"===options.encoding?bin.stringToBytes(message):utf8.stringToBytes(message):isBuffer(message)?message=Array.prototype.slice.call(message,0):Array.isArray(message)||(message=message.toString())


for(var m=crypt.bytesToWords(message),l=8*message.length,a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<m.length;i++)m[i]=16711935&(m[i]<<8|m[i]>>>24)|4278255360&(m[i]<<24|m[i]>>>8)


m[l>>>5]|=128<<l%32,m[(l+64>>>9<<4)+14]=l
for(var FF=md5._ff,GG=md5._gg,HH=md5._hh,II=md5._ii,i=0;i<m.length;i+=16){var aa=a,bb=b,cc=c,dd=d
a=FF(a,b,c,d,m[i+0],7,-680876936),d=FF(d,a,b,c,m[i+1],12,-389564586),c=FF(c,d,a,b,m[i+2],17,606105819),
b=FF(b,c,d,a,m[i+3],22,-1044525330),a=FF(a,b,c,d,m[i+4],7,-176418897),d=FF(d,a,b,c,m[i+5],12,1200080426),
c=FF(c,d,a,b,m[i+6],17,-1473231341),b=FF(b,c,d,a,m[i+7],22,-45705983),a=FF(a,b,c,d,m[i+8],7,1770035416),
d=FF(d,a,b,c,m[i+9],12,-1958414417),c=FF(c,d,a,b,m[i+10],17,-42063),b=FF(b,c,d,a,m[i+11],22,-1990404162),
a=FF(a,b,c,d,m[i+12],7,1804603682),d=FF(d,a,b,c,m[i+13],12,-40341101),c=FF(c,d,a,b,m[i+14],17,-1502002290),
b=FF(b,c,d,a,m[i+15],22,1236535329),a=GG(a,b,c,d,m[i+1],5,-165796510),d=GG(d,a,b,c,m[i+6],9,-1069501632),
c=GG(c,d,a,b,m[i+11],14,643717713),b=GG(b,c,d,a,m[i+0],20,-373897302),a=GG(a,b,c,d,m[i+5],5,-701558691),
d=GG(d,a,b,c,m[i+10],9,38016083),c=GG(c,d,a,b,m[i+15],14,-660478335),b=GG(b,c,d,a,m[i+4],20,-405537848),
a=GG(a,b,c,d,m[i+9],5,568446438),d=GG(d,a,b,c,m[i+14],9,-1019803690),c=GG(c,d,a,b,m[i+3],14,-187363961),
b=GG(b,c,d,a,m[i+8],20,1163531501),a=GG(a,b,c,d,m[i+13],5,-1444681467),d=GG(d,a,b,c,m[i+2],9,-51403784),
c=GG(c,d,a,b,m[i+7],14,1735328473),b=GG(b,c,d,a,m[i+12],20,-1926607734),a=HH(a,b,c,d,m[i+5],4,-378558),
d=HH(d,a,b,c,m[i+8],11,-2022574463),c=HH(c,d,a,b,m[i+11],16,1839030562),b=HH(b,c,d,a,m[i+14],23,-35309556),
a=HH(a,b,c,d,m[i+1],4,-1530992060),d=HH(d,a,b,c,m[i+4],11,1272893353),c=HH(c,d,a,b,m[i+7],16,-155497632),
b=HH(b,c,d,a,m[i+10],23,-1094730640),a=HH(a,b,c,d,m[i+13],4,681279174),d=HH(d,a,b,c,m[i+0],11,-358537222),
c=HH(c,d,a,b,m[i+3],16,-722521979),b=HH(b,c,d,a,m[i+6],23,76029189),a=HH(a,b,c,d,m[i+9],4,-640364487),
d=HH(d,a,b,c,m[i+12],11,-421815835),c=HH(c,d,a,b,m[i+15],16,530742520),b=HH(b,c,d,a,m[i+2],23,-995338651),
a=II(a,b,c,d,m[i+0],6,-198630844),d=II(d,a,b,c,m[i+7],10,1126891415),c=II(c,d,a,b,m[i+14],15,-1416354905),
b=II(b,c,d,a,m[i+5],21,-57434055),a=II(a,b,c,d,m[i+12],6,1700485571),d=II(d,a,b,c,m[i+3],10,-1894986606),
c=II(c,d,a,b,m[i+10],15,-1051523),b=II(b,c,d,a,m[i+1],21,-2054922799),a=II(a,b,c,d,m[i+8],6,1873313359),
d=II(d,a,b,c,m[i+15],10,-30611744),c=II(c,d,a,b,m[i+6],15,-1560198380),b=II(b,c,d,a,m[i+13],21,1309151649),
a=II(a,b,c,d,m[i+4],6,-145523070),d=II(d,a,b,c,m[i+11],10,-1120210379),c=II(c,d,a,b,m[i+2],15,718787259),
b=II(b,c,d,a,m[i+9],21,-343485551),a=a+aa>>>0,b=b+bb>>>0,c=c+cc>>>0,d=d+dd>>>0}return crypt.endian([a,b,c,d])

}
md5._ff=function(a,b,c,d,x,s,t){var n=a+(b&c|~b&d)+(x>>>0)+t
return(n<<s|n>>>32-s)+b},md5._gg=function(a,b,c,d,x,s,t){var n=a+(b&d|c&~d)+(x>>>0)+t
return(n<<s|n>>>32-s)+b},md5._hh=function(a,b,c,d,x,s,t){var n=a+(b^c^d)+(x>>>0)+t
return(n<<s|n>>>32-s)+b},md5._ii=function(a,b,c,d,x,s,t){var n=a+(c^(b|~d))+(x>>>0)+t
return(n<<s|n>>>32-s)+b},md5._blocksize=16,md5._digestsize=16,module.exports=function(message,options){
if("undefined"!=typeof message){var digestbytes=crypt.wordsToBytes(md5(message,options))
return options&&options.asBytes?digestbytes:options&&options.asString?bin.bytesToString(digestbytes):crypt.bytesToHex(digestbytes)

}}}()},function(module,exports){!function(){var base64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",crypt={
rotl:function(n,b){return n<<b|n>>>32-b},rotr:function(n,b){return n<<32-b|n>>>b},endian:function(n){
if(n.constructor==Number)return 16711935&crypt.rotl(n,8)|4278255360&crypt.rotl(n,24)
for(var i=0;i<n.length;i++)n[i]=crypt.endian(n[i])
return n},randomBytes:function(n){for(var bytes=[];n>0;n--)bytes.push(Math.floor(256*Math.random()))
return bytes},bytesToWords:function(bytes){for(var words=[],i=0,b=0;i<bytes.length;i++,b+=8)words[b>>>5]|=bytes[i]<<24-b%32


return words},wordsToBytes:function(words){for(var bytes=[],b=0;b<32*words.length;b+=8)bytes.push(words[b>>>5]>>>24-b%32&255)


return bytes},bytesToHex:function(bytes){for(var hex=[],i=0;i<bytes.length;i++)hex.push((bytes[i]>>>4).toString(16)),
hex.push((15&bytes[i]).toString(16))
return hex.join("")},hexToBytes:function(hex){for(var bytes=[],c=0;c<hex.length;c+=2)bytes.push(parseInt(hex.substr(c,2),16))


return bytes},bytesToBase64:function(bytes){for(var base64=[],i=0;i<bytes.length;i+=3)for(var triplet=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],j=0;j<4;j++)8*i+6*j<=8*bytes.length?base64.push(base64map.charAt(triplet>>>6*(3-j)&63)):base64.push("=")


return base64.join("")},base64ToBytes:function(base64){base64=base64.replace(/[^A-Z0-9+\/]/gi,"")
for(var bytes=[],i=0,imod4=0;i<base64.length;imod4=++i%4)0!=imod4&&bytes.push((base64map.indexOf(base64.charAt(i-1))&Math.pow(2,-2*imod4+8)-1)<<2*imod4|base64map.indexOf(base64.charAt(i))>>>6-2*imod4)


return bytes}}
module.exports=crypt}()},function(module,exports){var charenc={utf8:{stringToBytes:function(str){return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)))

},bytesToString:function(bytes){return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)))}},
bin:{stringToBytes:function(str){for(var bytes=[],i=0;i<str.length;i++)bytes.push(255&str.charCodeAt(i))


return bytes},bytesToString:function(bytes){for(var str=[],i=0;i<bytes.length;i++)str.push(String.fromCharCode(bytes[i]))


return str.join("")}}}
module.exports=charenc},function(module,exports){module.exports=function(obj){return!(null==obj||!(obj._isBuffer||obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)))

}},function(module,exports,__webpack_require__){"use strict"
Object.defineProperty(exports,"__esModule",{value:!0})
var _utils=__webpack_require__(6),globalInputArgs={},experimentSpecificInputArgs={},compatibleHash=!1,fetchInputs=function(args){
return args?resolveArgs((0,_utils.shallowCopy)(args)):{}},resolveArgs=function(args){return(0,_utils.forEach)(Object.keys(args),function(key){
(0,_utils.isFunction)(args[key])&&(args[key]=args[key]())}),args},registerExperimentInput=function(key,value,experimentName){
experimentName?(experimentSpecificInputArgs[experimentName]||(experimentSpecificInputArgs[experimentName]={}),
experimentSpecificInputArgs[experimentName][key]=value):globalInputArgs[key]=value},getExperimentInputs=function(experimentName){
var inputArgs=fetchInputs(globalInputArgs)
return experimentName&&experimentSpecificInputArgs[experimentName]?(0,_utils.extend)(inputArgs,fetchInputs(experimentSpecificInputArgs[experimentName])):inputArgs

},toggleCompatibleHash=function(val){compatibleHash=val},usingCompatibleHash=function(){return compatibleHash

}
exports["default"]={registerExperimentInput:registerExperimentInput,getExperimentInputs:getExperimentInputs,
toggleCompatibleHash:toggleCompatibleHash,usingCompatibleHash:usingCompatibleHash},module.exports=exports["default"]

},function(module,exports){module.exports=function(){},module.exports["default"]=function(){}},function(module,exports,__webpack_require__){
"use strict"
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){
if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{
value:!0})
var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i]


descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),
Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){
return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),
Constructor}}(),_assignment=__webpack_require__(3),_assignment2=_interopRequireDefault(_assignment),_utils=__webpack_require__(15),_utils2=__webpack_require__(6),Interpreter=function(){
function Interpreter(serialization){var experimentSalt=arguments.length<=1||void 0===arguments[1]?"global_salt":arguments[1],inputs=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],environment=arguments[3]


_classCallCheck(this,Interpreter),this._serialization=serialization,environment?this._env=environment:this._env=new _assignment2["default"](experimentSalt),
this.experimentSalt=this._experimentSalt=experimentSalt,this._evaluated=!1,this._inExperiment=!1,this._inputs=(0,
_utils2.shallowCopy)(inputs)}return _createClass(Interpreter,[{key:"inExperiment",value:function(){return this._inExperiment

}},{key:"setEnv",value:function(newEnv){return this._env=(0,_utils2.deepCopy)(newEnv),this}},{key:"has",
value:function(name){return this._env[name]}},{key:"get",value:function(name,defaultVal){var inputVal=this._inputs[name]


inputVal||(inputVal=defaultVal)
var envVal=this._env.get(name)
return envVal?envVal:inputVal}},{key:"getParams",value:function(){if(!this._evaluated){try{this.evaluate(this._serialization)

}catch(err){err instanceof _utils.StopPlanOutException&&(this._inExperiment=err.inExperiment)}this._evaluated=!0

}return this._env.getParams()}},{key:"set",value:function(name,value){return this._env.set(name,value),
this}},{key:"setOverrides",value:function(overrides){return this._env.setOverrides(overrides),this}},{
key:"getOverrides",value:function(){return this._env.getOverrides()}},{key:"hasOverride",value:function(name){
var overrides=this.getOverrides()
return overrides&&void 0!==overrides[name]}},{key:"evaluate",value:function(planoutCode){if((0,_utils2.isObject)(planoutCode)&&planoutCode.op)return(0,
_utils.operatorInstance)(planoutCode).execute(this)
if((0,_utils2.isArray)(planoutCode)){var self=this
return(0,_utils2.map)(planoutCode,function(obj){return self.evaluate(obj)})}return planoutCode}}]),Interpreter

}()
exports["default"]=Interpreter,module.exports=exports["default"]},function(module,exports,__webpack_require__){
"use strict"
function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj
var newObj={}
if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key])


return newObj["default"]=obj,newObj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")

}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StopPlanOutException=exports.operatorInstance=exports.isOperator=exports.initFactory=void 0


var _core=__webpack_require__(16),core=_interopRequireWildcard(_core),_random=__webpack_require__(4),random=_interopRequireWildcard(_random),_utils=__webpack_require__(6),initFactory=function(){
return{literal:core.Literal,get:core.Get,set:core.Set,seq:core.Seq,"return":core.Return,index:core.Index,
array:core.Arr,equals:core.Equals,and:core.And,or:core.Or,">":core.GreaterThan,"<":core.LessThan,">=":core.GreaterThanOrEqualTo,
"<=":core.LessThanOrEqualTo,"%":core.Mod,"/":core.Divide,not:core.Not,round:core.Round,negative:core.Negative,
min:core.Min,max:core.Max,length:core.Length,coalesce:core.Coalesce,map:core.Map,cond:core.Cond,product:core.Product,
sum:core.Sum,randomFloat:random.RandomFloat,randomInteger:random.RandomInteger,bernoulliTrial:random.BernoulliTrial,
bernoulliFilter:random.BernoulliFilter,uniformChoice:random.UniformChoice,weightedChoice:random.WeightedChoice,
sample:random.Sample}},operators=initFactory(),isOperator=function(op){return(0,_utils.isObject)(op)&&op.op

},operatorInstance=function(params){var op=params.op
if(!operators[op])throw"Unknown Operator {op}"
return new operators[op](params)},StopPlanOutException=function StopPlanOutException(inExperiment){_classCallCheck(this,StopPlanOutException),
this.inExperiment=inExperiment}
exports.initFactory=initFactory,exports.isOperator=isOperator,exports.operatorInstance=operatorInstance,
exports.StopPlanOutException=StopPlanOutException},function(module,exports,__webpack_require__){"use strict"


function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")

}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")


return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){
if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)


subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,
writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)

}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Return=exports.Length=exports.Max=exports.Min=exports.Negative=exports.Not=exports.Round=exports.Divide=exports.Mod=exports.GreaterThanOrEqualTo=exports.LessThanOrEqualTo=exports.LessThan=exports.GreaterThan=exports.Equals=exports.Sum=exports.Product=exports.Or=exports.And=exports.Cond=exports.Index=exports.Coalesce=exports.Map=exports.Arr=exports.Set=exports.Seq=exports.Get=exports.Literal=void 0


var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i]


descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),
Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){
return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),
Constructor}}(),_base=__webpack_require__(5),_utils=__webpack_require__(15),_utils2=__webpack_require__(6),Literal=function(_PlanOutOp){
function Literal(){return _classCallCheck(this,Literal),_possibleConstructorReturn(this,Object.getPrototypeOf(Literal).apply(this,arguments))

}return _inherits(Literal,_PlanOutOp),_createClass(Literal,[{key:"execute",value:function(mapper){return this.getArgMixed("value")

}}]),Literal}(_base.PlanOutOp),Get=function(_PlanOutOp2){function Get(){return _classCallCheck(this,Get),
_possibleConstructorReturn(this,Object.getPrototypeOf(Get).apply(this,arguments))}return _inherits(Get,_PlanOutOp2),
_createClass(Get,[{key:"execute",value:function(mapper){return mapper.get(this.getArgString("var"))}}]),
Get}(_base.PlanOutOp),Seq=function(_PlanOutOp3){function Seq(){return _classCallCheck(this,Seq),_possibleConstructorReturn(this,Object.getPrototypeOf(Seq).apply(this,arguments))

}return _inherits(Seq,_PlanOutOp3),_createClass(Seq,[{key:"execute",value:function(mapper){(0,_utils2.forEach)(this.getArgList("seq"),function(op){
mapper.evaluate(op)})}}]),Seq}(_base.PlanOutOp),Return=function(_PlanOutOp4){function Return(){return _classCallCheck(this,Return),
_possibleConstructorReturn(this,Object.getPrototypeOf(Return).apply(this,arguments))}return _inherits(Return,_PlanOutOp4),
_createClass(Return,[{key:"execute",value:function(mapper){var value=mapper.evaluate(this.getArgMixed("value")),inExperiment=!1


throw value&&(inExperiment=!0),new _utils.StopPlanOutException(inExperiment)}}]),Return}(_base.PlanOutOp),Set=function(_PlanOutOp5){
function Set(){return _classCallCheck(this,Set),_possibleConstructorReturn(this,Object.getPrototypeOf(Set).apply(this,arguments))

}return _inherits(Set,_PlanOutOp5),_createClass(Set,[{key:"execute",value:function(mapper){var variable=this.getArgString("var"),value=this.getArgMixed("value")


mapper.hasOverride(variable)||((0,_utils.isOperator)(value)&&!value.salt&&(value.salt=variable),"experimentSalt"==variable&&(mapper.experimentSalt=value),
mapper.set(variable,mapper.evaluate(value)))}}]),Set}(_base.PlanOutOp),Arr=function(_PlanOutOp6){function Arr(){
return _classCallCheck(this,Arr),_possibleConstructorReturn(this,Object.getPrototypeOf(Arr).apply(this,arguments))

}return _inherits(Arr,_PlanOutOp6),_createClass(Arr,[{key:"execute",value:function(mapper){return(0,_utils2.map)(this.getArgList("values"),function(value){
return mapper.evaluate(value)})}}]),Arr}(_base.PlanOutOp),Coalesce=function(_PlanOutOp7){function Coalesce(){
return _classCallCheck(this,Coalesce),_possibleConstructorReturn(this,Object.getPrototypeOf(Coalesce).apply(this,arguments))

}return _inherits(Coalesce,_PlanOutOp7),_createClass(Coalesce,[{key:"execute",value:function(mapper){
for(var values=this.getArgList("values"),i=0;i<values.length;i++){var x=values[i],evalX=mapper.evaluate(x)


if(null!==evalX&&void 0!==evalX)return evalX}return null}}]),Coalesce}(_base.PlanOutOp),Index=function(_PlanOutOpSimple){
function Index(){return _classCallCheck(this,Index),_possibleConstructorReturn(this,Object.getPrototypeOf(Index).apply(this,arguments))

}return _inherits(Index,_PlanOutOpSimple),_createClass(Index,[{key:"simpleExecute",value:function(){var base=this.getArgIndexish("base"),index=this.getArgMixed("index")


return"number"==typeof index?index>=0&&index<base.length?base[index]:void 0:base[index]}}]),Index}(_base.PlanOutOpSimple),Cond=function(_PlanOutOp8){
function Cond(){return _classCallCheck(this,Cond),_possibleConstructorReturn(this,Object.getPrototypeOf(Cond).apply(this,arguments))

}return _inherits(Cond,_PlanOutOp8),_createClass(Cond,[{key:"execute",value:function(mapper){var list=this.getArgList("cond")


for(var i in list){var ifClause=list[i]["if"],thenClause=list[i].then
if(mapper.evaluate(ifClause))return mapper.evaluate(thenClause)}return null}}]),Cond}(_base.PlanOutOp),And=function(_PlanOutOp9){
function And(){return _classCallCheck(this,And),_possibleConstructorReturn(this,Object.getPrototypeOf(And).apply(this,arguments))

}return _inherits(And,_PlanOutOp9),_createClass(And,[{key:"execute",value:function(mapper){return(0,_utils2.reduce)(this.getArgList("values"),function(ret,clause){
return ret?Boolean(mapper.evaluate(clause)):ret},!0)}}]),And}(_base.PlanOutOp),Or=function(_PlanOutOp10){
function Or(){return _classCallCheck(this,Or),_possibleConstructorReturn(this,Object.getPrototypeOf(Or).apply(this,arguments))

}return _inherits(Or,_PlanOutOp10),_createClass(Or,[{key:"execute",value:function(mapper){return(0,_utils2.reduce)(this.getArgList("values"),function(ret,clause){
return ret?ret:Boolean(mapper.evaluate(clause))},!1)}}]),Or}(_base.PlanOutOp),Product=function(_PlanOutOpCommutative){
function Product(){return _classCallCheck(this,Product),_possibleConstructorReturn(this,Object.getPrototypeOf(Product).apply(this,arguments))

}return _inherits(Product,_PlanOutOpCommutative),_createClass(Product,[{key:"commutativeExecute",value:function(values){
return(0,_utils2.reduce)(values,function(memo,value){return memo*value},1)}}]),Product}(_base.PlanOutOpCommutative),Sum=function(_PlanOutOpCommutative2){
function Sum(){return _classCallCheck(this,Sum),_possibleConstructorReturn(this,Object.getPrototypeOf(Sum).apply(this,arguments))

}return _inherits(Sum,_PlanOutOpCommutative2),_createClass(Sum,[{key:"commutativeExecute",value:function(values){
return(0,_utils2.reduce)(values,function(memo,value){return memo+value},0)}}]),Sum}(_base.PlanOutOpCommutative),Equals=function(_PlanOutOpBinary){
function Equals(){return _classCallCheck(this,Equals),_possibleConstructorReturn(this,Object.getPrototypeOf(Equals).apply(this,arguments))

}return _inherits(Equals,_PlanOutOpBinary),_createClass(Equals,[{key:"getInfixString",value:function(){
return"=="}},{key:"binaryExecute",value:function(left,right){return left===right}}]),Equals}(_base.PlanOutOpBinary),GreaterThan=function(_PlanOutOpBinary2){
function GreaterThan(){return _classCallCheck(this,GreaterThan),_possibleConstructorReturn(this,Object.getPrototypeOf(GreaterThan).apply(this,arguments))

}return _inherits(GreaterThan,_PlanOutOpBinary2),_createClass(GreaterThan,[{key:"binaryExecute",value:function(left,right){
return left>right}}]),GreaterThan}(_base.PlanOutOpBinary),LessThan=function(_PlanOutOpBinary3){function LessThan(){
return _classCallCheck(this,LessThan),_possibleConstructorReturn(this,Object.getPrototypeOf(LessThan).apply(this,arguments))

}return _inherits(LessThan,_PlanOutOpBinary3),_createClass(LessThan,[{key:"binaryExecute",value:function(left,right){
return left<right}}]),LessThan}(_base.PlanOutOpBinary),LessThanOrEqualTo=function(_PlanOutOpBinary4){
function LessThanOrEqualTo(){return _classCallCheck(this,LessThanOrEqualTo),_possibleConstructorReturn(this,Object.getPrototypeOf(LessThanOrEqualTo).apply(this,arguments))

}return _inherits(LessThanOrEqualTo,_PlanOutOpBinary4),_createClass(LessThanOrEqualTo,[{key:"binaryExecute",
value:function(left,right){return left<=right}}]),LessThanOrEqualTo}(_base.PlanOutOpBinary),GreaterThanOrEqualTo=function(_PlanOutOpBinary5){
function GreaterThanOrEqualTo(){return _classCallCheck(this,GreaterThanOrEqualTo),_possibleConstructorReturn(this,Object.getPrototypeOf(GreaterThanOrEqualTo).apply(this,arguments))

}return _inherits(GreaterThanOrEqualTo,_PlanOutOpBinary5),_createClass(GreaterThanOrEqualTo,[{key:"binaryExecute",
value:function(left,right){return left>=right}}]),GreaterThanOrEqualTo}(_base.PlanOutOpBinary),Mod=function(_PlanOutOpBinary6){
function Mod(){return _classCallCheck(this,Mod),_possibleConstructorReturn(this,Object.getPrototypeOf(Mod).apply(this,arguments))

}return _inherits(Mod,_PlanOutOpBinary6),_createClass(Mod,[{key:"binaryExecute",value:function(left,right){
return left%right}}]),Mod}(_base.PlanOutOpBinary),Divide=function(_PlanOutOpBinary7){function Divide(){
return _classCallCheck(this,Divide),_possibleConstructorReturn(this,Object.getPrototypeOf(Divide).apply(this,arguments))

}return _inherits(Divide,_PlanOutOpBinary7),_createClass(Divide,[{key:"binaryExecute",value:function(left,right){
return parseFloat(left)/parseFloat(right)}}]),Divide}(_base.PlanOutOpBinary),Round=function(_PlanOutOpBinary8){
function Round(){return _classCallCheck(this,Round),_possibleConstructorReturn(this,Object.getPrototypeOf(Round).apply(this,arguments))

}return _inherits(Round,_PlanOutOpBinary8),_createClass(Round,[{key:"unaryExecute",value:function(value){
return Math.round(value)}}]),Round}(_base.PlanOutOpBinary),Not=function(_PlanOutOpUnary){function Not(){
return _classCallCheck(this,Not),_possibleConstructorReturn(this,Object.getPrototypeOf(Not).apply(this,arguments))

}return _inherits(Not,_PlanOutOpUnary),_createClass(Not,[{key:"getUnaryString",value:function(){return"!"

}},{key:"unaryExecute",value:function(value){return!value}}]),Not}(_base.PlanOutOpUnary),Negative=function(_PlanOutOpUnary2){
function Negative(){return _classCallCheck(this,Negative),_possibleConstructorReturn(this,Object.getPrototypeOf(Negative).apply(this,arguments))

}return _inherits(Negative,_PlanOutOpUnary2),_createClass(Negative,[{key:"getUnaryString",value:function(){
return"-"}},{key:"unaryExecute",value:function(value){return 0-value}}]),Negative}(_base.PlanOutOpUnary),Min=function(_PlanOutOpCommutative3){
function Min(){return _classCallCheck(this,Min),_possibleConstructorReturn(this,Object.getPrototypeOf(Min).apply(this,arguments))

}return _inherits(Min,_PlanOutOpCommutative3),_createClass(Min,[{key:"commutativeExecute",value:function(values){
return Math.min.apply(null,values)}}]),Min}(_base.PlanOutOpCommutative),Max=function(_PlanOutOpCommutative4){
function Max(){return _classCallCheck(this,Max),_possibleConstructorReturn(this,Object.getPrototypeOf(Max).apply(this,arguments))

}return _inherits(Max,_PlanOutOpCommutative4),_createClass(Max,[{key:"commutativeExecute",value:function(values){
return Math.max.apply(null,values)}}]),Max}(_base.PlanOutOpCommutative),Length=function(_PlanOutOpUnary3){
function Length(){return _classCallCheck(this,Length),_possibleConstructorReturn(this,Object.getPrototypeOf(Length).apply(this,arguments))

}return _inherits(Length,_PlanOutOpUnary3),_createClass(Length,[{key:"unaryExecute",value:function(value){
return value.length}}]),Length}(_base.PlanOutOpUnary),Map=function(_PlanOutOpSimple2){function Map(){
return _classCallCheck(this,Map),_possibleConstructorReturn(this,Object.getPrototypeOf(Map).apply(this,arguments))

}return _inherits(Map,_PlanOutOpSimple2),_createClass(Map,[{key:"simpleExecute",value:function(){var copy=(0,
_utils2.deepCopy)(this.args)
return delete copy.op,delete copy.salt,copy}}]),Map}(_base.PlanOutOpSimple)
exports.Literal=Literal,exports.Get=Get,exports.Seq=Seq,exports.Set=Set,exports.Arr=Arr,exports.Map=Map,
exports.Coalesce=Coalesce,exports.Index=Index,exports.Cond=Cond,exports.And=And,exports.Or=Or,exports.Product=Product,
exports.Sum=Sum,exports.Equals=Equals,exports.GreaterThan=GreaterThan,exports.LessThan=LessThan,exports.LessThanOrEqualTo=LessThanOrEqualTo,
exports.GreaterThanOrEqualTo=GreaterThanOrEqualTo,exports.Mod=Mod,exports.Divide=Divide,exports.Round=Round,
exports.Not=Not,exports.Negative=Negative,exports.Min=Min,exports.Max=Max,exports.Length=Length,exports.Return=Return

},function(module,exports,__webpack_require__){"use strict"
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){
if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){
if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){
if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)


subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,
writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)

}Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleNamespace=exports.Namespace=void 0


var _get=function get(object,property,receiver){null===object&&(object=Function.prototype)
var desc=Object.getOwnPropertyDescriptor(object,property)
if(void 0===desc){var parent=Object.getPrototypeOf(object)
return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value
var getter=desc.get
if(void 0!==getter)return getter.call(receiver)},_createClass=function(){function defineProperties(target,props){
for(var i=0;i<props.length;i++){var descriptor=props[i]
descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),
Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){
return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),
Constructor}}(),_experiment=__webpack_require__(2),_experiment2=_interopRequireDefault(_experiment),_assignment=__webpack_require__(3),_assignment2=_interopRequireDefault(_assignment),_random=__webpack_require__(4),_utils=__webpack_require__(6),_experimentSetup=__webpack_require__(12),DefaultExperiment=function(_Experiment){
function DefaultExperiment(){return _classCallCheck(this,DefaultExperiment),_possibleConstructorReturn(this,Object.getPrototypeOf(DefaultExperiment).apply(this,arguments))

}return _inherits(DefaultExperiment,_Experiment),_createClass(DefaultExperiment,[{key:"configureLogger",
value:function(){}},{key:"setup",value:function(){this.name="test_name"}},{key:"log",value:function(data){}
},{key:"getParamNames",value:function(){return this.getDefaultParamNames()}},{key:"previouslyLogged",
value:function(){return!0}},{key:"assign",value:function(params,args){}}]),DefaultExperiment}(_experiment2["default"]),Namespace=function(){
function Namespace(){_classCallCheck(this,Namespace)}return _createClass(Namespace,[{key:"addExperiment",
value:function(name,obj,segments){throw"IMPLEMENT addExperiment"}},{key:"removeExperiment",value:function(name){
throw"IMPLEMENT removeExperiment"}},{key:"setAutoExposureLogging",value:function(value){throw"IMPLEMENT setAutoExposureLogging"

}},{key:"inExperiment",value:function(){throw"IMPLEMENT inExperiment"}},{key:"get",value:function(name,defaultVal){
throw"IMPLEMENT get"}},{key:"logExposure",value:function(extras){throw"IMPLEMENT logExposure"}},{key:"logEvent",
value:function(eventType,extras){throw"IMPLEMENT logEvent"}},{key:"requireExperiment",value:function(){
this._experiment||this._assignExperiment()}},{key:"requireDefaultExperiment",value:function(){this._defaultExperiment||this._assignDefaultExperiment()

}}]),Namespace}(),SimpleNamespace=function(_Namespace){function SimpleNamespace(args){_classCallCheck(this,SimpleNamespace)


var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(SimpleNamespace).call(this,args))
return _this2.name=_this2.getDefaultNamespaceName(),_this2.inputs=args||{},_this2.numSegments=1,_this2.segmentAllocations={},
_this2.currentExperiments={},_this2._experiment=null,_this2._defaultExperiment=null,_this2.defaultExperimentClass=DefaultExperiment,
_this2._inExperiment=!1,_this2.setupDefaults(),_this2.setup(),_this2.availableSegments=(0,_utils.range)(_this2.numSegments),
_this2.setupExperiments(),_this2}return _inherits(SimpleNamespace,_Namespace),_createClass(SimpleNamespace,[{
key:"setupDefaults",value:function(){}},{key:"setup",value:function(){throw"IMPLEMENT setup"}},{key:"setupExperiments",
value:function(){throw"IMPLEMENT setupExperiments"}},{key:"getPrimaryUnit",value:function(){return this._primaryUnit

}},{key:"allowedOverride",value:function(){return!1}},{key:"getOverrides",value:function(){return{}}},{
key:"setPrimaryUnit",value:function(value){this._primaryUnit=value}},{key:"addExperiment",value:function(name,expObject,segments){
var numberAvailable=this.availableSegments.length
if(numberAvailable<segments)return!1
if(void 0!==this.currentExperiments[name])return!1
var a=new _assignment2["default"](this.name)
a.set("sampled_segments",new _random.Sample({choices:this.availableSegments,draws:segments,unit:name}))


for(var sample=a.get("sampled_segments"),i=0;i<sample.length;i++){this.segmentAllocations[sample[i]]=name


var currentIndex=this.availableSegments.indexOf(sample[i])
this.availableSegments[currentIndex]=this.availableSegments[numberAvailable-1],this.availableSegments.splice(numberAvailable-1,1),
numberAvailable-=1}this.currentExperiments[name]=expObject}},{key:"removeExperiment",value:function(name){
var _this3=this
return void 0!==this.currentExperiments[name]&&((0,_utils.forEach)(Object.keys(this.segmentAllocations),function(cur){
_this3.segmentAllocations[cur]===name&&(delete _this3.segmentAllocations[cur],_this3.availableSegments.push(cur))

}),delete this.currentExperiments[name],!0)}},{key:"getSegment",value:function(){var a=new _assignment2["default"](this.name),segment=new _random.RandomInteger({
min:0,max:this.numSegments-1,unit:this.inputs[this.getPrimaryUnit()]})
return a.set("segment",segment),a.get("segment")}},{key:"_assignExperiment",value:function(){this.inputs=(0,
_utils.extend)(this.inputs,(0,_experimentSetup.getExperimentInputs)(this.getName()))
var segment=this.getSegment()
if(void 0!==this.segmentAllocations[segment]){var experimentName=this.segmentAllocations[segment]
this._assignExperimentObject(experimentName)}}},{key:"_assignExperimentObject",value:function(experimentName){
var experiment=new this.currentExperiments[experimentName](this.inputs)
experiment.setName(this.getName()+"-"+experimentName),experiment.setSalt(this.getName()+"-"+experimentName),
this._experiment=experiment,this._inExperiment=experiment.inExperiment(),this._inExperiment||this._assignDefaultExperiment()

}},{key:"_assignDefaultExperiment",value:function(){this._defaultExperiment=new this.defaultExperimentClass(this.inputs)

}},{key:"defaultGet",value:function(name,default_val){return _get(Object.getPrototypeOf(SimpleNamespace.prototype),"requireDefaultExperiment",this).call(this),
this._defaultExperiment.get(name,default_val)}},{key:"getName",value:function(){return this.name}},{key:"setName",
value:function(name){this.name=name}},{key:"previouslyLogged",value:function(){return this._experiment?this._experiment.previouslyLogged():null

}},{key:"inExperiment",value:function(){return _get(Object.getPrototypeOf(SimpleNamespace.prototype),"requireExperiment",this).call(this),
this._inExperiment}},{key:"setAutoExposureLogging",value:function(value){this._autoExposureLoggingSet=value,
this._defaultExperiment&&this._defaultExperiment.setAutoExposureLogging(value),this._experiment&&this._experiment.setAutoExposureLogging(value)

}},{key:"setGlobalOverride",value:function(name){var globalOverrides=this.getOverrides()
if(globalOverrides&&(0,_utils.hasKey)(globalOverrides,name)){var overrides=globalOverrides[name]
overrides&&(0,_utils.hasKey)(this.currentExperiments,overrides.experimentName)&&(this._assignExperimentObject(overrides.experimentName),
this._experiment.addOverride(name,overrides.value))}}},{key:"setLocalOverride",value:function(name){var experimentName=(0,
_utils.getParameterByName)("experimentOverride")
experimentName&&(0,_utils.hasKey)(this.currentExperiments,experimentName)&&(this._assignExperimentObject(experimentName),
(0,_utils.getParameterByName)(name)&&this._experiment.addOverride(name,(0,_utils.getParameterByName)(name)))

}},{key:"getParams",value:function(experimentName){return _get(Object.getPrototypeOf(SimpleNamespace.prototype),"requireExperiment",this).call(this),
this._experiment&&this.getOriginalExperimentName()===experimentName?this._experiment.getParams():null

}},{key:"getOriginalExperimentName",value:function(){return this._experiment?this._experiment.getName().split("-")[1]:null

}},{key:"get",value:function(name,defaultVal){return _get(Object.getPrototypeOf(SimpleNamespace.prototype),"requireExperiment",this).call(this),
this.allowedOverride()&&this.setGlobalOverride(name),this.setLocalOverride(name),this._experiment?(void 0!==this._autoExposureLoggingSet&&this._experiment.setAutoExposureLogging(this._autoExposureLoggingSet),
this._experiment.get(name,this.defaultGet(name,defaultVal))):this.defaultGet(name,defaultVal)}},{key:"logExposure",
value:function(extras){_get(Object.getPrototypeOf(SimpleNamespace.prototype),"requireExperiment",this).call(this),
this._experiment&&this._experiment.logExposure(extras)}},{key:"logEvent",value:function(eventType,extras){
_get(Object.getPrototypeOf(SimpleNamespace.prototype),"requireExperiment",this).call(this),this._experiment&&this._experiment.logEvent(eventType,extras)

}},{key:"getDefaultNamespaceName",value:function(){if((0,_utils.isObject)(this)&&this.constructor&&this!==this.window){
var arr=this.constructor.toString().match(/function\s*(\w+)/)
if(arr&&2===arr.length)return arr[1]}return"GenericNamespace"}}]),SimpleNamespace}(Namespace)
exports.Namespace=Namespace,exports.SimpleNamespace=SimpleNamespace}])})})


define("plugins/c9.ide.abtesting/abtesting",[],function(require,exports,module){"use strict"
function main(options,imports,register){function create(name,choices,options){var experiment=outplan.create(name,choices,options)


return experiment.expose=expose.bind(null,name),experiment}function expose(experimentName,overrideUserId,options){
return overrideUserId&&"object"==typeof overrideUserId?expose(experimentName,null,options):outplan.expose(experimentName,null==overrideUserId?userId:overrideUserId,options)

}function isUserCreatedAfter(experimentDate){var diffDays=(experimentDate-Date.now())/MS_PER_DAY
if(diffDays>20)throw new Error("Passed a date far in the future to isUserCreatedAfter()")
return info.getUser().date_add>experimentDate}var userId,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),info=imports.info,analytics=imports["c9.analytics"],outplan=require("outplan"),MS_PER_DAY=864e5


plugin.on("load",function(){userId=info.getUser().id,outplan.configure({logFunction:function(e){var label=e.name+" - "+e.event


analytics.track(label,{variation:e.params.name})}})}),plugin.on("unload",function(){userId=void 0}),plugin.freezePublicAPI({
create:create,expose:expose,isUserCreatedAfter:isUserCreatedAfter}),register(null,{abtesting:plugin})

}return main.consumes=["Plugin","info","c9.analytics"],main.provides=["abtesting"],main})


define("plugins/c9.ide.local/c9projectmanager",[],function(require,exports,module){function main(options,imports,register){
function load(){function updateC9Projects(type){updating[type]-Date.now()<500||(updating[type]=Date.now(),
info.getUser(function(err,user){return err?console.error(err):void api.user.get("projects"+type,function(err,projects){
var c=0,name="user_"+user.id,menuName=name+(type?"/Shared Workspaces/":"/My Workspaces/")
if(menus.remove(menuName),err||!projects)return void menus.addItemByPath(menuName+"Error while loading workspace list",new ui.item({
disabled:!0}),c,plugin)
projects&&projects.length?projects.map(function(x){return{name:x.owner.name+"/"+x.name,projectName:x.name,
pid:x.pid,isRemote:!0}}).sort(function(a,b){return a.name.localeCompare(b.name)}).forEach(function(x){
addMenuItem(menuName,x,c+=100)}):addDisabled(menuName,type?"You have no Shared workspaces":"You have no workspaces"),
updating[type]=Date.now()
var data=menus.get(menuName.slice(0,-1))
data.menu.visible&&data.item.$submenu()})}))}function addMenuItem(menu,value,c){menus.addItemByPath(menu+menus.escape(value.name),new ui.item({
value:value}),c||0,plugin)}function addDisabled(name,path){menus.addItemByPath(name+path,new ui.item({
disabled:!0}),0,plugin)}return!loaded&&(loaded=!0,commands.addCommand({name:"newWorkspace",exec:function(){
window.open(c9.dashboardUrl+"/../new")}},plugin),void login.on("ready",function(e){var name="user_"+e.id,c=0


menus.addItemByPath(name+"/My Workspaces/",new ui.menu({"onprop.visible":function(e){e.value&&updateC9Projects("")

},onitemclick:function(e){var options=e.relatedNode.value
options&&window.open("/"+options.name)}}),c+=100,plugin),menus.addItemByPath(name+"/Shared Workspaces/",new ui.menu({
"onprop.visible":function(e){e.value&&updateC9Projects("/shared")},onitemclick:function(e){var options=e.relatedNode.value


options&&window.open("/"+options.name)}}),c+=100,plugin),menus.addItemByPath(name+"/New Workspace",new ui.item({
command:"newWorkspace"}),c+=100,plugin),addDisabled(name,"/My Workspaces/Loading workspace list..."),
addDisabled(name,"/Shared Workspaces/Loading workspace list..."),menus.addItemByPath(name+"/~",new ui.divider,c+=100,plugin)

}))}var commands=imports.commands,Plugin=imports.Plugin,menus=imports.menus,login=imports.login,info=imports.info,api=imports.api,ui=imports.ui,c9=imports.c9,plugin=new Plugin("Ajax.org",main.consumes),updating={},loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,updating={}}),plugin.freezePublicAPI({}),register(null,{projectManager:plugin
})}return main.consumes=["c9","Plugin","info","menus","ui","commands","login","auth","settings","api"],
main.provides=["projectManager"],main})


define("plugins/c9.ide.services/linked-services",[],function(require,exports,module){"use strict"
function main(options,imports,register){function loadServices(){api.project.get("services",function(err,_services){
return err?(state=INITIALIZED,void flush(err)):(services=_services,accounts=Object.keys(services).map(function(name){
return services[name]}).reduce(function(map,service){return service.accounts.forEach(function(account){
map[account.id]=account}),map},{}),state=READY,void flush())})}function unload(){accounts=null,services=null,
state=INITIALIZED,pending=[]}function whenLoaded(handler){switch(state){case INITIALIZED:loadServices(),
pending.push(handler)
break
case LOADING:pending.push(handler)
break
case READY:handler()}}function flush(err){pending.forEach(function(handler){handler(err)}),pending=[]

}function getServices(callback){whenLoaded(function(err){callback(err,services)})}function getAccessToken(serviceId,callback){
whenLoaded(function(err){if(err)return callback(err)
var account=accounts[serviceId]
return account?account.accessToken?callback(null,account.accessToken):void api.project.get("services/"+encodeURIComponent(serviceId)+"/token",function(err,token){
return err?callback(err):(account.accessToken=token,setTimeout(function(){account.accessToken=null},1e3*(token.expires_in-10)),
void callback(null,token))}):callback(new Error("Account with service ID "+serviceId+" not found."))})

}var services,accounts,Plugin=imports.Plugin,api=imports.api,plugin=new Plugin("Ajax.org",main.consumes),INITIALIZED=1,LOADING=2,READY=3,state=INITIALIZED,pending=[]


plugin.on("unload",unload),plugin.freezePublicAPI({getServices:getServices,getAccessToken:getAccessToken
}),register(null,{"linked-services":plugin})}return main.consumes=["Plugin","api"],main.provides=["linked-services"],
main})


define("ace/lib/oop",[],function(require,exports,module){"use strict"
exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{
constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){
for(var key in mixin)obj[key]=mixin[key]
return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}})


define("ace/lib/dom",[],function(require,exports,module){"use strict"
var XHTML_NS="http://www.w3.org/1999/xhtml"
return exports.getDocumentHead=function(doc){return doc||(doc=document),doc.head||doc.getElementsByTagName("head")[0]||doc.documentElement

},exports.createElement=function(tag,ns){return document.createElementNS?document.createElementNS(ns||XHTML_NS,tag):document.createElement(tag)

},exports.hasCssClass=function(el,name){var classes=(el.className+"").split(/\s+/g)
return classes.indexOf(name)!==-1},exports.addCssClass=function(el,name){exports.hasCssClass(el,name)||(el.className+=" "+name)

},exports.removeCssClass=function(el,name){for(var classes=el.className.split(/\s+/g);;){var index=classes.indexOf(name)


if(index==-1)break
classes.splice(index,1)}el.className=classes.join(" ")},exports.toggleCssClass=function(el,name){for(var classes=el.className.split(/\s+/g),add=!0;;){
var index=classes.indexOf(name)
if(index==-1)break
add=!1,classes.splice(index,1)}return add&&classes.push(name),el.className=classes.join(" "),add},exports.setCssClass=function(node,className,include){
include?exports.addCssClass(node,className):exports.removeCssClass(node,className)},exports.hasCssString=function(id,doc){
var sheets,index=0
if(doc=doc||document,doc.createStyleSheet&&(sheets=doc.styleSheets)){for(;index<sheets.length;)if(sheets[index++].owningElement.id===id)return!0

}else if(sheets=doc.getElementsByTagName("style"))for(;index<sheets.length;)if(sheets[index++].id===id)return!0


return!1},exports.importCssString=function(cssText,id,doc){if(doc=doc||document,id&&exports.hasCssString(id,doc))return null


var style
id&&(cssText+="\n/*# sourceURL=ace/css/"+id+" */"),doc.createStyleSheet?(style=doc.createStyleSheet(),
style.cssText=cssText,id&&(style.owningElement.id=id)):(style=exports.createElement("style"),style.appendChild(doc.createTextNode(cssText)),
id&&(style.id=id),exports.getDocumentHead(doc).appendChild(style))},exports.importCssStylsheet=function(uri,doc){
if(doc.createStyleSheet)doc.createStyleSheet(uri)
else{var link=exports.createElement("link")
link.rel="stylesheet",link.href=uri,exports.getDocumentHead(doc).appendChild(link)}},exports.getInnerWidth=function(element){
return parseInt(exports.computedStyle(element,"paddingLeft"),10)+parseInt(exports.computedStyle(element,"paddingRight"),10)+element.clientWidth

},exports.getInnerHeight=function(element){return parseInt(exports.computedStyle(element,"paddingTop"),10)+parseInt(exports.computedStyle(element,"paddingBottom"),10)+element.clientHeight

},exports.scrollbarWidth=function(document){var inner=exports.createElement("ace_inner")
inner.style.width="100%",inner.style.minWidth="0px",inner.style.height="200px",inner.style.display="block"


var outer=exports.createElement("ace_outer"),style=outer.style
style.position="absolute",style.left="-10000px",style.overflow="hidden",style.width="200px",style.minWidth="0px",
style.height="150px",style.display="block",outer.appendChild(inner)
var body=document.documentElement
body.appendChild(outer)
var noScrollbar=inner.offsetWidth
style.overflow="scroll"
var withScrollbar=inner.offsetWidth
return noScrollbar==withScrollbar&&(withScrollbar=outer.clientWidth),body.removeChild(outer),noScrollbar-withScrollbar

},"undefined"==typeof document?void(exports.importCssString=function(){}):(void 0!==window.pageYOffset?(exports.getPageScrollTop=function(){
return window.pageYOffset},exports.getPageScrollLeft=function(){return window.pageXOffset}):(exports.getPageScrollTop=function(){
return document.body.scrollTop},exports.getPageScrollLeft=function(){return document.body.scrollLeft}),
window.getComputedStyle?exports.computedStyle=function(element,style){return style?(window.getComputedStyle(element,"")||{})[style]||"":window.getComputedStyle(element,"")||{}

}:exports.computedStyle=function(element,style){return style?element.currentStyle[style]:element.currentStyle

},exports.setInnerHtml=function(el,innerHtml){var element=el.cloneNode(!1)
return element.innerHTML=innerHtml,el.parentNode.replaceChild(element,el),element},"textContent"in document.documentElement?(exports.setInnerText=function(el,innerText){
el.textContent=innerText},exports.getInnerText=function(el){return el.textContent}):(exports.setInnerText=function(el,innerText){
el.innerText=innerText},exports.getInnerText=function(el){return el.innerText}),void(exports.getParentWindow=function(document){
return document.defaultView||document.parentWindow}))})


define("ace/range",[],function(require,exports,module){"use strict"
var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){
this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){
return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column

},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"

},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){
var cmp,end=range.end,start=range.start
return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):cmp==-1?-2:(cmp=this.compare(start.row,start.column),
cmp==-1?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){
return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){
var cmp=this.compareRange(range)
return cmp==-1||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column

},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){
"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)

},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,
this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)&&(!this.isEnd(row,column)&&!this.isStart(row,column))

},this.insideStart=function(row,column){return 0==this.compare(row,column)&&!this.isEnd(row,column)},
this.insideEnd=function(row,column){return 0==this.compare(row,column)&&!this.isStart(row,column)},this.compare=function(row,column){
return this.isMultiLine()||row!==this.start.row?row<this.start.row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?column<=this.end.column?0:1:0:column<this.start.column?-1:column>this.end.column?1:0

},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)

},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)

},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)

},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0}
else if(this.end.row<firstRow)var end={row:firstRow,column:0}
if(this.start.row>lastRow)var start={row:lastRow+1,column:0}
else if(this.start.row<firstRow)var start={row:firstRow,column:0}
return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column)


if(0==cmp)return this
if(cmp==-1)var start={row:row,column:column}
else var end={row:row,column:column}
return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column

},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)

},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)

},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end)


return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){
this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),
Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,
Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range})


define("ace/line_widgets",[],function(require,exports,module){"use strict"
function LineWidgets(session){this.session=session,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,
this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),
this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],
this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),
this.session.on("changeEditor",this.$onChangeEditor)}var dom=(require("./lib/oop"),require("./lib/dom"))


require("./range").Range;(function(){this.getRowLength=function(row){var h
return h=this.lineWidgets?this.lineWidgets[row]&&this.lineWidgets[row].rowCount||0:0,this.$useWrapMode&&this.$wrapData[row]?this.$wrapData[row].length+1+h:1+h

},this.$getWidgetScreenLength=function(){var screenRows=0
return this.lineWidgets.forEach(function(w){w&&w.rowCount&&!w.hidden&&(screenRows+=w.rowCount)}),screenRows

},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(editor){editor&&editor.widgetManager&&editor.widgetManager!=this&&editor.widgetManager.detach(),
this.editor!=editor&&(this.detach(),this.editor=editor,editor&&(editor.widgetManager=this,editor.renderer.on("beforeRender",this.measureWidgets),
editor.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(e){var editor=this.editor


if(editor){this.editor=null,editor.widgetManager=null,editor.renderer.off("beforeRender",this.measureWidgets),
editor.renderer.off("afterRender",this.renderWidgets)
var lineWidgets=this.session.lineWidgets
lineWidgets&&lineWidgets.forEach(function(w){w&&w.el&&w.el.parentNode&&(w._inDocument=!1,w.el.parentNode.removeChild(w.el))

})}},this.updateOnFold=function(e,session){var lineWidgets=session.lineWidgets
if(lineWidgets&&e.action){for(var fold=e.data,start=fold.start.row,end=fold.end.row,hide="add"==e.action,i=start+1;i<end;i++)lineWidgets[i]&&(lineWidgets[i].hidden=hide)


lineWidgets[end]&&(hide?lineWidgets[start]?lineWidgets[end].hidden=hide:lineWidgets[start]=lineWidgets[end]:(lineWidgets[start]==lineWidgets[end]&&(lineWidgets[start]=void 0),
lineWidgets[end].hidden=hide))}},this.updateOnChange=function(delta){var lineWidgets=this.session.lineWidgets


if(lineWidgets){var startRow=delta.start.row,len=delta.end.row-startRow
if(0===len);else if("remove"==delta.action){var removed=lineWidgets.splice(startRow+1,len)
removed.forEach(function(w){w&&this.removeLineWidget(w)},this),this.$updateRows()}else{var args=new Array(len)


args.unshift(startRow,0),lineWidgets.splice.apply(lineWidgets,args),this.$updateRows()}}},this.$updateRows=function(){
var lineWidgets=this.session.lineWidgets
if(lineWidgets){var noWidgets=!0
lineWidgets.forEach(function(w,i){if(w)for(noWidgets=!1,w.row=i;w.$oldWidget;)w.$oldWidget.row=i,w=w.$oldWidget

}),noWidgets&&(this.session.lineWidgets=null)}},this.addLineWidget=function(w){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()))


var old=this.session.lineWidgets[w.row]
old&&(w.$oldWidget=old,old.el&&old.el.parentNode&&(old.el.parentNode.removeChild(old.el),old._inDocument=!1)),
this.session.lineWidgets[w.row]=w,w.session=this.session
var renderer=this.editor.renderer
w.html&&!w.el&&(w.el=dom.createElement("div"),w.el.innerHTML=w.html),w.el&&(dom.addCssClass(w.el,"ace_lineWidgetContainer"),
w.el.style.position="absolute",w.el.style.zIndex=5,renderer.container.appendChild(w.el),w._inDocument=!0),
w.coverGutter||(w.el.style.zIndex=3),null==w.pixelHeight&&(w.pixelHeight=w.el.offsetHeight),null==w.rowCount&&(w.rowCount=w.pixelHeight/renderer.layerConfig.lineHeight)


var fold=this.session.getFoldAt(w.row,0)
if(w.$fold=fold,fold){var lineWidgets=this.session.lineWidgets
w.row!=fold.end.row||lineWidgets[fold.start.row]?w.hidden=!0:lineWidgets[fold.start.row]=w}return this.session._emit("changeFold",{
data:{start:{row:w.row}}}),this.$updateRows(),this.renderWidgets(null,renderer),this.onWidgetChanged(w),
w},this.removeLineWidget=function(w){if(w._inDocument=!1,w.session=null,w.el&&w.el.parentNode&&w.el.parentNode.removeChild(w.el),
w.editor&&w.editor.destroy)try{w.editor.destroy()}catch(e){}if(this.session.lineWidgets){var w1=this.session.lineWidgets[w.row]


if(w1==w)this.session.lineWidgets[w.row]=w.$oldWidget,w.$oldWidget&&this.onWidgetChanged(w.$oldWidget)
else for(;w1;){if(w1.$oldWidget==w){w1.$oldWidget=w.$oldWidget
break}w1=w1.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:w.row}}}),this.$updateRows()

},this.getWidgetsAtRow=function(row){for(var lineWidgets=this.session.lineWidgets,w=lineWidgets&&lineWidgets[row],list=[];w;)list.push(w),
w=w.$oldWidget
return list},this.onWidgetChanged=function(w){this.session._changedWidgets.push(w),this.editor&&this.editor.renderer.updateFull()

},this.measureWidgets=function(e,renderer){var changedWidgets=this.session._changedWidgets,config=renderer.layerConfig


if(changedWidgets&&changedWidgets.length){for(var min=1/0,i=0;i<changedWidgets.length;i++){var w=changedWidgets[i]


if(w&&w.el&&w.session==this.session){if(!w._inDocument){if(this.session.lineWidgets[w.row]!=w)continue


w._inDocument=!0,renderer.container.appendChild(w.el)}w.h=w.el.offsetHeight,w.fixedWidth||(w.w=w.el.offsetWidth,
w.screenWidth=Math.ceil(w.w/config.characterWidth))
var rowCount=w.h/config.lineHeight
w.coverLine&&(rowCount-=this.session.getRowLineCount(w.row),rowCount<0&&(rowCount=0)),w.rowCount!=rowCount&&(w.rowCount=rowCount,
w.row<min&&(min=w.row))}}min!=1/0&&(this.session._emit("changeFold",{data:{start:{row:min}}}),this.session.lineWidgetWidth=null),
this.session._changedWidgets=[]}},this.renderWidgets=function(e,renderer){var config=renderer.layerConfig,lineWidgets=this.session.lineWidgets


if(lineWidgets){for(var first=Math.min(this.firstRow,config.firstRow),last=Math.max(this.lastRow,config.lastRow,lineWidgets.length);first>0&&!lineWidgets[first];)first--


this.firstRow=config.firstRow,this.lastRow=config.lastRow,renderer.$cursorLayer.config=config
for(var i=first;i<=last;i++){var w=lineWidgets[i]
if(w&&w.el)if(w.hidden)w.el.style.top=-100-(w.pixelHeight||0)+"px"
else{w._inDocument||(w._inDocument=!0,renderer.container.appendChild(w.el))
var top=renderer.$cursorLayer.getPixelPosition({row:i,column:0},!0).top
w.coverLine||(top+=config.lineHeight*this.session.getRowLineCount(w.row)),w.el.style.top=top-config.offset+"px"


var left=w.coverGutter?0:renderer.gutterWidth
w.fixedWidth||(left-=renderer.scrollLeft),w.el.style.left=left+"px",w.fullWidth&&w.screenWidth&&(w.el.style.minWidth=config.width+2*config.padding+"px"),
w.fixedWidth?w.el.style.right=renderer.scrollBar.getWidth()+"px":w.el.style.right=""}}}}}).call(LineWidgets.prototype),
exports.LineWidgets=LineWidgets})


define("plugins/c9.ide.language.trace/ui",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,void(/[?&]trace=1/.test(location.search)&&(tabs.once("ready",function(){
setTimeout(function(){tabs.getTabs().forEach(function(tab){tryAddWatcher(tab)})},2e3)}),ace.on("create",function(e){
e.editor.on("documentLoad",function(e){tryAddWatcher(e.doc.tab)})}),tabs.on("focus",function(e){tryAddWatcher(e.tab)

}))))}function tryAddWatcher(tab){if(tab&&tab.editor&&tab.editor.ace&&tab.path){if(tab.editor.ace.getSession()){
if(tab.editor.ace.getSession().$traceWatcher)return
tab.editor.ace.getSession().$traceWatcher=!0}trace.watch(pathUtil.join(workspaceDir,tab.path),function(event){
processTraceEvent(tab.editor.ace,event)})}}function processTraceEvent(ace,event){if("property"===event.type)return processTraceProperty(ace,event.value)


for(var p in event.value.properties)event.value.properties[p].forEach(processTraceProperty.bind(null,ace))

}function processTraceProperty(ace,property){if("()->"!==property.id){var text,className,row=property.row


if(property.exception)className="ace_error",text="Exception:"+property.value
else{className="ace_ok",row--
var fargs=(property.fargs||[]).map(function(f){return f.type}).join(", ")
text=property.id+"("+fargs+")"+(property.type?" : "+property.type.type:"")}putWidget(ace,row,text,className)

}}function putWidget(ace,row,text,className){var session=ace.session
session.widgetManager||(session.widgetManager=new LineWidgets(session),session.widgetManager.attach(ace))


var oldWidget=session.lineWidgets&&session.lineWidgets[row]
oldWidget&&oldWidget.destroy()
var w={row:row,fixedWidth:!0,coverGutter:!0,el:dom.createElement("div")},el=w.el.appendChild(dom.createElement("div"))


w.destroy=function(){session.widgetManager.removeLineWidget(w)},w.el.className="error_widget_wrapper",
el.className="error_widget "+className,el.innerHTML=text,session.widgetManager.addLineWidget(w),w.el.onmousedown=ace.focus.bind(ace)

}var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),trace=imports["language.trace"],tabs=imports.tabManager,ace=imports.ace,LineWidgets=(imports["dialog.error"].show,
require("ace/line_widgets").LineWidgets),dom=require("ace/lib/dom"),pathUtil=require("path"),workspaceDir=options.workspaceDir,loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({}),register(null,{"language.trace.ui":plugin
})}return main.consumes=["Plugin","tabManager","language.trace","dialog.error","ace"],main.provides=["language.trace.ui"],
main})


define("text!plugins/c9.ide.language.trace/server/trace_server.js",[],'var WebSocket = require("ws");\nvar EventEmitter = require("events").EventEmitter;\nvar assert = require("assert");\nvar TRACEGL_PATH = "/io_bef2aa6b_e731a7b612ab389fcb7f973c452f33df3eb69c99";\nvar DEBUG = false;\n\nvar debug = DEBUG ? console.log : function() {};\nvar fileWatchers = {};\nvar modules = {};\nvar languages = [];\n\nmodule.exports = function(vfs, options, register) {\n    register(null, {\n        start: start,\n        \n        stop: stop,\n        \n        watch: watch,\n    });\n};\n\nfunction loop() {\n    debug("connecting to tracer...");\n    retryLoop(connectJS);\n    \n    function retryLoop(connect) {\n        var connection = connect(function(err) {\n            if (err) return retry(err);\n            \n            debug("connected!");\n        });\n        \n        connection.on("error", retry);\n        connection.on("close", retry);\n        \n        var retrying;\n        function retry(e) {\n            if (retrying) return;\n            retrying = true;\n            \n            debug("retrying connection");\n            \n            return setTimeout(function() {\n                retryLoop(connect);\n            }, 1000);\n        }\n    }\n}\nfunction start(language, callback) {\n    if (language !== "js")\n        return callback(new Error("Invalid language"));\n    \n    if (languages.indexOf(language) > -1)\n        return callback();\n    \n    languages.push(language);\n    loop();\n    callback();\n}\n\nfunction stop(language, callback) {\n    callback(new Error("Not implemented")); // TODO\n}\n\nfunction watch(path, callback) {\n    if (fileWatchers["_" + path])\n        return callback(null, fileWatchers["_" + path]);\n    \n    var listeners = [];\n    var watcher = fileWatchers["_" + path] = {\n        on: function(event, listener) {\n            assert(event === "change", "vfs-socket only likes the \\"change\\" event");\n            listeners.push(listener);\n\n            if (modules["_" + path])\n                listener({ type: "module", value: modules["_" + path] });\n        },\n        off: function(event, listener) {\n            listeners = listeners.filter(function(l) {\n                return l !== listener;\n            });\n        },\n        close: function() {\n            listeners = [];\n            delete fileWatchers["_" + path];\n        },\n        emit: function(event, data) {\n            assert(event === "change");\n            listeners.forEach(function(f) {\n                f(data);\n            });\n        }\n    };\n    \n    callback(null, { watcher: watcher });\n}\n\nfunction onModuleAdded(module) {\n    debug("module added:", module.path);\n\n    var watcher = fileWatchers["_" + module.path];\n    if (!watcher)\n        return console.error("no watcher for", module.path);\n    \n    debug("Calling watch function for", module.path);\n    watcher.emit("change", { type: "module", value: module });\n    \n    clearTimeout(watcher.scheduled);\n    delete watcher.scheduled;\n}\n\nfunction onPropertyChange(property) {\n        var path = property.path;\n    var module = modules["_" + path];\n    var watcher = fileWatchers["_" + path];\n    if (!watcher || watcher.scheduled)\n        return;\n    \n    watcher.scheduled = setTimeout(function() {\n        onModuleAdded(module);\n        delete watcher.scheduled;\n    }, 1000);\n}\n\nfunction connectJS(callback) {\n    var ws = new WebSocket("ws://localhost:2000" + TRACEGL_PATH, { protocol: "ws" });\n    var connection = new EventEmitter();\n    ws.on("open", function() {\n        ws.send(\'[{"t":"join"}]\', function(err) {\n            if (err) return connection.emit(err);\n        });\n        setTimeout(function() {\n           done(); // assume success if there was no error\n        }, 2000);\n    });\n    ws.on("close", function(e) {\n        connection.emit("close", e);\n    });\n    ws.on("error", function(err) {\n        if (isDone)\n            return connection.emit("error", err);\n        done(err);\n    });\n    ws.on("message", function(message) {\n        debug("message", message);\n        done();\n        var json;\n        try {\n            json = JSON.parse(message);\n        }\n        catch (err) {\n            return connection.emit("error", err);\n        }\n        \n        json.forEach(processMessage);\n    });\n    \n    var functions = {};\n    var functionReturns = {};\n    var calls = {};\n    var isDone;\n    \n    connection.close = function(callback) {\n        ws.terminate();\n        if (typeof callback === "function")\n            callback();\n    };\n    return connection;\n    \n    function done(err, res) {\n        if (isDone) return;\n        isDone = true;\n        callback(err, res);\n    }\n    \n    function processMessage(message) {\n        var fun = functions[message.i];\n        if (message.dict) {\n            var file = message.f;\n            var symbols = message.d;\n            var properties = {};\n            for (var id in symbols) {\n                processDictSymbol(file, id, symbols[id], properties);\n            }\n            modules["_" + file] = {\n                path: file,\n                properties: properties\n            };\n            onModuleAdded(modules["_" + file]);\n            return;\n        }\n        if (message.a) {\n            debug("call   ", message.i, fun && fun.id, message);\n            if (!fun)\n                return console.error("Session dictionaries not inited for this trace");\n            fun.fargs = fun.fargs || [];\n            for (var i = 0; i < message.a.length; i++) {\n                fun.fargs[i] = addValue(fun.fargs[i], message.a[i]);\n            }\n            onPropertyChange(fun);\n            return;\n        }\n        if (message.ret) {\n            debug("fun ret ", message.i, fun && fun.id, message);\n            return;\n        }\n        if (message.x) {\n            var source = functionReturns[message.i];\n            fun = source.fun;\n            if (!fun)\n                return console.error("Session dictionaries not inited for this trace");\n            var module = modules["_" + fun.path];\n            debug("except ", fun && fun.id, message.i, message);\n            var exception = module.properties["_except_" + source.row];\n            if (!exception) {\n                exception = module.properties["_except_" + source.row] = [{\n                    exception: true,\n                    path: module.path,\n                    row: fun.row // HACK: source doesn\'t have accurate row\n                }];\n            }\n            exception[0].value = message.v;\n            onPropertyChange(exception[0]);\n            return;\n        }\n        if (functionReturns[message.i]) {\n            fun = functionReturns[message.i].fun;\n            if (!fun)\n                return console.error("Session dictionaries not inited for this trace");\n            debug("return", message.i, fun.name, message.v, message);\n            fun.type = addValue(fun.type, message.v);\n            onPropertyChange(fun);\n            return;\n        }\n        if (message.a === null) {\n            debug("module", message.i, message);\n            return;\n        }\n        debug("message", message.i, fun && fun.id, message);\n    }\n    \n    function addValue(existing, v) {\n        if (typeof v === "string") {\n            return { type: "string", lastValue: v };\n        }\n        if (typeof v === "number") {\n            return { type: "number", lastValue: v };\n        }\n        return { type: "object", lastValue: v };\n    }\n    \n    function processDictSymbol(path, id, symbol, namedProperties) {\n        if (symbol.root) {\n            debug("dict-", id, "root ", symbol.n);\n            return;\n        }\n        if (symbol.n) {\n            debug("dict-", id, "function ", symbol.n);\n            var result = functions[id] = {\n                path: path,\n                id: symbol.n,\n                row: symbol.y - 1,\n            };\n            namedProperties["_" + symbol.n] =\n                namedProperties["_" + symbol.n] || [];\n            namedProperties["_" + symbol.n].push(result);\n            return;\n        }\n        if (symbol.a) {\n            debug("dict-", id, "call");\n            calls[id] = {\n                path: path,\n                row: symbol.y - 1,\n            };\n            return;\n        }\n        if (symbol.ret) {\n            debug("dict-", id, "ret", symbol);\n            functionReturns[id] = {\n                path: path,\n                fun: functions[symbol.ret],\n                row: symbol.y - 1,\n            };\n            return;\n        }\n        debug("dict-", id, "???", symbol);\n    }\n}')


define("plugins/c9.ide.language.trace/trace",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,void(/[?&]trace=1/.test(location.search)&&(c9.on("connect",loadServer),
c9.on("disconnect",unloadServer))))}function loadServer(){ext.loadRemotePlugin("trace_server",{code:require("text!./server/trace_server.js"),
redefine:!0},function(err,_server){err&&"EEXIST"===err.code&&(err=null),server=_server,server.start("js",function(){}),
initWatchers()})}function unloadServer(){server=null}function watch(path,listener){unwatch(path)
var meta,closed
watchers["_"+path]={init:function(){closed=!1,server&&server.watch(path,function(err,_meta){return err?console.error("Couldn't start watcher, will retry on reconnect",err):(console.log("Subscribed to ",path),
meta=_meta,closed?meta.watcher.close():void meta.watcher.on("change",function(e){listener(e)}))})},close:function(){
closed=!0,meta&&meta.watcher.close()}}}function unwatch(path){watchers["_"+path]&&watchers["_"+path].close(),
delete watchers["_"+path]}function initWatchers(){for(var w in watchers)watchers[w].init()}var server,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),c9=imports.c9,ext=imports.ext,watchers={},loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({watch:watch,unwatch:unwatch,_events:[]}),
register(null,{"language.trace":plugin})}return main.consumes=["Plugin","ext","c9"],main.provides=["language.trace"],
main})


define("plugins/c9.ide.readme/readme",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,watcher.on("directory.all",function(e){
"/"===e.path&&update(e.files)}),watcher.watch("/"),void fs.readdir("/",function(err,files){return err?console.error(err):void update(files)

}))}function unload(){loaded&&(loaded=!1,watcher.unwatch("/"))}function update(files){var stat=files.find(function(stat){
return"readme.md"==stat.name.toLowerCase()})
stat?lastModifiedTime<stat.mtime&&(lastModifiedTime=stat.mtime,exists=!0,fs.readFile("/"+stat.name,function(err,data){
return err?console.error(err):void sendReadme(data)})):exists&&(lastModifiedTime=0,exists=!1,sendReadme(""))

}function sendReadme(text){api.project.patch("",{contentType:"application/json",body:{readme:text}},function(err,res){
if(err)return console.error(err)})}var Plugin=imports.Plugin,watcher=imports.watcher,fs=imports.fs,api=imports.api,plugin=new Plugin("Ajax.org",main.consumes),lastModifiedTime=0,exists=!0,loaded=!1


plugin.on("load",load),plugin.on("unload",unload),plugin.freezePublicAPI({}),register(null,{"readme.watcher":plugin
})}return main.consumes=["Plugin","api","watcher","fs"],main.provides=["readme.watcher"],main})


define("text!plugins/c9.ide.help.support/support.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "win"\n      title     = "Report a bug"\n      center    = "true"\n      modal     = "false"\n      buttons   = "close"\n      skin      = "bk-window"\n      kbclose   = "true"\n      class     = "relative reportabug"\n      width     = "358"\n      zindex    = "9000"\n      >\n        <div id="form" style="height: 280px">\n            <a:hbox edge="15 14 9" padding="5" align="center">\n                <span width="46">Subject</span>\n                <a:textbox id="subject" skin="textbox-modal" class="required-tb" flex="1" initial-message="Please make it descriptive"/>\n            </a:hbox>\n            \n            <a:textarea margin="0 15 0 15" id="description" skin = "dashboard-textarea" width="330" height="165" initial-message="Write your bug report here.">\n            </a:textarea>\n                \n            <a:vbox id="attachment" edge="5 10 7">\n                <a:hbox margin="0 0 5 4"><span>Upload an attachment</span></a:hbox>\n                <a:hbox>\n                    <div id="fileChooser">\n                        <input type="file"/>\n                    </div>\n                </a:hbox>\n            </a:vbox>\n        </div>\n        \n        <div id="confirmation" style="height: 280px" visible="false">\n            <a:hbox height="280" pack="center" align="center"><a:label id="confirmationMessage" width="280" style="color: #000; font-size: 11pt"></a:label></a:hbox>\n        </div>\n      \n        <a:vbox>\n            <a:hbox pack="end" padding="5" edge="6 10 10">\n                <a:button\n                  id      = "btnClose"\n                  caption = "Cancel" \n                  skin    = "btn-default-css3" />\n                  \n                <a:button\n                  id      = "btnSend"\n                  caption = "Send Report" \n                  class   = "btn-green"\n                  skin    = "btn-default-css3" />\n            </a:hbox>\n        </a:vbox>\n\n    </a:window>\n</a:application>')


define("plugins/c9.ide.help.support/support",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,void menus.once("ready",function(){analytics.identify(info.getUser()),
menus.addItemByPath("Support/Get Premium Support",new ui.item({onclick:function(){return info.getUser().premium?(analytics.track("Initiated Support Request"),
void window.open("mailto:support@c9.io")):upgrade.askUpgrade("This is a Premium Feature",'Help is just a click away. Check out our <a href="https://c9.io/pricing" target="_blank">amazing premium plans</a>.',function(){
emit("confirmAccountRedirect",{source:"confirmation"})},{source:"upsell-webide-support",isHTML:!0})}}),c+=100,plugin),
screenshotSupport&&initMenuWithScreenshotSupport()}))}function initMenuWithScreenshotSupport(){menus.addItemByPath("Support/Get Premium Support With a Screenshot",new ui.item({
onclick:function(){return draw(),info.getUser().premium?(analytics.track("Initiated Support Request"),
void setTimeout(function wait(){if("undefined"!=typeof UserSnap){var email=info.getUser().email
UserSnap.setEmailBox(email),UserSnap.openReportWindow()}else setTimeout(wait,50)},10)):upgrade.askUpgrade("This is a Premium Feature",'Help is just a click away. Check out our <a href="https://c9.io/pricing" target="_blank">amazing premium plans</a>.',function(){
emit("confirmAccountRedirect",{source:"confirmation"})},{source:"upsell-webide-support",isHTML:!0})},
"class":"betafeedback"}),c+=100,plugin)}function draw(){if(!drawn){drawn=!0,_usersnapconfig={apiKey:usApiKey,
valign:"middle",halign:"right",tools:["pen","arrow","note"],lang:"en",commentBox:!0,commentBoxPlaceholder:"Enter any feedback here. What steps did you take? Is it reproducible in incognito mode?",
emailBox:!0,emailBoxPlaceholder:"Your email address",emailRequired:!0,btnText:"Beta Feedback",beforeSend:function(obj){
obj.addInfo={userAgent:navigator.userAgent}},errorHandler:function(errorMessage,errorCode){console.error("UserSnap Error Code: "+errorCode),
console.error("UserSnap Error Message: "+errorMessage)},mode:"report"},function(){var s=document.createElement("script")


s.type="text/javascript",s.async=!0,s.src="//api.usersnap.com/load/e3d3b232-1c21-4961-b73d-fbc8dc7be1c3.js"


var x=document.getElementsByTagName("script")[0]
x.parentNode.insertBefore(s,x)}()
var markup=require("text!./support.xml")
ui.insertMarkup(null,markup,plugin),win=plugin.getElement("win"),form=plugin.getElement("form"),confirmation=plugin.getElement("confirmation"),
btnSend=plugin.getElement("btnSend"),btnSend=plugin.getElement("btnSend"),btnClose=plugin.getElement("btnClose"),
subject=plugin.getElement("subject"),description=plugin.getElement("description"),attachment=plugin.getElement("attachment"),
confirmationMessage=plugin.getElement("confirmationMessage"),btnClose.on("click",function(){closeWindow()

}),btnSend.on("click",function(){fileTicket()}),emit("draw")}}function fileTicket(){function sendTicketToServer(attachedFile){
var postData={subject:subject.getValue(),description:description.getValue(),projectName:c9.projectName,
userAgent:navigator.userAgent}
attachedFile&&(postData.attachmentName=attachedFile.name,postData.attachmentBinary=attachedFile.binary)


var keys=Object.keys(postData),keyValueArray=keys.map(function(key){return encodeURIComponent(key)+"="+encodeURIComponent(postData[key])

}),postString=keyValueArray.join("&")
auth.request(baseurl+FILETICKET_URL,{method:"POST",body:postString,contentType:"application/x-www-form-urlencoded"
},function(err,data,res){return err||200!=res.status?alert("Error filing Zendesk ticket","Please email us at support@c9.io","string"==typeof data?data:JSON.stringify(data)):(confirmationMessage.setAttribute("caption","<center>Thanks for your report.<br><br>Our support team will get in touch<br>with you as soon as possible at<br><b>"+apf.escapeXML(data.email)+"</b></center>"),
form.setProperty("visible",!1),confirmation.setProperty("visible",!0),btnSend.hide(),void btnClose.setCaption("Close"))

})}btnSend.setAttribute("disabled",!0)
var fileHandler=attachment.$ext.getElementsByTagName("input")[0].files[0]
if(fileHandler){if(fileHandler.size>attachmentSizeLimit)return alert("Upload failed","Attachment size exceeds limit","Please limit the size of the attachment to less than 2 MB."),
btnSend.setAttribute("disabled",!1),void clearFileChooser()
if(window.FileReader){var reader=new FileReader
reader.onload=function(file){var attachedFile={binary:file.currentTarget.result,name:fileHandler.name
}
sendTicketToServer(attachedFile)},reader.readAsBinaryString(fileHandler)}else auth.request(baseurl+FILEREADER_URL,{
method:"POST",body:fileHandler,headers:{"Content-Type":"application/octet-stream","UP-FILENAME":fileHandler.name,
"UP-SIZE":fileHandler.size,"UP-TYPE":fileHandler.type}},function(err,data,res){if(200===res.status){var attachedFile={
binary:res.body,name:fileHandler.name}
sendTicketToServer(attachedFile)}else alert("Upload failed","Uploading the file failed","The server responded with status "+res.status+". Please try again.")

})}else sendTicketToServer()}function clearFileChooser(){var fileChooser=document.getElementById("fileChooser")


fileChooser.innerHTML=fileChooser.innerHTML}function closeWindow(){win.hide(),form.setProperty("visible",!0),
confirmation.setProperty("visible",!1),btnSend.setAttribute("disabled",!1),btnSend.show(),btnClose.setCaption("Cancel"),
subject.setValue(""),description.setValue(""),clearFileChooser()}var form,confirmation,btnSend,btnClose,subject,description,win,attachment,confirmationMessage,Plugin=imports.Plugin,ui=imports.ui,c9=imports.c9,menus=imports.menus,auth=imports.auth,info=imports.info,analytics=imports["c9.analytics"],alert=imports["dialog.alert"].show,upgrade=imports.upgrade,attachmentSizeLimit=2097152,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),baseurl=options.baseurl,FILEREADER_URL="/api/provision/filereader-fallback/images",FILETICKET_URL="/api/context/fileticket",usApiKey=options.userSnapApiKey,screenshotSupport=options.screenshotSupport,loaded=!1,c=300,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({_events:["draw"]}),register(null,{
"help.support":plugin})}return main.consumes=["Plugin","ui","menus","c9","auth","dialog.alert","help","info","c9.analytics","upgrade"],
main.provides=["help.support"],main})


define("util",[],function(require,exports,module){function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor
}
return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),
isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),
isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)

}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType]
return style?"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){
return str}function arrayToHash(array){var hash={}
return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){
if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){
var ret=value.inspect(recurseTimes,ctx)
return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value)


if(primitive)return primitive
var keys=Object.keys(value),visibleKeys=arrayToHash(keys)
if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:""


return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")


if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date")
if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"]
if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:""


base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),
isError(value)&&(base=" "+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1]


if(recurseTimes<0)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special")


ctx.seen.push(value)
var output
return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)

}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined")


if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'"


return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0

}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){
for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("")


return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))

}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc
if(desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]},desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),
hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),
str.indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){
return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str


name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),
name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),
name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){
var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,
prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0)
return length>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]

}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){
return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg

}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}
function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)

}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)

}function isError(e){return isObject(e)&&"[object Error]"===objectToString(e)}function isFunction(arg){
return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg

}function isBuffer(arg){return!1}function objectToString(o){return Object.prototype.toString.call(o)}
function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":")


return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)

}var formatRegExp=/%[sdj%]/g
exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]))


return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){
if("%%"===x)return"%"
if(i>=len)return x
switch(x){case"%s":return String(args[i++])
case"%d":return Number(args[i++])
case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])str+=isNull(x)||!isObject(x)?" "+x:" "+inspect(x)


return str},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],
white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],
yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",
string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,
exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,
exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,
exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=isBuffer


var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]
exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=function(ctor,superCtor){
ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,
writable:!0,configurable:!0}})},exports._extend=function(origin,add){if(!add||!isObject(add))return origin


for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]]
return origin}})


define("assert",[],function(require,exports,module){function replacer(key,value){return util.isUndefined(value)?""+value:!util.isNumber(value)||!isNaN(value)&&isFinite(value)?util.isFunction(value)||util.isRegExp(value)?value.toString():value:value.toString()

}function truncate(s,n){return util.isString(s)?s.length<n?s:s.slice(0,n):s}function getMessage(self){
return truncate(JSON.stringify(self.actual,replacer),128)+" "+self.operator+" "+truncate(JSON.stringify(self.expected,replacer),128)

}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({
message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction
})}function ok(value,message){value||fail(value,!0,message,"==",assert.ok)}function _deepEqual(actual,expected){
if(actual===expected)return!0
if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return!1
for(var i=0;i<actual.length;i++)if(actual[i]!==expected[i])return!1
return!0}return util.isDate(actual)&&util.isDate(expected)?actual.getTime()===expected.getTime():util.isRegExp(actual)&&util.isRegExp(expected)?actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase:util.isObject(actual)||util.isObject(expected)?objEquiv(actual,expected):actual==expected

}function isArguments(object){return"[object Arguments]"==Object.prototype.toString.call(object)}function objEquiv(a,b){
if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return!1
if(a.prototype!==b.prototype)return!1
if(isArguments(a))return!!isArguments(b)&&(a=pSlice.call(a),b=pSlice.call(b),_deepEqual(a,b))
try{var key,i,ka=Object.keys(a),kb=Object.keys(b)}catch(e){return!1}if(ka.length!=kb.length)return!1
for(ka.sort(),kb.sort(),i=ka.length-1;i>=0;i--)if(ka[i]!=kb[i])return!1
for(i=ka.length-1;i>=0;i--)if(key=ka[i],!_deepEqual(a[key],b[key]))return!1
return!0}function expectedException(actual,expected){return!(!actual||!expected)&&("[object RegExp]"==Object.prototype.toString.call(expected)?expected.test(actual):actual instanceof expected||expected.call({},actual)===!0)

}function _throws(shouldThrow,block,expected,message){var actual
util.isString(expected)&&(message=expected,expected=null)
try{block()}catch(e){actual=e}if(message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:"."),
shouldThrow&&!actual&&fail(actual,expected,"Missing expected exception"+message),!shouldThrow&&expectedException(actual,expected)&&fail(actual,expected,"Got unwanted exception"+message),
shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual)throw actual

}var util=require("util"),pSlice=Array.prototype.slice,assert=module.exports=ok
assert.AssertionError=function(options){this.name="AssertionError",this.actual=options.actual,this.expected=options.expected,
this.operator=options.operator,this.message=options.message||getMessage(this)
var stackStartFunction=options.stackStartFunction||fail
if(Error.captureStackTrace)Error.captureStackTrace(this,stackStartFunction)
else{var err=new Error
this.stack=err.stack}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(actual,expected,message){
actual!=expected&&fail(actual,expected,message,"==",assert.equal)},assert.notEqual=function(actual,expected,message){
actual==expected&&fail(actual,expected,message,"!=",assert.notEqual)},assert.deepEqual=function(actual,expected,message){
_deepEqual(actual,expected)||fail(actual,expected,message,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(actual,expected,message){
_deepEqual(actual,expected)&&fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(actual,expected,message){
actual!==expected&&fail(actual,expected,message,"===",assert.strictEqual)},assert.notStrictEqual=function(actual,expected,message){
actual===expected&&fail(actual,expected,message,"!==",assert.notStrictEqual)},assert["throws"]=function(block,error,message){
_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(block,message){
_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(err){if(err)throw err

}})


define("c9/assert",[],function(require,exports,module){var assert=function(value,message){if(!value)throw new Error("Assertion failed: "+(message||value))

},assertEqual=function(value1,value2,message){if(value1!=value2)throw new Error("Assertion failed. "+(message||"")+" got\n  "+value1+"expected\n  "+value2)

}
module.exports=function(value,message){assert(value,message)},module.exports.equal=function(value1,value2,message){
assertEqual(value1,value2,message)},"undefined"!=typeof process&&(process.versions&&process.versions["node-webkit"]||(require(["assert"],function(nodeAssert){
assert=nodeAssert,assertEqual=nodeAssert.equal}),Error.captureStackTrace&&(assert=require("assert"),assertEqual=assert.equal)))

})


define("plugins/c9.ide.upgrade/upgrade",[],function(require,exports,module){function main(options,imports,register){
function load(){}function getURL(options){if(options=options||{},!options.plan)return ideBaseUrl+"/pricing/"+defaultProduct


var plan=options.plan?"?plan="+options.plan:""
return accountUrl+"/upgrade/"+(options.product||"webide")+plan}function openUpgrade(options){options.source&&analytics.track("Clicked Internal Link",{
href:"/pricing",linkId:options.source}),window.open(getURL(options))}function askUpgrade(title,message,onYes,onNo,options){
return onYes&&"function"!=typeof onYes?askUpgrade(title,message,null,null,onYes):onNo&&"function"!=typeof onNo?askUpgrade(title,message,onYes,null,onNo):showUpsell(function(){
openUpgrade(options.product,options.plan),onYes()},onNo,title,null,message,options)}var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),accountUrl=options.accountUrl,ideBaseUrl=options.ideBaseUrl,defaultProduct=options.defaultProduct,showUpsell=imports["dialog.upsell"].show,analytics=imports["c9.analytics"]


assert(options.accountUrl),plugin.on("load",load),plugin.on("unload",function(){}),plugin.freezePublicAPI({
getURL:getURL,openUpgrade:openUpgrade,askUpgrade:askUpgrade}),register(null,{upgrade:plugin})}var assert=require("c9/assert")


return main.consumes=["Plugin","info","dialog.upsell","c9.analytics"],main.provides=["upgrade"],main})


define("text!plugins/c9.ide.restore/restore.css",[],"")


define("text!plugins/c9.ide.restore/restore.html",[],'<div id="c9_ide_restore">\n    <div class="timeout">This is taking longer than expected. If you think there might be an issue please contact <a href="https://c9.io/support">support</a>.</div>\n    <div id="loadingide">\n        <div id="c9logo"></div>\n    </div>\n    <div class="stickynote">\n        <div class="tape"></div>\n        <div class="left-shadow"></div>\n        <div class="right-shadow"></div>\n        \n        <div class="paper">\n            <strong>What\'s going on here?</strong>\n            <p>\n            We create a separate virtual machine for each workspace. \n            In order to provide a free\n            service for everyone, we hibernate workspaces of\n            <nobr>non-premium</nobr> users after about one week of inactivity.\n            This is because the virtual machines constantly use resources even if\n            the workspace is not actively used.\n            <p>\n            Please wait a moment while we wake up your workspace. It will\n            be just as you left it.\n            <p>\n            <a href="/upgrade/webide" target="_blank">Upgrade to premium</a> to make sure your workspace never \n            goes into hibernate.\n        </div>\n    </div>\n    <div id="restoring">\n        <div id="content" class="loading-progress">\n            <div class="loading-details"></div>\n            <div class="ui-progress-bar ui-container" id="progress_bar">\n                <div class="ui-progress" style="width: 100%;">\n                    <!--<span class="ui-label" style="display:none;"></span>-->\n                </div>\n            </div>\n            <div class="loading-msg">Waking up your workspace from hibernation.</div>\n        </div>\n    </div>\n</div>\n')


define("plugins/c9.ide.restore/restore",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,endpoint.on("restore",showRestore),
void vfs.on("connect",hideRestore))}function draw(){return!drawn&&(drawn=!0,ui.insertCss(require("text!./restore.css"),plugin),
ui.insertHtml(null,require("text!./restore.html"),plugin),el=document.getElementById("c9_ide_restore"),
msgEl=document.querySelector("#c9_ide_restore .loading-msg"),detailsEl=document.querySelector("#c9_ide_restore .loading-details"),
descriptionEl=document.querySelector("#c9_ide_restore .paper"),stickynoteEl=document.querySelector("#c9_ide_restore .stickynote"),
uiProgress=document.querySelector("#progress_bar .ui-progress"),void(timeoutEl=document.querySelector("#c9_ide_restore .timeout")))

}function animateProgress(progress,callback){anims.animate(uiProgress,{width:progress+"%",timingFunction:"cubic-bezier(.02, .01, .47, 1)",
duration:"1s"},callback)}function walk(loopId){if(loopId==run&&!(progress>100))return progress>maxProgress?timer=setTimeout(walk.bind(null,loopId),500):void animateProgress(progress++,function(){
timer=setTimeout(walk.bind(null,loopId),10)})}function showTimeout(){timeoutEl.style.display="block"}
function showRestore(state){draw(),c9.startLoadTime=-1,"block"!=el.style.display&&(uiProgress.style.width=0,
progress=6,maxProgress=10)
var isDark=layout.theme.indexOf("dark")>-1
isDark?el.classList.add("dark"):el.classList.remove("dark")
var descriptions=stateDescriptions[state.premium?"premium":"free"],description=descriptions[state.projectState||STATE_ARCHIVED]


if(msgEl.innerText=stateMessages[state.projectState||STATE_ARCHIVED]||defaultStateMessage,description){
descriptionEl.innerHTML=description
var link=descriptionEl.querySelector("a.restore-upsell")
link&&link.addEventListener("click",trackLink,!1),stickynoteEl.style.display="block",~descriptions.casual.indexOf(state.projectState||STATE_ARCHIVED)?stickynoteEl.classList.add("casual"):stickynoteEl.classList.remove("casual")

}else stickynoteEl.style.display="none"
return state.progress&&100!=state.progress.nextProgress?(/^Internal/.test(state.progress.message)||(detailsEl.innerText=state.progress.message||""),
maxProgress=Math.max(maxProgress||0,state.progress.nextProgress),progress=Math.max(progress||0,state.progress.progress),
walk(++run),el.style.display="block",window.addEventListener("keypress",stopEvent,!0),window.addEventListener("keydown",stopEvent,!0),
window.addEventListener("keyup",stopEvent,!0),clearTimeout(timeoutTimer),void(timeoutTimer=setTimeout(function(){
showTimeout()},TIMEOUT_TIME))):hideRestore()}function trackLink(e){var el=e.target
analytics.track("Clicked Internal Link",{href:el.href,linkId:el.dataset.linkId})}function hideRestore(){
window.removeEventListener("keypress",stopEvent,!0),window.removeEventListener("keydown",stopEvent,!0),
window.removeEventListener("keyup",stopEvent,!0),el&&(clearTimeout(timer),progress=101,animateProgress(100,function(){
setTimeout(function(){anims.animate(el,{opacity:0},function(){el.style.display="none",el.style.opacity=1,
timeoutEl.style.display=""})},100)}))}function stopEvent(e){e.stopPropagation()}var el,msgEl,detailsEl,descriptionEl,stickynoteEl,uiProgress,timeoutTimer,timeoutEl,Plugin=imports.Plugin,ui=imports.ui,vfs=imports.vfs,c9=imports.c9,anims=imports.anims,layout=imports.layout,endpoint=imports["vfs.endpoint"],analytics=imports["c9.analytics"],plugin=new Plugin("Ajax.org",main.consumes),MAX_HOT_WORKSPACES="three",TIMEOUT_TIME=9e5,STATE_CREATED=1,STATE_READY=2,STATE_MIGRATING=4,STATE_MARKED_FOR_ARCHIVE=20,STATE_ARCHIVING=21,STATE_ARCHIVED=22,STATE_MARKED_FOR_RESTORE=23,STATE_RESTORING=24,STATE_RESIZING=31,stateMessages={}


stateMessages[STATE_CREATED]="Creating your new workspace",stateMessages[STATE_READY]="Starting your workspace",
stateMessages[STATE_MIGRATING]="Migrating your workspace to our new backend",stateMessages[STATE_MARKED_FOR_ARCHIVE]=stateMessages[STATE_ARCHIVING]="Archiving your workspace",
stateMessages[STATE_ARCHIVED]=stateMessages[STATE_MARKED_FOR_RESTORE]=stateMessages[STATE_RESTORING]="Waking up your workspace from hibernation.",
stateMessages[STATE_RESIZING]="Resizing your workspace"
var defaultStateMessage="Opening your workspace",description="<strong>You could be coding right now</strong>\n<p>\nIn order to provide a free\nservice for everyone, we stop workspaces after a while.\n<p>\nPremium plans offer active workspaces, which ensure that the "+MAX_HOT_WORKSPACES+"\nmost recently used workspaces are never stopped.\n<p>\n<a class='restore-upsell' data-link-id='upsell-webide-migrate' href='"+options.ideBaseUrl+"/account/upgrade/webide' target='_blank'>Upgrade to premium now</a>",premiumStoppedDescription="<strong>Swapping in Workspace</strong>\n<p>\nThis workspace is not one of your active workspaces and has been stopped.\n<p>\nThe "+MAX_HOT_WORKSPACES+" most recently used workspaces are never stopped.\n<p>\nAs part of a team plan you have more active workspaces.\n<p>\n<a class='restore-upsell' data-link-id='upsell-teams-migrate' href='"+options.ideBaseUrl+"/account/billing' target='_blank'>Upgrade to team plans now</a>",migrateDescription="<strong>What's going on here?</strong>\n<p>\nWe rolled out a completely new backend infrastructure with \nimproved performance and lots of new features.\n<p>\nWith the new backend you get:\n<ul>\n<li>an Ubuntu VM</li>\n<li>root access using sudo</li>\n<li>ability to run services</li>\n<li>ability to install packages</li>\n</ul>\n<p>\nPlease wait a moment while we move your workspace. It will\nbe just as you left it.\n",premiumDescription="<strong>What's going on here?</strong>\n<p>\nWe're migrating your premium workspace to a new server \nto ensure optimal performance.\n<p>\nPlease wait a moment while we move your workspace. It will\nbe just as you left it.\n",resizeDescription="<strong>What's going on here?</strong>\n<p>\nWe're resizing your workspace\nto be exactly as you specified.\n<p>\nPlease wait a moment while we resize your workspace.\nIt will be just as you left it.\n",stateDescriptions={
free:{casual:[STATE_MIGRATING,STATE_RESIZING]},premium:{casual:[STATE_MIGRATING,STATE_MARKED_FOR_ARCHIVE,STATE_ARCHIVING,STATE_ARCHIVED,STATE_MARKED_FOR_RESTORE,STATE_RESTORING,STATE_RESIZING]
}}
stateDescriptions.free[STATE_CREATED]="",stateDescriptions.free[STATE_READY]=description,stateDescriptions.free[STATE_MIGRATING]=migrateDescription,
stateDescriptions.free[STATE_MARKED_FOR_ARCHIVE]=description,stateDescriptions.free[STATE_ARCHIVING]=description,
stateDescriptions.free[STATE_ARCHIVED]=description,stateDescriptions.free[STATE_MARKED_FOR_RESTORE]=description,
stateDescriptions.free[STATE_RESTORING]=description,stateDescriptions.free[STATE_RESIZING]=resizeDescription,
stateDescriptions.premium[STATE_CREATED]="",stateDescriptions.premium[STATE_READY]=premiumStoppedDescription,
stateDescriptions.premium[STATE_MIGRATING]=migrateDescription,stateDescriptions.premium[STATE_MARKED_FOR_ARCHIVE]=premiumDescription,
stateDescriptions.premium[STATE_ARCHIVING]=premiumDescription,stateDescriptions.premium[STATE_ARCHIVED]=premiumDescription,
stateDescriptions.premium[STATE_MARKED_FOR_RESTORE]=premiumDescription,stateDescriptions.premium[STATE_RESTORING]=premiumDescription,
stateDescriptions.premium[STATE_RESIZING]=resizeDescription
var progress,maxProgress,timer,loaded=!1,drawn=!1,run=0
plugin.on("load",function(){load()}),plugin.freezePublicAPI({show:showRestore,hide:hideRestore}),register(null,{
restore:plugin})}return main.consumes=["Plugin","ui","vfs.endpoint","vfs","layout","anims","c9","c9.analytics","layout"],
main.provides=["restore"],main})


define("plugins/c9.ide.metrics/metrics_analytics",[],function(require,exports,module){function main(options,imports,register){
register(null,{metrics_analytics:{}})}return main.consumes=["metrics","c9.analytics"],main.provides=["metrics_analytics"],
module.exports=main,main})


define("plugins/c9.ide.metrics/metrics_workspace",[],function(require,exports,module){"use strict"
function main(options,imports,register){function handleTimingEvent(service,event,metricName){loadtimes[metricName]=null,
service.once(event,function(){handleEvent(metricName)})}function handleEvent(eventName){pageReady!=-1&&(measureAndEmitEvent(eventName),
handleReady())}function handleReady(){isDone()&&(clearTimeout(timer),measureAndEmitEvent("workspaceReady"))

}function measureAndEmitEvent(eventName){loadtimes[eventName]=Date.now()-(pageReady+workspaceRestoreTime),
emit.sticky(eventName,{timestamp:loadtimes[eventName]})}function handleRestoreStart(){clearTimeout(timer),
timer=setTimeout(handleTimeout,workspaceLoadTimeout),workspaceRestoreStart||(workspaceRestoreStart=Date.now())

}function handleRestoreEnd(){workspaceRestoreStart&&(workspaceRestoreTime=Date.now()-workspaceRestoreStart,
loadtimes.workspaceRestoring=workspaceRestoreTime)}function handleTimeout(){emit.sticky("timeout")}function isDone(){
return loadtimes.workspaceConnected&&loadtimes.tabsReady}function getWorkspaceLoadTimes(){return loadtimes

}function getWorkspaceLoadTimeout(){return workspaceLoadTimeout}var Plugin=imports.Plugin,tabManager=imports.tabManager,pubsub=imports.pubsub,metrics=imports.metrics,vfs=imports.vfs,vfsEndpoint=imports["vfs.endpoint"],c9=imports.c9,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loadtimes={
workspaceReady:null},pageReady=c9.startLoadTime,workspaceLoadTimeout=6e4,workspaceRestoreStart=0,workspaceRestoreTime=0,timer=setTimeout(handleTimeout,workspaceLoadTimeout)


vfsEndpoint.on("restore",handleRestoreStart),vfs.once("connect",handleRestoreEnd),handleTimingEvent(c9,"ready","pluginsLoaded"),
handleTimingEvent(vfs,"connectClient","vfsConnectStart"),handleTimingEvent(vfs,"connect","vfsConnected"),
handleTimingEvent(pubsub,"connected","workspaceConnected"),handleTimingEvent(tabManager,"ready","tabsReady"),
plugin.on("load",function(){metrics.log("load_ide_metrics_plugin",Date.now()-c9.startLoadTime,[500,1e3,5e3,1e4,2e4,4e4])

}),plugin.freezePublicAPI({getWorkspaceLoadTimes:getWorkspaceLoadTimes,getWorkspaceLoadTimeout:getWorkspaceLoadTimeout
}),register(null,{"metrics.workspace":plugin})}return main.consumes=["Plugin","tabManager","c9","pubsub","metrics","vfs","vfs.endpoint"],
main.provides=["metrics.workspace"],main})


define("plugins/c9.ide.metrics/metrics_save",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){saveTimes=[],save.on("beforeSave",function(details){
saveTimes.push({path:details.path,time:Date.now(),duration:0,fallback:!1})},plugin),save.on("afterSave",function(details){
for(var i=saveTimes.length;i--;){var saveStart=saveTimes[i]
if(saveStart&&saveStart.path==details.path&&0==saveStart.duration){saveStart.duration=Date.now()-saveStart.time


break}}},plugin),collab.on("saveFallbackStart",function(details){for(var i=saveTimes.length;i--;){var saveStart=saveTimes[i]


if(saveStart&&saveStart.path==details.path){saveStart.fallback=!0
break}}},plugin)}function getSaveTimes(){return saveTimes.filter(function(time){return time.duration>0

}).map(function(time){return time.duration})}function getNormalSaveTimes(){return saveTimes.filter(function(time){
return 0==time.fallback&&time.duration>0}).map(function(time){return time.duration})}function getFallbackSaveTimes(){
return saveTimes.filter(function(time){return 1==time.fallback&&time.duration>0}).map(function(time){
return time.duration})}function clearSaveTimes(){saveTimes=[]}var Plugin=imports.Plugin,save=imports.save,collab=imports.collab,saveTimes=[],plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",load),plugin.on("unload",function(){saveTimes=[]})
var apiFunctions={getSaveTimes:getSaveTimes,getNormalSaveTimes:getNormalSaveTimes,getFallbackSaveTimes:getFallbackSaveTimes,
clearSaveTimes:clearSaveTimes}
options.testing&&(apiFunctions.getSaveTimesRaw=function(){return saveTimes}),plugin.freezePublicAPI(apiFunctions),
register(null,{"metrics.save":plugin})}return main.consumes=["Plugin","save","collab"],main.provides=["metrics.save"],
main})


define("async",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,function(){function only_once(fn){var called=!1
return function(){if(called)throw new Error("Callback was already called.")
called=!0,fn.apply(root,arguments)}}var root,previous_async,async={}
root=this,null!=root&&(previous_async=root.async),async.noConflict=function(){return root.async=previous_async,
async}
var _each=function(arr,iterator){if(arr.forEach)return arr.forEach(iterator)
for(var i=0;i<arr.length;i+=1)iterator(arr[i],i,arr)},_map=function(arr,iterator){if(arr.map)return arr.map(iterator)


var results=[]
return _each(arr,function(x,i,a){results.push(iterator(x,i,a))}),results},_reduce=function(arr,iterator,memo){
return arr.reduce?arr.reduce(iterator,memo):(_each(arr,function(x,i,a){memo=iterator(memo,x,i,a)}),memo)

},_keys=function(obj){if(Object.keys)return Object.keys(obj)
var keys=[]
for(var k in obj)obj.hasOwnProperty(k)&&keys.push(k)
return keys}
"undefined"!=typeof process&&process.nextTick?(async.nextTick=process.nextTick,"undefined"!=typeof setImmediate?async.setImmediate=setImmediate:async.setImmediate=async.nextTick):"function"==typeof setImmediate?(async.nextTick=function(fn){
setImmediate(fn)},async.setImmediate=async.nextTick):(async.nextTick=function(fn){setTimeout(fn,0)},async.setImmediate=async.nextTick),
async.each=function(arr,iterator,callback){if(callback=callback||function(){},!arr.length)return callback()


var completed=0
_each(arr,function(x){iterator(x,only_once(function(err){err?(callback(err),callback=function(){}):(completed+=1,
completed>=arr.length&&callback(null))}))})},async.forEach=async.each,async.eachSeries=function(arr,iterator,callback){
if(callback=callback||function(){},!arr.length)return callback()
var completed=0,iterate=function(){iterator(arr[completed],function(err){err?(callback(err),callback=function(){}):(completed+=1,
completed>=arr.length?callback(null):iterate())})}
iterate()},async.forEachSeries=async.eachSeries,async.eachLimit=function(arr,limit,iterator,callback){
var fn=_eachLimit(limit)
fn.apply(null,[arr,iterator,callback])},async.forEachLimit=async.eachLimit
var _eachLimit=function(limit){return function(arr,iterator,callback){if(callback=callback||function(){},
!arr.length||limit<=0)return callback()
var completed=0,started=0,running=0
!function replenish(){if(completed>=arr.length)return callback()
for(;running<limit&&started<arr.length;)started+=1,running+=1,iterator(arr[started-1],function(err){err?(callback(err),
callback=function(){}):(completed+=1,running-=1,completed>=arr.length?callback():replenish())})}()}},doParallel=function(fn){
return function(){var args=Array.prototype.slice.call(arguments)
return fn.apply(null,[async.each].concat(args))}},doParallelLimit=function(limit,fn){return function(){
var args=Array.prototype.slice.call(arguments)
return fn.apply(null,[_eachLimit(limit)].concat(args))}},doSeries=function(fn){return function(){var args=Array.prototype.slice.call(arguments)


return fn.apply(null,[async.eachSeries].concat(args))}},_asyncMap=function(eachfn,arr,iterator,callback){
var results=[]
arr=_map(arr,function(x,i){return{index:i,value:x}}),eachfn(arr,function(x,callback){iterator(x.value,function(err,v){
results[x.index]=v,callback(err)})},function(err){callback(err,results)})}
async.map=doParallel(_asyncMap),async.mapSeries=doSeries(_asyncMap),async.mapLimit=function(arr,limit,iterator,callback){
return _mapLimit(limit)(arr,iterator,callback)}
var _mapLimit=function(limit){return doParallelLimit(limit,_asyncMap)}
async.reduce=function(arr,memo,iterator,callback){async.eachSeries(arr,function(x,callback){iterator(memo,x,function(err,v){
memo=v,callback(err)})},function(err){callback(err,memo)})},async.inject=async.reduce,async.foldl=async.reduce,
async.reduceRight=function(arr,memo,iterator,callback){var reversed=_map(arr,function(x){return x}).reverse()


async.reduce(reversed,memo,iterator,callback)},async.foldr=async.reduceRight
var _filter=function(eachfn,arr,iterator,callback){var results=[]
arr=_map(arr,function(x,i){return{index:i,value:x}}),eachfn(arr,function(x,callback){iterator(x.value,function(v){
v&&results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index

}),function(x){return x.value}))})}
async.filter=doParallel(_filter),async.filterSeries=doSeries(_filter),async.select=async.filter,async.selectSeries=async.filterSeries


var _reject=function(eachfn,arr,iterator,callback){var results=[]
arr=_map(arr,function(x,i){return{index:i,value:x}}),eachfn(arr,function(x,callback){iterator(x.value,function(v){
v||results.push(x),callback()})},function(err){callback(_map(results.sort(function(a,b){return a.index-b.index

}),function(x){return x.value}))})}
async.reject=doParallel(_reject),async.rejectSeries=doSeries(_reject)
var _detect=function(eachfn,arr,iterator,main_callback){eachfn(arr,function(x,callback){iterator(x,function(result){
result?(main_callback(x),main_callback=function(){}):callback()})},function(err){main_callback()})}
async.detect=doParallel(_detect),async.detectSeries=doSeries(_detect),async.some=function(arr,iterator,main_callback){
async.each(arr,function(x,callback){iterator(x,function(v){v&&(main_callback(!0),main_callback=function(){}),
callback()})},function(err){main_callback(!1)})},async.any=async.some,async.every=function(arr,iterator,main_callback){
async.each(arr,function(x,callback){iterator(x,function(v){v||(main_callback(!1),main_callback=function(){}),
callback()})},function(err){main_callback(!0)})},async.all=async.every,async.sortBy=function(arr,iterator,callback){
async.map(arr,function(x,callback){iterator(x,function(err,criteria){err?callback(err):callback(null,{
value:x,criteria:criteria})})},function(err,results){if(err)return callback(err)
var fn=function(left,right){var a=left.criteria,b=right.criteria
return a<b?-1:a>b?1:0}
callback(null,_map(results.sort(fn),function(x){return x.value}))})},async.auto=function(tasks,callback){
callback=callback||function(){}
var keys=_keys(tasks)
if(!keys.length)return callback(null)
var results={},listeners=[],addListener=function(fn){listeners.unshift(fn)},removeListener=function(fn){
for(var i=0;i<listeners.length;i+=1)if(listeners[i]===fn)return void listeners.splice(i,1)},taskComplete=function(){
_each(listeners.slice(0),function(fn){fn()})}
addListener(function(){_keys(results).length===keys.length&&(callback(null,results),callback=function(){})

}),_each(keys,function(k){var task=tasks[k]instanceof Function?[tasks[k]]:tasks[k],taskCallback=function(err){
var args=Array.prototype.slice.call(arguments,1)
if(args.length<=1&&(args=args[0]),err){var safeResults={}
_each(_keys(results),function(rkey){safeResults[rkey]=results[rkey]}),safeResults[k]=args,callback(err,safeResults),
callback=function(){}}else results[k]=args,async.setImmediate(taskComplete)},requires=task.slice(0,Math.abs(task.length-1))||[],ready=function(){
return _reduce(requires,function(a,x){return a&&results.hasOwnProperty(x)},!0)&&!results.hasOwnProperty(k)

}
if(ready())task[task.length-1](taskCallback,results)
else{var listener=function(){ready()&&(removeListener(listener),task[task.length-1](taskCallback,results))

}
addListener(listener)}})},async.waterfall=function(tasks,callback){if(callback=callback||function(){},
tasks.constructor!==Array){var err=new Error("First argument to waterfall must be an array of functions")


return callback(err)}if(!tasks.length)return callback()
var wrapIterator=function(iterator){return function(err){if(err)callback.apply(null,arguments),callback=function(){}
else{var args=Array.prototype.slice.call(arguments,1),next=iterator.next()
next?args.push(wrapIterator(next)):args.push(callback),async.setImmediate(function(){iterator.apply(null,args)

})}}}
wrapIterator(async.iterator(tasks))()}
var _parallel=function(eachfn,tasks,callback){if(callback=callback||function(){},tasks.constructor===Array)eachfn.map(tasks,function(fn,callback){
fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1)
args.length<=1&&(args=args[0]),callback.call(null,err,args)})},callback)
else{var results={}
eachfn.each(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1)


args.length<=1&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})

}}
async.parallel=function(tasks,callback){_parallel({map:async.map,each:async.each},tasks,callback)},async.parallelLimit=function(tasks,limit,callback){
_parallel({map:_mapLimit(limit),each:_eachLimit(limit)},tasks,callback)},async.series=function(tasks,callback){
if(callback=callback||function(){},tasks.constructor===Array)async.mapSeries(tasks,function(fn,callback){
fn&&fn(function(err){var args=Array.prototype.slice.call(arguments,1)
args.length<=1&&(args=args[0]),callback.call(null,err,args)})},callback)
else{var results={}
async.eachSeries(_keys(tasks),function(k,callback){tasks[k](function(err){var args=Array.prototype.slice.call(arguments,1)


args.length<=1&&(args=args[0]),results[k]=args,callback(err)})},function(err){callback(err,results)})

}},async.iterator=function(tasks){var makeCallback=function(index){var fn=function(){return tasks.length&&tasks[index].apply(null,arguments),
fn.next()}
return fn.next=function(){return index<tasks.length-1?makeCallback(index+1):null},fn}
return makeCallback(0)},async.apply=function(fn){var args=Array.prototype.slice.call(arguments,1)
return function(){return fn.apply(null,args.concat(Array.prototype.slice.call(arguments)))}}
var _concat=function(eachfn,arr,fn,callback){var r=[]
eachfn(arr,function(x,cb){fn(x,function(err,y){r=r.concat(y||[]),cb(err)})},function(err){callback(err,r)

})}
async.concat=doParallel(_concat),async.concatSeries=doSeries(_concat),async.whilst=function(test,iterator,callback){
test()?iterator(function(err){return err?callback(err):void async.whilst(test,iterator,callback)}):callback()

},async.doWhilst=function(iterator,test,callback){iterator(function(err){return err?callback(err):void(test()?async.doWhilst(iterator,test,callback):callback())

})},async.until=function(test,iterator,callback){test()?callback():iterator(function(err){return err?callback(err):void async.until(test,iterator,callback)

})},async.doUntil=function(iterator,test,callback){iterator(function(err){return err?callback(err):void(test()?callback():async.doUntil(iterator,test,callback))

})},async.queue=function(worker,concurrency){function _insert(q,data,pos,callback){data.constructor!==Array&&(data=[data]),
_each(data,function(task){var item={data:task,callback:"function"==typeof callback?callback:null}
pos?q.tasks.unshift(item):q.tasks.push(item),q.saturated&&q.tasks.length===concurrency&&q.saturated(),
async.setImmediate(q.process)})}void 0===concurrency&&(concurrency=1)
var workers=0,q={tasks:[],concurrency:concurrency,saturated:null,empty:null,drain:null,push:function(data,callback){
_insert(q,data,!1,callback)},unshift:function(data,callback){_insert(q,data,!0,callback)},process:function(){
if(workers<q.concurrency&&q.tasks.length){var task=q.tasks.shift()
q.empty&&0===q.tasks.length&&q.empty(),workers+=1
var next=function(){workers-=1,task.callback&&task.callback.apply(task,arguments),q.drain&&q.tasks.length+workers===0&&q.drain(),
q.process()},cb=only_once(next)
worker(task.data,cb)}},length:function(){return q.tasks.length},running:function(){return workers}}
return q},async.cargo=function(worker,payload){var working=!1,tasks=[],cargo={tasks:tasks,payload:payload,
saturated:null,empty:null,drain:null,push:function(data,callback){data.constructor!==Array&&(data=[data]),
_each(data,function(task){tasks.push({data:task,callback:"function"==typeof callback?callback:null}),
cargo.saturated&&tasks.length===payload&&cargo.saturated()}),async.setImmediate(cargo.process)},process:function process(){
if(!working){if(0===tasks.length)return void(cargo.drain&&cargo.drain())
var ts="number"==typeof payload?tasks.splice(0,payload):tasks.splice(0),ds=_map(ts,function(task){return task.data

})
cargo.empty&&cargo.empty(),working=!0,worker(ds,function(){working=!1
var args=arguments
_each(ts,function(data){data.callback&&data.callback.apply(null,args)}),process()})}},length:function(){
return tasks.length},running:function(){return working}}
return cargo}
var _console_fn=function(name){return function(fn){var args=Array.prototype.slice.call(arguments,1)
fn.apply(null,args.concat([function(err){var args=Array.prototype.slice.call(arguments,1)
"undefined"!=typeof console&&(err?console.error&&console.error(err):console[name]&&_each(args,function(x){
console[name](x)}))}]))}}
async.log=_console_fn("log"),async.dir=_console_fn("dir"),async.memoize=function(fn,hasher){var memo={},queues={}


hasher=hasher||function(x){return x}
var memoized=function(){var args=Array.prototype.slice.call(arguments),callback=args.pop(),key=hasher.apply(null,args)


key in memo?callback.apply(null,memo[key]):key in queues?queues[key].push(callback):(queues[key]=[callback],
fn.apply(null,args.concat([function(){memo[key]=arguments
var q=queues[key]
delete queues[key]
for(var i=0,l=q.length;i<l;i++)q[i].apply(null,arguments)}])))}
return memoized.memo=memo,memoized.unmemoized=fn,memoized},async.unmemoize=function(fn){return function(){
return(fn.unmemoized||fn).apply(null,arguments)}},async.times=function(count,iterator,callback){for(var counter=[],i=0;i<count;i++)counter.push(i)


return async.map(counter,iterator,callback)},async.timesSeries=function(count,iterator,callback){for(var counter=[],i=0;i<count;i++)counter.push(i)


return async.mapSeries(counter,iterator,callback)},async.compose=function(){var fns=Array.prototype.reverse.call(arguments)


return function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop()
async.reduce(fns,args,function(newargs,fn,cb){fn.apply(that,newargs.concat([function(){var err=arguments[0],nextargs=Array.prototype.slice.call(arguments,1)


cb(err,nextargs)}]))},function(err,results){callback.apply(that,[err].concat(results))})}}
var _applyEach=function(eachfn,fns){var go=function(){var that=this,args=Array.prototype.slice.call(arguments),callback=args.pop()


return eachfn(fns,function(fn,cb){fn.apply(that,args.concat([cb]))},callback)}
if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2)
return go.apply(this,args)}return go}
async.applyEach=doParallel(_applyEach),async.applyEachSeries=doSeries(_applyEach),async.forever=function(fn,callback){
function next(err){if(err){if(callback)return callback(err)
throw err}fn(next)}next()},"undefined"!=typeof define&&define.amd?define([],function(){return async}):"undefined"!=typeof module&&module.exports?module.exports=async:root.async=async

}()})


define("text!plugins/c9.ide.metrics/server/metrics_server.js",[],'var fs = require("fs");\n\nmodule.exports = function(vfs, options, register) {\n    register(\n        null,\n        {\n            benchmark: function(ping, callback) {\n                setTimeout(function() {\n                    var result = 0;\n                    var end = Date.now() + 700;\n                    while (Date.now() < end) {\n                        result++;\n                    }\n                    fs.writeFile("/var/lib/c9/res", result + " " + ping, function(err) {\n                        if (err) console.error(err);\n                        callback(null, result);\n                    });\n                });\n            },\n            \n            getContainerMetrics: function(callback) {\n                this.getCPULimit(function(err, result) {\n                    if (err) return callback(err);\n                    \n                    callback(null, { cpuLimit: result, memoryUsage: process.memoryUsage() });\n                });\n            },\n            \n            getCPULimit: function(callback) {\n                if (typeof callback !== "function")\n                    throw new Error("Bad callback specified for getCPULimit():" + JSON.stringify(callback) + " " + callback.constructor);\n                \n                fs.readFile("/var/lib/c9/limits", function(err, result) {\n                    if (err) return callback(null, false); // ignore; no limit\n                    \n                    var fields = result.toString().split(" ");\n\n                    var limit = parseInt(fields[0], 10);\n                    var defaultLimit = parseInt(fields[1], 10);\n\n                    callback(null, limit < defaultLimit);\n                });\n            }\n        }\n    );\n};')


define("plugins/c9.ide.metrics/metrics_core",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,DEBUG&&!c9.standalone&&vfs.once("connect",function(){
setTimeout(publishMetrics,3e3)}),c9.standalone||(workspaceMetrics.once("workspaceReady",function(){sendLoadTimeMetrics()

}),workspaceMetrics.once("timeout",function(){sendLoadTimeMetrics()}),setTimeout(function(){publishMetrics(!0),
setInterval(function(){publishMetrics()},METRICS_INTERVAL)},METRICS_INTERVAL_INITIAL)),c9.on("connect",onConnect),
c9.on("disconnect",onDisconnect),void calculatePing())}function sendLoadTimeMetrics(){if(!sentLoadTimeMetrics){
sentLoadTimeMetrics=!0
var workspaceLoadTimes=workspaceMetrics.getWorkspaceLoadTimes(),workspaceLoadTimeout=workspaceMetrics.getWorkspaceLoadTimeout()


for(var metricName in workspaceLoadTimes)workspaceLoadMetrics[metricName]=workspaceLoadTimes[metricName]||workspaceLoadTimeout


doSendMetrics(workspaceLoadMetrics,function(){})}}function calculatePing(){var startTime=Date.now()
vfsPing.ping(function(err,result){err||(pings.push(result.total),document.hidden===!1?focusedPings.push(result.total):unfocusedPings.push(result.total),
result.serverTime&&serverPings.push(result.serverTime))}),pings.length%2&&http.request("/_ping",{headers:{
Accept:"application/json"}},function(){newClientPings.push(Date.now()-startTime)}),setTimeout(function(){
clientEventLoopBlocks.push(Date.now()-startTime)},0),setTimeout(calculatePing,PING_INTERVAL)}function onDisconnect(){
server=null,vfsEndPoint.isOnline(function(err,isOnline){!err&&isOnline?lastOnlineDisconnects.push({time:Date.now(),
duration:0}):lastOfflineDisconnects.push({time:Date.now(),duration:0})})}function last(array){return array&&array.length?array[array.length-1]:void 0

}function last5(array){return array&&array.length?array.slice(Math.max(0,array.length-5)):void 0}function avg(array){
if(array&&array.length){var sum=array.reduce(function(val,item){return val+item},0)
return Math.round(sum/array.length)}}function max(array){if(array&&array.length)return Math.max.apply(Math,array)

}function trimExtremeResults(array){if(!array||!array.length)return[]
var arrayAverage=avg(array)
return array.filter(function(item){return item<3*arrayAverage})}function onConnect(){var lastOnlineDisconnect=last(lastOnlineDisconnects),lastOfflineDisconnect=last(lastOfflineDisconnects),lastDisconnect=null


lastOnlineDisconnect&&lastOfflineDisconnect?lastDisconnect=(lastOnlineDisconnect.time||0)>(lastOfflineDisconnect.time||0)?lastOnlineDisconnect:lastOfflineDisconnect:lastOnlineDisconnect?lastDisconnect=lastOnlineDisconnect:lastOfflineDisconnect&&(lastDisconnect=lastOfflineDisconnect),
lastDisconnect&&0===lastDisconnect.duration&&(lastDisconnect.duration=Date.now()-lastDisconnect.time)

}function publishMetrics(initialMetrics){var onlineDisconnects=void 0,offlineDisconnects=void 0,timeDisconnected=void 0,recentOnlineDisconnects=void 0,recentOfflineDisconnects=void 0


if(!initialMetrics){if(Date.now()-sessionStart>DISCONNECT_PERIOD){var expiryTime=Date.now()-DISCONNECT_PERIOD


lastOnlineDisconnects=lastOnlineDisconnects.filter(function(disconnect){return disconnect.time>expiryTime

}),lastOfflineDisconnects=lastOfflineDisconnects.filter(function(disconnect){return disconnect.time>expiryTime

}),onlineDisconnects=lastOnlineDisconnects.length,offlineDisconnects=lastOfflineDisconnects.length
var onlineTimeDisconnected=lastOnlineDisconnects.reduce(function(val,disconnect){return val+disconnect.duration

},0),offlineTimeDisconnected=lastOfflineDisconnects.reduce(function(val,disconnect){return val+disconnect.duration

},0)
timeDisconnected=onlineTimeDisconnected+offlineTimeDisconnected}var currentTime=Date.now()
recentOnlineDisconnects=lastOnlineDisconnects.filter(function(disconnect){return disconnect.time>currentTime-METRICS_INTERVAL

}).length,recentOfflineDisconnects=lastOfflineDisconnects.filter(function(disconnect){return disconnect.time>currentTime-METRICS_INTERVAL

}).length}var saveTimes=saveMetrics.getNormalSaveTimes(),fallbackSaveTimes=saveMetrics.getFallbackSaveTimes()


async.series([installServer,function(next){return 50*Math.random()>1?(lastBenchmark=null,next()):void server.benchmark(avg(pings),function(err,result){
err&&console.error("Benchmark failed",err),lastBenchmark=result,next()})},function(next){return c9.hosted&&!SSH&&server?void server.getContainerMetrics(function(err,result){
lastCPULimit=!err&&result.cpuLimit,lastWorkerMemory=!err&&result.memoryUsage.heapUsed,next()}):next()

},function(next){return c9.hosted?void proc.execFile("uptime",function(err,stdout,stderr){if(err)return console.warn("Could not get system load"),
next()
var match=stdout.match(/.*?([\d.]+)$/m)
lastLoad15Min=match&&parseInt(match[1],10)||void 0,next()}):next()},function(next){latestMetrics={ping:avg(pings),
pingMax:max(pings),pingNormalized:avg(trimExtremeResults(pings)),serverPing:avg(serverPings),serverPingNormalized:avg(trimExtremeResults(serverPings)),
pings:last5(pings),focusedPingNormalized:avg(trimExtremeResults(focusedPings)),unfocusedPingNormalized:avg(trimExtremeResults(unfocusedPings)),
newClientPing:avg(newClientPings),newClientPingNormalized:avg(trimExtremeResults(newClientPings)),newClientPings:last5(newClientPings),
clientEventLoopBlocks:last5(clientEventLoopBlocks),saveTime:avg(saveTimes),saveTimeMax:max(saveTimes),
saveTimeNormalized:avg(trimExtremeResults(saveTimes)),saveTimes:last5(saveTimes),fallbackSaveTime:avg(fallbackSaveTimes),
fallbackSaveTimes:last5(fallbackSaveTimes),version:c9.version,benchmark:lastBenchmark||void 0,cpuLimit:lastCPULimit,
load15Min:lastLoad15Min,onlineDisconnects:onlineDisconnects,offlineDisconnects:offlineDisconnects,timeDisconnected:timeDisconnected,
recentOnlineDisconnects:recentOnlineDisconnects,recentOfflineDisconnects:recentOfflineDisconnects,duration:Date.now()-sessionStart,
ssh:SSH,workspaceRegion:workspaceRegion,userRegion:userRegion,vfsRegion:vfsRegion},lastWorkerMemory&&(log("worker_memory",lastWorkerMemory/1024/1024,[16,32,64,128,256]),
lastWorkerMemory>1024*maxReportedMemory*1024&&(errorLogger.log("high worker memory usage",{value:lastWorkerMemory
}),maxReportedMemory=2*lastWorkerMemory)),sendMetrics(!0,function(err,data,res){return err?console.error("Failed to send metrics",err):void next()

})}],function(err){err&&"EDISCONNECT"===!err.code&&errorLogger.log(err),pings=[],focusedPings=[],unfocusedPings=[],
serverPings=[],newClientPings=[],clientEventLoopBlocks=[],saveMetrics.clearSaveTimes()})}function sendMetrics(sendAll,callback){
sendAll&&(sendMetricsAll=!0),sendMetricsCallbacks.push(callback||function(){}),sendMetricsActive||(sendMetricsActive=!0,
setTimeout(function sendNow(){var callbacks=sendMetricsCallbacks
sendMetricsCallbacks=[],doSendMetrics(sendMetricsAll?latestMetrics:{},function(err,data,res){sendMetricsActive=!1,
sendMetricsAll=!1,callbacks.forEach(function(cb){cb(err,data,res)}),sendMetricsCallbacks.length&&sendNow()

})},50))}function doSendMetrics(metrics,callback){return callback||(callback=function(err,data,res){if(err)return console.error("Failed to send metrics",err)

}),vfs.serviceUrl?(metrics.increments=pendingIncrements,metrics.gauges=pendingGauges,pendingIncrements={},
pendingGauges={},void authRequest(vfs.serviceUrl+"/stats",{timeout:5e3,body:metrics,contentType:"application/json",
headers:{Accept:"application/json"},method:"POST"},callback)):callback(new Error("VFS not connected."))

}function installServer(callback){return server?callback():void ext.loadRemotePlugin("metrics_server",{
code:require("text!./server/metrics_server.js"),redefine:!0},function(err,remote){return err?callback(err):(server=remote,
void callback())})}function log(name,value,levels,now){if("boolean"==typeof levels)return log(name,value,null,levels)


if(null!=value){if(levels){increment(name+"_total",1),zeroLevels[name]&&(increment(zeroLevels[name],0),
pendingIncrements[zeroLevels[name]]&&(pendingIncrements[name+"_total"]-=pendingIncrements[zeroLevels[name]],
pendingIncrements[zeroLevels[name]]=0))
for(var i=0;i<levels.length;i++)if(value<=levels[i])return zeroLevels[name]=name+"_"+levels[i],increment(name+"_"+levels[i],1,now)


return zeroLevels[name]=name+"_over_"+levels[levels.length-1],increment(name+"_over_"+levels[levels.length-1],1,now)

}pendingGauges[name]=value,now&&vfs.serviceUrl&&(c9.has(c9.NETWORK)||options.testing)&&sendMetrics()}
}function increment(name,value,now){null==value&&(value=1),pendingIncrements[name]=(pendingIncrements[name]||0)+value,
now&&vfs.serviceUrl&&(c9.has(c9.NETWORK)||options.testing)&&sendMetrics()}var latestMetrics,server,lastBenchmark,lastWorkerMemory,lastLoad15Min,Plugin=imports.Plugin,c9=imports.c9,proc=imports.proc,auth=imports.auth,workspaceMetrics=imports["metrics.workspace"],saveMetrics=imports["metrics.save"],ext=imports.ext,metricsApi=imports.metrics,async=require("async"),http=imports.http,vfs=imports.vfs,vfsPing=imports["vfs.ping"],vfsEndPoint=imports["vfs.endpoint"],errorLogger=imports.error_handler,plugin=new Plugin("Ajax.org",main.consumes),DEBUG=(plugin.getEmitter(),
!1),METRICS_INTERVAL=options.writeInterval||3e5,METRICS_INTERVAL_INITIAL=METRICS_INTERVAL/4,PING_INTERVAL=options.pingInterval||1e4,SSH=options.ssh,DISCONNECT_PERIOD=18e5,workspaceRegion=options.workspaceRegion,vfsRegion=options.vfsRegion,userRegion=options.userRegion,sessionStart=Date.now(),pings=[],focusedPings=[],unfocusedPings=[],serverPings=[],newClientPings=[],clientEventLoopBlocks=[],lastCPULimit=!1,maxReportedMemory=80,lastOnlineDisconnects=[],lastOfflineDisconnects=[],workspaceLoadMetrics={},sentLoadTimeMetrics=!1,pendingGauges={},pendingIncrements={},authRequest=auth.request,sendMetricsCallbacks=[],sendMetricsActive=!1,sendMetricsAll=!1,zeroLevels={},loaded=!1


plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1}),metricsApi.$publishApi({
getLastPing:function(){return last(pings)},onPingComplete:function(callback){plugin.on("ping.complete",callback)

},getLatest:function(){return latestMetrics},log:log,increment:increment,$setRequestApi:function(api){
authRequest=api}}),plugin.freezePublicAPI({}),register(null,{metrics_core:plugin})}return main.consumes=["Plugin","http","ext","c9","proc","auth","metrics.workspace","metrics.save","metrics","vfs","vfs.ping","vfs.endpoint","error_handler"],
main.provides=["metrics_core"],main})


define("plugins/c9.ide.performancestats/stats_analytics",[],function(require,exports,module){function main(options,imports,register){
var analytics=imports["c9.analytics"],performancestats=imports.performancestats,analyticsOptions={integrations:{
All:!0}},eventName="Stats Plugin Action Triggered"
performancestats.on("resourceLimitHit",function(e){analytics.track(eventName,{type:"resourceLimitHit",
resourceType:e.type},analyticsOptions)}),performancestats.on("resizeStart",function(e){analytics.track(eventName,{
type:"resizeStart",source:e.source,machine:e.machine},analyticsOptions)}),performancestats.on("resizeEnd",function(e){
analytics.track(eventName,{type:"resizeEnd",source:e.source,machine:e.machine},analyticsOptions)}),performancestats.on("restartStart",function(e){
analytics.track(eventName,{type:"restartStart",source:e.source},analyticsOptions)}),performancestats.on("restartEnd",function(e){
analytics.track(eventName,{type:"restartEnd",source:e.source},analyticsOptions)}),performancestats.on("processListShow",function(e){
analytics.track(eventName,{type:"processListShow",source:e.source},analyticsOptions)}),performancestats.on("confirmAccountRedirect",function(e){
analytics.track(eventName,{type:"confirmAccountRedirect",source:e.source},analyticsOptions)}),register(null,{
performancestats_analytics:{}})}return main.consumes=["performancestats","c9.analytics"],main.provides=["performancestats_analytics"],
module.exports=main,main})


define("text!plugins/c9.ide.performancestats/plan.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <strong class="title">Current plan: <span class="plan">free</span></strong>\n    <div class="details">\n        <div class="heading"><span>Resources</span> <span>used</span><span>total</span></div>\n        <div class="row workspaces"><span>Workspaces:</span> <span class="used">...</span><div class="progress"></div><span class="total">...</span></div>\n        <div class="row performance"><span>Performance:</span> <span class="used">...</span><div class="progress"></div><span class="total"></span></div>\n    </div>\n    <a:button class="btn-green" skin="btn-default-css3" id="upgrade">Change Plan</a:button>\n</a:application>')


define("text!plugins/c9.ide.performancestats/stats.less",[],"")


define("text!plugins/c9.ide.performancestats/stats.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <!--a:hbox class="grouped_checkbox_holder with_caption mount" align="start" height="27"\n      style="display:inline-block !important;pointer-events:all">\n        <a:checkbox label="Resources" skin="grouped_checkbox" checked="true" group="stats" />\n        <a:checkbox label="Process list" skin="grouped_checkbox" group="stats" />\n    </a:hbox-->\n\n    <div class="stats-tabs">\n        <div class="page">\n            <div class="title">\n                Workspace size: <span>small</span>\n                <div class="ping-time">Latency: calculating...</div>\n            </div>\n        \n            <div class="stats-warning">Real-time stats updates have been disabled <a href="https://community.c9.io/t/why-are-my-workspace-stats-not-automatically-updating/6663" target="_blank">(why?)</a></div>\n            <div class="graph-label mem">\n                Memory: <span class=\'mem-used\'>0</span>MB / <span class=\'mem-available\'>1024</span>MB</div>\n            <div class="graph mem"></div>\n            <div class="graph-label">CPU: <span class=\'cpu-used\'>0</span>%</div>\n            <div class="graph cpu"></div>\n            <div class="graph-label">Disk: <span class=\'disk-used\'>0</span>MB / <span class=\'disk-available\'>5120</span>MB</div>\n            <div class="graph disk"></div>\n            \n            <div id="resizeContainerWrapper">\n                <div class="info" id="resizeContainer">\n                    <span>Resize this workspace (requires restart):</span>\n                    <a:hbox>\n                        <a:vbox flex="1">\n                            <span>Memory: </span>\n                            <a:dropdown skin="black_dropdown" id="ddResizeMem"/>\n                        </a:vbox>\n                        <div style="width:5px"></div>\n                        <a:vbox flex="1">\n                            <span>CPU: </span>\n                            <a:dropdown skin="black_dropdown" id="ddResizeCPU"/>\n                        </a:vbox>\n                        <a:vbox flex="1">\n                            <span>Disk: </span>\n                            <a:dropdown skin="black_dropdown" id="ddResizeDisk"/>\n                        </a:vbox>\n                    </a:hbox>\n                    <a:button id="btnResize" skin="btn-default-css3" class="btn-green" \n                        style="margin:10px 0 0 0px">Resize</a:button>\n                </div>\n            </div>\n            \n            <span style="display: none">\n                <div class="info" id="upgradeToResize">\n                    <span class="upgrade-to-resize">\n                        Please upgrade to premium to resize your workspace.\n                        As a premium user, you get:\n                        <ul>\n                            <li>increased performance</li>\n                            <li>additional resources (memory, disk)</li>\n                            <li>unlimited workspaces</li>\n                        </ul>\n                    </span>\n                    <a:button class="btn-green button-resize-upgrade" skin="btn-default-css3" id="resizeUpgrade">\n                        Upgrade\n                    </a:button>\n                </div>\n            </span>\n            \n            <div id="actionContainer">\n                <a:hsplitbox class="buttons" padding="10">\n                    <a:button id="plist" skin="btn-default-css3" width="60%">Show Process List</a:button>\n                    <a:button id="restart" skin="btn-default-css3" class="restart">Restart</a:button>\n                </a:hsplitbox>\n            </div>\n        </div>\n    </div>\n</a:application>')


define("text!plugins/c9.ide.performancestats/server/stats_server.js",[],'var http = require("http");\n\nmodule.exports = function(vfs, options, register) {\n    \n    function getContainerStats(callback) {\n        http.get({\n            hostname: \'172.17.0.1\',\n            port: 9999,\n            path: \'/stats\'\n        }, function (e) {\n            var res = "";\n            e.on("data", function (chunk) {\n                res += chunk;\n            });\n            e.on("end", function () {\n                try {\n                    var stats = JSON.parse(res);\n                } catch (e) {\n                    return done(new Error("Failed to parse stats from server"));\n                }\n                stats.ts = Date.now();\n                done(null, { stats: [stats]});\n            });\n        }).on("error", function(e) {\n            done(e);\n        });\n        \n        function done(err, result) {\n            callback && callback(err, result);\n            callback = null;\n        }\n    }\n        \n    var statsServer = {\n        getContainerStats: getContainerStats\n    };\n    \n    register(null, statsServer);\n};')


define("plugins/c9.ide.performancestats/stats",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,void(SSH||options.testing||options.disabled||c9.readonly||(draw(),
installServer(function(err){return err?errorHandler.log(err):void updateStats()}),metrics.onPingComplete(monitorPingTime),
c9.on("disconnect",onDisconnect),commands.addCommand({name:"restartc9vm",exec:function(){restart()}},plugin),
disableResizeUI||login.on("ready",function(){var menu=login.menu
ui.insertByIndex(menu,new ui.divider,20,plugin),currentPlan=new ui.bar({"class":"current-plan"}),menu.insertBefore(currentPlan,menu.firstChild),
plugin.addElement(currentPlan),menu.on("prop.visible",function(e){if(!menu.inited){ui.insertMarkup(currentPlan,require("text!./plan.xml"),plugin)


var btnUpgrade=plugin.getElement("upgrade")
btnUpgrade.on("click",function(){handleEmit("confirmAccountRedirect",{source:"menu"}),upgrade.openUpgrade({
source:"ide-stats-upgrade-premium-webide"})}),info.getUser(function(err,user){return err?console.error(err):void btnUpgrade.setCaption(user.premum?"Update Plan":"Upgrade")

}),menu.inited=!0}e.value&&updateUserMenu()})},plugin))))}function draw(options){if(!drawn){drawn=!0,
ui.insertCss(require("text!./stats.less"),plugin),menu=new ui.menu({htmlNode:document.body,width:344,
"class":"stats-menu"}),button=new ui.button({skin:"c9-simple-btn","class":"stats-btn",submenu:menu}),
button.on("mousedown",function(eInfo){var e=eInfo.htmlEvent,isPinned=menu.pinned;(apf.isMac&&e.metaKey||e.ctrlKey)&&(menu.keepPinned&&isPinned?(menu.keepPinned=!1,
menu.setProperty("pinned",!1)):(menu.setProperty("pinned",!0),menu.keepPinned=!0))},!0),button.on("mouseup",function(eInfo){
var e=eInfo.htmlEvent,pinnedStateModifier=apf.isMac&&e.metaKey||e.ctrlKey
!pinnedStateModifier&&menu.keepPinned&&(this.showMenu(),menu.setProperty("pinned",!0))},!0),ui.insertByIndex(layout.findParent({
name:"preferences"}),button,870,plugin),button.$ext.innerHTML='                <div class="item mem">Memory <span class="progress"></span></div>                <div class="item cpu">CPU <span class="progress"></span></div>                <div class="item disk">Disk <span class="progress"></span></div>'


var inited
menu.once("prop.visible",function(){ui.insertMarkup(menu,require("text!./stats.xml"),plugin)
var btnUpgrade=plugin.getElement("resizeUpgrade")
if(btnUpgrade.on("click",function(){handleEmit("confirmAccountRedirect",{source:"menu"}),upgrade.openUpgrade({
source:"ide-stats-error-premium-webide"})}),disableResizeUI){var wrapper=plugin.getElement("resizeContainerWrapper")


wrapper.setProperty("visible",!1)}ddResizeMem=plugin.getElement("ddResizeMem"),ddResizeCPU=plugin.getElement("ddResizeCPU"),
ddResizeDisk=plugin.getElement("ddResizeDisk"),btnResize=plugin.getElement("btnResize"),btnRestart=plugin.getElement("restart"),
ddResizeCPU.$ext.parentNode.parentNode.style.display="none",populateContainerSizes(ddResizeMem,ddResizeCPU,ddResizeDisk,btnResize),
updateCurrentWorkspaceSize(!0),plugin.getElement("plist").on("click",function(){handleEmit("processListShow",{
source:"resourceInfo"}),commands.exec("showprocesslist")}),btnRestart.on("click",function(){handleEmit("restartStart",{
source:"resourceInfo"}),restart(function(){handleEmit("restartEnd",{source:"resourceInfo"})})}),btnResize.on("click",function(){
var data={ram:ddResizeMem.getValue()||currentSize.ram,cpu:ddResizeCPU.getValue()||currentSize.cpu,disk:ddResizeDisk.getValue()||currentSize.disk
}
handleEmit("resizeStart",{source:"resourceInfo",machine:data}),resize(data,btnResize,function(){handleEmit("resizeEnd",{
source:"resourceInfo"})})}),c9.isAdmin||(plugin.getElement("resizeContainer").style.display="none",plugin.getElement("actionContainer").style.display="none"),
updateMenu(),inited=!0}),menu.on("prop.visible",function(e){inited&&e.value&&(updateMenu(),updateStats(),
updateCurrentWorkspaceSize(currentSize.err))})}}function resize(options,btn,callback){function done(err){
setTimeout(function(){updateCurrentWorkspaceSize(!0)},1e3),err?displayError(err):alert("Resize complete","","Workspace resize completed successfully"),
document.body.classList.remove("noInput"),menu.setAttribute("class","stats-menu"),btn.setCaption("Resize"),
btn.enable(),setLoadingSpinner(btn,"")}function displayError(err){if(402==err.code)return upgrade.askUpgrade("Workspace Resizing","Workspace resizing is a premium feature. Please upgrade your account to enable resizing.",function(){
handleEmit("confirmAccountRedirect",{source:"confirmation"})},{source:"ide-stats-error-premium-webide"
})
err.code===ENOOP&&alert("Workspace is already this size","Please select a different size","This workspace is already the size you selected. Please select another size and try again.")


var quotaError=err.message.match(/Not enough ([a-z]+) quota available/)
if(quotaError)return upgrade.askUpgrade("Insufficient quota","Your account does not have enough "+quotaError[1]+" quota available to resize this workspace.",function(){
handleEmit("confirmAccountRedirect",{source:"confirmation"}),upgrade.openUpgrade({source:"ide-stats-error-premium-webide"
})},function(){})
var resizeError="Unfortunately your workspace failed to resize correctly. Please try again and if it continues to fail please contact support."


err.message.match(/file size exceeds/)&&(resizeError="Unfortunately you cannot resize your workspace as you are using more disk space than the size you chose allows."),
alert("Error resizing workspace","Could not resize workspace",resizeError)}options||(options={})
var ram=options.ram,disk=options.disk,cpu=options.cpu
if(!ram||!disk||!cpu)return alert("No workspace size selected","Please select a workspace size and try again.")


if(ram==currentSize.ram&&disk==currentSize.disk&&cpu==currentSize.cpu){var err=new Error("Workspace is already this size")


return err.code=ENOOP,done(err)}handleEmit("beforeResize",options),document.body.classList.add("noInput"),
menu.setAttribute("class","resizing stats-menu"),btn.setCaption("Resizing..."),btn.disable(),setLoadingSpinner(btn,"resizing"),
api.project.post("resize",{body:{ram:ram,disk:disk,cpu:cpu}},function(err){return err?(done(err),callback(err)):void pollResize(function(err,data,working){
if(!err)return data.state==STATE_READY&&data.error?(done(new Error(data.error)),callback(err)):void(working||(done(),
callback()))})})}function setLoadingSpinner(button,className){var node=button.$ext.querySelector(".loading-spinner")


className?(node=node||document.createElement("div"),node.className="loading-spinner "+className,button.oCaption.parentNode.insertBefore(node,button.oCaption)):node&&node.remove()

}function pollResize(callback){api.project.get("resize/status",function(err,data){var working=data.state==STATE_RESIZING


callback(err,data,working),(err||working)&&(resizeTimeout=setTimeout(function(){pollResize(callback)},500))

})}function restart(callback){function done(err){document.body.classList.remove("noInput"),menu.setAttribute("class","stats-menu"),
btnRestart.enable(),setLoadingSpinner(btnRestart,""),callback&&callback(err)}button.showMenu(),document.body.classList.add("noInput"),
menu.setAttribute("class","restarting stats-menu"),btnRestart.disable(),setLoadingSpinner(btnRestart,"restarting"),
api.project.post("restart",{},function(err){return err?(alert("Error restarting workspace","Could not restart workspace","An error occurred restarting this workspace: "+err.message),
done(err)):(alert("Restart complete","","Workspace restart completed successfully"),void done())})}function updateCurrentWorkspaceSize(update,callback){
callback=callback||function(){},info.getWorkspace(function(err,project){var ram,cpu,disk
err?(ram=currentSize.ram,cpu=currentSize.cpu,disk=currentSize.disk):c9.standalone?(ram=1024,cpu=1,disk=5120):project.remote&&project.remote.ram?(ram=project.remote.ram,
cpu=project.remote.cpu,disk=project.remote.disk):project.remote&&project.remote.metadata&&project.remote.metadata.container?(ram=project.remote.metadata.container.ram,
cpu=project.remote.metadata.container.cpu,disk=project.remote.metadata.container.disk):(ram=512,cpu=1,
disk=1024)
var title=menu.$ext.querySelector(".title span")
title&&(title.textContent=" Memory: "+formatGB(ram)+"; Disk: "+formatGB(disk))
var diskAvailable=menu.$ext.querySelector(".graph-label .disk-available")
diskAvailable&&(diskAvailable.innerHTML=disk)
var memoryAvailable=menu.$ext.querySelector(".graph-label .mem-available")
return memoryAvailable&&(memoryAvailable.innerHTML=ram),currentSize={disk:disk,ram:ram,cpu:cpu,err:!!err
},ddResizeMem&&ddResizeMem.select(currentSize.ram),ddResizeCPU&&ddResizeCPU.select(currentSize.cpu),ddResizeDisk&&ddResizeDisk.select(currentSize.disk),
callback(null,currentSize)},update)}function populateContainerSizes(ddMem,ddCPU,ddDisk,btn){function populate(dd,range,format){
if(range)for(var i=range[0];i<=range[1];i+=range[2])dd.appendChild(new ui.item({value:i,caption:format(i)
}))}function formatCount(count){return count+(count>1?" cores":" core")}populate(ddMem,options.ramRange,formatGB),
populate(ddCPU,options.cpuRange,formatCount),populate(ddDisk,options.diskRange,formatGB)}function updateMenu(){
drawGraph(document.querySelector(".graph.mem"),history,"mem"),drawGraph(document.querySelector(".graph.disk"),history,"disk"),
drawGraph(document.querySelector(".graph.cpu"),history,"cpu")
var lastHistory=history[history.length-1]
lastHistory&&(null!=lastHistory.cpu_used&&(document.querySelector(".graph-label .cpu-used").textContent=Math.round(lastHistory.cpu_used/lastHistory.cpu_limit*100)),
null!=lastHistory.disk_used&&(document.querySelector(".graph-label .disk-used").textContent=lastHistory.disk_used),
null!=lastHistory.mem_used&&(document.querySelector(".graph-label .mem-used").textContent=lastHistory.mem_used)),
metrics.getLastPing()&&(document.querySelector(".ping-time").textContent="UI+network Latency: "+metrics.getLastPing()+"ms")

}function updateStats(){function updateStatMonitorBar(parentNode,selector,value,maxValue){parentNode.$ext.querySelector("."+selector+" .progress").style.width=Math.round(Math.max(1,50*Math.min(1,value/maxValue)))+"px"

}function updateStatMonitorBars(button,stat){updateStatMonitorBar(button,"disk",stat.disk_used,stat.disk_limit),
updateStatMonitorBar(button,"mem",stat.mem_used,stat.mem_limit),updateStatMonitorBar(button,"cpu",stat.cpu_used,stat.cpu_limit)

}function resizeAlert(stat){stat.out_of_memory&&(button.$ext.querySelector(".mem .progress").className="progress limit",
warnMemoryLimit(stat.out_of_memory)),stat.disk_limit&&stat.disk_used>=stat.disk_limit&&(button.$ext.querySelector(".disk .progress").className="progress limit",
warnDiskLimit())}function updateContainerStatsHistory(stats){if(history=history.concat(stats),history.splice(0,history.length-STATS_MAX_DATAPOINTS),
0!=history.length){menu.visible&&updateMenu()
var latestStats=stats.pop()
latestStats&&(updateStatMonitorBars(button,latestStats),resizeAlert(latestStats))}}getContainerStats(function(err,result){
if(err)return console.error(err.stack||err)
var lastStat=result.stats[result.stats.length-1]
metrics.log("stats.mem_used",lastStat&&lastStat.mem_used,[64,128,256,512,768,1024]),metrics.log("stats.mem_used_"+c9.configName,lastStat&&lastStat.mem_used,[64,128,256,512,768,1024]),
updateContainerStatsHistory(result.stats)}),automaticUpdates&&(clearTimeout(updateTimeout),updateTimeout=setTimeout(updateStats,STATS_BUTTON_INTERVAL))

}function startAutomaticUpdates(){automaticUpdates=!0,updateTimeout||updateStats()}function stopAutomaticUpdates(){
automaticUpdates=!1,clearTimeout(updateTimeout),updateTimeout=null}function monitorPingTime(lastPing){
var statsWarning=document.querySelector(".stats-warning")
lastPing>=DISABLE_AUTOMATIC_UPDATES_PING?(statsWarning&&(statsWarning.style.display="block"),stopAutomaticUpdates()):(statsWarning&&(statsWarning.style.display="none"),
startAutomaticUpdates())}function onDisconnect(){server=null}function installServer(callback){return server?callback():void ext.loadRemotePlugin("stats_server",{
code:require("text!./server/stats_server.js"),redefine:!0},function(err,remote){return err?callback(err):(server=remote,
void callback())})}function getContainerStats(callback){return c9.standalone?callback(null,{stats:[{ts:[Date.now()],
disk_used:[834],disk_limit:[1500],mem_used:[Math.round(512*Math.random())],mem_limit:[512],mem_failcount:[0],
cpu_used:[Math.round(70*Math.random()*.89)],cpu_limit:[70]}]}):void installServer(function(err){return err?callback(err):void server.getContainerStats(callback)

})}function drawGraphPolygon(cnv,points,fillStyle){var ctx=cnv.getContext("2d"),bottom=cnv.height,last=points[points.length-1]


ctx.beginPath(),points.forEach(function(point){ctx.lineTo(point.x,bottom-point.y)}),ctx.lineTo(last.x,bottom),
ctx.lineTo(points[0].x,bottom),ctx.closePath(),ctx.fillStyle=fillStyle,ctx.fill()}function drawGraph(div,data,field){
if(data&&data.length){var cnv=div.querySelector("canvas")
cnv||(cnv=ui.buildDom(["canvas",{width:300,height:40}],div))
var ctx=cnv.getContext("2d"),pointWidth=cnv.width/STATS_MAX_DATAPOINTS,offset=(STATS_MAX_DATAPOINTS-data.length)*pointWidth


ctx.clearRect(0,0,cnv.width,cnv.height)
var points=data.map(function(point,i){var x=i*pointWidth,value=point[field+"_used"],limit=point[field+"_limit"]


return{x:x+offset,y:value?Math.round(cnv.height*(value/limit)):0}})
drawGraphPolygon(div.firstChild,points,ui.getStyle(div,"color")||"#8ED6FF")}}function formatGB(size){
return size<1024?size+"MB":Math.round(size/1024*100)/100+"GB"}function updateUserMenu(){function countIdes(all){
var count=0
return Object.keys(all).forEach(function(key){/ide$/i.test(key)&&(count+=+all[key]||0)}),count}getQuota(function(err,data){
if(!err){var title=currentPlan.$ext.querySelector(".title"),plan=currentPlan.$ext.querySelector(".plan"),subscriptions=data.subscriptions||[]


subscriptions.length>1?(title.textContent="Current subscriptions: ",plan.textContent=subscriptions.map(function(s){
return s.name}).join(", ")):1==subscriptions.length?(title.textContent="Current plan: ",plan.textContent=subscriptions[0].name):data.active_trials&&data.active_trials.length&&(title.textContent="Current plan: ",
plan.textContent="trial"),title.appendChild(plan)
var ideUsed=countIdes(data.used),ideTotal=countIdes(data.total)
currentPlan.$ext.querySelector(".workspaces .used").textContent=ideUsed,currentPlan.$ext.querySelector(".workspaces .total").textContent=ideTotal>NEARLY_INFINITE?"\u221e":ideTotal,
currentPlan.$ext.querySelector(".performance .used").textContent=info.getWorkspace().premium?"premium":"basic (free)"

}})}function getQuota(callback){return c9.standalone?callback(null,{subscriptions:[{name:"Free"}],total:{
ram:6144,disk:61440,ssh:1},used:{ram:4096,disk:25600,ssh:0}}):void api.user.get("quota",function(err,data){
err&&console.error(err),callback(err,data)})}function warnLimitHit(type,title,message,callback){function closePopup(e){
e.value&&html.hideWindow(null,!0),plugin.getElement("resizeContainerWrapper").appendChild(plugin.getElement("resizeContainer")),
plugin.off("beforeResize",activateMenu)}function activateMenu(){menu.show(),menu.$ext&&(menu.$ext.scrollTop=menu.$ext.scrollHeight)

}var canShow=+new Date-lastShown>RESOURCE_LIMIT_WARNING_TIMEOUT
if(!showing&&canShow&&!isReadOnly()){showing=!0,lastShown=+new Date,handleEmit("resourceLimitHit",{type:type
})
var html=bubble.popup([["strong",{style:"color:#f06767"},title],message],!0,callback)
if(html&&(html.style.width="300px",html.style.left=html.offsetLeft-100+"px",html.className+=" stats-bubble",
bubble.on("closed",function handler(e){e.html==html&&(showing=!1,menu.off("prop.visible",closePopup),
plugin.getElement("resizeContainerWrapper").appendChild(plugin.getElement("resizeContainer")),html.bar&&html.bar.destroy(!0,!0),
bubble.off("closed",handler),callback())}),c9.isAdmin)){html.bar=new ui.bar({htmlNode:html}),menu.setProperty("visible",!0)


var control=info.getUser().premium?plugin.getElement("resizeContainer"):plugin.getElement("upgradeToResize")


html.bar.appendChild(control),menu.setProperty("visible",!1),menu.once("prop.visible",closePopup),plugin.on("beforeResize",activateMenu)

}}}function warnMemoryLimit(details){var message;/^(vfs-worker|tmux)/.test(details.targetName)&&(details.targetName=details.sourceName),
message=/^(vfs-worker|tmux)/.test(details.targetName)?"A running program hit a memory limit and was killed.":details.sourceName===details.targetName?"A running program ("+details.targetName+") hit a memory limit and was killed.":"A program ("+details.targetName+") hit a memory limit and was killed while running "+details.sourceName+".",
info.getUser().premium&&c9.isAdmin?message+=" Please consider resizing the workspace to a larger size.":!c9.isAdmin,
warnLimitHit("memory","Memory limit hit",message,function(){resetProgressBars()})}function warnDiskLimit(){
var message="Your disk is almost full. When your disk is full, normal operation won't be possible anymore."


info.getUser().premium&&c9.isAdmin?message+=" Please consider resizing your workspace.":c9.isAdmin||(message+=" Please notify the owner of this workspace to resize the workspace to a larger size."),
warnLimitHit("disk","Disk quota reached",message,function(){resetProgressBars()})}function resetProgressBars(){
button.$ext.querySelector(".cpu .progress").className="progress",button.$ext.querySelector(".disk .progress").className="progress",
button.$ext.querySelector(".mem .progress").className="progress"}function isReadOnly(){return!c9.isAdmin&&c9.readonly

}var button,menu,currentPlan,ddResizeMem,ddResizeDisk,ddResizeCPU,btnResize,btnRestart,resizeTimeout,updateTimeout,server,showing,Plugin=imports.Plugin,api=imports.api,ext=imports.ext,ui=imports.ui,c9=imports.c9,layout=imports.layout,info=imports.info,commands=imports.commands,metrics=imports.metrics,login=imports.login,bubble=imports["notification.bubble"],alert=imports["dialog.alert"].show,plugin=new Plugin("Ajax.org",main.consumes),errorHandler=imports.error_handler,upgrade=imports.upgrade,STATS_BUTTON_INTERVAL=options.readInterval||1e4,DISABLE_AUTOMATIC_UPDATES_PING=500,STATS_MAX_DATAPOINTS=101,SSH=options.ssh,RESOURCE_LIMIT_WARNING_TIMEOUT=6e4,STATE_READY=2,STATE_RESIZING=31,NEARLY_INFINITE=100,ENOOP="ENOOP",disableResizeUI=options.disableResizeUI,handleEmit=plugin.getEmitter(),history=[],currentSize={},automaticUpdates=!0,loaded=!1,drawn=!1,lastShown=0


plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1,drawn=!1,history=[],button=menu=currentPlan=ddResizeMem=ddResizeDisk=ddResizeCPU=void 0,
btnResize=btnRestart=void 0,currentSize={},server=void 0,clearTimeout(updateTimeout),clearTimeout(resizeTimeout),
showing=void 0,lastShown=0}),plugin.freezePublicAPI({updateCurrentWorkspaceSize:updateCurrentWorkspaceSize
}),register(null,{performancestats:plugin})}return main.consumes=["Plugin","api","ext","c9","ui","layout","commands","notification.bubble","login","api","info","dialog.alert","dialog.error","metrics","error_handler","upgrade"],
main.provides=["performancestats"],main})


define("plugins/c9.ide.run/run_analytics",[],function(require,exports,module){function main(options,imports,register){
var analytics=imports["c9.analytics"],cookie=imports["analytics.cookie"],run=imports.run,output=imports.output,COOKIE_RUNNERS_NAME="c9_runners_timestamp",analyticsOptions={
integrations:{All:!1}}
run.on("create",function(e){function sendToAllIntegrations(rCookie){analyticsOptions.integrations.Mixpanel=!0,
rCookie=rCookie?rCookie:{},rCookie[runnerName]={lastTimeLogged:Date.now()},cookie.set(COOKIE_RUNNERS_NAME,JSON.stringify(rCookie),1)

}if(e.process.runner){var runner=e.process.runner[0],runnerName=(runner.$builtin,runner.caption)
runner.cmd&&runner.cmd.length
try{var rCookie=JSON.parse(cookie.get(COOKIE_RUNNERS_NAME))
rCookie[runnerName]&&rCookie[runnerName].lastTimeLogged&&""!==rCookie[runnerName].lastTimeLogged&&new Date(parseInt(rCookie[runnerName].lastTimeLogged,10)).getDate()==(new Date).getDate()||sendToAllIntegrations(rCookie)

}catch(e){sendToAllIntegrations(rCookie)}}}),output.on("runnerNameChanged",function(name){analyticsOptions.integrations.Mixpanel=!0


var properties={runnerName:name}
analytics.track("Runner Config Saved",properties,analyticsOptions)}),output.on("cwdSet",function(cwd){
var properties={isRoot:!0}
"/"!=cwd&&(properties.isRoot=!1),analytics.track("CWD Set On Runner",properties,analyticsOptions)}),output.on("envSet",function(envVariable,config){
var properties={numEnvironmentVariables:Object.keys(config).length}
analytics.track("Environment Variables Set On Runner",properties,analyticsOptions)}),register(null,{run_analytics:{}
})}return main.consumes=["run","output","c9.analytics","analytics.cookie"],main.provides=["run_analytics"],
module.exports=main,main})


define("plugins/c9.ide.analytics/debug",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){}var Plugin=imports.Plugin,plugin=(imports["c9.analytics"],
imports.info,new Plugin("Ajax.org",main.consumes))
plugin.on("load",load),plugin.on("unload",load),register(null,{"analytics.debug":plugin})}main.consumes=["c9.analytics","c9","Plugin","info"],
main.provides=["analytics.debug"],module.exports=main})


define("querystring",[],function(require,exports,module){function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)

}function charCode(c){return c.charCodeAt(0)}var QueryString=exports,util=require("util")
QueryString.unescapeBuffer=function(s,decodeSpaces){for(var n,m,hexchar,out=new Buffer(s.length),state="CHAR",inIndex=0,outIndex=0;inIndex<=s.length;inIndex++){
var c=s.charCodeAt(inIndex)
switch(state){case"CHAR":switch(c){case charCode("%"):n=0,m=0,state="HEX0"
break
case charCode("+"):decodeSpaces&&(c=charCode(" "))
default:out[outIndex++]=c}break
case"HEX0":if(state="HEX1",hexchar=c,charCode("0")<=c&&c<=charCode("9"))n=c-charCode("0")
else if(charCode("a")<=c&&c<=charCode("f"))n=c-charCode("a")+10
else{if(!(charCode("A")<=c&&c<=charCode("F"))){out[outIndex++]=charCode("%"),out[outIndex++]=c,state="CHAR"


break}n=c-charCode("A")+10}break
case"HEX1":if(state="CHAR",charCode("0")<=c&&c<=charCode("9"))m=c-charCode("0")
else if(charCode("a")<=c&&c<=charCode("f"))m=c-charCode("a")+10
else{if(!(charCode("A")<=c&&c<=charCode("F"))){out[outIndex++]=charCode("%"),out[outIndex++]=hexchar,
out[outIndex++]=c
break}m=c-charCode("A")+10}out[outIndex++]=16*n+m}}return out.slice(0,outIndex-1)},QueryString.unescape=function(s,decodeSpaces){
return QueryString.unescapeBuffer(s,decodeSpaces).toString()},QueryString.escape=function(str){return encodeURIComponent(str)

}
var stringifyPrimitive=function(v){return util.isString(v)?v:util.isBoolean(v)?v?"true":"false":util.isNumber(v)&&isFinite(v)?v:""

}
QueryString.stringify=QueryString.encode=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",util.isNull(obj)&&(obj=void 0),
util.isObject(obj)?Object.keys(obj).map(function(k){var ks=QueryString.escape(stringifyPrimitive(k))+eq


return util.isArray(obj[k])?obj[k].map(function(v){return ks+QueryString.escape(stringifyPrimitive(v))

}).join(sep):ks+QueryString.escape(stringifyPrimitive(obj[k]))}).join(sep):name?QueryString.escape(stringifyPrimitive(name))+eq+QueryString.escape(stringifyPrimitive(obj)):""

},QueryString.parse=QueryString.decode=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"="
var obj={}
if(!util.isString(qs)||0===qs.length)return obj
var regexp=/\+/g
qs=qs.split(sep)
var maxKeys=1e3
options&&util.isNumber(options.maxKeys)&&(maxKeys=options.maxKeys)
var len=qs.length
maxKeys>0&&len>maxKeys&&(len=maxKeys)
for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq)
idx>=0?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr="")
try{k=decodeURIComponent(kstr),v=decodeURIComponent(vstr)}catch(e){k=QueryString.unescape(kstr,!0),v=QueryString.unescape(vstr,!0)

}hasOwnProperty(obj,k)?util.isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj}})


define("url",[],function(require,exports,module){function Url(){this.protocol=null,this.slashes=null,
this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,
this.pathname=null,this.path=null,this.href=null}function urlParse(url,parseQueryString,slashesDenoteHost){
if(url&&util.isObject(url)&&url instanceof Url)return url
var u=new Url
return u.parse(url,parseQueryString,slashesDenoteHost),u}function urlFormat(obj){return util.isString(obj)&&(obj=urlParse(obj)),
obj instanceof Url?obj.format():Url.prototype.format.call(obj)}function urlResolve(source,relative){return urlParse(source,!1,!0).resolve(relative)

}function urlResolveObject(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative

}var util=require("util")
exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,
exports.Url=Url
var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={
javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,
https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring")


Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url)


var rest=url
rest=rest.trim()
var proto=protocolPattern.exec(rest)
if(proto){proto=proto[0]
var lowerProto=proto.toLowerCase()
this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){
var slashes="//"===rest.substr(0,2)
!slashes||proto&&hostlessProtocol[proto]||(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){
for(var hostEnd=-1,i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i])
hec!==-1&&(hostEnd===-1||hec<hostEnd)&&(hostEnd=hec)}var auth,atSign
atSign=hostEnd===-1?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd),atSign!==-1&&(auth=rest.slice(0,atSign),
rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1
for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i])
hec!==-1&&(hostEnd===-1||hec<hostEnd)&&(hostEnd=hec)}hostEnd===-1&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),
rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||""
var ipv6Hostname="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1]
if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),i=0,l=hostparts.length;i<l;i++){var part=hostparts[i]


if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)newpart+=part.charCodeAt(j)>127?"x":part[j]


if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart)


bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),
this.hostname=validParts.join(".")
break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase()


var p=this.port?":"+this.port:"",h=this.hostname||""
this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),
"/"!==rest[0]&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(var i=0,l=autoEscape.length;i<l;i++){
var ae=autoEscape[i],esc=encodeURIComponent(ae)
esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}var hash=rest.indexOf("#")
hash!==-1&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash))
var qm=rest.indexOf("?")
if(qm!==-1?(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),
rest=rest.slice(0,qm)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),
this.pathname||this.search){var p=this.pathname||"",s=this.search||""
this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||""


auth&&(auth=encodeURIComponent(auth),auth=auth.replace(/%3A/i,":"),auth+="@")
var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query=""
this.host?host=auth+this.host:this.hostname&&(host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),
this.port&&(host+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query))


var search=this.search||query&&"?"+query||""
return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&host!==!1?(host="//"+(host||""),
pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):host||(host=""),hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),
search&&"?"!==search.charAt(0)&&(search="?"+search),pathname=pathname.replace(/[?#]/g,function(match){
return encodeURIComponent(match)}),search=search.replace("#","%23"),protocol+host+pathname+search+hash

},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()

},Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url
rel.parse(relative,!1,!0),relative=rel}var result=new Url
if(Object.keys(this).forEach(function(k){result[k]=this[k]},this),result.hash=relative.hash,""===relative.href)return result.href=result.format(),
result
if(relative.slashes&&!relative.protocol)return Object.keys(relative).forEach(function(k){"protocol"!==k&&(result[k]=relative[k])

}),slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),
result.href=result.format(),result
if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol])return Object.keys(relative).forEach(function(k){
result[k]=relative[k]}),result.href=result.format(),result
if(result.protocol=relative.protocol,relative.host||hostlessProtocol[relative.protocol])result.pathname=relative.pathname
else{for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););
relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),
relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}if(result.search=relative.search,
result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,
result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||""


result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result

}var isSourceAbs=result.pathname&&"/"===result.pathname.charAt(0),isRelAbs=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol]


if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),
result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),
relative.host=null),mustEndAbs=mustEndAbs&&(""===relPath[0]||""===srcPath[0])),isRelAbs)result.host=relative.host||""===relative.host?relative.host:result.host,
result.hostname=relative.hostname||""===relative.hostname?relative.hostname:result.hostname,result.search=relative.search,
result.query=relative.query,srcPath=relPath
else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,
result.query=relative.query
else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift()


var authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@")
authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return result.search=relative.search,
result.query=relative.query,util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),
result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.search?result.path="/"+result.search:result.path=null,
result.href=result.format(),result
for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;i>=0;i--)last=srcPath[i],
"."==last?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--)
if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..")
!mustEndAbs||""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)||srcPath.unshift(""),hasTrailingSlash&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("")


var isAbsolute=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)
if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():""
var authInHost=!!(result.host&&result.host.indexOf("@")>0)&&result.host.split("@")
authInHost&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift())}return mustEndAbs=mustEndAbs||result.host&&srcPath.length,
mustEndAbs&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,
result.path=null),util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),
result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),
result},Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host)
port&&(port=port[0],":"!==port&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),
host&&(this.hostname=host)}})


if("undefined"==typeof define)var define=function(fn){fn(require,exports,module)}
define("c9/has-internal-domain",[],function(require,exports,module){"use strict"
function hasInternalDomain(email){if(!email)return!1
var emailDomain=email.split("@").pop()
return internalDomain.indexOf(emailDomain)!=-1}var internalDomain=["c9.io","cloud9beta.com"]
module.exports=hasInternalDomain})


if("undefined"==typeof define)var define=function(fn){fn(require,exports,module)}
define("c9/has-internal-test-name",[],function(require,exports,module){"use strict"
function hasInternalTestName(name){return!!name&&regex.test(name)}var internalTestNames=["c9test","c9 test"],regex=new RegExp("^("+internalTestNames.join("|")+")+")


module.exports=hasInternalTestName})


if("undefined"==typeof define)var define=function(fn){fn(require,exports,module)}
define("c9/skip-analytics",[],function(require,exports,module){"use strict"
function skipAnalytics(userId,name,email,blocked,allowUnauthorized){if(!userId)return!0
if("object"==typeof userId){var user=userId
return skipAnalytics(user.id,user.name||user.username,user.email,user.blocked,name)}return!allowUnauthorized&&userId===-1||(!!blocked||(!!hasInternalTestName(name)||!!hasInternalDomain(email)))

}var hasInternalDomain=require("c9/has-internal-domain"),hasInternalTestName=require("c9/has-internal-test-name")


module.exports=skipAnalytics})


if("undefined"==typeof define)var define=function(fn){fn(require,exports,module)}
define("c9/format-user-analytics",[],function(require,exports,module){"use strict"
function formatUser(user){if(!user)return{}
var uid=/^\d+$/.test(user.id)?user.id:user.uid,traits={uid:uid,username:user.name||user.username,email:user.email,
createdAt:user.date_add,active:!!user.active,firstName:getFirstName(user),lastName:getLastName(user),
name:user.fullname||user.name,pricingPlan:user.premium?"Premium":"Free",referredBy:user.referrer,region:user.region,
usertype:user.usertype,purpose:user.purpose}
return traits}function getFirstName(user){if(user.firstname)return user.firstname
if(user.fullname)return user.fullname.split(" ").slice(0,1).join(" ")}function getLastName(user){if(user.lastname)return user.lastname


if(user.fullname)return user.fullname.split(" ").slice(1).join(" ")}module.exports=formatUser})


define("plugins/c9.ide.analytics/provider/segment-3.1.0",[],function(require,exports,module){module.exports=function(apiKey,options){
!function(){var analytics=window.analytics=window.analytics||[]
if(!analytics.initialize){if(analytics.invoked)return void(window.console&&console.error&&console.error("Segment snippet included twice."))


analytics.invoked=!0,analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"],
analytics.factory=function(method){return function(){var args=Array.prototype.slice.call(arguments)
return args.unshift(method),analytics.push(args),analytics}}
for(var i=0;i<analytics.methods.length;i++){var key=analytics.methods[i]
analytics[key]=analytics.factory(key)}analytics.load=function(key){var script=document.createElement("script")


script.type="text/javascript",script.async=!0,script.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+key+"/analytics.min.js"


var first=document.getElementsByTagName("script")[0]
first.parentNode.insertBefore(script,first)},analytics.SNIPPET_VERSION="3.1.0",analytics.load(apiKey)

}}()}})


define("plugins/c9.ide.analytics/analytics",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){user=info.getUser(),workspace=info.getWorkspace()

}function log(event,properties,options,callback){return callback||"function"!=typeof options||(callback=options,
options=null),skipAnalytics(user.id,user.name||user.username,user.email,user.blocked)?callback&&callback():(options||(options={
integrations:INTEGRATIONS}),options.integrations||(options.integrations={}),options.integrations=Object.assign({},INTEGRATIONS,options.integrations),
properties=properties?properties:{},analytics.options?(properties.uid=user.id,void window.analytics.track(event,properties,options,callback)):callback&&callback())

}function page(url,referrer,title){window.analytics.page({title:title||"",url:url,path:parseUrl(url).pathname,
referrer:referrer||""})}function identify(user,callback){return callback=callback||function(){},skipAnalytics(user.id,user.name||user.username,user.email,user.blocked)?callback&&callback():void analytics.identify(user.id,formatUser(user),callback)

}function updateTraits(user,traits){skipAnalytics(user.id,user.name||user.username,user.email,user.blocked)||(traits.uid=user.id,
analytics.identify(user.id,traits))}function resetAnalytics(){window.analytics&&(window.analytics.reset&&window.analytics.reset(),
window.mixpanel&&window.mixpanel.cookie&&window.mixpanel.cookie.clear())}assert(typeof options.secret,"object","Option 'secret' is required"),
assert(typeof options.flushAt,"object","Option 'flushAt' is required"),assert(typeof options.integrations,"object","Option 'integrations' is required"),
require("./provider/segment-3.1.0")(options.secret,{flushAt:options.flushAt})
var user,workspace,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),info=imports.info,auth=imports.auth,INTEGRATIONS=options.integrations


window.analytics.page(),auth.on("logout-analytics",resetAnalytics),plugin.on("load",load),plugin.on("unload",function(){}),
plugin.freezePublicAPI({log:log,track:log,page:page,identify:identify,updateTraits:updateTraits,alias:window.analytics.alias.bind(window.analytics)
}),register(null,{"c9.analytics":plugin})}var assert=require("assert"),parseUrl=require("url").parse,skipAnalytics=require("c9/skip-analytics"),formatUser=require("c9/format-user-analytics")


main.consumes=["Plugin","info","auth"],main.provides=["c9.analytics"],module.exports=main})


define("plugins/c9.ide.analytics/cookie",[],function(require,exports,module){"use strict"
function main(options,imports,register){function getCookie(cname){var name=cname+"="
if(document.cookie)for(var ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1)


if(c.indexOf(name)!=-1)return b64_to_utf8(c.substring(name.length,c.length))}return""}function setCookie(cname,cvalue,exdays){
var d=new Date
d.setTime(d.getTime()+24*exdays*60*60*1e3)
var expires="expires="+d.toUTCString(),encodedCValue=utf8_to_b64(cvalue),hostname=location.hostname.split(".").reverse(),domain="domain=."+hostname[1]+"."+hostname[0]


document.cookie=cname+"="+encodedCValue+"; "+expires+"; "+domain}function utf8_to_b64(str){return window.btoa(unescape(encodeURIComponent(str)))

}function b64_to_utf8(str){try{return decodeURIComponent(escape(window.atob(str)))}catch(e){return str

}}register(null,{"analytics.cookie":{get:getCookie,set:setCookie}})}main.provides=["analytics.cookie"],
module.exports=main})


define("plugins/c9.vfs.client/vfs.listener",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,void pubsub.on("message",function(m){
"workspace"===m.type&&("state_changed"==m.action?(metrics.increment("vfs.state_changed",1,!0),vfsEndpoint.clearCache(),
vfs.reconnect()):"remote_changed"==m.action&&(metrics.increment("vfs.remote_changed",1,!0),vfsEndpoint.clearCache(),
showAlert("Workspace configuration changed!","The configuration of this workspace has changed.","Cloud9 will be reloaded in order to activate the changes.",function(){
setTimeout(function(){window.location.reload()},500)})))}))}var Plugin=imports.Plugin,pubsub=imports.pubsub,vfs=imports.vfs,vfsEndpoint=imports["vfs.endpoint"],metrics=imports.metrics,showAlert=imports["dialog.alert"].show,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({}),
register(null,{"vfs.listener":plugin})}return main.consumes=["Plugin","pubsub","vfs","metrics","vfs.endpoint","dialog.alert"],
main.provides=["vfs.listener"],main})


define("text!plugins/c9.ide.language.codeintel/server/codeintel_server.py",[],'import argparse\nimport json\nimport sys\nimport os\nimport logging\nfrom os import path\nimport urlparse\nfrom BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer\n\n# Hackfix codeintel import\nsys.path.extend([p + "/codeintel" for p in sys.path])\n\n# Hackfix inflector compatibility\nimport inflector\nclass MyInflector: Inflector = inflector.Inflector\nclass MyInflector2: Inflector = MyInflector\nsys.modules["inflector.Inflector"] = MyInflector2\nsys.modules["inflector"] = MyInflector2\nimport inflector.Inflector\n\nfrom codeintel2.common import EvalController\nfrom codeintel2.manager import Manager\nfrom codeintel2.environment import DefaultEnvironment\n\ndef main(args):\n    if args.mode != "daemon":\n        print(process(sys.stdin.read(), args.__dict__))\n        manager.finalize()\n        return\n    try:\n        server = HTTPServer(("localhost", int(args.port)), Daemon)\n    except:\n        sys.stderr.write("Daemon unable to listen at :%s\\n" % args.port)\n        sys.exit(98)\n    sys.stderr.write("!!Daemon " + "listening at :%s\\n" % args.port) # concat strings to avoid matching this string in the client\n    server.serve_forever()\n\ndef process(source, args):\n    mode = args["mode"]\n    buffer, line, offset = process_input(source, args)\n    scan_workspace(buffer)\n    \n    if mode == "completions":\n        return json.dumps(get_completions(buffer, line, offset))\n    if mode == "definitions":\n        return json.dumps(get_definitions(buffer, line, offset))\n    if mode == "calltips":\n        return json.dumps(get_calltips(buffer, line, offset))\n    if mode == "catalogs":\n        return json.dumps(get_catalogs(buffer, line, offset))\n\ndef get_completions(buffer, line, offset):\n    trigger = buffer.preceding_trg_from_pos(offset, offset)\n    if trigger is None:\n        return []\n    results = buffer.cplns_from_trg(trigger, ctlr = LoggingEvalController(), timeout = 120)\n    if results is None:\n        return []\n    return [\n        remove_nulls({\n            "name": get_proposal_name(kind, name, buffer.lang, trigger),\n            "replaceText": get_proposal_replace_text(kind, name, buffer.lang, trigger, line),\n            "icon": {\n                "function": "method",\n                "module": "package",\n                "class": "package",\n                "element": "event",\n                "property": "property",\n                "value": "method",\n            }.get(kind, "property"),\n        }) for kind, name in results\n    ]\n\ndef get_definitions(buffer, line, offset):\n    trigger = buffer.defn_trg_from_pos(offset)\n    if trigger is None:\n        return []\n    results = buffer.defns_from_trg(trigger, ctlr = LoggingEvalController(), timeout = 10)\n    if results is None:\n        return []\n    return {\n        "path": "/" + results[0].path,\n        "row": results[0].line - 1,\n    }\n\ndef get_calltips(buffer, line, offset):\n    trigger = buffer.preceding_trg_from_pos(offset, offset)\n    if trigger is None:\n        return []\n    result = buffer.calltips_from_trg(trigger, ctlr = LoggingEvalController(), timeout = 10)\n    if result is None:\n        return ""\n    return result\n\ndef get_catalogs(buffer, line, offset):\n    return [c for c in manager.db.get_catalogs_zone().avail_catalogs()]\n\ndef get_proposal_name(kind, name, lang, trigger):\n    if lang == "PHP" and kind == "variable" and trigger.name != "php-complete-object-members":\n        return "$" + name\n    if kind == "function" or kind == "method":\n        return name + "()"\n    return name\n\ndef get_proposal_replace_text(kind, name, lang, trigger, line):\n    if lang == "PHP" and kind == "variable" and trigger.name != "php-complete-object-members":\n        return "$" + name\n    if "import " in line:\n        return name\n    if kind == "function" or kind == "method":\n        return name + "(^^)"\n\ndef remove_nulls(d):\n    for key, value in d.items():\n        if value is None:\n            del d[key]\n        elif isinstance(value, dict):\n            remove_nulls(value)\n    return d\n\ndef process_input(source, args):\n    row = int(args.get("row"))\n    column = int(args.get("column"))\n    path = args.get("path")\n    basedir = args.get("basedir")\n    language = args.get("language")\n    dirs = args.get("dirs")\n    catalogs = args.get("catalogs").split(",") if args.get("catalogs") else []\n    \n    env = manager.env = DefaultEnvironment()\n    env.set_pref("codeintel_selected_catalogs", catalogs)\n    env.set_pref("extra_module_dirs", dirs)\n    env.set_pref("phpExtraPaths", dirs)\n    env.set_pref("codeintel_scan_extra_dir", dirs)\n    env.set_pref("codeintel_scan_files_in_project", True)\n    \n    env.get_proj_base_dir = lambda: basedir\n    buffer = manager.buf_from_content(source + "\\n", language, path = path, env = env)\n    lines = source.split(\'\\n\')\n    line = lines[row]\n    offset = sum([len(l) + 1 for l in lines[:row]]) + column\n    return buffer, line, offset\n\ndef scan_workspace(buffer):\n    if not manager.is_citadel_lang(buffer.lang):\n        return\n    if not buffer.lang in scanned_langs:\n        sys.stderr.write("!!Updating " + buffer.lang + " indexes\\n")\n        scanned_langs.append(buffer.lang)\n        buffer.scan()\n        sys.stderr.write("!!Done updating indexes\\n")\n        manager.db.save()\n    else:\n        buffer.scan()\n\nclass LoggingEvalController(EvalController):\n    def debug(self, msg, *args): logger.debug(msg, *args)\n    def info(self, msg, *args): logger.info(msg, *args)\n    def warn(self, msg, *args): logger.warn(msg, *args)\n    def error(self, msg, *args): logger.error(msg, *args)\n\nclass Daemon(BaseHTTPRequestHandler):\n    def do_POST(self):\n        query = urlparse.urlparse(self.path).query\n        args = urlparse.parse_qsl(query)\n\n        length = int(self.headers.getheader("content-length", 0))\n        source = self.rfile.read(length)\n\n        self.send_response(200)\n        self.end_headers()\n        self.wfile.write(process(source, dict(args)))\n    def log_message(self, format, *args):\n        return # log silently\n\nlogStream = logging.StreamHandler(sys.stderr)\nlogStream.setFormatter(logging.Formatter("%(name)s: %(levelname)s: %(message)s"))\nlogging.getLogger("codeintel").addHandler(logStream)\nlogger = logging.getLogger("codeintel_server")\nlogger.addHandler(logStream)\nlogger.setLevel(logging.WARNING)\n\nmanager = Manager(\n    # db_base_dir = path.join(CI_DIR, \'db\'),\n    # extra_module_dirs = [path.join(CI_DIR, \'codeintel2\'),],\n    # db_import_everything_langs = None,\n    # db_catalog_dirs = []\n)\nmanager.upgrade()\nmanager.initialize()\nscanned_langs = []\n\nif __name__ == "__main__":\n    parser = argparse.ArgumentParser(description="Run codeintel commands as a daemon or via stdin")\n    parser.add_argument("mode", help="Mode of operation", choices=["daemon", "completions", "definitions", "calltips", "catalogs"])\n    parser.add_argument("--row", type=int, help="The row to read from")\n    parser.add_argument("--column", type=int, help="The column to read from")\n    parser.add_argument("--path", help="The path of the file")\n    parser.add_argument("--basedir", help="The basedir of the file")\n    parser.add_argument("--language", help="The language of the file")\n    parser.add_argument("--port", type=int, help="The port for the daemon to listen on")\n    parser.add_argument("--nodoc", help="Don\'t include docstrings in output")\n    parser.add_argument("--catalogs", help="Catalogs to include (comma-separated)")\n    parser.add_argument("--dirs", help="Directories to include (comma-separated)")\n    args = parser.parse_args()\n    main(args)')


define("text!plugins/c9.ide.language.codeintel/server/launch_command.sh",[],'#!/usr/bin/env bash\n# Helper script to launch python with codeintel in a python2 virtualenv\nset -e\n\nCOMMAND=$1\n\nSHAREDENV="/mnt/shared/lib/python2"\nFALLBACKENV="$HOME/.c9/python2"\n\nif [[ -d $SHAREDENV/lib/python2.7/site-packages/codeintel ]]; then\n    ENV=$SHAREDENV\nelse\n    ENV=$FALLBACKENV\n    if ! [[ -d $ENV ]]; then\n        echo "!!Not installed" >&2\n        exit 1\n    fi\nfi\n\nsource $ENV/bin/activate\nPYTHON="$ENV/bin/python"\n\nCOMMAND=${COMMAND/\\$PYTHON/$PYTHON}\nCOMMAND=${COMMAND/\\$ENV/$ENV}\neval "$COMMAND"')


define("plugins/c9.ide.language.codeintel/codeintel",[],function(require,exports,module){function main(options,imports,register){
function onLoadHandler(err,handler){function sendSettings(){handler.emit("setup",{server:server,launchCommand:launchCommand,
hosted:!options.testing&&c9.hosted,enabled:settings.get("project/php/@completion"),paths:{php:makeAbsolutePaths(settings.get("project/php/@path"))
}})}function makeAbsolutePaths(pathSetting){return pathSetting.split(":").map(function(path){return["/","~","\\"].indexOf(path[0])>-1||":"===path[1]?path:c9.workspaceDir+"/"+path

}).join(":")}return err?console.error(err):(settings.on("project/php",sendSettings),handler.on("not_installed",onNotInstalled),
void sendSettings())}function onNotInstalled(e){function onYes(){question.dontAsk&&settings.set("project/codeintel/@dismiss_installer",!0),
window.open("https://github.com/c9/c9.ide.language.codeintel/blob/master/README.md","_blank")}function onNo(){
question.dontAsk&&settings.set("project/codeintel/@dismiss_installer",!0)}preinstalled||showedInstaller||"css"===e.language||settings.getBool("project/codeintel/@dismiss_installer")||(showedInstaller=!0,
question.show("Code Intelligence","Code completion is available for the language you are currently working with.","To install it on your own host, please follow our installation guide. Would you like to open the guide now?",onYes,onNo,{
showDontAsk:!0,yes:"Open installation guide",no:"Not now"}))}var Plugin=imports.Plugin,language=imports.language,c9=imports.c9,preferences=imports.preferences,settings=imports.settings,question=imports["dialog.question"],preinstalled=options.preinstalled,plugin=new Plugin("Ajax.org",main.consumes),server=require("text!./server/codeintel_server.py").replace(/ {4}/g," ").replace(/'/g,"'\\''"),launchCommand=require("text!./server/launch_command.sh").replace(/ {2,}/g," "),showedInstaller=!1


plugin.on("load",function(){language.registerLanguageHandler("plugins/c9.ide.language.codeintel/worker/codeintel_worker",onLoadHandler,plugin),
language.registerLanguageHandler("plugins/c9.ide.language.codeintel/worker/php_completer",onLoadHandler,plugin),
language.registerLanguageHandler("plugins/c9.ide.language.codeintel/worker/css_less_completer",onLoadHandler,plugin),
preferences.add({Project:{"PHP Support":{position:1200,"Enable PHP code completion":{position:410,type:"checkbox",
path:"project/php/@completion"},"PHP Completion Include Paths":{position:420,type:"textbox",width:300,
path:"project/php/@path"},"Format Code on Save":{position:430,type:"checkbox",path:"project/php/@formatOnSave"
},"Custom Code Formatter":{position:440,type:"textbox",path:"project/php/@formatter"}}}},plugin),settings.on("read",function(e){
settings.setDefaults("project/php",[["path",options.paths.php],["completion",!0]])},plugin)}),plugin.on("unload",function(){}),
register(null,{"language.codeintel":plugin})}return main.consumes=["Plugin","language","jsonalyzer","settings","preferences","c9","dialog.question"],
main.provides=["language.codeintel"],main})


define("plugins/c9.ide.format/formatters/custom",[],function(require,exports,module){function main(options,imports,register){
function load(){collab.on("beforeSave",function(e){var mode=getMode(e.docId),enabled=settings.getBool("project/"+mode+"/@formatOnSave")


if((enabled||fromFormatCommand)&&("javascript"!==mode||!settings.getBool("project/javascript/@use_jsbeautify"))){
var formatter=settings.get("project/"+mode+"/@formatter")
return formatter?void(e.postProcessor={command:"bash",args:["-c",formatter]}):showError("No code formatter set for "+mode+": please check your project settings")

}},plugin),collab.on("postProcessorError",function(e){var mode=getMode(e.docId)||"language"
if(e.code!==ERROR_NOT_FOUND)return console.error("Error running formatter for "+mode+": "+(e.stderr||e.code))


var formatter=(settings.get("project/"+mode+"/@formatter")||"formatter").replace(/(.*?) .*/,"$1")
showError("Error running code formatter for "+mode+": "+formatter+" not found, please check your project settings")

}),format.on("format",function(e){if(settings.get("project/"+e.mode+"/@formatter")&&("javascript"!==e.mode||!settings.getBool("project/javascript/@use_jsbeautify")))return fromFormatCommand=!0,
save.save(tabs.focussedTab),fromFormatCommand=!1,!0},plugin)}function getMode(docId){var tab=tabs.findTab(docId)


if(tab&&tab.editor&&tab.editor.ace)return tab.editor.ace.session.syntax}var fromFormatCommand,settings=imports.settings,tabs=imports.tabManager,save=imports.save,format=imports.format,collab=imports.collab,showError=imports["dialog.error"].show,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),ERROR_NOT_FOUND=127


plugin.on("load",function(){load()}),plugin.on("unload",function(){fromFormatCommand=!1}),plugin.freezePublicAPI({}),
register(null,{"format.custom":plugin})}return main.consumes=["Plugin","settings","save","collab","tabManager","dialog.error","format"],
main.provides=["format.custom"],main})


define("text!plugins/c9.ide.collab/chat/chat.html",[],'<audio style="display: none;" id="chatNotif"></audio>\n<div id="chatThrob"></div>\n<div id="chatCounter"></div>\n')


define("text!plugins/c9.ide.collab/chat/chat.css",[],"")


define("timeago",[],function(require,exports,module){function timeago(timestamp){return timestamp instanceof Date?inWords(timestamp):"string"==typeof timestamp?inWords(parse(timestamp)):"number"==typeof timestamp?inWords(new Date(timestamp)):timeagoElement(timestamp)

}function distanceInWords(distanceMillis){function substitute(stringOrFunction,number){var string="function"==typeof stringOrFunction?stringOrFunction(number,distanceMillis):stringOrFunction,value=$l.numbers&&$l.numbers[number]||number


return string.replace(/%d/i,value)}var $l=settings.strings,prefix=$l.prefixAgo,suffix=$l.suffixAgo
settings.allowFuture&&distanceMillis<0&&(prefix=$l.prefixFromNow,suffix=$l.suffixFromNow)
var seconds=Math.abs(distanceMillis)/1e3,minutes=seconds/60,hours=minutes/60,days=hours/24,years=days/365,words=seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<42&&substitute($l.day,1)||days<30&&substitute($l.days,Math.round(days))||days<45&&substitute($l.month,1)||days<365&&substitute($l.months,Math.round(days/30))||years<1.5&&substitute($l.year,1)||substitute($l.years,Math.round(years)),separator=$l.wordSeparator||""


return void 0===$l.wordSeparator&&(separator=" "),[prefix,words,suffix].filter(function(s){return s}).map(function(s){
return s.trim()}).join(separator)}function parse(iso8601){var s=iso8601.trim()
return s=s.replace(/\.\d+/,""),s=s.replace(/-/,"/").replace(/-/,"/"),s=s.replace(/T/," ").replace(/Z/," UTC"),
s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(s)}function datetime(elem){var iso8601=isTime(elem)?elem.getAttribute("datetime"):elem.getAttribute("title")


return parse(iso8601)}function isTime(elem){return"time"===elem.tagName.toLowerCase()}function timeagoElement(elem){
refresh(elem),settings.refreshMillis>0&&setInterval(refresh.bind(null,elem),settings.refreshMillis)}function refresh(elem){
var datetime=prepareDateTime(elem)
isNaN(datetime)||(elem.textContent=inWords(datetime))}function prepareDateTime(elem){var timeagoAttr=elem.getAttribute("timeago")


if(timeagoAttr)return new Date(timeagoAttr)
var data=datetime(elem)
elem.setAttribute("timeago",data)
var text=elem.textContent.trim()
return!(text.length>0)||isTime(elem)&&elem.title||(elem.title=text),data}function inWords(date){return distanceInWords(distance(date))

}function distance(date){return(new Date).getTime()-date.getTime()}var settings={refreshMillis:6e4,allowFuture:!1,
strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",
minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",
days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",
numbers:[]}}
document.createElement("abbr"),document.createElement("time"),module.exports=timeago})


define("plugins/c9.ide.collab/chat/emojis",[],function(require,exports,module){module.exports={map:{e00a:[":iphone:"],
e00b:[":fax:"],e00c:[":computer:"],e00d:[":punch:"],e00e:[":+1:"],e00f:[":point_up:"],e001:[":boy:"],
e01a:[":horse:"],e01b:[":car:"],e01c:[":sailboat:"],e01d:[":plane:"],e01e:[":train:"],e01f:[":bullettrain_front:"],
e002:[":girl:"],e02a:[":clock7:"],e02b:[":clock8:"],e02c:[":clock9:"],e02d:[":clock10:"],e02e:[":clock11:"],
e02f:[":clock12:"],e003:[":lips:"],e03a:[":fuelpump:"],e03b:[":mount_fuji:"],e03c:[":microphone:"],e03d:[":movie_camera:"],
e03e:[":musical_note:"],e03f:[":key:"],e004:[":man:"],e04a:[":sun:"],e04b:[":umbrella:"],e04c:[":moon:"],
e04d:[":sunrise_over_mountains:"],e04e:[":angel:"],e04f:[":cat:"],e005:[":woman:"],e05a:[":hankey:",":poop:",":shit:"],
e006:[":shirt:"],e007:[":shoe:"],e008:[":camera:"],e009:[":phone:"],e010:[":fist:"],e10a:[":octopus:"],
e10b:[":pig:"],e10c:[":alien:"],e10d:[":rocket:"],e10e:[":crown:"],e10f:[":bulb:"],e011:[":v:"],e11a:[":imp:"],
e11b:[":ghost:"],e11c:[":skull:"],e11d:[":fire:"],e11e:[":briefcase:"],e11f:[":seat:"],e012:[":hand:"],
e12a:[":baby_symbol:"],e12b:[":space_invader:"],e12c:[":part_alternation_mark:"],e12d:[":mahjong:"],e12e:[":vs:"],
e12f:[":moneybag:"],e013:[":ski:"],e13b:[":syringe:"],e13c:[":zzz:"],e13d:[":zap:"],e13e:[":high_heel:"],
e13f:[":bath:"],e014:[":golf:"],e14a:[":chart:"],e14b:[":satellite:"],e14c:[":muscle:"],e14d:[":bank:"],
e14e:[":traffic_light:"],e14f:[":parking:"],e015:[":tennis:"],e15a:[":taxi:"],e016:[":baseball:"],e017:[":surfer:"],
e018:[":soccer:",":football:"],e019:[":fish:"],e020:[":question:"],e20a:[":wheelchair:"],e20b:[":signal_strength:"],
e20c:[":hearts:"],e20d:[":diamonds:"],e20e:[":spades:"],e20f:[":clubs:"],e021:[":exclamation:"],e21a:[":green_circle:"],
e21b:[":purple_circle:"],e21c:[":1:"],e21d:[":2:"],e21e:[":3:"],e21f:[":4:"],e022:[":heart:"],e22a:[":u6e80:"],
e22b:[":u7a7a:"],e22c:[":u6307:"],e22d:[":u55b6:"],e22e:[":point_up:"],e22f:[":point_down:"],e023:[":broken_heart:"],
e23a:[":arrow_forward:"],e23b:[":arrow_backward:"],e23c:[":fast_forward:"],e23d:[":rewind:"],e23e:[":six_pointed_star:"],
e23f:[":aries:"],e024:[":clock1:"],e24a:[":pisces:"],e24b:[":ophiuchus:"],e24c:[":top:"],e24d:[":ok:"],
e24e:[":copyright:"],e24f:[":registered:"],e025:[":clock2:"],e026:[":clock3:"],e027:[":clock4:"],e028:[":clock5:"],
e029:[":clock6:"],e030:[":cherry_blossom:"],e30a:[":headphones:"],e30b:[":sake:"],e30c:[":beers:"],e30d:[":congratulations:"],
e30e:[":smoking:"],e30f:[":pill:"],e031:[":trident:"],e31a:[":sandal:"],e31b:[":boot:"],e31c:[":lipstick:"],
e31d:[":nail_care:"],e31e:[":massage:"],e31f:[":haircut:"],e032:[":rose:"],e32a:[":blue_heart:"],e32b:[":green_heart:"],
e32c:[":yellow_heart:"],e32d:[":purple_heart:"],e32e:[":sparkles:"],e32f:[":star:"],e033:[":christmas_tree:"],
e33a:[":icecream:"],e33b:[":fries:"],e33c:[":dango:"],e33d:[":rice_cracker:"],e33e:[":rice:"],e33f:[":spaghetti:"],
e034:[":ring:"],e34a:[":eggplant:"],e34b:[":birthday:"],e34c:[":bento:"],e34d:[":stew:"],e035:[":gem:"],
e036:[":house:"],e037:[":church:"],e038:[":office:"],e039:[":station:"],e040:[":saxophone:"],e40a:[":pensive:"],
e40b:[":fearful:"],e40c:[":mask:"],e40d:[":flushed:"],e40e:[":unamused:"],e40f:[":cold_sweat:"],e041:[":guitar:"],
e41a:[":nose:"],e41b:[":ear:"],e41c:[":lips:"],e41d:[":pray:"],e41e:[":wave:"],e41f:[":clap:"],e042:[":trumpet:"],
e42a:[":basketball:"],e42b:[":rugby:"],e42c:[":8ball:"],e42d:[":swimmer:"],e42e:[":blue_car:"],e42f:[":truck:"],
e043:[":fork_and_knife:"],e43a:[":school_satchel:"],e43b:[":flags:"],e43c:[":closed_umbrella:"],e43d:[":wedding:"],
e43e:[":ocean:"],e43f:[":shaved_ice:"],e044:[":cocktail:"],e44a:[":city_sunset:"],e44b:[":stars:"],e44c:[":rainbow:"],
e045:[":coffee:"],e046:[":cake:"],e047:[":beer:"],e048:[":snowman:"],e049:[":cloud:"],e050:[":tiger:"],
e50a:[":109:"],e50b:[":jp:"],e50c:[":us:"],e50d:[":fr:"],e50e:[":de:"],e50f:[":it:"],e051:[":bear:"],
e51a:[":baby:"],e51b:[":construction_worker:"],e51c:[":princess:"],e51d:[":statue_of_liberty:"],e51e:[":guardsman:"],
e51f:[":dancer:"],e052:[":dog:"],e52a:[":wolf:"],e52b:[":cow:"],e52c:[":rabbit:"],e52d:[":snake:"],e52e:[":chicken:"],
e52f:[":boar:"],e053:[":mouse:"],e054:[":whale:"],e055:[":penguin:"],e056:[":blush:"],e057:[":smile:"],
e058:[":disappointed:"],e059:[":angry:"],e101:[":mailbox:"],e102:[":postbox:"],e103:[":email:"],e104:[":calling:"],
e105:[":wink2:"],e106:[":heart_eyes:"],e107:[":scream:"],e108:[":sweat:"],e109:[":monkey_face:"],e110:[":four_leaf_clover:"],
e111:[":couplekiss:"],e112:[":gift:"],e113:[":gun:"],e114:[":mag:"],e115:[":runner:"],e116:[":hammer:"],
e117:[":fireworks:"],e118:[":maple_leaf:"],e119:[":fallen_leaf:"],e120:[":hamburger:"],e121:[":fountain:"],
e122:[":tent:"],e123:[":hotsprings:"],e124:[":ferris_wheel:"],e125:[":ticket:"],e126:[":cd:"],e127:[":dvd:"],
e128:[":radio:"],e129:[":vhs:"],e130:[":dart:"],e131:[":trophy:"],e132:[":checkered_flag:"],e133:[":777:"],
e134:[":racehorse:"],e135:[":speedboat:"],e136:[":bike:"],e137:[":construction:"],e138:[":mens:"],e139:[":womens:"],
e140:[":toilet:"],e141:[":speaker:"],e412:[":joy:"],e143:[":crossed_flags:"],e144:[":lock:"],e145:[":unlock:"],
e146:[":city_sunset:"],e147:[":egg:"],e148:[":book:"],e149:[":currency_exchange:"],e150:[":busstop:"],
e151:[":restroom:"],e152:[":cop:"],e153:[":post_office:"],e154:[":atm:"],e155:[":hospital:"],e156:[":convenience_store:"],
e157:[":school:"],e158:[":hotel:"],e159:[":bus:"],e201:[":walking:"],e202:[":ship:"],e203:[":koko:"],
e204:[":heart_decoration:"],e205:[":eight_pointed_black_star:"],e206:[":eight_spoked_asterisk:"],e207:[":underage:"],
e208:[":no_smoking:"],e209:[":beginner:"],e210:[":hash:"],e211:[":loop:"],e212:[":new:"],e213:[":up:"],
e214:[":cool:"],e215:[":u6709:"],e216:[":u7121:"],e217:[":u6708:"],e218:[":u7533:"],e219:[":red_circle:"],
e220:[":5:"],e221:[":6:"],e222:[":7:"],e223:[":8:"],e224:[":9:"],e225:[":0:"],e226:[":-:"],e227:[":u5272:"],
e228:[":sa:"],e229:[":id:"],e230:[":point_left:"],e231:[":point_right:"],e232:[":arrow_up:"],e233:[":arrow_down:"],
e234:[":arrow_right:"],e235:[":arrow_left:"],e236:[":arrow_upper_right:"],e237:[":arrow_upper_left:"],
e238:[":arrow_lower_right:"],e239:[":arrow_lower_left:"],e240:[":taurus:"],e241:[":gemini:"],e242:[":cancer:"],
e243:[":leo:"],e244:[":virgo:"],e245:[":libra:"],e246:[":scorpius:"],e247:[":sagittarius:"],e248:[":capricorn:"],
e249:[":aquarius:"],e250:[":vibration_mode:"],e251:[":mobile_phone_off:"],e252:[":warning:"],e253:[":information_desk_person:"],
e301:[":pencil:"],e302:[":necktie:"],e303:[":hibiscus:"],e304:[":tulip:"],e305:[":sunflower:"],e306:[":bouquet:"],
e307:[":palm_tree:"],e308:[":cactus:"],e309:[":wc:"],e310:[":balloon:"],e311:[":bomb:"],e312:[":tada:"],
e313:[":scissors:"],e314:[":ribbon:"],e315:[":secret:"],e316:[":minidisc:"],e317:[":mega:"],e318:[":womans_hat:"],
e319:[":dress:"],e320:[":barber:"],e321:[":kimono:"],e322:[":bikini:"],e323:[":handbag:"],e324:[":clapper:"],
e325:[":bell:"],e326:[":notes:"],e327:[":heart_sparkle:"],e328:[":heart_pink:"],e329:[":cupid:"],e330:[":dash:"],
e331:[":sweat_drops:"],e332:[":o:"],e333:[":x:"],e334:[":anger:"],e335:[":star:"],e336:[":question:"],
e337:[":exclamation:"],e338:[":tea:"],e339:[":bread:"],e340:[":ramen:"],e341:[":curry:"],e342:[":rice_ball:"],
e343:[":oden:"],e344:[":sushi:"],e345:[":apple:"],e346:[":tangerine:"],e347:[":strawberry:"],e348:[":watermelon:"],
e349:[":tomato:"],e401:[":relieved:"],e402:[":smirk:"],e403:[":pensive:"],e404:[":grin:"],e405:[":wink:"],
e406:[":persevere:"],e407:[":confounded:"],e408:[":sleepy:"],e409:[":tongue:"],e410:[":astonished:"],
e411:[":sob:"],e413:[":cry:"],e414:[":relaxed:"],e415:[":smile:"],e416:[":rage:"],e417:[":kissing_face:"],
e418:[":kissing_heart:"],e419:[":eyes:"],e420:[":ok_hand:"],e421:[":-1:"],e422:[":open_hands:"],e423:[":no_good:"],
e424:[":ok_woman:"],e425:[":couple_with_heart:"],e426:[":bow:"],e427:[":raised_hands:"],e428:[":couple:"],
e429:[":dancers:"],e430:[":fire_engine:"],e431:[":ambulance:"],e432:[":police_car:"],e433:[":roller_coaster:"],
e434:[":metro:"],e435:[":bullettrain_side:"],e436:[":bamboo:"],e437:[":gift_heart:"],e438:[":dolls:"],
e439:[":suit:"],e440:[":sparkler:"],e441:[":clamshell:"],e442:[":wind_chime:"],e443:[":cyclone:"],e444:[":ear_of_rice:"],
e445:[":jack_o_lantern:"],e446:[":rice_scene:"],e447:[":leaves:"],e448:[":santa:"],e449:[":sunrise:"],
e501:[":love_hotel:"],e502:[":art:"],e503:[":tophat:"],e504:[":department_store:"],e505:[":japanese_castle:"],
e506:[":european_castle:"],e507:[":cinema:"],e508:[":factory:"],e509:[":tokyo_tower:"],e510:[":gb:"],
e511:[":es:"],e512:[":ru:"],e513:[":cn:"],e514:[":kr:"],e515:[":person_with_blond_hair:"],e516:[":man_with_gua_pi_mao:"],
e517:[":man_with_turban:"],e518:[":older_man:"],e519:[":older_woman:"],e520:[":dolphin:"],e521:[":bird:"],
e522:[":tropical_fish:"],e523:[":baby_chick:"],e524:[":hamster:"],e525:[":bug:"],e526:[":elephant:"],
e527:[":koala:"],e528:[":monkey:"],e529:[":sheep:"],e530:[":camel:"],e531:[":frog:"],e532:[":a:"],e533:[":b:"],
e534:[":ab:"],e535:[":o2:"],e536:[":feet:"],e537:[":tm:"],e770:[":stuck_out_tongue_closed_eyes:"],e771:[":stuck_out_tongue:"],
e991:[":ruben:"],e992:[":fabian:"],e993:[":jos:"],e994:[":mostafa:"],e995:[":lennart:"],e996:[":ivar:"],
e997:[":bas:"],e998:[":luca:"],e999:[":harutyun:"]},reverse:{":iphone:":"e00a",":fax:":"e00b",":computer:":"e00c",
":punch:":"e00d",":+1:":"e00e",":point_up:":"e22e",":boy:":"e001",":horse:":"e01a",":car:":"e01b",":sailboat:":"e01c",
":plane:":"e01d",":train:":"e01e",":bullettrain_front:":"e01f",":girl:":"e002",":clock7:":"e02a",":clock8:":"e02b",
":clock9:":"e02c",":clock10:":"e02d",":clock11:":"e02e",":clock12:":"e02f",":lips:":"e41c",":fuelpump:":"e03a",
":mount_fuji:":"e03b",":microphone:":"e03c",":movie_camera:":"e03d",":musical_note:":"e03e",":key:":"e03f",
":man:":"e004",":sun:":"e04a",":umbrella:":"e04b",":moon:":"e04c",":sunrise_over_mountains:":"e04d",":angel:":"e04e",
":cat:":"e04f",":woman:":"e005",":hankey:":"e05a",":poop:":"e05a",":shit:":"e05a",":shirt:":"e006",":shoe:":"e007",
":camera:":"e008",":phone:":"e009",":fist:":"e010",":octopus:":"e10a",":pig:":"e10b",":alien:":"e10c",
":rocket:":"e10d",":crown:":"e10e",":bulb:":"e10f",":v:":"e011",":imp:":"e11a",":ghost:":"e11b",":skull:":"e11c",
":fire:":"e11d",":briefcase:":"e11e",":seat:":"e11f",":hand:":"e012",":tv:":"e12a",":space_invader:":"e12b",
":part_alternation_mark:":"e12c",":mahjong:":"e12d",":vs:":"e12e",":moneybag:":"e12f",":ski:":"e013",
":baby_symbol:":"e12a",":syringe:":"e13b",":zzz:":"e13c",":zap:":"e13d",":high_heel:":"e13e",":bath:":"e13f",
":golf:":"e014",":chart:":"e14a",":satellite:":"e14b",":muscle:":"e14c",":bank:":"e14d",":traffic_light:":"e14e",
":parking:":"e14f",":tennis:":"e015",":taxi:":"e15a",":baseball:":"e016",":surfer:":"e017",":soccer:":"e018",
":football:":"e018",":fish:":"e019",":question:":"e336",":wheelchair:":"e20a",":signal_strength:":"e20b",
":hearts:":"e20c",":diamonds:":"e20d",":spades:":"e20e",":clubs:":"e20f",":exclamation:":"e337",":green_circle:":"e21a",
":purple_circle:":"e21b",":1:":"e21c",":2:":"e21d",":3:":"e21e",":4:":"e21f",":heart:":"e022",":u6e80:":"e22a",
":u7a7a:":"e22b",":u6307:":"e22c",":u55b6:":"e22d",":point_down:":"e22f",":broken_heart:":"e023",":arrow_forward:":"e23a",
":arrow_backward:":"e23b",":fast_forward:":"e23c",":rewind:":"e23d",":six_pointed_star:":"e23e",":aries:":"e23f",
":clock1:":"e024",":pisces:":"e24a",":ophiuchus:":"e24b",":top:":"e24c",":ok:":"e24d",":copyright:":"e24e",
":registered:":"e24f",":clock2:":"e025",":clock3:":"e026",":clock4:":"e027",":clock5:":"e028",":clock6:":"e029",
":cherry_blossom:":"e030",":headphones:":"e30a",":sake:":"e30b",":beers:":"e30c",":congratulations:":"e30d",
":smoking:":"e30e",":pill:":"e30f",":trident:":"e031",":sandal:":"e31a",":boot:":"e31b",":lipstick:":"e31c",
":nail_care:":"e31d",":massage:":"e31e",":haircut:":"e31f",":rose:":"e032",":blue_heart:":"e32a",":green_heart:":"e32b",
":yellow_heart:":"e32c",":purple_heart:":"e32d",":sparkles:":"e32e",":star:":"e335",":christmas_tree:":"e033",
":icecream:":"e33a",":fries:":"e33b",":dango:":"e33c",":rice_cracker:":"e33d",":rice:":"e33e",":spaghetti:":"e33f",
":ring:":"e034",":eggplant:":"e34a",":birthday:":"e34b",":bento:":"e34c",":stew:":"e34d",":gem:":"e035",
":house:":"e036",":church:":"e037",":office:":"e038",":station:":"e039",":saxophone:":"e040",":pensive:":"e403",
":fearful:":"e40b",":mask:":"e40c",":flushed:":"e40d",":unamused:":"e40e",":cold_sweat:":"e40f",":guitar:":"e041",
":nose:":"e41a",":ear:":"e41b",":pray:":"e41d",":wave:":"e41e",":clap:":"e41f",":trumpet:":"e042",":basketball:":"e42a",
":rugby:":"e42b",":8ball:":"e42c",":swimmer:":"e42d",":blue_car:":"e42e",":truck:":"e42f",":fork_and_knife:":"e043",
":school_satchel:":"e43a",":flags:":"e43b",":closed_umbrella:":"e43c",":wedding:":"e43d",":ocean:":"e43e",
":shaved_ice:":"e43f",":cocktail:":"e044",":city_sunset:":"e146",":stars:":"e44b",":rainbow:":"e44c",
":coffee:":"e045",":cake:":"e046",":beer:":"e047",":snowman:":"e048",":cloud:":"e049",":tiger:":"e050",
":109:":"e50a",":jp:":"e50b",":us:":"e50c",":fr:":"e50d",":de:":"e50e",":it:":"e50f",":bear:":"e051",
":baby:":"e51a",":construction_worker:":"e51b",":princess:":"e51c",":statue_of_liberty:":"e51d",":guardsman:":"e51e",
":dancer:":"e51f",":dog:":"e052",":wolf:":"e52a",":cow:":"e52b",":rabbit:":"e52c",":snake:":"e52d",":chicken:":"e52e",
":boar:":"e52f",":mouse:":"e053",":whale:":"e054",":penguin:":"e055",":blush:":"e056",":smile:":"e415",
":disappointed:":"e058",":angry:":"e059",":mailbox:":"e101",":postbox:":"e102",":email:":"e103",":calling:":"e104",
":wink2:":"e105",":heart_eyes:":"e106",":scream:":"e107",":sweat:":"e108",":monkey_face:":"e109",":four_leaf_clover:":"e110",
":couplekiss:":"e111",":gift:":"e112",":gun:":"e113",":mag:":"e114",":runner:":"e115",":hammer:":"e116",
":fireworks:":"e117",":maple_leaf:":"e118",":fallen_leaf:":"e119",":hamburger:":"e120",":fountain:":"e121",
":tent:":"e122",":hotsprings:":"e123",":ferris_wheel:":"e124",":ticket:":"e125",":cd:":"e126",":dvd:":"e127",
":radio:":"e128",":vhs:":"e129",":dart:":"e130",":trophy:":"e131",":checkered_flag:":"e132",":777:":"e133",
":racehorse:":"e134",":speedboat:":"e135",":bike:":"e136",":construction:":"e137",":mens:":"e138",":womens:":"e139",
":toilet:":"e140",":speaker:":"e141",":loudspeaker:":"e412",":crossed_flags:":"e143",":lock:":"e144",
":unlock:":"e145",":egg:":"e147",":book:":"e148",":currency_exchange:":"e149",":busstop:":"e150",":restroom:":"e151",
":cop:":"e152",":post_office:":"e153",":atm:":"e154",":hospital:":"e155",":convenience_store:":"e156",
":school:":"e157",":hotel:":"e158",":bus:":"e159",":walking:":"e201",":ship:":"e202",":koko:":"e203",
":heart_decoration:":"e204",":eight_pointed_black_star:":"e205",":eight_spoked_asterisk:":"e206",":underage:":"e207",
":no_smoking:":"e208",":beginner:":"e209",":hash:":"e210",":loop:":"e211",":new:":"e212",":up:":"e213",
":cool:":"e214",":u6709:":"e215",":u7121:":"e216",":u6708:":"e217",":u7533:":"e218",":red_circle:":"e219",
":5:":"e220",":6:":"e221",":7:":"e222",":8:":"e223",":9:":"e224",":0:":"e225",":-:":"e226",":u5272:":"e227",
":sa:":"e228",":id:":"e229",":point_left:":"e230",":point_right:":"e231",":arrow_up:":"e232",":arrow_down:":"e233",
":arrow_right:":"e234",":arrow_left:":"e235",":arrow_upper_right:":"e236",":arrow_upper_left:":"e237",
":arrow_lower_right:":"e238",":arrow_lower_left:":"e239",":taurus:":"e240",":gemini:":"e241",":cancer:":"e242",
":leo:":"e243",":virgo:":"e244",":libra:":"e245",":scorpius:":"e246",":sagittarius:":"e247",":capricorn:":"e248",
":aquarius:":"e249",":vibration_mode:":"e250",":mobile_phone_off:":"e251",":warning:":"e252",":information_desk_person:":"e253",
":pencil:":"e301",":necktie:":"e302",":hibiscus:":"e303",":tulip:":"e304",":sunflower:":"e305",":bouquet:":"e306",
":palm_tree:":"e307",":cactus:":"e308",":wc:":"e309",":balloon:":"e310",":bomb:":"e311",":tada:":"e312",
":scissors:":"e313",":ribbon:":"e314",":secret:":"e315",":minidisc:":"e316",":mega:":"e317",":womans_hat:":"e318",
":dress:":"e319",":barber:":"e320",":kimono:":"e321",":bikini:":"e322",":handbag:":"e323",":clapper:":"e324",
":bell:":"e325",":notes:":"e326",":heart_sparkle:":"e327",":heart_pink:":"e328",":cupid:":"e329",":dash:":"e330",
":sweat_drops:":"e331",":o:":"e332",":x:":"e333",":anger:":"e334",":tea:":"e338",":bread:":"e339",":ramen:":"e340",
":curry:":"e341",":rice_ball:":"e342",":oden:":"e343",":sushi:":"e344",":apple:":"e345",":tangerine:":"e346",
":strawberry:":"e347",":watermelon:":"e348",":tomato:":"e349",":relieved:":"e401",":smirk:":"e402",":grin:":"e404",
":wink:":"e405",":persevere:":"e406",":confounded:":"e407",":sleepy:":"e408",":tongue:":"e409",":astonished:":"e410",
":sob:":"e411",":joy:":"e412",":cry:":"e413",":relaxed:":"e414",":rage:":"e416",":kissing_face:":"e417",
":kissing_heart:":"e418",":eyes:":"e419",":ok_hand:":"e420",":-1:":"e421",":open_hands:":"e422",":no_good:":"e423",
":ok_woman:":"e424",":couple_with_heart:":"e425",":bow:":"e426",":raised_hands:":"e427",":couple:":"e428",
":dancers:":"e429",":fire_engine:":"e430",":ambulance:":"e431",":police_car:":"e432",":roller_coaster:":"e433",
":metro:":"e434",":bullettrain_side:":"e435",":bamboo:":"e436",":gift_heart:":"e437",":dolls:":"e438",
":suit:":"e439",":sparkler:":"e440",":clamshell:":"e441",":wind_chime:":"e442",":cyclone:":"e443",":ear_of_rice:":"e444",
":jack_o_lantern:":"e445",":rice_scene:":"e446",":leaves:":"e447",":santa:":"e448",":sunrise:":"e449",
":love_hotel:":"e501",":art:":"e502",":tophat:":"e503",":department_store:":"e504",":japanese_castle:":"e505",
":european_castle:":"e506",":cinema:":"e507",":factory:":"e508",":tokyo_tower:":"e509",":gb:":"e510",
":es:":"e511",":ru:":"e512",":cn:":"e513",":kr:":"e514",":person_with_blond_hair:":"e515",":man_with_gua_pi_mao:":"e516",
":man_with_turban:":"e517",":older_man:":"e518",":older_woman:":"e519",":dolphin:":"e520",":bird:":"e521",
":tropical_fish:":"e522",":baby_chick:":"e523",":hamster:":"e524",":bug:":"e525",":elephant:":"e526",
":koala:":"e527",":monkey:":"e528",":sheep:":"e529",":camel:":"e530",":frog:":"e531",":a:":"e532",":b:":"e533",
":ab:":"e534",":o2:":"e535",":feet:":"e536",":tm:":"e537",":stuck_out_tongue_closed_eyes:":"e770",":stuck_out_tongue:":"e771",
":ruben:":"e991",":fabian:":"e992",":jos:":"e993",":mostafa:":"e994",":lennart:":"e995",":ivar:":"e996",
":bas:":"e997",":luca:":"e998",":harutyun:":"e999"}}})


define("plugins/c9.ide.collab/chat/my_emoji",[],function(require,exports,module){"use strict"
var Emojis=require("./emojis")
exports.emoji=function(text,staticPrefix){return text.replace(/([\ue001-\ue999])/g,function(str,p1){return p1.charCodeAt(0).toString(16).toUpperCase().replace(/^([\da-f]+)$/i,"<img class='emoji' src=\""+staticPrefix+'/emoji/emoji-$1.png" alt="emoji" />')

})},exports.toEmojiUnicode=function(text){function toUnicode(str,p1){return Emojis.reverse[p1]?eval('"\\u'+Emojis.reverse[p1]+'"'):str

}return text=text.replace(/(:[\w_\-\+]*:)/g,toUnicode),specialEmojis.forEach(function(emot){text=text.replace(emot[0],toUnicode(emot[1],emot[1]))

}),text}
var specialEmojis=[[/:-*\)/g,":blush:"],[/:-*o/gi,":scream:"],[/(:|;)-*\]/g,":smirk:"],[/(:|;)-*d/gi,":smile:"],[/xd/gi,":stuck_out_tongue_closed_eyes:"],[/:-*p/gi,":stuck_out_tongue:"],[/:-*(\[|@)/g,":rage:"],[/:-*\(/g,":disappointed:"],[/:-*\*/g,":kissing_heart:"],[/;-*\)/g,":wink:"],[/:-*s/gi,":confounded:"],[/:-*\|/g,":flushed:"],[/:-*\$/g,":relaxed:"],[/:-*x/gi,":mask:"],[/&lt;3/g,":heart:"],[/&lt;\/3/g,":broken_heart:"],[/:('|\u2019)-*\(/g,":sob:"]]

})


define("plugins/c9.ide.collab/chat/chat",[],function(require,exports,module){"use strict"
function main(options,imports,register){function $(id){return document.getElementById(id)}function load(){
loaded||(loaded=!0,collab.on("chatMessage",onChatMessage),collab.on("chatClear",onChatClear))}function draw(options){
function onWorkspaceSync(){var accessInfo=workspace.accessInfo
if(accessInfo["private"]&&(!accessInfo.member||accessInfo.pending))return console.warn("Don't have read access - You can't use chat")


var chatHistory=workspace.chatHistory||[]
chatHistory.forEach(addMessage),scrollDown(),chatCounter.textContent=chatHistory.length}function listenWorkspaceSync(){
workspace.off("sync",onWorkspaceSync),workspace.on("sync",onWorkspaceSync)}if(!drawn){drawn=!0,drawNonPanelElements(),
parent=options.aml
var parentExt=parent.$int
parentExt.className+=" chatContainer",chatText=parentExt.appendChild(document.createElement("div")),chatText.setAttribute("class","chatText"),
chatInput=new apf.codebox({htmlNode:parentExt,skin:"codebox","initial-message":"Enter your message here",
focusselect:"true"}),chatInput.$ext.classList.remove("ace_searchbox"),chatInput.ace.setOptions({wrap:"free",
indentedSoftWrap:!1,maxLines:5,minLines:2,fontFamily:"inherit"}),chatInput.ace.session.$setFontMetrics(chatInput.ace.renderer.$fontMetrics),
plugin.addElement(chatInput),chatInput.ace.commands.addCommands([{bindKey:"ESC",exec:function(){chatInput.getValue()?chatInput.setValue(""):collab.hide()

}},{bindKey:"Enter",exec:send}]),panels.isActive("collab")&&listenWorkspaceSync(),collab.on("show",function(){
chatInput.focus(),listenWorkspaceSync()}),collab.on("hide",function(){workspace.off("sync",onWorkspaceSync)

})
var deleteMsgItem=new MenuItem({caption:"Delete Message",match:"rw",onclick:clearChatMessage,disabled:!0
}),clearHistoryItem=new MenuItem({caption:"Clear history",match:"rw",onclick:clearChatHistory,disabled:!0
}),mnuCtxTree=new Menu({id:"mnuChat",items:[deleteMsgItem,clearHistoryItem]},plugin)
mnuCtxTreeEl=mnuCtxTree.aml,parent.setAttribute("contextmenu",mnuCtxTreeEl),mnuCtxTree.on("show",function(){
setTimeout(function(){var hasReadWrite="rw"===workspace.fs,collabConnected=collab.connected
clearHistoryItem.disabled=!hasReadWrite||!collabConnected||!chatText.firstChild,toDeleteMessage=findMessageToDelete(hasReadWrite),
deleteMsgItem.disabled=!toDeleteMessage||!collabConnected},10)}),parent.on("resize",function(){isOpen()&&(pending.forEach(addMessage),
pending=[],updateCaption())})}}function findMessageToDelete(hasReadWrite){var msg,menuRect=mnuCtxTreeEl.$int.getBoundingClientRect()


return[].slice.apply(chatText.getElementsByTagName("p")).forEach(function(msgP){var rect=msgP.getBoundingClientRect()


rect.left<menuRect.left&&rect.left+rect.width>menuRect.left&&rect.top<menuRect.top&&rect.top+rect.height>menuRect.top&&(hasReadWrite||msgP.userId==workspace.myUserId)&&(msg=msgP)

}),msg}function clearChatMessage(){if(!toDeleteMessage||!toDeleteMessage.id)return console.error("[OT] Chat: no message found to delete!")


var msgId=toDeleteMessage.id.match(/ot_chat_(\d+)/)[1]
collab.send("CLEAR_CHAT",{id:msgId})}function clearChatHistory(){collab.send("CLEAR_CHAT",{clear:!0})

}function scrollDown(){chatText.scrollTop=chatText.scrollHeight}function isOpen(){return panels.isActive("collab")&&"m"!=parent.state[0]

}function send(){var text=chatInput.getValue().trim()
text&&(text=emoji.toEmojiUnicode(text),collab.send("CHAT_MESSAGE",{text:text}),chatInput.setValue(""))

}function getAuthorName(userId){if(userId==workspace.myUserId)return"You"
var user=workspace.users[userId]
return util.escapeHTML(user.fullname)}function getAuthorColor(userId){var color=workspace.colorPool[userId]


return util.formatColor(color)}function formatMessageText(text){return text=util.escapeHtmlWithClickableLinks(text.trim(),"_blank"),
text=text.replace(/\n/g,"<br/>"),text=emoji.emoji(text,staticPrefix)}function onChatMessage(msg){if(drawNonPanelElements(),
workspace.addChatMessage(msg),isOpen())addMessage(msg)
else{pending.push(msg),updateCaption()
var throbText="<b>"+getAuthorName(msg.userId)+"</b> ",text=formatMessageText(msg.text),notif=msg.notification


throbText+=notif?text+" "+notif.linkText:": "+text,chatThrob.innerHTML=throbText,chatThrob.style.display="block",
clearTimeout(throbTimeout),throbTimeout=setTimeout(function(){chatThrob.style.display="none"},5e3)}if(msg.increment){
var count=Number(chatCounter.textContent)
chatCounter.textContent=count+1}var inputFocussed=chatInput&&chatInput.ace.isFocused()
inputFocussed||chatNotif.play()}function onChatClear(data){if(data.clear){for(;chatText.firstChild;)chatText.removeChild(chatText.firstChild)


seenMsgs={},workspace.chatHistory=[]}else if(data.id){var msgHtml=$("ot_chat_"+data.id)
msgHtml&&msgHtml.parentNode.removeChild(msgHtml)}}function addMessage(msg){if(!seenMsgs[msg.id]){seenMsgs[msg.id]=!0


var msgDate=new Date(msg.timestamp),text=formatMessageText(msg.text),authorName=getAuthorName(msg.userId),authorColor=getAuthorColor(msg.userId),authorNameEl=document.createElement("a")


authorNameEl.href="javascript:void(0)",authorNameEl.className="authorName",authorNameEl.innerHTML="<b>"+authorName+"</b>"


var html=document.createElement("p")
html.id="ot_chat_"+msg.id,html.userId=msg.userId
var borderEl=document.createElement("span")
html.appendChild(borderEl),borderEl.className="chatBorder",borderEl.style.borderLeftColor=authorColor,
html.appendChild(authorNameEl)
var textEl=document.createElement("span")
textEl.className="chatmessage",textEl.innerHTML=text+"<br/>",html.appendChild(textEl)
var timeEl=document.createElement("span")
timeEl.className="chattime",timeEl.title=msgDate.toISOString(),timeEl.innerHTML=msgDate,timeago(timeEl),
html.appendChild(timeEl),chatText.appendChild(html),scrollDown()}}function updateCaption(){var caption="Group Chat"


pending.length&&(caption+="("+pending.length+")"),parent&&parent.setAttribute("caption",caption)}function drawNonPanelElements(){
nonPanelDrawn||(nonPanelDrawn=!0,ui.insertHtml(null,html,plugin),ui.insertCss(css,staticPrefix,plugin),
chatThrob=$("chatThrob"),chatCounter=$("chatCounter"),chatNotif=$("chatNotif"),chatNotif.src=staticPrefix+"/sounds/chat_notif.mp3",
chatThrob.addEventListener("click",function(){chatThrob.style.display="none",plugin.show()}))}var toDeleteMessage,chatInput,chatText,mnuCtxTreeEl,parent,chatThrob,chatCounter,chatNotif,throbTimeout,CollabPanel=imports.CollabPanel,ui=imports.ui,panels=imports.panels,util=imports["collab.util"],workspace=imports["collab.workspace"],collab=imports.collab,Menu=imports.Menu,MenuItem=imports.MenuItem,html=require("text!./chat.html"),css=require("text!./chat.css"),timeago=require("timeago"),staticPrefix=options.staticPrefix,plugin=new CollabPanel("Ajax.org",main.consumes,{
name:"chat",index:200,caption:"Group Chat",textselect:!0,style:"flex:1;-webkit-flex:1"}),emoji=require("./my_emoji"),loaded=!1,drawn=!1,seenMsgs={},pending=[],nonPanelDrawn=!1


plugin.on("load",function(){load(),plugin.once("draw",draw)}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=nonPanelDrawn=!1}),plugin.freezePublicAPI({}),register(null,{
chat:plugin})}return main.consumes=["CollabPanel","ui","panels","collab.util","collab.workspace","collab","Menu","MenuItem"],
main.provides=["chat"],main})


define("text!plugins/c9.ide.collab/members/members.css",[],"")


define("plugins/c9.ide.collab/members/members",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){loaded||(loaded=!0,ui.insertCss(css,staticPrefix,plugin),
membersPanel=new MembersPanel("Ajax.org",main.consumes,{showTabs:!0,autoSize:!0}),plugin.on("resize",membersPanel.resize.bind(membersPanel)),
collab.on("show",membersPanel.show.bind(membersPanel)),collab.on("hide",membersPanel.hide.bind(membersPanel)))

}function draw(e){drawn||(drawn=!0,membersPanel.draw(e),panels.isActive("collab")&&membersPanel.show())

}var membersPanel,CollabPanel=imports.CollabPanel,collab=imports.collab,MembersPanel=imports.MembersPanel,ui=imports.ui,panels=imports.panels,css=require("text!./members.css"),staticPrefix=options.staticPrefix,plugin=new CollabPanel("Ajax.org",main.consumes,{
name:"members",index:100,caption:"Workspace Members"}),loaded=!1,drawn=!1
plugin.on("load",function(){load(),plugin.once("draw",draw)}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({}),register(null,{members:plugin
})}return main.consumes=["CollabPanel","ui","MembersPanel","collab","panels"],main.provides=["members"],
main})


define("text!plugins/c9.ide.collab/share/share.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "window"\n      center    = "true"\n      icon      = ""\n      skin      = "bk-window2"\n      kbclose   = "true"\n      title     = "Share this workspace"\n      buttons   = "close"\n      class     = "share dark"\n      draggable = "true">\n        <label style="margin-bottom:6px">Links to share</label>\n        <blockquote class="links">\n          <a:hbox>\n            <label class="subhead">Editor:</label>\n            <div flex="1" id="shareLinkEditor" type="text" readonly="true" class="link" textselect="true"></div>\n            <a:checkbox id="publicEditor" skin="checkbox_black" class="sharecb">Public</a:checkbox>\n          </a:hbox>\n          <a:hbox style="margin-top: 4px;">\n            <label class="subhead">Application:</label>\n            <div flex="1" id="shareLinkApp" type="text" readonly="true" class="link" textselect="true"></div>\n            <a:checkbox id="publicApp" skin="checkbox_black" class="sharecb">Public</a:checkbox>\n          </a:hbox>\n          <a:hbox style="margin-top: 4px;">\n            <label class="subhead">Files:</label>\n            <div flex="1" id="shareLinkPreview" type="text" readonly="true" class="link" textselect="true"></div>\n            <a:checkbox id="publicPreview" skin="checkbox_black" class="sharecb">Public</a:checkbox>\n          </a:hbox>\n        </blockquote>\n        \n        <label style="margin-top:10px">Who has access</label>\n        <a:bar id="members" class="members"></a:bar>\n        <a:checkbox skin="checkbox_black" style=\'width: 200px;margin:-7px 0 9px 0;\' \n          tooltip="When enabled members will always see the owner\'s last saved state when they load Cloud9"\n          value="project/share/@useOwnerSettings">Don\'t allow members to save their tab state</a:checkbox>\n\n        <blockquote class="invite">\n            <label>Invite People</label>\n            <a:textbox\n              id              = "txtUsername"\n              skin            = "searchbox"\n              initial-message = "username or email"\n              focusselect     = "true" />\n\n            <a:bar id="access" class="standalone access_control rw">\n                <div class="readbutton">R</div><div class="writebutton">RW</div>\n            </a:bar>\n\n            <a:button id="btnInvite" skin="btn-default-css3" class="btn-green">Invite</a:button>\n            <a:checkbox id="cbNotify" skin="checkbox_black" style=\'margin-top:6px; width: 200px;\' checked="true">Notify people via email</a:checkbox>\n        </blockquote>\n\n        <a:button id="btnDone" skin="btn-default-css3" class="btn-done">Done</a:button>\n    </a:window>\n</a:application>\n')


define("text!plugins/c9.ide.collab/share/share.css",[],"")


define("plugins/c9.ide.collab/share/share",[],function(require,module,exports){function main(options,imports,register){
function load(){if(!loaded&&(loaded=!0,c9.isAdmin)){commands.addCommand({name:"sharedialog",hint:"Share the workspace",
group:"General",exec:show},plugin)
var btn=new ui.button({skin:"c9-menu-btn",caption:"Share","class":"c9-share",tooltip:"Share this workspace",
command:"sharedialog"})
menus.addItemByPath("Window/~",new ui.divider,35,plugin),menus.addItemByPath("Window/Share...",new ui.item({
command:"sharedialog"}),36,plugin),ui.insertByIndex(layout.findParent({name:"preferences"}),btn,875,plugin),
settings.on("read",function(){settings.setDefaults("project/share",[["preview",!1],["app",!1],["useOwnerSettings",!1]])

},plugin)}}function draw(){function updateAccess(field,value,cb,callback){var to=value?"public":"private"


question.show("Change Access To "+to.uCaseFirst(),"visibility"==field?value?"Make this workspace available to the whole world?":"Close this workspace to everyone but the listed users?":value?"Make "+words[field][0]+" available to anyone with the url?":"Close "+words[field][0]+" to everyone but the listed users?",value?"Are you sure you want to make this change? Anyone with the url will have read-only access to "+words[field]+". Only users that you authorize have write access.":"Are you sure you want to make this change? Only users with read-only or read-write access will be able to access "+words[field]+".",function(){
cb.disable()
var key="visibility"==field?field:field+"Access",body={}
body[key]=to,api.project.patch("",{body:body,contentType:"application/json"},function(err){cb.enable(),
callback&&callback(err),err&&(cb[value?"uncheck":"check"](),"Administrator rights required!"==err.message?alert("Forbidden","You are not allowed to change this setting.","Only the owner of this workspace can change this setting. Please contact the owner about this."):402==err.code?alert("Maximum Private Workspaces Reached","It seems you have reached the maximum number of workspaces under your account","Please go to the dashboard or contact support to increase the number of private workspaces."):alert("Failed updating public status","The server returned an error",err.message||""))

})},function(){cb[value?"uncheck":"check"]()})}if(!drawn){drawn=!0,ui.insertCss(css,plugin),ui.insertMarkup(null,markup,plugin),
commands.addCommand({name:plugin.name,bindKey:{mac:"ESC",win:"ESC"},group:"ignore",isAvailable:function(){
return dialog.visible},exec:function(){dialog.dispatchEvent("keydown",{keyCode:27})}},plugin),dialog=plugin.getElement("window"),
btnInvite=plugin.getElement("btnInvite"),btnDone=plugin.getElement("btnDone"),cbNotify=plugin.getElement("cbNotify"),
txtUsername=plugin.getElement("txtUsername"),shareLinkEditor=plugin.getElement("shareLinkEditor").$int,
shareLinkApp=plugin.getElement("shareLinkApp").$int,shareLinkPreview=plugin.getElement("shareLinkPreview").$int,
membersParent=plugin.getElement("members"),publicApp=plugin.getElement("publicApp"),publicPreview=plugin.getElement("publicPreview"),
publicEditor=plugin.getElement("publicEditor"),accessButton=plugin.getElement("access").$int,options.silent&&(cbNotify.uncheck(),
cbNotify.$ext.style.visibility="hidden")
var mnuLink=new Menu({zindex:5e5,items:[new MenuItem({caption:"Open",onclick:function(){window.open(mnuLink.meta.linkText)

}}),new MenuItem({caption:"Copy",onclick:function(){clipboard.copy(!1,mnuLink.meta.linkText)}})]},plugin),port=options.local?":"+(c9.port||"8080"):""


if(options.local)shareLinkEditor.textContent="https://ide.c9.io/"+c9.workspaceId
else{var l=location
shareLinkEditor.textContent=l.protocol+"//"+l.host+l.pathname}shareLinkApp.textContent=(c9.hostname?"https://"+c9.hostname:"http://localhost")+port,
shareLinkPreview.textContent=options.previewUrl,[shareLinkEditor,shareLinkApp,shareLinkPreview].forEach(function(div){
div.addEventListener("click",function(e){mnuLink.meta.linkText=this.textContent,mnuLink.show(e.clientX+1,e.clientY)

}),div.addEventListener("contextmenu",function(e){var sel=window.getSelection(),r=new Range
r.selectNode(e.currentTarget),sel.removeAllRanges(),sel.addRange(r)})}),accessButton.addEventListener("click",function(){
var className=accessButton.classList,actionArr=className.contains("rw")?["rw","r"]:["r","rw"]
className.remove(actionArr[0]),className.add(actionArr[1])})
var words={visibility:["this workspace"],app:["the running application"],preview:["the preview of workspace files"]
}
publicEditor.on("afterchange",function(e){updateAccess("visibility",e.value,publicEditor,function(err){
syncPermissions()})}),publicApp.on("afterchange",function(e){updateAccess("app",e.value,publicApp)}),
publicPreview.on("afterchange",function(e){updateAccess("preview",e.value,publicPreview)}),btnDone.on("click",hide),
btnInvite.on("click",inviteUser),txtUsername.on("keydown",function(e){return 13==e.keyCode?(inviteUser(),
e.returnValue=!1,!1):void(27===e.keyCode&&hide())}),membersPanel=new MembersPanel("Ajax.org",main.consumes,{}),
membersPanel.draw({aml:membersParent}),syncPermissions(),emit.sticky("draw")}}function syncPermissions(){
api.collab.get("access_info",function(err,info){err||(publicEditor[info["private"]?"uncheck":"check"](),
publicApp[info.appPublic||!info["private"]?"check":"uncheck"](),publicPreview[info.previewPublic||!info["private"]?"check":"uncheck"](),
publicApp[info["private"]?"enable":"disable"](),publicPreview[info["private"]?"enable":"disable"]())})

}function inviteUser(){var username=txtUsername.value
username=username.replace(/^\s*(<\s*)?|\s*(>\s*)?$/g,"")
var access=accessButton.classList.contains("rw")?"rw":"r",accessString="rw"===access?"Read+Write":"Read-Only"


btnInvite.disable()
var options={silent:!cbNotify.checked}
workspace.addMember(username,access,options,function(err,member){return btnInvite.enable(),err?alert("Error","Error adding workspace member",err.message):(txtUsername.setValue(""),
void alert("Invitation Sent","Workspace Member Added","You have granted "+member.name+" "+accessString+" access to this workspace!"))

})}function show(){draw(),dialog.show(),membersPanel.show(),txtUsername.setValue(""),txtUsername.blur()

}function hide(){dialog&&dialog.hide()}var dialog,btnInvite,btnDone,txtUsername,membersParent,accessButton,membersPanel,shareLinkEditor,shareLinkApp,shareLinkPreview,publicApp,publicPreview,publicEditor,cbNotify,Plugin=imports.Plugin,c9=imports.c9,MembersPanel=imports.MembersPanel,commands=imports.commands,settings=imports.settings,menus=imports.menus,clipboard=imports.clipboard,ui=imports.ui,api=imports.api,alert=imports["dialog.alert"].show,layout=imports.layout,workspace=imports["collab.workspace"],question=imports["dialog.question"],Menu=imports.Menu,MenuItem=imports.MenuItem,markup=require("text!./share.xml"),css=require("text!./share.css"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({}),register(null,{"dialog.share":plugin})

}return main.consumes=["Plugin","c9","commands","menus","ui","layout","dialog.alert","MembersPanel","info","collab.workspace","Menu","MenuItem","clipboard","settings","api","dialog.question"],
main.provides=["dialog.share"],main})


define("ace/lib/lang",[],function(require,exports,module){"use strict"
exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")

},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string)


return result}
var trimBeginRegexp=/^\s\s*/,trimEndRegexp=/\s\s*$/
exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){
return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={}
for(var key in obj)copy[key]=obj[key]
return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;i<l;i++)array[i]&&"object"==typeof array[i]?copy[i]=this.copyObject(array[i]):copy[i]=array[i]


return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj
var copy
if(Array.isArray(obj)){copy=[]
for(var key=0;key<obj.length;key++)copy[key]=deepCopy(obj[key])
return copy}if("[object Object]"!==Object.prototype.toString.call(obj))return obj
copy={}
for(var key in obj)copy[key]=deepCopy(obj[key])
return copy},exports.arrayToMap=function(arr){for(var map={},i=0;i<arr.length;i++)map[arr[i]]=1
return map},exports.createMap=function(props){var map=Object.create(null)
for(var i in props)map[i]=props[i]
return map},exports.arrayRemove=function(array,value){for(var i=0;i<=array.length;i++)value===array[i]&&array.splice(i,1)

},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},exports.escapeHTML=function(str){
return(""+str).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")

},exports.getMatchOffsets=function(string,regExp){var matches=[]
return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length
})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){
return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred}
return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){
return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},
exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){
null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))}
return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)

},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),
timer=null},_self.isPending=function(){return timer},_self}})


define("ace/lib/net",[],function(require,exports,module){"use strict"
var dom=require("./dom")
exports.get=function(url,callback){var xhr=new XMLHttpRequest
xhr.open("GET",url,!0),xhr.onreadystatechange=function(){4===xhr.readyState&&callback(xhr.responseText)

},xhr.send(null)},exports.loadScript=function(path,callback){var head=dom.getDocumentHead(),s=document.createElement("script")


s.src=path,head.appendChild(s),s.onload=s.onreadystatechange=function(_,isAbort){!isAbort&&s.readyState&&"loaded"!=s.readyState&&"complete"!=s.readyState||(s=s.onload=s.onreadystatechange=null,
isAbort||callback())}},exports.qualifyURL=function(url){var a=document.createElement("a")
return a.href=url,a.href}})


define("ace/lib/event_emitter",[],function(require,exports,module){"use strict"
var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){
this.defaultPrevented=!0}
EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),
this._defaultHandlers||(this._defaultHandlers={})
var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName]
if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),
e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice()
for(var i=0;i<listeners.length&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0

}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName]
if(listeners){listeners=listeners.slice()
for(var i=0;i<listeners.length;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){
var _self=this
callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),
callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers


if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName]


disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old)
var i=disabled.indexOf(callback)
i!=-1&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){
var handlers=this._defaultHandlers
if(handlers){var disabled=handlers._disabled_[eventName]
if(handlers[eventName]==callback){handlers[eventName]
disabled&&this.setDefaultHandler(eventName,disabled.pop())}else if(disabled){var i=disabled.indexOf(callback)


i!=-1&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){
this._eventRegistry=this._eventRegistry||{}
var listeners=this._eventRegistry[eventName]
return listeners||(listeners=this._eventRegistry[eventName]=[]),listeners.indexOf(callback)==-1&&listeners[capturing?"unshift":"push"](callback),
callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){
this._eventRegistry=this._eventRegistry||{}
var listeners=this._eventRegistry[eventName]
if(listeners){var index=listeners.indexOf(callback)
index!==-1&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])

},exports.EventEmitter=EventEmitter})


define("ace_tree/config",[],function(require,exports,module){"no use strict"
function deHyphenate(str){return str.replace(/-(.)/g,function(m,m1){return m1.toUpperCase()})}var lang=require("ace/lib/lang"),oop=require("ace/lib/oop"),net=require("ace/lib/net"),EventEmitter=require("ace/lib/event_emitter").EventEmitter,global=function(){
return this}(),options={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",
$moduleUrls:{}}
exports.get=function(key){if(!options.hasOwnProperty(key))throw new Error("Unknown config key: "+key)


return options[key]},exports.set=function(key,value){if(!options.hasOwnProperty(key))throw new Error("Unknown config key: "+key)


options[key]=value},exports.all=function(){return lang.copyObject(options)},oop.implement(exports,EventEmitter),
exports.moduleUrl=function(name,component){if(options.$moduleUrls[name])return options.$moduleUrls[name]


var parts=name.split("/")
component=component||parts[parts.length-2]||""
var base=parts[parts.length-1].replace(component,"").replace(/(^[\-_])|([\-_]$)/,"")
!base&&parts.length>1&&(base=parts[parts.length-2])
var path=options[component+"Path"]
return null==path&&(path=options.basePath),path&&"/"!=path.slice(-1)&&(path+="/"),path+component+"-"+base+this.get("suffix")

},exports.setModuleUrl=function(name,subst){return options.$moduleUrls[name]=subst},exports.$loading={},
exports.loadModule=function(moduleName,onLoad){var module,moduleType
Array.isArray(moduleName)&&(moduleType=moduleName[0],moduleName=moduleName[1])
try{module=require(moduleName)}catch(e){}if(module&&!exports.$loading[moduleName])return onLoad&&onLoad(module)


if(exports.$loading[moduleName]||(exports.$loading[moduleName]=[]),exports.$loading[moduleName].push(onLoad),
!(exports.$loading[moduleName].length>1)){var afterLoad=function(){require([moduleName],function(module){
exports._emit("load.module",{name:moduleName,module:module})
var listeners=exports.$loading[moduleName]
exports.$loading[moduleName]=null,listeners.forEach(function(onLoad){onLoad&&onLoad(module)})})}
return exports.get("packaged")?void net.loadScript(exports.moduleUrl(moduleName,moduleType),afterLoad):afterLoad()

}},exports.init=function(){if(options.packaged=require.packaged||module.packaged||global.define&&define.packaged,
!global.document)return""
for(var scriptOptions={},scriptUrl="",scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){
var script=scripts[i],src=script.src||script.getAttribute("src")
if(src){for(var attributes=script.attributes,j=0,l=attributes.length;j<l;j++){var attr=attributes[j]
0===attr.name.indexOf("data-ace-")&&(scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/,""))]=attr.value)

}var m=src.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/)
m&&(scriptUrl=m[1])}}scriptUrl&&(scriptOptions.base=scriptOptions.base||scriptUrl,scriptOptions.packaged=!0),
scriptOptions.basePath=scriptOptions.base,scriptOptions.workerPath=scriptOptions.workerPath||scriptOptions.base,
scriptOptions.modePath=scriptOptions.modePath||scriptOptions.base,scriptOptions.themePath=scriptOptions.themePath||scriptOptions.base,
delete scriptOptions.base
for(var key in scriptOptions)"undefined"!=typeof scriptOptions[key]&&exports.set(key,scriptOptions[key])

}
var optionsProvider={setOptions:function(optList){Object.keys(optList).forEach(function(key){this.setOption(key,optList[key])

},this)},getOptions:function(a){var b={}
return Object.keys(a).forEach(function(key){b[key]=this.getOption(key)},this),b},setOption:function(name,value){
if(this["$"+name]!==value){var opt=this.$options[name]
if(opt){if(opt.forwardTo)return this[opt.forwardTo]&&this[opt.forwardTo].setOption(name,value)
opt.handlesSet||(this["$"+name]=value),opt&&opt.set&&opt.set.call(this,value)}}},getOption:function(name){
var opt=this.$options[name]
if(opt)return opt.forwardTo?this[opt.forwardTo]&&this[opt.forwardTo].getOption(name):opt&&opt.get?opt.get.call(this):this["$"+name]

}},defaultOptions={}
exports.defineOptions=function(obj,path,options){return obj.$options||(defaultOptions[path]=obj.$options={}),
Object.keys(options).forEach(function(key){var opt=options[key]
"string"==typeof opt&&(opt={forwardTo:opt}),opt.name||(opt.name=key),obj.$options[opt.name]=opt,"initialValue"in opt&&(obj["$"+opt.name]=opt.initialValue)

}),oop.implement(obj,optionsProvider),this},exports.resetOptions=function(obj){Object.keys(obj.$options).forEach(function(key){
var opt=obj.$options[key]
"value"in opt&&obj.setOption(key,opt.value)})},exports.setDefaultValue=function(path,name,value){var opts=defaultOptions[path]||(defaultOptions[path]={})


opts[name]&&(opts.forwardTo?exports.setDefaultValue(opts.forwardTo,name,value):opts[name].value=value)

},exports.setDefaultValues=function(path,optionHash){Object.keys(optionHash).forEach(function(key){exports.setDefaultValue(path,key,optionHash[key])

})}})


define("ace_tree/layer/cells",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),dom=require("ace/lib/dom"),lang=require("ace/lib/lang"),escapeHTML=lang.escapeHTML,EventEmitter=require("ace/lib/event_emitter").EventEmitter,Cells=function(parentEl){
this.element=dom.createElement("div"),this.element.className="ace_tree_layer ace_tree_cell-layer",parentEl.appendChild(this.element)

};(function(){oop.implement(this,EventEmitter),this.config={},this.setDataProvider=function(provider){
this.provider=provider,provider&&(this.update=provider.renderRow?this.$customUpdate:this.$treeModeUpdate)

},this.update=function(config){},this.measureSizes=function(){var domNode=this.element.firstChild
domNode&&(this.provider.rowHeight=domNode.offsetHeight,this.provider.rowHeightInner=domNode.clientHeight)

},this.$treeModeUpdate=function(config){this.config=config
var row,datarow,provider=this.provider,html=[],view=config.view,firstRow=config.firstRow,lastRow=config.lastRow+1,hsize="auto;",vsize=provider.rowHeightInner||provider.rowHeight


for(row=firstRow;row<lastRow;row++)datarow=view[row-firstRow],provider.getItemHeight&&(vsize=provider.getItemHeight(datarow,row)),
this.$renderRow(html,datarow,vsize,hsize,row)
firstRow<=0&&lastRow<=0&&this.renderPlaceHolder(provider,html,config),this.element=dom.setInnerHtml(this.element,html.join("")),
vsize||this.measureSizes()},this.columnNode=function(datarow,column){return"<span class='tree-column "+(column.className||"")+"' style='"+(datarow.fullWidth?"":"width:"+column.$width+";")+"'>"

},this.getRowClass=function(datarow,row){var provider=this.provider
return"tree-row "+(provider.isSelected(datarow)?"selected ":"")+(provider.getClassName(datarow)||"")+(1&row?" odd":" even")

},this.$renderRow=function(html,datarow,vsize,hsize,row){var provider=this.provider,columns=provider.columns,indent=provider.$indentSize


if(html.push("<div style='height:"+vsize+"px;"+(columns?"padding-right:"+columns.$fixedWidth:"")+"' class='"+this.getRowClass(datarow,row)+"'>"),
!columns||"tree"==columns[0].type){columns&&html.push(this.columnNode(datarow,columns[0],row))
var depth=provider.getRowIndent(datarow)
html.push((depth?"<span style='width:"+depth*indent+"px' class='tree-indent'></span>":"")+"<span class='toggler "+(provider.hasChildren(datarow)?provider.isOpen(datarow)?"open":"closed":"empty")+"'></span>"+(provider.getCheckboxHTML?provider.getCheckboxHTML(datarow):"")+provider.getIconHTML(datarow)+(provider.getContentHTML?provider.getContentHTML(datarow):"<span class='caption' style='width: "+hsize+"px;height: "+vsize+"px'>"+provider.getCaptionHTML(datarow)+"</span>"))

}if(columns){for(var col="tree"==columns[0].type?1:0;col<columns.length;col++){var column=columns[col],rowStr=column.getHTML?column.getHTML(datarow):escapeHTML(column.getText(datarow)+"")


html.push("</span>"+this.columnNode(datarow,column,row)+rowStr)}html.push("</span>")}html.push("</div>")

},this.$customUpdate=function(config){this.config=config
for(var provider=this.provider,html=[],firstRow=config.firstRow,lastRow=config.lastRow+1,row=firstRow;row<lastRow;row++)provider.renderRow(row,html,config)


firstRow<=0&&lastRow<=0&&this.renderPlaceHolder(provider,html,config),this.element=dom.setInnerHtml(this.element,html.join(""))

},this.updateClasses=function(config){if(this.update==this.$customUpdate&&!this.provider.updateNode)return this.update(config)


this.config=config
var row,datarow,provider=this.provider,view=config.view,firstRow=config.firstRow,lastRow=config.lastRow+1,children=this.element.children


if(children.length!=lastRow-firstRow)return this.update(config)
for(row=firstRow;row<lastRow;row++){datarow=view[row-firstRow]
var el=children[row-firstRow]
el.className=this.getRowClass(datarow,row),provider.redrawNode&&provider.redrawNode(el,datarow)}},this.scroll=function(config){
return this.update(config)},this.updateRows=function(config,firstRow,lastRow){},this.destroy=function(){},
this.getDomNodeAtIndex=function(i){return this.element.children[i-this.config.firstRow]},this.renderPlaceHolder=function(provider,html,config){
provider.renderEmptyMessage?provider.renderEmptyMessage(html,config):provider.getEmptyMessage&&html.push("<div class='message empty'>",escapeHTML(provider.getEmptyMessage()),"</div>")

}}).call(Cells.prototype),exports.Cells=Cells})


define("ace_tree/layer/markers",[],function(require,exports,module){"use strict"
var dom=require("ace/lib/dom"),Selection=function(parentEl,renderer){this.element=dom.createElement("div"),
this.element.className="ace_tree_layer ace_tree_selection-layer",parentEl.appendChild(this.element),this.renderer=renderer,
this.markerEl=null,this.arrowEl=null};(function(){this.setDataProvider=function(provider){this.provider=provider

},this.update=function(config){!this.provider.markedFolder||this.provider.markedFolderType?this.markerEl&&this.clearFolderMarker():this.showFolderMarker(config),
this.provider.markedFolder&&this.provider.markedFolderType?this.showInsertionMarker(config):this.arrowEl&&this.clearInsertionMarker()

},this.showFolderMarker=function(config){this.config=config
for(var provider=this.provider,node=provider.markedFolder,start=provider.getIndexForNode(node),items=provider.visibleItems,end=start+1,depth=node.$depth;items[end]&&items[end].$depth>depth;)end++


if(end--,start>config.lastRow||end<config.firstRow||start===end)return this.clearFolderMarker()
start++,end++
var top=Math.max(start-config.firstRow,-1)*provider.rowHeight,left=(depth+1)*provider.$indentSize,bottom=Math.min(end-config.firstRow,config.lastRow-config.firstRow+2)*provider.rowHeight


this.markerEl||(this.markerEl=dom.createElement("div"),this.markerEl.className="dragHighlight",this.element.appendChild(this.markerEl)),
this.markerEl.style.top=top+"px",this.markerEl.style.left=left+"px",this.markerEl.style.right="7px",this.markerEl.style.height=bottom-top+"px"

},this.showInsertionMarker=function(config){this.config=config
var provider=this.provider,node=provider.markedFolder,type=this.provider.markedFolderType,start=provider.getIndexForNode(node),depth=node.$depth


if(start>config.lastRow||start<config.firstRow)return this.clearInsertionMarker()
1==type&&start++
var top=Math.max(start-config.firstRow,-1)*provider.rowHeight,left=(depth+1)*provider.$indentSize
this.arrowEl||(this.arrowEl=dom.createElement("div"),this.arrowEl.className="dragArrow",this.element.appendChild(this.arrowEl)),
this.arrowEl.style.top=top+"px",this.arrowEl.style.left=left+"px",this.arrowEl.style.right="7px"},this.clearFolderMarker=function(){
this.markerEl&&(this.markerEl.parentNode.removeChild(this.markerEl),this.markerEl=null)},this.clearInsertionMarker=function(){
this.arrowEl&&(this.arrowEl.parentNode.removeChild(this.arrowEl),this.arrowEl=null)},this.clear=function(){
this.clearFolderMarker(),this.clearInsertMarker()},this.destroy=function(){}}).call(Selection.prototype),
exports.Selection=Selection})


define("ace_tree/layer/heading",[],function(require,exports,module){"use strict"
function getColumnText(node){return node[this.value]||this.defaultValue||""}function ColumnHeader(parentEl,renderer){
this.element=dom.createElement("div"),parentEl.appendChild(this.element),this.element.className="tree-headings",
this.visible=!1}var dom=(require("ace/lib/oop"),require("ace/lib/dom")),RESIZER_WIDTH=(require("ace/lib/lang"),
require("ace/lib/event_emitter").EventEmitter,3);(function(){this.minWidth=25,this.update=function(){
if(this.provider&&this.visible){for(var columns=this.provider.columns,html=[],i=0;i<columns.length;i++){
var col=columns[i]
html.push("<span class='tree-column "+(col.className||"")+"' style='width:"+col.$width+";height:'>"+col.caption+"</span><span class='tree-column-resizer' ></span>")

}this.element.style.paddingRight=columns.$fixedWidth,this.element.innerHTML=html.join("")}},this.setDataProvider=function(provider){
if(this.provider=provider,provider){var columns=this.provider.columns
if(!columns)return void(this.visible=!1)
this.visible=!0
var fixedWidth=0
columns.forEach(function(col,i){col.index=i,col.value&&!col.getText&&(col.getText=getColumnText)
var w=col.width
"string"==typeof w&&"%"==w.slice(-1)?(col.flex=parseInt(w,10)/100,col.$width=col.width):(col.width=parseInt(w,10)||this.minWidth,
fixedWidth+=col.width,col.$width=col.width+"px"),col.pixelWidth=0},this),columns.fixedWidth=fixedWidth,
columns.$fixedWidth=fixedWidth+"px",columns.width=null,provider.columns=columns}},this.updateWidth=function(width){
if(this.provider&&this.visible){var columns=this.provider.columns,fixedWidth=0
columns.width=width,columns.forEach(function(col){col.flex||(fixedWidth+=col.width)})
var flexWidth=width-fixedWidth
columns.forEach(function(col){col.flex?(col.pixelWidth=flexWidth*col.flex,col.$width=100*col.flex+"%"):(col.pixelWidth=col.width,
col.$width=col.width+"px")}),columns.fixedWidth=fixedWidth,columns.$fixedWidth=fixedWidth+"px"}},this.changeColumnWidth=function(changedColumn,dw,total){
this.updateWidth(total)
var columns=this.provider.columns,minWidth=this.minWidth
if(dw){for(var col,nextCol,prevCol,index=columns.indexOf(changedColumn),i=index+1;i<columns.length;i++)if(col=columns[i],
Math.floor(col.pixelWidth)>minWidth||dw<0){if(col.flex){nextCol=col
break}nextCol||(nextCol=col)}for(var i=index;i>=0;i--)if(col=columns[i],Math.floor(col.pixelWidth)>minWidth||dw>0){
if(col.flex){prevCol=col
break}if(!prevCol&&(prevCol=col,col==changedColumn))break}if(prevCol&&nextCol){nextCol.pixelWidth-dw<minWidth&&(dw=nextCol.pixelWidth-minWidth),
prevCol.pixelWidth+dw<minWidth&&(dw=minWidth-prevCol.pixelWidth),nextCol.pixelWidth-=dw,prevCol.pixelWidth+=dw,
nextCol.flex||(columns.fixedWidth-=dw),prevCol.flex||(columns.fixedWidth+=dw)
var flexWidth=total-columns.fixedWidth
columns.forEach(function(col){col.flex?col.flex=col.pixelWidth/flexWidth:col.width=col.pixelWidth}),this.updateWidth(total)

}}},this.findColumn=function(x){var columns=this.provider.columns
this.element.offsetWidth!=columns.width&&this.updateWidth(this.element.offsetWidth)
for(var w=0,i=0;i<columns.length;i++){var column=columns[i]
if(w+=column.pixelWidth,x<w+RESIZER_WIDTH)return{index:i,column:column,overResizer:x>w-RESIZER_WIDTH}

}}}).call(ColumnHeader.prototype),exports.ColumnHeader=ColumnHeader})


define("ace/lib/regexp",[],function(require,exports,module){"use strict"
function getNativeFlags(regex){return(regex.global?"g":"")+(regex.ignoreCase?"i":"")+(regex.multiline?"m":"")+(regex.extended?"x":"")+(regex.sticky?"y":"")

}function indexOf(array,item,from){if(Array.prototype.indexOf)return array.indexOf(item,from)
for(var i=from||0;i<array.length;i++)if(array[i]===item)return i
return-1}var real={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,
replace:String.prototype.replace,split:String.prototype.split},compliantExecNpcg=void 0===real.exec.call(/()??/,"")[1],compliantLastIndexIncrement=function(){
var x=/^/g
return real.test.call(x,""),!x.lastIndex}()
compliantLastIndexIncrement&&compliantExecNpcg||(RegExp.prototype.exec=function(str){var name,r2,match=real.exec.apply(this,arguments)


if("string"==typeof str&&match){if(!compliantExecNpcg&&match.length>1&&indexOf(match,"")>-1&&(r2=RegExp(this.source,real.replace.call(getNativeFlags(this),"g","")),
real.replace.call(str.slice(match.index),r2,function(){for(var i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(match[i]=void 0)

})),this._xregexp&&this._xregexp.captureNames)for(var i=1;i<match.length;i++)name=this._xregexp.captureNames[i-1],
name&&(match[name]=match[i])
!compliantLastIndexIncrement&&this.global&&!match[0].length&&this.lastIndex>match.index&&this.lastIndex--

}return match},compliantLastIndexIncrement||(RegExp.prototype.test=function(str){var match=real.exec.call(this,str)


return match&&this.global&&!match[0].length&&this.lastIndex>match.index&&this.lastIndex--,!!match}))})


define("ace/lib/es5-shim",[],function(require,exports,module){function Empty(){}function doesDefinePropertyWork(object){
try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){
return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){
var target=this
if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target)


var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)))


return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))

}
return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),
bound})
var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty)


if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),
defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),
lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){
var a=new Array(l+2)
return a[0]=a[1]=0,a}var lengthBefore,array=[]
if(array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,
array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length)return!0}()){var array_splice=Array.prototype.splice


Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]

}}else Array.prototype.splice=function(pos,removeCount){var length=this.length
pos>0?pos>length&&(pos=length):void 0==pos?pos=0:pos<0&&(pos=Math.max(length+pos,0)),pos+removeCount<length||(removeCount=length-pos)


var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length
if(pos===length)add&&this.push.apply(this,insert)
else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove


if(tailNewPos<tailOldPos)for(var i=0;i<tailCount;++i)this[tailNewPos+i]=this[tailOldPos+i]
else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i]
if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert)
else for(this.length=lengthAfterRemove+add,i=0;i<add;++i)this[pos+i]=insert[i]}return removed}
Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)})
var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString)
if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0


if("[object Function]"!=_toString(fun))throw new TypeError
for(;++i<length;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){
var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1]


if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function")
for(var i=0;i<length;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object))
return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1]


if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function")
for(var i=0;i<length;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value))


return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1]


if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function")
for(var i=0;i<length;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1
return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1]


if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function")
for(var i=0;i<length;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0
return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0


if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function")
if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value")
var result,i=0
if(arguments.length>=2)result=arguments[1]
else for(;;){if(i in self){result=self[i++]
break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;i<length;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object))


return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0


if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function")
if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value")


var result,i=length-1
if(arguments.length>=2)result=arguments[1]
else for(;;){if(i in self){result=self[i--]
break}if(--i<0)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object))
while(i--)
return result}),Array.prototype.indexOf&&[0,1].indexOf(1,2)==-1||(Array.prototype.indexOf=function(sought){
var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0


if(!length)return-1
var i=0
for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);i<length;i++)if(i in self&&self[i]===sought)return i


return-1}),Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)==-1||(Array.prototype.lastIndexOf=function(sought){
var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0


if(!length)return-1
var i=length-1
for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i


return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)

}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: "


Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object)


if(owns(object,property)){var descriptor,getter,setter
if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__
object.__proto__=prototypeOfObject
var getter=lookupGetter(object,property),setter=lookupSetter(object,property)
if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),
descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){
return Object.keys(object)}),!Object.create){var createEmpty
createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={}


for(var i in empty)empty[i]=null
return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,
empty},Object.create=function(prototype,properties){var object
if(null===prototype)object=createEmpty()
else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != 'object'")


var Type=function(){}
Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),
object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"))


if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty

}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine"


Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object)


if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor)


if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}
if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){
var prototype=object.__proto__
object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype

}else object[property]=descriptor.value
else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED)
owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)

}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property])


return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){
return object})
try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){
return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){
return object}),Object.isSealed||(Object.isSealed=function(object){return!1}),Object.isFrozen||(Object.isFrozen=function(object){
return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError


for(var name="";owns(object,name);)name+="?"
object[name]=!0
var returnValue=owns(object,name)
return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length


for(var key in{toString:null})hasDontEnumBug=!1
Object.keys=function keys(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object")


var keys=[]
for(var name in object)owns(object,name)&&keys.push(name)
if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;i<ii;i++){var dontEnum=dontEnums[i]
owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()

})
var ws="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"
if(!String.prototype.trim||ws.trim()){ws="["+ws+"]"
var trimBeginRegexp=new RegExp("^"+ws+ws+"*"),trimEndRegexp=new RegExp(ws+ws+"*$")
String.prototype.trim=function(){return String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")

}}var toObject=function(o){if(null==o)throw new TypeError("can't convert "+o+" to object")
return Object(o)}})


define("ace/lib/es6-shim",[],function(require,exports,module){function defineProp(obj,name,val){Object.defineProperty(obj,name,{
value:val,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||defineProp(String.prototype,"startsWith",function(searchString,position){
return position=position||0,this.lastIndexOf(searchString,position)===position}),String.prototype.endsWith||defineProp(String.prototype,"endsWith",function(searchString,position){
var subjectString=this;(void 0===position||position>subjectString.length)&&(position=subjectString.length),
position-=searchString.length
var lastIndex=subjectString.indexOf(searchString,position)
return lastIndex!==-1&&lastIndex===position}),String.prototype.repeat||defineProp(String.prototype,"repeat",function(count){
for(var result="",string=this;count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string)
return result}),String.prototype.includes||defineProp(String.prototype,"includes",function(str,position){
return this.indexOf(str,position!=-1)}),Object.assign||(Object.assign=function(target){if(void 0===target||null===target)throw new TypeError("Cannot convert undefined or null to object")


for(var output=Object(target),index=1;index<arguments.length;index++){var source=arguments[index]
void 0!==source&&null!==source&&Object.keys(source).forEach(function(key){output[key]=source[key]})}return output

})})


define("ace/lib/fixoldbrowsers",[],function(require,exports,module){"use strict"
require("./regexp"),require("./es5-shim"),require("./es6-shim")})


define("ace/lib/keys",[],function(require,exports,module){"use strict"
require("./fixoldbrowsers")
var oop=require("./oop"),Keys=function(){var name,i,ret={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",
224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{
8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",
37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",
99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",
112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",
123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",
54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",
74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",
89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",
220:"\\",221:"]",222:"'",111:"/",106:"*"}}
for(i in ret.FUNCTION_KEYS)name=ret.FUNCTION_KEYS[i].toLowerCase(),ret[name]=parseInt(i,10)
for(i in ret.PRINTABLE_KEYS)name=ret.PRINTABLE_KEYS[i].toLowerCase(),ret[name]=parseInt(i,10)
return oop.mixin(ret,ret.MODIFIER_KEYS),oop.mixin(ret,ret.PRINTABLE_KEYS),oop.mixin(ret,ret.FUNCTION_KEYS),
ret.enter=ret["return"],ret.escape=ret.esc,ret.del=ret["delete"],ret[173]="-",function(){for(var mods=["cmd","ctrl","alt","shift"],i=Math.pow(2,mods.length);i--;)ret.KEY_MODS[i]=mods.filter(function(x){
return i&ret.KEY_MODS[x]}).join("-")+"-"}(),ret.KEY_MODS[0]="",ret.KEY_MODS[-1]="input-",ret}()
oop.mixin(exports,Keys),exports.keyCodeToString=function(keyCode){var keyString=Keys[keyCode]
return"string"!=typeof keyString&&(keyString=String.fromCharCode(keyCode)),keyString.toLowerCase()}})


define("ace/lib/useragent",[],function(require,exports,module){"use strict"
if(exports.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},exports.getOS=function(){return exports.isMac?exports.OS.MAC:exports.isLinux?exports.OS.LINUX:exports.OS.WINDOWS

},"object"==typeof navigator){var os=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),ua=navigator.userAgent


exports.isWin="win"==os,exports.isMac="mac"==os,exports.isLinux="linux"==os,exports.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((ua.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((ua.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),
exports.isOldIE=exports.isIE&&exports.isIE<9,exports.isGecko=exports.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,
exports.isOldGecko=exports.isGecko&&parseInt((ua.match(/rv:(\d+)/)||[])[1],10)<4,exports.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),
exports.isWebKit=parseFloat(ua.split("WebKit/")[1])||void 0,exports.isChrome=parseFloat(ua.split(" Chrome/")[1])||void 0,
exports.isAIR=ua.indexOf("AdobeAIR")>=0,exports.isIPad=ua.indexOf("iPad")>=0,exports.isChromeOS=ua.indexOf(" CrOS ")>=0,
exports.isIOS=/iPad|iPhone|iPod/.test(ua)&&!window.MSStream,exports.isIOS&&(exports.isMac=!0)}})


define("ace/lib/event",[],function(require,exports,module){"use strict"
function normalizeCommandKeys(callback,e,keyCode){var hashId=getModifierHash(e)
if(!useragent.isMac&&pressedKeys){if(e.getModifierState&&(e.getModifierState("OS")||e.getModifierState("Win"))&&(hashId|=8),
pressedKeys.altGr){if(3==(3&hashId))return
pressedKeys.altGr=0}if(18===keyCode||17===keyCode){var location="location"in e?e.location:e.keyLocation


if(17===keyCode&&1===location)1==pressedKeys[keyCode]&&(ts=e.timeStamp)
else if(18===keyCode&&3===hashId&&2===location){var dt=e.timeStamp-ts
dt<50&&(pressedKeys.altGr=!0)}}}if(keyCode in keys.MODIFIER_KEYS&&(keyCode=-1),8&hashId&&keyCode>=91&&keyCode<=93&&(keyCode=-1),
!hashId&&13===keyCode){var location="location"in e?e.location:e.keyLocation
if(3===location&&(callback(e,hashId,-keyCode),e.defaultPrevented))return}if(useragent.isChromeOS&&8&hashId){
if(callback(e,hashId,keyCode),e.defaultPrevented)return
hashId&=-9}return!!(hashId||keyCode in keys.FUNCTION_KEYS||keyCode in keys.PRINTABLE_KEYS)&&callback(e,hashId,keyCode)

}function resetPressedKeys(){pressedKeys=Object.create(null)}var keys=require("./keys"),useragent=require("./useragent"),pressedKeys=null,ts=0


exports.addListener=function(elem,type,callback){if(elem.addEventListener)return elem.addEventListener(type,callback,!1)


if(elem.attachEvent){var wrapper=function(){callback.call(elem,window.event)}
callback._wrapper=wrapper,elem.attachEvent("on"+type,wrapper)}},exports.removeListener=function(elem,type,callback){
return elem.removeEventListener?elem.removeEventListener(type,callback,!1):void(elem.detachEvent&&elem.detachEvent("on"+type,callback._wrapper||callback))

},exports.stopEvent=function(e){return exports.stopPropagation(e),exports.preventDefault(e),!1},exports.stopPropagation=function(e){
e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},exports.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1

},exports.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||useragent.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{
1:0,2:2,4:1}[e.button]},exports.capture=function(el,eventHandler,releaseCaptureHandler){function onMouseUp(e){
eventHandler&&eventHandler(e),releaseCaptureHandler&&releaseCaptureHandler(e),exports.removeListener(document,"mousemove",eventHandler,!0),
exports.removeListener(document,"mouseup",onMouseUp,!0),exports.removeListener(document,"dragstart",onMouseUp,!0)

}return exports.addListener(document,"mousemove",eventHandler,!0),exports.addListener(document,"mouseup",onMouseUp,!0),
exports.addListener(document,"dragstart",onMouseUp,!0),onMouseUp},exports.addTouchMoveListener=function(el,callback){
if("ontouchmove"in el){var startx,starty
exports.addListener(el,"touchstart",function(e){var touchObj=e.changedTouches[0]
startx=touchObj.clientX,starty=touchObj.clientY}),exports.addListener(el,"touchmove",function(e){var factor=1,touchObj=e.changedTouches[0]


e.wheelX=-(touchObj.clientX-startx)/factor,e.wheelY=-(touchObj.clientY-starty)/factor,startx=touchObj.clientX,
starty=touchObj.clientY,callback(e)})}},exports.addMouseWheelListener=function(el,callback){"onmousewheel"in el?exports.addListener(el,"mousewheel",function(e){
var factor=8
void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/factor,e.wheelY=-e.wheelDeltaY/factor):(e.wheelX=0,e.wheelY=-e.wheelDelta/factor),
callback(e)}):"onwheel"in el?exports.addListener(el,"wheel",function(e){var factor=.35
switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*factor||0,e.wheelY=e.deltaY*factor||0
break
case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}callback(e)

}):exports.addListener(el,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),
e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),callback(e)})},exports.addMultiMouseDownListener=function(elements,timeouts,eventHandler,callbackName){
function onMousedown(e){if(0!==exports.getButton(e)?clicks=0:e.detail>1?(clicks++,clicks>4&&(clicks=1)):clicks=1,
useragent.isIE){var isNewClick=Math.abs(e.clientX-startX)>5||Math.abs(e.clientY-startY)>5
timer&&!isNewClick||(clicks=1),timer&&clearTimeout(timer),timer=setTimeout(function(){timer=null},timeouts[clicks-1]||600),
1==clicks&&(startX=e.clientX,startY=e.clientY)}if(e._clicks=clicks,eventHandler[callbackName]("mousedown",e),
clicks>4)clicks=0
else if(clicks>1)return eventHandler[callbackName](eventNames[clicks],e)}function onDblclick(e){clicks=2,
timer&&clearTimeout(timer),timer=setTimeout(function(){timer=null},timeouts[clicks-1]||600),eventHandler[callbackName]("mousedown",e),
eventHandler[callbackName](eventNames[clicks],e)}var startX,startY,timer,clicks=0,eventNames={2:"dblclick",
3:"tripleclick",4:"quadclick"}
Array.isArray(elements)||(elements=[elements]),elements.forEach(function(el){exports.addListener(el,"mousedown",onMousedown),
useragent.isOldIE&&exports.addListener(el,"dblclick",onDblclick)})}
var getModifierHash=!useragent.isMac||!useragent.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)

}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)}
if(exports.getModifierString=function(e){return keys.KEY_MODS[getModifierHash(e)]},exports.addCommandKeyListener=function(el,callback){
var addListener=exports.addListener
if(useragent.isOldGecko||useragent.isOpera&&!("KeyboardEvent"in window)){var lastKeyDownKeyCode=null
addListener(el,"keydown",function(e){lastKeyDownKeyCode=e.keyCode}),addListener(el,"keypress",function(e){
return normalizeCommandKeys(callback,e,lastKeyDownKeyCode)})}else{var lastDefaultPrevented=null
addListener(el,"keydown",function(e){pressedKeys[e.keyCode]=(pressedKeys[e.keyCode]||0)+1
var result=normalizeCommandKeys(callback,e,e.keyCode)
return lastDefaultPrevented=e.defaultPrevented,result}),addListener(el,"keypress",function(e){lastDefaultPrevented&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(exports.stopEvent(e),
lastDefaultPrevented=null)}),addListener(el,"keyup",function(e){pressedKeys[e.keyCode]=null}),pressedKeys||(resetPressedKeys(),
addListener(window,"focus",resetPressedKeys))}},"object"==typeof window&&window.postMessage&&!useragent.isOldIE){
var postMessageId=1
exports.nextTick=function(callback,win){win=win||window
var messageName="zero-timeout-message-"+postMessageId
exports.addListener(win,"message",function listener(e){e.data==messageName&&(exports.stopPropagation(e),
exports.removeListener(win,"message",listener),callback())}),win.postMessage(messageName,"*")}}exports.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),
exports.nextFrame?exports.nextFrame=exports.nextFrame.bind(window):exports.nextFrame=function(callback){
setTimeout(callback,17)}})


define("ace/scrollbar",[],function(require,exports,module){"use strict"
var oop=require("./lib/oop"),dom=require("./lib/dom"),event=require("./lib/event"),EventEmitter=require("./lib/event_emitter").EventEmitter,MAX_SCROLL_H=32768,ScrollBar=function(parent){
this.element=dom.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,
this.inner=dom.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),
parent.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,event.addListener(this.element,"scroll",this.onScroll.bind(this)),
event.addListener(this.element,"mousedown",event.preventDefault)};(function(){oop.implement(this,EventEmitter),
this.setVisible=function(isVisible){this.element.style.display=isVisible?"":"none",this.isVisible=isVisible,
this.coeff=1}}).call(ScrollBar.prototype)
var VScrollBar=function(parent,renderer){ScrollBar.call(this,parent),this.scrollTop=0,this.scrollHeight=0,
renderer.$scrollbarWidth=this.width=dom.scrollbarWidth(parent.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",
this.$minWidth=0}
oop.inherits(VScrollBar,ScrollBar),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){
if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var h=this.element.clientHeight/this.scrollHeight


this.scrollTop=this.scrollTop*(1-h)/(this.coeff-h)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1

},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(height){
this.element.style.height=height+"px"},this.setInnerHeight=this.setScrollHeight=function(height){this.scrollHeight=height,
height>MAX_SCROLL_H?(this.coeff=MAX_SCROLL_H/height,height=MAX_SCROLL_H):1!=this.coeff&&(this.coeff=1),
this.inner.style.height=height+"px"},this.setScrollTop=function(scrollTop){this.scrollTop!=scrollTop&&(this.skipEvent=!0,
this.scrollTop=scrollTop,this.element.scrollTop=scrollTop*this.coeff)}}.call(VScrollBar.prototype)
var HScrollBar=function(parent,renderer){ScrollBar.call(this,parent),this.scrollLeft=0,this.height=renderer.$scrollbarWidth,
this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"}
oop.inherits(HScrollBar,ScrollBar),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,
this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0

},this.setWidth=function(width){this.element.style.width=width+"px"},this.setInnerWidth=function(width){
this.inner.style.width=width+"px"},this.setScrollWidth=function(width){this.inner.style.width=width+"px"

},this.setScrollLeft=function(scrollLeft){this.scrollLeft!=scrollLeft&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=scrollLeft)

}}.call(HScrollBar.prototype),exports.ScrollBar=VScrollBar,exports.ScrollBarV=VScrollBar,exports.ScrollBarH=HScrollBar,
exports.VScrollBar=VScrollBar,exports.HScrollBar=HScrollBar})


define("ace/renderloop",[],function(require,exports,module){"use strict"
var event=require("./lib/event"),RenderLoop=function(onRender,win){this.onRender=onRender,this.pending=!1,
this.changes=0,this.window=win||window};(function(){this.schedule=function(change){if(this.changes=this.changes|change,
!this.pending&&this.changes){this.pending=!0
var _self=this
event.nextFrame(function(){_self.pending=!1
for(var changes;changes=_self.changes;)_self.changes=0,_self.onRender(changes)},this.window)}}}).call(RenderLoop.prototype),
exports.RenderLoop=RenderLoop})


define("ace/requirejs/text!ace_tree/css/tree.css",[],"")


define("ace/requirejs/text!ace_tree/css/light_theme.css",[],"")


define("ace_tree/css/light_theme",[],function(require,exports,module){exports.isDark=!1,exports.cssClass="ace_tree-light",
exports.cssText=require("ace/requirejs/text!./light_theme.css")
var dom=require("ace/lib/dom")
dom.importCssString(exports.cssText,exports.cssClass)})


define("ace_tree/virtual_renderer",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),dom=require("ace/lib/dom"),config=require("./config"),CellLayer=require("./layer/cells").Cells,MarkerLayer=require("./layer/markers").Selection,HeaderLayer=require("./layer/heading").ColumnHeader,ScrollBarH=require("ace/scrollbar").ScrollBarH,ScrollBarV=require("ace/scrollbar").ScrollBarV,RenderLoop=require("ace/renderloop").RenderLoop,EventEmitter=require("ace/lib/event_emitter").EventEmitter,pivotCss=require("ace/requirejs/text!./css/tree.css")


dom.importCssString(pivotCss,"ace_tree")
var defaultTheme=require("./css/light_theme"),VirtualRenderer=function(container,cellWidth,cellHeight){
var _self=this
this.container=container||dom.createElement("div"),dom.addCssClass(this.container,"ace_tree"),dom.addCssClass(this.container,"ace_tree"),
this.setTheme(this.$theme),this.scroller=dom.createElement("div"),this.scroller.className="ace_tree_scroller",
this.container.appendChild(this.scroller),this.cells=dom.createElement("div"),this.cells.className="ace_tree_cells",
this.scroller.appendChild(this.cells),this.$headingLayer=new HeaderLayer(this.container,this),this.$markerLayer=new MarkerLayer(this.cells,this),
this.$cellLayer=new CellLayer(this.cells),this.canvas=this.$cellLayer.element,this.$horizScroll=!1,this.scrollBarV=new ScrollBarV(this.container,this),
this.scrollBarV.setVisible(!0),this.scrollBarV.addEventListener("scroll",function(e){_self.$inScrollAnimation||_self.setScrollTop(e.data-_self.scrollMargin.top)

}),this.scrollBarH=new ScrollBarH(this.container,this),this.scrollBarH.addEventListener("scroll",function(e){
_self.$inScrollAnimation||_self.setScrollLeft(e.data)}),this.scrollTop=0,this.scrollLeft=0,this.caretPos={
row:0,column:0},this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,headingHeight:0},this.layerConfig={
width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:1,characterWidth:1,minHeight:1,maxHeight:1,
offset:0,height:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$scrollIntoView=null,
this.$loop=new RenderLoop(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),
this.setTheme(defaultTheme),this.$windowFocus=this.$windowFocus.bind(this),window.addEventListener("focus",this.$windowFocus)

};(function(){this.CHANGE_SCROLL=1,this.CHANGE_COLUMN=2,this.CHANGE_ROW=4,this.CHANGE_CELLS=8,this.CHANGE_SIZE=16,
this.CHANGE_CLASS=32,this.CHANGE_MARKER=64,this.CHANGE_FULL=128,this.CHANGE_H_SCROLL=1024,oop.implement(this,EventEmitter),
this.setDataProvider=function(provider){this.provider=provider,this.model=provider,this.scrollMargin.top&&provider&&provider.getScrollTop()<=0&&provider.setScrollTop(-this.scrollMargin.top),
this.scroller.className="ace_tree_scroller",this.$cellLayer.setDataProvider(provider),this.$markerLayer.setDataProvider(provider),
this.$headingLayer.setDataProvider(provider),this.$size.headingHeight=provider&&provider.columns?provider.headerHeight||provider.rowHeight:0,
this.$loop.schedule(this.CHANGE_FULL)},this.updateRows=function(firstRow,lastRow){void 0===lastRow&&(lastRow=1/0),
this.$changedLines?(this.$changedLines.firstRow>firstRow&&(this.$changedLines.firstRow=firstRow),this.$changedLines.lastRow<lastRow&&(this.$changedLines.lastRow=lastRow)):this.$changedLines={
firstRow:firstRow,lastRow:lastRow},this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow||this.$loop.schedule(this.CHANGE_ROW)

},this.updateCaret=function(){this.$loop.schedule(this.CHANGE_CLASS)},this.updateCells=function(){this.$loop.schedule(this.CHANGE_CELLS)

},this.updateFull=function(force){force?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)

},this.updateHorizontalHeadings=function(){this.$loop.schedule(this.CHANGE_COLUMN)},this.updateVerticalHeadings=function(){
this.$loop.schedule(this.CHANGE_ROW)},this.$changes=0,this.onResize=function(force,width,height){if(!(this.resizing>2)){
this.resizing>0?this.resizing++:this.resizing=force?1:0
var el=this.container
height||(height=el.clientHeight||el.scrollHeight),width||(width=el.clientWidth||el.scrollWidth)
var changes=this.$updateCachedSize(force,width,height)
if(!this.$size.scrollerHeight||!width&&!height)return this.resizing=0
force?this.$renderChanges(changes,!0):this.$loop.schedule(changes|this.$changes),this.resizing&&(this.resizing=0)

}},this.$windowFocus=function(){this.onResize()},this.$updateCachedSize=function(force,width,height){
var changes=0,size=this.$size,provider=this.provider
if(provider){var headingHeight=provider.columns?provider.headerHeight||provider.rowHeight:0
headingHeight!=size.headingHeight&&(size.headingHeight=headingHeight,changes|=this.CHANGE_SIZE)}return height&&(force||size.height!=height)&&(size.height=height,
changes|=this.CHANGE_SIZE,size.scrollerHeight=size.height,this.$horizScroll&&(size.scrollerHeight-=this.scrollBarH.getHeight()),
size.scrollerHeight-=size.headingHeight,this.$headingLayer.element.style.height=this.scroller.style.top=this.scrollBarV.element.style.top=size.headingHeight+"px",
this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",provider&&provider.setScrollTop&&(changes|=this.CHANGE_SCROLL),
this.$scrollIntoView&&this.$scrollIntoView.model==this.model&&(this.scrollCaretIntoView(this.$scrollIntoView.caret,this.$scrollIntoView.offset),
this.$scrollIntoView=null)),width&&(force||size.width!=width)&&(changes|=this.CHANGE_SIZE,size.width=width,
this.scrollBarH.element.style.left=this.scroller.style.left="0px",size.scrollerWidth=Math.max(0,width-this.scrollBarV.getWidth()),
this.$headingLayer.element.style.right=this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",
this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",this.$headingLayer.updateWidth(size.scrollerWidth),
provider&&provider.columns&&(changes|=this.CHANGE_FULL)),changes&&this._signal("resize"),changes},this.setVerHeadingVisible=function(value){
this.$treeLayer.visible=value,this.layerConfig.vRange&&this.layerConfig.hRange&&(this.$renderChanges(this.CHANGE_FULL,!0),
this.onResize(!0))},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){
return this.scroller},this.getVisibleNodes=function(tolerance){for(var nodes=this.layerConfig.vRange,first=0,last=nodes.length-1;this.isNodeVisible(nodes[first],tolerance)&&first<last;)first++


for(;!this.isNodeVisible(nodes[last],tolerance)&&last>first;)last--
return nodes.slice(first,last+1)},this.isNodeVisible=function(node,tolerance){var layerConfig=this.layerConfig


if(layerConfig.vRange){var provider=this.provider,i=layerConfig.vRange.indexOf(node)
if(i==-1)return!1
var nodePos=provider.getNodePosition(node),top=nodePos.top,height=nodePos.height
return void 0===tolerance&&(tolerance=1/3),!(this.scrollTop>top+tolerance*height)&&!(this.scrollTop+this.$size.scrollerHeight<=top+(1-tolerance)*height)

}},this.$updateScrollBar=function(){this.$updateScrollBarH(),this.$updateScrollBarV()},this.setScrollMargin=function(top,bottom,left,right){
var sm=this.scrollMargin
sm.top=0|top,sm.bottom=0|bottom,sm.right=0|right,sm.left=0|left,sm.v=sm.top+sm.bottom,sm.h=sm.left+sm.right,
sm.top&&this.scrollTop<=0&&this.provider&&this.provider.setScrollTop(-sm.top),this.updateFull()},this.$updateScrollBarV=function(){
this.scrollBarV.setInnerHeight(this.layerConfig.maxHeight+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)

},this.$updateScrollBarH=function(){this.scrollBarH.setInnerWidth(this.layerConfig.maxWidth+this.scrollMargin.h),
this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){
this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(changes,force){
if(this.$changes&&(changes|=this.$changes,this.$changes=0),!this.provider||!this.container.offsetWidth||this.$frozen||!changes&&!force)return void(this.$changes|=changes)


if(!this.$size.width)return this.$changes|=changes,this.onResize(!0)
this._signal("beforeRender")
var config=this.layerConfig
return(changes&this.CHANGE_FULL||changes&this.CHANGE_SIZE||changes&this.CHANGE_SCROLL||changes&this.CHANGE_H_SCROLL||changes&this.CHANGE_COLUMN||changes&this.CHANGE_ROW||changes&this.CHANGE_CELLS)&&(changes|=this.$computeLayerConfig(),
config=this.layerConfig,this.$updateScrollBar(),this.cells.style.marginTop=-config.vOffset+"px",this.cells.style.marginLeft=-config.hOffset+"px",
this.cells.style.width=config.width+"px",this.cells.style.height=config.height+config.rowHeight+"px"),
changes&this.CHANGE_FULL?(this.$headingLayer.update(this.layerConfig),this.$cellLayer.update(this.layerConfig),
this.$markerLayer.update(this.layerConfig),void this._signal("afterRender")):changes&this.CHANGE_SCROLL?(changes&this.CHANGE_ROW||changes&this.CHANGE_COLUMN||changes&this.CHANGE_CELLS?(this.$headingLayer.update(this.layerConfig),
this.$cellLayer.update(this.layerConfig)):(this.$headingLayer.update(this.layerConfig),this.$cellLayer.scroll(this.layerConfig)),
this.$markerLayer.update(this.layerConfig),this.$updateScrollBar(),void this._signal("afterRender")):(changes&this.CHANGE_CLASS&&this.$cellLayer.updateClasses(this.layerConfig),
(changes&this.CHANGE_MARKER||changes&this.CHANGE_CELLS)&&this.$markerLayer.update(this.layerConfig),changes&this.CHANGE_COLUMN&&this.$horHeadingLayer.update(this.layerConfig),
changes&this.CHANGE_CELLS&&this.$cellLayer.update(this.layerConfig),changes&this.CHANGE_SIZE&&this.$updateScrollBar(),
this._signal("afterRender"),void(this.$scrollIntoView&&(this.$scrollIntoView=null)))},this.$autosize=function(){
var headingHeight=this.$size.headingHeight,height=this.provider.getTotalHeight()+headingHeight,maxHeight=this.getMaxHeight?this.getMaxHeight():this.$maxLines*this.provider.rowHeight+headingHeight,desiredHeight=Math.max((this.$minLines||1)*this.provider.rowHeight+headingHeight,Math.min(maxHeight,height))+this.scrollMargin.v,vScroll=height>maxHeight


if(desiredHeight!=this.desiredHeight||this.$size.height!=this.desiredHeight||vScroll!=this.$vScroll){
vScroll!=this.$vScroll&&(this.$vScroll=vScroll,this.scrollBarV.setVisible(vScroll))
var w=this.container.clientWidth
this.container.style.height=desiredHeight+"px",this.$updateCachedSize(!0,w,desiredHeight),this.desiredHeight=desiredHeight,
this._signal("autoresize")}},this.$computeLayerConfig=function(){this.$maxLines&&this.$autosize()
var provider=this.provider,minHeight=(this.$treeLayer,this.$horHeadingLayer,this.$size.scrollerHeight),maxHeight=provider.getTotalHeight(),minWidth=this.$size.scrollerWidth,maxWidth=0,hideScrollbars=this.$size.height<=20,horizScroll=!hideScrollbars&&(this.$hScrollBarAlwaysVisible||this.$size.scrollerWidth-maxWidth<0),hScrollChanged=this.$horizScroll!==horizScroll


hScrollChanged&&(this.$horizScroll=horizScroll,this.scrollBarH.setVisible(horizScroll))
var vScroll=!hideScrollbars&&(this.$vScrollBarAlwaysVisible||this.$size.scrollerHeight-maxHeight<0),vScrollChanged=this.$vScroll!==vScroll


vScrollChanged&&(this.$vScroll=vScroll,this.scrollBarV.setVisible(vScroll)),this.provider.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,maxHeight-this.$size.scrollerHeight+this.scrollMargin.bottom))),
this.provider.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,maxWidth-this.$size.scrollerWidth+this.scrollMargin.right))),
this.provider.getScrollTop()!=this.scrollTop&&(this.scrollTop=this.provider.getScrollTop())
var top=Math.max(this.scrollTop,0),vRange=provider.getRange(top,top+this.$size.height),hRange={size:0
},vOffset=this.scrollTop-vRange.size,hOffset=this.scrollLeft-hRange.size,rowCount=vRange.length,firstRow=vRange.count,lastRow=firstRow+rowCount-1,colCount=hRange.length,firstCol=hRange.count,lastCol=firstCol+colCount-1


this.layerConfig&&(this.layerConfig.discard=!0)
var changes=0;(hScrollChanged||vScrollChanged)&&(changes=this.$updateCachedSize(!0,this.$size.width,this.$size.height),
this._signal("scrollbarVisibilityChanged")),this.layerConfig={vRange:vRange,hRange:hRange,width:minWidth,
height:minHeight,firstRow:firstRow,lastRow:lastRow,firstCol:firstCol,lastCol:lastCol,minHeight:minHeight,
maxHeight:maxHeight,minWidth:minWidth,maxWidth:maxWidth,vOffset:vOffset,hOffset:hOffset,rowHeight:provider.rowHeight
}
var config=this.layerConfig,renderer=this
return vRange&&(config.view=provider.getDataRange({start:vRange.count,length:vRange.length},{start:hRange.count,
length:hRange.length},function(err,view,update){return!err&&(config.view=view,void(update&&renderer.$loop.schedule(renderer.CHANGE_CELLS)))

})),changes},this.$updateRows=function(){var firstRow=this.$changedLines.firstRow,lastRow=this.$changedLines.lastRow


this.$changedLines=null
var layerConfig=this.layerConfig
if(!(firstRow>layerConfig.lastRow+1||lastRow<layerConfig.firstRow))return lastRow===1/0?void this.$cellLayer.update(layerConfig):(this.$cellLayer.updateRows(layerConfig,firstRow,lastRow),
!0)},this.scrollSelectionIntoView=function(anchor,lead,offset){this.scrollCaretIntoView(anchor,offset),
this.scrollCaretIntoView(lead,offset)},this.scrollCaretIntoView=function(caret,offset){if(this.$scrollIntoView={
caret:caret,offset:offset,scrollTop:this.scrollTop,model:this.model,height:this.$size.scrollerHeight},
0!==this.$size.scrollerHeight){var provider=this.provider,node=caret||provider.selection.getCursor()
if(node){var nodePos=provider.getNodePosition(node),top=nodePos.top,height=nodePos.height,left=0,width=0


this.scrollTop>top?(offset&&(top-=offset*this.$size.scrollerHeight),0===top&&(top=-this.scrollMargin.top),
this.provider.setScrollTop(top)):this.scrollTop+this.$size.scrollerHeight<top+height&&(offset&&(top+=offset*this.$size.scrollerHeight),
this.provider.setScrollTop(top+height-this.$size.scrollerHeight))
var scrollLeft=this.scrollLeft
scrollLeft>left?(left<0&&(left=0),this.provider.setScrollLeft(left)):scrollLeft+this.$size.scrollerWidth<left+width&&this.provider.setScrollLeft(Math.round(left+width-this.$size.scrollerWidth)),
this.$scrollIntoView.scrollTop=this.scrollTop}}},this.getScrollTop=function(){return this.scrollTop},
this.getScrollLeft=function(){return this.scrollLeft},this.setScrollTop=function(scrollTop){scrollTop=Math.round(scrollTop),
this.scrollTop===scrollTop||isNaN(scrollTop)||this.scrollToY(scrollTop)},this.setScrollLeft=function(scrollLeft){
scrollLeft=Math.round(scrollLeft),this.scrollLeft===scrollLeft||isNaN(scrollLeft)||this.scrollToX(scrollLeft)

},this.getScrollTopRow=function(){return this.layerConfig.firstRow},this.getScrollBottomRow=function(){
return this.layerConfig.lastRow},this.alignCaret=function(cursor,alignment){"number"==typeof cursor&&(cursor={
row:cursor,column:0})
var node=this.provider.findNodeByIndex(cursor.row),pos=this.provider.findSizeAtIndex(cursor.row),h=this.$size.scrollerHeight,offset=pos-(h-node.size)*(alignment||0)


return this.setScrollTop(offset),offset},this.STEPS=8,this.$calcSteps=function(fromValue,toValue){var i=0,l=this.STEPS,steps=[],func=function(t,x_min,dx){
return dx*(Math.pow(t-1,3)+1)+x_min}
for(i=0;i<l;++i)steps.push(func(i/this.STEPS,fromValue,toValue-fromValue))
return steps},this.scrollToRow=function(row,center,animate,callback){var node=this.provider.findNodeByIndex(row),offset=this.provider.findSizeAtIndex(row)


center&&(offset-=(this.$size.scrollerHeight-node.size)/2)
var initialScroll=this.scrollTop
this.setScrollTop(offset),animate!==!1&&this.animateScrolling(initialScroll,callback)},this.animateScrolling=function(fromValue,callback){
var toValue=this.scrollTop
if(this.$animatedScroll){var _self=this
if(fromValue!=toValue){if(this.$scrollAnimation){var oldSteps=this.$scrollAnimation.steps
if(oldSteps.length&&(fromValue=oldSteps[0],fromValue==toValue))return}var steps=_self.$calcSteps(fromValue,toValue)


this.$scrollAnimation={from:fromValue,to:toValue,steps:steps},clearInterval(this.$timer),_self.provider.setScrollTop(steps.shift()),
_self.provider.$scrollTop=toValue,this.$timer=setInterval(function(){steps.length?(_self.provider.setScrollTop(steps.shift()),
_self.provider.$scrollTop=toValue):null!=toValue?(_self.provider.$scrollTop=-1,_self.provider.setScrollTop(toValue),
toValue=null):(_self.$timer=clearInterval(_self.$timer),_self.$scrollAnimation=null,callback&&callback())

},10)}}},this.scrollToY=function(scrollTop){this.scrollTop!==scrollTop&&(this.$loop.schedule(this.CHANGE_SCROLL),
this.scrollTop=scrollTop)},this.scrollToX=function(scrollLeft){scrollLeft<0&&(scrollLeft=0),this.scrollLeft!==scrollLeft&&(this.$loop.schedule(this.CHANGE_SCROLL),
this.scrollLeft=scrollLeft)},this.scrollBy=function(deltaX,deltaY){deltaY&&this.provider.setScrollTop(this.provider.getScrollTop()+deltaY),
deltaX&&this.provider.setScrollLeft(this.provider.getScrollLeft()+deltaX)},this.isScrollableBy=function(deltaX,deltaY){
return deltaY<0&&this.getScrollTop()>=1-this.scrollMargin.top||(deltaY>0&&this.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(deltaX<0&&this.getScrollLeft()>=1||(deltaX>0&&this.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.maxWidth<-1||void 0)))

},this.screenToTextCoordinates=function(x,y){var canvasPos=this.scroller.getBoundingClientRect()
return y-=canvasPos.top,x-=canvasPos.left,{x:x+this.scrollLeft,y:y+this.scrollTop}},this.textToScreenCoordinates=function(row,column){
throw new Error},this.findNodeAt=function(x,y,coords){},this.$moveTextAreaToCursor=function(){},this.visualizeFocus=function(){
dom.addCssClass(this.container,"ace_tree_focus")},this.visualizeBlur=function(){dom.removeCssClass(this.container,"ace_tree_focus")

},this.setTheme=function(theme,cb){function afterLoad(module){if(_self.$themeValue!=theme)return cb&&cb()


if(module.cssClass){dom.importCssString(module.cssText,module.cssClass,_self.container.ownerDocument),
_self.theme&&dom.removeCssClass(_self.container,_self.theme.cssClass),_self.$theme=module.cssClass,_self.theme=module,
dom.addCssClass(_self.container,module.cssClass),dom.setCssClass(_self.container,"ace_dark",module.isDark)


var padding=module.padding||4
_self.$padding&&padding!=_self.$padding&&_self.setPadding(padding),_self.$size&&(_self.$size.width=0,
_self.onResize()),_self._dispatchEvent("themeLoaded",{theme:module}),cb&&cb()}}var _self=this
if(this.$themeValue=theme,_self._dispatchEvent("themeChange",{theme:theme}),theme&&"string"!=typeof theme)afterLoad(theme)
else{var moduleName=theme||"ace/theme/textmate"
config.loadModule(["theme",moduleName],afterLoad)}},this.getTheme=function(){return this.$themeValue},
this.setStyle=function(style,include){dom.setCssClass(this.container,style,include!==!1)},this.unsetStyle=function(style){
dom.removeCssClass(this.container,style)},this.destroy=function(){window.removeEventListener("focus",this.$windowFocus),
this.$cellLayer.destroy()}}).call(VirtualRenderer.prototype),config.defineOptions(VirtualRenderer.prototype,"renderer",{
animatedScroll:{initialValue:!0},showInvisibles:{set:function(value){this.$cellLayer.setShowInvisibles(value)&&this.$loop.schedule(this.CHANGE_TEXT)

},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{
set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(val){"number"==typeof val&&(this.$printMarginColumn=val),
this.$showPrintMargin=!!val,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn

}},displayIndentGuides:{set:function(show){this.$cellLayer.setDisplayIndentGuides(show)&&this.$loop.schedule(this.CHANGE_TEXT)

},initialValue:!0},hScrollBarAlwaysVisible:{set:function(alwaysVisible){this.$hScrollBarAlwaysVisible=alwaysVisible,
this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1
},vScrollBarAlwaysVisible:{set:function(val){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)

},initialValue:!1},fontSize:{set:function(size){"number"==typeof size&&(size+="px"),this.container.style.fontSize=size,
this.updateFontSize()},initialValue:12},fontFamily:{set:function(name){this.container.style.fontFamily=name,
this.updateFontSize()}},maxLines:{set:function(val){this.updateFull()}},minLines:{set:function(val){this.updateFull()

}},scrollPastEnd:{set:function(val){val=+val||0,this.$scrollPastEnd!=val&&(this.$scrollPastEnd=val,this.$loop.schedule(this.CHANGE_SCROLL))

},initialValue:0,handlesSet:!0}}),exports.VirtualRenderer=VirtualRenderer})


define("ace/keyboard/textinput_ios",[],function(require,exports,module){"use strict"
var event=require("../lib/event"),useragent=require("../lib/useragent"),dom=require("../lib/dom"),lang=require("../lib/lang"),KEYS=require("../lib/keys"),MODS=KEYS.KEY_MODS,BROKEN_SETDATA=useragent.isChrome<18,USE_IE_MIME_TYPE=useragent.isIE,TextInput=function(parentNode,host){
function resetSelection(isEmpty){if(!inComposition){if(inComposition=!0,inputHandler)selectionStart=0,
selectionEnd=isEmpty?0:text.value.length-1
else var selectionStart=4,selectionEnd=5
try{text.setSelectionRange(selectionStart,selectionEnd)}catch(e){}inComposition=!1}}function resetValue(){
inComposition||(text.value=PLACEHOLDER,useragent.isWebKit&&syncValue.schedule())}function onContextMenuClose(){
clearTimeout(closeTimeout),closeTimeout=setTimeout(function(){tempStyle&&(text.style.cssText=tempStyle,
tempStyle=""),null==host.renderer.$keepTextAreaAtCursor&&(host.renderer.$keepTextAreaAtCursor=!0,host.renderer.$moveTextAreaToCursor())

},0)}var text=dom.createElement("textarea")
text.className=useragent.isIOS?"ace_text-input ace_text-input-ios":"ace_text-input",useragent.isTouchPad&&text.setAttribute("x-palm-disable-auto-cap",!0),
text.setAttribute("wrap","off"),text.setAttribute("autocorrect","off"),text.setAttribute("autocapitalize","off"),
text.setAttribute("spellcheck",!1),text.style.opacity="0",parentNode.insertBefore(text,parentNode.firstChild)


var PLACEHOLDER="\n aaaa a\n",copied=!1,cut=!1,pasted=!1,inComposition=!1,tempStyle="",isSelectionEmpty=!0


try{var isFocused=document.activeElement===text}catch(e){}event.addListener(text,"blur",function(e){host.onBlur(e),
isFocused=!1}),event.addListener(text,"focus",function(e){isFocused=!0,host.onFocus(e),resetSelection()

}),this.focus=function(){return tempStyle?text.focus():(text.style.position="fixed",void text.focus())

},this.blur=function(){text.blur()},this.isFocused=function(){return isFocused}
var syncSelection=lang.delayedCall(function(){isFocused&&resetSelection(isSelectionEmpty)}),syncValue=lang.delayedCall(function(){
inComposition||(text.value=PLACEHOLDER,isFocused&&resetSelection())})
useragent.isWebKit||host.addEventListener("changeSelection",function(){host.selection.isEmpty()!=isSelectionEmpty&&(isSelectionEmpty=!isSelectionEmpty,
syncSelection.schedule())}),resetValue(),isFocused&&host.onFocus()
var isAllSelected=function(text){return 0===text.selectionStart&&text.selectionEnd===text.value.length

},onSelect=function(e){isAllSelected(text)?(host.selectAll(),resetSelection()):inputHandler&&resetSelection(host.selection.isEmpty())

},inputHandler=null
this.setInputHandler=function(cb){inputHandler=cb},this.getInputHandler=function(){return inputHandler

}
var afterContextMenu=!1,sendText=function(data){4===text.selectionStart&&5===text.selectionEnd||(inputHandler&&(data=inputHandler(data),
inputHandler=null),pasted?(resetSelection(),data&&host.onPaste(data),pasted=!1):data==PLACEHOLDER.substr(0)&&4===text.selectionStart?afterContextMenu?host.execCommand("del",{
source:"ace"}):host.execCommand("backspace",{source:"ace"}):copied||(data.substring(0,9)==PLACEHOLDER&&data.length>PLACEHOLDER.length?data=data.substr(9):data.substr(0,4)==PLACEHOLDER.substr(0,4)?data=data.substr(4,data.length-PLACEHOLDER.length+1):data.charAt(data.length-1)==PLACEHOLDER.charAt(0)&&(data=data.slice(0,-1)),
data==PLACEHOLDER.charAt(0)||data.charAt(data.length-1)==PLACEHOLDER.charAt(0)&&(data=data.slice(0,-1)),
data&&host.onTextInput(data)),copied&&(copied=!1),afterContextMenu&&(afterContextMenu=!1))},onInput=function(e){
if(!inComposition){var data=text.value
sendText(data),resetValue()}},handleClipboardData=function(e,data,forceIEMime){var clipboardData=e.clipboardData||window.clipboardData


if(clipboardData&&!BROKEN_SETDATA){var mime=USE_IE_MIME_TYPE||forceIEMime?"Text":"text/plain"
try{return data?clipboardData.setData(mime,data)!==!1:clipboardData.getData(mime)}catch(e){if(!forceIEMime)return handleClipboardData(e,data,!0)

}}},doCopy=function(e,isCut){var data=host.getCopyText()
return data?void(handleClipboardData(e,data)?(useragent.isIOS&&(cut=isCut,text.value="\n aa"+data+"a a\n",
text.setSelectionRange(4,4+data.length),copied={value:data}),isCut?host.onCut():host.onCopy(),useragent.isIOS||event.preventDefault(e)):(copied=!0,
text.value=data,text.select(),setTimeout(function(){copied=!1,resetValue(),resetSelection(),isCut?host.onCut():host.onCopy()

}))):event.preventDefault(e)},onCut=function(e){doCopy(e,!0)},onCopy=function(e){doCopy(e,!1)},onPaste=function(e){
var data=handleClipboardData(e)
"string"==typeof data?(data&&host.onPaste(data,e),useragent.isIE&&setTimeout(resetSelection),event.preventDefault(e)):(text.value="",
pasted=!0)}
event.addCommandKeyListener(text,host.onCommandKey.bind(host)),event.addListener(text,"select",onSelect),
event.addListener(text,"input",onInput),event.addListener(text,"cut",onCut),event.addListener(text,"copy",onCopy),
event.addListener(text,"paste",onPaste)
var onCompositionStart=function(e){inComposition||!host.onCompositionStart||host.$readOnly||(inComposition={},
inComposition.canUndo=host.session.$undoManager,host.onCompositionStart(),setTimeout(onCompositionUpdate,0),
host.on("mousedown",onCompositionEnd),inComposition.canUndo&&!host.selection.isEmpty()&&(host.insert(""),
host.session.markUndoGroup(),host.selection.clearSelection()),host.session.markUndoGroup())},onCompositionUpdate=function(){
if(inComposition&&host.onCompositionUpdate&&!host.$readOnly){var val=text.value.replace(/\x01/g,"")
if(inComposition.lastValue!==val&&(host.onCompositionUpdate(val),inComposition.lastValue&&host.undo(),
inComposition.canUndo&&(inComposition.lastValue=val),inComposition.lastValue)){var r=host.selection.getRange()


host.insert(inComposition.lastValue),host.session.markUndoGroup(),inComposition.range=host.selection.getRange(),
host.selection.setRange(r),host.selection.clearSelection()}}},onCompositionEnd=function(e){if(host.onCompositionEnd&&!host.$readOnly){
var c=inComposition
inComposition=!1
var timer=setTimeout(function(){timer=null
var str=text.value.replace(/\x01/g,"")
inComposition||(str==c.lastValue?resetValue():!c.lastValue&&str&&(resetValue(),sendText(str)))})
inputHandler=function(str){return timer&&clearTimeout(timer),str=str.replace(/\x01/g,""),str==c.lastValue?"":(c.lastValue&&timer&&host.undo(),
str)},host.onCompositionEnd(),host.removeListener("mousedown",onCompositionEnd),"compositionend"==e.type&&c.range&&host.selection.setRange(c.range)


var needsOnInput=!!useragent.isChrome&&useragent.isChrome>=53||!!useragent.isWebKit&&useragent.isWebKit>=603


needsOnInput&&onInput()}},syncComposition=lang.delayedCall(onCompositionUpdate,50)
event.addListener(text,"compositionstart",onCompositionStart),useragent.isGecko?event.addListener(text,"text",function(){
syncComposition.schedule()}):(event.addListener(text,"keyup",function(){syncComposition.schedule()}),
event.addListener(text,"keydown",function(){syncComposition.schedule()})),event.addListener(text,"compositionend",onCompositionEnd),
this.getElement=function(){return text},this.setReadOnly=function(readOnly){text.readOnly=readOnly},this.onContextMenu=function(e){
afterContextMenu=!0,resetSelection(host.selection.isEmpty()),host._emit("nativecontextmenu",{target:host,
domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,bringToFront){tempStyle||(tempStyle=text.style.cssText),
text.style.cssText=(bringToFront?"z-index:100000;":"")+"height:"+text.style.height+";"+(useragent.isIE?"opacity:0.1;":"")


var rect=host.container.getBoundingClientRect(),style=dom.computedStyle(host.container),top=rect.top+(parseInt(style.borderTopWidth)||0),left=rect.left+(parseInt(rect.borderLeftWidth)||0),maxTop=rect.bottom-top-text.clientHeight-2,move=function(e){
text.style.left=e.clientX-left-2+"px",text.style.top=Math.min(e.clientY-top-2,maxTop)+"px"}
move(e),"mousedown"==e.type&&(host.renderer.$keepTextAreaAtCursor&&(host.renderer.$keepTextAreaAtCursor=null),
clearTimeout(closeTimeout),useragent.isWin&&event.capture(host.container,move,onContextMenuClose))},this.onContextMenuClose=onContextMenuClose


var closeTimeout,onContextMenu=function(e){host.textInput.onContextMenu(e),onContextMenuClose()}
if(event.addListener(text,"mouseup",onContextMenu),event.addListener(text,"mousedown",function(e){e.preventDefault(),
onContextMenuClose()}),event.addListener(host.renderer.scroller,"contextmenu",onContextMenu),event.addListener(text,"contextmenu",onContextMenu),
useragent.isIOS){var typingResetTimeout=null,typing=!1
parentNode.addEventListener("keydown",function(e){typingResetTimeout&&clearTimeout(typingResetTimeout),
typing=!0}),parentNode.addEventListener("keyup",function(e){typingResetTimeout=setTimeout(function(){
typing=!1},100)})
var detectArrowKeys=function(e){if(document.activeElement===text&&!typing){if(cut)return setTimeout(function(){
cut=!1},100)
var selectionStart=text.selectionStart,selectionEnd=text.selectionEnd
if(text.setSelectionRange(4,5),selectionStart==selectionEnd)switch(selectionStart){case 0:host.onCommandKey(null,0,KEYS.up)


break
case 1:host.onCommandKey(null,0,KEYS.home)
break
case 2:host.onCommandKey(null,MODS.option,KEYS.left)
break
case 4:host.onCommandKey(null,0,KEYS.left)
break
case 5:host.onCommandKey(null,0,KEYS.right)
break
case 7:host.onCommandKey(null,MODS.option,KEYS.right)
break
case 8:host.onCommandKey(null,0,KEYS.end)
break
case 9:host.onCommandKey(null,0,KEYS.down)}else{switch(selectionEnd){case 6:host.onCommandKey(null,MODS.shift,KEYS.right)


break
case 7:host.onCommandKey(null,MODS.shift|MODS.option,KEYS.right)
break
case 8:host.onCommandKey(null,MODS.shift,KEYS.end)
break
case 9:host.onCommandKey(null,MODS.shift,KEYS.down)}switch(selectionStart){case 0:host.onCommandKey(null,MODS.shift,KEYS.up)


break
case 1:host.onCommandKey(null,MODS.shift,KEYS.home)
break
case 2:host.onCommandKey(null,MODS.shift|MODS.option,KEYS.left)
break
case 3:host.onCommandKey(null,MODS.shift,KEYS.left)}}}}
document.addEventListener("selectionchange",detectArrowKeys),host.on("destroy",function(){document.removeEventListener("selectionchange",detectArrowKeys)

})}}
exports.TextInput=TextInput})


define("ace/keyboard/textinput",[],function(require,exports,module){"use strict"
var event=require("../lib/event"),useragent=require("../lib/useragent"),dom=require("../lib/dom"),lang=require("../lib/lang"),BROKEN_SETDATA=useragent.isChrome<18,USE_IE_MIME_TYPE=useragent.isIE,TextInputIOS=require("./textinput_ios").TextInput,TextInput=function(parentNode,host){
function resetSelection(isEmpty){if(!inComposition){if(inComposition=!0,inputHandler)selectionStart=0,
selectionEnd=isEmpty?0:text.value.length-1
else var selectionStart=isEmpty?2:1,selectionEnd=2
try{text.setSelectionRange(selectionStart,selectionEnd)}catch(e){}inComposition=!1}}function resetValue(){
inComposition||(text.value=PLACEHOLDER,useragent.isWebKit&&syncValue.schedule())}function onContextMenuClose(){
clearTimeout(closeTimeout),closeTimeout=setTimeout(function(){tempStyle&&(text.style.cssText=tempStyle,
tempStyle=""),null==host.renderer.$keepTextAreaAtCursor&&(host.renderer.$keepTextAreaAtCursor=!0,host.renderer.$moveTextAreaToCursor())

},0)}if(useragent.isIOS)return TextInputIOS.call(this,parentNode,host)
var text=dom.createElement("textarea")
text.className="ace_text-input",text.setAttribute("wrap","off"),text.setAttribute("autocorrect","off"),
text.setAttribute("autocapitalize","off"),text.setAttribute("spellcheck",!1),text.style.opacity="0",parentNode.insertBefore(text,parentNode.firstChild)


var PLACEHOLDER="\u2028\u2028",copied=!1,pasted=!1,inComposition=!1,tempStyle="",isSelectionEmpty=!0
try{var isFocused=document.activeElement===text}catch(e){}event.addListener(text,"blur",function(e){host.onBlur(e),
isFocused=!1}),event.addListener(text,"focus",function(e){isFocused=!0,host.onFocus(e),resetSelection()

}),this.focus=function(){if(tempStyle)return text.focus()
var top=text.style.top
text.style.position="fixed",text.style.top="0px",text.focus(),setTimeout(function(){text.style.position="",
"0px"==text.style.top&&(text.style.top=top)},0)},this.blur=function(){text.blur()},this.isFocused=function(){
return isFocused}
var syncSelection=lang.delayedCall(function(){isFocused&&resetSelection(isSelectionEmpty)}),syncValue=lang.delayedCall(function(){
inComposition||(text.value=PLACEHOLDER,isFocused&&resetSelection())})
useragent.isWebKit||host.addEventListener("changeSelection",function(){host.selection.isEmpty()!=isSelectionEmpty&&(isSelectionEmpty=!isSelectionEmpty,
syncSelection.schedule())}),resetValue(),isFocused&&host.onFocus()
var isAllSelected=function(text){return 0===text.selectionStart&&text.selectionEnd===text.value.length

},onSelect=function(e){copied?copied=!1:isAllSelected(text)?(host.selectAll(),resetSelection()):inputHandler&&resetSelection(host.selection.isEmpty())

},inputHandler=null
this.setInputHandler=function(cb){inputHandler=cb},this.getInputHandler=function(){return inputHandler

}
var afterContextMenu=!1,sendText=function(data){inputHandler&&(data=inputHandler(data),inputHandler=null),
pasted?(resetSelection(),data&&host.onPaste(data),pasted=!1):data==PLACEHOLDER.charAt(0)?afterContextMenu?host.execCommand("del",{
source:"ace"}):host.execCommand("backspace",{source:"ace"}):(data.substring(0,2)==PLACEHOLDER?data=data.substr(2):data.charAt(0)==PLACEHOLDER.charAt(0)?data=data.substr(1):data.charAt(data.length-1)==PLACEHOLDER.charAt(0)&&(data=data.slice(0,-1)),
data.charAt(data.length-1)==PLACEHOLDER.charAt(0)&&(data=data.slice(0,-1)),data&&host.onTextInput(data)),
afterContextMenu&&(afterContextMenu=!1)},onInput=function(e){if(!inComposition){var data=text.value
sendText(data),resetValue()}},handleClipboardData=function(e,data,forceIEMime){var clipboardData=e.clipboardData||window.clipboardData


if(clipboardData&&!BROKEN_SETDATA){var mime=USE_IE_MIME_TYPE||forceIEMime?"Text":"text/plain"
try{return data?clipboardData.setData(mime,data)!==!1:clipboardData.getData(mime)}catch(e){if(!forceIEMime)return handleClipboardData(e,data,!0)

}}},doCopy=function(e,isCut){var data=host.getCopyText()
return data?void(handleClipboardData(e,data)?(isCut?host.onCut():host.onCopy(),event.preventDefault(e)):(copied=!0,
text.value=data,text.select(),setTimeout(function(){copied=!1,resetValue(),resetSelection(),isCut?host.onCut():host.onCopy()

}))):event.preventDefault(e)},onCut=function(e){doCopy(e,!0)},onCopy=function(e){doCopy(e,!1)},onPaste=function(e){
var data=handleClipboardData(e)
"string"==typeof data?(data&&host.onPaste(data,e),useragent.isIE&&setTimeout(resetSelection),event.preventDefault(e)):(text.value="",
pasted=!0)}
event.addCommandKeyListener(text,host.onCommandKey.bind(host)),event.addListener(text,"select",onSelect),
event.addListener(text,"input",onInput),event.addListener(text,"cut",onCut),event.addListener(text,"copy",onCopy),
event.addListener(text,"paste",onPaste),"oncut"in text&&"oncopy"in text&&"onpaste"in text||event.addListener(parentNode,"keydown",function(e){
if((!useragent.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:onCopy(e)
break
case 86:onPaste(e)
break
case 88:onCut(e)}})
var onCompositionStart=function(e){inComposition||!host.onCompositionStart||host.$readOnly||(inComposition={},
inComposition.canUndo=host.session.$undoManager,host.onCompositionStart(),setTimeout(onCompositionUpdate,0),
host.on("mousedown",onCompositionEnd),inComposition.canUndo&&!host.selection.isEmpty()&&(host.insert(""),
host.session.markUndoGroup(),host.selection.clearSelection()),host.session.markUndoGroup())},onCompositionUpdate=function(){
if(inComposition&&host.onCompositionUpdate&&!host.$readOnly){var val=text.value.replace(/\u2028/g,"")


if(inComposition.lastValue!==val&&(host.onCompositionUpdate(val),inComposition.lastValue&&host.undo(),
inComposition.canUndo&&(inComposition.lastValue=val),inComposition.lastValue)){var r=host.selection.getRange()


host.insert(inComposition.lastValue),host.session.markUndoGroup(),inComposition.range=host.selection.getRange(),
host.selection.setRange(r),host.selection.clearSelection()}}},onCompositionEnd=function(e){if(host.onCompositionEnd&&!host.$readOnly){
var c=inComposition
inComposition=!1
var timer=setTimeout(function(){timer=null
var str=text.value.replace(/\u2028/g,"")
inComposition||(str==c.lastValue?resetValue():!c.lastValue&&str&&(resetValue(),sendText(str)))})
inputHandler=function(str){return timer&&clearTimeout(timer),str=str.replace(/\u2028/g,""),str==c.lastValue?"":(c.lastValue&&timer&&host.undo(),
str)},host.onCompositionEnd(),host.removeListener("mousedown",onCompositionEnd),"compositionend"==e.type&&c.range&&host.selection.setRange(c.range)


var needsOnInput=!!useragent.isChrome&&useragent.isChrome>=53||!!useragent.isWebKit&&useragent.isWebKit>=603


needsOnInput&&onInput()}},syncComposition=lang.delayedCall(onCompositionUpdate,50)
event.addListener(text,"compositionstart",onCompositionStart),useragent.isGecko?event.addListener(text,"text",function(){
syncComposition.schedule()}):(event.addListener(text,"keyup",function(){syncComposition.schedule()}),
event.addListener(text,"keydown",function(){syncComposition.schedule()})),event.addListener(text,"compositionend",onCompositionEnd),
this.getElement=function(){return text},this.setReadOnly=function(readOnly){text.readOnly=readOnly},this.onContextMenu=function(e){
afterContextMenu=!0,resetSelection(host.selection.isEmpty()),host._emit("nativecontextmenu",{target:host,
domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,bringToFront){tempStyle||(tempStyle=text.style.cssText),
text.style.cssText=(bringToFront?"z-index:100000;":"")+"height:"+text.style.height+";"+(useragent.isIE?"opacity:0.1;":"")


var rect=host.container.getBoundingClientRect(),style=dom.computedStyle(host.container),top=rect.top+(parseInt(style.borderTopWidth)||0),left=rect.left+(parseInt(rect.borderLeftWidth)||0),maxTop=rect.bottom-top-text.clientHeight-2,move=function(e){
text.style.left=e.clientX-left-2+"px",text.style.top=Math.min(e.clientY-top-2,maxTop)+"px"}
move(e),"mousedown"==e.type&&(host.renderer.$keepTextAreaAtCursor&&(host.renderer.$keepTextAreaAtCursor=null),
clearTimeout(closeTimeout),useragent.isWin&&event.capture(host.container,move,onContextMenuClose))},this.onContextMenuClose=onContextMenuClose


var closeTimeout,onContextMenu=function(e){host.textInput.onContextMenu(e),onContextMenuClose()}
event.addListener(text,"mouseup",onContextMenu),event.addListener(text,"mousedown",function(e){e.preventDefault(),
onContextMenuClose()}),event.addListener(host.renderer.scroller,"contextmenu",onContextMenu),event.addListener(text,"contextmenu",onContextMenu)

}
exports.TextInput=TextInput})


define("ace_tree/mouse/default_handlers",[],function(require,exports,module){"use strict"
function DefaultHandlers(mouseHandler){mouseHandler.$clickSelection=null
var editor=mouseHandler.editor
editor.setDefaultHandler("mousedown",this.onMouseDown.bind(mouseHandler)),editor.setDefaultHandler("dblclick",this.onDoubleClick.bind(mouseHandler)),
editor.setDefaultHandler("mouseleave",this.onMouseLeave.bind(mouseHandler)),editor.setDefaultHandler("mousemove",this.onMouseMove.bind(mouseHandler)),
editor.setDefaultHandler("mousewheel",this.onMouseWheel.bind(mouseHandler)),editor.setDefaultHandler("mouseup",this.onMouseUp.bind(mouseHandler)),
editor.setDefaultHandler("click",this.onClick.bind(mouseHandler))
var exports=["dragMoveSelection","dragWait","dragWaitEnd","getRegion","updateHoverState"]
exports.forEach(function(x){mouseHandler[x]=this[x]},this)}var dom=require("ace/lib/dom"),DRAG_OFFSET=5

;(function(){function isTogglerClick(target){return dom.hasCssClass(target,"toggler")&&!dom.hasCssClass(target,"empty")

}this.onMouseMove=function(e){var title,editor=this.editor,node=e.getNode(),provider=editor.provider
if(node)if(provider.columns){var pos=e.getDocumentPosition(),columnData=editor.renderer.$headingLayer.findColumn(pos.x)


title=columnData?columnData.column.getText(node):""}else title=provider.getTooltipText?provider.getTooltipText(node):provider.getText(node)
else title=""
editor.tooltip||editor.container.title==title||(editor.container.title=title),this.updateHoverState(node)

},this.onMouseLeave=function(){this.updateHoverState(null)},this.updateHoverState=function(node){var provider=this.editor.provider


node!==this.node&&provider&&(this.node&&provider.setClass(this.node,"hover",!1),this.node=node,this.node&&provider.setClass(this.node,"hover",!0))

},this.onMouseDown=function(ev){var editor=this.editor,provider=editor.provider
ev.detail=1,this.mousedownEvent=ev,this.delayedSelect=!1,this.isMousePressed=!0
var button=ev.getButton(),selectedNodes=editor.selection.getSelectedNodes(),isMultiSelect=selectedNodes.length>1


if(0===button||!isMultiSelect){var node=ev.getNode()
if(this.$clickNode=node,node){var inSelection=provider.isSelected(node),target=ev.domEvent.target
if(this.region=null,isTogglerClick(target)||"toggle"==node.clickAction){this.region="toggler"
var toggleChildren=ev.getShiftKey(),deep=ev.getAccelKey()
0===button&&(toggleChildren?(deep&&(node=node.parent),provider.close(node,!0),provider.open(node)):provider.toggleNode(node,deep)),
this.$clickNode=null}else if(dom.hasCssClass(target,"checkbox")){var nodes=inSelection&&editor.selection.getSelectedNodes()


provider._signal("toggleCheckbox",{target:node,selectedNodes:nodes}),node.isChecked=!node.isChecked,nodes&&nodes.forEach(function(n){
n.isChecked=node.isChecked}),provider._signal(node.isChecked?"check":"uncheck",nodes||[node]),provider._signal("change")

}else dom.hasCssClass(target,"icon-ok")?ev.getShiftKey()?editor.selection.expandSelection(node,null,!0):editor.selection.toggleSelect(node):ev.getAccelKey()?inSelection&&isMultiSelect?this.delayedSelect="toggle":inSelection&&!isMultiSelect||editor.selection.toggleSelect(node):ev.getShiftKey()?editor.selection.expandSelection(node):inSelection&&isMultiSelect?editor.isFocused()?this.delayedSelect=!0:this.$clickNode=null:editor.selection.setSelection(node)


return this.$clickNode&&editor.$mouseHandler.captureMouse(ev,"dragWait"),ev.preventDefault()}}},this.onMouseUp=function(ev){
if(2!=this.isMousePressed){this.isMousePressed=!1
var pos=ev.getDocumentPosition(),node=this.editor.provider.findItemAtOffset(pos.y)
node&&this.$clickNode&&this.$clickNode==node&&(ev.button=ev.getButton(),ev.target=ev.domEvent.target,
ev.detail=this.mousedownEvent.detail,this.onMouseEvent("click",ev)),this.$clickNode=this.mouseEvent=null

}},this.onClick=function(ev){2===this.mousedownEvent.detail&&this.editor._emit("afterChoose")},this.onDoubleClick=function(ev){
var provider=this.editor.provider
if(provider.toggleNode&&!isTogglerClick(ev.domEvent.target)){var node=ev.getNode()
node&&provider.toggleNode(node)}this.mousedownEvent&&(this.mousedownEvent.detail=2)},this.dragMoveSelection=function(){
var editor=this.editor,ev=this.mouseEvent
ev.$pos=ev.node=null
var node=ev.getNode(!0)
node!=editor.selection.getCursor()&&node&&(ev.getShiftKey()?editor.selection.expandSelection(node,null,!0):editor.selection.selectNode(node),
editor.renderer.scrollCaretIntoView())},this.dragWait=function(){var ev=this.mousedownEvent
Math.abs(this.x-ev.x)+Math.abs(this.y-ev.y)>DRAG_OFFSET&&(this.delayedSelect=!1,this.editor._emit("startDrag",ev),
"dragWait"==this.state&&0===ev.getButton()&&this.setState("dragMoveSelection"))},this.dragWaitEnd=function(){
if(this.delayedSelect){var selection=this.editor.selection
this.$clickNode&&("toggle"==this.delayedSelect?selection.toggleSelect(this.$clickNode):selection.setSelection(this.$clickNode)),
this.delayedSelect=!1}},this.onMouseWheel=function(ev){if(!ev.getShiftKey()&&!ev.getAccelKey()){var t=ev.domEvent.timeStamp,dt=t-(this.$lastScrollTime||0),editor=this.editor,isScrolable=editor.renderer.isScrollableBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed)


return isScrolable||dt<200?(this.$lastScrollTime=t,editor.renderer.scrollBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed),
ev.stop()):void 0}}}).call(DefaultHandlers.prototype),exports.DefaultHandlers=DefaultHandlers})


define("ace_tree/mouse/mouse_event",[],function(require,exports,module){"use strict"
var event=require("ace/lib/event"),useragent=require("ace/lib/useragent"),MouseEvent=exports.MouseEvent=function(domEvent,editor){
this.domEvent=domEvent,this.editor=editor,this.x=this.clientX=domEvent.clientX,this.y=this.clientY=domEvent.clientY,
this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){
this.stopPropagation=function(){event.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){
event.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),
this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),
this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection
var node=this.getNode()
return this.$inSelection=!(!node||!node.isSelected),this.$inSelection},this.node=null,this.getNode=function(clip){
if(this.node)return this.node
var pos=this.getDocumentPosition(clip)
if(pos&&this.editor.provider)return this.node=this.editor.provider.findItemAtOffset(pos.y,clip)},this.getButton=function(){
return event.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=useragent.isMac?function(){
return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(MouseEvent.prototype)})


define("ace_tree/mouse/drag_handler",[],function(require,exports,module){"use strict"
function initDragHandlers(mouseHandler){function constructDragNode(node){var i=tree.provider.getIndexForNode(node),domNode=tree.renderer.$cellLayer.getDomNodeAtIndex(i)


if(domNode){var offset=domNode.offsetHeight,selectedNodes=tree.selection.getSelectedNodes(),el=document.createElement("div")


el.className=tree.container.className+" dragImage"
var ch=el.appendChild(domNode.cloneNode(!0))
return ch.removeChild(ch.firstChild),ch.style.paddingRight="5px",ch.style.opacity="0.8",el.style.position="absolute",
el.style.zIndex="1000000",el.style.pointerEvents="none",el.style.overflow="visible",selectedNodes.length>1&&(ch.style.color="transparent",
ch=el.appendChild(domNode.cloneNode(!0)),ch.removeChild(ch.firstChild),ch.style.paddingRight="5px",ch.style.top=-offset+2+"px",
ch.style.left="2px",ch.style.position="relative",ch.style.opacity="0.8"),document.body.appendChild(el),
el}}function keyHandler(e){dragInfo&&(27===e.keyCode||"mousedown"==e.type?(mouseHandler.dragEnd(null,!0),
event.stopEvent(e)):(dragInfo&&17==e.keyCode||18==e.keyCode)&&(dragInfo.isCopy="keydown"==e.type,dom.setCssClass(dragInfo.el,"copy",dragInfo.isCopy)))

}var dragInfo,x,y,dx,dy,scrollerRect,tree=mouseHandler.editor,UNFOLD_TIMEOUT=500,WIDGET_UNFOLD_TIMEOUT=500,AUTOSCROLL_DELAY=300,MIN_DRAG_T=500


mouseHandler.drag=function(){var ev=this.mouseEvent
if(dragInfo&&ev){var node=ev.getNode()
dx=ev.x-x,dy=ev.y-y,x=ev.x,y=ev.y
var isInTree=isInRect(x,y,scrollerRect)
isInTree||(node=null),dragInfo.isInTree!=isInTree&&dragInfo.selectedNodes&&(dragInfo.isInTree=isInTree,
ev.dragInfo=dragInfo,tree._signal(isInTree?"dragIn":"dragOut",ev)),isInTree||(ev.dragInfo=dragInfo,tree._signal("dragMoveOutside",ev)),
dragInfo.el&&(dragInfo.el.style.top=ev.y-dragInfo.offsetY+"px",dragInfo.el.style.left=ev.x-dragInfo.offsetX+"px")


var hoverNode=node
if(hoverNode){for(var xOffset=x-scrollerRect.left,depth=Math.max(0,Math.floor(xOffset/tree.provider.$indentSize)),depthDiff=hoverNode.$depth-depth;depthDiff>0&&hoverNode.parent;)depthDiff--,
hoverNode=hoverNode.parent
hoverNode.isFolder||"sort"==dragInfo.mode||(hoverNode=hoverNode.parent)}dragInfo.hoverNode!==hoverNode&&(dragInfo.hoverNode&&(tree.provider.setClass(dragInfo.hoverNode,"dropTarget",!1),
tree._signal("folderDragLeave",dragInfo)),hoverNode&&dragInfo.selectedNodes&&dragInfo.selectedNodes.indexOf(hoverNode)!=-1&&(hoverNode=null),
dragInfo.hoverNode=hoverNode,dragInfo.hoverNode&&(tree._signal("folderDragEnter",dragInfo),"sort"!==dragInfo.mode&&tree.provider.setClass(dragInfo.hoverNode,"dropTarget",!0)),
highlightFolder(tree,dragInfo.hoverNode,dragInfo.insertPos))
var now=Date.now(),target=ev.domEvent.target,isFoldWidget=target&&dom.hasCssClass(target,"toggler")&&!dom.hasCssClass(target,"empty"),distance=Math.abs(dx)+Math.abs(dy),pos=ev.y-scrollerRect.top,rowHeight=tree.provider.rowHeight,renderer=tree.renderer,autoScrollMargin=1.5*rowHeight,scroll=pos-autoScrollMargin


scroll>0&&(scroll+=-renderer.$size.scrollerHeight+2*autoScrollMargin,scroll<0&&(scroll=0)),scroll&&isInTree||(dragInfo.autoScroll=!1),
distance<=2?dragInfo.stopTime||(dragInfo.stopTime=now):isFoldWidget||(dragInfo.stopTime=void 0)
var dt=now-dragInfo.stopTime
scroll&&isInTree?(dt>AUTOSCROLL_DELAY||dragInfo.autoScroll)&&(tree.renderer.scrollBy(0,scroll/2),dragInfo.autoScroll=!0):node&&"move"===dragInfo.mode&&((node.parent===tree.provider.root||node.isRoot||node.parent&&node.parent.isRoot)&&(isFoldWidget=!1),
isFoldWidget&&dt>WIDGET_UNFOLD_TIMEOUT&&dt<2*WIDGET_UNFOLD_TIMEOUT?(tree.provider.toggleNode(node),dragInfo.stopTime=1/0):!isFoldWidget&&dt>UNFOLD_TIMEOUT&&dt<2*UNFOLD_TIMEOUT&&(tree.provider.open(node),
dragInfo.stopTime=1/0))}},mouseHandler.dragEnd=function(e,cancel){dragInfo&&(window.removeEventListener("mousedown",keyHandler,!0),
window.removeEventListener("keydown",keyHandler,!0),window.removeEventListener("keyup",keyHandler,!0),
dragInfo.el&&dragInfo.el.parentNode&&dragInfo.el.parentNode.removeChild(dragInfo.el),dragInfo.hoverNode&&(tree.provider.setClass(dragInfo.hoverNode,"dropTarget",!1),
tree._signal("folderDragLeave",dragInfo)),highlightFolder(tree,null),tree.isFocused()&&tree.renderer.visualizeFocus(),
tree.renderer.setStyle("dragOver",!1),dragInfo.target=dragInfo.hoverNode,!cancel&&dragInfo.selectedNodes&&Date.now()-dragInfo.startT>MIN_DRAG_T&&tree._emit("drop",dragInfo),
dragInfo.isInTree||(cancel&&(dragInfo.selectedNodes=null),tree._signal("dropOutside",{dragInfo:dragInfo
})),dragInfo=null)},mouseHandler.dragStart=function(){dragInfo&&this.dragEnd(null,!0),mouseHandler.setState("drag"),
tree.renderer.visualizeBlur(),tree.renderer.setStyle("dragOver",!0),scrollerRect=tree.renderer.scroller.getBoundingClientRect(),
dragInfo={}},tree.on("startDrag",function(ev){if(tree.getOption("enableDragDrop")){var node=ev.getNode()


if(node&&!ev.getButton()){mouseHandler.dragStart(),window.addEventListener("mousedown",keyHandler,!0),
window.addEventListener("keydown",keyHandler,!0),window.addEventListener("keyup",keyHandler,!0)
var selectedNodes=tree.selection.getSelectedNodes(),el=constructDragNode(node)
dragInfo={el:el,node:node,selectedNodes:selectedNodes,offsetX:10,offsetY:10,target:node,startT:Date.now(),
isInTree:!0,mode:"move"},ev.dragInfo=dragInfo,tree._signal("dragStarted",ev),"drag"==mouseHandler.state&&mouseHandler.drag()

}}})}function highlightFolder(tree,node,type){tree.provider.markedFolder=node,tree.provider.markedFolderType=type,
tree.renderer.$loop.schedule(tree.renderer.CHANGE_MARKER)}function isInRect(x,y,rect){if(x<rect.right&&x>rect.left&&y>rect.top&&y<rect.bottom)return!0

}var event=require("ace/lib/event"),dom=(require("ace/lib/useragent"),require("./default_handlers").DefaultHandlers,
require("./mouse_event").MouseEvent,require("../config"),require("ace/lib/dom"))
module.exports=initDragHandlers})


define("ace_tree/mouse/heading_handler",[],function(require,exports,module){"use strict"
function HeadingHandler(mouseHandler){var editor=mouseHandler.editor,headingLayer=editor.renderer.$headingLayer


event.addListener(headingLayer.element,"mousedown",mouseHandler.onMouseEvent.bind(mouseHandler,"headerMouseDown")),
event.addListener(headingLayer.element,"mousemove",mouseHandler.onMouseEvent.bind(mouseHandler,"headerMouseMove"))


var overResizer,dragStartPos,columnData
editor.setDefaultHandler("headerMouseMove",function(e){if(!dragStartPos&&editor.provider&&editor.provider.columns){
var pos=e.getDocumentPosition(),width=editor.renderer.$size.scrollerWidth
width!=editor.provider.columns.width&&headingLayer.updateWidth(width),columnData=headingLayer.findColumn(pos.x),
overResizer=columnData&&columnData.overResizer,headingLayer.element.style.cursor=overResizer?"ew-resize":"default"

}}),editor.setDefaultHandler("headerMouseDown",function(e){if(overResizer){var pos=e.getDocumentPosition()


dragStartPos={x:pos.x},mouseHandler.setState("headerResize"),mouseHandler.captureMouse(e),mouseHandler.mouseEvent=e

}e.stop()}),mouseHandler.headerResize=function(){if(this.mouseEvent&&dragStartPos){for(var pos=this.mouseEvent.getDocumentPosition(),dx=pos.x,columns=editor.renderer.provider.columns,i=0;i<columns.length;i++){
var col=columns[i]
if(dx-=col.pixelWidth,col===columnData.column)break}var total=editor.renderer.$size.scrollerWidth
headingLayer.changeColumnWidth(columnData.column,dx,total)
var renderer=editor.renderer
renderer.updateFull()}},mouseHandler.headerResizeEnd=function(){dragStartPos=null,headingLayer.element.style.cursor="",
overResizer=!1}}var event=require("ace/lib/event")
exports.HeadingHandler=HeadingHandler})


define("ace_tree/mouse/mouse_handler",[],function(require,exports,module){"use strict"
var event=require("ace/lib/event"),useragent=require("ace/lib/useragent"),DefaultHandlers=require("./default_handlers").DefaultHandlers,initDragHandlers=require("./drag_handler"),HeadingHandler=require("./heading_handler").HeadingHandler,MouseEvent=require("./mouse_event").MouseEvent,config=require("../config"),MouseHandler=function(editor){
this.editor=editor,new DefaultHandlers(this),new HeadingHandler(this),initDragHandlers(this)
var mouseTarget=editor.renderer.getMouseEventTarget()
event.addListener(mouseTarget,"mousedown",function(e){return editor.focus(!0),event.preventDefault(e)

}),event.addListener(mouseTarget,"mousemove",this.onMouseEvent.bind(this,"mousemove")),event.addListener(mouseTarget,"mouseup",this.onMouseEvent.bind(this,"mouseup")),
event.addMultiMouseDownListener(mouseTarget,[300,300,250],this,"onMouseEvent"),event.addMultiMouseDownListener(editor.renderer.scrollBarV.inner,[300,300,250],this,"onMouseEvent"),
event.addMultiMouseDownListener(editor.renderer.scrollBarH.inner,[300,300,250],this,"onMouseEvent"),event.addMouseWheelListener(editor.container,this.onMouseWheel.bind(this,"mousewheel")),
event.addListener(mouseTarget,"mouseout",this.onMouseEvent.bind(this,"mouseleave"))};(function(){this.onMouseEvent=function(name,e){
this.editor._emit(name,new MouseEvent(e,this.editor))},this.onMouseWheel=function(name,e){var mouseEvent=new MouseEvent(e,this.editor)


mouseEvent.speed=2*this.$scrollSpeed,mouseEvent.wheelX=e.wheelX,mouseEvent.wheelY=e.wheelY,this.editor._emit(name,mouseEvent)

},this.setState=function(state){this.state=state},this.captureMouse=function(ev,state){state&&this.setState(state),
this.x=ev.x,this.y=ev.y,this.isMousePressed=2
var renderer=this.editor.renderer
renderer.$keepTextAreaAtCursor&&(renderer.$keepTextAreaAtCursor=null)
var self=this,onMouseMove=function(e){self.x=e.clientX,self.y=e.clientY,self.mouseEvent=new MouseEvent(e,self.editor),
self.$mouseMoved=!0},onCaptureEnd=function(e){clearInterval(timerId),onCaptureInterval(),self[self.state+"End"]&&self[self.state+"End"](e),
self.$clickSelection=null,null==renderer.$keepTextAreaAtCursor&&(renderer.$keepTextAreaAtCursor=!0,renderer.$moveTextAreaToCursor()),
self.isMousePressed=!1,e&&self.onMouseEvent("mouseup",e),self.$onCaptureMouseMove=self.releaseMouse=null

},onCaptureInterval=function(){self[self.state]&&self[self.state](),self.$mouseMoved=!1}
if(useragent.isOldIE&&"dblclick"==ev.domEvent.type)return setTimeout(function(){onCaptureEnd(ev.domEvent)

})
self.$onCaptureMouseMove=onMouseMove,self.releaseMouse=event.capture(this.editor.container,onMouseMove,onCaptureEnd)


var timerId=setInterval(onCaptureInterval,20)},this.releaseMouse=null}).call(MouseHandler.prototype),
config.defineOptions(MouseHandler.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:150
},focusTimout:{initialValue:0},enableDragDrop:{initialValue:!1}}),exports.MouseHandler=MouseHandler})


define("ace/keyboard/keybinding",[],function(require,exports,module){"use strict"
var keyUtil=require("../lib/keys"),event=require("../lib/event"),KeyBinding=function(editor){this.$editor=editor,
this.$data={editor:editor},this.$handlers=[],this.setDefaultHandler(editor.commands)};(function(){this.setDefaultHandler=function(kb){
this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=kb,this.addKeyboardHandler(kb,0)

},this.setKeyboardHandler=function(kb){var h=this.$handlers
if(h[h.length-1]!=kb){for(;h[h.length-1]&&h[h.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(h[h.length-1])


this.addKeyboardHandler(kb,1)}},this.addKeyboardHandler=function(kb,pos){if(kb){"function"!=typeof kb||kb.handleKeyboard||(kb.handleKeyboard=kb)


var i=this.$handlers.indexOf(kb)
i!=-1&&this.$handlers.splice(i,1),void 0==pos?this.$handlers.push(kb):this.$handlers.splice(pos,0,kb),
i==-1&&kb.attach&&kb.attach(this.$editor)}},this.removeKeyboardHandler=function(kb){var i=this.$handlers.indexOf(kb)


return i!=-1&&(this.$handlers.splice(i,1),kb.detach&&kb.detach(this.$editor),!0)},this.getKeyboardHandler=function(){
return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var data=this.$data,editor=data.editor


return this.$handlers.map(function(h){return h.getStatusText&&h.getStatusText(editor,data)||""}).filter(Boolean).join(" ")

},this.$callKeyboardHandlers=function(hashId,keyString,keyCode,e){for(var toExecute,success=!1,commands=this.$editor.commands,i=this.$handlers.length;i--&&(toExecute=this.$handlers[i].handleKeyboard(this.$data,hashId,keyString,keyCode,e),
!(toExecute&&toExecute.command&&(success="null"==toExecute.command||commands.exec(toExecute.command,this.$editor,toExecute.args,e),
success&&e&&hashId!=-1&&1!=toExecute.passEvent&&1!=toExecute.command.passEvent&&event.stopEvent(e),success))););
return success||hashId!=-1||(toExecute={command:"insertstring"},success=commands.exec("insertstring",this.$editor,keyString)),
success&&this.$editor._signal&&this.$editor._signal("keyboardActivity",toExecute),success},this.onCommandKey=function(e,hashId,keyCode){
var keyString=keyUtil.keyCodeToString(keyCode)
this.$callKeyboardHandlers(hashId,keyString,keyCode,e)},this.onTextInput=function(text){this.$callKeyboardHandlers(-1,text)

}}).call(KeyBinding.prototype),exports.KeyBinding=KeyBinding})


define("ace_tree/selection",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),EventEmitter=require("ace/lib/event_emitter").EventEmitter,Selection=function(provider){
this.provider=provider,this.provider&&!this.provider.selectedItems&&(this.provider.selectedItems=[]),
this.provider.on("remove",this.unselectRemoved=this.unselectRemoved.bind(this))};(function(){oop.implement(this,EventEmitter),
this.$wrapAround=!1,this.getRange=function(){},this.selectAll=function(){var sel=this.provider.selectedItems


this.expandSelection(sel[0],sel[sel.length-1]),this._signal("change")},this.moveSelection=function(dir,select,add){
var provider=this.provider,cursor=this.getCursor(),anchor=this.getAnchor(),i=provider.getIndexForNode(cursor)


add?add&&!select&&this.unselectNode(cursor):this.clear(!0)
var min=provider.getMinIndex(),max=provider.getMaxIndex(),wrapped=!1,newI=i
do{newI+=dir,newI<min?(newI=this.$wrapAround?max:min,wrapped=!0):newI>max&&(newI=this.$wrapAround?min:max,
wrapped=!0)
var newNode=provider.getNodeAtIndex(newI)}while(!wrapped&&newNode&&!provider.isSelectable(newNode))
newNode&&provider.isSelectable(newNode)||(newNode=cursor),select?this.expandSelection(newNode,anchor,add):this.selectNode(newNode,add)

},this.getCursor=function(){var sel=this.provider.selectedItems
return sel.cursor||sel[sel.length-1]},this.getAnchor=function(){var sel=this.provider.selectedItems
return sel.anchor||sel.cursor||sel[0]},this.getSelectedNodes=function(){var sel=this.provider.selectedItems


return sel.slice()},this.getVisibleSelectedNodes=function(){var provider=this.provider,sel=provider.selectedItems


return sel.filter(function(node){return provider.isVisible(node)})},this.isEmpty=function(){var sel=this.provider.selectedItems


return 0===sel.length},this.isMultiRow=function(){var sel=this.provider.selectedItems
return sel.length>1},this.toggleSelect=function(node){var provider=this.provider,sel=provider.selectedItems,i=sel.indexOf(node)


i!=-1&&sel.splice(i,1),provider.setSelected(node,!provider.isSelected(node)),provider.isSelected(node)?(sel.push(node),
sel.anchor=sel.cursor=node):sel.anchor=sel.cursor=sel[sel.length-1],this._signal("change")},this.selectNode=function(node,add,silent){
var provider=this.provider,sel=provider.selectedItems
if(provider.isSelectable(node)){if(add||this.clear(!0),node){var i=sel.indexOf(node)
i!=-1&&sel.splice(i,1),provider.setSelected(node,!0),provider.isSelected(node)&&sel.push(node)}sel.anchor=sel.cursor=node,
this._signal("change")}},this.add=function(node){this.selectNode(node,!0)},this.remove=function(node){
this.provider.isSelected(node)&&this.toggleSelect(node)},this.clear=this.clearSelection=function(silent){
var provider=this.provider,sel=provider.selectedItems
sel.forEach(function(node){provider.setSelected(node,!1)}),sel.splice(0,sel.length),sel.anchor=sel.cursor,
silent||this._signal("change")},this.unselectNode=function(node,silent){var provider=this.provider,sel=provider.selectedItems,i=sel.indexOf(node)


i!=-1&&(sel.splice(i,1),provider.setSelected(node,!1),sel.anchor==node&&(sel.anchor=sel[i-1]||sel[i]),
sel.cursor==node&&(sel.cursor=sel[i]||sel[i-1]),silent||this._signal("change"))},this.setSelection=function(nodes){
Array.isArray(nodes)?(this.clear(!0),nodes.forEach(function(node){this.selectNode(node,!0,!0)},this)):this.selectNode(nodes,!1,!0)

},this.expandSelection=function(cursor,anchor,additive){anchor=anchor||this.getAnchor(),additive||this.clear(!0)


var provider=this.provider,sel=provider.selectedItems,end=provider.getIndexForNode(cursor),start=provider.getIndexForNode(anchor||cursor)


if(end>start)for(var i=start;i<=end;i++){var node=provider.getNodeAtIndex(i),index=sel.indexOf(node)
index!=-1&&sel.splice(index,1),provider.isSelectable(node)&&provider.setSelected(node,!0),sel.push(node)

}else for(var i=start;i>=end;i--){var node=provider.getNodeAtIndex(i),index=sel.indexOf(node)
index!=-1&&sel.splice(index,1),provider.isSelectable(node)&&provider.setSelected(node,!0),sel.push(node)

}sel.cursor=cursor,sel.anchor=anchor,this._signal("change")},this.unselectRemoved=function(toRemove){
var changed,sel=this.getSelectedNodes(),provider=this.provider,cursor=this.getCursor()
if(sel.forEach(function(n){provider.isAncestor(toRemove,n)&&(changed=!0,this.unselectNode(n,!0))},this),
changed&&!provider.isSelected(cursor)){var parent=toRemove.parent,ch=[]
if(parent&&provider.isOpen(parent)){ch=provider.getChildren(parent)
var i=ch.indexOf(toRemove)}if(i==-1){i=toRemove.index
var node=ch[i]||ch[i-1]||parent}else node=ch[i+1]||ch[i-1]||parent
node==provider.root&&(node=ch[0]||node),node&&this.selectNode(node,!0),this._signal("change")}}}).call(Selection.prototype),
exports.Selection=Selection})


define("ace/keyboard/hash_handler",[],function(require,exports,module){"use strict"
function HashHandler(config,platform){this.platform=platform||(useragent.isMac?"mac":"win"),this.commands={},
this.commandKeyBinding={},this.addCommands(config),this.$singleCommand=!0}function MultiHashHandler(config,platform){
HashHandler.call(this,config,platform),this.$singleCommand=!1}var keyUtil=require("../lib/keys"),useragent=require("../lib/useragent"),KEY_MODS=keyUtil.KEY_MODS


MultiHashHandler.prototype=HashHandler.prototype,function(){function getPosition(command){return"object"==typeof command&&command.bindKey&&command.bindKey.position||(command.isDefault?-100:0)

}this.addCommand=function(command){this.commands[command.name]&&this.removeCommand(command),this.commands[command.name]=command,
command.bindKey&&this._buildKeyHash(command)},this.removeCommand=function(command,keepCommand){var name=command&&("string"==typeof command?command:command.name)


command=this.commands[name],keepCommand||delete this.commands[name]
var ckb=this.commandKeyBinding
for(var keyId in ckb){var cmdGroup=ckb[keyId]
if(cmdGroup==command)delete ckb[keyId]
else if(Array.isArray(cmdGroup)){var i=cmdGroup.indexOf(command)
i!=-1&&(cmdGroup.splice(i,1),1==cmdGroup.length&&(ckb[keyId]=cmdGroup[0]))}}},this.bindKey=function(key,command,position){
if("object"==typeof key&&key&&(void 0==position&&(position=key.position),key=key[this.platform]),key)return"function"==typeof command?this.addCommand({
exec:command,bindKey:key,name:command.name||key}):void key.split("|").forEach(function(keyPart){var chain=""


if(keyPart.indexOf(" ")!=-1){var parts=keyPart.split(/\s+/)
keyPart=parts.pop(),parts.forEach(function(keyPart){var binding=this.parseKeys(keyPart),id=KEY_MODS[binding.hashId]+binding.key


chain+=(chain?" ":"")+id,this._addCommandToBinding(chain,"chainKeys")},this),chain+=" "}var binding=this.parseKeys(keyPart),id=KEY_MODS[binding.hashId]+binding.key


this._addCommandToBinding(chain+id,command,position)},this)},this._addCommandToBinding=function(keyId,command,position){
var i,ckb=this.commandKeyBinding
if(command)if(!ckb[keyId]||this.$singleCommand)ckb[keyId]=command
else{Array.isArray(ckb[keyId])?(i=ckb[keyId].indexOf(command))!=-1&&ckb[keyId].splice(i,1):ckb[keyId]=[ckb[keyId]],
"number"!=typeof position&&(position=getPosition(command))
var commands=ckb[keyId]
for(i=0;i<commands.length;i++){var other=commands[i],otherPos=getPosition(other)
if(otherPos>position)break}commands.splice(i,0,command)}else delete ckb[keyId]},this.addCommands=function(commands){
commands&&Object.keys(commands).forEach(function(name){var command=commands[name]
if(command){if("string"==typeof command)return this.bindKey(command,name)
"function"==typeof command&&(command={exec:command}),"object"==typeof command&&(command.name||(command.name=name),
this.addCommand(command))}},this)},this.removeCommands=function(commands){Object.keys(commands).forEach(function(name){
this.removeCommand(commands[name])},this)},this.bindKeys=function(keyList){Object.keys(keyList).forEach(function(key){
this.bindKey(key,keyList[key])},this)},this._buildKeyHash=function(command){this.bindKey(command.bindKey,command)

},this.parseKeys=function(keys){var parts=keys.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(x){
return x}),key=parts.pop(),keyCode=keyUtil[key]
if(keyUtil.FUNCTION_KEYS[keyCode])key=keyUtil.FUNCTION_KEYS[keyCode].toLowerCase()
else{if(!parts.length)return{key:key,hashId:-1}
if(1==parts.length&&"shift"==parts[0])return{key:key.toUpperCase(),hashId:-1}}for(var hashId=0,i=parts.length;i--;){
var modifier=keyUtil.KEY_MODS[parts[i]]
if(null==modifier)return"undefined"!=typeof console&&console.error("invalid modifier "+parts[i]+" in "+keys),
!1
hashId|=modifier}return{key:key,hashId:hashId}},this.findKeyCommand=function(hashId,keyString){var key=KEY_MODS[hashId]+keyString


return this.commandKeyBinding[key]},this.handleKeyboard=function(data,hashId,keyString,keyCode){if(!(keyCode<0)){
var key=KEY_MODS[hashId]+keyString,command=this.commandKeyBinding[key]
return data.$keyChain&&(data.$keyChain+=" "+key,command=this.commandKeyBinding[data.$keyChain]||command),
!command||"chainKeys"!=command&&"chainKeys"!=command[command.length-1]?(data.$keyChain&&(hashId&&4!=hashId||1!=keyString.length?(hashId==-1||keyCode>0)&&(data.$keyChain=""):data.$keyChain=data.$keyChain.slice(0,-key.length-1)),
{command:command}):(data.$keyChain=data.$keyChain||key,{command:"null"})}},this.getStatusText=function(editor,data){
return data.$keyChain||""}}.call(HashHandler.prototype),exports.HashHandler=HashHandler,exports.MultiHashHandler=MultiHashHandler

})


define("ace/commands/command_manager",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),MultiHashHandler=require("../keyboard/hash_handler").MultiHashHandler,EventEmitter=require("../lib/event_emitter").EventEmitter,CommandManager=function(platform,commands){
MultiHashHandler.call(this,commands,platform),this.byName=this.commands,this.setDefaultHandler("exec",function(e){
return e.command.exec(e.editor,e.args||{})})}
oop.inherits(CommandManager,MultiHashHandler),function(){oop.implement(this,EventEmitter),this.exec=function(command,editor,args){
if(Array.isArray(command)){for(var i=command.length;i--;)if(this.exec(command[i],editor,args))return!0


return!1}if("string"==typeof command&&(command=this.commands[command]),!command)return!1
if(editor&&editor.$readOnly&&!command.readOnly)return!1
var e={editor:editor,command:command,args:args}
return e.returnValue=this._emit("exec",e),this._signal("afterExec",e),e.returnValue!==!1},this.toggleRecording=function(editor){
if(!this.$inReplay)return editor&&editor._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),
this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){
this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),
this.recording=!0)},this.replay=function(editor){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(editor)


try{this.$inReplay=!0,this.macro.forEach(function(x){"string"==typeof x?this.exec(x,editor):this.exec(x[0],editor,x[1])

},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(m){return m.map(function(x){return"string"!=typeof x[0]&&(x[0]=x[0].name),
x[1]||(x=x[0]),x})}}.call(CommandManager.prototype),exports.CommandManager=CommandManager})


define("ace_tree/commands/default_commands",[],function(require,exports,module){"use strict"
function bindKey(win,mac){return{win:win,mac:mac}}exports.commands=[{name:"selectAll",bindKey:bindKey("Ctrl-A","Command-A"),
exec:function(editor){editor.selectAll()}},{name:"centerselection",bindKey:bindKey(null,"Ctrl-L"),exec:function(editor){
editor.centerSelection()}},{name:"closeOrlevelUp",bindKey:bindKey("Left","Left|Ctrl-B"),exec:function(editor){
editor.navigateLevelUp(!0)}},,{name:"levelUp",bindKey:bindKey("Shift-Left","Shift-Left|Ctrl-B"),exec:function(editor){
editor.navigateLevelUp()}},{name:"levelDown",bindKey:bindKey("Right","Right|Ctrl-F"),exec:function(editor){
editor.navigateLevelDown()}},{name:"goToStart",editorKey:bindKey("Ctrl-Home","Ctrl-Home"),bindKey:bindKey("Home|Ctrl-Home","Home|Ctrl-Home"),
exec:function(editor){editor.navigateStart()}},{name:"goToEnd",editorKey:bindKey("Ctrl-End","Ctrl-End"),
bindKey:bindKey("End|Ctrl-End","End|Ctrl-End"),exec:function(editor){editor.navigateEnd()}},{name:"closeAllFromSelected",
bindKey:bindKey("Ctrl-Left","Ctrl-Left"),exec:function(ed){ed.provider.close(ed.selection.getCursor(),!0)

}},{name:"openAllFromSelected",bindKey:bindKey("Ctrl-Right","Ctrl-Right"),exec:function(ed){ed.provider.open(ed.selection.getCursor(),!0)

}},{name:"pageup",bindKey:"Option-PageUp",exec:function(editor){editor.scrollPageUp()}},{name:"gotopageup",
bindKey:"PageUp",exec:function(editor){editor.gotoPageUp()}},{name:"pagedown",bindKey:"Option-PageDown",
exec:function(editor){editor.scrollPageDown()}},{name:"gotopageDown",bindKey:"PageDown",exec:function(editor){
editor.gotoPageDown()}},{name:"scrollup",bindKey:bindKey("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)

}},{name:"scrolldown",bindKey:bindKey("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)

}},{name:"insertstring",exec:function(e,args){e.insertSting(args)}},{name:"goUp",bindKey:bindKey("Up","Up|Ctrl-P"),
exec:function(editor){editor.selection.moveSelection(-1)}},{name:"goDown",bindKey:bindKey("Down","Down|Ctrl-N"),
exec:function(editor){editor.selection.moveSelection(1)}},{name:"selectUp",bindKey:bindKey("Shift-Up","Shift-Up"),
exec:function(editor){editor.selection.moveSelection(-1,!0)}},{name:"selectDown",bindKey:bindKey("Shift-Down","Shift-Down"),
exec:function(editor){editor.selection.moveSelection(1,!0)}},{name:"selectToUp",bindKey:bindKey("Ctrl-Up","Ctrl-Up"),
exec:function(editor){editor.selection.moveSelection(-1,!1,!0)}},{name:"selectToDown",bindKey:bindKey("Ctrl-Down","Ctrl-Down"),
exec:function(editor){editor.selection.moveSelection(1,!1,!0)}},{name:"selectMoreUp",bindKey:bindKey("Ctrl-Shift-Up","Ctrl-Shift-Up"),
exec:function(editor){editor.selection.moveSelection(-1,!0,!0)}},{name:"selectMoreDown",bindKey:bindKey("Ctrl-Shift-Down","Ctrl-Shift-Down"),
exec:function(editor){editor.selection.moveSelection(1,!0,!0)}},{name:"rename",bindKey:"F2",exec:function(tree){
tree.edit&&tree.edit.startRename()}},{name:"chose",bindKey:"Enter",exec:function(tree){tree._emit("afterChoose")

}},{name:"delete",bindKey:"Delete",exec:function(tree){tree._emit("delete")}},{name:"foldOther",bindKey:bindKey("Alt-0","Command-Option-0"),
exec:function(tree){tree.provider.close(tree.provider.root,!0),tree.reveal(tree.selection.getCursor())

}}]})


define("ace_tree/quicksearch",[],function(require,exports,module){"use strict"
var quickSearch=function(tree,str){var node=tree.selection.getCursor(),siblings=tree.provider.getChildren(node.parent)


if(siblings&&1!=siblings.length){for(var newNode,index=siblings.indexOf(node),i=index+1;i<siblings.length;i++){
node=siblings[i]
var label=node.label||node.name||""
if(label[0]==str){newNode=node
break}}if(!newNode)for(var i=0;i<index;i++){node=siblings[i]
var label=node.label||node.name||""
if(label[0]==str){newNode=node
break}}newNode&&(tree.selection.selectNode(newNode),tree.renderer.scrollCaretIntoView(newNode,.5))}}
module.exports=quickSearch})


define("ace_tree/tree",[],function(require,exports,module){"use strict"
var Renderer=require("./virtual_renderer").VirtualRenderer
exports.config=require("./config")
var oop=require("ace/lib/oop"),useragent=(require("ace/lib/lang"),require("ace/lib/useragent")),TextInput=require("ace/keyboard/textinput").TextInput,MouseHandler=require("./mouse/mouse_handler").MouseHandler,KeyBinding=require("ace/keyboard/keybinding").KeyBinding,Selection=require("./selection").Selection,EventEmitter=require("ace/lib/event_emitter").EventEmitter,CommandManager=require("ace/commands/command_manager").CommandManager,defaultCommands=require("./commands/default_commands").commands,config=require("./config"),quickSearch=require("./quicksearch"),Tree=function(element,cellWidth,cellHeight){
this.cellWidth=cellWidth||80,this.cellHeight=cellHeight||24,this.renderer=new Renderer(element,this.cellWidth,this.cellHeight),
this.container=this.renderer.container,this.commands=new CommandManager(useragent.isMac?"mac":"win",defaultCommands),
this.textInput=new TextInput(this.container,this),this.keyBinding=new KeyBinding(this),this.$mouseHandler=new MouseHandler(this),
this.$blockScrolling=0
var _self=this
this.renderer.on("edit",function(e){_self._emit("edit",e)}),this.commands.on("exec",function(){this.selectionChanged=!1

}.bind(this)),this.commands.on("afterExec",function(){this.selectionChanged&&(this.selectionChanged=!1,
this.renderer.scrollCaretIntoView(),this._signal("userSelect"))}.bind(this)),this.on("changeSelection",function(){
this.$mouseHandler.isMousePressed&&this._signal("userSelect")}.bind(this)),config.resetOptions(this),
config._emit("Tree",this)};(function(){oop.implement(this,EventEmitter),this.setDataProvider=function(provider){
if(this.provider){var oldProvider=this.provider
this.selection.off("changeCaret",this.$onCaretChange),this.selection.off("change",this.$onSelectionChange),
oldProvider.off("changeClass",this.$onChangeClass),oldProvider.off("expand",this.$redraw),oldProvider.off("collapse",this.$redraw),
oldProvider.off("change",this.$redraw),oldProvider.off("changeScrollTop",this.$onScrollTopChange),oldProvider.off("changeScrollLeft",this.$onScrollLeftChange)

}this.provider=provider,this.model=provider,provider&&(this.renderer.setDataProvider(provider),this.$redraw||(this.$redraw=this.redraw.bind(this)),
this.provider.on("expand",this.$redraw),this.provider.on("collapse",this.$redraw),this.provider.on("change",this.$redraw),
this.provider.selection||(this.provider.selection=new Selection(this.provider)),this.selection=this.provider.selection,
this.$onCaretChange=this.onCaretChange.bind(this),this.selection.on("changeCaret",this.$onCaretChange),
this.$onChangeClass=this.$onChangeClass.bind(this),this.provider.on("changeClass",this.$onChangeClass),
this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("change",this.$onSelectionChange),
this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.provider.on("changeScrollTop",this.$onScrollTopChange),
this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.provider.on("changeScrollLeft",this.$onScrollLeftChange),
this.$blockScrolling+=1,this.onCaretChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),
this.onSelectionChange(),this.renderer.updateFull()),this._emit("changeDataProvider",{provider:provider,
oldProvider:oldProvider})},this.redraw=function(){this.renderer.updateFull()},this.getLength=function(){
return 0},this.getLine=function(row){return{length:0}},this.getDataProvider=function(){return this.provider

},this.getSelection=function(){return this.selection},this.resize=function(force){this.renderer.onResize(force)

},this.focus=function(once){var _self=this
once||setTimeout(function(){_self.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){
return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){
this.$isFocused||(this.$isFocused=!0,this.renderer.visualizeFocus(),this._emit("focus"))},this.onBlur=function(){
this.$isFocused&&(this.$isFocused=!1,this.renderer.visualizeBlur(),this._emit("blur"))},this.onScrollTopChange=function(){
this.renderer.scrollToY(this.provider.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.renderer.getScrollLeft())

},this.$onChangeClass=function(){this.renderer.updateCaret()},this.onCaretChange=function(){this.$onChangeClass(),
this.$blockScrolling||(this.selectionChanged=!0),this._emit("changeSelection")},this.onSelectionChange=function(e){
this.onCaretChange()},this.execCommand=function(command,args){this.commands.exec(command,this,args)},
this.onTextInput=function(text){this.keyBinding.onTextInput(text)},this.onCommandKey=function(e,hashId,keyCode){
this.keyBinding.onCommandKey(e,hashId,keyCode)},this.insertSting=function(str){return this.startFilter?this.startFilter(str):void quickSearch(this,str)

},this.setTheme=function(theme){this.renderer.setTheme(theme)},this.$getSelectedRows=function(){var range=this.getSelectionRange().collapseRows()


return{first:range.start.row,last:range.end.row}},this.getVisibleNodes=function(tolerance){return this.renderer.getVisibleNodes(tolerance)

},this.isNodeVisible=function(node,tolerance){return this.renderer.isNodeVisible(node,tolerance)},this.$moveByPage=function(dir,select){
var renderer=this.renderer,config=this.renderer.layerConfig
config.lineHeight=this.provider.rowHeight
var rows=dir*Math.floor(config.height/config.lineHeight)
this.$blockScrolling++,this.selection.moveSelection(rows,select),this.$blockScrolling--
var scrollTop=renderer.scrollTop
renderer.scrollBy(0,rows*config.lineHeight),null!=select&&renderer.scrollCaretIntoView(null,.5),renderer.animateScrolling(scrollTop)

},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)

},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)

},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)

},this.scrollToRow=function(row,center,animate,callback){this.renderer.scrollToRow(row,center,animate,callback)

},this.centerSelection=function(){var range=this.getSelectionRange(),pos={row:Math.floor(range.start.row+(range.end.row-range.start.row)/2),
column:Math.floor(range.start.column+(range.end.column-range.start.column)/2)}
this.renderer.alignCaret(pos,.5)},this.getCursorPosition=function(){return this.selection.getCursor()

},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())

},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,
this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()

},this.moveCaretTo=function(row,column){this.selection.moveCaretTo(row,column)},this.moveCaretToPosition=function(pos){
this.selection.moveCaretToPosition(pos)},this.gotoRow=function(rowNumber,column,animate){this.selection.clearSelection(),
void 0===column&&(column=this.selection.getCursor().column),this.$blockScrolling+=1,this.moveCaretTo(rowNumber-1,column||0),
this.$blockScrolling-=1,this.isRowFullyVisible(rowNumber-1)||this.scrollToRow(rowNumber-1,!0,animate)

},this.navigateTo=function(row,column){this.clearSelection(),this.moveCaretTo(row,column)},this.navigateUp=function(){
var node=this.provider.navigate("up")
node&&this.selection.setSelection(node),this.$scrollIntoView()},this.navigateDown=function(){var node=this.provider.navigate("down")


node&&this.selection.setSelection(node)},this.navigateLevelUp=function(toggleNode){var node=this.selection.getCursor()


node&&(toggleNode&&this.provider.isOpen(node)?this.provider.close(node):this.selection.setSelection(node.parent))

},this.navigateLevelDown=function(){var node=this.selection.getCursor(),hasChildren=this.provider.hasChildren(node)


return!hasChildren||this.provider.isOpen(node)?this.selection.moveSelection(1):void this.provider.open(node)

},this.navigateStart=function(){var node=this.getFirstNode()
this.selection.setSelection(node)},this.navigateEnd=function(){var node=this.getLastNode()
this.selection.setSelection(node)},this.getFirstNode=function(){var index=this.provider.getMinIndex()


return this.provider.getNodeAtIndex(index)},this.getLastNode=function(){var index=this.provider.getMaxIndex()


return this.provider.getNodeAtIndex(index)},this.$scrollIntoView=function(node){this.renderer.scrollCaretIntoView()

},this.select=function(node){this.selection.setSelection(node)},this.getCopyText=function(node){return""

},this.onPaste=function(node){return""},this.reveal=function(node,animate){for(var provider=this.provider,parent=node.parent;parent;)provider.isOpen(parent)||provider.expand(parent),
parent=parent.parent
this.select(node)
var scrollTop=this.renderer.scrollTop
this.renderer.scrollCaretIntoView(node,.5),animate!==!1&&this.renderer.animateScrolling(scrollTop)},this.undo=function(){
this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCaretIntoView(null,.5)

},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,
this.renderer.scrollCaretIntoView(null,.5)},this.getReadOnly=function(){return this.getOption("readOnly")

},this.destroy=function(){this.renderer.destroy(),this._emit("destroy",this)},this.setHorHeadingVisible=function(value){
this.renderer.setHorHeadingVisible(value)},this.setVerHeadingVisible=function(value){this.renderer.setVerHeadingVisible(value)

},this.enable=function(){this.$disabled=!1,this.container.style.pointerEvents="",this.container.style.opacity=""

},this.disable=function(){this.$disabled=!0,this.container.style.pointerEvents="none",this.container.style.opacity="0.9",
this.isFocused()&&this.blur()}}).call(Tree.prototype),config.defineOptions(Tree.prototype,"Tree",{toggle:{
set:function(toggle){},initialValue:!1},readOnly:{set:function(readOnly){this.textInput.setReadOnly(readOnly)

},initialValue:!1},animatedScroll:"renderer",maxLines:"renderer",minLines:"renderer",scrollSpeed:"$mouseHandler",
enableDragDrop:"$mouseHandler"}),module.exports=Tree})


define("ace_tree/scrollable",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),EventEmitter=require("ace/lib/event_emitter").EventEmitter,scrollable={}

;(function(){oop.implement(this,EventEmitter),this.$scrollTop=0,this.getScrollTop=function(){return this.$scrollTop

},this.setScrollTop=function(scrollTop){scrollTop=Math.round(scrollTop),this.$scrollTop===scrollTop||isNaN(scrollTop)||(this.$scrollTop=scrollTop,
this._signal("changeScrollTop",scrollTop))},this.$scrollLeft=0,this.getScrollLeft=function(){return this.$scrollLeft

},this.setScrollLeft=function(scrollLeft){scrollLeft=Math.round(scrollLeft),this.$scrollLeft===scrollLeft||isNaN(scrollLeft)||(this.$scrollLeft=scrollLeft,
this._signal("changeScrollLeft",scrollLeft))}}).call(scrollable),module.exports=scrollable})


define("ace_tree/data_provider",[],function(require,exports,module){"use strict"
function alphanumCompare(a,b){for(var caseOrder=0,x=0,l=Math.min(a.length,b.length);x<l;x++){var ch1=a.charCodeAt(x),ch2=b.charCodeAt(x)


if(ch1<58&&ch2<58&&ch1>47&&ch2>47){var num1=0,num2=0,n=x
do num1=10*num1+(ch1-48),ch1=a.charCodeAt(++n)
while(ch1>47&&ch1<58)
n=x
do num2=10*num2+(ch2-48),ch2=b.charCodeAt(++n)
while(ch2>47&&ch2<58)
if(num1!==num2)return num1-num2
x=n-1}else if(ch1!==ch2){var ch1L=a[x].toLowerCase(),ch2L=b[x].toLowerCase()
if(ch1L<ch2L)return-1
if(ch1L>ch2L)return 1
caseOrder||(caseOrder=ch2-ch1)}}return caseOrder||a.length-b.length}var oop=require("ace/lib/oop"),Scrollable=require("./scrollable"),dom=require("ace/lib/dom"),escapeHTML=require("ace/lib/lang").escapeHTML,DataProvider=function(root){
this.rowHeight=25,this.setRoot(root)};(function(){this.rowHeight=void 0,this.rowHeightInner=void 0,this.$indentSize=10,
oop.implement(this,Scrollable),this.$sortNodes=!0,this.setRoot=function(root){Array.isArray(root)&&(root={
items:root}),this.root=root||{},void 0==this.root.$depth&&(this.root.$depth=-1),this.root.$depth<0?(this.visibleItems=[],
this.open(this.root),this.visibleItems.unshift()):this.visibleItems=[this.root],this.$selectedNode=this.root,
this._signal("setRoot"),this._signal("change")},this.open=this.expand=function(node,deep,silent){if("number"!=typeof deep&&(deep=deep?100:0),
node){var items=this.visibleItems
if(!this.isOpen(node)||node===this.root&&!items.length){var ch=this.getChildren(node)
if(this.loadChildren&&this.shouldLoadChildren(node,ch)){var timer=setTimeout(function(){node.status="loading",
this._signal("change",node)}.bind(this),100)
return this.loadChildren(node,function(err,ch){clearTimeout(timer),this.collapse(node,null,!0),node.status="loaded",
err||this.expand(node,null,!1)}.bind(this)),void this.setOpen(node,!0)}this.setOpen(node,!0)
var i=items.indexOf(node)
if(!ch)return void this._signal("change",node)
if(!(i===-1&&items.length||this.forceEmpty)){ch=[i+1,0].concat(ch),items.splice.apply(items,ch)
for(var j=2;j<ch.length;j++){var childNode=ch[j]
this.isOpen(childNode)?(this.setOpen(childNode,!1),this.open(childNode,deep-1,silent)):deep>0&&this.open(childNode,deep-1,silent)

}this.rows=items.length,silent||this._signal("expand",node)}}}},this.close=this.collapse=function(node,deep,silent){
"number"!=typeof deep&&(deep=deep?1e3:0)
var items=this.visibleItems,isRoot=node===this.root
if(isRoot){if(this.setOpen(node,!1),deep)for(var i=0;i<items.length;i++){var ch=items[i]
ch.isRoot||this.isOpen(ch)&&ch.$depth-node.$depth<deep&&(this.setOpen(ch,!1),silent||this._signal("collapse",ch))

}return items.length=0,void(isRoot&&this.open(this.root,0,silent))}if(node&&this.isOpen(node)){var i=items.indexOf(node)


if(i!==-1){for(var thisDepth=node.$depth,deletecount=0,t=i+1;t<items.length&&items[t].$depth>thisDepth;t++)deletecount++


if(deep)for(var j=0;j<deletecount;j++){var ch=items[j+i]
this.isOpen(ch)&&ch.$depth-node.$depth<deep&&(this.setOpen(ch,!1),silent||this._signal("collapse",ch))

}items.splice(i+1,deletecount),this.setOpen(node,!1),silent||this._signal("collapse",node),isRoot&&this.open(this.root,0,silent)

}}},this.toggleNode=function(node,deep,silent){node&&this.isOpen(node)?this.close(node,deep,silent):this.open(node,deep,silent)

},this.sort=function(children,compare){return compare||(compare=alphanumCompare),children.sort(function(a,b){
var aChildren=a.children||a.map,bChildren=b.children||b.map
return aChildren&&!bChildren?-1:!aChildren&&bChildren?1:compare(a.label||"",b.label||"")})},this.setFilter=function(fn){
this.$filterFn=fn,this.setRoot(this.root)},this.getChildren=function(node){var children=node.children


if(!children){if("pending"===node.status)return
node.map?children=Object.keys(node.map).map(function(key){var ch=node.map[key]
return ch.parent=node,ch}):node.items&&(children=node.items),children&&(node.children=children)}var ch=children&&children[0]&&children[0]


if(ch){var d=node.$depth+1||0
children.forEach(function(n){n.$depth=d,n.parent=node})}return this.$filterFn&&(children=children&&children.filter(this.$filterFn)),
this.$sortNodes&&!node.$sorted&&children&&this.sort(children),children},this.loadChildren=null,this.shouldLoadChildren=function(node,ch){
return"pending"===node.status},this.hasChildren=function(node){return node.children?0!==node.children.length:node.map||"pending"===node.status||node.items&&node.items.length

},this.findNodeByPath=function(){},this.getSibling=function(node,dir){dir||(dir=1)
var parent=node.parent,ch=this.getChildren(parent),pos=ch.indexOf(node)
return ch[pos+dir]},this.getNodeAtIndex=function(i){return this.visibleItems[i]},this.getIndexForNode=function(node){
return this.visibleItems.indexOf(node)},this.getMinIndex=function(){return 0},this.getMaxIndex=function(){
return this.visibleItems.length-1},this.setOpen=function(node,val){return node.isOpen=val},this.isOpen=function(node){
return node.isOpen},this.isVisible=function(node){return this.visibleItems.indexOf(node)!==-1},this.isSelected=function(node){
return node.isSelected},this.setSelected=function(node,val){return node.isSelected=!!val},this.isSelectable=function(node){
return!node||!(node.noSelect||node.$depth<0)},this.isAncestor=function(node,child){do if(child==node)return!0
while(child=child.parent)
return!1},this.setAttribute=function(node,name,value){node[name]=value,this._signal("change",node)},this.getDataRange=function(rows,columns,callback){
var view=this.visibleItems.slice(rows.start,rows.start+rows.length)
return callback(null,view,!1),view},this.getRange=function(top,bottom){var start=Math.floor(top/this.rowHeight),end=Math.ceil(bottom/this.rowHeight)+1,range=this.visibleItems.slice(start,end)


return range.count=start,range.size=this.rowHeight*range.count,range},this.getTotalHeight=function(top,bottom){
return this.rowHeight*this.visibleItems.length},this.getNodePosition=function(node){var i=this.visibleItems.indexOf(node)


i==-1&&node&&node.parent&&(i=this.visibleItems.indexOf(node.parent))
var top=i*this.rowHeight,height=this.rowHeight
return{top:top,height:height}},this.findItemAtOffset=function(offset,clip){var index=Math.floor(offset/this.rowHeight)


return clip&&(index=Math.min(Math.max(0,index),this.visibleItems.length-1)),this.visibleItems[index]},
this.getIconHTML=function(node){return""},this.getClassName=function(node){return(node.className||"")+("loading"==node.status?" loading":"")

},this.setClass=function(node,name,include){node.className=node.className||"",dom.setCssClass(node,name,include),
this._signal("changeClass")},this.redrawNode=null,this.getCaptionHTML=function(node){return escapeHTML(node.label||node.name||("string"==typeof node?node:""))

},this.getContentHTML=null,this.getEmptyMessage=function(){return this.emptyMessage||""},this.getText=function(node){
return node.label||node.name||""},this.getRowIndent=function(node){return node.$depth},this.hideAllNodes=function(){
this.visibleItems=[],this.forceEmpty=!0,this.setRoot(this.root)},this.showAllNodes=function(){this.forceEmpty=!1,
this.setRoot(this.root)}}).call(DataProvider.prototype),DataProvider.alphanumCompare=alphanumCompare,
DataProvider.prototype.alphanumCompare=alphanumCompare,DataProvider.variableHeightRowMixin=function(){
var reset=function(){this.$cachedTotalHeight=0}.bind(this)
this.on("collapse",reset),this.on("expand",reset),this.getNodePosition=function(node){var i=this.visibleItems.indexOf(node)


i==-1&&node&&node.parent&&(i=this.visibleItems.indexOf(node.parent))
for(var items=this.visibleItems,top=0,height=0,index=0;index<i;index++)height=this.getItemHeight(items[index],index),
top+=height
return height=this.getItemHeight(items[i],i),{top:top,height:height}},this.findIndexAtOffset=function(offset,clip){
for(var items=this.visibleItems,top=0,index=0,l=items.length;index<l;){var height=this.getItemHeight(items[index],index)


if(top+=height,index++,top>=offset){index--,top-=height
break}}return clip&&(index=Math.min(Math.max(0,index),items.length-1)),index},this.findItemAtOffset=function(offset,clip){
var index=this.findIndexAtOffset(offset,clip)
return this.visibleItems[index]},this.getItemHeight=function(node,index){return node.height||this.rowHeight

},this.getRange=function(top,bottom){for(var items=this.visibleItems,startH=0,index=0,l=items.length;index<l;){
var height=this.getItemHeight(items[index],index)
if(startH+=height,index++,startH>=top){index--,startH-=height
break}}index=Math.min(Math.max(0,index),items.length-1)
var start=index,end=this.findIndexAtOffset(bottom,!0)+1,range=this.visibleItems.slice(start,end)
return range.count=start,range.size=startH,range},this.getTotalHeight=function(){if(!this.$cachedTotalHeight){
for(var items=this.visibleItems,height=0,index=0;index<items.length;index++)height+=this.getItemHeight(items[index],index)


this.$cachedTotalHeight=height}return this.$cachedTotalHeight}},module.exports=DataProvider})


define("plugins/c9.ide.collab/members/membersdp",[],function(require,exports,module){function DataProvider(root){
BaseClass.call(this,root||{}),this.rowHeight=22,this.rowHeightInner=20,this.expandedList=Object.create(null),
this.selectedList=Object.create(null),Object.defineProperty(this,"loaded",{get:function(){return this.visibleItems.length

}})}var oop=require("ace/lib/oop"),BaseClass=require("ace_tree/data_provider"),escapeHTML=require("ace/lib/lang").escapeHTML


return oop.inherits(DataProvider,BaseClass),function(){this.$sortNodes=!1,this.getEmptyMessage=function(){
return"Loading Members..."},this.getContentHTML=function(datarow){var nameHTML=escapeHTML(datarow.name||"")


if("file"==datarow.type)return"<span style='line-height:"+this.rowHeightInner+"px'>"+nameHTML+"</span>"


if(!datarow.uid)return"<span class='root "+(datarow.className||"")+"'>"+nameHTML+"</span>"
var access=datarow.acl||"r",canAccessControl=this.iAmAdmin&&!datarow.isAdmin,disabledLabel="r"==access?"<div class='readbutton'>R</div>":"<div class='writebutton'>RW</div>",status=datarow.onlineStatus||"offline",color=datarow.color||"transparent",html=["<span class='caption'>"+nameHTML+"</span>\n","<span class='status ",status,"'></span>\n","<span class='collaborator_color' style='background-color: ",color,";'></span>\n",canAccessControl?"<div class='access_control "+access+"'><div class='readbutton'>R</div><div class='writebutton'>RW</div></div><div class='kickout'></div>\n":"<div class='access_control disabled'>"+disabledLabel+"</div>\n"+("You"!=datarow.name||datarow.isAdmin?"":"<div class='kickout'></div>\n")]


return html.join("")},this.getClassName=function(node){return node.className||""},this.setOpen=function(node,val){
return node.id?void(val?this.expandedList[node.id]=val:delete this.expandedList[node.id]):node.isOpen=val

},this.isOpen=function(node){return node.id?this.expandedList[node.id]:node.isOpen},this.isSelected=function(node){
return node.id?this.selectedList[node.id]:node.isSelected},this.setSelected=function(node,val){return node.id?void(val?this.selectedList[node.id]=!!val:delete this.selectedList[node.id]):node.isSelected=!!val

},this.loadChildren=function(node){},this.shouldLoadChildren=function(node,ch){return node.client?"pending"===node.client.status:node.children&&"pending"===node.children.status

},this.hasChildren=function(node){return node.children}}.call(DataProvider.prototype),DataProvider})


define("plugins/c9.ide.collab/members/members_panel",[],function(require,exports,module){"use strict"


function main(options,imports,register){function MembersPanel(developer,deps,options){function draw(options){
if(!drawn){drawn=!0,parent=options.aml,membersTree=new Tree(parent.$int),membersDataProvider=new TreeData,
membersTree.renderer.setTheme({cssClass:"memberstree"}),membersTree.renderer.setScrollMargin(0,10),membersTree.setDataProvider(membersDataProvider),
membersTree.on("mousedown",function(e){var domTarget=e.domEvent.target,node=e.getNode()
if(node&&domTarget&&!e.domEvent.button){var className=domTarget.classList
membersDataProvider.selection.selectNode(node),className.contains("access_control")&&(className.contains("rw")?(className.remove("rw"),
className.add("r")):(className.remove("r"),className.add("rw")))}}),membersTree.on("mouseup",function(e){
var domTarget=e.domEvent.target,node=e.getNode()
if(node&&domTarget&&!e.domEvent.button&&!e.editor.$mouseHandler.isMousePressed){var className=domTarget.classList


membersDataProvider.selection.selectNode(node),className.contains("access_control")?updateAccess("rw"==node.acl?"r":"rw"):"kickout"==className&&removeMember()

}}),membersTree.on("dblclick",function(e){var domTarget=e.domEvent.target,node=e.getNode()
node&&domTarget&&domTarget.classList.contains("ace_tree_cells")&&"file"==node.type&&(e.stop(),revealUser())

}),membersDataProvider.loadChildren=function(node,cb){node.clientId&&(node.client&&(node.client.status="loading"),
node.children.status="loading",collab.listOpenFiles(node.clientId,function(){cb&&cb(),node.children.status="loaded",
onWorkspaceSync()}))}
var mnuCtxTree=new Menu({id:"mnuMembers",items:[new MenuItem({caption:"Request Read+Write Access",match:function(item,node){
item.setAttribute("visible",!workspace.accessInfo.member)},onclick:accessControl.requestAccess}),new MenuItem({
caption:"Leave workspace",match:function(item,node){return item.setAttribute("visible",!workspace.accessInfo.admin),
"You"==node.name},onclick:removeMember.bind(null,"rw")}),new MenuItem({caption:"Grant Read+Write Access",
match:function(item,node){return item.setAttribute("visible",workspace.accessInfo.admin),"r"==node.acl

},onclick:updateAccess.bind(null,"rw")}),new MenuItem({caption:"Revoke Write Access",match:function(item,node){
return item.setAttribute("visible",workspace.accessInfo.admin),"rw"==node.acl&&!node.isAdmin},onclick:updateAccess.bind(null,"r")
}),new MenuItem({caption:"Revoke Access",match:function(item,node){return item.setAttribute("visible",workspace.accessInfo.admin),
!node.isAdmin},onclick:removeMember}),new Divider,new MenuItem({caption:"Show Location",match:"online",
onclick:revealUser})]},plugin)
mnuCtxTreeEl=mnuCtxTree.aml,mnuCtxTree.on("show",function(){var node=getSelectedMember()||{}
return node.uid?void mnuCtxTreeEl.childNodes.forEach(function(item){var match=item.match,disabled=!1
"online"==match?disabled=!node.clientId:"function"==typeof match&&(disabled=0==match(item,node)),item.setAttribute("disabled",disabled)

}):mnuCtxTreeEl.hide()}),parent.setAttribute("contextmenu",mnuCtxTreeEl),window.addEventListener("resize",resize,!0),
parent.on("resize",resize),membersTree.container.style.position="relative",membersTree.container.style.top="0px"

}}function hide(){workspace.off("sync",onWorkspaceSync)}function alertIfError(err){err&&showError("Error","Members Panel Error",err.message)

}function show(){workspace.loadMembers(alertIfError),workspace.off("sync",onWorkspaceSync),workspace.on("sync",onWorkspaceSync),
setTimeout(resize)}function resize(){var next=parent,h=0
if(parent.parentNode&&parent.parentNode.visible){if(!options.autoSize||"frame"!=parent.tagName)return membersTree.resize()


var m1="m"==next.state[0]
next=next.nextSibling
var m2=next&&"m"==next.state[0]
next=next&&next.nextSibling
var m3=next&&"m"==next.state[0]
if(!m1){m2&&m3&&(membersTree.renderer.setOption("maxLines",0),h=parent.$ext.parentNode.clientHeight-3*parent.$ext.firstElementChild.clientHeight)


var rowHeight=membersTree.provider.rowHeight,maxLines=Math.max(h||window.innerHeight/2-60,60)/rowHeight


membersTree.renderer.setOption("maxLines",maxLines),membersTree.resize()}}}function updateAccess(acl){
var node=getSelectedMember(),uid=node.uid
workspace.updateAccess(uid,acl,alertIfError)}function removeMember(){var node=getSelectedMember(),isPublic=workspace.accessInfo["private"]===!1


confirm("Remove Member?","Are you sure you want to "+("You"==node.name?"leave ":"remove '"+node.name+"' out of your ")+"workspace '"+info.getWorkspace().name+"'?","People who are not members of a workspace, can not "+(isPublic?"":"read, ")+"write or collaborate on that workspace ",function(){
var uid=node.uid
workspace.removeMember(uid,alertIfError)},function(){},{yes:"You"==node.name?"Leave":"Remove Member",
no:"Cancel"})}function revealUser(){var node=getSelectedMember(),clientId=node&&node.clientId
clientId&&collab.revealUser(clientId,node.tabId)}function getSelectedMember(){return membersTree.selection.getCursor()

}function onWorkspaceSync(){function memberCompartor(m1,m2){return m1.name>m2.name}var me=info.getUser(),membersById=membersDataProvider.byId||(membersDataProvider.byId={}),members={
r:[],rw:[]},myRow={},myClientId=workspace.myClientId,cachedMembers=workspace.members,users=workspace.users


cachedMembers.length||(cachedMembers=[{acl:"r",name:"You",pending:!1,role:"v",uid:me.id,email:me.email
}],membersDataProvider.byId=null),cachedMembers.forEach(function(newM){var m=membersById[newM.uid]||(membersById[newM.uid]={})


for(var i in newM)m[i]=newM[i]
m.isAdmin=m.role==ROLE_ADMIN,m.color=workspace.getUserColor(m.uid),m.onlineStatus=workspace.getUserState(m.uid),
m.md5Email||(m.md5Email=m.email?apf.crypto.MD5.hex_md5(m.email.trim().toLowerCase()):""),members["rw"==m.acl?"rw":"r"].push(m)


var user=users[m.uid],clientIds=user&&user.clients
m.children=clientIds&&clientIds.length&&clientIds.map(function(k,i){var client,children=null
return options.showTabs&&(client=clientIds[k],client?(client.status||(client.status="pending"),children=client.documents.map(function(x,i){
return{type:"file",name:x,tabId:x,className:i==client.active?"active":"",id:k+"::"+x,clientId:k}}),client.status=client.status||"pending"):user.online&&(children=[],
children.status="pending")),{type:"ide",pending:!0,clientId:k,name:"Ide instance "+i,user:m,children:children,
id:k}}),m.uid==me.id?(m.name="0000",m.status="online",myRow=m,m.clientId=myClientId,m.client=null,m.children&&(m.children=m.children.filter(function(ide){
return ide.clientId!==myClientId}),m.children.length||(m.children=null))):(m.clientId=clientIds&&clientIds[0],
m.client=clientIds&&clientIds[m.clientId],m.children&&1==m.children.length&&(m.pending=!0,m.children=m.children[0].children))

}),members.r.sort(memberCompartor),members.rw.sort(memberCompartor),myRow.name="You",membersDataProvider.iAmAdmin=myRow.isAdmin


var root=membersDataProvider.root
root.rw||(root.rw={name:"Read+Write",children:members.rw,noSelect:!0,clickAction:"toggle",className:"caption",
isOpen:!0},root.r={name:"Read Only",noSelect:!0,clickAction:"toggle",className:"caption",isOpen:!0}),
root.rw.children=members.rw,root.r.children=members.r,root.children=[root.rw,root.r].filter(function(x){
return x.children.length}),membersDataProvider.setRoot(root)}var membersTree,membersDataProvider,parent,plugin=new Plugin(developer,deps),drawn=!1


return plugin.freezePublicAPI.baseclass(),plugin.freezePublicAPI({draw:draw,resize:resize,show:show,hide:hide
}),plugin}var mnuCtxTreeEl,Plugin=imports.Plugin,c9Util=imports.util,apf=imports.apf,Menu=imports.Menu,Divider=imports.Divider,MenuItem=imports.MenuItem,workspace=imports["collab.workspace"],info=imports.info,showError=imports["dialog.error"].show,confirm=imports["dialog.confirm"].show,accessControl=imports.accessControl,collab=imports.collab,Tree=(c9Util.cloneObject,
require("ace_tree/tree")),TreeData=require("./membersdp"),ROLE_ADMIN="a"
register(null,{MembersPanel:MembersPanel})}return main.consumes=["Plugin","ui","util","apf","Menu","MenuItem","Divider","collab.workspace","info","dialog.error","dialog.confirm","accessControl","collab"],
main.provides=["MembersPanel"],main})


define("text!plugins/c9.ide.collab/notifications/notifications.css",[],"")


define("plugins/c9.ide.collab/notifications/notificationsdp",[],function(require,exports,module){function DataProvider(root){
BaseClass.call(this,root||{}),this.rowHeight=50,this.rowHeightInner=48,Object.defineProperty(this,"loaded",{
get:function(){return this.visibleItems.length}})}var oop=require("ace/lib/oop"),BaseClass=require("ace_tree/data_provider")


return oop.inherits(DataProvider,BaseClass),function(){this.$sortNodes=!1,this.emptyMessage="Loading Notifications ...",
this.setRoot=function(root){Array.isArray(root)&&(root={items:root}),this.root=root||{},this.visibleItems=[],
this.open(this.root,!0),this._signal("change")},this.getContentHTML=function(datarow){return datarow.getHTML()

}}.call(DataProvider.prototype),DataProvider})


define("plugins/c9.ide.collab/notifications/notifications",[],function(require,exports,module){"use strict"


function main(options,imports,register){function load(){loaded||(loaded=!0,ui.insertCss(css,staticPrefix,plugin),
notificationsDataProvider=new TreeData,c9.once("ready",function(){setTimeout(loadNotifications,1e4)}),
!options.hosted&&c9.debug&&addNotifications([{name:"Bas de Wachter",uid:8,email:"bas@c9.io",type:"access_request"
},{name:"Mostafa Eweda",uid:1,email:"mostafa@c9.io",type:"access_request"},{name:"Lennart Kats",uid:5,
email:"lennart@c9.io",type:"access_request"},{name:"Ruben Daniels",uid:2,email:"ruben@ajax.org",type:"access_request"
},{name:"Fabian Jakobs",uid:4,email:"fabian@ajax.org",type:"access_request"}]),workspace.on("notification",function(notif){
if(addNotifications(notif),postLoadedNotifications(),!isOpen()){var sound=document.getElementById("chatNotif")


sound&&sound.play()}}))}function draw(options){drawn||(drawn=!0,notificationsParent=options.html,frame=options.aml,
notificationsTree=new Tree(notificationsParent),notificationsTree.renderer.setScrollMargin(0,10),notificationsTree.renderer.setTheme({
cssClass:"notificationstree"}),notificationsTree.setOption("maxLines",3),notificationsTree.setDataProvider(notificationsDataProvider),
notificationsTree.on("mousedown",function(e){var domTarget=e.domEvent.target,pos=e.getDocumentPosition(),notif=notificationsDataProvider.findItemAtOffset(pos.y)


notif&&domTarget&&notif.handleMouseDown(e)}),notificationsTree.on("mouseup",function(e){var domTarget=e.domEvent.target,pos=e.getDocumentPosition(),notif=notificationsDataProvider.findItemAtOffset(pos.y)


notif&&domTarget&&notif.handleMouseUp(e)}),plugin.on("hide",function(e){notificationsTree.renderer.freeze()

}),plugin.on("show",function(e){notificationsTree.renderer.unfreeze(),notificationsTree.renderer.$loop.schedule(notificationsTree.renderer.CHANGE_FULL)

}),cachedNotifications.length||frame.minimize(),postLoadedNotifications(),frame.on("resize",resize),setTimeout(resize,150))

}function loadNotifications(){return options.isAdmin&&options.hosted?void api.collab.get("members/list?pending=1",function(err,members){
if(err&&(0===err.code||503===err.code))return setTimeout(loadNotifications,2e4)
if(err)return showError(err)
if(Array.isArray(members)){var notifs=members.map(function(m){return m.type="access_request",m})
cachedNotifications=[],addNotifications(notifs),postLoadedNotifications()}}):postLoadedNotifications()

}function resize(){var count=cachedNotifications.length
bubble||(!panels.panels.collab.enabled&&count&&panels.enablePanel("collab"),panelButton=document.querySelector(".panelsbutton.collab"),
panelButton&&(bubble=panelButton.appendChild(document.createElement("div")),bubble.className="newnotifs")),
bubble&&(count?(bubble.textContent=count,bubble.style.display="block",bubble.className="newnotifs size"+String(count).length):bubble.style.display="none"),
drawn&&("m"!=frame.state[0]?(frame.$ext.style.height=count?50*Math.min(count,3)+22+"px":"50px",notificationsTree.resize()):frame.$ext.style.height="0")

}function postLoadedNotifications(){resize(),drawn&&(notificationsDataProvider.emptyMessage="No pending notifications",
frame.setAttribute("caption","Notifications ("+cachedNotifications.length+")"),onNotificationsLoaded())

}function addNotifications(notifs){Array.isArray(notifs)||(notifs=[notifs]),frame&&frame.restore(),notifs.forEach(function(notif){
var NotifConstructor=NOTIFICATION_TYPES[notif.type]
NotifConstructor||console.error("Invalid notification type:",notif.type),cachedNotifications.push(new NotifConstructor(notif))

}),notificationsDataProvider&&notificationsDataProvider.setRoot(cachedNotifications)}function onNotificationsLoaded(){
frame&&cachedNotifications.length&&frame.restore()}function isOpen(){return panels.isActive("collab")&&frame&&"m"!=frame.state[0]

}function Notification(datarow){this.datarow=datarow}function AccessRequestNotification(datarow){datarow.md5Email=datarow.email?apf.crypto.MD5.hex_md5(datarow.email.trim().toLowerCase()):"",
this.datarow=datarow}var notificationsParent,notificationsTree,notificationsDataProvider,frame,panelButton,bubble,CollabPanel=imports.CollabPanel,c9=imports.c9,ui=imports.ui,api=imports.api,panels=imports.panels,alert=imports["dialog.alert"].show,showError=imports["dialog.error"].show,workspace=imports["collab.workspace"],css=require("text!./notifications.css"),staticPrefix=options.staticPrefix,oop=require("ace/lib/oop"),Tree=require("ace_tree/tree"),TreeData=require("./notificationsdp"),plugin=new CollabPanel("Ajax.org",main.consumes,{
name:"notifications",index:150,caption:"Notifications",height:"20%"}),NOTIFICATION_TYPES={},loaded=!1,drawn=!1,cachedNotifications=[]

;(function(){this.getHTML=function(datarow){throw new Error("No impl found - getHTML")},this.handleMouseDown=function(){
throw new Error("No impl found - handleMouseDown")},this.remove=function(){var _self=this
cachedNotifications=cachedNotifications.filter(function(notif){return notif!==_self}),notificationsDataProvider.setRoot(cachedNotifications),
postLoadedNotifications()}}).call(Notification.prototype),oop.inherits(AccessRequestNotification,Notification),
function(){this.getHTML=function(){var datarow=this.datarow,avatarImg='<img class="gravatar-image" src="https://secure.gravatar.com/avatar/'+datarow.md5Email+'?s=37&d=retro" />',html=["<span class='avatar'>",avatarImg,"</span>","<span class='body'>","<span class='caption'>",datarow.name,"</span>"," requests access to this workspace</span>","<span class='actions access_request'>",'<div class="standalone access_control rw">','<div class="readbutton">R</div><div class="writebutton">RW</div>',"</div>",'<div class="btn-default-css3 btn-green grant">','<div class="caption">Grant</div>',"</div>",'<div class="btn-default-css3 btn-red deny">','<div class="caption">Deny</div>',"</div>","</span>"]


return html.join("")},this.acceptRequest=function(access){function requestAccepted(){datarow.acl=access,
workspace.addMemberNonPubSub(datarow),_self.remove()}var _self=this
if(!options.hosted)return requestAccepted()
var datarow=this.datarow,uid=datarow.uid
api.collab.post("accept_request",{body:{uid:uid,access:access}},function(err,data,res){if(err){var message=err.message||err,user=workspace.getUser(uid)


return user&&!user.pending||/ isn't a pending workspace member/.test(message)?_self.remove():alert("Error",message)

}requestAccepted()})},this.denyRequest=function(){function requestDenied(){_self.remove()}var _self=this


if(!options.hosted)return requestDenied()
var uid=this.datarow.uid
api.collab.post("deny_request",{body:{uid:uid}},function(err,data,res){if(err){var message=err.message||err,user=workspace.getUser(uid)


return!user||/ isn't a member of project /.test(message)?_self.remove():alert("Error",message)}requestDenied()

})},this.handleMouseDown=function(e){var target=e.domEvent.target
if(!e.domEvent.button){var className=target.classList
if(className.contains("access_control")){var actionArr=className.contains("rw")?["rw","r"]:["r","rw"]


return className.remove(actionArr[0]),void className.add(actionArr[1])}}},this.handleMouseUp=function(e){
var target=e.domEvent.target,className=target.classList
if(!e.domEvent.button&&!e.editor.$mouseHandler.isMousePressed)if(className.contains("grant")){var rwClassName=target.previousSibling.classList,access=rwClassName.contains("rw")?"rw":"r"


this.acceptRequest(access)}else className.contains("deny")&&this.denyRequest()}}.call(AccessRequestNotification.prototype),
NOTIFICATION_TYPES.access_request=AccessRequestNotification,plugin.on("load",function(){load(),plugin.once("draw",draw)

}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),plugin.on("unload",function(){loaded=!1,
drawn=!1,cachedNotifications=[],notificationsTree&&notificationsTree.destroy(),notificationsDataProvider=null,
notificationsTree=null,notificationsParent=null,frame=null,panelButton=null,bubble=null}),plugin.freezePublicAPI({
addNotifications:addNotifications}),register(null,{notifications:plugin})}return main.consumes=["CollabPanel","ui","api","dialog.alert","dialog.error","c9","panels","collab.workspace"],
main.provides=["notifications"],main})


define("text!plugins/c9.ide.collab/timeslider/timeslider.html",[],'<div id="timeslider-top">\n    <div id="timeslider" class="btnclose" unselectable="on">\n        <span id="revision_info">\n            <strong id="revision_label"></strong>\n            <span> - </span>\n            <span id="revision_date"></span>\n        </span>\n        <div id="timeslider-slider">\n            <div id="ui-slider-handle" title="Revision slider" style="left: 1177px;">\n                <span></span>\n            </div>\n            <div id="ui-slider-progress"></div>\n            <div id="ui-slider-bar">\n                <div id="slide-bar-bar"></div>\n            </div>\n        </div>\n        <div id="playpause_button_border"></div>\n        <div id="playpause_button" title="Playback file history">\n            <div id="playpause_button_icon"></div>\n        </div>\n        <div class="stepper" id="leftstep" title="Step revision backward"></div>\n        <div class="stepper" id="rightstep" title="Step revision forward"></div>\n        <div id="revert_to_rev" class="revert" title="Revert to revision">Revert</div>\n        <a id="timeslider_close" class="close" href="javascript:void(0)" title="Close timeslider"> </a>\n    </div>\n</div>\n')


define("text!plugins/c9.ide.collab/timeslider/timeslider.css",[],"")


define("plugins/c9.ide.collab/timeslider/timeslider",[],function(require,exports,module){"use strict"


function main(options,imports,register){function load(callback){if(loaded)return!1
loaded=!0,commands.addCommand({name:"toggleTimeslider",exec:toggleTimeslider,isAvailable:timesliderAvailable
},plugin),commands.addCommand({name:"forceToggleTimeslider",exec:function(){var isVisible=settings.getBool(tsVisibleKey)


settings.set(tsVisibleKey,!isVisible),toggleTimeslider()},isAvailable:timesliderAvailable},plugin),menus.addItemByPath("File/Show File Revision History",new ui.item({
type:"check",checked:""+tsVisibleKey,command:"toggleTimeslider"}),1240,plugin),menus.addItemByPath("File/~",new ui.divider,1250,plugin),
settings.on("read",function(){settings.set(tsVisibleKey,!1)},plugin)
var mnuCtxEditorFileHistory=new ui.item({caption:"File History",command:"forceToggleTimeslider"},plugin)


ace.getElement("menu",function(menu){menus.addItemToMenu(menu,mnuCtxEditorFileHistory,500,plugin),menus.addItemToMenu(menu,new ui.divider,550,plugin),
menu.on("prop.visible",function(e){if(e.value){var editor=tabs.focussedTab.editor
timesliderAvailable(editor)?mnuCtxEditorFileHistory.enable():mnuCtxEditorFileHistory.disable()}})}),tabs.on("paneDestroy",function(e){
tabs.getPanes(tabs.container).length||forceHideSlider()},plugin),tabs.on("focusSync",function(e){util.nextFrame(function(){
var doc=getTabCollabDocument(e.tab)
if(activeDocument&&isVisible){if(activeDocument==doc)return
hide(),isVisible=!0}if(activeDocument=doc,isVisible){if(!doc)return forceHideSlider()
show(),doc.loadRevisions()}})},plugin),save.on("beforeSave",function(e){if(isVisible)return!1},plugin),
plugin.on("slider",function(revNum){activeDocument&&isVisible&&schedule(revNum)})}function schedule(revNum){
lastRevNum=revNum,scheduled||util.nextFrame(function(){lastRevNum&&activeDocument.updateToRevision(lastRevNum),
scheduled=!1})}function draw(){function $(id){return document.getElementById(id)}if(!drawn){drawn=!0,
ui.insertHtml(null,html,plugin),ui.insertCss(css,staticPrefix,plugin)
var ext=$("timeslider-top")
timeslider=$("timeslider"),timesliderClose=$("timeslider_close"),slider=$("timeslider-slider"),sliderBar=$("ui-slider-bar"),
sliderProgress=$("ui-slider-progress"),handle=$("ui-slider-handle"),playButton=$("playpause_button"),
playButtonIcon=$("playpause_button_icon"),revisionInfo=$("revision_info"),revisionDate=$("revision_date"),
revisionLabel=$("revision_label"),leftStep=$("leftstep"),rightStep=$("rightstep"),revertButton=$("revert_to_rev")


var tbcont=tabs.container,box=new ui.vsplitbox({})
tbcont.parentNode.insertBefore(box,tbcont.nextSibling),container=box.appendChild(new ui.bar({height:64
})),container.$ext.appendChild(ext),box.appendChild(tbcont),box.$ext.style.top=0,timesliderClose.addEventListener("click",forceHideSlider),
disableSelection(playButton),disableSelection(timeslider),layout.on("resize",function(){updateSliderElements()

},plugin),slider.addEventListener("mousedown",function(evt){"star"!=evt.target.className||sliderActive||onBarMouseDown(evt)

}),sliderBar.addEventListener("mousedown",onBarMouseDown),handle.addEventListener("mousedown",onHandleMouseDown),
playButton.addEventListener("mousedown",function(evt){playButton.addEventListener("mouseup",function onMouseUp(evt2){
playButton.removeEventListener("mouseup",onMouseUp),playpause()}),document.addEventListener("mouseup",function onMouseUp(evt2){
document.removeEventListener("mouseup",onMouseUp)})}),revertButton.addEventListener("click",function(){
return isRevertAvailable()?(console.log("Revert",activeDocument.id,"to rev",sliderPos),hide(),void activeDocument.revertToRevision(sliderPos)):console.log("Revert not available")

})
var steppers=[leftStep,rightStep]
steppers.forEach(function(stepper){stepper.addEventListener("mousedown",function(evt){var origcss=stepper.style["background-position"]


origcss||(origcss=stepper.style["background-position-x"].split("px")[0]+" "+stepper.style["background-position-y"].split("px")[0])


var origpos=parseInt(origcss.split(" ")[1],10),newpos=origpos-43
newpos<0&&(newpos+=87)
var newcss=origcss.split(" ")[0]+" "+newpos+"px"
1!=stepper.style.opacity&&(newcss=origcss),stepper.style["background-position"]=newcss
var pos,nextStar,i
stepper.addEventListener("mouseup",function onMouseUp(evt2){stepper.style["background-position"]=origcss,
stepper.removeEventListener("mouseup",onMouseUp)}),document.addEventListener("mouseup",function onMouseUp(evt2){
stepper.style["background-position"]=origcss,document.removeEventListener("mouseup",onMouseUp)})
var id=stepper.id
if("leftstep"==id)setSliderPosition(sliderPos-1)
else if("rightstep"==id)setSliderPosition(sliderPos+1)
else if("leftstar"==id){for(nextStar=0,i=0;i<savedRevisionNums.length;i++)pos=savedRevisionNums[i],pos<sliderPos&&nextStar<pos&&(nextStar=pos)


setSliderPosition(nextStar)}else if("rightstar"==id){for(nextStar=sliderLength,i=0;i<savedRevisionNums.length;i++)pos=savedRevisionNums[i],
pos>sliderPos&&nextStar>pos&&(nextStar=pos)
setSliderPosition(nextStar)}})}),emit("draw")}}function disableSelection(element){element.onselectstart=function(){
return!1},element.unselectable="on",element.style.MozUserSelect="none",element.style.cursor="default"

}function cumulativeOffset(element){var top=0,left=0
do top+=element.offsetTop||0,left+=element.offsetLeft||0,element=element.offsetParent
while(element)
return{top:top,left:left}}function setHandleLeft(pos){handle.style.left=pos+"px",sliderProgress.style.width=pos-sliderBar.offsetLeft+10+"px"

}function onBarMouseDown(evt){var newloc=evt.clientX-cumulativeOffset(sliderBar).left,newSliderPos=Math.round(newloc*sliderLength/(sliderBar.offsetWidth-2))


setHandleLeft(calcHandlerLeft(newSliderPos)),onHandleMouseDown(evt)}function onHandleMouseDown(evt){function calcSliderPos(clientX){
var newloc=currentLoc+(clientX-startLoc)-LEFT_PADDING
newloc<0&&(newloc=0)
var barWidth=sliderBar.offsetWidth-2
return newloc>barWidth&&(newloc=barWidth),Math.round(newloc*sliderLength/barWidth)}function clamp(clientX){
var newloc=currentLoc+(clientX-startLoc),handleOverflow=handle.offsetWidth/2
return newloc<sliderBar.offsetLeft-handleOverflow+1&&(newloc=sliderBar.offsetLeft-handleOverflow+1),newloc>sliderBar.offsetLeft+sliderBar.offsetWidth-handleOverflow-1&&(newloc=sliderBar.offsetLeft+sliderBar.offsetWidth-handleOverflow-1),
newloc}function onMouseMove(evt2){handle.style.pointer="move",handle.style.transition="none",sliderProgress.style.transition="none"


var newSliderPos=calcSliderPos(evt2.clientX)
revisionLabel.textContent="Version "+newSliderPos,setHandleLeft(clamp(evt2.clientX)),sliderPos!=newSliderPos&&(sliderPos=newSliderPos,
emit("slider",newSliderPos))}function onMouseUp(evt2){document.removeEventListener("mousemove",onMouseMove),
document.removeEventListener("mouseup",onMouseUp),sliderActive=!1
var newSliderPos=calcSliderPos(evt2.clientX)
currentLoc=calcHandlerLeft(newSliderPos),setHandleLeft(currentLoc),setSliderPosition(newSliderPos),handle.style.transition="left .1s",
sliderProgress.style.transition="width .1s"}var startLoc=evt.clientX,currentLoc=parseInt(handle.style.left.split("px")[0],10)


sliderActive=!0,document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",onMouseUp)

}function isRevertAvailable(){return!sliderPlaying&&!sliderActive&&!isLoading&&activeDocument&&sliderLength&&sliderPos!==sliderLength

}function updateSliderElements(){for(var prevX,prevStar,firstHidden,i=0;i<savedRevisions.length;i++){
var star=savedRevisions[i],position=parseInt(star.pos,10),x=calcHandlerLeft(position)-1
x-prevX<2*starWidth?(prevStar&&(prevStar.style.opacity=.15),prevStar=star,firstHidden?x-firstHidden>5*starWidth&&(firstHidden=prevStar=null):firstHidden=x):firstHidden=prevStar=null,
prevX=x,star.style.left=x+"px",star.style.opacity=1}setHandleLeft(calcHandlerLeft(sliderPos))}function addSavedRevision(revision){
var position=revision.revNum,newSR=document.createElement("div")
newSR.className="star",newSR.title="File Saved on "+dateFormat(revision.updated_at),newSR.pos=position,
newSR.style.left=calcHandlerLeft(position)-1+"px",slider.appendChild(newSR),newSR.addEventListener("mouseup",function(){
setSliderPosition(position)}),savedRevisions.push(newSR),savedRevisionNums.push(position),position===sliderPos&&setSliderPosition(position)

}function setSavedRevisions(revisions){toArray(slider.getElementsByClassName("star")).forEach(function(star){
star.remove()}),savedRevisions=[],savedRevisionNums=[],revisions.forEach(function(revision){addSavedRevision(revision)

})}function toArray(arg){return Array.prototype.slice.apply(arg)}function zpad(str,length){for(str+="";str.length<length;)str="0"+str


return str}function dateFormat(time){var date=new Date(time),month=["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"][date.getMonth()],day=zpad(date.getDate(),2),year=date.getFullYear(),hours=zpad(date.getHours(),2),minutes=zpad(date.getMinutes(),2),seconds=zpad(date.getSeconds(),2)


return[month," ",day,", ",year," ",hours,":",minutes,":",seconds].join("")}function updateTimer(time){
revisionDate.textContent=dateFormat(time)}function calcHandlerLeft(pos){var left=pos*(sliderBar.offsetWidth-2)/(1*sliderLength)


return left=(left||0)+LEFT_PADDING}function setSliderPosition(newpos){newpos=Number(newpos),newpos<0||newpos>sliderLength||(setHandleLeft(calcHandlerLeft(newpos)),
savedRevisionNums.indexOf(newpos)===-1?(revisionLabel.textContent="Version "+newpos,revisionLabel.className="revision_label"):(revisionLabel.textContent="Saved Version "+newpos,
revisionLabel.className="revision_label saved"),0===newpos?leftStep.className="stepper disabled":leftStep.className="stepper",
newpos==sliderLength?rightStep.className="stepper disabled":rightStep.className="stepper",sliderPos=newpos,
updateRevertVisibility(),emit("slider",newpos))}function updateRevertVisibility(){isRevertAvailable()?revertButton.className="revert":revertButton.className="revert disabled"

}function getSliderLength(){return sliderLength}function setSliderLength(newlength){sliderLength=newlength,
updateSliderElements()}function playButtonUpdater(){if(sliderPlaying){if(sliderPos+1>sliderLength)return dom.toggleCssClass(playButtonIcon,"pause"),
void(sliderPlaying=!1)
setSliderPosition(sliderPos+1),setTimeout(playButtonUpdater,100)}}function playpause(){return isVisible?(dom.toggleCssClass(playButtonIcon,"pause"),
void(sliderPlaying?(sliderPlaying=!1,updateRevertVisibility()):(sliderPos==sliderLength&&setSliderPosition(0),
sliderPlaying=!0,playButtonUpdater()))):console.error("[Timeslider] Can't playpause while not visible")

}function useStoredState(e){e.state.filter&&e.doc.meta.$storedState1?e.state=e.doc.meta.$storedState1:!e.state.filter&&e.doc.meta.$storedState0&&(e.state=e.doc.meta.$storedState0)

}function show(){draw(),container.show(),clearInterval(resizeInterval)
var oldWidth=timeslider.offsetWidth
if(resizeInterval=setInterval(function(){timeslider.offsetWidth!==oldWidth&&(updateSliderElements(),oldWidth=timeslider.offsetWidth)

},100),isVisible=!0,activeDocument){var tab=activeDocument.original.tab,aceEditor=tab.editor.ace
aceEditor.setReadOnly(!0),aceEditor.keyBinding.addKeyboardHandler(timesliderKeyboardHandler),aceEditor.renderer.onResize(!0)


var doc=activeDocument.original
doc.meta.$storedState0=doc.getState(),doc.meta.$storedState1=doc.getState(!0),doc.on("getState",useStoredState)

}emit("visible",isVisible)}function hide(){if(draw(),sliderPlaying&&playpause(),container.hide(),clearInterval(resizeInterval),
isVisible=!1,activeDocument){activeDocument.loaded&&activeDocument.updateToRevision()
var tab=activeDocument.original.tab,aceEditor=tab.editor.ace
aceEditor.keyBinding.removeKeyboardHandler(timesliderKeyboardHandler),aceEditor.setReadOnly(!!c9.readonly),
aceEditor.renderer.onResize(!0)
var doc=activeDocument.original
delete doc.meta.$storedState0,delete doc.meta.$storedState1,doc.off("getState",useStoredState)}emit("visible",isVisible)

}function getTabCollabDocument(tab){var session=tab.path&&tab.document.getSession()
if(!session)return!1
var aceSession=session.session
return aceSession&&aceSession.collabDoc}function toggleTimeslider(){isVisible?(activeDocument&&activeDocument.loaded&&activeDocument.updateToRevision(),
lastRevNum=null,hide()):(show(),lastRevNum=null,activeDocument&&activeDocument.loadRevisions())}function timesliderAvailable(editor){
if(!editor||"ace"!==editor.type)return!1
var aceEditor=editor.ace,collabDoc=aceEditor.session.collabDoc
return!!collabDoc}function forceHideSlider(){var tsVisible=isVisible||settings.getBool(tsVisibleKey)
tsVisible&&(settings.set(tsVisibleKey,!1),toggleTimeslider())}function setLoading(loading){loading!==isLoading&&(isLoading=loading,
loading&&setSavedRevisions([]))}var isLoading,container,timeslider,timesliderClose,slider,sliderBar,handle,playButton,playButtonIcon,revisionInfo,revisionDate,revisionLabel,leftStep,rightStep,revertButton,sliderProgress,activeDocument,scheduled,lastRevNum,resizeInterval,Plugin=imports.Plugin,c9=imports.c9,ui=imports.ui,ace=imports.ace,util=imports.util,tabs=imports.tabManager,settings=imports.settings,menus=imports.menus,layout=imports.layout,commands=imports.commands,save=imports.save,html=require("text!./timeslider.html"),css=require("text!./timeslider.css"),dom=require("ace/lib/dom"),staticPrefix=options.staticPrefix,tsVisibleKey="user/collab/@timeslider-visible",timesliderKeyboardHandler={
handleKeyboard:function(data,hashId,keystring){if("esc"==keystring)return forceHideSlider(),{command:"null"
}}},plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),sliderLength=1e3,sliderPos=0,sliderActive=!1,savedRevisions=[],savedRevisionNums=[],sliderPlaying=!1,LEFT_PADDING=64,loaded=!1,drawn=!1,starWidth=15,isVisible=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({get visible(){return isVisible

},get loading(){return isLoading},set loading(value){setLoading(value)},get activeDocument(){return activeDocument

},get sliderLength(){return getSliderLength()},set sliderLength(len){setSliderLength(len)},get sliderPosition(){
return sliderPos},set sliderPosition(pos){setSliderPosition(pos)},updateTimer:updateTimer,setSavedRevisions:setSavedRevisions,
show:show,hide:hide,playpause:playpause,addSavedRevision:addSavedRevision}),register(null,{timeslider:plugin
})}return main.consumes=["Plugin","c9","ui","ace","tabManager","settings","menus","commands","save","layout","util"],
main.provides=["timeslider"],main})


define("plugins/c9.ide.threewaymerge/diff_match_patch_amd",[],function(require,exports,module){function diff_match_patch(){
this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,
this.Patch_Margin=4,this.Match_MaxBits=32}var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0
diff_match_patch.Diff,diff_match_patch.prototype.diff_main=function(text1,text2,opt_checklines,opt_deadline){
"undefined"==typeof opt_deadline&&(opt_deadline=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout)


var deadline=opt_deadline
if(null==text1||null==text2)throw new Error("Null input. (diff_main)")
if(text1==text2)return text1?[[DIFF_EQUAL,text1]]:[]
"undefined"==typeof opt_checklines&&(opt_checklines=!0)
var checklines=opt_checklines,commonlength=this.diff_commonPrefix(text1,text2),commonprefix=text1.substring(0,commonlength)


text1=text1.substring(commonlength),text2=text2.substring(commonlength),commonlength=this.diff_commonSuffix(text1,text2)


var commonsuffix=text1.substring(text1.length-commonlength)
text1=text1.substring(0,text1.length-commonlength),text2=text2.substring(0,text2.length-commonlength)


var diffs=this.diff_compute_(text1,text2,checklines,deadline)
return commonprefix&&diffs.unshift([DIFF_EQUAL,commonprefix]),commonsuffix&&diffs.push([DIFF_EQUAL,commonsuffix]),
this.diff_cleanupMerge(diffs),diffs},diff_match_patch.prototype.diff_compute_=function(text1,text2,checklines,deadline){
var diffs
if(!text1)return[[DIFF_INSERT,text2]]
if(!text2)return[[DIFF_DELETE,text1]]
var longtext=text1.length>text2.length?text1:text2,shorttext=text1.length>text2.length?text2:text1,i=longtext.indexOf(shorttext)


if(i!=-1)return diffs=[[DIFF_INSERT,longtext.substring(0,i)],[DIFF_EQUAL,shorttext],[DIFF_INSERT,longtext.substring(i+shorttext.length)]],
text1.length>text2.length&&(diffs[0][0]=diffs[2][0]=DIFF_DELETE),diffs
if(1==shorttext.length)return[[DIFF_DELETE,text1],[DIFF_INSERT,text2]]
longtext=shorttext=null
var hm=this.diff_halfMatch_(text1,text2)
if(hm){var text1_a=hm[0],text1_b=hm[1],text2_a=hm[2],text2_b=hm[3],mid_common=hm[4],diffs_a=this.diff_main(text1_a,text2_a,checklines,deadline),diffs_b=this.diff_main(text1_b,text2_b,checklines,deadline)


return diffs_a.concat([[DIFF_EQUAL,mid_common]],diffs_b)}return checklines&&text1.length>100&&text2.length>100?this.diff_lineMode_(text1,text2,deadline):this.diff_bisect_(text1,text2,deadline)

},diff_match_patch.prototype.diff_lineMode_=function(text1,text2,deadline){var a=this.diff_linesToChars_(text1,text2)


text1=a.chars1,text2=a.chars2
var linearray=a.lineArray,diffs=this.diff_main(text1,text2,!1,deadline)
this.diff_charsToLines_(diffs,linearray),this.diff_cleanupSemantic(diffs),diffs.push([DIFF_EQUAL,""])


for(var pointer=0,count_delete=0,count_insert=0,text_delete="",text_insert="";pointer<diffs.length;){
switch(diffs[pointer][0]){case DIFF_INSERT:count_insert++,text_insert+=diffs[pointer][1]
break
case DIFF_DELETE:count_delete++,text_delete+=diffs[pointer][1]
break
case DIFF_EQUAL:if(count_delete>=1&&count_insert>=1){diffs.splice(pointer-count_delete-count_insert,count_delete+count_insert),
pointer=pointer-count_delete-count_insert
for(var a=this.diff_main(text_delete,text_insert,!1,deadline),j=a.length-1;j>=0;j--)diffs.splice(pointer,0,a[j])


pointer+=a.length}count_insert=0,count_delete=0,text_delete="",text_insert=""}pointer++}return diffs.pop(),
diffs},diff_match_patch.prototype.diff_bisect_=function(text1,text2,deadline){for(var text1_length=text1.length,text2_length=text2.length,max_d=Math.ceil((text1_length+text2_length)/2),v_offset=max_d,v_length=2*max_d,v1=new Array(v_length),v2=new Array(v_length),x=0;x<v_length;x++)v1[x]=-1,
v2[x]=-1
v1[v_offset+1]=0,v2[v_offset+1]=0
for(var delta=text1_length-text2_length,front=delta%2!=0,k1start=0,k1end=0,k2start=0,k2end=0,d=0;d<max_d&&!((new Date).getTime()>deadline);d++){
for(var k1=-d+k1start;k1<=d-k1end;k1+=2){var x1,k1_offset=v_offset+k1
x1=k1==-d||k1!=d&&v1[k1_offset-1]<v1[k1_offset+1]?v1[k1_offset+1]:v1[k1_offset-1]+1
for(var y1=x1-k1;x1<text1_length&&y1<text2_length&&text1.charAt(x1)==text2.charAt(y1);)x1++,y1++
if(v1[k1_offset]=x1,x1>text1_length)k1end+=2
else if(y1>text2_length)k1start+=2
else if(front){var k2_offset=v_offset+delta-k1
if(k2_offset>=0&&k2_offset<v_length&&v2[k2_offset]!=-1){var x2=text1_length-v2[k2_offset]
if(x1>=x2)return this.diff_bisectSplit_(text1,text2,x1,y1,deadline)}}}for(var k2=-d+k2start;k2<=d-k2end;k2+=2){
var x2,k2_offset=v_offset+k2
x2=k2==-d||k2!=d&&v2[k2_offset-1]<v2[k2_offset+1]?v2[k2_offset+1]:v2[k2_offset-1]+1
for(var y2=x2-k2;x2<text1_length&&y2<text2_length&&text1.charAt(text1_length-x2-1)==text2.charAt(text2_length-y2-1);)x2++,
y2++
if(v2[k2_offset]=x2,x2>text1_length)k2end+=2
else if(y2>text2_length)k2start+=2
else if(!front){var k1_offset=v_offset+delta-k2
if(k1_offset>=0&&k1_offset<v_length&&v1[k1_offset]!=-1){var x1=v1[k1_offset],y1=v_offset+x1-k1_offset


if(x2=text1_length-x2,x1>=x2)return this.diff_bisectSplit_(text1,text2,x1,y1,deadline)}}}}return[[DIFF_DELETE,text1],[DIFF_INSERT,text2]]

},diff_match_patch.prototype.diff_bisectSplit_=function(text1,text2,x,y,deadline){var text1a=text1.substring(0,x),text2a=text2.substring(0,y),text1b=text1.substring(x),text2b=text2.substring(y),diffs=this.diff_main(text1a,text2a,!1,deadline),diffsb=this.diff_main(text1b,text2b,!1,deadline)


return diffs.concat(diffsb)},diff_match_patch.prototype.diff_linesToChars_=function(text1,text2){function diff_linesToCharsMunge_(text){
for(var chars="",lineStart=0,lineEnd=-1,lineArrayLength=lineArray.length;lineEnd<text.length-1;){lineEnd=text.indexOf("\n",lineStart),
lineEnd==-1&&(lineEnd=text.length-1)
var line=text.substring(lineStart,lineEnd+1)
lineStart=lineEnd+1,(lineHash.hasOwnProperty?lineHash.hasOwnProperty(line):void 0!==lineHash[line])?chars+=String.fromCharCode(lineHash[line]):(chars+=String.fromCharCode(lineArrayLength),
lineHash[line]=lineArrayLength,lineArray[lineArrayLength++]=line)}return chars}var lineArray=[],lineHash={}


lineArray[0]=""
var chars1=diff_linesToCharsMunge_(text1),chars2=diff_linesToCharsMunge_(text2)
return{chars1:chars1,chars2:chars2,lineArray:lineArray}},diff_match_patch.prototype.diff_charsToLines_=function(diffs,lineArray){
for(var x=0;x<diffs.length;x++){for(var chars=diffs[x][1],text=[],y=0;y<chars.length;y++)text[y]=lineArray[chars.charCodeAt(y)]


diffs[x][1]=text.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(text1,text2){if(!text1||!text2||text1.charAt(0)!=text2.charAt(0))return 0


for(var pointermin=0,pointermax=Math.min(text1.length,text2.length),pointermid=pointermax,pointerstart=0;pointermin<pointermid;)text1.substring(pointerstart,pointermid)==text2.substring(pointerstart,pointermid)?(pointermin=pointermid,
pointerstart=pointermin):pointermax=pointermid,pointermid=Math.floor((pointermax-pointermin)/2+pointermin)


return pointermid},diff_match_patch.prototype.diff_commonSuffix=function(text1,text2){if(!text1||!text2||text1.charAt(text1.length-1)!=text2.charAt(text2.length-1))return 0


for(var pointermin=0,pointermax=Math.min(text1.length,text2.length),pointermid=pointermax,pointerend=0;pointermin<pointermid;)text1.substring(text1.length-pointermid,text1.length-pointerend)==text2.substring(text2.length-pointermid,text2.length-pointerend)?(pointermin=pointermid,
pointerend=pointermin):pointermax=pointermid,pointermid=Math.floor((pointermax-pointermin)/2+pointermin)


return pointermid},diff_match_patch.prototype.diff_commonOverlap_=function(text1,text2){var text1_length=text1.length,text2_length=text2.length


if(0==text1_length||0==text2_length)return 0
text1_length>text2_length?text1=text1.substring(text1_length-text2_length):text1_length<text2_length&&(text2=text2.substring(0,text1_length))


var text_length=Math.min(text1_length,text2_length)
if(text1==text2)return text_length
for(var best=0,length=1;;){var pattern=text1.substring(text_length-length),found=text2.indexOf(pattern)


if(found==-1)return best
length+=found,0!=found&&text1.substring(text_length-length)!=text2.substring(0,length)||(best=length,
length++)}},diff_match_patch.prototype.diff_halfMatch_=function(text1,text2){function diff_halfMatchI_(longtext,shorttext,i){
for(var best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,seed=longtext.substring(i,i+Math.floor(longtext.length/4)),j=-1,best_common="";(j=shorttext.indexOf(seed,j+1))!=-1;){
var prefixLength=dmp.diff_commonPrefix(longtext.substring(i),shorttext.substring(j)),suffixLength=dmp.diff_commonSuffix(longtext.substring(0,i),shorttext.substring(0,j))


best_common.length<suffixLength+prefixLength&&(best_common=shorttext.substring(j-suffixLength,j)+shorttext.substring(j,j+prefixLength),
best_longtext_a=longtext.substring(0,i-suffixLength),best_longtext_b=longtext.substring(i+prefixLength),
best_shorttext_a=shorttext.substring(0,j-suffixLength),best_shorttext_b=shorttext.substring(j+prefixLength))

}return 2*best_common.length>=longtext.length?[best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,best_common]:null

}if(this.Diff_Timeout<=0)return null
var longtext=text1.length>text2.length?text1:text2,shorttext=text1.length>text2.length?text2:text1
if(longtext.length<4||2*shorttext.length<longtext.length)return null
var hm,dmp=this,hm1=diff_halfMatchI_(longtext,shorttext,Math.ceil(longtext.length/4)),hm2=diff_halfMatchI_(longtext,shorttext,Math.ceil(longtext.length/2))


if(!hm1&&!hm2)return null
hm=hm2?hm1&&hm1[4].length>hm2[4].length?hm1:hm2:hm1
var text1_a,text1_b,text2_a,text2_b
text1.length>text2.length?(text1_a=hm[0],text1_b=hm[1],text2_a=hm[2],text2_b=hm[3]):(text2_a=hm[0],text2_b=hm[1],
text1_a=hm[2],text1_b=hm[3])
var mid_common=hm[4]
return[text1_a,text1_b,text2_a,text2_b,mid_common]},diff_match_patch.prototype.diff_cleanupSemantic=function(diffs){
for(var changes=!1,equalities=[],equalitiesLength=0,lastequality=null,pointer=0,length_insertions1=0,length_deletions1=0,length_insertions2=0,length_deletions2=0;pointer<diffs.length;)diffs[pointer][0]==DIFF_EQUAL?(equalities[equalitiesLength++]=pointer,
length_insertions1=length_insertions2,length_deletions1=length_deletions2,length_insertions2=0,length_deletions2=0,
lastequality=diffs[pointer][1]):(diffs[pointer][0]==DIFF_INSERT?length_insertions2+=diffs[pointer][1].length:length_deletions2+=diffs[pointer][1].length,
lastequality&&lastequality.length<=Math.max(length_insertions1,length_deletions1)&&lastequality.length<=Math.max(length_insertions2,length_deletions2)&&(diffs.splice(equalities[equalitiesLength-1],0,[DIFF_DELETE,lastequality]),
diffs[equalities[equalitiesLength-1]+1][0]=DIFF_INSERT,equalitiesLength--,equalitiesLength--,pointer=equalitiesLength>0?equalities[equalitiesLength-1]:-1,
length_insertions1=0,length_deletions1=0,length_insertions2=0,length_deletions2=0,lastequality=null,changes=!0)),
pointer++
for(changes&&this.diff_cleanupMerge(diffs),this.diff_cleanupSemanticLossless(diffs),pointer=1;pointer<diffs.length;){
if(diffs[pointer-1][0]==DIFF_DELETE&&diffs[pointer][0]==DIFF_INSERT){var deletion=diffs[pointer-1][1],insertion=diffs[pointer][1],overlap_length1=this.diff_commonOverlap_(deletion,insertion),overlap_length2=this.diff_commonOverlap_(insertion,deletion)


overlap_length1>=overlap_length2?(overlap_length1>=deletion.length/2||overlap_length1>=insertion.length/2)&&(diffs.splice(pointer,0,[DIFF_EQUAL,insertion.substring(0,overlap_length1)]),
diffs[pointer-1][1]=deletion.substring(0,deletion.length-overlap_length1),diffs[pointer+1][1]=insertion.substring(overlap_length1),
pointer++):(overlap_length2>=deletion.length/2||overlap_length2>=insertion.length/2)&&(diffs.splice(pointer,0,[DIFF_EQUAL,deletion.substring(0,overlap_length2)]),
diffs[pointer-1][0]=DIFF_INSERT,diffs[pointer-1][1]=insertion.substring(0,insertion.length-overlap_length2),
diffs[pointer+1][0]=DIFF_DELETE,diffs[pointer+1][1]=deletion.substring(overlap_length2),pointer++),pointer++

}pointer++}},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(diffs){function diff_cleanupSemanticScore_(one,two){
if(!one||!two)return 6
var char1=one.charAt(one.length-1),char2=two.charAt(0),nonAlphaNumeric1=char1.match(diff_match_patch.nonAlphaNumericRegex_),nonAlphaNumeric2=char2.match(diff_match_patch.nonAlphaNumericRegex_),whitespace1=nonAlphaNumeric1&&char1.match(diff_match_patch.whitespaceRegex_),whitespace2=nonAlphaNumeric2&&char2.match(diff_match_patch.whitespaceRegex_),lineBreak1=whitespace1&&char1.match(diff_match_patch.linebreakRegex_),lineBreak2=whitespace2&&char2.match(diff_match_patch.linebreakRegex_),blankLine1=lineBreak1&&one.match(diff_match_patch.blanklineEndRegex_),blankLine2=lineBreak2&&two.match(diff_match_patch.blanklineStartRegex_)


return blankLine1||blankLine2?5:lineBreak1||lineBreak2?4:nonAlphaNumeric1&&!whitespace1&&whitespace2?3:whitespace1||whitespace2?2:nonAlphaNumeric1||nonAlphaNumeric2?1:0

}for(var pointer=1;pointer<diffs.length-1;){if(diffs[pointer-1][0]==DIFF_EQUAL&&diffs[pointer+1][0]==DIFF_EQUAL){
var equality1=diffs[pointer-1][1],edit=diffs[pointer][1],equality2=diffs[pointer+1][1],commonOffset=this.diff_commonSuffix(equality1,edit)


if(commonOffset){var commonString=edit.substring(edit.length-commonOffset)
equality1=equality1.substring(0,equality1.length-commonOffset),edit=commonString+edit.substring(0,edit.length-commonOffset),
equality2=commonString+equality2}for(var bestEquality1=equality1,bestEdit=edit,bestEquality2=equality2,bestScore=diff_cleanupSemanticScore_(equality1,edit)+diff_cleanupSemanticScore_(edit,equality2);edit.charAt(0)===equality2.charAt(0);){
equality1+=edit.charAt(0),edit=edit.substring(1)+equality2.charAt(0),equality2=equality2.substring(1)


var score=diff_cleanupSemanticScore_(equality1,edit)+diff_cleanupSemanticScore_(edit,equality2)
score>=bestScore&&(bestScore=score,bestEquality1=equality1,bestEdit=edit,bestEquality2=equality2)}diffs[pointer-1][1]!=bestEquality1&&(bestEquality1?diffs[pointer-1][1]=bestEquality1:(diffs.splice(pointer-1,1),
pointer--),diffs[pointer][1]=bestEdit,bestEquality2?diffs[pointer+1][1]=bestEquality2:(diffs.splice(pointer+1,1),
pointer--))}pointer++}},diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,diff_match_patch.whitespaceRegex_=/\s/,
diff_match_patch.linebreakRegex_=/[\r\n]/,diff_match_patch.blanklineEndRegex_=/\n\r?\n$/,diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/,
diff_match_patch.prototype.diff_cleanupEfficiency=function(diffs){for(var changes=!1,equalities=[],equalitiesLength=0,lastequality=null,pointer=0,pre_ins=!1,pre_del=!1,post_ins=!1,post_del=!1;pointer<diffs.length;)diffs[pointer][0]==DIFF_EQUAL?(diffs[pointer][1].length<this.Diff_EditCost&&(post_ins||post_del)?(equalities[equalitiesLength++]=pointer,
pre_ins=post_ins,pre_del=post_del,lastequality=diffs[pointer][1]):(equalitiesLength=0,lastequality=null),
post_ins=post_del=!1):(diffs[pointer][0]==DIFF_DELETE?post_del=!0:post_ins=!0,lastequality&&(pre_ins&&pre_del&&post_ins&&post_del||lastequality.length<this.Diff_EditCost/2&&pre_ins+pre_del+post_ins+post_del==3)&&(diffs.splice(equalities[equalitiesLength-1],0,[DIFF_DELETE,lastequality]),
diffs[equalities[equalitiesLength-1]+1][0]=DIFF_INSERT,equalitiesLength--,lastequality=null,pre_ins&&pre_del?(post_ins=post_del=!0,
equalitiesLength=0):(equalitiesLength--,pointer=equalitiesLength>0?equalities[equalitiesLength-1]:-1,
post_ins=post_del=!1),changes=!0)),pointer++
changes&&this.diff_cleanupMerge(diffs)},diff_match_patch.prototype.diff_cleanupMerge=function(diffs){
diffs.push([DIFF_EQUAL,""])
for(var commonlength,pointer=0,count_delete=0,count_insert=0,text_delete="",text_insert="";pointer<diffs.length;)switch(diffs[pointer][0]){
case DIFF_INSERT:count_insert++,text_insert+=diffs[pointer][1],pointer++
break
case DIFF_DELETE:count_delete++,text_delete+=diffs[pointer][1],pointer++
break
case DIFF_EQUAL:count_delete+count_insert>1?(0!==count_delete&&0!==count_insert&&(commonlength=this.diff_commonPrefix(text_insert,text_delete),
0!==commonlength&&(pointer-count_delete-count_insert>0&&diffs[pointer-count_delete-count_insert-1][0]==DIFF_EQUAL?diffs[pointer-count_delete-count_insert-1][1]+=text_insert.substring(0,commonlength):(diffs.splice(0,0,[DIFF_EQUAL,text_insert.substring(0,commonlength)]),
pointer++),text_insert=text_insert.substring(commonlength),text_delete=text_delete.substring(commonlength)),
commonlength=this.diff_commonSuffix(text_insert,text_delete),0!==commonlength&&(diffs[pointer][1]=text_insert.substring(text_insert.length-commonlength)+diffs[pointer][1],
text_insert=text_insert.substring(0,text_insert.length-commonlength),text_delete=text_delete.substring(0,text_delete.length-commonlength))),
0===count_delete?diffs.splice(pointer-count_insert,count_delete+count_insert,[DIFF_INSERT,text_insert]):0===count_insert?diffs.splice(pointer-count_delete,count_delete+count_insert,[DIFF_DELETE,text_delete]):diffs.splice(pointer-count_delete-count_insert,count_delete+count_insert,[DIFF_DELETE,text_delete],[DIFF_INSERT,text_insert]),
pointer=pointer-count_delete-count_insert+(count_delete?1:0)+(count_insert?1:0)+1):0!==pointer&&diffs[pointer-1][0]==DIFF_EQUAL?(diffs[pointer-1][1]+=diffs[pointer][1],
diffs.splice(pointer,1)):pointer++,count_insert=0,count_delete=0,text_delete="",text_insert=""}""===diffs[diffs.length-1][1]&&diffs.pop()


var changes=!1
for(pointer=1;pointer<diffs.length-1;)diffs[pointer-1][0]==DIFF_EQUAL&&diffs[pointer+1][0]==DIFF_EQUAL&&(diffs[pointer][1].substring(diffs[pointer][1].length-diffs[pointer-1][1].length)==diffs[pointer-1][1]?(diffs[pointer][1]=diffs[pointer-1][1]+diffs[pointer][1].substring(0,diffs[pointer][1].length-diffs[pointer-1][1].length),
diffs[pointer+1][1]=diffs[pointer-1][1]+diffs[pointer+1][1],diffs.splice(pointer-1,1),changes=!0):diffs[pointer][1].substring(0,diffs[pointer+1][1].length)==diffs[pointer+1][1]&&(diffs[pointer-1][1]+=diffs[pointer+1][1],
diffs[pointer][1]=diffs[pointer][1].substring(diffs[pointer+1][1].length)+diffs[pointer+1][1],diffs.splice(pointer+1,1),
changes=!0)),pointer++
changes&&this.diff_cleanupMerge(diffs)},diff_match_patch.prototype.diff_xIndex=function(diffs,loc){var x,chars1=0,chars2=0,last_chars1=0,last_chars2=0


for(x=0;x<diffs.length&&(diffs[x][0]!==DIFF_INSERT&&(chars1+=diffs[x][1].length),diffs[x][0]!==DIFF_DELETE&&(chars2+=diffs[x][1].length),
!(chars1>loc));x++)last_chars1=chars1,last_chars2=chars2
return diffs.length!=x&&diffs[x][0]===DIFF_DELETE?last_chars2:last_chars2+(loc-last_chars1)},diff_match_patch.prototype.diff_prettyHtml=function(diffs){
for(var html=[],pattern_amp=/&/g,pattern_lt=/</g,pattern_gt=/>/g,pattern_para=/\n/g,x=0;x<diffs.length;x++){
var op=diffs[x][0],data=diffs[x][1],text=data.replace(pattern_amp,"&amp;").replace(pattern_lt,"&lt;").replace(pattern_gt,"&gt;").replace(pattern_para,"&para;<br>")


switch(op){case DIFF_INSERT:html[x]='<ins style="background:#e6ffe6;">'+text+"</ins>"
break
case DIFF_DELETE:html[x]='<del style="background:#ffe6e6;">'+text+"</del>"
break
case DIFF_EQUAL:html[x]="<span>"+text+"</span>"}}return html.join("")},diff_match_patch.prototype.diff_text1=function(diffs){
for(var text=[],x=0;x<diffs.length;x++)diffs[x][0]!==DIFF_INSERT&&(text[x]=diffs[x][1])
return text.join("")},diff_match_patch.prototype.diff_text2=function(diffs){for(var text=[],x=0;x<diffs.length;x++)diffs[x][0]!==DIFF_DELETE&&(text[x]=diffs[x][1])


return text.join("")},diff_match_patch.prototype.diff_levenshtein=function(diffs){for(var levenshtein=0,insertions=0,deletions=0,x=0;x<diffs.length;x++){
var op=diffs[x][0],data=diffs[x][1]
switch(op){case DIFF_INSERT:insertions+=data.length
break
case DIFF_DELETE:deletions+=data.length
break
case DIFF_EQUAL:levenshtein+=Math.max(insertions,deletions),insertions=0,deletions=0}}return levenshtein+=Math.max(insertions,deletions)

},diff_match_patch.prototype.diff_toDelta=function(diffs){for(var text=[],x=0;x<diffs.length;x++)switch(diffs[x][0]){
case DIFF_INSERT:text[x]="+"+encodeURI(diffs[x][1])
break
case DIFF_DELETE:text[x]="-"+diffs[x][1].length
break
case DIFF_EQUAL:text[x]="="+diffs[x][1].length}return text.join("\t").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(text1,delta){
for(var diffs=[],diffsLength=0,pointer=0,tokens=delta.split(/\t/g),x=0;x<tokens.length;x++){var param=tokens[x].substring(1)


switch(tokens[x].charAt(0)){case"+":try{diffs[diffsLength++]=[DIFF_INSERT,decodeURI(param)]}catch(ex){
throw new Error("Illegal escape in diff_fromDelta: "+param)}break
case"-":case"=":var n=parseInt(param,10)
if(isNaN(n)||n<0)throw new Error("Invalid number in diff_fromDelta: "+param)
var text=text1.substring(pointer,pointer+=n)
"="==tokens[x].charAt(0)?diffs[diffsLength++]=[DIFF_EQUAL,text]:diffs[diffsLength++]=[DIFF_DELETE,text]


break
default:if(tokens[x])throw new Error("Invalid diff operation in diff_fromDelta: "+tokens[x])}}if(pointer!=text1.length)throw new Error("Delta length ("+pointer+") does not equal source text length ("+text1.length+").")


return diffs},diff_match_patch.prototype.match_main=function(text,pattern,loc){if(null==text||null==pattern||null==loc)throw new Error("Null input. (match_main)")


return loc=Math.max(0,Math.min(loc,text.length)),text==pattern?0:text.length?text.substring(loc,loc+pattern.length)==pattern?loc:this.match_bitap_(text,pattern,loc):-1

},diff_match_patch.prototype.match_bitap_=function(text,pattern,loc){function match_bitapScore_(e,x){
var accuracy=e/pattern.length,proximity=Math.abs(loc-x)
return dmp.Match_Distance?accuracy+proximity/dmp.Match_Distance:proximity?1:accuracy}if(pattern.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.")


var s=this.match_alphabet_(pattern),dmp=this,score_threshold=this.Match_Threshold,best_loc=text.indexOf(pattern,loc)


best_loc!=-1&&(score_threshold=Math.min(match_bitapScore_(0,best_loc),score_threshold),best_loc=text.lastIndexOf(pattern,loc+pattern.length),
best_loc!=-1&&(score_threshold=Math.min(match_bitapScore_(0,best_loc),score_threshold)))
var matchmask=1<<pattern.length-1
best_loc=-1
for(var bin_min,bin_mid,last_rd,bin_max=pattern.length+text.length,d=0;d<pattern.length;d++){for(bin_min=0,
bin_mid=bin_max;bin_min<bin_mid;)match_bitapScore_(d,loc+bin_mid)<=score_threshold?bin_min=bin_mid:bin_max=bin_mid,
bin_mid=Math.floor((bin_max-bin_min)/2+bin_min)
bin_max=bin_mid
var start=Math.max(1,loc-bin_mid+1),finish=Math.min(loc+bin_mid,text.length)+pattern.length,rd=Array(finish+2)


rd[finish+1]=(1<<d)-1
for(var j=finish;j>=start;j--){var charMatch=s[text.charAt(j-1)]
if(0===d?rd[j]=(rd[j+1]<<1|1)&charMatch:rd[j]=(rd[j+1]<<1|1)&charMatch|((last_rd[j+1]|last_rd[j])<<1|1)|last_rd[j+1],
rd[j]&matchmask){var score=match_bitapScore_(d,j-1)
if(score<=score_threshold){if(score_threshold=score,best_loc=j-1,!(best_loc>loc))break
start=Math.max(1,2*loc-best_loc)}}}if(match_bitapScore_(d+1,loc)>score_threshold)break
last_rd=rd}return best_loc},diff_match_patch.prototype.match_alphabet_=function(pattern){for(var s={},i=0;i<pattern.length;i++)s[pattern.charAt(i)]=0


for(var i=0;i<pattern.length;i++)s[pattern.charAt(i)]|=1<<pattern.length-i-1
return s},diff_match_patch.prototype.patch_addContext_=function(patch,text){if(0!=text.length){for(var pattern=text.substring(patch.start2,patch.start2+patch.length1),padding=0;text.indexOf(pattern)!=text.lastIndexOf(pattern)&&pattern.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)padding+=this.Patch_Margin,
pattern=text.substring(patch.start2-padding,patch.start2+patch.length1+padding)
padding+=this.Patch_Margin
var prefix=text.substring(patch.start2-padding,patch.start2)
prefix&&patch.diffs.unshift([DIFF_EQUAL,prefix])
var suffix=text.substring(patch.start2+patch.length1,patch.start2+patch.length1+padding)
suffix&&patch.diffs.push([DIFF_EQUAL,suffix]),patch.start1-=prefix.length,patch.start2-=prefix.length,
patch.length1+=prefix.length+suffix.length,patch.length2+=prefix.length+suffix.length}},diff_match_patch.prototype.patch_make=function(a,opt_b,opt_c){
var text1,diffs
if("string"==typeof a&&"string"==typeof opt_b&&"undefined"==typeof opt_c)text1=a,diffs=this.diff_main(text1,opt_b,!0),
diffs.length>2&&(this.diff_cleanupSemantic(diffs),this.diff_cleanupEfficiency(diffs))
else if(a&&"object"==typeof a&&"undefined"==typeof opt_b&&"undefined"==typeof opt_c)diffs=a,text1=this.diff_text1(diffs)
else if("string"==typeof a&&opt_b&&"object"==typeof opt_b&&"undefined"==typeof opt_c)text1=a,diffs=opt_b
else{if("string"!=typeof a||"string"!=typeof opt_b||!opt_c||"object"!=typeof opt_c)throw new Error("Unknown call format to patch_make.")


text1=a,diffs=opt_c}if(0===diffs.length)return[]
for(var patches=[],patch=new diff_match_patch.patch_obj,patchDiffLength=0,char_count1=0,char_count2=0,prepatch_text=text1,postpatch_text=text1,x=0;x<diffs.length;x++){
var diff_type=diffs[x][0],diff_text=diffs[x][1]
switch(patchDiffLength||diff_type===DIFF_EQUAL||(patch.start1=char_count1,patch.start2=char_count2),diff_type){
case DIFF_INSERT:patch.diffs[patchDiffLength++]=diffs[x],patch.length2+=diff_text.length,postpatch_text=postpatch_text.substring(0,char_count2)+diff_text+postpatch_text.substring(char_count2)


break
case DIFF_DELETE:patch.length1+=diff_text.length,patch.diffs[patchDiffLength++]=diffs[x],postpatch_text=postpatch_text.substring(0,char_count2)+postpatch_text.substring(char_count2+diff_text.length)


break
case DIFF_EQUAL:diff_text.length<=2*this.Patch_Margin&&patchDiffLength&&diffs.length!=x+1?(patch.diffs[patchDiffLength++]=diffs[x],
patch.length1+=diff_text.length,patch.length2+=diff_text.length):diff_text.length>=2*this.Patch_Margin&&patchDiffLength&&(this.patch_addContext_(patch,prepatch_text),
patches.push(patch),patch=new diff_match_patch.patch_obj,patchDiffLength=0,prepatch_text=postpatch_text,
char_count1=char_count2)}diff_type!==DIFF_INSERT&&(char_count1+=diff_text.length),diff_type!==DIFF_DELETE&&(char_count2+=diff_text.length)

}return patchDiffLength&&(this.patch_addContext_(patch,prepatch_text),patches.push(patch)),patches},diff_match_patch.prototype.patch_deepCopy=function(patches){
for(var patchesCopy=[],x=0;x<patches.length;x++){var patch=patches[x],patchCopy=new diff_match_patch.patch_obj


patchCopy.diffs=[]
for(var y=0;y<patch.diffs.length;y++)patchCopy.diffs[y]=patch.diffs[y].slice()
patchCopy.start1=patch.start1,patchCopy.start2=patch.start2,patchCopy.length1=patch.length1,patchCopy.length2=patch.length2,
patchesCopy[x]=patchCopy}return patchesCopy},diff_match_patch.prototype.patch_apply=function(patches,text){
if(0==patches.length)return[text,[]]
patches=this.patch_deepCopy(patches)
var nullPadding=this.patch_addPadding(patches)
text=nullPadding+text+nullPadding,this.patch_splitMax(patches)
for(var delta=0,results=[],x=0;x<patches.length;x++){var start_loc,expected_loc=patches[x].start2+delta,text1=this.diff_text1(patches[x].diffs),end_loc=-1


if(text1.length>this.Match_MaxBits?(start_loc=this.match_main(text,text1.substring(0,this.Match_MaxBits),expected_loc),
start_loc!=-1&&(end_loc=this.match_main(text,text1.substring(text1.length-this.Match_MaxBits),expected_loc+text1.length-this.Match_MaxBits),
(end_loc==-1||start_loc>=end_loc)&&(start_loc=-1))):start_loc=this.match_main(text,text1,expected_loc),
start_loc==-1)results[x]=!1,delta-=patches[x].length2-patches[x].length1
else{results[x]=!0,delta=start_loc-expected_loc
var text2
if(text2=end_loc==-1?text.substring(start_loc,start_loc+text1.length):text.substring(start_loc,end_loc+this.Match_MaxBits),
text1==text2)text=text.substring(0,start_loc)+this.diff_text2(patches[x].diffs)+text.substring(start_loc+text1.length)
else{var diffs=this.diff_main(text1,text2,!1)
if(text1.length>this.Match_MaxBits&&this.diff_levenshtein(diffs)/text1.length>this.Patch_DeleteThreshold)results[x]=!1
else{this.diff_cleanupSemanticLossless(diffs)
for(var index2,index1=0,y=0;y<patches[x].diffs.length;y++){var mod=patches[x].diffs[y]
mod[0]!==DIFF_EQUAL&&(index2=this.diff_xIndex(diffs,index1)),mod[0]===DIFF_INSERT?text=text.substring(0,start_loc+index2)+mod[1]+text.substring(start_loc+index2):mod[0]===DIFF_DELETE&&(text=text.substring(0,start_loc+index2)+text.substring(start_loc+this.diff_xIndex(diffs,index1+mod[1].length))),
mod[0]!==DIFF_DELETE&&(index1+=mod[1].length)}}}}}return text=text.substring(nullPadding.length,text.length-nullPadding.length),
[text,results]},diff_match_patch.prototype.patch_addPadding=function(patches){for(var paddingLength=this.Patch_Margin,nullPadding="",x=1;x<=paddingLength;x++)nullPadding+=String.fromCharCode(x)


for(var x=0;x<patches.length;x++)patches[x].start1+=paddingLength,patches[x].start2+=paddingLength
var patch=patches[0],diffs=patch.diffs
if(0==diffs.length||diffs[0][0]!=DIFF_EQUAL)diffs.unshift([DIFF_EQUAL,nullPadding]),patch.start1-=paddingLength,
patch.start2-=paddingLength,patch.length1+=paddingLength,patch.length2+=paddingLength
else if(paddingLength>diffs[0][1].length){var extraLength=paddingLength-diffs[0][1].length
diffs[0][1]=nullPadding.substring(diffs[0][1].length)+diffs[0][1],patch.start1-=extraLength,patch.start2-=extraLength,
patch.length1+=extraLength,patch.length2+=extraLength}if(patch=patches[patches.length-1],diffs=patch.diffs,
0==diffs.length||diffs[diffs.length-1][0]!=DIFF_EQUAL)diffs.push([DIFF_EQUAL,nullPadding]),patch.length1+=paddingLength,
patch.length2+=paddingLength
else if(paddingLength>diffs[diffs.length-1][1].length){var extraLength=paddingLength-diffs[diffs.length-1][1].length


diffs[diffs.length-1][1]+=nullPadding.substring(0,extraLength),patch.length1+=extraLength,patch.length2+=extraLength

}return nullPadding},diff_match_patch.prototype.patch_splitMax=function(patches){for(var patch_size=this.Match_MaxBits,x=0;x<patches.length;x++)if(!(patches[x].length1<=patch_size)){
var bigpatch=patches[x]
patches.splice(x--,1)
for(var start1=bigpatch.start1,start2=bigpatch.start2,precontext="";0!==bigpatch.diffs.length;){var patch=new diff_match_patch.patch_obj,empty=!0


for(patch.start1=start1-precontext.length,patch.start2=start2-precontext.length,""!==precontext&&(patch.length1=patch.length2=precontext.length,
patch.diffs.push([DIFF_EQUAL,precontext]));0!==bigpatch.diffs.length&&patch.length1<patch_size-this.Patch_Margin;){
var diff_type=bigpatch.diffs[0][0],diff_text=bigpatch.diffs[0][1]
diff_type===DIFF_INSERT?(patch.length2+=diff_text.length,start2+=diff_text.length,patch.diffs.push(bigpatch.diffs.shift()),
empty=!1):diff_type===DIFF_DELETE&&1==patch.diffs.length&&patch.diffs[0][0]==DIFF_EQUAL&&diff_text.length>2*patch_size?(patch.length1+=diff_text.length,
start1+=diff_text.length,empty=!1,patch.diffs.push([diff_type,diff_text]),bigpatch.diffs.shift()):(diff_text=diff_text.substring(0,patch_size-patch.length1-this.Patch_Margin),
patch.length1+=diff_text.length,start1+=diff_text.length,diff_type===DIFF_EQUAL?(patch.length2+=diff_text.length,
start2+=diff_text.length):empty=!1,patch.diffs.push([diff_type,diff_text]),diff_text==bigpatch.diffs[0][1]?bigpatch.diffs.shift():bigpatch.diffs[0][1]=bigpatch.diffs[0][1].substring(diff_text.length))

}precontext=this.diff_text2(patch.diffs),precontext=precontext.substring(precontext.length-this.Patch_Margin)


var postcontext=this.diff_text1(bigpatch.diffs).substring(0,this.Patch_Margin)
""!==postcontext&&(patch.length1+=postcontext.length,patch.length2+=postcontext.length,0!==patch.diffs.length&&patch.diffs[patch.diffs.length-1][0]===DIFF_EQUAL?patch.diffs[patch.diffs.length-1][1]+=postcontext:patch.diffs.push([DIFF_EQUAL,postcontext])),
empty||patches.splice(++x,0,patch)}}},diff_match_patch.prototype.patch_toText=function(patches){for(var text=[],x=0;x<patches.length;x++)text[x]=patches[x]


return text.join("")},diff_match_patch.prototype.patch_fromText=function(textline){var patches=[]
if(!textline)return patches
for(var text=textline.split("\n"),textPointer=0,patchHeader=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;textPointer<text.length;){
var m=text[textPointer].match(patchHeader)
if(!m)throw new Error("Invalid patch string: "+text[textPointer])
var patch=new diff_match_patch.patch_obj
for(patches.push(patch),patch.start1=parseInt(m[1],10),""===m[2]?(patch.start1--,patch.length1=1):"0"==m[2]?patch.length1=0:(patch.start1--,
patch.length1=parseInt(m[2],10)),patch.start2=parseInt(m[3],10),""===m[4]?(patch.start2--,patch.length2=1):"0"==m[4]?patch.length2=0:(patch.start2--,
patch.length2=parseInt(m[4],10)),textPointer++;textPointer<text.length;){var sign=text[textPointer].charAt(0)


try{var line=decodeURI(text[textPointer].substring(1))}catch(ex){throw new Error("Illegal escape in patch_fromText: "+line)

}if("-"==sign)patch.diffs.push([DIFF_DELETE,line])
else if("+"==sign)patch.diffs.push([DIFF_INSERT,line])
else if(" "==sign)patch.diffs.push([DIFF_EQUAL,line])
else{if("@"==sign)break
if(""!==sign)throw new Error('Invalid patch mode "'+sign+'" in: '+line)}textPointer++}}return patches

},diff_match_patch.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,
this.length2=0},diff_match_patch.patch_obj.prototype.toString=function(){var coords1,coords2
coords1=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,
coords2=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2


for(var op,text=["@@ -"+coords1+" +"+coords2+" @@\n"],x=0;x<this.diffs.length;x++){switch(this.diffs[x][0]){
case DIFF_INSERT:op="+"
break
case DIFF_DELETE:op="-"
break
case DIFF_EQUAL:op=" "}text[x+1]=op+encodeURI(this.diffs[x][1])+"\n"}return text.join("").replace(/%20/g," ")

},exports.diff_match_patch=diff_match_patch,exports.DIFF_DELETE=DIFF_DELETE,exports.DIFF_INSERT=DIFF_INSERT,
exports.DIFF_EQUAL=DIFF_EQUAL})


define("plugins/c9.ide.collab/ot/operations",[],function(require,exports,module){"use strict"
function operation(fromText,toText){var dmp=new diff_match_patch,diffs=dmp.diff_main(fromText,toText)


dmp.diff_cleanupSemantic(diffs)
for(var d,type,val,op=[],i=0;i<diffs.length;i++)switch(d=diffs[i],type=d[0],val=d[1],type){case DIFF_EQUAL:
op.push("r"+val.length)
break
case DIFF_INSERT:op.push("i"+val)
break
case DIFF_DELETE:op.push("d"+val)}return op}function insert(chars){return"i"+chars}function del(chars){
return"d"+chars}function retain(n){return"r"+String(n)}function type(edit){switch(edit[0]){case"r":return"retain"


case"d":return"delete"
case"i":return"insert"
default:throw new TypeError("Unknown type of edit: ",edit)}}function val(edit){return"retain"===type(edit)?~~edit.slice(1):edit.slice(1)

}function length(edit){return"retain"===type(edit)?~~edit.slice(1):edit.length-1}function split(edit,idx){
if("retain"===type(edit)){var rCount=~~edit.slice(1)
return["r"+idx,"r"+(rCount-idx)]}return[edit[0]+edit.substring(1,idx+1),edit[0]+edit.substring(idx+1)]

}function pack(op){for(var packed=op.slice(),i=0;i<packed.length-1;)packed[i][0]===packed[i+1][0]?packed.splice(i,2,packed[i][0]+(val(packed[i])+val(packed[i+1]))):i++


return packed}function inverse(op){for(var edit,t,v,inversed=new Array(op.length),i=0,el=op.length;i<el;i++)switch(edit=op[i],
t=type(edit),v=val(edit),t){case"retain":inversed[i]=op[i]
break
case"insert":inversed[i]=del(v)
break
case"delete":inversed[i]=insert(v)}return inversed}var DMP=require("../../c9.ide.threewaymerge/diff_match_patch_amd"),diff_match_patch=DMP.diff_match_patch,DIFF_EQUAL=DMP.DIFF_EQUAL,DIFF_INSERT=DMP.DIFF_INSERT,DIFF_DELETE=DMP.DIFF_DELETE


module.exports={insert:insert,del:del,retain:retain,type:type,val:val,length:length,split:split,pack:pack,
operation:operation,inverse:inverse}})


define("plugins/c9.ide.collab/ot/author_attributes",[],function(require,exports,module){"use strict"
function AuthorAttributes(minKeySize,maxKeySize){function addValue(nodes,index,startI,length,id){var i=startI,len=nodes[i],val=nodes[i+1]


if(index<0||index>len)throw new Error("Invalid index passed!")
val===id?nodes[i]+=length:index===len?nodes[i+3]==id?nodes[i+2]+=length:nodes.splice(i+2,0,length,id):0===index?nodes[i-1]==id?nodes[i-2]+=length:nodes.splice(i,0,length,id):nodes.splice(i,2,index,val,length,id,len-index,val)

}function split(parent,nodes,pos){for(var splitPos=nodes.length>>2<<1,leftLen=0,rightLen=0,right=nodes.splice(splitPos,splitPos+2),i=0;i<right.length;i+=2)rightLen+=right[i]


if(parent)parent.splice(pos+2,0,rightLen,right),parent[pos]-=rightLen
else{for(var left=nodes.splice(0,splitPos+2),i=0;i<left.length;i+=2)leftLen+=left[i]
nodes.push(leftLen,left,rightLen,right)}}function insert(nodes,index,length,id){if(0===nodes.length)return void nodes.push(length,id)


var spilled=_insert(nodes,index,length,id)
spilled&&split(null,nodes,null)}function _insert(nodes,index,length,id){for(var i=0;i<nodes.length;i+=2){
var len=nodes[i]
if(index<=len){var node=nodes[i+1]
if(Array.isArray(node)){nodes[i]+=length
var spilled=_insert(node,index,length,id)
spilled&&split(nodes,nodes[i+1],i)}else addValue(nodes,index,i,length,id)
return nodes.length>maxKeySize}index-=len}}function remove(nodes,index,length){for(var removedTotal=0,i=0;i<nodes.length;i+=2){
var removed,len=nodes[i],ch=nodes[i+1]
if(index<=len){if(removed=Array.isArray(ch)?remove(ch,index,length):Math.max(0,Math.min(length,len-index)),
nodes[i]-=removed,length-=removed,removedTotal+=removed,nodes[i]?Array.isArray(ch)&&ch.length<minKeySize&&ch.length+nodes.length<=maxKeySize&&nodes.splice.apply(nodes,[i,2].concat(ch)):(nodes.splice(i,2),
i-=2),!length)break
index=0}else index-=len}for(var j=0;j<nodes.length-2;j+=2)nodes[j]&&nodes[j+1]===nodes[j+3]&&(nodes[j]+=nodes[j+2],
nodes.splice(j+1,2),j-=2)
return removedTotal}function apply(nodes,op,authPoolId){authPoolId=authPoolId||0
for(var opLen,index=0,i=0;i<op.length;i++)switch(opLen=operations.length(op[i]),operations.type(op[i])){
case"retain":index+=opLen
break
case"insert":insert(nodes,index,opLen,authPoolId),index+=opLen
break
case"delete":remove(nodes,index,opLen)
break
default:throw new TypeError("Unknown operation: "+operations.type(op[i]))}}function traverse(nodes,start,end,iterator){
if(start=start||0,end=end||0,!end)for(var i=0;i<nodes.length;i+=2)end+=nodes[i]
traverseRec(nodes,start,end,0,iterator)}function traverseRec(nodes,start,end,index,iterator){for(var i=0;i<nodes.length&&index<end;i+=2){
var len=nodes[i]
if(len>start-index){var val=nodes[i+1]
Array.isArray(val)?traverseRec(val,start,end,index,iterator):index+len>end||index<start?(index<start&&(len-=start-index,
index=start),len=Math.min(len,end-index),iterator(index,len,val)):iterator(index,len,val)}index+=len}
}function valueAtIndex(nodes,idx){var val
return traverseRec(nodes,idx,idx+1,0,function(index,length,value){val=value}),val}function flatten(nodes,result){
for(var i=0;i<nodes.length;i+=2)Array.isArray(nodes[i+1])?flatten(nodes[i+1],result):result.push(nodes[i],nodes[i+1])


return result}return minKeySize=minKeySize||20,maxKeySize=maxKeySize||5*minKeySize,{apply:apply,valueAtIndex:valueAtIndex,
traverse:traverse,flatten:flatten,insert:insert,remove:remove}}var operations=require("./operations")


module.exports=AuthorAttributes})


define("plugins/c9.ide.collab/author_layer",[],function(require,module,exports){function main(options,imports,register){
function AuthorLayer(session){function refresh(){var doc=session.collabDoc.original,ace=doc.editor&&doc.editor.ace,aceSession=ace&&ace.session


if(aceSession===session){session._emit("changeBackMarker")
var gutter=ace.renderer.$gutterLayer
gutter.update=updateGutter,gutter.update(ace.renderer.layerConfig)}}function drawAuthInfos(html,markerLayer,session,config){
if(showAuthorInfo&&util.isRealCollab(workspace))for(var doc=session.collabDoc,editorDoc=session.doc,colorPool=workspace.colorPool,reversedAuthorPool=workspace.reversedAuthorPool,firstRow=config.firstRow,lastRow=config.lastRow,range=new Range(firstRow,0,lastRow,editorDoc.getLine(lastRow).length),cache=createAuthorKeyCache(editorDoc,doc.authAttribs,range),authKeyCache=cache.authorKeys,rowScores=cache.rowScores,fold=session.getNextFoldLine(firstRow),foldStart=fold?fold.start.row:1/0,i=firstRow;i<lastRow&&(i>foldStart&&(i=fold.end.row+1,
fold=session.getNextFoldLine(i,fold),foldStart=fold?fold.start.row:1/0),!(i>lastRow));i++)if(authKeyCache[i]&&rowScores[i]){
var rowScore=rowScores[i]
for(var authVal in rowScore)if(authVal!=authKeyCache[i])for(var edits=rowScore[authVal].edits,j=0;j<edits.length;j++){
var edit=edits[j],uid=reversedAuthorPool[authVal],bgColor=colorPool[uid],extraStyle="position:absolute;border-bottom:solid 2px "+util.formatColor(bgColor)+";z-index: 2000",startPos=session.documentToScreenPosition(edit.pos)


markerLayer.drawSingleLineMarker(html,new Range(startPos.row,startPos.column,startPos.row,startPos.column+edit.length),"",config,0,extraStyle)

}}}function updateGutter(config){for(var session=this.session,firstRow=config.firstRow,lastRow=Math.min(config.lastRow+config.gutterOffset,session.getLength()-1),fold=session.getNextFoldLine(firstRow),foldStart=fold?fold.start.row:1/0,foldWidgets=this.$showFoldWidgets&&session.foldWidgets,breakpoints=session.$breakpoints,decorations=session.$decorations,firstLineNumber=session.$firstLineNumber,lastLineNumber=0,gutterRenderer=session.gutterRenderer||this.$renderer,editorDoc=session.doc,doc=session.collabDoc,range=new Range(firstRow,0,lastRow,editorDoc.getLine(lastRow).length),isCollabGutter=doc&&showAuthorInfo&&util.isRealCollab(workspace),authorKeysCache=isCollabGutter&&createAuthorKeyCache(editorDoc,doc.authAttribs,range).authorKeys,colorPool=workspace.colorPool,reversedAuthorPool=workspace.reversedAuthorPool,cell=null,index=-1,row=firstRow;;){
if(row>foldStart&&(row=fold.end.row+1,fold=session.getNextFoldLine(row,fold),foldStart=fold?fold.start.row:1/0),
row>lastRow){for(;this.$cells.length>index+1;)cell=this.$cells.pop(),this.element.removeChild(cell.element)


break}cell=this.$cells[++index],cell||(cell={element:null,textNode:null,foldWidget:null},cell.element=dom.createElement("div"),
cell.textNode=document.createTextNode(""),cell.element.appendChild(cell.textNode),this.element.appendChild(cell.element),
this.$cells[index]=cell)
var className="ace_gutter-cell "
breakpoints[row]&&(className+=breakpoints[row]),decorations[row]&&(className+=decorations[row]),this.$annotations[row]&&(className+=this.$annotations[row].className),
cell.element.className!=className&&(cell.element.className=className)
var height=session.getRowLength(row)*config.lineHeight+"px"
if(height!=cell.element.style.height&&(cell.element.style.height=height),isCollabGutter){var authorKey=authorKeysCache[row],authorColor="transparent",fullname=null


if(authorKey){var uid=reversedAuthorPool[authorKey]
authorColor=util.formatColor(colorPool[uid])
var user=workspace.users[uid]
fullname=user&&user.fullname}cell.element.style.borderLeft="solid 5px "+authorColor,cell.element.setAttribute("uid",fullname?uid:"")

}else cell.element.style.borderLeft="",cell.element.setAttribute("uid","")
if(foldWidgets){var c=foldWidgets[row]
null==c&&(c=foldWidgets[row]=session.getFoldWidget(row))}if(c){cell.foldWidget||(cell.foldWidget=dom.createElement("span"),
cell.element.appendChild(cell.foldWidget))
var className="ace_fold-widget ace_"+c
className+="start"==c&&row==foldStart&&row<fold.end.row?" ace_closed":" ace_open",cell.foldWidget.className!=className&&(cell.foldWidget.className=className)


var height=config.lineHeight+"px"
cell.foldWidget.style.height!=height&&(cell.foldWidget.style.height=height)}else cell.foldWidget&&(cell.element.removeChild(cell.foldWidget),
cell.foldWidget=null)
var text=lastLineNumber=gutterRenderer?gutterRenderer.getText(session,row):row+firstLineNumber
text!=cell.textNode.data&&(cell.textNode.data=text),row++}this.element.style.height=config.minHeight+"px",
(this.$fixedWidth||session.$useWrapMode)&&(lastLineNumber=session.getLength()+firstLineNumber)
var gutterWidth=gutterRenderer?gutterRenderer.getWidth(session,lastLineNumber,config):lastLineNumber.toString().length*config.characterWidth,padding=this.$padding||this.$computePadding()


gutterWidth+=padding.left+padding.right+(isCollabGutter?5:0),gutterWidth===this.gutterWidth||isNaN(gutterWidth)||(this.gutterWidth=gutterWidth,
this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",gutterWidth))

}function createAuthorKeyCache(editorDoc,authAttribs,range){function processScore(index,length,value){
var line=editorDoc.getLine(lastPos.row),rowScore=rowScores[lastPos.row]=rowScores[lastPos.row]||{},score=Math.min(line.length-lastPos.column,length),scoreObj=rowScore[value]=rowScore[value]||{
edits:[],score:0}
scoreObj.edits.push({pos:lastPos,length:score}),scoreObj.score+=score
var pos=editorDoc.indexToPosition(index+length)
if(lastPos.row!==pos.row){if(value)for(var i=lastPos.row+1;i<pos.row;i++)authKeyCache[i]=value
line=editorDoc.getLine(pos.row),rowScore=rowScores[pos.row]=rowScores[pos.row]||{},score=pos.column,scoreObj=rowScore[value]=rowScore[value]||{
edits:[],score:0},scoreObj.edits.push({pos:pos,length:score}),scoreObj.score+=score}lastPos=pos}var startI=editorDoc.positionToIndex(range.start),endI=editorDoc.positionToIndex(range.end),authKeyCache={},rowScores={},lastPos=range.start


AuthorAttributes.traverse(authAttribs,startI,endI,processScore)
for(var rowNum in rowScores){var rowScore=rowScores[rowNum]
delete rowScore[null],delete rowScore[void 0],delete rowScore[0]
var authorKeys=Object.keys(rowScore)
if(0===authorKeys.length)delete rowScores[rowNum]
else if(1===authorKeys.length)authKeyCache[rowNum]=parseInt(authorKeys[0],10)
else{var authKey,biggestScore=0
for(var key in rowScore)rowScore[key].score>biggestScore&&(biggestScore=rowScore[key].score,authKey=key)


authKeyCache[rowNum]=parseInt(authKey,10)}}return{authorKeys:authKeyCache,rowScores:rowScores}}function dispose(){
session.removeMarker(marker.id)}var plugin=new Plugin("Ajax.org",main.consumes),marker=session.addDynamicMarker({
update:drawAuthInfos},!1)
return plugin.freezePublicAPI({get colorPool(){return workspace.colorPool},refresh:refresh,dispose:dispose
}),plugin}function getLineAuthorKey(session,authAttribs,row){var editorDoc=session.doc,line=editorDoc.getLine(row),lineStart=editorDoc.positionToIndex({
row:row,column:0})-1,lineEnd=lineStart+line.length+1,scores={}
AuthorAttributes.traverse(authAttribs,lineStart,lineEnd,function(index,length,value){value&&(scores[value]=(scores[value]||0)+length)

})
var authorKeys=Object.keys(scores)
if(0===authorKeys.length)return null
if(1===authorKeys.length)return parseInt(authorKeys[0],10)
var authorKey,biggestScore=0
for(var key in scores)scores[key]>biggestScore&&(biggestScore=scores[key],authorKey=key)
return parseInt(authorKey,10)}function initGutterLayer(editor){function onGutterMouseout(e){tooltip.style.display="none",
highlightedCell=null}function updateTooltip(){editor.authorTooltipTimeout=null
var session=editor.session,otDoc=session.collabDoc
if(otDoc){var editorDoc=session.doc,authAttribs=otDoc.authAttribs,screenPos=editor.renderer.pixelToScreenCoordinates(mousePos.x,mousePos.y),docPos=session.screenToDocumentPosition(screenPos.row,screenPos.column),line=editorDoc.getLine(docPos.row),hoverIndex=editorDoc.positionToIndex({
row:docPos.row,column:docPos.column}),authorKey=AuthorAttributes.valueAtIndex(authAttribs,hoverIndex)


if(!authorKey||line.length<=screenPos.column||editorDoc.$lines.length<screenPos.row)return tooltip.style.display="none"


var lineOwnerKey=getLineAuthorKey(session,authAttribs,docPos.row)
if(!lineOwnerKey||lineOwnerKey===authorKey)return tooltip.style.display="none"
var reversedAuthorPool=workspace.reversedAuthorPool,uid=reversedAuthorPool[authorKey],fullname=workspace.users[uid]&&workspace.users[uid].fullname


tooltip.style.display="block",tooltip.textContent=fullname,tooltip.style.top=mousePos.y+10+"px",tooltip.style.left=mousePos.x+10+"px"

}}if(editor&&!editor.$authorGutterInited){editor.$authorGutterInited=!0
var highlightedCell,tooltip=editor.tooltip=dom.createElement("div")
tooltip.className="ace_gutter-tooltip",tooltip.style.display="none",editor.container.appendChild(tooltip)


var gutterEl=editor.renderer.$gutter
event.addListener(gutterEl,"mouseout",onGutterMouseout),gutterEl.addEventListener("mousemove",function(e){
if(showAuthorInfo&&util.isRealCollab(workspace)){var target=e.target
if(highlightedCell!=target){var uid=target.getAttribute("uid")
if(uid){tooltip.style.display="block",highlightedCell=target
var user=workspace.users[uid]
tooltip.textContent=user?user.fullname:""}}highlightedCell?(tooltip.style.top=e.clientY-15+"px",tooltip.style.left=e.clientX+"px"):onGutterMouseout()

}})
var mousePos
editor.addEventListener("mousemove",function(e){showAuthorInfo&&util.isRealCollab(workspace)&&(mousePos={
x:e.x,y:e.y},editor.authorTooltipTimeout||(editor.authorTooltipTimeout=setTimeout(updateTooltip,"block"===tooltip.style.display?100:300)))

}),editor.renderer.container.addEventListener("mouseout",function(e){tooltip.style.display="none"}),editor.addEventListener("mousewheel",function(){
clearTimeout(editor.authorTooltipTimeout),delete editor.authorTooltipTimeout,tooltip.style.display="none"

})}}var Plugin=imports.Plugin,settings=imports.settings,ui=imports.ui,ace=imports.ace,util=imports["collab.util"],menus=imports.menus,workspace=imports["collab.workspace"],dom=require("ace/lib/dom"),event=require("ace/lib/event"),Range=require("ace/range").Range,AuthorAttributes=require("./ot/author_attributes")(),showAuthorInfo=!0,showAuthorInfoKey="user/collab/@show-author-info"


settings.on("user/collab",function(){showAuthorInfo=settings.getBool(showAuthorInfoKey)},workspace),ace.on("create",function(e){
showAuthorInfo=settings.getBool(showAuthorInfoKey),initGutterLayer(e.editor.ace)},workspace),menus.addItemByPath("context/ace-gutter/Gutter Options/Show Authorship Info",new ui.item({
type:"check",checked:showAuthorInfoKey}),1e3,workspace),register(null,{AuthorLayer:AuthorLayer})}return main.consumes=["Plugin","ace","settings","collab.workspace","collab.util","ui","menus"],
main.provides=["AuthorLayer"],main})


define("ace/range_list",[],function(require,exports,module){"use strict"
var Range=require("./range").Range,comparePoints=Range.comparePoints,RangeList=function(){this.ranges=[]

};(function(){this.comparePoints=comparePoints,this.pointIndex=function(pos,excludeEdges,startIndex){
for(var list=this.ranges,i=startIndex||0;i<list.length;i++){var range=list[i],cmpEnd=comparePoints(pos,range.end)


if(!(cmpEnd>0)){var cmpStart=comparePoints(pos,range.start)
return 0===cmpEnd?excludeEdges&&0!==cmpStart?-i-2:i:cmpStart>0||0===cmpStart&&!excludeEdges?i:-i-1}}return-i-1

},this.add=function(range){var excludeEdges=!range.isEmpty(),startIndex=this.pointIndex(range.start,excludeEdges)


startIndex<0&&(startIndex=-startIndex-1)
var endIndex=this.pointIndex(range.end,excludeEdges,startIndex)
return endIndex<0?endIndex=-endIndex-1:endIndex++,this.ranges.splice(startIndex,endIndex-startIndex,range)

},this.addList=function(list){for(var removed=[],i=list.length;i--;)removed.push.apply(removed,this.add(list[i]))


return removed},this.substractPoint=function(pos){var i=this.pointIndex(pos)
if(i>=0)return this.ranges.splice(i,1)},this.merge=function(){var removed=[],list=this.ranges
list=list.sort(function(a,b){return comparePoints(a.start,b.start)})
for(var range,next=list[0],i=1;i<list.length;i++){range=next,next=list[i]
var cmp=comparePoints(range.end,next.start)
cmp<0||(0!=cmp||range.isEmpty()||next.isEmpty())&&(comparePoints(range.end,next.end)<0&&(range.end.row=next.end.row,
range.end.column=next.end.column),list.splice(i,1),removed.push(next),next=range,i--)}return this.ranges=list,
removed},this.contains=function(row,column){return this.pointIndex({row:row,column:column})>=0},this.containsPoint=function(pos){
return this.pointIndex(pos)>=0},this.rangeAtPoint=function(pos){var i=this.pointIndex(pos)
if(i>=0)return this.ranges[i]},this.clipRows=function(startRow,endRow){var list=this.ranges
if(list[0].start.row>endRow||list[list.length-1].start.row<startRow)return[]
var startIndex=this.pointIndex({row:startRow,column:0})
startIndex<0&&(startIndex=-startIndex-1)
var endIndex=this.pointIndex({row:endRow,column:0},startIndex)
endIndex<0&&(endIndex=-endIndex-1)
for(var clipped=[],i=startIndex;i<endIndex;i++)clipped.push(list[i])
return clipped},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(session){
this.session&&this.detach(),this.session=session,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)

},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)

},this.$onChange=function(delta){if("insert"==delta.action)var start=delta.start,end=delta.end
else var end=delta.start,start=delta.end
for(var startRow=start.row,endRow=end.row,lineDif=endRow-startRow,colDiff=-start.column+end.column,ranges=this.ranges,i=0,n=ranges.length;i<n;i++){
var r=ranges[i]
if(!(r.end.row<startRow)){if(r.start.row>startRow)break
if(r.start.row==startRow&&r.start.column>=start.column&&(r.start.column==start.column&&this.$insertRight||(r.start.column+=colDiff,
r.start.row+=lineDif)),r.end.row==startRow&&r.end.column>=start.column){if(r.end.column==start.column&&this.$insertRight)continue


r.end.column==start.column&&colDiff>0&&i<n-1&&r.end.column>r.start.column&&r.end.column==ranges[i+1].start.column&&(r.end.column-=colDiff),
r.end.column+=colDiff,r.end.row+=lineDif}}}if(0!=lineDif&&i<n)for(;i<n;i++){var r=ranges[i]
r.start.row+=lineDif,r.end.row+=lineDif}}}).call(RangeList.prototype),exports.RangeList=RangeList})


define("plugins/c9.ide.collab/cursor_layer",[],function(require,module,exports){function main(options,imports,register){
function CursorLayer(session){function updateSelections(selecs){dispose()
for(var clientId in selecs)updateSelection(selecs[clientId])}function drawCursor(pos,html,markerLayer,session,config,bgColor){
var cursorStyle="background-color:"+util.formatColor(bgColor)+";",top=markerLayer.$getTop(pos.row,config),left=Math.round(markerLayer.$padding+pos.column*config.characterWidth)


html.push("<div class='ace_selection' style='","left:",left,"px;","top:",top+2,"px;","height:",config.lineHeight-2,"px;","width:",2,"px;","z-index: 10;",cursorStyle||"","'></div>","<div class='ace_selection' style='","left:",left-2,"px;","top:",top,"px;","height:",5,"px;","width:",6,"px;","z-index: 10;",cursorStyle||"","'></div>")

}function drawSelections(html,markerLayer,session,config){if(!timeslider.visible){var ranges=this.rangeList.ranges,screenRanges=[],bgColor=workspace.colorPool[this.uid]


if(!bgColor)return console.error("[OT] selection can't find user's bg color")
for(var i=0;i<ranges.length;i++){var range=ranges[i]
if(!(range.end.row<config.firstRow)){if(range.start.row>config.lastRow)break
var screenRange=range.toScreenRange(session)
screenRanges.push(screenRange),renderRange(html,markerLayer,session,config,screenRange,bgColor)
var cursor=screenRange[range.cursor==range.start?"start":"end"]
drawCursor(cursor,html,markerLayer,session,config,bgColor)}}this.screenRanges=screenRanges}}function drawTimeSliderOperation(html,markerLayer,session,config){
function scrollToEdit(pos){tsRevNum!==revNum&&(tabs.open({path:doc.id,document:{ace:{jump:{row:pos.row,
column:pos.column}}}},function(){}),tsRevNum=revNum)}function renderInsert(index,length){var startPos=editorDoc.indexToPosition(index)


scrollToEdit(startPos)
var endPos=editorDoc.indexToPosition(index+length),screenRange=Range.fromPoints(startPos,endPos).toScreenRange(session)


renderRange(html,markerLayer,session,config,screenRange,bgColor)}if(timeslider.visible){var revNum=timeslider.sliderPosition


if(revNum){var doc=session.collabDoc,revision=doc.revisions[revNum]
if(revision){var bgColor,uid=revision.author,editorDoc=session.doc
if(bgColor=0==uid?{r:150,g:150,b:150}:workspace.colorPool[uid],!bgColor)return console.error("[OT] timeslider can't find user's bg color")


for(var ops=revision.operation,index=0,i=0;i<ops.length;i++){var len=operations.length(ops[i]),type=operations.type(ops[i])


switch(type){case"retain":index+=len
break
case"insert":renderInsert(index,len),index+=len
break
case"delete":scrollToEdit(editorDoc.indexToPosition(index))
break
default:throw new TypeError("Unknown operation: "+type)}}}}}}function renderRange(html,markerLayer,session,config,screenRange,bgColor){
var className="ace_selection",selectStyle=settings.get("user/ace/@selectionStyle"),selectionStyle="background-color:"+util.formatColor(bgColor,.25)+";z-index:10;"


screenRange.isMultiLine()?"line"===selectStyle?markerLayer.drawMultiLineMarker(html,screenRange,className,config,selectionStyle):markerLayer.drawTextMarker(html,screenRange,className,config,selectionStyle):screenRange.isEmpty()||markerLayer.drawSingleLineMarker(html,screenRange,className,config,0,selectionStyle)

}function dataToRangeList(data,rangeList){return"object"!=typeof data[0]&&(data=[data]),rangeList.ranges=data.map(function(d){
var r=new Range(d[0],d[1],d[2],d[3])
return r.cursor=r[d[4]?"start":"end"],r}),rangeList}function updateSelection(data){if(session){var sel=selections[data.clientId]


sel||(sel={update:drawSelections,uid:data.userId,clientId:data.clientId,rangeList:new RangeList},sel.rangeList.$insertRight=!0,
sel.rangeList.attach(session),session.addDynamicMarker(sel,!1),selections[data.clientId]=sel),data.selection&&(dataToRangeList(data.selection,sel.rangeList),
session._emit("changeBackMarker"))}}function clearSelection(clientId){var selection=selections[clientId]


selection&&(selection.tooltip&&(document.body.removeChild(selection.tooltip),delete selection.tooltip),
selection.arrow&&(document.body.removeChild(selection.arrow),delete selection.arrow),selection.id&&session.removeMarker(selection.id),
selection.rangeList.detach(),delete selections[clientId])}function hideTooltip(selection){selection&&selection.tooltipIsOpen&&selection.tooltip&&(selection.tooltip.style.display="none",
selection.arrow.style.display="none",selection.tooltipIsOpen=!1)}function hideAllTooltips(){for(var clientId in selections)hideTooltip(selections[clientId])


tooltipIsOpen=!1}function drawTooltip(selection,fullname){var html=ui.buildDom([["div",{"class":"cool_tooltip_cursor",
style:"display:none"},["span",{"class":"cool_tooltip_cursor_caption"},fullname]],["div",{"class":"cool_tooltip_cursor_arrow",
style:"display:none"}]],document.body)
selection.tooltip=html[0],selection.arrow=html[1]}function showTooltip(selection,user,coords){if(!selection.tooltip){
var uid=selection.uid,userObj=workspace.users[uid]
if(!userObj)return
drawTooltip(selection,userObj.fullname)}selection.tooltip.style.display=selection.arrow.style.display=""


var x=coords.pageX-11,y=coords.pageY-15
selection.arrow.style.top=y+"px",selection.arrow.style.left=x+"px",selection.tooltip.style.top=y-21+"px",
selection.tooltip.style.left=coords.pageX-(selection.arrow.offsetHeight?selection.tooltip.offsetWidth/2:0)+"px"


var color=session.collabDoc.authorLayer.colorPool[selection.uid]
selection.tooltip.style.backgroundColor=util.formatColor(color),tooltipIsOpen=selection.tooltipIsOpen=!0

}function dispose(){for(var clientId in selections)clearSelection(clientId)}function setInsertRight(clientId,val){
var selection=selections[clientId]
selection&&(selection.rangeList.$insertRight=val)}var tsRevNum,plugin=new Plugin("Ajax.org",main.consumes),tooltipIsOpen=!1,selections={}


return session.addDynamicMarker({update:drawTimeSliderOperation},!1),plugin.freezePublicAPI({get selections(){
return selections},get tooltipIsOpen(){return tooltipIsOpen},updateSelection:updateSelection,updateSelections:updateSelections,
clearSelection:clearSelection,setInsertRight:setInsertRight,hideTooltip:hideTooltip,hideAllTooltips:hideAllTooltips,
showTooltip:showTooltip,dispose:dispose}),plugin}function initTooltipEvents(editor){function updateTooltips(){
function screenToPixelPos(pos){var x=renderer.$padding+Math.round(pos.column*renderer.characterWidth),y=pos.row*renderer.lineHeight


return x-=renderer.scrollLeft,y-=renderer.scrollTop,x=Math.max(Math.min(x,canvasPos.width),0),y=Math.max(Math.min(y,canvasPos.height),0),
{pageX:canvasPos.left+x,pageY:canvasPos.top+y}}function findTooltipPos(range){var start=range.start,end=range.end


if(range.isEmpty()){if(screenPos.row!=end.row)return
if(Math.abs(screenPos.column-end.column)<=1)return end}else if(!(screenPos.row>end.row||screenPos.row<start.row||screenPos.row==end.row&&screenPos.column>end.column||screenPos.row==start.row&&screenPos.column<start.column)){
var d1=screenPos.row-start.row+.8*Math.abs(screenPos.column-start.column),d2=-screenPos.row+end.row+.8*Math.abs(screenPos.column-end.column)


return d1<d2?start:end}}cursorTooltipTimeout=null
var collabDoc=editor.session.collabDoc
if(collabDoc&&collabDoc.loaded&&!timeslider.visible){var clientId,tooltipIsOpen,cursorLayer=collabDoc.cursorLayer,renderer=editor.renderer,canvasPos=renderer.scroller.getBoundingClientRect(),screenPos=renderer.pixelToScreenCoordinates(mousePos.x,mousePos.y),selections=cursorLayer?cursorLayer.selections:{}


for(clientId in selections){var selection=selections[clientId],user=workspace.users[selection.uid]
if(selection&&user)if(selection.tooltipIsOpen&&onTooltip(selection.tooltip,mousePos))tooltipIsOpen=!0
else{for(var tooltipPos,screenRanges=selection.screenRanges||[],i=screenRanges.length;i--&&!(tooltipPos=findTooltipPos(screenRanges[i])););
tooltipPos?(tooltipIsOpen=!0,cursorLayer.showTooltip(selection,user,screenToPixelPos(tooltipPos))):selection.tooltipIsOpen&&cursorLayer.hideTooltip(selection)

}}editorTooltipIsOpen=tooltipIsOpen}}function onTooltip(tooltipNode,coords){if(!tooltipNode)return!1
var pos=apf.getAbsolutePosition(tooltipNode)
return!(coords.x<pos[0]||coords.y<pos[1]||coords.x>tooltipNode.offsetWidth+pos[0]-10||coords.y>tooltipNode.offsetHeight+pos[1]+25)

}if(!editor.$cursorTooltipsInited){editor.$cursorTooltipsInited=!0
var mousePos
editor.addEventListener("mousemove",function(e){mousePos={x:e.x,y:e.y},cursorTooltipTimeout||(cursorTooltipTimeout=setTimeout(updateTooltips,editorTooltipIsOpen?100:300))

}),editor.renderer.container.addEventListener("mouseout",function(e){mousePos={x:e.clientX,y:e.clientY
},cursorTooltipTimeout||(cursorTooltipTimeout=setTimeout(updateTooltips,100))}),editor.addEventListener("mousewheel",function(){
clearTimeout(cursorTooltipTimeout),cursorTooltipTimeout=null
var collabDoc=editor.session.collabDoc,cursorLayer=collabDoc&&collabDoc.cursorLayer
cursorLayer&&cursorLayer.tooltipIsOpen&&cursorLayer.hideAllTooltips()})}}function selectionToData(selection){
var data
if(selection.rangeCount)data=selection.rangeList.ranges.map(function(r){return[r.start.row,r.start.column,r.end.row,r.end.column,r.cursor==r.start]

})
else{var r=selection.getRange()
data=[r.start.row,r.start.column,r.end.row,r.end.column,selection.isBackwards()]}return data}var settings=imports.settings,Plugin=imports.Plugin,ace=imports.ace,ui=imports.ui,tabs=imports.tabManager,util=imports["collab.util"],workspace=imports["collab.workspace"],timeslider=imports.timeslider,operations=require("./ot/operations"),Range=require("ace/range").Range,RangeList=require("ace/range_list").RangeList


ace.on("create",function(e){initTooltipEvents(e.editor.ace)},workspace)
var cursorTooltipTimeout,editorTooltipIsOpen=!1
CursorLayer.selectionToData=selectionToData,register(null,{CursorLayer:CursorLayer})}return main.consumes=["Plugin","ace","settings","tabManager","collab.util","collab.workspace","timeslider","ui"],
main.provides=["CursorLayer"],main})


define("plugins/c9.ide.collab/ot/xform",[],function(require,exports,module){"use strict"
function join(a,b){return a+","+b}function defXformer(typeA,typeB,xformer){xformTable[join(typeA,typeB)]=xformer

}var ops=require("./operations"),xformTable={}
defXformer("retain","retain",function(editA,editB,k){var retainBoth=Math.min(ops.val(editA),ops.val(editB))


k(ops.retain(retainBoth),ops.retain(retainBoth),retainBoth,retainBoth)}),defXformer("delete","delete",function(editA,editB,k){
var toDelete,valA=ops.val(editA),valB=ops.val(editB)
if(valA.length<=valB.length&&valB.substring(0,valA.length)===valA?toDelete=valA.length:valB.length<valA.length&&valA.substring(0,valB.length)===valB&&(toDelete=valB.length),
!toDelete)throw new TypeError("Document state mismatch: delete("+valA+") !== delete("+valB+")")
k(null,null,toDelete,toDelete)}),defXformer("insert","insert",function(editA,editB,k){var lenA=editA.length-1


k(editA,ops.retain(lenA),lenA,0)}),defXformer("retain","delete",function(editA,editB,k){var lenA=ops.val(editA),lenB=editB.length-1


lenA<lenB?k(null,ops.del(editB.substring(1,lenA+1)),lenA,lenA):k(null,editB,lenB,lenB)}),defXformer("delete","retain",function(editA,editB,k){
var lenA=editA.length-1,lenB=ops.val(editB)
lenB<lenA?k(ops.del(editA.substring(1,lenB+1)),null,lenB,lenB):k(editA,null,lenA,lenA)}),defXformer("insert","retain",function(editA,editB,k){
var lenA=editA.length-1
k(editA,ops.retain(lenA),lenA,0)}),defXformer("retain","insert",function(editA,editB,k){var lenB=editB.length-1


k(ops.retain(lenB),editB,0,lenB)}),defXformer("insert","delete",function(editA,editB,k){var lenA=editA.length-1


k(editA,ops.retain(lenA),lenA,0)}),defXformer("delete","insert",function(editA,editB,k){var lenB=editB.length-1


k(ops.retain(lenB),editB,0,lenB)}),module.exports=function(operationA,operationB,k){function kk(aPrime,bPrime,addIndexA,addIndexB){
editA=ops.split(editA,addIndexA)[1],ops.length(editA)||(editA=operationA[++opIndexA]),editB=ops.split(editB,addIndexB)[1],
ops.length(editB)||(editB=operationB[++opIndexB]),aPrime&&operationAPrime.push(aPrime),bPrime&&operationBPrime.push(bPrime)

}for(var xformer,operationAPrime=[],operationBPrime=[],opIndexA=0,opIndexB=0,editA=operationA[0],editB=operationB[0];editA&&editB;){
if(xformer=xformTable[join(ops.type(editA),ops.type(editB))],!xformer)throw new TypeError("Unknown combination to transform: "+join(ops.type(editA),ops.type(editB)))


xformer(editA,editB,kk)}for(;editA;)operationAPrime.push(editA),operationBPrime.push(ops.retain(ops.length(editA))),
editA=operationA[++opIndexA]
for(;editB;)operationBPrime.push(editB),operationAPrime.push(ops.retain(ops.length(editB))),editB=operationB[++opIndexB]


return k(ops.pack(operationAPrime),ops.pack(operationBPrime))}})


define("plugins/c9.ide.collab/ot/apply",[],function(require,exports,module){"use strict"
function OTError(expected,actual){var err=new Error("OT removed text mismatch")
return err.expected=expected,err.actual=actual,err.code="EMISMATCH",err}var operations=require("./operations"),Range=require("ace/range").Range


exports.applyContents=function(op,doc){for(var val,newDoc="",i=0,len=op.length;i<len;i+=1)switch(val=op[i].slice(1),
op[i][0]){case"r":if(val=Number(val),doc.length<val)throw new Error("Could not call retain in ApplyContents doc length: "+doc.length+", retain length: "+val)


newDoc+=doc.slice(0,val),doc=doc.slice(val)
break
case"i":newDoc+=val
break
case"d":if(0!==doc.indexOf(val))throw new OTError(val,doc.slice(0,10))
doc=doc.slice(val.length)
break
default:throw new TypeError("Unknown operation: "+operations.type(op[i]))}return newDoc},exports.applyAce=function(op,editorDoc){
var i,len,index=0,text=""
for(i=0,len=op.length;i<len;i+=1)switch(operations.type(op[i])){case"retain":index+=operations.val(op[i])


break
case"insert":text=operations.val(op[i]),editorDoc.insert(editorDoc.indexToPosition(index,!1,!0),text),
index+=text.length
break
case"delete":text=operations.val(op[i])
var startDel=editorDoc.indexToPosition(index,!1,!0),endDel=editorDoc.indexToPosition(index+text.length,!1,!0),range=Range.fromPoints(startDel,endDel),docText=editorDoc.getTextRange(range)


if(docText!==text)throw new OTError(text,docText)
editorDoc.remove(range)
break
default:throw new TypeError("Unknown operation: "+operations.type(op[i]))}}})


define("plugins/c9.ide.collab/ot/index_cache",[],function(require,exports,module){"use strict"
function IndexCache(doc){function reportError(exception){exception.stack||(exception=new Error(exception)),
setTimeout(function(){throw exception})}doc.indexToPositionSlow||(doc.icache=[],doc.rcache=[],doc.on("change",function(delta){
var row=delta.start.row
doc.icache.splice(row,doc.icache.length)
for(var i=doc.rcache.length;i--;)doc.rcache[i].row>=row&&doc.rcache.splice(i,1)},!0),doc.indexToPositionSlow=doc.indexToPosition,
doc.indexToPosition=function(index,startRow,check){if(startRow)return doc.indexToPositionSlow(index,startRow)


var startIndex=0
startRow=0
for(var rcache=doc.rcache,i=rcache.length;i--;)rcache[i].index<=index&&doc.rcache[i].row>startRow&&(startRow=rcache[i].row,
startIndex=rcache[i].index)
var pos=doc.indexToPositionSlow(index-startIndex,startRow)
if(startRow-pos.row>10&&rcache.push({row:pos.row,index:index-pos.column}),rcache.length>20&&rcache.unshift(),
check){var slowPos=doc.indexToPositionSlow(index)
return slowPos.row!==pos.row&&slowPos.column!==pos.column&&reportError("Inconsistency in indexToPosition"),
slowPos}return pos},doc.positionToIndexSlow=doc.positionToIndex,doc.positionToIndex=function(pos,startRow,check){
return startRow?doc.positionToIndexSlow(pos,startRow):this.rowToIndex(pos.row,check)+pos.column},doc.rowToIndex=function(row,check){
var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,icache=this.icache


row=Math.min(row,lines.length)
for(var i=row-1;i>=0;i--){if(icache[i]){index+=icache[i]
break}index+=lines[i].length+newlineLength}if(row>0&&(icache[row-1]=index),check){var slowIndex=doc.positionToIndexSlow({
row:row,column:0})
return slowIndex!==index&&reportError("Inconsistency in rowToIndex"),slowIndex}return index})}module.exports=IndexCache

})


define("plugins/c9.ide.collab/ot/document",[],function(require,module,exports){function main(options,imports,register){
function OTDocument(docId,c9Document){function resetState(){session&&(session.off("change",handleUserChanges),
session.off("changeEditor",onChangeEditor),session.selection.off("changeCursor",onCursorChange),session.selection.off("changeSelection",onCursorChange),
session.selection.off("addRange",onCursorChange)),inited&&(cursorLayer.dispose(),authorLayer.dispose()),
docStream=revStream=void 0,revCache=rev0Cache=lastSel=void 0,clearTimeout(sendTimer),clearTimeout(cursorTimer),
endSaveWatchDog(),sendTimer=cursorTimer=void 0,commitTrials=0,incoming=[],outgoing=[],packedCs=[],revisions=[],
starRevNums=[],loaded=loading=inited=ignoreChanges=!1,state="IDLE",emit.unsticky("joined")}function setSession(aceSession){
if(!aceSession)return console.warn("[OT] setSession null aceSession!")
if(session)return console.warn("[OT] Ace's session previously set!")
session=aceSession,session.collabDoc=plugin
var aceDoc=session.doc
IndexCache(aceDoc),aceDoc.oldSetValue=aceDoc.oldSetValue||aceDoc.setValue,aceDoc.setValue=patchedSetValue,
aceDoc.getNewLineCharacter=patchedGetNewLineCharacter,loaded&&joinWithSession(),incoming.forEach(handleMessage),
incoming=[],session.on("change",handleUserChanges),session.on("changeEditor",onChangeEditor),session.selection.on("changeCursor",onCursorChange),
session.selection.on("changeSelection",onCursorChange),session.selection.on("addRange",onCursorChange)

}function patchedSetValue(text){var prev=this.getValue()
return prev?(text=collabUtil.normalizeTextLT(text),void applyAce(operations.operation(prev,text),this)):this.oldSetValue(text)

}function patchedGetNewLineCharacter(){return"\n"}function handleUserChanges(delta){if(session._emit("changeBackMarker"),
inited&&!ignoreChanges)try{var aceDoc=session.doc
packedCs=handleUserChanges2(aceDoc,packedCs,delta),scheduleSend()}catch(ex){reportError(ex,{data:delta
}),rejoin("E_EDIT_UPDATE")}}function handleUserChanges2(aceDoc,packedCs,delta){packedCs=packedCs.slice()


for(var nlCh="\n",startOff=aceDoc.positionToIndex(delta.start,!1,!0),offset=startOff,opOff=0,op=packedCs[0];op;){
if("delete"===operations.type(op));else{if(offset<operations.length(op))break
offset-=operations.length(op)}op=packedCs[++opOff]}if(op&&0!==offset){var splitted=operations.split(op,offset)


packedCs.splice(opOff,1,splitted[0],splitted[1]),opOff++}var authorI
if("insert"===delta.action){var newText=delta.lines.join(nlCh)
authorI=workspace.authorPool[workspace.myUserId],packedCs.splice(opOff,0,"i"+newText),applyAuthorAttributes(doc.authAttribs,["r"+startOff,"i"+newText],authorI)

}else if("remove"===delta.action){for(var removedText=delta.lines.join(nlCh),remainingText=removedText,opIdx=opOff,nextOp=packedCs[opIdx];remainingText.length;){
if(!nextOp)return reportError(new Error("Collab: failed to remove text past end of document; rejoining"),{
data:delta}),rejoin()
var opLen=operations.length(nextOp),toRem=Math.min(remainingText.length,opLen)
switch(operations.type(nextOp)){case"retain":packedCs[opIdx]="d"+remainingText.substring(0,toRem),opLen>remainingText.length&&packedCs.splice(opIdx+1,0,"r"+(opLen-remainingText.length)),
remainingText=remainingText.substring(toRem),opIdx++
break
case"insert":packedCs.splice(opIdx,1),opLen>remainingText.length&&packedCs.splice(opIdx,0,operations.split(nextOp,toRem)[1]),
remainingText=remainingText.substring(toRem)
break
case"delete":opIdx++}nextOp=packedCs[opIdx]}applyAuthorAttributes(doc.authAttribs,["r"+startOff,"d"+removedText],authorI)

}return operations.pack(packedCs)}function calculateDelay(){var delay=MAX_DELAY,selections=cursorLayer?cursorLayer.selections:{},aceEditor=(c9Document.editor||"").ace


if(!aceEditor||aceEditor.session!=session)return MAX_DELAY
var config=aceEditor.renderer.layerConfig
for(var clientId in selections){delay-=3e3
for(var ranges=selections[clientId].screenRanges||[],i=0;i<ranges.length;i++){var range=ranges[i],cursorPos=range.start


config.firstRow<=cursorPos.row&&cursorPos.row<=config.lastRow&&(delay=MIN_DELAY)}}return delay=Math.max(MIN_DELAY,delay)

}function scheduleSend(){if(!sendTimer){var delay=pendingSave||commitTrials>0?0:calculateDelay()
sendTimer=setTimeout(function(){doSend(),sendTimer=null},delay)}}function addOutgoingEdit(){var uiDoc=session.getValue(),msg={
docId:docId,op:operations.pack(packedCs)}
clearCs(uiDoc.length),outgoing.push(msg)}function doSend(){if("IDLE"===state){sendTimer&&(clearTimeout(sendTimer),
sendTimer=null)
var st=new Date
if(outgoing.length||isPackedUnity()||addOutgoingEdit(),outgoing.length){state="COMMITTING",commitTrials++


var top=outgoing[0]
if(top.revNum=latestRevNum+1,top.selection=lastSel=CursorLayer.selectionToData(session.selection),top.op.filter(function(o){
return o.length>MAX_OP_SIZE}).length)return connect.send("LARGE_DOC",{docId:top.docId}),emit("largeDocument"),
leave()
connect.send("EDIT_UPDATE",top),emit("send",{revNum:top.revNum})}else onCursorChange()
debug&&console.log("[OT] send took",new Date-st,"ms")}}function setValue(contents,reset,bookmark,callback){
var state=c9Document.getState()
state.value=contents,c9Document.setState(state),clearCs(contents.length),lang.delayedCall(function(){
reset&&c9Document.undoManager.reset(),bookmark&&c9Document.undoManager.bookmark(),callback&&callback()

}).schedule()}function joinData(data){var st=new Date
if(loaded=!1,data.reqId&&reqId!==data.reqId)return console.log("Ignored unrequested join data")
var err=data.err
if(err)return"ENOENT"!=err.code&&"ELARGE"!=err.code&&console.error("JOIN_DOC Error:",docId,err),"ELARGE"==err.code&&emit("largeDocument"),
loading=!1,reportError(new Error("Couldn't join to document"),err),emit.sticky("joined",{err:err})
var copiedData={userId:data.userId,clientId:data.clientId,docId:data.docId,reqId:data.reqId,chunkNum:data.chunkNum,
chunksLength:data.chunksLength};(!lastData&&1!=copiedData.chunkNum||1==copiedData.chunkNum&&docStream||copiedData.chunkNum!=(lastData&&lastData.chunkNum||0)+1||lastData&&lastData.reqId!=copiedData.reqId&&1!=copiedData.chunkNum||"string"!=typeof data.chunk||!data.chunk)&&(chunkError={
lastData:lastData,newData:copiedData,hasDocStream:"string"!=typeof docStream&&docStream,chunk:"string"!=typeof data.chunk&&data.chunk
}),lastData=copiedData,1===data.chunkNum&&(docStream=""),docStream+=data.chunk
var complete=data.chunkNum===data.chunksLength
if(c9Document.hasValue()||emit("joinProgress",{loaded:data.chunkNum,total:data.chunksLength,complete:complete
}),complete){try{doc=JSON.parse(docStream)}catch(e){var error="string"==typeof docStream?{startCh:docStream.slice(0,10),
endCh:docStream.slice(-10)}:{docStream:docStream,type:typeof docStream}
return error.copiedData=copiedData,error.chunk="string"!=typeof data.chunk&&data.chunk,error.chunkError=chunkError,
rejoin("E_JOIN")}finally{lastData=null,docStream=null,chunkError=null}docId!==data.docId&&reportError(new Error("docId mismatch"),{
serverDocId:data.docId}),revisions=[],starRevNums=[],revCache={revNum:doc.revNum,contents:doc.contents,
authAttribs:cloneObject(doc.authAttribs)},state="IDLE",outgoing=[],incoming=[],pendingSave&&(saveWatchDog(!0),
save(pendingSave.silent)),delete doc.selections[workspace.myOldClientId],delete doc.selections[workspace.myClientId],
session&&joinWithSession(),debug&&console.log("[OT] init took",new Date-st,"ms"),loaded=!0,loading=!1,
emit.sticky("joined",{contents:doc.contents,metadata:doc.metadata})}}function joinWithSession(){var clean=doc.fsHash===doc.docHash


clean||console.log("[OT] doc latest state fs diff",docId)
var clientContents=session.getValue(),serverContents=doc.contents,clientRevNum=latestRevNum,serverRevNum=doc.revNum


latestRevNum=serverRevNum
var otherMembersNums=Object.keys(doc.selections).length
if(clientRevNum===serverRevNum||!otherMembersNums&&clientContents){if(packedCs=operations.operation(serverContents,clientContents),
scheduleSend(),!clientRevNum){var authorI=workspace.authorPool[workspace.myUserId]
applyAuthorAttributes(doc.authAttribs,packedCs,authorI)}}else clientRevNum?(clientRevNum>serverRevNum&&(reportError(new Error("Collab: clientRevNum is higher than serverRevNum"),{
rejoinReason:rejoinReason,clientRevNum:clientRevNum,serverRevNum:serverRevNum,clientContents:clientContents,
serverContents:serverContents}),logger.log("Collab: clientrevNum is higher than serverRevNum "+doc.path+" clientRev: "+clientRevNum+" serverRev: "+serverRevNum+" rejoin reason: "+rejoinReason)),
rejoinReason&&clientContents&&clientContents!==serverContents&&(reportError(new Error("Collab: reverting local changes on collaborative document"),{
rejoinReason:rejoinReason,clientRevNum:clientRevNum,serverRevNum:serverRevNum,clientContents:clientContents,
serverContents:serverContents}),logger.log("Collab: reverting local changes on collaborative document "+doc.path+" clientRev: "+clientRevNum+" serverRev: "+serverRevNum+" rejoin reason: "+rejoinReason)),
setValue(serverContents,clean,clean)):(rejoinReason&&clientContents&&clientContents!==serverContents&&(reportError(new Error("Collab: reverting local changes on uninited document"),{
rejoinReason:rejoinReason,serverRevNum:serverRevNum,clientContents:clientContents,serverContents:serverContents
}),logger.log("Collab: reverting local changes on document "+doc.path+" rev: "+serverRevNum+" rejoin reason: "+rejoinReason)),
setValue(serverContents,clean,clean))
if(doc.newLineChar)setAceNewLineMode(doc.newLineChar)
else if(void 0===doc.newLineChar){reportError(new Error("doc.newLineChar is undefined"))
var nlCh=collabUtil.detectNewLineType(doc.contents||"")
doc.permanentNlCh=nlCh,setAceNewLineMode(nlCh)}else console.log("[OT] doc.newLineChar empty for ",docId,"new file? ok - syncing newline mode to collab server"),
onChangeNewLineMode()
rejoinReason=void 0,cursorTimer=setTimeout(changedSelection,500),cursorLayer&&cursorLayer.dispose(),cursorLayer=new CursorLayer(session,workspace),
cursorLayer.updateSelections(doc.selections),authorLayer&&authorLayer.dispose(),authorLayer=new AuthorLayer(session,workspace),
authorLayer.refresh(),inited=!0}function setAceNewLineMode(lineEndChar){if(session&&session.doc){var mode


switch(lineEndChar){case"\r\n":mode="windows"
break
case"\n":case void 0:mode="unix"
break
default:reportError(new Error("Warning: unexpected newLine mode: "+lineEndChar)),mode="unix"}session.doc.off("changeNewLineMode",onChangeNewLineMode),
session.doc.$fsNewLine=lineEndChar,session.doc.setNewLineMode(mode),session.doc.on("changeNewLineMode",onChangeNewLineMode)

}}function onChangeNewLineMode(){var mode=session.doc.getNewLineMode(),nlCh="windows"==mode?"\r\n":"\n"


doc.permanentNlCh&&(nlCh=doc.permanentNlCh,setAceNewLineMode(nlCh)),session.doc.$fsNewLine=nlCh,connect.send("UPDATE_NL_CHAR",{
docId:docId,newLineChar:nlCh})}function reportError(exception,details){details=details||{},details.state=state,
details.session=!!session,details.newLineMode=session&&session.doc&&session.doc.getNewLineMode(),details.docId=docId,
details.latestRevNum=latestRevNum,details.onlineCount=workspace.onlineCount,details.rejoinReason=rejoinReason,
errorHandler.reportError(exception,details,["collab"])}function isPackedUnity(){return!packedCs.length||1===packedCs.length&&"r"===packedCs[0][0]

}function clearCs(len){packedCs=len?["r"+len]:[]}function xformEach(outgoing,inMsg){function k(aPrime,bPrime){
msg.op=aPrime,ops=bPrime}for(var msg,ops=inMsg.op,i=0,len=outgoing.length;i<len;i++)msg=outgoing[i],xform(msg.op,ops,k)


inMsg.op=ops}function isOurOutgoing(msg,top){return!msg.op&&msg.docId===top.docId&&msg.revNum===top.revNum

}function handleIncomingEdit(msg){if(msg.revNum!==latestRevNum+1)return void reportError(new Error("Collab: Incoming edit revNum mismatch"),{
serverRevNum:msg.revNum,latestRevNum:latestRevNum})
var st=new Date
if(outgoing.length&&isOurOutgoing(msg,outgoing[0]))commitTrials=0,msg.op=outgoing[0].op,outgoing.shift(),
addRevision(msg),state="IDLE",pendingSave&&0===--pendingSave.outLen&&doSaveFile(pendingSave.silent),scheduleSend()
else{if(addRevision(msg),msg.sync){c9Document.tab.meta.$lastCollabChange=Date.now(),c9Document.tab.meta.$collabChangeRegistered&&(clearTimeout(c9Document.tab.meta.$collabChangeRegistered),
delete c9Document.tab.meta.$collabChangeRegistered)
var path=msg.path||msg.docId
logger.log("Collab: Received new document, discarding any pending changes "+path+" msg: ",msg," latestRevNum: "+latestRevNum)


try{revertMyPendingChanges(msg.userId)}catch(e){var cause=e.message
return e.message="Collab: unable to revert pending changes, reloading",reportError(e,{cause:cause}),rejoin("E_REVERT")

}pendingSave=null}else outgoing.push({op:packedCs}),xformEach(outgoing,msg),packedCs=outgoing.pop().op


var sel=session.selection
cursorLayer.setInsertRight(msg.clientId,!1),sel.anchor.$insertRight=sel.lead.$insertRight=!0
var rev=session.$undoManager.startNewGroup()
applyEdit(msg,session.doc),session.$undoManager.markIgnored(rev),sel.anchor.$insertRight=sel.lead.$insertRight=!1,
cursorLayer.setInsertRight(msg.clientId,!0),msg.sync&&(flagFileSaved(msg,!0,!0),clearCs(session.getValue().length))

}latestRevNum=msg.revNum,msg.selection&&cursorLayer.updateSelection(msg),debug&&console.log("[OT] handleIncomingEdit took",new Date-st,"ms",latestRevNum)

}function applyEdit(msg,aceDoc,revertData){if(!timeslider.visible){var err
ignoreChanges=!0
try{applyAce(msg.op,aceDoc),applyAuthorAttributes(doc.authAttribs,msg.op,workspace.authorPool[msg.userId])

}catch(e){var oldMessage=e.message
"EMISMATCH"===e.code&&(e.message=revertData?revertData.userId?"Mismatch applying client-side OT operation, revert with userId":"Mismatch applying client-side OT operation, revert without userId":"Mismatch applying client-side OT operation"),
reportError(e,{cause:e.message!==oldMessage?oldMessage:void 0,msg:msg,revertData:revertData}),err=e}finally{
authorLayer.refresh(),msg.revNum&&(doc.revNum=msg.revNum),ignoreChanges=!1,err&&rejoin("E_APPLYEDIT")

}}}function changedSelection(){if(session&&session.selection){cursorTimer=null
var currentSel=CursorLayer.selectionToData(session.selection)
lastSel&&lastSel.join("")===currentSel.join("")||(lastSel=currentSel,connect.send("CURSOR_UPDATE",{docId:docId,
selection:lastSel}),cursorLayer&&cursorLayer.tooltipIsOpen&&cursorLayer.hideAllTooltips())}}function onChangeEditor(e){
var oldEditor=e.oldEditor
oldEditor&&readonly&&oldEditor.setReadOnly(!1),e.editor&&readonly&&e.editor.setReadOnly(!0)}function onCursorChange(){
!loaded||ignoreChanges||cursorTimer||(cursorTimer=setTimeout(changedSelection,200))}function addRevision(msg){
msg.op.length||reportError(new Error("Empty rev operation should never happen!"),{msg:msg}),revisions[msg.revNum]={
operation:msg.op,revNum:msg.revNum,author:msg.userId,updated_at:msg.updated_at||Date.now()},isActiveTimesliderDocument()&&(timeslider.sliderLength=msg.revNum)

}function isActiveTimesliderDocument(){return timeslider.visible&&timeslider.activeDocument===plugin}
function getDetailedRevision(revNum,contentsOnly){rev0Cache||contentsOnly||(rev0Cache=createFirstRevisionViaInverseOperations(),
revCache=null),(!revCache||revCache.revNum>revNum)&&(revCache=cloneObject(rev0Cache))
for(var contents=revCache.contents,authAttribs=cloneObject(revCache.authAttribs),i=revCache.revNum+1;i<=revNum;i++)contents=applyContents(revisions[i].operation,contents),
applyAuthorAttributes(authAttribs,revisions[i].operation,workspace.authorPool[revisions[i].author])
var rev=cloneObject(revisions[revNum])
return rev?(rev.contents=contents,rev.authAttribs=authAttribs,revCache.contents=contents,revCache.authAttribs=cloneObject(authAttribs),
revCache.revNum=revNum,rev):null}function createFirstRevisionViaInverseOperations(){var i,rev0Contents=revCache.contents


for(i=revCache.revNum;i>0;i--){var op=operations.inverse(revisions[i].operation)
try{rev0Contents=applyContents(op,rev0Contents)}catch(e){reportError(new Error("Revision history is not working for document"),{
applyContentsError:e.message,revNum:i})
break}}var originalRevision={revNum:i,contents:rev0Contents,authAttribs:[rev0Contents.length,null]}
return originalRevision}function getRevisionContents(revNum){var rev=getDetailedRevision(revNum,!0)
return rev&&rev.contents}function historicalSearch(query){for(var searchString=lang.escapeRegExp(query),revNums=revisions.length,result={
revNums:revNums},revNo=0;revNo<revNums;revNo++){var rev=getDetailedRevision(revNo),count=0
rev.contents.match(new RegExp(searchString,"i"))&&(count=rev.contents.match(new RegExp(searchString,"gi")).length,
result[revNo]=count)}return result}function isReadOnly(){return readonly||c9Document.editor&&c9Document.editor.ace&&c9Document.editor.ace.getReadOnly()

}function updateToRevision(revNum){if(!revisions[0])return console.warn("[OT] revisions may haven't yet been loaded!")


if(!isReadOnly())return console.error("[OT] Can't updateToRevNum while editing!")
if("undefined"==typeof revNum&&(revNum=revisions.length-1),debug&&console.log("[OT] REV:",revNum),doc.revNum!==revNum){
var rev=getDetailedRevision(revNum)
timeslider.updateTimer(rev.updated_at),ignoreChanges=!0
var resetAndBookmark=starRevNums.indexOf(revNum)!==-1
setValue(rev.contents,resetAndBookmark,resetAndBookmark),doc.authAttribs=rev.authAttribs,authorLayer.refresh(),
doc.revNum=revNum,ignoreChanges=!1}}function revertToRevision(revNum){var latestRev=getDetailedRevision(revisions.length-1),revertToRev=getDetailedRevision(revNum)


ignoreChanges=!0,setValue(revertToRev.contents,!1,!1)
var op=operations.operation(latestRev.contents,revertToRev.contents),authAttribs=latestRev.authAttribs,authorI=workspace.authorPool[workspace.myUserId]


applyAuthorAttributes(authAttribs,op,authorI),doc.authAttribs=authAttribs,authorLayer.refresh(),packedCs=op,
scheduleSend(),ignoreChanges=!1}function revertMyPendingChanges(userId){if(isPackedUnity()||outgoing.push({
op:packedCs}),outgoing.length){var doc=session.doc||{}
reportError(new Error("Collab: reverting pending changes to document because of server sync commit"),{
outgoing:outgoing,doc:doc}),logger.log("Collab: reverting pending chagnes to document because of server sync commit "+doc.path+" revNum: "+doc.revNum),
userId=userId||workspace.myUserId
for(var i=outgoing.length-1;i>=0;i--)applyEdit({op:operations.inverse(outgoing[i].op),userId:userId},session.doc,{
outgoing:outgoing,userId:userId})
outgoing=[]}}function handleMessage(event){if(inited&&!doc&&reportError(new Error("Weird state: inited, but no document")),
!inited||!doc)return incoming.push(event)
var data=event.data
switch(event.type){case"EDIT_UPDATE":handleIncomingEdit(data)
break
case"UPDATE_NL_CHAR":setAceNewLineMode(data.newLineChar)
break
case"SYNC_COMMIT":handleSyncCommit(data)
break
case"CURSOR_UPDATE":cursorLayer&&cursorLayer.updateSelection(data)
break
case"FILE_SAVED":handleFileSaved(data)
break
case"FILE_LOCKING":saveStateDebugging="LOCKING"
break
case"FILE_LOCKED":saveStateDebugging="LOCKED"
break
case"FILE_RETRIEVED":saveStateDebugging="RETRIEVED"
break
case"DATA_WRITTEN":saveStateDebugging="DATAWRITTEN"
break
case"GET_REVISIONS":receiveRevisions(data)
break
default:reportError(new Error("Unknown OT document event type:"+event.type+" "+JSON.stringify(event)))

}}function handleSyncCommit(data){state="IDLE","VERSION_E"==data.code&&latestRevNum!==data.revNum&&(reportError(new Error("Collab: OT version inconsistency"),{
serverRevNum:data.revNum,latestRevNum:latestRevNum}),latestRevNum=data.revNum),"OT_E"==data.code||commitTrials>MAX_COMMIT_TRIALS?(console.warn("[OT] Local document inconsistent with server; attempting rejoin -- SYNC_COMMIT",data.reason,data.code),
logger.log("[OT] Local document inconsistent with server; attempting rejoin -- SYNC_COMMIT",data.reason,data.code),
rejoin("OT_E")):(console.warn("Collab: [OT] Local document inconsistent with server; reapplying changes -- SYNC_COMMIT",data.reason,data.code),
logger.log("Collab: [OT] Local document inconsistent with server; reapplying changes -- SYNC_COMMIT",data.reason,data.code),
scheduleSend())}function handleFileSaved(data){endSaveWatchDog()
var err=data.err
if(err)return console.error("[OT] Failed saving file!",err,docId),emit("saved",{err:err})
if(pendingSave){var value=getRevisionContents(data.revNum)
if(void 0==value)plugin.docHash!==data.fsHash&&reportError(new Error("File saved, unable to confirm checksum"),{
docHash:plugin.docHash,fsHash:data.fsHash,revNum:data.revNum,docId:docId})
else if(apf.crypto.MD5.hex_md5(value)!==data.fsHash)return reportError(new Error("File saving checksum failed; retrying with XHR")),
emit("saved",{err:"Save content mismatch",code:"EMISMATCH"})}var isClean=!outgoing.length||latestRevNum===data.revNum,rev=revisions[data.revNum]||{
revNum:data.revNum,updated_at:Date.now()}
flagFileSaved(rev,data.star,isClean),pendingSave=null}function flagFileSaved(revision,isStar,isClean){
emit("saved",{}),isClean&&lang.delayedCall(function(){c9Document.undoManager.bookmark()}).schedule(),
isStar&&(starRevNums.push(revision.revNum),isActiveTimesliderDocument()&&timeslider.addSavedRevision(revision))

}function receiveRevisions(data){if(1===data.chunkNum&&(revStream=""),revStream+=data.chunk,!(data.chunkNum<data.chunksLength)){
var revisionsObj=JSON.parse(revStream)
revStream=null,revisions=revisionsObj.revisions,starRevNums=revisionsObj.starRevNums,emit("revisions",{
revisions:revisions,stars:starRevNums}),isActiveTimesliderDocument()&&loadRevisions()}}function loadRevisions(){
if(!revisions[0])return console.log("[OT] Loading revisions ..."),timeslider.loading=!0,void connect.send("GET_REVISIONS",{
docId:docId})
if(isActiveTimesliderDocument()){var numRevs=revisions.length-1,lastRev=revisions[numRevs],starRevisions=starRevNums.map(function(revNum){
return revisions[revNum]})
timeslider.loading=!1,timeslider.sliderLength=numRevs,timeslider.setSavedRevisions(starRevisions),timeslider.sliderPosition=numRevs,
timeslider.updateTimer(lastRev.updated_at),timeslider.sliderLength=numRevs,cursorLayer.hideAllTooltips(),
authorLayer.refresh()}}function save(silent){saveWatchDog(),stateWhenSaveCalled=state,saveStateDebugging=null


var isUnity=isPackedUnity()
return isUnity||addOutgoingEdit(),pendingSave={silent:!!silent,outLen:outgoing.length},"IDLE"===state&&isUnity?doSaveFile(silent):void doSend()

}function doSaveFile(silent){saveWatchDog(),pendingSave||(pendingSave={silent:silent})
var event={docId:docId}
emit("beforeSave",event),saveStateDebugging="SAVING",connect.send("SAVE_FILE",{postProcessor:event.postProcessor,
docId:docId,silent:!!silent})}function saveWatchDog(restart,timeout){saveTimer&&!restart||(endSaveWatchDog(),
saveTimer=setTimeout(function(){saveTimer=pendingSave=null,emit("saved",{err:"File save timeout",code:"ETIMEOUT"
})},timeout||COLLAB_SAVE_FILE_TIMEOUT))}function endSaveWatchDog(){clearTimeout(saveTimer),saveTimer=null

}function rejoin(reason){console.log("[OT] rejoining document",docId,"reason: ",reason),resetState(),
rejoinReason=reason
var sameSession=session
session=null,setSession(sameSession),doLoad()}function load(){"DISCONNECTED"==state?rejoin("DISCONNECTED"):doLoad()

}function doLoad(){loading=!0,reqId=Math.floor(9007199254740992*Math.random()),connect.send("JOIN_DOC",{
docId:docId,reqId:reqId})}function leave(){connect.connected&&connect.send("LEAVE_DOC",{docId:docId}),
resetState()}function disconnect(){resetState(),state="DISCONNECTED",logger.log("[OT] document",docId,"disconnected")

}function clientLeave(clientId){cursorLayer&&cursorLayer.clearSelection(clientId)}function isChanged(){
var lastRev=revisions[revisions.length-1]
return!isPackedUnity()||revisions.length>1&&starRevNums.indexOf(lastRev.revNum)===-1}var doc,session,docStream,revStream,cursorLayer,authorLayer,revCache,rev0Cache,revisions,starRevNums,latestRevNum,lastSel,commitTrials,sendTimer,cursorTimer,saveTimer,incoming,outgoing,ignoreChanges,packedCs,loaded,loading,inited,state,stateWhenSaveCalled,saveStateDebugging,pendingSave,readonly,reqId,rejoinReason,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),cloneObject=c9Util.cloneObject,debug=connect.debug


resetState()
var lastData,chunkError
return plugin.freezePublicAPI({_events:["joined","joinProgress","saved","revisions","send"],get id(){
return docId},get rejoinReason(){return rejoinReason},get path(){return docId},get state(){return state

},get stateWhenSaveCalled(){return stateWhenSaveCalled},get saveStateDebugging(){return saveStateDebugging

},get session(){return session},get original(){return c9Document},get loading(){return loading},get loaded(){
return loaded},get inited(){return inited},get fsHash(){return doc&&doc.fsHash},get docHash(){return doc&&doc.docHash

},get authAttribs(){return doc?doc.authAttribs:[]},get revisions(){return revisions},get cursorLayer(){
return cursorLayer},get authorLayer(){return authorLayer},get latestRevNum(){return latestRevNum},get changed(){
return isChanged()},get pendingUpdates(){return packedCs.length>1},get readonly(){return isReadOnly()

},set readonly(r){readonly=r,c9Document.tab.editor.setOption("readOnly",r)},load:load,setSession:setSession,
leave:leave,dispose:resetState,disconnect:disconnect,clientLeave:clientLeave,loadRevisions:loadRevisions,
sendNow:doSend,updateToRevision:updateToRevision,revertToRevision:revertToRevision,save:save,historicalSearch:historicalSearch,
joinData:joinData,handleMessage:handleMessage}),plugin}var Plugin=imports.Plugin,connect=imports["collab.connect"],c9Util=imports.util,collabUtil=imports["collab.util"],apf=imports.apf,workspace=imports["collab.workspace"],timeslider=imports.timeslider,CursorLayer=imports.CursorLayer,AuthorLayer=imports.AuthorLayer,errorHandler=imports.error_handler,logger=imports["vfs.log"],lang=require("ace/lib/lang"),xform=require("./xform"),operations=require("./operations"),apply=require("./apply"),applyContents=apply.applyContents,applyAce=apply.applyAce,IndexCache=require("./index_cache"),applyAuthorAttributes=require("./author_attributes")().apply,MIN_DELAY=options.minDelay,MAX_DELAY=options.maxDelay,MAX_COMMIT_TRIALS=20,COLLAB_SAVE_FILE_TIMEOUT=5e3,MAX_OP_SIZE=1048576


register(null,{OTDocument:OTDocument})}return main.consumes=["Plugin","ace","util","apf","collab.connect","collab.util","collab.workspace","timeslider","CursorLayer","AuthorLayer","error_handler","vfs.log"],
main.provides=["OTDocument"],main})


define("plugins/c9.ide.collab/util",[],function(require,exports,module){function main(options,imports,register){
function escapeHTML(text){return text&&text.replace(HTML_CHARACTERS_EXPRESSION,function(c){return HTML_ENTITY_MAP[c]||c

})}function escapeHTMLAttribute(text){return text&&text.replace(HTML_ATTRIBUTE_CHARACTERS_EXPRESSION,function(c){
return HTML_ENTITY_MAP[c]||"&#x"+("00"+c.charCodeAt(0).toString(16)).slice(-2)+";"})}function findURLs(text){
function _findURLs(text){_REGEX_URL.lastIndex=0
for(var execResult,urls=null;execResult=_REGEX_URL.exec(text);){urls=urls||[]
var startIndex=execResult.index,url=execResult[0]
urls.push([startIndex,url])}return urls}var _REGEX_WORDCHAR=/[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u1FFF\u3040-\u9FFF\uF900-\uFDFF\uFE70-\uFEFE\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFDC]/,_REGEX_URLCHAR=new RegExp("("+/[-:@a-zA-Z0-9_.,~%+\/?=&#;()$]/.source+"|"+_REGEX_WORDCHAR.source+")"),_REGEX_URL=new RegExp(/(?:(?:https?|s?ftp|ftps|file|smb|afp|nfs|(x-)?man|gopher|txmt):\/\/|mailto:)/.source+_REGEX_URLCHAR.source+"*(?![:.,;])"+_REGEX_URLCHAR.source,"g")


return _findURLs(text)}function escapeHtmlWithClickableLinks(text,target){function advanceTo(i){i>idx&&(pieces.push(escapeHTML(text.substring(idx,i))),
idx=i)}var idx=0,pieces=[],urls=findURLs(text)
if(urls)for(var j=0;j<urls.length;j++){var startIndex=urls[j][0],href=urls[j][1]
advanceTo(startIndex),pieces.push("<a ",target?'target="'+escapeHTMLAttribute(target)+'" ':"",'href="',escapeHTMLAttribute(href),'">'),
advanceTo(startIndex+href.length),pieces.push("</a>")}return advanceTo(text.length),pieces.join("")}function formatColor(rgb,alpha){
return rgb?alpha?["rgba(",rgb.r,",",rgb.g,",",rgb.b,",",alpha,")"].join(""):["rgb(",rgb.r,",",rgb.g,",",rgb.b,")"].join(""):"transparent"

}function reverseObject(obj){var reversed={}
for(var auth in obj)reversed[obj[auth]]=auth
return reversed}function isRealCollab(workspace){var users=workspace.users,numUsers=Object.keys(users).length


return users.Anonymous&&numUsers--,numUsers>1}function normalizeTextLT(text){return text.replace(/\r\n?/g,"\n")

}function detectNewLineType(text){var match=text.match(/^.*?(\r\n|\r|\n)/m)
return match?match[1]:"\n"}var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),HTML_ENTITY_MAP={
"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},HTML_CHARACTERS_EXPRESSION=/[&"'<>\/]/gm,HTML_ATTRIBUTE_CHARACTERS_EXPRESSION=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF]/gm


plugin.freezePublicAPI({detectNewLineType:detectNewLineType,normalizeTextLT:normalizeTextLT,escapeHtmlWithClickableLinks:escapeHtmlWithClickableLinks,
escapeHTML:escapeHTML,formatColor:formatColor,reverseObject:reverseObject,isRealCollab:isRealCollab}),
register(null,{"collab.util":plugin})}return main.consumes=["Plugin"],main.provides=["collab.util"],main

})


define("plugins/c9.ide.collab/workspace",[],function(require,exports,module){function main(options,imports,register){
function load(){loaded||(loaded=!0,pubsub.on("message",function(message){if("collab"==message.type){console.log("PubSub collab API message",message)


var action=message.action,body=message.body,uid=body.uid
switch(action){case"add_member":addCachedMember(body),myUserId==uid&&showAlert("Workspace Access Changed","rw"==body.acl?"You have been granted read/write access to this workspace.":"You have been granted readonly access to this workspace.","To continue, Cloud9 will be reloaded.",function(){
reloadWorkspace(1e3)})
break
case"update_member_access":updateCachedAccess(uid,body.acl),myUserId==uid&&showAlert("Workspace Access Changed","rw"==body.acl?"You have been granted read/write access to the workspace.":"You workspace access has been limited to read-only.","To continue, Cloud9 will be reloaded.",function(){
reloadWorkspace(1e3)})
break
case"remove_member":removeCachedMember(uid),body.uid==myUserId&&showAlert("Workspace Access Revoked","You have been removed from the list of members of this workspace.","To continue, Cloud9 will be reloaded.",function(){
reloadWorkspace(1e3)})
break
case"request_access":var notif={type:"access_request",name:body.name,uid:body.uid,email:body.email}
emit("notification",notif)
break
case"accept_request":reloadWorkspace()
break
case"deny_request":reloadWorkspace()
break
default:console.warn("Unhandled pubsub collab action:",action,message)}}}))}function reloadWorkspace(afterTimeout){
setTimeout(function(){window.location.reload()},afterTimeout||10)}function syncWorkspace(data){myOldClientId=myClientId!==data.myClientId?myClientId:null,
myClientId=data.myClientId,fs=data.fs,authorPool=data.authorPool,reversedAuthorPool=util.reverseObject(authorPool),
colorPool=data.colorPool,users=data.users,chatHistory=data.chatHistory,loadedWorkspace=!0,onlineCount=0


for(var user in users)onlineCount+=user.online?1:0
onlineCount=Math.max(onlineCount,1),emit.sticky("sync")}function leaveClient(uid,clientId){var user=users[uid]


user.online=Math.max(user.online-1,0),user.clients||(user.clients=[])
var i=user.clients.indexOf(clientId)
i!=-1&&user.clients.splice(i,1),onlineCount--,emit.sticky("sync")}function joinClient(user,clientId){
var uid=user.uid,authorId=user.author
users[uid]=user,authorPool[uid]=authorId,reversedAuthorPool[authorId]=uid,colorPool[uid]=user.color,onlineCount++,
emit.sticky("sync")}function updateOpenDocs(data,action){var user=users[data.userId]
if(user){var client=user.clients[data.clientId]
if("leave"!=action||client){if(client||(client=user.clients[data.clientId]={documents:[],active:-1,status:"pending"
}),"set"==action)return user.clients[data.clientId]=data.fileList,data.fileList.status="loaded",void emit.sticky("sync")


var tabId=data.tabId||data.docId
if(tabId){var i=client.documents.indexOf(tabId)
"join"==action?i==-1&&client.documents.push(tabId):"leave"==action?i!=-1&&client.documents.splice(i,1):"activate"==action&&(i==-1&&(i=client.documents.push(tabId)-1),
client.active=i),emit.sticky("sync")}}}}function updateUserState(uid,state){users[uid].state=state,emit.sticky("sync")

}function loadMembers(callback){function done(members,info){cachedMembers=members,cachedInfo=info,callback(),
emit.sticky("sync")}return cachedMembers?done(cachedMembers,cachedInfo):void api.collab.get("access_info",function(err,info){
return err&&0===err.code?setTimeout(loadMembers.bind(null,callback),2e4):err?callback(err):info.member?void api.collab.get("members/list?pending=0",function(err,data){
return err&&403!==err.code?callback(err):void done(!err&&data||[],info)}):done([],info)})}function addMember(username,access,options,callback){
callback||(callback=options,options={}),api.collab.post("members/add",{body:{username:username,access:access
},query:{silent:options.silent}},function(err,data,res){return err?callback(err):void(pubsub.connected?callback(null,data):addCachedMember(data,callback))

})}function addCachedMember(member,next){return cachedMembers?(cachedMembers=cachedMembers.filter(function(m){
return m.uid!=member.uid}),cachedMembers.push(member),emit.sticky("sync"),void(next&&next(null,member))):console.warn("addCachedMember() - cachedMembers = null !")

}function removeMember(uid,callback){api.collab["delete"]("members/remove",{body:{uid:uid}},function(err,data,res){
return err?callback(err):void(pubsub.connected||removeCachedMember(uid,callback))})}function removeCachedMember(uid,next){
return cachedMembers?(cachedMembers=cachedMembers.filter(function(member){return member.uid!=uid}),emit.sticky("sync"),
void(next&&next())):console.warn("removeCachedMember() - cachedMembers = null !")}function updateAccess(uid,acl,callback){
api.collab.put("members/update_access",{body:{uid:uid,access:acl}},function(err,data,res){return err?callback(err):void(pubsub.connected||updateCachedAccess(uid,acl,callback))

})}function updateCachedAccess(uid,acl,next){return cachedMembers?((cachedMembers.filter(function(member){
return member.uid==uid})[0]||{}).acl=acl,emit.sticky("sync"),void(next&&next())):console.warn("updateCachedAccess() - cachedMembers = null !")

}function getUserState(uid){var user=users[uid]
return user&&user.online?user.state||"online":"offline"}function addMemberNonPubSub(member){pubsub.connected||addCachedMember(member)

}var myClientId,myOldClientId,fs,reversedAuthorPool,chatHistory,cachedMembers,cachedInfo,Plugin=imports.Plugin,util=imports["collab.util"],api=imports.api,pubsub=imports.pubsub,info=imports.info,showAlert=imports["dialog.alert"].show,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),isAdmin=options.isAdmin,authorPool={},colorPool={},users={},onlineCount=0,myUserId=info.getUser().id,loadedWorkspace=!1,loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({_events:["sync"],get users(){return users

},get authorPool(){return authorPool},get reversedAuthorPool(){return reversedAuthorPool},get colorPool(){
return colorPool},get myClientId(){return myClientId},get myOldClientId(){return myOldClientId},get myUserId(){
return myUserId},get isReady(){return loadedWorkspace},get fs(){return fs},get chatHistory(){return chatHistory

},set chatHistory(history){chatHistory=history},get members(){return cachedMembers||[]},get onlineCount(){
return onlineCount},get accessInfo(){return cachedInfo||{}},get isAdmin(){return isAdmin},addChatMessage:function(msg){
chatHistory.push(msg)},getUser:function(uid){return users[uid]},getUserColor:function(uid){return uid&&util.formatColor(colorPool[uid])||"transparent"

},getUserState:getUserState,syncWorkspace:syncWorkspace,leaveClient:leaveClient,joinClient:joinClient,
updateOpenDocs:updateOpenDocs,updateUserState:updateUserState,loadMembers:loadMembers,updateAccess:updateAccess,
removeMember:removeMember,addMember:addMember,addMemberNonPubSub:addMemberNonPubSub}),register(null,{
"collab.workspace":plugin})}return main.consumes=["Plugin","collab.util","api","pubsub","info","dialog.alert"],
main.provides=["collab.workspace"],main})


define("plugins/c9.ide.collab/collabpanel",[],function(require,module,exports){function main(options,imports,register){
function CollabPanel(developer,deps,options){function draw(e){amlFrame=ui.frame({buttons:"min",activetitle:"min",
"class":"absframe",style:"position:relative;"+(style||""),textselect:options.textselect,caption:caption
})
var aml=e.aml
100==index?aml.insertBefore(amlFrame,aml.firstChild):aml.appendChild(amlFrame),height&&amlFrame.setHeight(height),
plugin.addElement(amlFrame),emit.sticky("draw",{aml:amlFrame,html:amlFrame.$int}),amlFrame.on("prop.height",function(){
emit("resize")}),amlFrame.on("afterstatechange",function(){if(amlFrame.parentNode){amlFrame.parentNode.childNodes.forEach(function(n){
n.emit("resize")})
var closed="normal"!=amlFrame.state
settings.set("state/collab/panel/"+options.name+"/@closed",closed)}}),settings.once("read",function(){
var closed=settings.get("state/collab/panel/"+options.name+"/@closed",closed)
closed&&setTimeout(function(){amlFrame.minimize()},10)}),collab.on("show",function(){emit("show")},plugin),
collab.on("hide",function(){emit("hide")},plugin)}function show(){collab.show(),amlFrame&&amlFrame.restore(),
emit("show")}function hide(){amlFrame.hide(),emit("hide")}var plugin=new Plugin(developer,deps),emit=plugin.getEmitter()


emit.setMaxListeners(1e3)
var amlFrame,caption=options.caption,index=options.index||100,height=options.height||"",style=options.style||""


return plugin.on("load",function(){collab.once("drawPanels",draw,plugin)}),plugin.freezePublicAPI.baseclass(),
plugin.freezePublicAPI({get aml(){return amlFrame},_events:["draw"],show:show,hide:hide}),plugin}var Plugin=imports.Plugin,ui=imports.ui,collab=imports.collab,settings=imports.settings


register(null,{CollabPanel:CollabPanel})}return main.consumes=["Plugin","ui","collab","settings"],main.provides=["CollabPanel"],
main})


define("text!plugins/c9.ide.collab/collab.css",[],"")


define("plugins/c9.ide.collab/install",[],function(require,exports,module){module.exports=function(session,options){
var win32="win32"==options.platform
win32||session.install({name:"SQLite",description:"SQLite Database and NPM module",cwd:"~/.c9",optional:!0
},[{npm:["sqlite3@3.1.4"]},{"tar.gz":{url:"https://raw.githubusercontent.com/c9/install/master/packages/sqlite3/linux/sqlite3.tar.gz",
target:"~/.c9/lib/sqlite3",dir:"sqlite3"}},{symlink:{source:"~/.c9/lib/sqlite3/sqlite3",target:"~/.c9/bin/sqlite3"
}}]),session.install({name:"Sequelize",description:"Sequelize NPM module",cwd:"~/.c9",optional:!0},{npm:["sequelize@2.0.0-beta.0"]
}),session.start()},module.exports.version=1})


define("plugins/c9.ide.collab/collab",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){if(!loaded){loaded=!0,connect.on("message",onMessage),
connect.on("connecting",onConnecting),connect.on("connect",onConnectMsg),connect.on("disconnect",onDisconnect),
metadata.on("beforeReadFile",beforeReadFile,plugin),fs.on("afterReadFile",afterReadFile,plugin),fs.on("beforeWriteFile",beforeWriteFile,plugin),
ace.on("initAceSession",function(e){var doc=e.doc,path=doc.tab.path,otDoc=documents[path]
otDoc&&!otDoc.session&&otDoc.setSession(doc.getSession().session)}),tabManager.on("focusSync",function(e){
var tab=e.tab,otDoc=documents[tab.path]
if(otDoc&&!otDoc.session){var doc=tab.document,docSession=doc.getSession()
docSession&&otDoc.setSession(docSession.session)}}),tabManager.on("focus",function(e){var tab=e.tab
if(tab&&tab.editor){var id=getTabId(tab)
id&&connect.send("MESSAGE",{action:"focus",clientId:workspace.myClientId,userId:workspace.myUserId,tabId:id
})}}),plugin.on("userMessage",function(e){"focus"==e.action&&workspace.updateOpenDocs(e,"activate")}),
ui.insertCss(css,staticPrefix,plugin),window.addEventListener("unload",function(){leaveAll()},!1),tabManager.on("open",function(e){
var tab=e.tab
tab.on("setPath",function(e){onSetPath(tab,e.oldpath,e.path)})}),tabManager.on("tabDestroy",function(e){
leaveDocument(e.tab.path)},plugin)
var showAuthorInfoKey="user/collab/@show-author-info"
prefs.add({General:{Collaboration:{"Show Authorship Info":{type:"checkbox",position:8e3,path:showAuthorInfoKey
}}}},plugin),settings.on("read",function(){settings.setDefaults("user/collab",[["show-author-info",!0]]),
refreshActiveDocuments()},plugin),settings.on("user/collab",function(){refreshActiveDocuments()},plugin),
workspace.on("sync",scheduleUpdateUserBadges),scheduleUpdateUserBadges()}}function draw(options){if(!drawn){
drawn=!0
var bar=options.aml,html=bar.$int
emit.sticky("drawPanels",{html:html,aml:bar})}}function onDisconnect(){for(var docId in documents){var doc=documents[docId]


doc.disconnect()}emit("disconnect")}function onConnecting(){}function onConnectMsg(msg){workspace.syncWorkspace(msg.data)


for(var docId in documents)documents[docId].load()
emit("connect")}function onMessage(msg){var data=msg.data||{},user=data&&data.userId&&workspace.getUser(data.userId),type=msg.type,docId=data.docId


docId&&"/~".indexOf(docId[0])===-1&&(docId=data.docId="/"+docId)
var doc=documents[docId]
if(!connect.connected&&"CONNECT"!==type)return console.warn("[OT] Not connected - ignoring:",msg)
if(data.clientId&&data.clientId===workspace.myOldClientId)return console.warn("[OT] Skipping my own 'away' disconnection notifications")


switch(type){case"CHAT_MESSAGE":data.increment=!0,emit("chatMessage",data)
break
case"USER_JOIN":if(user=data.user,!user)break
workspace.joinClient(user,data.clientId),notifyUserOnline(user)
break
case"USER_LEAVE":workspace.leaveClient(data.userId,data.clientId),notifyUserOffline(user)
break
case"LEAVE_DOC":workspace.updateOpenDocs(data,"leave"),doc&&doc.clientLeave(data.clientId)
break
case"JOIN_DOC":if(workspace.updateOpenDocs(data,"join"),workspace.myClientId!==data.clientId)return
if(!doc)return console.warn("[OT] Received msg for file that is not open - docId:",docId,"open docs:",Object.keys(documents))


doc.joinData(data)
break
case"RESOLVE_CONFLICT":emit("resolveConflict",{path:docId})
break
case"LARGE_DOC":doc&&doc.leave(),doc&&reportLargeDocument(doc,!msg.data.response),delete documents[docId]


break
case"DOC_CHANGED_ON_DISK":reportDocChangedOnDisk(docId)
break
case"DOC_HAS_PENDING_CHANGES":reportDocHasPendingChanges(docId)
break
case"USER_STATE":workspace.updateUserState(data.userId,data.state)
break
case"CLEAR_CHAT":emit("chatClear",data)
break
case"MESSAGE":emit("userMessage",data)!==!1&&handleUserMessage(data)
break
case"ERROR":errorHandler.log(data.err||new Error("Collab error"),util.extend({},{users:workspace.users,
userId:workspace.myUserId,clientId:workspace.myClientId},data))
break
case"POST_PROCESSOR_ERROR":return void emit("postProcessorError",data)
case"RESET_DB":showAlert("Uh oh!","Workspace issue encountered","Your workspace encountered an issue, but don\u2019t worry, we\u2019ve resolved it. Your data is still intact, however your file revision history may have been lost. Give us just a moment to complete the recovery so you can get back to your project. ",function(){
setTimeout(function(){window.location.reload()},1e3)})
break
default:if(!doc)return console.warn("[OT] Received msg for file that is not open",docId,msg)
doc.loaded?doc.handleMessage(msg):console.warn("[OT] Doc ",docId," not yet inited - MSG:",msg)}}function notifyUserOffline(user){
clearTimeout(usersLeaving[user.fullname]),usersLeaving[user.fullname]=setTimeout(function(){user.online||bubbleNotification("went offline",user),
delete usersLeaving[user.fullname]},4e3)}function notifyUserOnline(user){return usersLeaving[user.fullname]?void clearTimeout(usersLeaving[user.fullname]):void(user.online<=1&&bubbleNotification("came online",user))

}function joinDocument(docId,doc,progress){console.log("[OT] Join",docId)
var docSession=doc.getSession(),aceSession=docSession&&docSession.session
aceSession||console.warn("[OT] Ace session not ready for:",docId,"- will setSession when ready!")
var otDoc=documents[docId]||new OTDocument(docId,doc)
return aceSession&&otDoc.setSession(aceSession),progress&&setupProgressCallback(otDoc,progress),documents[docId]?console.warn("[OT] Document previously joined -",docId,"STATE: loading:",otDoc.loading,"loaded:",otDoc.loaded,"inited:",otDoc.inited):(documents[docId]=otDoc,
connect.connected&&otDoc.load(),otDoc)}function setupProgressCallback(otDoc,progress){otDoc.on("joinProgress",function(e){
progress&&progress(e.loaded,e.total,e.complete)})}function leaveDocument(docId){if(docId&&documents[docId]&&connect.connected){
console.log("[OT] Leave",docId)
var doc=documents[docId]
doc.leave(),delete documents[docId]}}function reportLargeDocument(doc,forceReadonly){var docId=doc.id


if(delete documents[doc.id],workspace.isAdmin&&!forceReadonly)return 1===workspace.onlineCount?console.log("File is very large, collaborative editing disabled: "+docId):showError("File is very large, collaborative editing disabled: "+docId,5e3)


showError("File is very large. Collaborative editing disabled: "+docId,5e3)
var tab=tabManager.findTab(docId)
tab&&tab.editor&&(tab.classList.add("error"),doc.readonly||(doc.readonly=!0))}function reportDocChangedOnDisk(path){
emit("change",{path:path,type:"change"})}function reportDocHasPendingChanges(path){var tab=tabManager.findTab(path)


tab&&setTimeout(function(){tab.document.undoManager.bookmark(-2)},50)}function saveDocument(docId,fallbackFn,fallbackArgs,callback){
function onSaved(e){if(doc.off("saved",onSaved),clearTimeout(saveFallbackTimeouts[docId]),e.err){if(("ETIMEOUT"==e.code||"EMISMATCH"==e.code)&&fallbackFn)return console.warn("[OT] collab error:",e.code,"trying to save file",docId,"- trying fallback approach instead"),
fsSaveFallback({code:e.code,err:e.err})
sendSaveError({code:e.code,err:e.err},"Collab saving failed on unexpected error")}else failedSaveAttempts=0


callback(e.err)}function fsSaveFallback(attempt){var message=doc&&doc.loaded?"Warning: using fallback saving on loaded document":"Warning: using fallback saving on unloaded document"


doc&&doc.saveStateDebugging&&(message="Warning: using fallback saving due to save timeout"),console.warn(message,attempt),
fallbackFn.apply(null,fallbackArgs)}function sendSaveError(attempt,message){errorHandler.reportError(new Error(message),{
docId:docId,loading:doc&&doc.loading,loaded:doc&&doc.loaded,inited:doc&&doc.inited,rejoinReason:doc&&doc.rejoinReason,
state:doc&&doc.state,stateWhenSaveCalled:doc&&doc.stateWhenSaveCalled,saveStateDebugging:doc&&doc.saveStateDebugging,
joinError:joinError,connected:connect.connected,attempt:attempt,failedSaveAttempts:failedSaveAttempts
},["collab"])}function doCollabSave(){doc.on("saved",onSaved),doc.save()}var joinError,doc=documents[docId]


if(clearTimeout(saveFallbackTimeouts[docId]),saveFallbackTimeouts[docId]=setTimeout(function(){console.warn("[OT] collab saveFallbackTimeout while trying to save file",docId,"- trying fallback approach instead"),
fsSaveFallback(),doc.off("saved",onSaved),failedSaveAttempts++,emit("saveFallbackStart",{path:docId})

},SAVE_FILESYSTEM_FALLBACK_TIMEOUT*Math.pow(2,-Math.min(failedSaveAttempts,5))),doc.loaded&&connect.connected)doCollabSave()
else{if(connect.connected&&!doc.loaded&&!doc.loading)return clearTimeout(saveFallbackTimeouts[docId]),
void fsSaveFallback("document not joined and not trying to join")
doc.once("joined",function(e){joinError=e&&e.err,e&&!e.err&&doCollabSave()})}}function leaveAll(){Object.keys(documents).forEach(function(docId){
leaveDocument(docId)})}function refreshActiveDocuments(){for(var docId in documents){var doc=documents[docId],tab=doc.original.tab


tab.pane.activeTab===tab&&doc.inited&&doc.authorLayer.refresh()}}function beforeReadFile(e){function startWatchDog(){
clearTimeout(openFallbackTimeouts[path]),openFallbackTimeouts[path]=setTimeout(function(){console.warn("[OT] JOIN_DOC timed out:",path,"- fallback to filesystem, but don't abort"),
fsOpenFallback(),otDoc.off("joined",onJoined)},OPEN_FILESYSTEM_FALLBACK_TIMEOUT)}function onJoined(e){
return otDoc.off("joined",onJoined),clearTimeout(openFallbackTimeouts[path]),openFallbackTimeouts[path]=null,
e.err?("ENOENT"!=e.err.code&&"ELARGE"!=e.err.code&&console.warn("[OT] JOIN_DOC failed:",path,"- fallback to filesystem"),
fsOpenFallback()):(console.log("[OT] Joined",otDoc.id),void(callback&&callback(e.err,e.contents,e.metadata)))

}function fsOpenFallback(){var xhr=fs.readFileWithMetadata(path,"utf8",callback||function(){},progress)||{}


fallbackXhrAbort=(xhr&&xhr.abort||function(){}).bind(xhr)}var path=e.path,progress=e.progress,callback=e.callback


if(path&&"ace"==e.tab.editorType){var otDoc=documents[path]
if(otDoc?setupProgressCallback(otDoc,progress):otDoc=documents[path]=joinDocument(path,e.tab.document,progress),
otDoc.on("joined",onJoined),otDoc.on("largeDocument",reportLargeDocument.bind(null,otDoc)),otDoc.on("joinProgress",startWatchDog),
otDoc.on("beforeSave",function(e){emit("beforeSave",e)}),!connect.connected)return void(callback=null)


startWatchDog()
var fallbackXhrAbort
return{abort:function(){fallbackXhrAbort?fallbackXhrAbort():console.log("TODO: [OT] abort joining a document")

}}}}function afterReadFile(e){var path=e.path,tab=tabManager.findTab(path),doc=documents[path]
if(tab&&doc&&!doc.loaded){var httpLoadedValue=tab.document.value,normHttpValue=collabUtil.normalizeTextLT(httpLoadedValue)


httpLoadedValue!==normHttpValue&&(tab.document.value=normHttpValue)}}function beforeWriteFile(e){var path=e.path,tab=tabManager.findTab(path),doc=documents[path]


if(doc&&tab){if(timeslider.visible)return!1
var args=e.args.slice(),callback=(args.pop(),args.pop()),defaultWriteFile=e.fn
return saveDocument(path,defaultWriteFile,e.args,callback),!1}}function onSetPath(tab,oldpath,path){console.log("[OT] detected rename/save as from",oldpath,"to",path),
leaveDocument(oldpath),joinDocument(path,tab.document),documents[path].once("joined",function(e){e.err&&(leaveDocument(oldpath),
setTimeout(joinDocument(path,tab.document),SAVE_FILESYSTEM_FALLBACK_TIMEOUT_REPEATED))})}function bubbleNotification(msg,user){
if(!user)return bubble.popup(msg)
var md5Email=user.md5Email
console.log("Collab:",user.fullname,msg),bubble.popup([["img",{width:26,height:26,"class":"gravatar-image",
src:"https://secure.gravatar.com/avatar/"+md5Email+"?s=26&d=retro"}],["span",null,user.fullname,["span",{
"class":"notification_sub"},msg]]])}function getTabState(tabId){var tab
if(tabId?tabManager.getTabs().some(function(t){if(getTabId(t)==tabId)return tab=t}):tab=tabManager.focussedTab,
tab){var state=tab.getState(),doc=state.document
return doc&&(doc.value=doc.undoManager=doc.meta=void 0,doc.ace&&(doc.ace={selection:doc.ace.selection
})),state.className=void 0,state}}function getTabId(tab){if(tab&&tab.document){var meta=tab.document.meta


if(!meta.preview&&!meta.newfile){if("terminal"==tab.editorType)return"terminal:"+(tab.document.getState().terminal||{}).id


if("output"==tab.editorType){var state=tab.document.getState().output,config=state.config||{}
return"run-config:"+(config.name||state.id)}return"preview"==tab.editorType?tab.name:tab.path?tab.path:void 0

}}}function revealUser(clientId,tabId){clientId==workspace.myClientId?handleUserMessage({action:"open",
target:clientId,tabState:lastJump}):connect.send("MESSAGE",{source:workspace.myClientId,target:clientId,
action:"getTab",tabId:tabId})}function listOpenFiles(clientId){connect.send("MESSAGE",{source:workspace.myClientId,
target:clientId,action:"listOpenFiles"})}function handleUserMessage(data){if("getTab"==data.action)data.target==workspace.myClientId&&connect.send("MESSAGE",{
source:workspace.myClientId,target:data.source,action:"open",tabState:getTabState(data.tabId)})
else if("open"==data.action){if(data.target==workspace.myClientId&&data.tabState){var tabState=getTabState()||{}


shouldUpdateLastJump(lastJump,tabState,data.tabState)&&(lastJump=tabState),data.tabState.focus=!0,data.tabState.document&&delete data.tabState.document.filter,
tabManager.open(data.tabState)}}else if("listOpenFiles"==data.action)if(data.fileList)workspace.updateOpenDocs({
clientId:data.source,userId:data.userId,fileList:data.fileList},"set")
else if(data.target==workspace.myClientId){var openFiles=tabManager.getTabs().map(function(tab){return getTabId(tab)

}).filter(Boolean),active=openFiles.indexOf(getTabId(tabManager.focussedTab))
connect.send("MESSAGE",{userId:workspace.myUserId,source:workspace.myClientId,target:data.source,action:"listOpenFiles",
fileList:{active:active,documents:openFiles}})}}function shouldUpdateLastJump(prevState,state,newState){
function getSelection(s){return s&&s.document&&s.document.ace&&s.document.ace.selection}if(!prevState)return!0


if(!newState.name)return!1
var sel=(JSON.stringify(getSelection(prevState)),JSON.stringify(getSelection(state))),newSel=JSON.stringify(getSelection(newState))


return(prevState.name!=state.name||newSel!=sel)&&(state.name!=newState.name||newSel!=sel)}function scheduleUpdateUserBadges(){
scheduleUpdateUserBadges.timer||(scheduleUpdateUserBadges.timer=setTimeout(function(){scheduleUpdateUserBadges.timer=null,
updateUserBadges()},10))}function updateUserBadges(){function addButton(uid,name,md5Email){menus.remove("user_"+uid)


var parent=layout.getElement("barExtras"),mnuUser=new ui.menu
plugin.addElement(mnuUser)
var icon=util.getGravatarUrl(md5Email,32,"")
menus.addItemByPath("user_"+uid+"/",mnuUser,11e4,plugin)
var c=500
menus.addItemByPath("user_"+uid+"/Open Active File",new ui.item({onclick:function(){var user=workspace.users[uid]


revealUser(user.clients[0])}}),c+=100,plugin)
var button=menus.get("user_"+uid).item
button.setAttribute("class","btnName"),button.setAttribute("icon",icon),button.setAttribute("iconsize","16px 16px"),
button.setAttribute("tooltip",name),options.showFullNameInMenuBar&&button.setAttribute("caption",name),
button.$ext&&(button.$ext.style.color=collabUtil.formatColor(workspace.colorPool[uid])),ui.insertByIndex(parent,button,550,plugin)

}var users=workspace.users,myId=workspace.myUserId
Object.keys(users).forEach(function(id){if(id!=myId){var user=users[id]
return user.online?void(menus.getMenuId("user_"+id)||addButton(id,user.fullname,user.md5Email)):menus.remove("user_"+id)

}})}var Panel=imports.Panel,tabManager=imports.tabManager,fs=imports.fs,metadata=(imports.c9,imports.metadata),installer=imports.installer,ui=imports.ui,ace=(imports.apf,
imports.ace),util=imports.util,collabUtil=imports["collab.util"],settings=imports.settings,prefs=imports.preferences,connect=imports["collab.connect"],workspace=imports["collab.workspace"],bubble=imports["notification.bubble"],timeslider=imports.timeslider,OTDocument=imports.OTDocument,showAlert=imports["dialog.alert"].show,showError=imports["dialog.error"].show,errorHandler=imports.error_handler,layout=imports.layout,menus=imports.menus,css=require("text!./collab.css"),staticPrefix=options.staticPrefix,plugin=new Panel("Ajax.org",main.consumes,{
index:45,width:250,caption:"Collaborate",buttonCSSClass:"collab",panelCSSClass:"collab-bar",minWidth:130,
where:"right"}),emit=plugin.getEmitter(),documents=Object.create(null),openFallbackTimeouts=Object.create(null),saveFallbackTimeouts=Object.create(null),usersLeaving=Object.create(null),failedSaveAttempts=0,OPEN_FILESYSTEM_FALLBACK_TIMEOUT=6e3,SAVE_FILESYSTEM_FALLBACK_TIMEOUT=3e4,SAVE_FILESYSTEM_FALLBACK_TIMEOUT_REPEATED=15e3


installer.createSession("c9.ide.collab",require("./install"))
var lastJump,loaded=!1,drawn=!1
plugin.on("newListener",function(event,listener){"connect"==event&&connect.connected&&listener()}),plugin.on("load",function(){
load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("unload",function(){loaded=!1,drawn=!0}),plugin.freezePublicAPI({
_events:["drawPanels","connect","chatMessage","beforeSave","message"],get documents(){return util.cloneObject(documents)

},get connected(){return connect.connected},get debug(){return connect.debug},getDocument:function(path){
return documents[path]},send:function(type,message){connect.send(type,message)},revealUser:revealUser,
listOpenFiles:listOpenFiles,leaveDocument:leaveDocument,joinDocument:joinDocument}),register(null,{collab:plugin
})}return main.consumes=["Panel","tabManager","fs","metadata","ui","apf","settings","preferences","ace","util","collab.connect","collab.workspace","timeslider","OTDocument","notification.bubble","dialog.error","dialog.alert","collab.util","error_handler","layout","menus","installer","c9"],
main.provides=["collab"],main})


define("plugins/c9.ide.collab/connect",[],function(require,exports,module){function main(options,imports,register){
function load(){installer.isInstalled("c9.ide.collab",function(){load()})&&(loaded||(loaded=!0,c9.connected&&connect(),
window.addEventListener("focus",updateIdleWithFocus),window.addEventListener("blur",updateIdleWithBlur),
c9.on("connect",connect),c9.on("disconnect",onDisconnect)))}function updateIdleWithFocus(){focussed=!0,
clearTimeout(idleTimeout),connected&&reportedIdle&&(send("USER_STATE",{state:"online"}),reportedIdle=!1)

}function updateIdleWithBlur(){focussed=!1,reportedIdle||(clearTimeout(idleTimeout),idleTimeout=setTimeout(function(){
connected&&(reportedIdle=!0,send("USER_STATE",{state:"idle"}))},IDLE_PERIOD))}function updateIdleStatus(){
document.hasFocus()?updateIdleWithFocus():updateIdleWithBlur()}function extendCollab(callback){if(collab)return callback()


var t=debug&&Date.now()
return extended?plugin.once("available",callback):(extended=!0,void ext.loadRemotePlugin("collab",{file:"c9.ide.collab/server/collab-server.js"
},function(err,api){return api?(debug&&console.log("loaded collab server in ",Date.now()-t,"ms"),collab=api,
emit.sticky("available"),void callback()):(extended=!1,callback(err))}))}function onDisconnect(){connected||connecting?emit("disconnect"):console.log("Collab already disconnected"),
connecting=connected=extended=!1,emit.unsticky("available"),collab=null,stream&&(stream.$close(),stream=null),
clearTimeout(connectTimeout)}function connect(){if(!fatalError)return connected?void console.log("Collab already connected, ignoring reconnection attempt"):void(connecting||(connecting=!0,
console.log("Collab connecting"),emit("connecting"),connectTimeout=setTimeout(function(){stream&&(stream.$close(),
stream=null),connecting=!1,connected||(console.warn("[OT] Collab connect timed out ! - retrying ..."),
connect())},CONNECT_TIMEOUT),extendCollab(function(err){return err?console.error("COLLAB CONNECT ERR",err):collabInstalled?doConnect():void 0

})))}function doConnect(){clientId=vfs.id,collab.connect({basePath:options.basePath,clientId:clientId
},function(err,meta){function onData(data){data=JSON.parse(data),debug&&console.log("[OT] RECEIVED FROM SERVER",data),
emit("message",data)}function onConnect(data){return isClosed||!collab?onClose():(data=JSON.parse(data),
debug&&console.log("[OT] RECEIVED FROM SERVER",data),"CONNECT"!==data.type?console.log("[OT] Waiting for connect event, skipping message",data):(connected=!0,
connecting=!1,isMaster=meta.isMaster,connectMsg=data,console.log("COLLAB connected -",meta.isMaster?"MASTER":"SLAVE"),
emit("connect",data),stream.on("data",onData),clearTimeout(connectTimeout),void updateIdleStatus()))}
function onClose(){isClosed||(stream&&(stream.off("data",onData),stream.destroy()),isClosed=!0,onDisconnect(),
setTimeout(function(){c9.connected&&connect()},1e3))}if(err)return fatalError="EFATAL"===err.code,console.error("COLLAB connect failed",err),
void(fatalError&&promptInstaller(err))
stream=meta.stream
var isClosed=!1
stream.once("data",onConnect),stream.once("end",function(){console.log("COLLAB STREAM END"),onClose()

}),stream.once("close",function(){console.log("COLLAB STREAM CLOSE"),onClose()}),stream.$close=onClose

})}function send(msg){return"object"!=typeof arguments[0]&&(msg={type:arguments[0],data:arguments[1]}),
connected?(debug&&console.log("[OT] SENDING TO SERVER",msg),void collab.send(clientId,msg)):console.log("Collab not connected - SKIPPING ",msg)

}function promptInstaller(err){question.show("Missing collab dependencies",err.message,"Cloud9 detected you are missing one or more collab dependencies. Would you like to open the installer to update to the latest version?",function(){
installer.reinstall("c9.ide.collab")},function(){},{yes:"Update",no:"Not now"})}var clientId,collab,connectMsg,connectTimeout,stream,idleTimeout,Plugin=imports.Plugin,c9=imports.c9,ext=imports.ext,vfs=imports.vfs,installer=imports.installer,question=imports["dialog.question"],plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),debug=options.debug,collabInstalled=!options.isSSH,connecting=!1,connected=!1,isMaster=null,fatalError=!1,CONNECT_TIMEOUT=3e4,IDLE_PERIOD=3e5,focussed=!0,reportedIdle=!1,loaded=!1,extended=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.on("newListener",function(event,listener){"connect"==event&&connected&&connectMsg?listener(null,connectMsg):"connecting"==event&&connecting&&listener()

}),plugin.freezePublicAPI({_events:["available","connect","connecting","disconnect","message"],get debug(){
return debug},get connected(){return connected},get connecting(){return connecting},get isMaster(){return isMaster

},send:send}),register(null,{"collab.connect":plugin})}return main.consumes=["c9","Plugin","ext","vfs","dialog.question","installer"],
main.provides=["collab.connect"],main})


define("plugins/c9.ide.language.jsonalyzer/mock_collab",[],function(require,exports,module){"use strict"


function main(options,imports,register){var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes)


plugin.freezePublicAPI({get isMaster(){return!0},get isAdmin(){return!0}}),register(null,{collab:plugin,
"collab.connect":plugin,"collab.workspace":plugin})}return main.consumes=["Plugin"],main.provides=["collab","collab.connect","collab.workspace"],
main})


define("plugins/c9.ide.services/linked-services-mock",[],function(require,exports,module){"use strict"


function main(options,imports,register){function getServices(callback){setTimeout(function(){callback(null,options.services||{
github:{visible:!0,hasRepositories:!0,service:"github",title:"GitHub",accounts:[],maxAccounts:1,maxProjects:100
}})},0)}function getAccessToken(serviceId,callback){callback(new Error("Not Implemented"))}var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes)


plugin.freezePublicAPI({getServices:getServices,getAccessToken:getAccessToken}),register(null,{"linked-services":plugin
})}return main.consumes=["Plugin"],main.provides=["linked-services"],main})


define("plugins/c9.ide.analytics/mock_analytics",[],function(require,exports,module){"use strict"
function main(options,imports,register){var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes)


plugin.freezePublicAPI({log:function(){},updateTraits:function(){},alias:function(){},identify:function(){},
track:function(){},page:function(){}}),register(null,{"c9.analytics":plugin})}return main.consumes=["Plugin"],
main.provides=["c9.analytics"],main})


define("plugins/c9.ide.errorhandler/simple_error_handler",[],function(require,exports,module){"use strict"


function main(options,imports,register){function load(){if(loaded)return!1
if(loaded=!0,"file:"!==location.protocol&&location.href.indexOf("dev")===-1&&location.href.indexOf("c9.io")>-1){
var oldOnError=window.onerror
window.onerror=function(m,u,l){var errorInfo={agent:navigator.userAgent,type:"General Javascript Error",
e:[m,u,l],workspaceId:plugin.workspaceId}
emit("error",errorInfo),submitError(errorInfo),oldOnError&&oldOnError.apply(this,arguments)}}}function submitError(errorInfo){}
function reportError(exception,customData){customData?console.error(exception,customData):console.error(exception.stack||exception),
submitError(exception)}var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loaded=!1


plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({
reportError:reportError,log:reportError}),register(null,{error_handler:plugin})}return main.consumes=["Plugin"],
main.provides=["error_handler"],main})


define("plugins/c9.ide.errorhandler/raygun",[],function(require,exports,module){!function(window,undefined){
function _has(object,key){return Object.prototype.hasOwnProperty.call(object,key)}function _isUndefined(what){
return"undefined"==typeof what}var TraceKit={},_oldTraceKit=window.TraceKit,_slice=[].slice,UNKNOWN_FUNCTION="?"


TraceKit.noConflict=function(){return window.TraceKit=_oldTraceKit,TraceKit},TraceKit.wrap=function(func){
function wrapped(){try{return func.apply(this,arguments)}catch(e){throw TraceKit.report(e),e}}return wrapped

},TraceKit.report=function(){function subscribe(handler){handlers.push(handler)}function unsubscribe(handler){
for(var i=handlers.length-1;i>=0;--i)handlers[i]===handler&&handlers.splice(i,1)}function notifyHandlers(stack,windowError){
var exception=null
if(!windowError||TraceKit.collectWindowErrors){for(var i in handlers)if(_has(handlers,i))try{handlers[i].apply(null,[stack].concat(_slice.call(arguments,2)))

}catch(inner){exception=inner}if(exception)throw exception}}function report(ex){var args=_slice.call(arguments,0)


if(lastExceptionStack){if(lastException===ex)return
var s=lastExceptionStack
lastExceptionStack=null,lastException=null,notifyHandlers.apply(null,[s,null].concat(args))}var stack=TraceKit.computeStackTrace(ex)


throw lastExceptionStack=stack,lastException=ex,window.setTimeout(function(){lastException===ex&&(lastExceptionStack=null,
lastException=null,notifyHandlers.apply(null,[stack,null].concat(args)))},stack.incomplete?2e3:0),ex}
var handlers=[],lastException=null,lastExceptionStack=null,_oldOnerrorHandler=window.onerror
return window.onerror=function(message,url,lineNo,columnNo,errorObj){var stack=null
if(errorObj)stack=TraceKit.computeStackTrace(errorObj)
else if(lastExceptionStack)errorObj=lastException,TraceKit.computeStackTrace.augmentStackTraceWithInitialElement(lastExceptionStack,url,lineNo,message),
stack=lastExceptionStack,lastExceptionStack=null,lastException=null
else{var location={url:url,line:lineNo,column:columnNo}
location.func=TraceKit.computeStackTrace.guessFunctionName(location.url,location.line),location.context=TraceKit.computeStackTrace.gatherContext(location.url,location.line),
stack={mode:"onerror",message:message,url:document.location.href,stack:[location],useragent:navigator.userAgent
}}return notifyHandlers(stack,"from window.onerror",{errorObj:errorObj}),!!_oldOnerrorHandler&&_oldOnerrorHandler.apply(this,arguments)

},report.subscribe=subscribe,report.unsubscribe=unsubscribe,report}(),TraceKit.computeStackTrace=function(){
function loadSource(url){function getXHR(){try{return new window.XMLHttpRequest}catch(e){return new window.ActiveXObject("Microsoft.XMLHTTP")

}}if(!TraceKit.remoteFetching)return""
try{var request=getXHR()
return request.open("GET",url,!1),request.send(""),request.responseText}catch(e){return""}}function getSource(url){
if(!_has(sourceCache,url)){var source=""
url=url||"",url.indexOf(document.domain)!==-1&&(source=loadSource(url)),sourceCache[url]=source?source.split("\n"):[]

}return sourceCache[url]}function guessFunctionName(url,lineNo){var m,reFunctionArgNames=/function ([^(]*)\(([^)]*)\)/,reGuessFunction=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,line="",maxLines=10,source=getSource(url)


if(!source.length)return UNKNOWN_FUNCTION
for(var i=0;i<maxLines;++i)if(line=source[lineNo-i]+line,!_isUndefined(line)){if(m=reGuessFunction.exec(line))return m[1]


if(m=reFunctionArgNames.exec(line))return m[1]}return UNKNOWN_FUNCTION}function gatherContext(url,line){
var source=getSource(url)
if(!source.length)return null
var context=[],linesBefore=Math.floor(TraceKit.linesOfContext/2),linesAfter=linesBefore+TraceKit.linesOfContext%2,start=Math.max(0,line-linesBefore-1),end=Math.min(source.length,line+linesAfter-1)


line-=1
for(var i=start;i<end;++i)_isUndefined(source[i])||context.push(source[i])
return context.length>0?context:null}function escapeRegExp(text){return text.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")

}function escapeCodeAsRegExpForMatchingInsideHTML(body){return escapeRegExp(body).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")

}function findSourceInUrls(re,urls){for(var source,m,i=0,j=urls.length;i<j;++i)if((source=getSource(urls[i])).length&&(source=source.join("\n"),
m=re.exec(source)))return{url:urls[i],line:source.substring(0,m.index).split("\n").length,column:m.index-source.lastIndexOf("\n",m.index)-1
}
return null}function findSourceInLine(fragment,url,line){var m,source=getSource(url),re=new RegExp("\\b"+escapeRegExp(fragment)+"\\b")


return line-=1,source&&source.length>line&&(m=re.exec(source[line]))?m.index:null}function findSourceByFunctionBody(func){
for(var body,re,parts,result,urls=[window.location.href],scripts=document.getElementsByTagName("script"),code=""+func,codeRE=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,eventRE=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,i=0;i<scripts.length;++i){
var script=scripts[i]
script.src&&urls.push(script.src)}if(parts=codeRE.exec(code)){var name=parts[1]?"\\s+"+parts[1]:"",args=parts[2].split(",").join("\\s*,\\s*")


body=escapeRegExp(parts[3]).replace(/;$/,";?"),re=new RegExp("function"+name+"\\s*\\(\\s*"+args+"\\s*\\)\\s*{\\s*"+body+"\\s*}")

}else re=new RegExp(escapeRegExp(code).replace(/\s+/g,"\\s+"))
if(result=findSourceInUrls(re,urls))return result
if(parts=eventRE.exec(code)){var event=parts[1]
if(body=escapeCodeAsRegExpForMatchingInsideHTML(parts[2]),re=new RegExp("on"+event+"=[\\'\"]\\s*"+body+"\\s*[\\'\"]","i"),
result=findSourceInUrls(re,urls[0]))return result
if(re=new RegExp(body),result=findSourceInUrls(re,urls))return result}return null}function computeStackTraceFromStackProp(ex){
if(!ex.stack)return null
for(var parts,element,chrome=/^\s*at (?:((?:\[object object\])?\S+) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,gecko=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,winjs=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,lines=ex.stack.split("\n"),stack=[],reference=/^(.*) is undefined$/.exec(ex.message),i=0,j=lines.length;i<j;++i){
if(parts=gecko.exec(lines[i]))element={url:parts[3],func:parts[1]||UNKNOWN_FUNCTION,args:parts[2]?parts[2].split(","):"",
line:+parts[4],column:parts[5]?+parts[5]:null}
else if(parts=chrome.exec(lines[i]))element={url:parts[2],func:parts[1]||UNKNOWN_FUNCTION,line:+parts[3],
column:parts[4]?+parts[4]:null}
else{if(!(parts=winjs.exec(lines[i])))continue
element={url:parts[2],func:parts[1]||UNKNOWN_FUNCTION,line:+parts[3],column:parts[4]?+parts[4]:null}}
!element.func&&element.line&&(element.func=guessFunctionName(element.url,element.line)),element.line&&(element.context=gatherContext(element.url,element.line)),
stack.push(element)}return stack[0]&&stack[0].line&&!stack[0].column&&reference&&(stack[0].column=findSourceInLine(reference[1],stack[0].url,stack[0].line)),
stack.length?{mode:"stack",name:ex.name,message:ex.message,url:document.location.href,stack:stack,useragent:navigator.userAgent
}:null}function computeStackTraceFromStacktraceProp(ex){for(var parts,stacktrace=ex.stacktrace,testRE=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,lines=stacktrace.split("\n"),stack=[],i=0,j=lines.length;i<j;i+=2)if(parts=testRE.exec(lines[i])){
var element={line:+parts[1],column:+parts[2],func:parts[3]||parts[4],args:parts[5]?parts[5].split(","):[],
url:parts[6]}
if(!element.func&&element.line&&(element.func=guessFunctionName(element.url,element.line)),element.line)try{
element.context=gatherContext(element.url,element.line)}catch(exc){}element.context||(element.context=[lines[i+1]]),
stack.push(element)}return stack.length?{mode:"stacktrace",name:ex.name,message:ex.message,url:document.location.href,
stack:stack,useragent:navigator.userAgent}:null}function computeStackTraceFromOperaMultiLineMessage(ex){
var lines=ex.message.split("\n")
if(lines.length<4)return null
var parts,i,len,source,lineRE1=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,lineRE2=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i,lineRE3=/^\s*Line (\d+) of function script\s*$/i,stack=[],scripts=document.getElementsByTagName("script"),inlineScriptBlocks=[]


for(i in scripts)_has(scripts,i)&&!scripts[i].src&&inlineScriptBlocks.push(scripts[i])
for(i=2,len=lines.length;i<len;i+=2){var item=null
if(parts=lineRE1.exec(lines[i]))item={url:parts[2],func:parts[3],line:+parts[1]}
else if(parts=lineRE2.exec(lines[i])){item={url:parts[3],func:parts[4]}
var relativeLine=+parts[1],script=inlineScriptBlocks[parts[2]-1]
if(script&&(source=getSource(item.url))){source=source.join("\n")
var pos=source.indexOf(script.innerText)
pos>=0&&(item.line=relativeLine+source.substring(0,pos).split("\n").length)}}else if(parts=lineRE3.exec(lines[i])){
var url=window.location.href.replace(/#.*$/,""),line=parts[1],re=new RegExp(escapeCodeAsRegExpForMatchingInsideHTML(lines[i+1]))


source=findSourceInUrls(re,[url]),item={url:url,line:source?source.line:line,func:""}}if(item){item.func||(item.func=guessFunctionName(item.url,item.line))


var context=gatherContext(item.url,item.line),midline=context?context[Math.floor(context.length/2)]:null


context&&midline.replace(/^\s*/,"")===lines[i+1].replace(/^\s*/,"")?item.context=context:item.context=[lines[i+1]],
stack.push(item)}}return stack.length?{mode:"multiline",name:ex.name,message:lines[0],url:document.location.href,
stack:stack,useragent:navigator.userAgent}:null}function augmentStackTraceWithInitialElement(stackInfo,url,lineNo,message){
var initial={url:url,line:lineNo}
if(initial.url&&initial.line){stackInfo.incomplete=!1,initial.func||(initial.func=guessFunctionName(initial.url,initial.line)),
initial.context||(initial.context=gatherContext(initial.url,initial.line))
var reference=/ '([^']+)' /.exec(message)
if(reference&&(initial.column=findSourceInLine(reference[1],initial.url,initial.line)),stackInfo.stack.length>0&&stackInfo.stack[0].url===initial.url){
if(stackInfo.stack[0].line===initial.line)return!1
if(!stackInfo.stack[0].line&&stackInfo.stack[0].func===initial.func)return stackInfo.stack[0].line=initial.line,
stackInfo.stack[0].context=initial.context,!1}return stackInfo.stack.unshift(initial),stackInfo.partial=!0,
!0}return stackInfo.incomplete=!0,!1}function computeStackTraceByWalkingCallerChain(ex,depth){for(var parts,item,source,functionName=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,stack=[],funcs={},recursion=!1,curr=computeStackTraceByWalkingCallerChain.caller;curr&&!recursion;curr=curr.caller)if(curr!==computeStackTrace&&curr!==TraceKit.report){
if(item={url:null,func:UNKNOWN_FUNCTION,line:null,column:null},curr.name?item.func=curr.name:(parts=functionName.exec(curr.toString()))&&(item.func=parts[1]),
source=findSourceByFunctionBody(curr)){item.url=source.url,item.line=source.line,item.func===UNKNOWN_FUNCTION&&(item.func=guessFunctionName(item.url,item.line))


var reference=/ '([^']+)' /.exec(ex.message||ex.description)
reference&&(item.column=findSourceInLine(reference[1],source.url,source.line))}funcs[""+curr]?recursion=!0:funcs[""+curr]=!0,
stack.push(item)}depth&&stack.splice(0,depth)
var result={mode:"callers",name:ex.name,message:ex.message,url:document.location.href,stack:stack,useragent:navigator.userAgent
}
return augmentStackTraceWithInitialElement(result,ex.sourceURL||ex.fileName,ex.line||ex.lineNumber,ex.message||ex.description),
result}function computeStackTrace(ex,depth){var stack=null
depth=null==depth?0:+depth
try{if(stack=computeStackTraceFromStacktraceProp(ex))return stack}catch(e){if(debug)throw e}try{if(stack=computeStackTraceFromStackProp(ex))return stack

}catch(e){if(debug)throw e}try{if(stack=computeStackTraceFromOperaMultiLineMessage(ex))return stack}catch(e){
if(debug)throw e}try{if(stack=computeStackTraceByWalkingCallerChain(ex,depth+1))return stack}catch(e){
if(debug)throw e}return{mode:"failed"}}function computeStackTraceOfCaller(depth){depth=(null==depth?0:+depth)+1


try{throw new Error}catch(ex){return computeStackTrace(ex,depth+1)}return null}var debug=!1,sourceCache={}


return computeStackTrace.augmentStackTraceWithInitialElement=augmentStackTraceWithInitialElement,computeStackTrace.guessFunctionName=guessFunctionName,
computeStackTrace.gatherContext=gatherContext,computeStackTrace.ofCaller=computeStackTraceOfCaller,computeStackTrace

}(),function(){var _helper=function(fnName){var originalFn=window[fnName]
window[fnName]=function(){var args=_slice.call(arguments),originalCallback=args[0]
return"function"==typeof originalCallback&&(args[0]=TraceKit.wrap(originalCallback)),originalFn.apply?originalFn.apply(this,args):originalFn(args[0],args[1])

}}
_helper("setTimeout"),_helper("setInterval")}(),TraceKit.remoteFetching||(TraceKit.remoteFetching=!0),
TraceKit.collectWindowErrors||(TraceKit.collectWindowErrors=!0),(!TraceKit.linesOfContext||TraceKit.linesOfContext<1)&&(TraceKit.linesOfContext=11),
window.TraceKit=TraceKit}(window),function($,TraceKit){"use strict"
if($){var _oldEventAdd=$.event.add
$.event.add=function(elem,types,handler,data,selector){var _handler
return handler.handler?(_handler=handler.handler,handler.handler=TraceKit.wrap(handler.handler)):(_handler=handler,
handler=TraceKit.wrap(handler)),_handler.guid?handler.guid=_handler.guid:handler.guid=_handler.guid=$.guid++,
_oldEventAdd.call(this,elem,types,handler,data,selector)}
var _oldReady=$.fn.ready
$.fn.ready=function(fn){return _oldReady.call(this,TraceKit.wrap(fn))}
var _oldAjax=$.ajax
$.ajax=function(url,options){"object"==typeof url&&(options=url,url=void 0),options=options||{}
for(var key,keys=["complete","error","success"];key=keys.pop();)$.isFunction(options[key])&&(options[key]=TraceKit.wrap(options[key]))


try{return url?_oldAjax.call(this,url,options):_oldAjax.call(this,options)}catch(e){throw TraceKit.report(e),
e}}}}(window.jQuery,window.TraceKit),function(window,$,undefined){function truncateURL(url){var truncated=url,path=url.split("//")[1]


if(path){var queryStart=path.indexOf("?"),sanitizedPath=path.toString().substring(0,queryStart),truncated_parts=sanitizedPath.split("/").slice(0,4).join("/"),truncated_length=sanitizedPath.substring(0,48)


truncated=truncated_parts.length<truncated_length.length?truncated_parts:truncated_length,truncated!==sanitizedPath&&(truncated+="..")

}return truncated}function processJQueryAjaxError(event,jqXHR,ajaxSettings,thrownError){var message="AJAX Error: "+(jqXHR.statusText||"unknown")+" "+(ajaxSettings.type||"unknown")+" "+(truncateURL(ajaxSettings.url)||"unknown")


Raygun.send(thrownError||event.type,{status:jqXHR.status,statusText:jqXHR.statusText,type:ajaxSettings.type,
url:ajaxSettings.url,ajaxErrorMessage:message,contentType:ajaxSettings.contentType,data:ajaxSettings.data?ajaxSettings.data.slice(0,10240):undefined
})}function log(message,data){window.console&&window.console.log&&_debugMode&&(window.console.log(message),
data&&window.console.log(data))}function isApiKeyConfigured(){return!(!_raygunApiKey||""===_raygunApiKey)||(log("Raygun API key has not been configured, make sure you call Raygun.init(yourApiKey)"),
!1)}function merge(o1,o2){var a,o3={}
for(a in o1)o3[a]=o1[a]
for(a in o2)o3[a]=o2[a]
return o3}function mergeArray(t0,t1){return null!=t1?t0.concat(t1):t0}function forEach(set,func){for(var i=0;i<set.length;i++)func.call(null,i,set[i])

}function isEmpty(o){for(var p in o)if(o.hasOwnProperty(p))return!1
return!0}function getRandomInt(){return Math.floor(9007199254740992*Math.random())}function getViewPort(){
var e=document.documentElement,g=document.getElementsByTagName("body")[0],x=window.innerWidth||e.clientWidth||g.clientWidth,y=window.innerHeight||e.clientHeight||g.clientHeight


return{width:x,height:y}}function offlineSave(data){var dateTime=(new Date).toJSON()
try{var key="raygunjs="+dateTime+"="+getRandomInt()
"undefined"==typeof localStorage[key]&&(localStorage[key]=data)}catch(e){log("Raygun4JS: LocalStorage full, cannot save exception")

}}function sendSavedErrors(){for(var key in localStorage)"raygunjs="===key.substring(0,9)&&(sendToRaygun(JSON.parse(localStorage[key])),
localStorage.removeItem(key))}function processUnhandledException(stackTrace,options){var stack=[],qs={}


stackTrace.stack&&stackTrace.stack.length&&forEach(stackTrace.stack,function(i,frame){stack.push({LineNumber:frame.line,
ColumnNumber:frame.column,ClassName:"line "+frame.line+", column "+frame.column,FileName:frame.url,MethodName:frame.func||"[anonymous]"
})}),window.location.search&&window.location.search.length>1&&forEach(window.location.search.substring(1).split("&"),function(i,segment){
var parts=segment.split("=")
parts&&2===parts.length&&(qs[decodeURIComponent(parts[0])]=parts[1])}),options||(options={}),isEmpty(options.customData)&&("function"==typeof _customData?options.customData=_customData(options.errorObj):options.customData=_customData),
isEmpty(options.tags)&&(options.tags=_tags)
var screen=window.screen||{width:getViewPort().width,height:getViewPort().height,colorDepth:8},custom_message=options.customData&&options.customData.ajaxErrorMessage,finalCustomData=options.customData


try{JSON.stringify(finalCustomData)}catch(e){var msg="Cannot add custom data; may contain circular reference"


finalCustomData={error:msg},log("Raygun4JS: "+msg)}var message=custom_message||stackTrace.message||options.status||"Error with empty message"


groupedErrors.some(function(g){if(g.regex.test(message)){var parts=message.split(g.regex)
return message="",parts.forEach(function(p,i){g.pullOut[i-1]?(finalCustomData[g.pullOut[i-1]]=p,message+="<"+g.pullOut[i-1]+">"):message+=p

}),!0}})
var blackListEntry=blackListedErrors["#"+message]
if(blackListEntry){var count=(blackListEntry.count||0)+1
if(blackListEntry.count=count,count%(blackListEntry.factor||10)!==1)return
finalCustomData.$blackList=blackListEntry}else blackListedErrors.count<1e4&&(blackListedErrors["#"+message]={})


var payload={OccurredOn:new Date,Details:{Error:{ClassName:stackTrace.name,Message:message,StackTrace:stack
},Environment:{UtcOffset:(new Date).getTimezoneOffset()/-60,"User-Language":navigator.userLanguage,"Document-Mode":document.documentMode,
"Browser-Width":getViewPort().width,"Browser-Height":getViewPort().height,"Screen-Width":screen.width,
"Screen-Height":screen.height,"Color-Depth":screen.colorDepth,Browser:navigator.appCodeName,"Browser-Name":navigator.appName,
"Browser-Version":navigator.appVersion,Platform:navigator.platform},Client:{Name:"raygun-js",Version:"1.8.4"
},UserCustomData:finalCustomData,Tags:options.tags,Request:{Url:document.location.href,QueryString:qs,
Headers:{"User-Agent":navigator.userAgent,Referer:document.referrer,Host:document.domain}},Version:_version||"Not supplied"
}}
_user&&(payload.Details.User=_user),sendToRaygun(payload)}function sendToRaygun(data){if(isApiKeyConfigured()){
log("Sending exception data to Raygun:",data)
var url=_raygunApiUrl+"/entries?apikey="+encodeURIComponent(_raygunApiKey)
makePostCorsRequest(url,JSON.stringify(data))}}function createCORSRequest(method,url){var xhr
return xhr=new window.XMLHttpRequest,"withCredentials"in xhr?xhr.open(method,url,!0):window.XDomainRequest&&(_allowInsecureSubmissions&&(url=url.slice(6)),
xhr=new window.XDomainRequest,xhr.open(method,url)),xhr.timeout=1e4,xhr}function makePostCorsRequest(url,data){
var xhr=createCORSRequest("POST",url,data)
return"withCredentials"in xhr?(xhr.onreadystatechange=function(){4===xhr.readyState&&(202===xhr.status?sendSavedErrors():_enableOfflineSave&&403!==xhr.status&&400!==xhr.status&&offlineSave(data))

},xhr.onload=function(){log("logged error to Raygun")}):window.XDomainRequest&&(xhr.ontimeout=function(){
_enableOfflineSave&&(log("Raygun: saved error locally"),offlineSave(data))},xhr.onload=function(){log("logged error to Raygun"),
sendSavedErrors()}),xhr.onerror=function(){log("failed to log error to Raygun")},xhr?void xhr.send(data):void log("CORS not supported")

}var _raygunApiKey,_user,_version,$document,_traceKit=TraceKit.noConflict(),_raygun=window.Raygun,_debugMode=!1,_allowInsecureSubmissions=!1,_enableOfflineSave=!1,_customData={},_tags=[],_raygunApiUrl="https://api.raygun.io"


$&&($document=$(document))
var Raygun={noConflict:function(){return window.Raygun=_raygun,Raygun},init:function(key,options,customdata){
return _raygunApiKey=key,_traceKit.remoteFetching=!1,_customData=customdata,options&&(_allowInsecureSubmissions=options.allowInsecureSubmissions||!1,
options.debugMode&&(_debugMode=options.debugMode)),sendSavedErrors(),Raygun},withCustomData:function(customdata){
return _customData=customdata,Raygun},withTags:function(tags){_tags=tags},attach:function(){if(isApiKeyConfigured())return _traceKit.report.subscribe(processUnhandledException),
$document&&$document.ajaxError(processJQueryAjaxError),Raygun},detach:function(){return _traceKit.report.unsubscribe(processUnhandledException),
$document&&$document.unbind("ajaxError",processJQueryAjaxError),Raygun},send:function(ex,customData,tags){
try{processUnhandledException(_traceKit.computeStackTrace(ex),{customData:"function"==typeof _customData?merge(_customData(ex),customData):merge(_customData,customData),
tags:mergeArray(_tags,tags)})}catch(traceKitException){if(ex!==traceKitException)throw traceKitException

}return Raygun},setUser:function(user){return _user={Identifier:user},Raygun},setVersion:function(version){
return _version=version,Raygun},saveIfOffline:function(enableOffline){return"undefined"!=typeof enableOffline&&"boolean"==typeof enableOffline&&(_enableOfflineSave=enableOffline),
Raygun}},blackListedErrors={count:0,"#Error with empty message":{},"#Script error.":{},"#DealPly is not defined":{
factor:1e6},"#Cannot read property 'style' of null":{factor:1e4},"#Project with id '<id>' does not exist":{
factor:1e3},"#Workspace not found":{factor:1e3}},groupedErrors=[{regex:/^((?:Project|User) with id ')(\d+)(' does not exist)/i,
pullOut:{1:"id"}},{regex:/^(Failed to execute 'send' on 'XMLHttpRequest': Failed to load)([\s\S]*)/i,
pullOut:{1:"url"}},{regex:/^(Cannot GET \/)([\s\S]*)/i,pullOut:{1:"url"}},{regex:/^(Error whilst parsing: Unexpected end whilst parsing (?:xpath|xml|string))([\s\S]*)/i,
pullOut:{1:"apfStuff"}}]
window.Raygun=Raygun}(window,window.jQuery),exports.Raygun=window.Raygun.noConflict()})


define("plugins/c9.ide.errorhandler/raygun_error_handler",[],function(require,exports,module){"use strict"


function main(options,imports,register){function load(){if(loaded)return!1
if(loaded=!0,apiKey){var user=info.getUser(),workspace=info.getWorkspace()
Raygun.init(apiKey).attach().withCustomData(function(ex){return{user:{id:user.id,name:user.name,email:user.email
},workspace:{id:workspace.id,name:workspace.name,contents:workspace.contents},revision:revision,data:ex&&ex.data
}}),Raygun.setUser(info.getUser().name),Raygun.setVersion(version+".0")}}function log(exception,customData,tags){
metrics.increment("errorhandler.log"),"string"==typeof exception&&(exception=new Error(exception)),exception||(exception=new Error("Unspecified error")),
console.error(exception),customData&&console.log(customData),exception.stack||(exception.stack=(new Error).stack),
Raygun.send(exception,customData,tags)}var Plugin=imports.Plugin,info=imports.info,metrics=imports.metrics,Raygun=require("./raygun").Raygun,apiKey=options.apiKey,version=options.version,revision=options.revision,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({reportError:log,log:log}),register(null,{
error_handler:plugin})}return main.consumes=["Plugin","info","metrics"],main.provides=["error_handler"],
main})


define("text!plugins/c9.ide.scm/diff/conflictmarker.css",[],"")


define("plugins/c9.ide.scm/diff/conflictmarker",[],function(require,exports,module){"use strict"
function ConflictMarker(editor){var session=editor.session
return session.meta||(session.meta={}),session.meta.conflictMarker?session.meta.conflictMarker:(session.widgetManager||(session.widgetManager=new LineWidgets(session),
session.widgetManager.attach(editor)),this.onChange=this.onChange.bind(this),this.onClick=this.onClick.bind(this),
this.onMouseDown=this.onMouseDown.bind(this),this.onChangeEditor=this.onChangeEditor.bind(this),this.onEndOperation=this.onEndOperation.bind(this),
this.editor=editor,this.resolved=[],this.chunks=[],void this.attachToSession(session))}var LineWidgets=require("ace/line_widgets").LineWidgets,dom=require("ace/lib/dom"),Range=(require("ace/lib/event"),
require("ace/range").Range),css=require("text!./conflictmarker.css")
dom.importCssString(css,"x"),function(){this.attachToSession=function(session){this.session!=session&&(this.session&&this.detachFromSession(),
this.session=session,this.chunks=this.parse(),session.on("changeEditor",this.onChangeEditor),session.on("change",this.onChange),
this.addWidgets(session,this.editor.renderer.lineHeight),session.addDynamicMarker(this),session.meta||(session.meta={}),
session.meta.conflictMarker=this)},this.detachFromSession=function(){var session=this.session
session&&(session.removeMarker(this.id),this.removeWidgets(),this.session=null,session.off("changeEditor",this.onChangeEditor),
session.off("change",this.onChange),session.meta.conflictMarker=null)},this.onChangeEditor=function(e){
e.oldEditor&&e.oldEditor==this.editor&&(this.editor=null),e.editor&&e.editor!=this.editor&&(this.editor=e.editor)

},this.refresh=function(){var session=this.session
this.detachFromSession(session),this.attachToSession(session)},this.onEndOperation=function(){this.mustRefresh&&(this.mustRefresh=!1,
this.refresh())},this.onChange=function(delta){var isInsert="insert"==delta.action,start=delta.start,end=delta.end,rowShift=(end.row-start.row)*(isInsert?1:-1)


isInsert&&(end=start)
var chunks=this.chunks
if(rowShift)for(var i=0;i<chunks.length;i++){var chunk=chunks[i]
chunk.v1Range.start.row>start.row&&(chunk.v1Range.start.row+=rowShift),chunk.v1Range.end.row>=start.row&&(chunk.v1Range.end.row+=rowShift),
chunk.v2Range.start.row>start.row&&(chunk.v2Range.start.row+=rowShift),chunk.v2Range.end.row>=start.row&&(chunk.v2Range.end.row+=rowShift)

}rowShift&&!this.mustRefresh&&(this.mustRefresh=setTimeout(this.onEndOperation,20))},this.parse=function(){
for(var last,session=this.session,chunks=[],lines=session.doc.getAllLines(),i=0;i<lines.length;i++){var line=lines[i]


if(/^([<|=>])\1{6}( |$)/.test(line)){var ch=line[0]
if("<"==ch)last={},last.startRow=i,last.branch1=line.substr(8)
else if(!last)continue
if("|"==ch)last.v1End=i
else if("="==ch)last.v1End||(last.v1End=i),last.v2Start||(last.v2Start=i)
else if(">"==ch){last.endRow=i
var v1Range=new Range(last.startRow+1,0,last.v1End-1,Number.MAX_VALUE),v2Range=new Range(last.v2Start+1,0,last.endRow-1,Number.MAX_VALUE),origRange=new Range(last.v1End+1,0,last.v2Start-1,Number.MAX_VALUE)


origRange.start.row>origRange.end.row&&(origRange=null),chunks.push({v1Range:v1Range,v2Range:v2Range,
orig:origRange,v1Text:session.getTextRange(v1Range),v2Text:session.getTextRange(v2Range),origText:origRange&&session.getTextRange(origRange),
branch1:last.branch1,branch2:line.substr(8),changed1:!1,changed2:!1}),last=null}}}return chunks},this.removeWidgets=function(){
for(var chunks=this.chunks,i=0;i<chunks.length;i++){var chunk=chunks[i]
this.removeChunk(chunk,!1)}chunks.length=0},this.removeChunk=function(chunk,update){var wm=this.session.widgetManager


if(wm.removeLineWidget(chunk.header),wm.removeLineWidget(chunk.splitter),wm.removeLineWidget(chunk.footer),
chunk.resolved=!0,this.resolved.push(chunk),update!==!1){var i=this.chunks.indexOf(chunk)
this.chunks.splice(i,1)}},this.createWidget=function(chunk,pos,count){chunk.header={row:chunk.v1Range.start.row-1,
el:document.createElement("div"),rowCount:0,coverLine:1,fixedWidth:!0},chunk.splitter={row:chunk.v2Range.start.row-1,
el:document.createElement("div"),rowCount:0,coverLine:1,fixedWidth:!0},chunk.footer={row:chunk.v2Range.end.row+1,
el:document.createElement("div"),rowCount:0,coverLine:1,fixedWidth:!0},chunk.header.el.chunk=chunk.footer.el.chunk=chunk.splitter.el.chunk=chunk,
chunk.header.el.className="conflict-widget-1",chunk.footer.el.className="conflict-widget-2",chunk.splitter.el.className="conflict-widget-split",
chunk.header.el.innerHTML=chunk.branch1+"<span class='ace_comment'> // our changes</span><span class='conflict-button-bottom'><span class='ace_button' actionId='use-1'>Use Me</span><span class='ace_button' actionId='use-1-2'>Use Both</span></span>",
chunk.footer.el.innerHTML=chunk.branch2+"<span class='ace_comment'> // their changes</span><span class='conflict-button-top'><span class='ace_button' actionId='use-2'>Use Me</span><span class='ace_button' actionId='use-2-1'>Use Both</span></span>",
chunk.splitter.el.innerHTML="&nbsp;<span class='conflict-button-top'><span class='ace_button"+(pos?"":" disabled")+"' actionId='prev'>&lt;</span><span class='ace_button"+(pos<count-1?"":" disabled")+"' actionId='next'>&gt;</span></span>",
chunk.header.el.onclick=chunk.footer.el.onclick=chunk.splitter.el.onclick=this.onClick,chunk.header.el.onmousedown=chunk.footer.el.onmousedown=chunk.splitter.el.onmousedown=this.onMouseDown

},this.addWidgets=function(session,lineHeight){var wm=session.widgetManager
wm.session.lineWidgets&&wm.session.lineWidgets.filter(Boolean).forEach(wm.removeLineWidget,wm)
for(var chunks=this.chunks,i=0;i<chunks.length;i++){var chunk=chunks[i]
this.createWidget(chunk,i,chunks.length),wm.addLineWidget(chunk.header),wm.addLineWidget(chunk.footer),
wm.addLineWidget(chunk.splitter)}},this.onClick=function(e){var el=e.target,chunk=e.currentTarget.chunk,session=this.session,chunks=this.chunks,actionId=el.getAttribute("actionId")


if(actionId&&/^use/.test(actionId)){var text=actionId.split("-").slice(1).map(function(part){return session.getTextRange("1"==part?chunk.v1Range:chunk.v2Range)

}).join("\n")
session.replace(new Range(chunk.v1Range.start.row-1,0,chunk.v2Range.end.row+1,Number.MAX_VALUE),text),
this.removeChunk(chunk)}else if("next"==actionId||"prev"==actionId){var dir="next"==actionId?1:-1,i=chunks.indexOf(chunk)


chunk=chunks[i+dir],chunk&&(this.editor.scrollToLine(chunk.v1Range.start.row,!0),session.selection.moveToPosition(chunk.v1Range.start))

}},this.onMouseDown=function(e){e.preventDefault()
var el=e.target,chunk=e.currentTarget.chunk,session=this.session,actionId=el.getAttribute("actionId")


if(!actionId&&chunk){var pos=chunk.v2Range.start
e.currentTarget.classList.contains("conflict-widget-2")?pos=chunk.v2Range.end:e.currentTarget.classList.contains("conflict-widget-1")&&(pos=chunk.v1Range.start),
session.selection.moveToPosition(pos)}},this.update=function(html,markerLayer,session,config){var start=config.firstRow,end=config.lastRow,chunks=this.chunks


if(chunks)for(var i=0;i<chunks.length;i++){var chunk=chunks[i]
if(chunk.v1Range.start.row>end)break
chunk.v2Range.end.row<start||(markerLayer.drawFullLineMarker(html,chunk.v1Range.toScreenRange(session),"conflict-marker-1 "+(chunk.changed1?"edited":""),config),
markerLayer.drawFullLineMarker(html,chunk.v2Range.toScreenRange(session),"conflict-marker-2 "+(chunk.changed2?"edited":""),config))

}}}.call(ConflictMarker.prototype),module.exports=function(editor){var conflictMarker=new ConflictMarker(editor)


return conflictMarker}})


define("plugins/c9.ide.scm/mergetool",[],function(require,exports,module){function main(options,imports,register){
function load(){tabManager.on("open",onNewValue,plugin),tabManager.on("reload",onNewValue,plugin),tabManager.on("switchEditor",onNewValue,plugin)

}function onNewValue(e){var tab=e.tab,value=tab.document.recentValue
value&&"string"==typeof value&&hasMergeState(value)&&decorateTab(tab)}function hasMergeState(value){return/^<{7} /gm.test(value)&&/^={7}/gm.test(value)&&/^>{7} /gm.test(value)

}function decorateTab(tab){tab.editor.ace&&addConflictMarker(tab.editor.ace)}var Plugin=imports.Plugin,tabManager=imports.tabManager,addConflictMarker=require("./diff/conflictmarker"),plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){load()}),plugin.on("unload",function(){}),plugin.freezePublicAPI({decorateTab:decorateTab
}),register(null,{mergetool:plugin})}return main.consumes=["Plugin","tabManager"],main.provides=["mergetool"],
main})


define("ace/lib/app_config",[],function(require,exports,module){"no use strict"
function warn(message){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)

}function reportError(msg,data){var e=new Error(msg)
e.data=data,"object"==typeof console&&console.error&&console.error(e),setTimeout(function(){throw e})

}var oop=require("./oop"),EventEmitter=require("./event_emitter").EventEmitter,optionsProvider={setOptions:function(optList){
Object.keys(optList).forEach(function(key){this.setOption(key,optList[key])},this)},getOptions:function(optionNames){
var result={}
return optionNames?Array.isArray(optionNames)||(result=optionNames,optionNames=Object.keys(result)):optionNames=Object.keys(this.$options),
optionNames.forEach(function(key){result[key]=this.getOption(key)},this),result},setOption:function(name,value){
if(this["$"+name]!==value){var opt=this.$options[name]
if(!opt)return warn('misspelled option "'+name+'"')
if(opt.forwardTo)return this[opt.forwardTo]&&this[opt.forwardTo].setOption(name,value)
opt.handlesSet||(this["$"+name]=value),opt&&opt.set&&opt.set.call(this,value)}},getOption:function(name){
var opt=this.$options[name]
return opt?opt.forwardTo?this[opt.forwardTo]&&this[opt.forwardTo].getOption(name):opt&&opt.get?opt.get.call(this):this["$"+name]:warn('misspelled option "'+name+'"')

}},AppConfig=function(){this.$defaultOptions={}};(function(){oop.implement(this,EventEmitter),this.defineOptions=function(obj,path,options){
return obj.$options||(this.$defaultOptions[path]=obj.$options={}),Object.keys(options).forEach(function(key){
var opt=options[key]
"string"==typeof opt&&(opt={forwardTo:opt}),opt.name||(opt.name=key),obj.$options[opt.name]=opt,"initialValue"in opt&&(obj["$"+opt.name]=opt.initialValue)

}),oop.implement(obj,optionsProvider),this},this.resetOptions=function(obj){Object.keys(obj.$options).forEach(function(key){
var opt=obj.$options[key]
"value"in opt&&obj.setOption(key,opt.value)})},this.setDefaultValue=function(path,name,value){var opts=this.$defaultOptions[path]||(this.$defaultOptions[path]={})


opts[name]&&(opts.forwardTo?this.setDefaultValue(opts.forwardTo,name,value):opts[name].value=value)},
this.setDefaultValues=function(path,optionHash){Object.keys(optionHash).forEach(function(key){this.setDefaultValue(path,key,optionHash[key])

},this)},this.warn=warn,this.reportError=reportError}).call(AppConfig.prototype),exports.AppConfig=AppConfig

})


define("ace/config",[],function(require,exports,module){"no use strict"
function init(packaged){if(global&&global.document){options.packaged=packaged||require.packaged||module.packaged||global.define&&define.packaged


for(var scriptOptions={},scriptUrl="",currentScript=document.currentScript||document._currentScript,currentDocument=currentScript&&currentScript.ownerDocument||document,scripts=currentDocument.getElementsByTagName("script"),i=0;i<scripts.length;i++){
var script=scripts[i],src=script.src||script.getAttribute("src")
if(src){for(var attributes=script.attributes,j=0,l=attributes.length;j<l;j++){var attr=attributes[j]
0===attr.name.indexOf("data-ace-")&&(scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/,""))]=attr.value)

}var m=src.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/)
m&&(scriptUrl=m[1])}}scriptUrl&&(scriptOptions.base=scriptOptions.base||scriptUrl,scriptOptions.packaged=!0),
scriptOptions.basePath=scriptOptions.base,scriptOptions.workerPath=scriptOptions.workerPath||scriptOptions.base,
scriptOptions.modePath=scriptOptions.modePath||scriptOptions.base,scriptOptions.themePath=scriptOptions.themePath||scriptOptions.base,
delete scriptOptions.base
for(var key in scriptOptions)"undefined"!=typeof scriptOptions[key]&&exports.set(key,scriptOptions[key])

}}function deHyphenate(str){return str.replace(/-(.)/g,function(m,m1){return m1.toUpperCase()})}var lang=require("./lib/lang"),net=(require("./lib/oop"),
require("./lib/net")),AppConfig=require("./lib/app_config").AppConfig
module.exports=exports=new AppConfig
var global=function(){return this||"undefined"!=typeof window&&window}(),options={packaged:!1,workerPath:null,
modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}}
exports.get=function(key){if(!options.hasOwnProperty(key))throw new Error("Unknown config key: "+key)


return options[key]},exports.set=function(key,value){if(!options.hasOwnProperty(key))throw new Error("Unknown config key: "+key)


options[key]=value},exports.all=function(){return lang.copyObject(options)},exports.moduleUrl=function(name,component){
if(options.$moduleUrls[name])return options.$moduleUrls[name]
var parts=name.split("/")
component=component||parts[parts.length-2]||""
var sep="snippets"==component?"/":"-",base=parts[parts.length-1]
if("worker"==component&&"-"==sep){var re=new RegExp("^"+component+"[\\-_]|[\\-_]"+component+"$","g")
base=base.replace(re,"")}(!base||base==component)&&parts.length>1&&(base=parts[parts.length-2])
var path=options[component+"Path"]
return null==path?path=options.basePath:"/"==sep&&(component=sep=""),path&&"/"!=path.slice(-1)&&(path+="/"),
path+component+sep+base+this.get("suffix")},exports.setModuleUrl=function(name,subst){return options.$moduleUrls[name]=subst

},exports.$loading={},exports.loadModule=function(moduleName,onLoad){var module,moduleType
Array.isArray(moduleName)&&(moduleType=moduleName[0],moduleName=moduleName[1])
try{module=require(moduleName)}catch(e){}if(module&&!exports.$loading[moduleName])return onLoad&&onLoad(module)


if(exports.$loading[moduleName]||(exports.$loading[moduleName]=[]),exports.$loading[moduleName].push(onLoad),
!(exports.$loading[moduleName].length>1)){var afterLoad=function(){require([moduleName],function(module){
exports._emit("load.module",{name:moduleName,module:module})
var listeners=exports.$loading[moduleName]
exports.$loading[moduleName]=null,listeners.forEach(function(onLoad){onLoad&&onLoad(module)})})}
return exports.get("packaged")?void net.loadScript(exports.moduleUrl(moduleName,moduleType),afterLoad):afterLoad()

}},exports.init=init})


define("ace/requirejs/text!plugins/c9.ide.scm/diff/styles.css",[],"")


define("plugins/c9.ide.scm/diff/diff_match_patch",[],function(require,exports,module){function diff_match_patch(){
this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,
this.Patch_Margin=4,this.Match_MaxBits=32}var DIFF_DELETE=-1,DIFF_INSERT=1,DIFF_EQUAL=0
diff_match_patch.Diff,diff_match_patch.prototype.diff_main=function(text1,text2,opt_checklines,opt_deadline){
"undefined"==typeof opt_deadline&&(opt_deadline=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout)


var deadline=opt_deadline
if(null==text1||null==text2)throw new Error("Null input. (diff_main)")
if(text1==text2)return text1?[[DIFF_EQUAL,text1]]:[]
"undefined"==typeof opt_checklines&&(opt_checklines=!0)
var checklines=opt_checklines,commonlength=this.diff_commonPrefix(text1,text2),commonprefix=text1.substring(0,commonlength)


text1=text1.substring(commonlength),text2=text2.substring(commonlength),commonlength=this.diff_commonSuffix(text1,text2)


var commonsuffix=text1.substring(text1.length-commonlength)
text1=text1.substring(0,text1.length-commonlength),text2=text2.substring(0,text2.length-commonlength)


var diffs=this.diff_compute_(text1,text2,checklines,deadline)
return commonprefix&&diffs.unshift([DIFF_EQUAL,commonprefix]),commonsuffix&&diffs.push([DIFF_EQUAL,commonsuffix]),
this.diff_cleanupMerge(diffs),diffs},diff_match_patch.prototype.diff_compute_=function(text1,text2,checklines,deadline){
var diffs
if(!text1)return[[DIFF_INSERT,text2]]
if(!text2)return[[DIFF_DELETE,text1]]
var longtext=text1.length>text2.length?text1:text2,shorttext=text1.length>text2.length?text2:text1,i=longtext.indexOf(shorttext)


if(i!=-1)return diffs=[[DIFF_INSERT,longtext.substring(0,i)],[DIFF_EQUAL,shorttext],[DIFF_INSERT,longtext.substring(i+shorttext.length)]],
text1.length>text2.length&&(diffs[0][0]=diffs[2][0]=DIFF_DELETE),diffs
if(1==shorttext.length)return[[DIFF_DELETE,text1],[DIFF_INSERT,text2]]
var hm=this.diff_halfMatch_(text1,text2)
if(hm){var text1_a=hm[0],text1_b=hm[1],text2_a=hm[2],text2_b=hm[3],mid_common=hm[4],diffs_a=this.diff_main(text1_a,text2_a,checklines,deadline),diffs_b=this.diff_main(text1_b,text2_b,checklines,deadline)


return diffs_a.concat([[DIFF_EQUAL,mid_common]],diffs_b)}return checklines&&text1.length>100&&text2.length>100?this.diff_lineMode_(text1,text2,deadline):this.diff_bisect_(text1,text2,deadline)

},diff_match_patch.prototype.diff_lineMode_=function(text1,text2,deadline){var a=this.diff_linesToChars_(text1,text2)


text1=a.chars1,text2=a.chars2
var linearray=a.lineArray,diffs=this.diff_main(text1,text2,!1,deadline)
this.diff_charsToLines_(diffs,linearray),this.diff_cleanupSemantic(diffs),diffs.push([DIFF_EQUAL,""])


for(var pointer=0,count_delete=0,count_insert=0,text_delete="",text_insert="";pointer<diffs.length;){
switch(diffs[pointer][0]){case DIFF_INSERT:count_insert++,text_insert+=diffs[pointer][1]
break
case DIFF_DELETE:count_delete++,text_delete+=diffs[pointer][1]
break
case DIFF_EQUAL:if(count_delete>=1&&count_insert>=1){diffs.splice(pointer-count_delete-count_insert,count_delete+count_insert),
pointer=pointer-count_delete-count_insert
for(var a=this.diff_main(text_delete,text_insert,!1,deadline),j=a.length-1;j>=0;j--)diffs.splice(pointer,0,a[j])


pointer+=a.length}count_insert=0,count_delete=0,text_delete="",text_insert=""}pointer++}return diffs.pop(),
diffs},diff_match_patch.prototype.diff_bisect_=function(text1,text2,deadline){for(var text1_length=text1.length,text2_length=text2.length,max_d=Math.ceil((text1_length+text2_length)/2),v_offset=max_d,v_length=2*max_d,v1=new Array(v_length),v2=new Array(v_length),x=0;x<v_length;x++)v1[x]=-1,
v2[x]=-1
v1[v_offset+1]=0,v2[v_offset+1]=0
for(var delta=text1_length-text2_length,front=delta%2!=0,k1start=0,k1end=0,k2start=0,k2end=0,d=0;d<max_d&&!((new Date).getTime()>deadline);d++){
for(var k1=-d+k1start;k1<=d-k1end;k1+=2){var x1,k1_offset=v_offset+k1
x1=k1==-d||k1!=d&&v1[k1_offset-1]<v1[k1_offset+1]?v1[k1_offset+1]:v1[k1_offset-1]+1
for(var y1=x1-k1;x1<text1_length&&y1<text2_length&&text1.charAt(x1)==text2.charAt(y1);)x1++,y1++
if(v1[k1_offset]=x1,x1>text1_length)k1end+=2
else if(y1>text2_length)k1start+=2
else if(front){var k2_offset=v_offset+delta-k1
if(k2_offset>=0&&k2_offset<v_length&&v2[k2_offset]!=-1){var x2=text1_length-v2[k2_offset]
if(x1>=x2)return this.diff_bisectSplit_(text1,text2,x1,y1,deadline)}}}for(var k2=-d+k2start;k2<=d-k2end;k2+=2){
var x2,k2_offset=v_offset+k2
x2=k2==-d||k2!=d&&v2[k2_offset-1]<v2[k2_offset+1]?v2[k2_offset+1]:v2[k2_offset-1]+1
for(var y2=x2-k2;x2<text1_length&&y2<text2_length&&text1.charAt(text1_length-x2-1)==text2.charAt(text2_length-y2-1);)x2++,
y2++
if(v2[k2_offset]=x2,x2>text1_length)k2end+=2
else if(y2>text2_length)k2start+=2
else if(!front){var k1_offset=v_offset+delta-k2
if(k1_offset>=0&&k1_offset<v_length&&v1[k1_offset]!=-1){var x1=v1[k1_offset],y1=v_offset+x1-k1_offset


if(x2=text1_length-x2,x1>=x2)return this.diff_bisectSplit_(text1,text2,x1,y1,deadline)}}}}return[[DIFF_DELETE,text1],[DIFF_INSERT,text2]]

},diff_match_patch.prototype.diff_bisectSplit_=function(text1,text2,x,y,deadline){var text1a=text1.substring(0,x),text2a=text2.substring(0,y),text1b=text1.substring(x),text2b=text2.substring(y),diffs=this.diff_main(text1a,text2a,!1,deadline),diffsb=this.diff_main(text1b,text2b,!1,deadline)


return diffs.concat(diffsb)},diff_match_patch.prototype.diff_linesToChars_=function(text1,text2){function diff_linesToCharsMunge_(text){
for(var chars="",lineStart=0,lineEnd=-1,lineArrayLength=lineArray.length;lineEnd<text.length-1;){lineEnd=text.indexOf("\n",lineStart),
lineEnd==-1&&(lineEnd=text.length-1)
var line=text.substring(lineStart,lineEnd+1)
lineStart=lineEnd+1,(lineHash.hasOwnProperty?lineHash.hasOwnProperty(line):void 0!==lineHash[line])?chars+=String.fromCharCode(lineHash[line]):(chars+=String.fromCharCode(lineArrayLength),
lineHash[line]=lineArrayLength,lineArray[lineArrayLength++]=line)}return chars}var lineArray=[],lineHash={}


lineArray[0]=""
var chars1=diff_linesToCharsMunge_(text1),chars2=diff_linesToCharsMunge_(text2)
return{chars1:chars1,chars2:chars2,lineArray:lineArray}},diff_match_patch.prototype.diff_charsToLines_=function(diffs,lineArray){
for(var x=0;x<diffs.length;x++){for(var chars=diffs[x][1],text=[],y=0;y<chars.length;y++)text[y]=lineArray[chars.charCodeAt(y)]


diffs[x][1]=text.join("")}},diff_match_patch.prototype.diff_commonPrefix=function(text1,text2){if(!text1||!text2||text1.charAt(0)!=text2.charAt(0))return 0


for(var pointermin=0,pointermax=Math.min(text1.length,text2.length),pointermid=pointermax,pointerstart=0;pointermin<pointermid;)text1.substring(pointerstart,pointermid)==text2.substring(pointerstart,pointermid)?(pointermin=pointermid,
pointerstart=pointermin):pointermax=pointermid,pointermid=Math.floor((pointermax-pointermin)/2+pointermin)


return pointermid},diff_match_patch.prototype.diff_commonSuffix=function(text1,text2){if(!text1||!text2||text1.charAt(text1.length-1)!=text2.charAt(text2.length-1))return 0


for(var pointermin=0,pointermax=Math.min(text1.length,text2.length),pointermid=pointermax,pointerend=0;pointermin<pointermid;)text1.substring(text1.length-pointermid,text1.length-pointerend)==text2.substring(text2.length-pointermid,text2.length-pointerend)?(pointermin=pointermid,
pointerend=pointermin):pointermax=pointermid,pointermid=Math.floor((pointermax-pointermin)/2+pointermin)


return pointermid},diff_match_patch.prototype.diff_commonOverlap_=function(text1,text2){var text1_length=text1.length,text2_length=text2.length


if(0==text1_length||0==text2_length)return 0
text1_length>text2_length?text1=text1.substring(text1_length-text2_length):text1_length<text2_length&&(text2=text2.substring(0,text1_length))


var text_length=Math.min(text1_length,text2_length)
if(text1==text2)return text_length
for(var best=0,length=1;;){var pattern=text1.substring(text_length-length),found=text2.indexOf(pattern)


if(found==-1)return best
length+=found,0!=found&&text1.substring(text_length-length)!=text2.substring(0,length)||(best=length,
length++)}},diff_match_patch.prototype.diff_halfMatch_=function(text1,text2){function diff_halfMatchI_(longtext,shorttext,i){
for(var best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,seed=longtext.substring(i,i+Math.floor(longtext.length/4)),j=-1,best_common="";(j=shorttext.indexOf(seed,j+1))!=-1;){
var prefixLength=dmp.diff_commonPrefix(longtext.substring(i),shorttext.substring(j)),suffixLength=dmp.diff_commonSuffix(longtext.substring(0,i),shorttext.substring(0,j))


best_common.length<suffixLength+prefixLength&&(best_common=shorttext.substring(j-suffixLength,j)+shorttext.substring(j,j+prefixLength),
best_longtext_a=longtext.substring(0,i-suffixLength),best_longtext_b=longtext.substring(i+prefixLength),
best_shorttext_a=shorttext.substring(0,j-suffixLength),best_shorttext_b=shorttext.substring(j+prefixLength))

}return 2*best_common.length>=longtext.length?[best_longtext_a,best_longtext_b,best_shorttext_a,best_shorttext_b,best_common]:null

}if(this.Diff_Timeout<=0)return null
var longtext=text1.length>text2.length?text1:text2,shorttext=text1.length>text2.length?text2:text1
if(longtext.length<4||2*shorttext.length<longtext.length)return null
var hm,dmp=this,hm1=diff_halfMatchI_(longtext,shorttext,Math.ceil(longtext.length/4)),hm2=diff_halfMatchI_(longtext,shorttext,Math.ceil(longtext.length/2))


if(!hm1&&!hm2)return null
hm=hm2?hm1&&hm1[4].length>hm2[4].length?hm1:hm2:hm1
var text1_a,text1_b,text2_a,text2_b
text1.length>text2.length?(text1_a=hm[0],text1_b=hm[1],text2_a=hm[2],text2_b=hm[3]):(text2_a=hm[0],text2_b=hm[1],
text1_a=hm[2],text1_b=hm[3])
var mid_common=hm[4]
return[text1_a,text1_b,text2_a,text2_b,mid_common]},diff_match_patch.prototype.diff_cleanupSemantic=function(diffs){
for(var changes=!1,equalities=[],equalitiesLength=0,lastequality=null,pointer=0,length_insertions1=0,length_deletions1=0,length_insertions2=0,length_deletions2=0;pointer<diffs.length;)diffs[pointer][0]==DIFF_EQUAL?(equalities[equalitiesLength++]=pointer,
length_insertions1=length_insertions2,length_deletions1=length_deletions2,length_insertions2=0,length_deletions2=0,
lastequality=diffs[pointer][1]):(diffs[pointer][0]==DIFF_INSERT?length_insertions2+=diffs[pointer][1].length:length_deletions2+=diffs[pointer][1].length,
lastequality&&lastequality.length<=Math.max(length_insertions1,length_deletions1)&&lastequality.length<=Math.max(length_insertions2,length_deletions2)&&(diffs.splice(equalities[equalitiesLength-1],0,[DIFF_DELETE,lastequality]),
diffs[equalities[equalitiesLength-1]+1][0]=DIFF_INSERT,equalitiesLength--,equalitiesLength--,pointer=equalitiesLength>0?equalities[equalitiesLength-1]:-1,
length_insertions1=0,length_deletions1=0,length_insertions2=0,length_deletions2=0,lastequality=null,changes=!0)),
pointer++
for(changes&&this.diff_cleanupMerge(diffs),this.diff_cleanupSemanticLossless(diffs),pointer=1;pointer<diffs.length;){
if(diffs[pointer-1][0]==DIFF_DELETE&&diffs[pointer][0]==DIFF_INSERT){var deletion=diffs[pointer-1][1],insertion=diffs[pointer][1],overlap_length1=this.diff_commonOverlap_(deletion,insertion),overlap_length2=this.diff_commonOverlap_(insertion,deletion)


overlap_length1>=overlap_length2?(overlap_length1>=deletion.length/2||overlap_length1>=insertion.length/2)&&(diffs.splice(pointer,0,[DIFF_EQUAL,insertion.substring(0,overlap_length1)]),
diffs[pointer-1][1]=deletion.substring(0,deletion.length-overlap_length1),diffs[pointer+1][1]=insertion.substring(overlap_length1),
pointer++):(overlap_length2>=deletion.length/2||overlap_length2>=insertion.length/2)&&(diffs.splice(pointer,0,[DIFF_EQUAL,deletion.substring(0,overlap_length2)]),
diffs[pointer-1][0]=DIFF_INSERT,diffs[pointer-1][1]=insertion.substring(0,insertion.length-overlap_length2),
diffs[pointer+1][0]=DIFF_DELETE,diffs[pointer+1][1]=deletion.substring(overlap_length2),pointer++),pointer++

}pointer++}},diff_match_patch.prototype.diff_cleanupSemanticLossless=function(diffs){function diff_cleanupSemanticScore_(one,two){
if(!one||!two)return 6
var char1=one.charAt(one.length-1),char2=two.charAt(0),nonAlphaNumeric1=char1.match(diff_match_patch.nonAlphaNumericRegex_),nonAlphaNumeric2=char2.match(diff_match_patch.nonAlphaNumericRegex_),whitespace1=nonAlphaNumeric1&&char1.match(diff_match_patch.whitespaceRegex_),whitespace2=nonAlphaNumeric2&&char2.match(diff_match_patch.whitespaceRegex_),lineBreak1=whitespace1&&char1.match(diff_match_patch.linebreakRegex_),lineBreak2=whitespace2&&char2.match(diff_match_patch.linebreakRegex_),blankLine1=lineBreak1&&one.match(diff_match_patch.blanklineEndRegex_),blankLine2=lineBreak2&&two.match(diff_match_patch.blanklineStartRegex_)


return blankLine1||blankLine2?5:lineBreak1||lineBreak2?4:nonAlphaNumeric1&&!whitespace1&&whitespace2?3:whitespace1||whitespace2?2:nonAlphaNumeric1||nonAlphaNumeric2?1:0

}for(var pointer=1;pointer<diffs.length-1;){if(diffs[pointer-1][0]==DIFF_EQUAL&&diffs[pointer+1][0]==DIFF_EQUAL){
var equality1=diffs[pointer-1][1],edit=diffs[pointer][1],equality2=diffs[pointer+1][1],commonOffset=this.diff_commonSuffix(equality1,edit)


if(commonOffset){var commonString=edit.substring(edit.length-commonOffset)
equality1=equality1.substring(0,equality1.length-commonOffset),edit=commonString+edit.substring(0,edit.length-commonOffset),
equality2=commonString+equality2}for(var bestEquality1=equality1,bestEdit=edit,bestEquality2=equality2,bestScore=diff_cleanupSemanticScore_(equality1,edit)+diff_cleanupSemanticScore_(edit,equality2);edit.charAt(0)===equality2.charAt(0);){
equality1+=edit.charAt(0),edit=edit.substring(1)+equality2.charAt(0),equality2=equality2.substring(1)


var score=diff_cleanupSemanticScore_(equality1,edit)+diff_cleanupSemanticScore_(edit,equality2)
score>=bestScore&&(bestScore=score,bestEquality1=equality1,bestEdit=edit,bestEquality2=equality2)}diffs[pointer-1][1]!=bestEquality1&&(bestEquality1?diffs[pointer-1][1]=bestEquality1:(diffs.splice(pointer-1,1),
pointer--),diffs[pointer][1]=bestEdit,bestEquality2?diffs[pointer+1][1]=bestEquality2:(diffs.splice(pointer+1,1),
pointer--))}pointer++}},diff_match_patch.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,diff_match_patch.whitespaceRegex_=/\s/,
diff_match_patch.linebreakRegex_=/[\r\n]/,diff_match_patch.blanklineEndRegex_=/\n\r?\n$/,diff_match_patch.blanklineStartRegex_=/^\r?\n\r?\n/,
diff_match_patch.prototype.diff_cleanupEfficiency=function(diffs){for(var changes=!1,equalities=[],equalitiesLength=0,lastequality=null,pointer=0,pre_ins=!1,pre_del=!1,post_ins=!1,post_del=!1;pointer<diffs.length;)diffs[pointer][0]==DIFF_EQUAL?(diffs[pointer][1].length<this.Diff_EditCost&&(post_ins||post_del)?(equalities[equalitiesLength++]=pointer,
pre_ins=post_ins,pre_del=post_del,lastequality=diffs[pointer][1]):(equalitiesLength=0,lastequality=null),
post_ins=post_del=!1):(diffs[pointer][0]==DIFF_DELETE?post_del=!0:post_ins=!0,lastequality&&(pre_ins&&pre_del&&post_ins&&post_del||lastequality.length<this.Diff_EditCost/2&&pre_ins+pre_del+post_ins+post_del==3)&&(diffs.splice(equalities[equalitiesLength-1],0,[DIFF_DELETE,lastequality]),
diffs[equalities[equalitiesLength-1]+1][0]=DIFF_INSERT,equalitiesLength--,lastequality=null,pre_ins&&pre_del?(post_ins=post_del=!0,
equalitiesLength=0):(equalitiesLength--,pointer=equalitiesLength>0?equalities[equalitiesLength-1]:-1,
post_ins=post_del=!1),changes=!0)),pointer++
changes&&this.diff_cleanupMerge(diffs)},diff_match_patch.prototype.diff_cleanupMerge=function(diffs){
diffs.push([DIFF_EQUAL,""])
for(var commonlength,pointer=0,count_delete=0,count_insert=0,text_delete="",text_insert="";pointer<diffs.length;)switch(diffs[pointer][0]){
case DIFF_INSERT:count_insert++,text_insert+=diffs[pointer][1],pointer++
break
case DIFF_DELETE:count_delete++,text_delete+=diffs[pointer][1],pointer++
break
case DIFF_EQUAL:count_delete+count_insert>1?(0!==count_delete&&0!==count_insert&&(commonlength=this.diff_commonPrefix(text_insert,text_delete),
0!==commonlength&&(pointer-count_delete-count_insert>0&&diffs[pointer-count_delete-count_insert-1][0]==DIFF_EQUAL?diffs[pointer-count_delete-count_insert-1][1]+=text_insert.substring(0,commonlength):(diffs.splice(0,0,[DIFF_EQUAL,text_insert.substring(0,commonlength)]),
pointer++),text_insert=text_insert.substring(commonlength),text_delete=text_delete.substring(commonlength)),
commonlength=this.diff_commonSuffix(text_insert,text_delete),0!==commonlength&&(diffs[pointer][1]=text_insert.substring(text_insert.length-commonlength)+diffs[pointer][1],
text_insert=text_insert.substring(0,text_insert.length-commonlength),text_delete=text_delete.substring(0,text_delete.length-commonlength))),
0===count_delete?diffs.splice(pointer-count_insert,count_delete+count_insert,[DIFF_INSERT,text_insert]):0===count_insert?diffs.splice(pointer-count_delete,count_delete+count_insert,[DIFF_DELETE,text_delete]):diffs.splice(pointer-count_delete-count_insert,count_delete+count_insert,[DIFF_DELETE,text_delete],[DIFF_INSERT,text_insert]),
pointer=pointer-count_delete-count_insert+(count_delete?1:0)+(count_insert?1:0)+1):0!==pointer&&diffs[pointer-1][0]==DIFF_EQUAL?(diffs[pointer-1][1]+=diffs[pointer][1],
diffs.splice(pointer,1)):pointer++,count_insert=0,count_delete=0,text_delete="",text_insert=""}""===diffs[diffs.length-1][1]&&diffs.pop()


var changes=!1
for(pointer=1;pointer<diffs.length-1;)diffs[pointer-1][0]==DIFF_EQUAL&&diffs[pointer+1][0]==DIFF_EQUAL&&(diffs[pointer][1].substring(diffs[pointer][1].length-diffs[pointer-1][1].length)==diffs[pointer-1][1]?(diffs[pointer][1]=diffs[pointer-1][1]+diffs[pointer][1].substring(0,diffs[pointer][1].length-diffs[pointer-1][1].length),
diffs[pointer+1][1]=diffs[pointer-1][1]+diffs[pointer+1][1],diffs.splice(pointer-1,1),changes=!0):diffs[pointer][1].substring(0,diffs[pointer+1][1].length)==diffs[pointer+1][1]&&(diffs[pointer-1][1]+=diffs[pointer+1][1],
diffs[pointer][1]=diffs[pointer][1].substring(diffs[pointer+1][1].length)+diffs[pointer+1][1],diffs.splice(pointer+1,1),
changes=!0)),pointer++
changes&&this.diff_cleanupMerge(diffs)},diff_match_patch.prototype.diff_xIndex=function(diffs,loc){var x,chars1=0,chars2=0,last_chars1=0,last_chars2=0


for(x=0;x<diffs.length&&(diffs[x][0]!==DIFF_INSERT&&(chars1+=diffs[x][1].length),diffs[x][0]!==DIFF_DELETE&&(chars2+=diffs[x][1].length),
!(chars1>loc));x++)last_chars1=chars1,last_chars2=chars2
return diffs.length!=x&&diffs[x][0]===DIFF_DELETE?last_chars2:last_chars2+(loc-last_chars1)},diff_match_patch.prototype.diff_text1=function(diffs){
for(var text=[],x=0;x<diffs.length;x++)diffs[x][0]!==DIFF_INSERT&&(text[x]=diffs[x][1])
return text.join("")},diff_match_patch.prototype.diff_text2=function(diffs){for(var text=[],x=0;x<diffs.length;x++)diffs[x][0]!==DIFF_DELETE&&(text[x]=diffs[x][1])


return text.join("")},diff_match_patch.prototype.diff_levenshtein=function(diffs){for(var levenshtein=0,insertions=0,deletions=0,x=0;x<diffs.length;x++){
var op=diffs[x][0],data=diffs[x][1]
switch(op){case DIFF_INSERT:insertions+=data.length
break
case DIFF_DELETE:deletions+=data.length
break
case DIFF_EQUAL:levenshtein+=Math.max(insertions,deletions),insertions=0,deletions=0}}return levenshtein+=Math.max(insertions,deletions)

},diff_match_patch.prototype.diff_toDelta=function(diffs){for(var text=[],x=0;x<diffs.length;x++)switch(diffs[x][0]){
case DIFF_INSERT:text[x]="+"+encodeURI(diffs[x][1])
break
case DIFF_DELETE:text[x]="-"+diffs[x][1].length
break
case DIFF_EQUAL:text[x]="="+diffs[x][1].length}return text.join("\t").replace(/%20/g," ")},diff_match_patch.prototype.diff_fromDelta=function(text1,delta){
for(var diffs=[],diffsLength=0,pointer=0,tokens=delta.split(/\t/g),x=0;x<tokens.length;x++){var param=tokens[x].substring(1)


switch(tokens[x].charAt(0)){case"+":try{diffs[diffsLength++]=[DIFF_INSERT,decodeURI(param)]}catch(ex){
throw new Error("Illegal escape in diff_fromDelta: "+param)}break
case"-":case"=":var n=parseInt(param,10)
if(isNaN(n)||n<0)throw new Error("Invalid number in diff_fromDelta: "+param)
var text=text1.substring(pointer,pointer+=n)
"="==tokens[x].charAt(0)?diffs[diffsLength++]=[DIFF_EQUAL,text]:diffs[diffsLength++]=[DIFF_DELETE,text]


break
default:if(tokens[x])throw new Error("Invalid diff operation in diff_fromDelta: "+tokens[x])}}if(pointer!=text1.length)throw new Error("Delta length ("+pointer+") does not equal source text length ("+text1.length+").")


return diffs},exports.diff_match_patch=diff_match_patch,exports.DIFF_DELETE=DIFF_DELETE,exports.DIFF_INSERT=DIFF_INSERT,
exports.DIFF_EQUAL=DIFF_EQUAL})


define("ace/mouse/default_handlers",[],function(require,exports,module){"use strict"
function DefaultHandlers(mouseHandler){mouseHandler.$clickSelection=null
var editor=mouseHandler.editor
editor.setDefaultHandler("mousedown",this.onMouseDown.bind(mouseHandler)),editor.setDefaultHandler("dblclick",this.onDoubleClick.bind(mouseHandler)),
editor.setDefaultHandler("tripleclick",this.onTripleClick.bind(mouseHandler)),editor.setDefaultHandler("quadclick",this.onQuadClick.bind(mouseHandler)),
editor.setDefaultHandler("mousewheel",this.onMouseWheel.bind(mouseHandler)),editor.setDefaultHandler("touchmove",this.onTouchMove.bind(mouseHandler))


var exports=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"]


exports.forEach(function(x){mouseHandler[x]=this[x]},this),mouseHandler.selectByLines=this.extendSelectionBy.bind(mouseHandler,"getLineRange"),
mouseHandler.selectByWords=this.extendSelectionBy.bind(mouseHandler,"getWordRange")}function calcDistance(ax,ay,bx,by){
return Math.sqrt(Math.pow(bx-ax,2)+Math.pow(by-ay,2))}function calcRangeOrientation(range,cursor){if(range.start.row==range.end.row)var cmp=2*cursor.column-range.start.column-range.end.column
else if(range.start.row!=range.end.row-1||range.start.column||range.end.column)var cmp=2*cursor.row-range.start.row-range.end.row
else var cmp=cursor.column-4
return cmp<0?{cursor:range.start,anchor:range.end}:{cursor:range.end,anchor:range.start}}var useragent=(require("../lib/dom"),
require("../lib/event"),require("../lib/useragent")),DRAG_OFFSET=0;(function(){this.onMouseDown=function(ev){
var inSelection=ev.inSelection(),pos=ev.getDocumentPosition()
this.mousedownEvent=ev
var editor=this.editor,button=ev.getButton()
if(0!==button){var selectionRange=editor.getSelectionRange(),selectionEmpty=selectionRange.isEmpty()
return(selectionEmpty||1==button)&&editor.selection.moveToPosition(pos),void(2==button&&(editor.textInput.onContextMenu(ev.domEvent),
useragent.isMozilla||ev.preventDefault()))}return this.mousedownEvent.time=Date.now(),!inSelection||editor.isFocused()||(editor.focus(),
!this.$focusTimout||this.$clickSelection||editor.inMultiSelectMode)?(this.captureMouse(ev),this.startSelect(pos,ev.domEvent._clicks>1),
ev.preventDefault()):(this.setState("focusWait"),void this.captureMouse(ev))},this.startSelect=function(pos,waitForClickSelection){
pos=pos||this.editor.renderer.screenToTextCoordinates(this.x,this.y)
var editor=this.editor
this.mousedownEvent.getShiftKey()?editor.selection.selectToPosition(pos):waitForClickSelection||editor.selection.moveToPosition(pos),
waitForClickSelection||this.select(),editor.renderer.scroller.setCapture&&editor.renderer.scroller.setCapture(),
editor.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var anchor,editor=this.editor,cursor=editor.renderer.screenToTextCoordinates(this.x,this.y)


if(this.$clickSelection){var cmp=this.$clickSelection.comparePoint(cursor)
if(cmp==-1)anchor=this.$clickSelection.end
else if(1==cmp)anchor=this.$clickSelection.start
else{var orientedRange=calcRangeOrientation(this.$clickSelection,cursor)
cursor=orientedRange.cursor,anchor=orientedRange.anchor}editor.selection.setSelectionAnchor(anchor.row,anchor.column)

}editor.selection.selectToPosition(cursor),editor.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(unitName){
var anchor,editor=this.editor,cursor=editor.renderer.screenToTextCoordinates(this.x,this.y),range=editor.selection[unitName](cursor.row,cursor.column)


if(this.$clickSelection){var cmpStart=this.$clickSelection.comparePoint(range.start),cmpEnd=this.$clickSelection.comparePoint(range.end)


if(cmpStart==-1&&cmpEnd<=0)anchor=this.$clickSelection.end,range.end.row==cursor.row&&range.end.column==cursor.column||(cursor=range.start)
else if(1==cmpEnd&&cmpStart>=0)anchor=this.$clickSelection.start,range.start.row==cursor.row&&range.start.column==cursor.column||(cursor=range.end)
else if(cmpStart==-1&&1==cmpEnd)cursor=range.end,anchor=range.start
else{var orientedRange=calcRangeOrientation(this.$clickSelection,cursor)
cursor=orientedRange.cursor,anchor=orientedRange.anchor}editor.selection.setSelectionAnchor(anchor.row,anchor.column)

}editor.selection.selectToPosition(cursor),editor.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){
this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()

},this.focusWait=function(){var distance=calcDistance(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),time=Date.now()

;(distance>DRAG_OFFSET||time-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())

},this.onDoubleClick=function(ev){var pos=ev.getDocumentPosition(),editor=this.editor,session=editor.session,range=session.getBracketRange(pos)


range?(range.isEmpty()&&(range.start.column--,range.end.column++),this.setState("select")):(range=editor.selection.getWordRange(pos.row,pos.column),
this.setState("selectByWords")),this.$clickSelection=range,this.select()},this.onTripleClick=function(ev){
var pos=ev.getDocumentPosition(),editor=this.editor
this.setState("selectByLines")
var range=editor.getSelectionRange()
range.isMultiLine()&&range.contains(pos.row,pos.column)?(this.$clickSelection=editor.selection.getLineRange(range.start.row),
this.$clickSelection.end=editor.selection.getLineRange(range.end.row).end):this.$clickSelection=editor.selection.getLineRange(pos.row),
this.select()},this.onQuadClick=function(ev){var editor=this.editor
editor.selectAll(),this.$clickSelection=editor.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(ev){
if(!ev.getAccelKey()){ev.getShiftKey()&&ev.wheelY&&!ev.wheelX&&(ev.wheelX=ev.wheelY,ev.wheelY=0)
var t=ev.domEvent.timeStamp,dt=t-(this.$lastScrollTime||0),editor=this.editor,isScrolable=editor.renderer.isScrollableBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed)


return isScrolable||dt<200?(this.$lastScrollTime=t,editor.renderer.scrollBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed),
ev.stop()):void 0}},this.onTouchMove=function(ev){var t=ev.domEvent.timeStamp,dt=t-(this.$lastScrollTime||0),editor=this.editor,isScrolable=editor.renderer.isScrollableBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed)


if(isScrolable||dt<200)return this.$lastScrollTime=t,editor.renderer.scrollBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed),
ev.stop()}}).call(DefaultHandlers.prototype),exports.DefaultHandlers=DefaultHandlers})


define("ace/tooltip",[],function(require,exports,module){"use strict"
function Tooltip(parentNode){this.isOpen=!1,this.$element=null,this.$parentNode=parentNode}var dom=(require("./lib/oop"),
require("./lib/dom"));(function(){this.$init=function(){return this.$element=dom.createElement("div"),
this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),
this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(text){
dom.setInnerText(this.getElement(),text)},this.setHtml=function(html){this.getElement().innerHTML=html

},this.setPosition=function(x,y){this.getElement().style.left=x+"px",this.getElement().style.top=y+"px"

},this.setClassName=function(className){dom.addCssClass(this.getElement(),className)},this.show=function(text,x,y){
null!=text&&this.setText(text),null!=x&&null!=y&&this.setPosition(x,y),this.isOpen||(this.getElement().style.display="block",
this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)

},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth

},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)

}}).call(Tooltip.prototype),exports.Tooltip=Tooltip})


define("ace/mouse/default_gutter_handler",[],function(require,exports,module){"use strict"
function GutterHandler(mouseHandler){function showTooltip(){var row=mouseEvent.getDocumentPosition().row,annotation=gutter.$annotations[row]


if(!annotation)return hideTooltip()
var maxRow=editor.session.getLength()
if(row==maxRow){var screenRow=editor.renderer.pixelToScreenCoordinates(0,mouseEvent.y).row,pos=mouseEvent.$pos


if(screenRow>editor.session.documentToScreenRow(pos.row,pos.column))return hideTooltip()}if(tooltipAnnotation!=annotation)if(tooltipAnnotation=annotation.text.join("<br/>"),
tooltip.setHtml(tooltipAnnotation),tooltip.show(),editor._signal("showGutterTooltip",tooltip),editor.on("mousewheel",hideTooltip),
mouseHandler.$tooltipFollowsMouse)moveTooltip(mouseEvent)
else{var gutterElement=mouseEvent.domEvent.target,rect=gutterElement.getBoundingClientRect(),style=tooltip.getElement().style


style.left=rect.right+"px",style.top=rect.bottom+"px"}}function hideTooltip(){tooltipTimeout&&(tooltipTimeout=clearTimeout(tooltipTimeout)),
tooltipAnnotation&&(tooltip.hide(),tooltipAnnotation=null,editor._signal("hideGutterTooltip",tooltip),
editor.removeEventListener("mousewheel",hideTooltip))}function moveTooltip(e){tooltip.setPosition(e.x,e.y)

}var editor=mouseHandler.editor,gutter=editor.renderer.$gutterLayer,tooltip=new GutterTooltip(editor.container)


mouseHandler.editor.setDefaultHandler("guttermousedown",function(e){if(editor.isFocused()&&0==e.getButton()){
var gutterRegion=gutter.getRegion(e)
if("foldWidgets"!=gutterRegion){var row=e.getDocumentPosition().row,selection=editor.session.selection


if(e.getShiftKey())selection.selectTo(row,0)
else{if(2==e.domEvent.detail)return editor.selectAll(),e.preventDefault()
mouseHandler.$clickSelection=editor.selection.getLineRange(row)}return mouseHandler.setState("selectByLines"),
mouseHandler.captureMouse(e),e.preventDefault()}}})
var tooltipTimeout,mouseEvent,tooltipAnnotation
mouseHandler.editor.setDefaultHandler("guttermousemove",function(e){var target=e.domEvent.target||e.domEvent.srcElement


return dom.hasCssClass(target,"ace_fold-widget")?hideTooltip():(tooltipAnnotation&&mouseHandler.$tooltipFollowsMouse&&moveTooltip(e),
mouseEvent=e,void(tooltipTimeout||(tooltipTimeout=setTimeout(function(){tooltipTimeout=null,mouseEvent&&!mouseHandler.isMousePressed?showTooltip():hideTooltip()

},50))))}),event.addListener(editor.renderer.$gutter,"mouseout",function(e){mouseEvent=null,tooltipAnnotation&&!tooltipTimeout&&(tooltipTimeout=setTimeout(function(){
tooltipTimeout=null,hideTooltip()},50))}),editor.on("changeSession",hideTooltip)}function GutterTooltip(parentNode){
Tooltip.call(this,parentNode)}var dom=require("../lib/dom"),oop=require("../lib/oop"),event=require("../lib/event"),Tooltip=require("../tooltip").Tooltip


oop.inherits(GutterTooltip,Tooltip),function(){this.setPosition=function(x,y){var windowWidth=window.innerWidth||document.documentElement.clientWidth,windowHeight=window.innerHeight||document.documentElement.clientHeight,width=this.getWidth(),height=this.getHeight()


x+=15,y+=15,x+width>windowWidth&&(x-=x+width-windowWidth),y+height>windowHeight&&(y-=20+height),Tooltip.prototype.setPosition.call(this,x,y)

}}.call(GutterTooltip.prototype),exports.GutterHandler=GutterHandler})


define("ace/mouse/mouse_event",[],function(require,exports,module){"use strict"
var event=require("../lib/event"),useragent=require("../lib/useragent"),MouseEvent=exports.MouseEvent=function(domEvent,editor){
this.domEvent=domEvent,this.editor=editor,this.x=this.clientX=domEvent.clientX,this.y=this.clientY=domEvent.clientY,
this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){
this.stopPropagation=function(){event.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){
event.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),
this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),
this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection
var editor=this.editor,selectionRange=editor.getSelectionRange()
if(selectionRange.isEmpty())this.$inSelection=!1
else{var pos=this.getDocumentPosition()
this.$inSelection=selectionRange.contains(pos.row,pos.column)}return this.$inSelection},this.getButton=function(){
return event.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=useragent.isMac?function(){
return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(MouseEvent.prototype)})


define("ace/mouse/dragdrop_handler",[],function(require,exports,module){"use strict"
function DragdropHandler(mouseHandler){function scrollCursorIntoView(cursor,prevCursor){var now=Date.now(),vMovement=!prevCursor||cursor.row!=prevCursor.row,hMovement=!prevCursor||cursor.column!=prevCursor.column


if(!cursorMovedTime||vMovement||hMovement)editor.moveCursorToPosition(cursor),cursorMovedTime=now,cursorPointOnCaretMoved={
x:x,y:y}
else{var distance=calcDistance(cursorPointOnCaretMoved.x,cursorPointOnCaretMoved.y,x,y)
distance>SCROLL_CURSOR_HYSTERESIS?cursorMovedTime=null:now-cursorMovedTime>=SCROLL_CURSOR_DELAY&&(editor.renderer.scrollCursorIntoView(),
cursorMovedTime=null)}}function autoScroll(cursor,prevCursor){var now=Date.now(),lineHeight=editor.renderer.layerConfig.lineHeight,characterWidth=editor.renderer.layerConfig.characterWidth,editorRect=editor.renderer.scroller.getBoundingClientRect(),offsets={
x:{left:x-editorRect.left,right:editorRect.right-x},y:{top:y-editorRect.top,bottom:editorRect.bottom-y
}},nearestXOffset=Math.min(offsets.x.left,offsets.x.right),nearestYOffset=Math.min(offsets.y.top,offsets.y.bottom),scrollCursor={
row:cursor.row,column:cursor.column}
nearestXOffset/characterWidth<=2&&(scrollCursor.column+=offsets.x.left<offsets.x.right?-3:2),nearestYOffset/lineHeight<=1&&(scrollCursor.row+=offsets.y.top<offsets.y.bottom?-1:1)


var vScroll=cursor.row!=scrollCursor.row,hScroll=cursor.column!=scrollCursor.column,vMovement=!prevCursor||cursor.row!=prevCursor.row


vScroll||hScroll&&!vMovement?autoScrollStartTime?now-autoScrollStartTime>=AUTOSCROLL_DELAY&&editor.renderer.scrollCursorIntoView(scrollCursor):autoScrollStartTime=now:autoScrollStartTime=null

}function onDragInterval(){var prevCursor=dragCursor
dragCursor=editor.renderer.screenToTextCoordinates(x,y),scrollCursorIntoView(dragCursor,prevCursor),autoScroll(dragCursor,prevCursor)

}function addDragMarker(){range=editor.selection.toOrientedRange(),dragSelectionMarker=editor.session.addMarker(range,"ace_selection",editor.getSelectionStyle()),
editor.clearSelection(),editor.isFocused()&&editor.renderer.$cursorLayer.setBlinking(!1),clearInterval(timerId),
onDragInterval(),timerId=setInterval(onDragInterval,20),counter=0,event.addListener(document,"mousemove",onMouseMove)

}function clearDragMarker(){clearInterval(timerId),editor.session.removeMarker(dragSelectionMarker),dragSelectionMarker=null,
editor.selection.fromOrientedRange(range),editor.isFocused()&&!isInternal&&editor.renderer.$cursorLayer.setBlinking(!editor.getReadOnly()),
range=null,dragCursor=null,counter=0,autoScrollStartTime=null,cursorMovedTime=null,event.removeListener(document,"mousemove",onMouseMove)

}function onMouseMove(){null==onMouseMoveTimer&&(onMouseMoveTimer=setTimeout(function(){null!=onMouseMoveTimer&&dragSelectionMarker&&clearDragMarker()

},20))}function canAccept(dataTransfer){var types=dataTransfer.types
return!types||Array.prototype.some.call(types,function(type){return"text/plain"==type||"Text"==type})

}function getDropEffect(e){var copyAllowed=["copy","copymove","all","uninitialized"],moveAllowed=["move","copymove","linkmove","all","uninitialized"],copyModifierState=useragent.isMac?e.altKey:e.ctrlKey,effectAllowed="uninitialized"


try{effectAllowed=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var dropEffect="none"
return copyModifierState&&copyAllowed.indexOf(effectAllowed)>=0?dropEffect="copy":moveAllowed.indexOf(effectAllowed)>=0?dropEffect="move":copyAllowed.indexOf(effectAllowed)>=0&&(dropEffect="copy"),
dropEffect}var editor=mouseHandler.editor,blankImage=dom.createElement("img")
blankImage.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",useragent.isOpera&&(blankImage.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;")


var exports=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"]
exports.forEach(function(x){mouseHandler[x]=this[x]},this),editor.addEventListener("mousedown",this.onMouseDown.bind(mouseHandler))


var dragSelectionMarker,x,y,timerId,range,dragCursor,dragOperation,isInternal,autoScrollStartTime,cursorMovedTime,cursorPointOnCaretMoved,mouseTarget=editor.container,counter=0


this.onDragStart=function(e){if(this.cancelDrag||!mouseTarget.draggable){var self=this
return setTimeout(function(){self.startSelect(),self.captureMouse(e)},0),e.preventDefault()}range=editor.getSelectionRange()


var dataTransfer=e.dataTransfer
dataTransfer.effectAllowed=editor.getReadOnly()?"copy":"copyMove",useragent.isOpera&&(editor.container.appendChild(blankImage),
blankImage.scrollTop=0),dataTransfer.setDragImage&&dataTransfer.setDragImage(blankImage,0,0),useragent.isOpera&&editor.container.removeChild(blankImage),
dataTransfer.clearData(),dataTransfer.setData("Text",editor.session.getTextRange()),isInternal=!0,this.setState("drag")

},this.onDragEnd=function(e){if(mouseTarget.draggable=!1,isInternal=!1,this.setState(null),!editor.getReadOnly()){
var dropEffect=e.dataTransfer.dropEffect
dragOperation||"move"!=dropEffect||editor.session.remove(editor.getSelectionRange()),editor.renderer.$cursorLayer.setBlinking(!0)

}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){
if(!editor.getReadOnly()&&canAccept(e.dataTransfer))return x=e.clientX,y=e.clientY,dragSelectionMarker||addDragMarker(),
counter++,e.dataTransfer.dropEffect=dragOperation=getDropEffect(e),event.preventDefault(e)},this.onDragOver=function(e){
if(!editor.getReadOnly()&&canAccept(e.dataTransfer))return x=e.clientX,y=e.clientY,dragSelectionMarker||(addDragMarker(),
counter++),null!==onMouseMoveTimer&&(onMouseMoveTimer=null),e.dataTransfer.dropEffect=dragOperation=getDropEffect(e),
event.preventDefault(e)},this.onDragLeave=function(e){if(counter--,counter<=0&&dragSelectionMarker)return clearDragMarker(),
dragOperation=null,event.preventDefault(e)},this.onDrop=function(e){if(dragCursor){var dataTransfer=e.dataTransfer


if(isInternal)switch(dragOperation){case"move":range=range.contains(dragCursor.row,dragCursor.column)?{
start:dragCursor,end:dragCursor}:editor.moveText(range,dragCursor)
break
case"copy":range=editor.moveText(range,dragCursor,!0)}else{var dropData=dataTransfer.getData("Text")
range={start:dragCursor,end:editor.session.insert(dragCursor,dropData)},editor.focus(),dragOperation=null

}return clearDragMarker(),event.preventDefault(e)}},event.addListener(mouseTarget,"dragstart",this.onDragStart.bind(mouseHandler)),
event.addListener(mouseTarget,"dragend",this.onDragEnd.bind(mouseHandler)),event.addListener(mouseTarget,"dragenter",this.onDragEnter.bind(mouseHandler)),
event.addListener(mouseTarget,"dragover",this.onDragOver.bind(mouseHandler)),event.addListener(mouseTarget,"dragleave",this.onDragLeave.bind(mouseHandler)),
event.addListener(mouseTarget,"drop",this.onDrop.bind(mouseHandler))
var onMouseMoveTimer=null}function calcDistance(ax,ay,bx,by){return Math.sqrt(Math.pow(bx-ax,2)+Math.pow(by-ay,2))

}var dom=require("../lib/dom"),event=require("../lib/event"),useragent=require("../lib/useragent"),AUTOSCROLL_DELAY=200,SCROLL_CURSOR_DELAY=200,SCROLL_CURSOR_HYSTERESIS=5

;(function(){this.dragWait=function(){var interval=Date.now()-this.mousedownEvent.time
interval>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var target=this.editor.container


target.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){
this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),
this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1


var editor=this.editor,target=editor.container
target.draggable=!0,editor.renderer.$cursorLayer.setBlinking(!1),editor.setStyle("ace_dragging")
var cursorStyle=useragent.isWin?"default":"move"
editor.renderer.setCursorStyle(cursorStyle),this.setState("dragReady")},this.onMouseDrag=function(e){
var target=this.editor.container
if(useragent.isIE&&"dragReady"==this.state){var distance=calcDistance(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)


distance>3&&target.dragDrop()}if("dragWait"===this.state){var distance=calcDistance(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)


distance>0&&(target.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){
if(this.$dragEnabled){this.mousedownEvent=e
var editor=this.editor,inSelection=e.inSelection(),button=e.getButton(),clickCount=e.domEvent.detail||1


if(1===clickCount&&0===button&&inSelection){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return


this.mousedownEvent.time=Date.now()
var eventTarget=e.domEvent.target||e.domEvent.srcElement
if("unselectable"in eventTarget&&(eventTarget.unselectable="on"),editor.getDragDelay()){if(useragent.isWebKit){
this.cancelDrag=!0
var mouseTarget=editor.container
mouseTarget.draggable=!0}this.setState("dragWait")}else this.startDrag()
this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(DragdropHandler.prototype),
exports.DragdropHandler=DragdropHandler})


define("ace/mouse/mouse_handler",[],function(require,exports,module){"use strict"
var event=require("../lib/event"),useragent=require("../lib/useragent"),DefaultHandlers=require("./default_handlers").DefaultHandlers,DefaultGutterHandler=require("./default_gutter_handler").GutterHandler,MouseEvent=require("./mouse_event").MouseEvent,DragdropHandler=require("./dragdrop_handler").DragdropHandler,config=require("../config"),MouseHandler=function(editor){
var _self=this
this.editor=editor,new DefaultHandlers(this),new DefaultGutterHandler(this),new DragdropHandler(this)


var focusEditor=function(e){var windowBlurred=!document.hasFocus||!document.hasFocus()||!editor.isFocused()&&document.activeElement==(editor.textInput&&editor.textInput.getElement())


windowBlurred&&window.focus(),editor.focus()},mouseTarget=editor.renderer.getMouseEventTarget()
event.addListener(mouseTarget,"click",this.onMouseEvent.bind(this,"click")),event.addListener(mouseTarget,"mousemove",this.onMouseMove.bind(this,"mousemove")),
event.addMultiMouseDownListener([mouseTarget,editor.renderer.scrollBarV&&editor.renderer.scrollBarV.inner,editor.renderer.scrollBarH&&editor.renderer.scrollBarH.inner,editor.textInput&&editor.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent"),
event.addMouseWheelListener(editor.container,this.onMouseWheel.bind(this,"mousewheel")),event.addTouchMoveListener(editor.container,this.onTouchMove.bind(this,"touchmove"))


var gutterEl=editor.renderer.$gutter
event.addListener(gutterEl,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),event.addListener(gutterEl,"click",this.onMouseEvent.bind(this,"gutterclick")),
event.addListener(gutterEl,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),event.addListener(gutterEl,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),
event.addListener(mouseTarget,"mousedown",focusEditor),event.addListener(gutterEl,"mousedown",focusEditor),
useragent.isIE&&editor.renderer.scrollBarV&&(event.addListener(editor.renderer.scrollBarV.element,"mousedown",focusEditor),
event.addListener(editor.renderer.scrollBarH.element,"mousedown",focusEditor)),editor.on("mousemove",function(e){
if(!_self.state&&!_self.$dragDelay&&_self.$dragEnabled){var character=editor.renderer.screenToTextCoordinates(e.x,e.y),range=editor.session.selection.getRange(),renderer=editor.renderer


!range.isEmpty()&&range.insideStart(character.row,character.column)?renderer.setCursorStyle("default"):renderer.setCursorStyle("")

}})};(function(){this.onMouseEvent=function(name,e){this.editor._emit(name,new MouseEvent(e,this.editor))

},this.onMouseMove=function(name,e){var listeners=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove


listeners&&listeners.length&&this.editor._emit(name,new MouseEvent(e,this.editor))},this.onMouseWheel=function(name,e){
var mouseEvent=new MouseEvent(e,this.editor)
mouseEvent.speed=2*this.$scrollSpeed,mouseEvent.wheelX=e.wheelX,mouseEvent.wheelY=e.wheelY,this.editor._emit(name,mouseEvent)

},this.onTouchMove=function(name,e){var mouseEvent=new MouseEvent(e,this.editor)
mouseEvent.speed=1,mouseEvent.wheelX=e.wheelX,mouseEvent.wheelY=e.wheelY,this.editor._emit(name,mouseEvent)

},this.setState=function(state){this.state=state},this.captureMouse=function(ev,mouseMoveHandler){this.x=ev.x,
this.y=ev.y,this.isMousePressed=!0
var renderer=this.editor.renderer
renderer.$keepTextAreaAtCursor&&(renderer.$keepTextAreaAtCursor=null)
var self=this,onMouseMove=function(e){if(e){if(useragent.isWebKit&&!e.which&&self.releaseMouse)return self.releaseMouse()


self.x=e.clientX,self.y=e.clientY,mouseMoveHandler&&mouseMoveHandler(e),self.mouseEvent=new MouseEvent(e,self.editor),
self.$mouseMoved=!0}},onCaptureEnd=function(e){clearInterval(timerId),onCaptureInterval(),self[self.state+"End"]&&self[self.state+"End"](e),
self.state="",null==renderer.$keepTextAreaAtCursor&&(renderer.$keepTextAreaAtCursor=!0,renderer.$moveTextAreaToCursor()),
self.isMousePressed=!1,self.$onCaptureMouseMove=self.releaseMouse=null,e&&self.onMouseEvent("mouseup",e)

},onCaptureInterval=function(){self[self.state]&&self[self.state](),self.$mouseMoved=!1}
if(useragent.isOldIE&&"dblclick"==ev.domEvent.type)return setTimeout(function(){onCaptureEnd(ev)})
self.$onCaptureMouseMove=onMouseMove,self.releaseMouse=event.capture(this.editor.container,onMouseMove,onCaptureEnd)


var timerId=setInterval(onCaptureInterval,20)},this.releaseMouse=null,this.cancelContextMenu=function(){
var stop=function(e){e&&e.domEvent&&"contextmenu"!=e.domEvent.type||(this.editor.off("nativecontextmenu",stop),
e&&e.domEvent&&event.stopEvent(e.domEvent))}.bind(this)
setTimeout(stop,10),this.editor.on("nativecontextmenu",stop)}}).call(MouseHandler.prototype),config.defineOptions(MouseHandler.prototype,"mouseHandler",{
scrollSpeed:{initialValue:2},dragDelay:{initialValue:150},dragEnabled:{initialValue:!0},focusTimout:{
initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),exports.MouseHandler=MouseHandler})


define("ace/mouse/fold_handler",[],function(require,exports,module){"use strict"
function FoldHandler(editor){editor.on("click",function(e){var position=e.getDocumentPosition(),session=editor.session,fold=session.getFoldAt(position.row,position.column,1)


fold&&(e.getAccelKey()?session.removeFold(fold):session.expandFold(fold),e.stop())}),editor.on("gutterclick",function(e){
var gutterRegion=editor.renderer.$gutterLayer.getRegion(e)
if("foldWidgets"==gutterRegion){var row=e.getDocumentPosition().row,session=editor.session
session.foldWidgets&&session.foldWidgets[row]&&editor.session.onFoldWidgetClick(row,e),editor.isFocused()||editor.focus(),
e.stop()}}),editor.on("gutterdblclick",function(e){var gutterRegion=editor.renderer.$gutterLayer.getRegion(e)


if("foldWidgets"==gutterRegion){var row=e.getDocumentPosition().row,session=editor.session,data=session.getParentFoldRangeData(row,!0),range=data.range||data.firstRange


if(range){row=range.start.row
var fold=session.getFoldAt(row,session.getLine(row).length,1)
fold?session.removeFold(fold):(session.addFold("...",range),editor.renderer.scrollCursorIntoView({row:range.start.row,
column:0}))}e.stop()}})}exports.FoldHandler=FoldHandler})


define("ace/selection",[],function(require,exports,module){"use strict"
var oop=require("./lib/oop"),lang=require("./lib/lang"),EventEmitter=require("./lib/event_emitter").EventEmitter,Range=require("./range").Range,Selection=function(session){
this.session=session,this.doc=session.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),
this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0)
var self=this
this.lead.on("change",function(e){self._emit("changeCursor"),self.$isEmpty||self._emit("changeSelection"),
self.$keepDesiredColumnOnChange||e.old.column==e.value.column||(self.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){
self.$isEmpty||self._emit("changeSelection")})};(function(){oop.implement(this,EventEmitter),this.isEmpty=function(){
return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){
return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()

},this.setSelectionAnchor=function(row,column){this.anchor.setPosition(row,column),this.$isEmpty&&(this.$isEmpty=!1,
this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()

},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(columns){
if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+columns)
var anchor=this.getSelectionAnchor(),lead=this.getSelectionLead(),isBackwards=this.isBackwards()
isBackwards&&0===anchor.column||this.setSelectionAnchor(anchor.row,anchor.column+columns),(isBackwards||0!==lead.column)&&this.$moveSelection(function(){
this.moveCursorTo(lead.row,lead.column+columns)})},this.isBackwards=function(){var anchor=this.anchor,lead=this.lead


return anchor.row>lead.row||anchor.row==lead.row&&anchor.column>lead.column},this.getRange=function(){
var anchor=this.anchor,lead=this.lead
return this.isEmpty()?Range.fromPoints(lead,lead):this.isBackwards()?Range.fromPoints(lead,anchor):Range.fromPoints(anchor,lead)

},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){
var lastRow=this.doc.getLength()-1
this.setSelectionAnchor(0,0),this.moveCursorTo(lastRow,this.doc.getLine(lastRow).length)},this.setRange=this.setSelectionRange=function(range,reverse){
reverse?(this.setSelectionAnchor(range.end.row,range.end.column),this.selectTo(range.start.row,range.start.column)):(this.setSelectionAnchor(range.start.row,range.start.column),
this.selectTo(range.end.row,range.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null

},this.$moveSelection=function(mover){var lead=this.lead
this.$isEmpty&&this.setSelectionAnchor(lead.row,lead.column),mover.call(this)},this.selectTo=function(row,column){
this.$moveSelection(function(){this.moveCursorTo(row,column)})},this.selectToPosition=function(pos){this.$moveSelection(function(){
this.moveCursorToPosition(pos)})},this.moveTo=function(row,column){this.clearSelection(),this.moveCursorTo(row,column)

},this.moveToPosition=function(pos){this.clearSelection(),this.moveCursorToPosition(pos)},this.selectUp=function(){
this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)

},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)

},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){
this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)

},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){
this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)

},this.getWordRange=function(row,column){if("undefined"==typeof column){var cursor=row||this.lead
row=cursor.row,column=cursor.column}return this.session.getWordRange(row,column)},this.selectWord=function(){
this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var cursor=this.getCursor(),range=this.session.getAWordRange(cursor.row,cursor.column)


this.setSelectionRange(range)},this.getLineRange=function(row,excludeLastChar){var rowEnd,rowStart="number"==typeof row?row:this.lead.row,foldLine=this.session.getFoldLine(rowStart)


return foldLine?(rowStart=foldLine.start.row,rowEnd=foldLine.end.row):rowEnd=rowStart,excludeLastChar===!0?new Range(rowStart,0,rowEnd,this.session.getLine(rowEnd).length):new Range(rowStart,0,rowEnd+1,0)

},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){
this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(cursor,tabSize,direction){
var start=cursor.column,end=cursor.column+tabSize
return direction<0&&(start=cursor.column-tabSize,end=cursor.column),this.session.isTabStop(cursor)&&this.doc.getLine(cursor.row).slice(start,end).split(" ").length-1==tabSize

},this.moveCursorLeft=function(){var fold,cursor=this.lead.getPosition()
if(fold=this.session.getFoldAt(cursor.row,cursor.column,-1))this.moveCursorTo(fold.start.row,fold.start.column)
else if(0===cursor.column)cursor.row>0&&this.moveCursorTo(cursor.row-1,this.doc.getLine(cursor.row-1).length)
else{var tabSize=this.session.getTabSize()
this.wouldMoveIntoSoftTab(cursor,tabSize,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-tabSize):this.moveCursorBy(0,-1)

}},this.moveCursorRight=function(){var fold,cursor=this.lead.getPosition()
if(fold=this.session.getFoldAt(cursor.row,cursor.column,1))this.moveCursorTo(fold.end.row,fold.end.column)
else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0)
else{var tabSize=this.session.getTabSize(),cursor=this.lead
this.wouldMoveIntoSoftTab(cursor,tabSize,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,tabSize):this.moveCursorBy(0,1)

}},this.moveCursorLineStart=function(){var row=this.lead.row,column=this.lead.column,screenRow=this.session.documentToScreenRow(row,column),firstColumnPosition=this.session.screenToDocumentPosition(screenRow,0),beforeCursor=this.session.getDisplayLine(row,null,firstColumnPosition.row,firstColumnPosition.column),leadingSpace=beforeCursor.match(/^\s*/)


leadingSpace[0].length==column||this.session.$useEmacsStyleLineStart||(firstColumnPosition.column+=leadingSpace[0].length),
this.moveCursorToPosition(firstColumnPosition)},this.moveCursorLineEnd=function(){var lead=this.lead,lineEnd=this.session.getDocumentLastRowColumnPosition(lead.row,lead.column)


if(this.lead.column==lineEnd.column){var line=this.session.getLine(lineEnd.row)
if(lineEnd.column==line.length){var textEnd=line.search(/\s+$/)
textEnd>0&&(lineEnd.column=textEnd)}}this.moveCursorTo(lineEnd.row,lineEnd.column)},this.moveCursorFileEnd=function(){
var row=this.doc.getLength()-1,column=this.doc.getLine(row).length
this.moveCursorTo(row,column)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){
var match,row=this.lead.row,column=this.lead.column,line=this.doc.getLine(row),rightOfCursor=line.substring(column)


this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0
var fold=this.session.getFoldAt(row,column,1)
return fold?void this.moveCursorTo(fold.end.row,fold.end.column):((match=this.session.nonTokenRe.exec(rightOfCursor))&&(column+=this.session.nonTokenRe.lastIndex,
this.session.nonTokenRe.lastIndex=0,rightOfCursor=line.substring(column)),column>=line.length?(this.moveCursorTo(row,line.length),
this.moveCursorRight(),void(row<this.doc.getLength()-1&&this.moveCursorWordRight())):((match=this.session.tokenRe.exec(rightOfCursor))&&(column+=this.session.tokenRe.lastIndex,
this.session.tokenRe.lastIndex=0),void this.moveCursorTo(row,column)))},this.moveCursorLongWordLeft=function(){
var fold,row=this.lead.row,column=this.lead.column
if(fold=this.session.getFoldAt(row,column,-1))return void this.moveCursorTo(fold.start.row,fold.start.column)


var str=this.session.getFoldStringAt(row,column,-1)
null==str&&(str=this.doc.getLine(row).substring(0,column))
var match,leftOfCursor=lang.stringReverse(str)
return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(match=this.session.nonTokenRe.exec(leftOfCursor))&&(column-=this.session.nonTokenRe.lastIndex,
leftOfCursor=leftOfCursor.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),
column<=0?(this.moveCursorTo(row,0),this.moveCursorLeft(),void(row>0&&this.moveCursorWordLeft())):((match=this.session.tokenRe.exec(leftOfCursor))&&(column-=this.session.tokenRe.lastIndex,
this.session.tokenRe.lastIndex=0),void this.moveCursorTo(row,column))},this.$shortWordEndIndex=function(rightOfCursor){
var match,ch,index=0,whitespaceRe=/\s/,tokenRe=this.session.tokenRe
if(tokenRe.lastIndex=0,match=this.session.tokenRe.exec(rightOfCursor))index=this.session.tokenRe.lastIndex
else{for(;(ch=rightOfCursor[index])&&whitespaceRe.test(ch);)index++
if(index<1)for(tokenRe.lastIndex=0;(ch=rightOfCursor[index])&&!tokenRe.test(ch);)if(tokenRe.lastIndex=0,
index++,whitespaceRe.test(ch)){if(index>2){index--
break}for(;(ch=rightOfCursor[index])&&whitespaceRe.test(ch);)index++
if(index>2)break}}return tokenRe.lastIndex=0,index},this.moveCursorShortWordRight=function(){var row=this.lead.row,column=this.lead.column,line=this.doc.getLine(row),rightOfCursor=line.substring(column),fold=this.session.getFoldAt(row,column,1)


if(fold)return this.moveCursorTo(fold.end.row,fold.end.column)
if(column==line.length){var l=this.doc.getLength()
do row++,rightOfCursor=this.doc.getLine(row)
while(row<l&&/^\s*$/.test(rightOfCursor));/^\s+/.test(rightOfCursor)||(rightOfCursor=""),column=0}var index=this.$shortWordEndIndex(rightOfCursor)


this.moveCursorTo(row,column+index)},this.moveCursorShortWordLeft=function(){var fold,row=this.lead.row,column=this.lead.column


if(fold=this.session.getFoldAt(row,column,-1))return this.moveCursorTo(fold.start.row,fold.start.column)


var line=this.session.getLine(row).substring(0,column)
if(0===column){do row--,line=this.doc.getLine(row)
while(row>0&&/^\s*$/.test(line))
column=line.length,/\s+$/.test(line)||(line="")}var leftOfCursor=lang.stringReverse(line),index=this.$shortWordEndIndex(leftOfCursor)


return this.moveCursorTo(row,column-index)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()

},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()

},this.moveCursorBy=function(rows,chars){var screenPos=this.session.documentToScreenPosition(this.lead.row,this.lead.column)


0===chars&&(this.$desiredColumn?screenPos.column=this.$desiredColumn:this.$desiredColumn=screenPos.column)


var docPos=this.session.screenToDocumentPosition(screenPos.row+rows,screenPos.column)
0!==rows&&0===chars&&docPos.row===this.lead.row&&docPos.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[docPos.row]&&(docPos.row>0||rows>0)&&docPos.row++,
this.moveCursorTo(docPos.row,docPos.column+chars,0===chars)},this.moveCursorToPosition=function(position){
this.moveCursorTo(position.row,position.column)},this.moveCursorTo=function(row,column,keepDesiredColumn){
var fold=this.session.getFoldAt(row,column,1)
fold&&(row=fold.start.row,column=fold.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(row,column),
this.$keepDesiredColumnOnChange=!1,keepDesiredColumn||(this.$desiredColumn=null)},this.moveCursorToScreen=function(row,column,keepDesiredColumn){
var pos=this.session.screenToDocumentPosition(row,column)
this.moveCursorTo(pos.row,pos.column,keepDesiredColumn)},this.detach=function(){this.lead.detach(),this.anchor.detach(),
this.session=this.doc=null},this.fromOrientedRange=function(range){this.setSelectionRange(range,range.cursor==range.start),
this.$desiredColumn=range.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(range){var r=this.getRange()


return range?(range.start.column=r.start.column,range.start.row=r.start.row,range.end.column=r.end.column,
range.end.row=r.end.row):range=r,range.cursor=this.isBackwards()?range.start:range.end,range.desiredColumn=this.$desiredColumn,
range},this.getRangeOfMovements=function(func){var start=this.getCursor()
try{func(this)
var end=this.getCursor()
return Range.fromPoints(start,end)}catch(e){return Range.fromPoints(start,start)}finally{this.moveCursorToPosition(start)

}},this.toJSON=function(){if(this.rangeCount)var data=this.ranges.map(function(r){var r1=r.clone()
return r1.isBackwards=r.cursor==r.start,r1})
else{var data=this.getRange()
data.isBackwards=this.isBackwards()}return data},this.fromJSON=function(data){if(void 0==data.start){
if(this.rangeList){this.toSingleRange(data[0])
for(var i=data.length;i--;){var r=Range.fromPoints(data[i].start,data[i].end)
data[i].isBackwards&&(r.cursor=r.start),this.addRange(r,!0)}return}data=data[0]}this.rangeList&&this.toSingleRange(data),
this.setSelectionRange(data,data.isBackwards)},this.isEqual=function(data){if((data.length||this.rangeCount)&&data.length!=this.rangeCount)return!1


if(!data.length||!this.ranges)return this.getRange().isEqual(data)
for(var i=this.ranges.length;i--;)if(!this.ranges[i].isEqual(data[i]))return!1
return!0}}).call(Selection.prototype),exports.Selection=Selection})


define("ace/tokenizer",[],function(require,exports,module){"use strict"
var config=require("./config"),MAX_TOKEN_COUNT=2e3,Tokenizer=function(rules){this.states=rules,this.regExps={},
this.matchMappings={}
for(var key in this.states){for(var state=this.states[key],ruleRegExps=[],matchTotal=0,mapping=this.matchMappings[key]={
defaultToken:"text"},flag="g",splitterRurles=[],i=0;i<state.length;i++){var rule=state[i]
if(rule.defaultToken&&(mapping.defaultToken=rule.defaultToken),rule.caseInsensitive&&(flag="gi"),null!=rule.regex){
rule.regex instanceof RegExp&&(rule.regex=rule.regex.toString().slice(1,-1))
var adjustedregex=rule.regex,matchcount=new RegExp("(?:("+adjustedregex+")|(.))").exec("a").length-2
Array.isArray(rule.token)?1==rule.token.length||1==matchcount?rule.token=rule.token[0]:matchcount-1!=rule.token.length?(this.reportError("number of classes and regexp groups doesn't match",{
rule:rule,groupCount:matchcount-1}),rule.token=rule.token[0]):(rule.tokenArray=rule.token,rule.token=null,
rule.onMatch=this.$arrayTokens):"function"!=typeof rule.token||rule.onMatch||(matchcount>1?rule.onMatch=this.$applyToken:rule.onMatch=rule.token),
matchcount>1&&(/\\\d/.test(rule.regex)?adjustedregex=rule.regex.replace(/\\([0-9]+)/g,function(match,digit){
return"\\"+(parseInt(digit,10)+matchTotal+1)}):(matchcount=1,adjustedregex=this.removeCapturingGroups(rule.regex)),
rule.splitRegex||"string"==typeof rule.token||splitterRurles.push(rule)),mapping[matchTotal]=i,matchTotal+=matchcount,
ruleRegExps.push(adjustedregex),rule.onMatch||(rule.onMatch=null)}}ruleRegExps.length||(mapping[0]=0,
ruleRegExps.push("$")),splitterRurles.forEach(function(rule){rule.splitRegex=this.createSplitterRegexp(rule.regex,flag)

},this),this.regExps[key]=new RegExp("("+ruleRegExps.join(")|(")+")|($)",flag)}};(function(){this.$setMaxTokenCount=function(m){
MAX_TOKEN_COUNT=0|m},this.$applyToken=function(str){var values=this.splitRegex.exec(str).slice(1),types=this.token.apply(this,values)


if("string"==typeof types)return[{type:types,value:str}]
for(var tokens=[],i=0,l=types.length;i<l;i++)values[i]&&(tokens[tokens.length]={type:types[i],value:values[i]
})
return tokens},this.$arrayTokens=function(str){if(!str)return[]
var values=this.splitRegex.exec(str)
if(!values)return"text"
for(var tokens=[],types=this.tokenArray,i=0,l=types.length;i<l;i++)values[i+1]&&(tokens[tokens.length]={
type:types[i],value:values[i+1]})
return tokens},this.removeCapturingGroups=function(src){var r=src.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(x,y){
return y?"(?:":x})
return r},this.createSplitterRegexp=function(src,flag){if(src.indexOf("(?=")!=-1){var stack=0,inChClass=!1,lastCapture={}


src.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(m,esc,parenOpen,parenClose,square,index){
return inChClass?inChClass="]"!=square:square?inChClass=!0:parenClose?(stack==lastCapture.stack&&(lastCapture.end=index+1,
lastCapture.stack=-1),stack--):parenOpen&&(stack++,1!=parenOpen.length&&(lastCapture.stack=stack,lastCapture.start=index)),
m}),null!=lastCapture.end&&/^\)*$/.test(src.substr(lastCapture.end))&&(src=src.substring(0,lastCapture.start)+src.substr(lastCapture.end))

}return"^"!=src.charAt(0)&&(src="^"+src),"$"!=src.charAt(src.length-1)&&(src+="$"),new RegExp(src,(flag||"").replace("g",""))

},this.getLineTokens=function(line,startState){if(startState&&"string"!=typeof startState){var stack=startState.slice(0)


startState=stack[0],"#tmp"===startState&&(stack.shift(),startState=stack.shift())}else var stack=[]
var currentState=startState||"start",state=this.states[currentState]
state||(currentState="start",state=this.states[currentState])
var mapping=this.matchMappings[currentState],re=this.regExps[currentState]
re.lastIndex=0
for(var match,tokens=[],lastIndex=0,matchAttempts=0,token={type:null,value:""};match=re.exec(line);){
var type=mapping.defaultToken,rule=null,value=match[0],index=re.lastIndex
if(index-value.length>lastIndex){var skipped=line.substring(lastIndex,index-value.length)
token.type==type?token.value+=skipped:(token.type&&tokens.push(token),token={type:type,value:skipped})

}for(var i=0;i<match.length-2;i++)if(void 0!==match[i+1]){rule=state[mapping[i]],type=rule.onMatch?rule.onMatch(value,currentState,stack,line):rule.token,
rule.next&&(currentState="string"==typeof rule.next?rule.next:rule.next(currentState,stack),state=this.states[currentState],
state||(this.reportError("state doesn't exist",currentState),currentState="start",state=this.states[currentState]),
mapping=this.matchMappings[currentState],lastIndex=index,re=this.regExps[currentState],re.lastIndex=index),
rule.consumeLineEnd&&(lastIndex=index)
break}if(value)if("string"==typeof type)rule&&rule.merge===!1||token.type!==type?(token.type&&tokens.push(token),
token={type:type,value:value}):token.value+=value
else if(type){token.type&&tokens.push(token),token={type:null,value:""}
for(var i=0;i<type.length;i++)tokens.push(type[i])}if(lastIndex==line.length)break
if(lastIndex=index,matchAttempts++>MAX_TOKEN_COUNT){for(matchAttempts>2*line.length&&this.reportError("infinite loop with in ace tokenizer",{
startState:startState,line:line});lastIndex<line.length;)token.type&&tokens.push(token),token={value:line.substring(lastIndex,lastIndex+=2e3),
type:"overflow"}
currentState="start",stack=[]
break}}return token.type&&tokens.push(token),stack.length>1&&stack[0]!==currentState&&stack.unshift("#tmp",currentState),
{tokens:tokens,state:stack.length?stack:currentState}},this.reportError=config.reportError}).call(Tokenizer.prototype),
exports.Tokenizer=Tokenizer})


define("ace/mode/text_highlight_rules",[],function(require,exports,module){"use strict"
var lang=require("../lib/lang"),TextHighlightRules=function(){this.$rules={start:[{token:"empty_line",
regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(rules,prefix){if(prefix)for(var key in rules){
for(var state=rules[key],i=0;i<state.length;i++){var rule=state[i];(rule.next||rule.onMatch)&&("string"==typeof rule.next&&0!==rule.next.indexOf(prefix)&&(rule.next=prefix+rule.next),
rule.nextState&&0!==rule.nextState.indexOf(prefix)&&(rule.nextState=prefix+rule.nextState))}this.$rules[prefix+key]=state

}else for(var key in rules)this.$rules[key]=rules[key]},this.getRules=function(){return this.$rules},
this.embedRules=function(HighlightRules,prefix,escapeRules,states,append){var embedRules="function"==typeof HighlightRules?(new HighlightRules).getRules():HighlightRules


if(states)for(var i=0;i<states.length;i++)states[i]=prefix+states[i]
else{states=[]
for(var key in embedRules)states.push(prefix+key)}if(this.addRules(embedRules,prefix),escapeRules)for(var addRules=Array.prototype[append?"push":"unshift"],i=0;i<states.length;i++)addRules.apply(this.$rules[states[i]],lang.deepCopy(escapeRules))


this.$embeds||(this.$embeds=[]),this.$embeds.push(prefix)},this.getEmbeds=function(){return this.$embeds

}
var pushState=function(currentState,stack){return("start"!=currentState||stack.length)&&stack.unshift(this.nextState,currentState),
this.nextState},popState=function(currentState,stack){return stack.shift(),stack.shift()||"start"}
this.normalizeRules=function(){function processState(key){var state=rules[key]
state.processed=!0
for(var i=0;i<state.length;i++){var rule=state[i],toInsert=null
Array.isArray(rule)&&(toInsert=rule,rule={}),!rule.regex&&rule.start&&(rule.regex=rule.start,rule.next||(rule.next=[]),
rule.next.push({defaultToken:rule.token},{token:rule.token+".end",regex:rule.end||rule.start,next:"pop"
}),rule.token=rule.token+".start",rule.push=!0)
var next=rule.next||rule.push
if(next&&Array.isArray(next)){var stateName=rule.stateName
stateName||(stateName=rule.token,"string"!=typeof stateName&&(stateName=stateName[0]||""),rules[stateName]&&(stateName+=id++)),
rules[stateName]=next,rule.next=stateName,processState(stateName)}else"pop"==next&&(rule.next=popState)


if(rule.push&&(rule.nextState=rule.next||rule.push,rule.next=pushState,delete rule.push),rule.rules)for(var r in rule.rules)rules[r]?rules[r].push&&rules[r].push.apply(rules[r],rule.rules[r]):rules[r]=rule.rules[r]


var includeName="string"==typeof rule?rule:rule.include
if(includeName&&(toInsert=Array.isArray(includeName)?includeName.map(function(x){return rules[x]}):rules[includeName]),
toInsert){var args=[i,1].concat(toInsert)
rule.noEscape&&(args=args.filter(function(x){return!x.next})),state.splice.apply(state,args),i--}rule.keywordMap&&(rule.token=this.createKeywordMapper(rule.keywordMap,rule.defaultToken||"text",rule.caseInsensitive),
delete rule.defaultToken)}}var id=0,rules=this.$rules
Object.keys(rules).forEach(processState,this)},this.createKeywordMapper=function(map,defaultToken,ignoreCase,splitChar){
var keywords=Object.create(null)
return Object.keys(map).forEach(function(className){var a=map[className]
ignoreCase&&(a=a.toLowerCase())
for(var list=a.split(splitChar||"|"),i=list.length;i--;)keywords[list[i]]=className}),Object.getPrototypeOf(keywords)&&(keywords.__proto__=null),
this.$keywordList=Object.keys(keywords),map=null,ignoreCase?function(value){return keywords[value.toLowerCase()]||defaultToken

}:function(value){return keywords[value]||defaultToken}},this.getKeywords=function(){return this.$keywords

}}).call(TextHighlightRules.prototype),exports.TextHighlightRules=TextHighlightRules})


define("ace/mode/behaviour",[],function(require,exports,module){"use strict"
var Behaviour=function(){this.$behaviours={}};(function(){this.add=function(name,action,callback){switch(void 0){
case this.$behaviours:this.$behaviours={}
case this.$behaviours[name]:this.$behaviours[name]={}}this.$behaviours[name][action]=callback},this.addBehaviours=function(behaviours){
for(var key in behaviours)for(var action in behaviours[key])this.add(key,action,behaviours[key][action])

},this.remove=function(name){this.$behaviours&&this.$behaviours[name]&&delete this.$behaviours[name]},
this.inherit=function(mode,filter){if("function"==typeof mode)var behaviours=(new mode).getBehaviours(filter)
else var behaviours=mode.getBehaviours(filter)
this.addBehaviours(behaviours)},this.getBehaviours=function(filter){if(filter){for(var ret={},i=0;i<filter.length;i++)this.$behaviours[filter[i]]&&(ret[filter[i]]=this.$behaviours[filter[i]])


return ret}return this.$behaviours}}).call(Behaviour.prototype),exports.Behaviour=Behaviour})


define("ace/token_iterator",[],function(require,exports,module){"use strict"
var TokenIterator=function(session,initialRow,initialColumn){this.$session=session,this.$row=initialRow,
this.$rowTokens=session.getTokens(initialRow)
var token=session.getTokenAt(initialRow,initialColumn)
this.$tokenIndex=token?token.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){
if(this.$row-=1,this.$row<0)return this.$row=0,null
this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]

},this.stepForward=function(){this.$tokenIndex+=1
for(var rowCount;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,rowCount||(rowCount=this.$session.getLength()),
this.$row>=rowCount)return this.$row=rowCount-1,null
this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]

},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){
return this.$row},this.getCurrentTokenColumn=function(){var rowTokens=this.$rowTokens,tokenIndex=this.$tokenIndex,column=rowTokens[tokenIndex].start


if(void 0!==column)return column
for(column=0;tokenIndex>0;)tokenIndex-=1,column+=rowTokens[tokenIndex].value.length
return column},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()
}}}).call(TokenIterator.prototype),exports.TokenIterator=TokenIterator})


define("ace/mode/behaviour/cstyle",[],function(require,exports,module){"use strict"
var context,oop=require("../../lib/oop"),Behaviour=require("../behaviour").Behaviour,TokenIterator=require("../../token_iterator").TokenIterator,lang=require("../../lib/lang"),SAFE_INSERT_IN_TOKENS=["text","paren.rparen","punctuation.operator"],SAFE_INSERT_BEFORE_TOKENS=["text","paren.rparen","punctuation.operator","comment"],contextCache={},defaultQuotes={
'"':'"',"'":"'"},initContext=function(editor){var id=-1
return editor.multiSelect&&(id=editor.selection.index,contextCache.rangeCount!=editor.multiSelect.rangeCount&&(contextCache={
rangeCount:editor.multiSelect.rangeCount})),contextCache[id]?context=contextCache[id]:void(context=contextCache[id]={
autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,
maybeInsertedLineStart:"",maybeInsertedLineEnd:""})},getWrapped=function(selection,selected,opening,closing){
var rowDiff=selection.end.row-selection.start.row
return{text:opening+selected+closing,selection:[0,selection.start.column+1,rowDiff,selection.end.column+(rowDiff?0:1)]
}},CstyleBehaviour=function(options){this.add("braces","insertion",function(state,action,editor,session,text){
var cursor=editor.getCursorPosition(),line=session.doc.getLine(cursor.row)
if("{"==text){initContext(editor)
var selection=editor.getSelectionRange(),selected=session.doc.getTextRange(selection)
if(""!==selected&&"{"!==selected&&editor.getWrapBehavioursEnabled())return getWrapped(selection,selected,"{","}")


if(CstyleBehaviour.isSaneInsertion(editor,session))return/[\]\}\)]/.test(line[cursor.column])||editor.inMultiSelectMode||options&&options.braces?(CstyleBehaviour.recordAutoInsert(editor,session,"}"),
{text:"{}",selection:[1,1]}):(CstyleBehaviour.recordMaybeInsert(editor,session,"{"),{text:"{",selection:[1,1]
})}else if("}"==text){initContext(editor)
var rightChar=line.substring(cursor.column,cursor.column+1)
if("}"==rightChar){var matching=session.$findOpeningBracket("}",{column:cursor.column+1,row:cursor.row
})
if(null!==matching&&CstyleBehaviour.isAutoInsertedClosing(cursor,line,text))return CstyleBehaviour.popAutoInsertedClosing(),
{text:"",selection:[1,1]}}}else{if("\n"==text||"\r\n"==text){initContext(editor)
var closing=""
CstyleBehaviour.isMaybeInsertedClosing(cursor,line)&&(closing=lang.stringRepeat("}",context.maybeInsertedBrackets),
CstyleBehaviour.clearMaybeInsertedClosing())
var rightChar=line.substring(cursor.column,cursor.column+1)
if("}"===rightChar){var openBracePos=session.findMatchingBracket({row:cursor.row,column:cursor.column+1
},"}")
if(!openBracePos)return null
var next_indent=this.$getIndent(session.getLine(openBracePos.row))}else{if(!closing)return void CstyleBehaviour.clearMaybeInsertedClosing()


var next_indent=this.$getIndent(line)}var indent=next_indent+session.getTabString()
return{text:"\n"+indent+"\n"+next_indent+closing,selection:[1,indent.length,1,indent.length]}}CstyleBehaviour.clearMaybeInsertedClosing()

}}),this.add("braces","deletion",function(state,action,editor,session,range){var selected=session.doc.getTextRange(range)


if(!range.isMultiLine()&&"{"==selected){initContext(editor)
var line=session.doc.getLine(range.start.row),rightChar=line.substring(range.end.column,range.end.column+1)


if("}"==rightChar)return range.end.column++,range
context.maybeInsertedBrackets--}}),this.add("parens","insertion",function(state,action,editor,session,text){
if("("==text){initContext(editor)
var selection=editor.getSelectionRange(),selected=session.doc.getTextRange(selection)
if(""!==selected&&editor.getWrapBehavioursEnabled())return getWrapped(selection,selected,"(",")")
if(CstyleBehaviour.isSaneInsertion(editor,session))return CstyleBehaviour.recordAutoInsert(editor,session,")"),
{text:"()",selection:[1,1]}}else if(")"==text){initContext(editor)
var cursor=editor.getCursorPosition(),line=session.doc.getLine(cursor.row),rightChar=line.substring(cursor.column,cursor.column+1)


if(")"==rightChar){var matching=session.$findOpeningBracket(")",{column:cursor.column+1,row:cursor.row
})
if(null!==matching&&CstyleBehaviour.isAutoInsertedClosing(cursor,line,text))return CstyleBehaviour.popAutoInsertedClosing(),
{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(state,action,editor,session,range){
var selected=session.doc.getTextRange(range)
if(!range.isMultiLine()&&"("==selected){initContext(editor)
var line=session.doc.getLine(range.start.row),rightChar=line.substring(range.start.column+1,range.start.column+2)


if(")"==rightChar)return range.end.column++,range}}),this.add("brackets","insertion",function(state,action,editor,session,text){
if("["==text){initContext(editor)
var selection=editor.getSelectionRange(),selected=session.doc.getTextRange(selection)
if(""!==selected&&editor.getWrapBehavioursEnabled())return getWrapped(selection,selected,"[","]")
if(CstyleBehaviour.isSaneInsertion(editor,session))return CstyleBehaviour.recordAutoInsert(editor,session,"]"),
{text:"[]",selection:[1,1]}}else if("]"==text){initContext(editor)
var cursor=editor.getCursorPosition(),line=session.doc.getLine(cursor.row),rightChar=line.substring(cursor.column,cursor.column+1)


if("]"==rightChar){var matching=session.$findOpeningBracket("]",{column:cursor.column+1,row:cursor.row
})
if(null!==matching&&CstyleBehaviour.isAutoInsertedClosing(cursor,line,text))return CstyleBehaviour.popAutoInsertedClosing(),
{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(state,action,editor,session,range){
var selected=session.doc.getTextRange(range)
if(!range.isMultiLine()&&"["==selected){initContext(editor)
var line=session.doc.getLine(range.start.row),rightChar=line.substring(range.start.column+1,range.start.column+2)


if("]"==rightChar)return range.end.column++,range}}),this.add("string_dquotes","insertion",function(state,action,editor,session,text){
var quotes=session.$mode.$quotes||defaultQuotes
if(1==text.length&&quotes[text]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(text)!=-1)return


initContext(editor)
var quote=text,selection=editor.getSelectionRange(),selected=session.doc.getTextRange(selection)
if(!(""===selected||1==selected.length&&quotes[selected])&&editor.getWrapBehavioursEnabled())return getWrapped(selection,selected,quote,quote)


if(!selected){var cursor=editor.getCursorPosition(),line=session.doc.getLine(cursor.row),leftChar=line.substring(cursor.column-1,cursor.column),rightChar=line.substring(cursor.column,cursor.column+1),token=session.getTokenAt(cursor.row,cursor.column),rightToken=session.getTokenAt(cursor.row,cursor.column+1)


if("\\"==leftChar&&token&&/escape/.test(token.type))return null
var pair,stringBefore=token&&/string|escape/.test(token.type),stringAfter=!rightToken||/string|escape/.test(rightToken.type)


if(rightChar==quote)pair=stringBefore!==stringAfter,pair&&/string\.end/.test(rightToken.type)&&(pair=!1)
else{if(stringBefore&&!stringAfter)return null
if(stringBefore&&stringAfter)return null
var wordRe=session.$mode.tokenRe
wordRe.lastIndex=0
var isWordBefore=wordRe.test(leftChar)
wordRe.lastIndex=0
var isWordAfter=wordRe.test(leftChar)
if(isWordBefore||isWordAfter)return null
if(rightChar&&!/[\s;,.})\]\\]/.test(rightChar))return null
pair=!0}return{text:pair?quote+quote:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(state,action,editor,session,range){
var selected=session.doc.getTextRange(range)
if(!range.isMultiLine()&&('"'==selected||"'"==selected)){initContext(editor)
var line=session.doc.getLine(range.start.row),rightChar=line.substring(range.start.column+1,range.start.column+2)


if(rightChar==selected)return range.end.column++,range}})}
CstyleBehaviour.isSaneInsertion=function(editor,session){var cursor=editor.getCursorPosition(),iterator=new TokenIterator(session,cursor.row,cursor.column)


if(!this.$matchTokenType(iterator.getCurrentToken()||"text",SAFE_INSERT_IN_TOKENS)){var iterator2=new TokenIterator(session,cursor.row,cursor.column+1)


if(!this.$matchTokenType(iterator2.getCurrentToken()||"text",SAFE_INSERT_IN_TOKENS))return!1}return iterator.stepForward(),
iterator.getCurrentTokenRow()!==cursor.row||this.$matchTokenType(iterator.getCurrentToken()||"text",SAFE_INSERT_BEFORE_TOKENS)

},CstyleBehaviour.$matchTokenType=function(token,types){return types.indexOf(token.type||token)>-1},CstyleBehaviour.recordAutoInsert=function(editor,session,bracket){
var cursor=editor.getCursorPosition(),line=session.doc.getLine(cursor.row)
this.isAutoInsertedClosing(cursor,line,context.autoInsertedLineEnd[0])||(context.autoInsertedBrackets=0),
context.autoInsertedRow=cursor.row,context.autoInsertedLineEnd=bracket+line.substr(cursor.column),context.autoInsertedBrackets++

},CstyleBehaviour.recordMaybeInsert=function(editor,session,bracket){var cursor=editor.getCursorPosition(),line=session.doc.getLine(cursor.row)


this.isMaybeInsertedClosing(cursor,line)||(context.maybeInsertedBrackets=0),context.maybeInsertedRow=cursor.row,
context.maybeInsertedLineStart=line.substr(0,cursor.column)+bracket,context.maybeInsertedLineEnd=line.substr(cursor.column),
context.maybeInsertedBrackets++},CstyleBehaviour.isAutoInsertedClosing=function(cursor,line,bracket){
return context.autoInsertedBrackets>0&&cursor.row===context.autoInsertedRow&&bracket===context.autoInsertedLineEnd[0]&&line.substr(cursor.column)===context.autoInsertedLineEnd

},CstyleBehaviour.isMaybeInsertedClosing=function(cursor,line){return context.maybeInsertedBrackets>0&&cursor.row===context.maybeInsertedRow&&line.substr(cursor.column)===context.maybeInsertedLineEnd&&line.substr(0,cursor.column)==context.maybeInsertedLineStart

},CstyleBehaviour.popAutoInsertedClosing=function(){context.autoInsertedLineEnd=context.autoInsertedLineEnd.substr(1),
context.autoInsertedBrackets--},CstyleBehaviour.clearMaybeInsertedClosing=function(){context&&(context.maybeInsertedBrackets=0,
context.maybeInsertedRow=-1)},oop.inherits(CstyleBehaviour,Behaviour),exports.CstyleBehaviour=CstyleBehaviour

})


define("ace/unicode",[],function(require,exports,module){"use strict"
function addUnicodePackage(pack){var codePoint=/\w{4}/g
for(var name in pack)exports.packages[name]=pack[name].replace(codePoint,"\\u$&")}exports.packages={},
addUnicodePackage({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",
Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",
Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",
Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",
M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",
Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",
Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",
Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",
Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",
P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",
Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",
Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",
Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",
Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",
S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",
Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",
Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",
So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",
Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",
Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",
Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",
Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"
})})


define("ace/mode/text",[],function(require,exports,module){"use strict"
var Tokenizer=require("../tokenizer").Tokenizer,TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,CstyleBehaviour=require("./behaviour/cstyle").CstyleBehaviour,unicode=require("../unicode"),lang=require("../lib/lang"),TokenIterator=require("../token_iterator").TokenIterator,Range=require("../range").Range,Mode=function(){
this.HighlightRules=TextHighlightRules};(function(){this.$defaultBehaviour=new CstyleBehaviour,this.tokenRe=new RegExp("^["+unicode.packages.L+unicode.packages.Mn+unicode.packages.Mc+unicode.packages.Nd+unicode.packages.Pc+"\\$_]+","g"),
this.nonTokenRe=new RegExp("^(?:[^"+unicode.packages.L+unicode.packages.Mn+unicode.packages.Mc+unicode.packages.Nd+unicode.packages.Pc+"\\$_]|\\s])+","g"),
this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),
this.$tokenizer=new Tokenizer(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",
this.blockComment="",this.toggleCommentLines=function(state,session,startRow,endRow){function iter(fun){
for(var i=startRow;i<=endRow;i++)fun(doc.getLine(i),i)}var doc=session.doc,ignoreBlankLines=!0,shouldRemove=!0,minIndent=1/0,tabSize=session.getTabSize(),insertAtTabStop=!1


if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var regexpStart=this.lineCommentStart.map(lang.escapeRegExp).join("|"),lineCommentStart=this.lineCommentStart[0]
else var regexpStart=lang.escapeRegExp(this.lineCommentStart),lineCommentStart=this.lineCommentStart
regexpStart=new RegExp("^(\\s*)(?:"+regexpStart+") ?"),insertAtTabStop=session.getUseSoftTabs()
var uncomment=function(line,i){var m=line.match(regexpStart)
if(m){var start=m[1].length,end=m[0].length
shouldInsertSpace(line,start,end)||" "!=m[0][end-1]||end--,doc.removeInLine(i,start,end)}},commentWithSpace=lineCommentStart+" ",comment=function(line,i){
ignoreBlankLines&&!/\S/.test(line)||(shouldInsertSpace(line,minIndent,minIndent)?doc.insertInLine({row:i,
column:minIndent},commentWithSpace):doc.insertInLine({row:i,column:minIndent},lineCommentStart))},testRemove=function(line,i){
return regexpStart.test(line)},shouldInsertSpace=function(line,before,after){for(var spaces=0;before--&&" "==line.charAt(before);)spaces++


if(spaces%tabSize!=0)return!1
for(var spaces=0;" "==line.charAt(after++);)spaces++
return tabSize>2?spaces%tabSize!=tabSize-1:spaces%tabSize==0}}else{if(!this.blockComment)return!1
var lineCommentStart=this.blockComment.start,lineCommentEnd=this.blockComment.end,regexpStart=new RegExp("^(\\s*)(?:"+lang.escapeRegExp(lineCommentStart)+")"),regexpEnd=new RegExp("(?:"+lang.escapeRegExp(lineCommentEnd)+")\\s*$"),comment=function(line,i){
testRemove(line,i)||ignoreBlankLines&&!/\S/.test(line)||(doc.insertInLine({row:i,column:line.length},lineCommentEnd),
doc.insertInLine({row:i,column:minIndent},lineCommentStart))},uncomment=function(line,i){var m;(m=line.match(regexpEnd))&&doc.removeInLine(i,line.length-m[0].length,line.length),
(m=line.match(regexpStart))&&doc.removeInLine(i,m[1].length,m[0].length)},testRemove=function(line,row){
if(regexpStart.test(line))return!0
for(var tokens=session.getTokens(row),i=0;i<tokens.length;i++)if("comment"===tokens[i].type)return!0}

}var minEmptyLength=1/0
iter(function(line,i){var indent=line.search(/\S/)
indent!==-1?(indent<minIndent&&(minIndent=indent),shouldRemove&&!testRemove(line,i)&&(shouldRemove=!1)):minEmptyLength>line.length&&(minEmptyLength=line.length)

}),minIndent==1/0&&(minIndent=minEmptyLength,ignoreBlankLines=!1,shouldRemove=!1),insertAtTabStop&&minIndent%tabSize!=0&&(minIndent=Math.floor(minIndent/tabSize)*tabSize),
iter(shouldRemove?uncomment:comment)},this.toggleBlockComment=function(state,session,range,cursor){var comment=this.blockComment


if(comment){!comment.start&&comment[0]&&(comment=comment[0])
var startRow,colDiff,iterator=new TokenIterator(session,cursor.row,cursor.column),token=iterator.getCurrentToken(),initialRange=(session.selection,
session.selection.toOrientedRange())
if(token&&/comment/.test(token.type)){for(var startRange,endRange;token&&/comment/.test(token.type);){
var i=token.value.indexOf(comment.start)
if(i!=-1){var row=iterator.getCurrentTokenRow(),column=iterator.getCurrentTokenColumn()+i
startRange=new Range(row,column,row,column+comment.start.length)
break}token=iterator.stepBackward()}for(var iterator=new TokenIterator(session,cursor.row,cursor.column),token=iterator.getCurrentToken();token&&/comment/.test(token.type);){
var i=token.value.indexOf(comment.end)
if(i!=-1){var row=iterator.getCurrentTokenRow(),column=iterator.getCurrentTokenColumn()+i
endRange=new Range(row,column,row,column+comment.end.length)
break}token=iterator.stepForward()}endRange&&session.remove(endRange),startRange&&(session.remove(startRange),
startRow=startRange.start.row,colDiff=-comment.start.length)}else colDiff=comment.start.length,startRow=range.start.row,
session.insert(range.end,comment.end),session.insert(range.start,comment.start)
initialRange.start.row==startRow&&(initialRange.start.column+=colDiff),initialRange.end.row==startRow&&(initialRange.end.column+=colDiff),
session.selection.fromOrientedRange(initialRange)}},this.getNextLineIndent=function(state,line,tab){return this.$getIndent(line)

},this.checkOutdent=function(state,line,input){return!1},this.autoOutdent=function(state,doc,row){},this.$getIndent=function(line){
return line.match(/^\s*/)[0]},this.createWorker=function(session){return null},this.createModeDelegates=function(mapping){
this.$embeds=[],this.$modes={}
for(var i in mapping)mapping[i]&&(this.$embeds.push(i),this.$modes[i]=new mapping[i])
for(var delegations=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],i=0;i<delegations.length;i++)!function(scope){
var functionName=delegations[i],defaultHandler=scope[functionName]
scope[delegations[i]]=function(){return this.$delegator(functionName,arguments,defaultHandler)}}(this)

},this.$delegator=function(method,args,defaultHandler){var state=args[0]
"string"!=typeof state&&(state=state[0])
for(var i=0;i<this.$embeds.length;i++)if(this.$modes[this.$embeds[i]]){var split=state.split(this.$embeds[i])


if(!split[0]&&split[1]){args[0]=split[1]
var mode=this.$modes[this.$embeds[i]]
return mode[method].apply(mode,args)}}var ret=defaultHandler.apply(this,args)
return defaultHandler?ret:void 0},this.transformAction=function(state,action,editor,session,param){if(this.$behaviour){
var behaviours=this.$behaviour.getBehaviours()
for(var key in behaviours)if(behaviours[key][action]){var ret=behaviours[key][action].apply(this,arguments)


if(ret)return ret}}},this.getKeywords=function(append){if(!this.completionKeywords){var rules=this.$tokenizer.rules,completionKeywords=[]


for(var rule in rules)for(var ruleItr=rules[rule],r=0,l=ruleItr.length;r<l;r++)if("string"==typeof ruleItr[r].token)/keyword|support|storage/.test(ruleItr[r].token)&&completionKeywords.push(ruleItr[r].regex)
else if("object"==typeof ruleItr[r].token)for(var a=0,aLength=ruleItr[r].token.length;a<aLength;a++)if(/keyword|support|storage/.test(ruleItr[r].token[a])){
var rule=ruleItr[r].regex.match(/\(.+?\)/g)[a]
completionKeywords.push(rule.substr(1,rule.length-2))}this.completionKeywords=completionKeywords}return append?completionKeywords.concat(this.$keywordList||[]):this.$keywordList

},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]

},this.getCompletions=function(state,session,pos,prefix){var keywords=this.$keywordList||this.$createKeywordList()


return keywords.map(function(word){return{name:word,value:word,score:0,meta:"keyword"}})},this.$id="ace/mode/text"

}).call(Mode.prototype),exports.Mode=Mode})


define("ace/apply_delta",[],function(require,exports,module){"use strict"
exports.applyDelta=function(docLines,delta,doNotValidate){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||""


switch(delta.action){case"insert":var lines=delta.lines
if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn)
else{var args=[row,1].concat(delta.lines)
docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)

}break
case"remove":var endColumn=delta.end.column,endRow=delta.end.row
row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))

}}})


define("ace/anchor",[],function(require,exports,module){"use strict"
var oop=require("./lib/oop"),EventEmitter=require("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){
this.$onChange=this.onChange.bind(this),this.attach(doc),"undefined"==typeof column?this.setPosition(row.row,row.column):this.setPosition(row,column)

};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column


return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){
var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end


return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{
row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,
column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)

},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){
if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{
row:this.row,column:this.column},this.$insertRight)
this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos
if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){
var old={row:this.row,column:this.column}
this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){
this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,
this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={}


return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):row<0?(pos.row=0,
pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),
column<0&&(pos.column=0),pos}}).call(Anchor.prototype)})


define("ace/document",[],function(require,exports,module){"use strict"
var oop=require("./lib/oop"),applyDelta=require("./apply_delta").applyDelta,EventEmitter=require("./lib/event_emitter").EventEmitter,Range=require("./range").Range,Anchor=require("./anchor").Anchor,Document=function(textOrLines){
this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({
row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),
this.setValue=function(text){var len=this.getLength()-1
this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){
return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)

},0==="aaa".split(/a/).length?this.$split=function(text){return text.replace(/\r\n|\r/g,"\n").split("\n")

}:this.$split=function(text){return text.split(/\r\n|\r|\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\r\n|\r|\n)/m)


this.$autoNewLine=match?match[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){
switch(this.$newLineMode){case"windows":return"\r\n"
case"unix":return"\n"
default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){
this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){
return this.$newLineMode},this.isNewLine=function(text){return"\r\n"==text||"\r"==text||"\n"==text},this.getLine=function(row){
return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)

},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length

},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())

},this.getLinesForRange=function(range){var lines
if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)]
else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column)


var l=lines.length-1
range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){
return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),
this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),
this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),
this.insertMergedLines(position,["",""])},this.insert=function(position,text){return this.getLength()<=1&&this.$detectNewLine(text),
this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length)


return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){
var length=this.getLength()
void 0===row?row=length:row<0?row=0:row>=length&&(row=length-1,column=void 0)
var line=this.getLine(row)
return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,
column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){
return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength()
return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),
position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){
row=Math.min(Math.max(row,0),this.getLength())
var column=0
row<this.getLength()?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),
this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){
var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length
}
return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){
var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column)


return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,
end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn)


return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,
end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),
lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1)
var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=lastRow<this.getLength()-1,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1)


return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)
}),deletedLines},this.removeNewLine=function(row){row<this.getLength()-1&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),
end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),
0===text.length&&range.isEmpty())return range.start
if(text==this.getTextRange(range))return range.end
this.remove(range)
var end
return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;i<deltas.length;i++)this.applyDelta(deltas[i])

},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},
this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?delta.lines.length<=1&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),
applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){
for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){
from=to,to+=MAX-1
var chunk=lines.slice(from,to)
if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column
break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,
lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),
end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()
})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;i<l;i++)if(index-=lines[i].length+newlineLength,
index<0)return{row:i,column:index+lines[i].length+newlineLength}
return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;i<row;++i)index+=lines[i].length+newlineLength


return index+pos.column}}).call(Document.prototype),exports.Document=Document})


define("ace/background_tokenizer",[],function(require,exports,module){"use strict"
var oop=require("./lib/oop"),EventEmitter=require("./lib/event_emitter").EventEmitter,BackgroundTokenizer=function(tokenizer,editor){
this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=tokenizer
var self=this
this.$worker=function(){if(self.running){for(var workerStart=new Date,currentLine=self.currentLine,endLine=-1,doc=self.doc,startLine=currentLine;self.lines[currentLine];)currentLine++


var len=doc.getLength(),processedLines=0
for(self.running=!1;currentLine<len;){self.$tokenizeRow(currentLine),endLine=currentLine
do currentLine++
while(self.lines[currentLine])
if(processedLines++,processedLines%5===0&&new Date-workerStart>20){self.running=setTimeout(self.$worker,20)


break}}self.currentLine=currentLine,endLine==-1&&(endLine=currentLine),startLine<=endLine&&self.fireUpdateEvent(startLine,endLine)

}}};(function(){oop.implement(this,EventEmitter),this.setTokenizer=function(tokenizer){this.tokenizer=tokenizer,
this.lines=[],this.states=[],this.start(0)},this.setDocument=function(doc){this.doc=doc,this.lines=[],
this.states=[],this.stop()},this.fireUpdateEvent=function(firstRow,lastRow){var data={first:firstRow,
last:lastRow}
this._signal("update",{data:data})},this.start=function(startRow){this.currentLine=Math.min(startRow||0,this.currentLine,this.doc.getLength()),
this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),
this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))

},this.$updateOnChange=function(delta){var startRow=delta.start.row,len=delta.end.row-startRow
if(0===len)this.lines[startRow]=null
else if("remove"==delta.action)this.lines.splice(startRow,len+1,null),this.states.splice(startRow,len+1,null)
else{var args=Array(len+1)
args.unshift(startRow,1),this.lines.splice.apply(this.lines,args),this.states.splice.apply(this.states,args)

}this.currentLine=Math.min(startRow,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){
this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(row){return this.lines[row]||this.$tokenizeRow(row)

},this.getState=function(row){return this.currentLine==row&&this.$tokenizeRow(row),this.states[row]||"start"

},this.$tokenizeRow=function(row){var line=this.doc.getLine(row),state=this.states[row-1],data=this.tokenizer.getLineTokens(line,state,row)


return this.states[row]+""!=data.state+""?(this.states[row]=data.state,this.lines[row+1]=null,this.currentLine>row+1&&(this.currentLine=row+1)):this.currentLine==row&&(this.currentLine=row+1),
this.lines[row]=data.tokens}}).call(BackgroundTokenizer.prototype),exports.BackgroundTokenizer=BackgroundTokenizer

})


define("ace/search_highlight",[],function(require,exports,module){"use strict"
var lang=require("./lib/lang"),Range=(require("./lib/oop"),require("./range").Range),SearchHighlight=function(regExp,clazz,type){
this.setRegexp(regExp),this.clazz=clazz,this.type=type||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(regExp){
this.regExp+""!=regExp+""&&(this.regExp=regExp,this.cache=[])},this.update=function(html,markerLayer,session,config){
if(this.regExp)for(var start=config.firstRow,end=config.lastRow,i=start;i<=end;i++){var ranges=this.cache[i]


null==ranges&&(ranges=lang.getMatchOffsets(session.getLine(i),this.regExp),ranges.length>this.MAX_RANGES&&(ranges=ranges.slice(0,this.MAX_RANGES)),
ranges=ranges.map(function(match){return new Range(i,match.offset,i,match.offset+match.length)}),this.cache[i]=ranges.length?ranges:"")


for(var j=ranges.length;j--;)markerLayer.drawSingleLineMarker(html,ranges[j].toScreenRange(session),this.clazz,config)

}}}).call(SearchHighlight.prototype),exports.SearchHighlight=SearchHighlight})


define("ace/edit_session/fold_line",[],function(require,exports,module){"use strict"
function FoldLine(foldData,folds){this.foldData=foldData,Array.isArray(folds)?this.folds=folds:folds=this.folds=[folds]


var last=folds[folds.length-1]
this.range=new Range(folds[0].start.row,folds[0].start.column,last.end.row,last.end.column),this.start=this.range.start,
this.end=this.range.end,this.folds.forEach(function(fold){fold.setFoldLine(this)},this)}var Range=require("../range").Range

;(function(){this.shiftRow=function(shift){this.start.row+=shift,this.end.row+=shift,this.folds.forEach(function(fold){
fold.start.row+=shift,fold.end.row+=shift})},this.addFold=function(fold){if(fold.sameRow){if(fold.start.row<this.startRow||fold.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection")


this.folds.push(fold),this.folds.sort(function(a,b){return-a.range.compareEnd(b.start.row,b.start.column)

}),this.range.compareEnd(fold.start.row,fold.start.column)>0?(this.end.row=fold.end.row,this.end.column=fold.end.column):this.range.compareStart(fold.end.row,fold.end.column)<0&&(this.start.row=fold.start.row,
this.start.column=fold.start.column)}else if(fold.start.row==this.end.row)this.folds.push(fold),this.end.row=fold.end.row,
this.end.column=fold.end.column
else{if(fold.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row")


this.folds.unshift(fold),this.start.row=fold.start.row,this.start.column=fold.start.column}fold.foldLine=this

},this.containsRow=function(row){return row>=this.start.row&&row<=this.end.row},this.walk=function(callback,endRow,endColumn){
var fold,cmp,stop,lastEnd=0,folds=this.folds,isNewRow=!0
null==endRow&&(endRow=this.end.row,endColumn=this.end.column)
for(var i=0;i<folds.length;i++){if(fold=folds[i],cmp=fold.range.compareStart(endRow,endColumn),cmp==-1)return void callback(null,endRow,endColumn,lastEnd,isNewRow)


if(stop=callback(null,fold.start.row,fold.start.column,lastEnd,isNewRow),stop=!stop&&callback(fold.placeholder,fold.start.row,fold.start.column,lastEnd),
stop||0===cmp)return
isNewRow=!fold.sameRow,lastEnd=fold.end.column}callback(null,endRow,endColumn,lastEnd,isNewRow)},this.getNextFoldTo=function(row,column){
for(var fold,cmp,i=0;i<this.folds.length;i++){if(fold=this.folds[i],cmp=fold.range.compareEnd(row,column),
cmp==-1)return{fold:fold,kind:"after"}
if(0===cmp)return{fold:fold,kind:"inside"}}return null},this.addRemoveChars=function(row,column,len){
var fold,folds,ret=this.getNextFoldTo(row,column)
if(ret)if(fold=ret.fold,"inside"==ret.kind&&fold.start.column!=column&&fold.start.row!=row)window.console&&window.console.log(row,column,fold)
else if(fold.start.row==row){folds=this.folds
var i=folds.indexOf(fold)
for(0===i&&(this.start.column+=len),i;i<folds.length;i++){if(fold=folds[i],fold.start.column+=len,!fold.sameRow)return


fold.end.column+=len}this.end.column+=len}},this.split=function(row,column){var pos=this.getNextFoldTo(row,column)


if(!pos||"inside"==pos.kind)return null
var fold=pos.fold,folds=this.folds,foldData=this.foldData,i=folds.indexOf(fold),foldBefore=folds[i-1]


this.end.row=foldBefore.end.row,this.end.column=foldBefore.end.column,folds=folds.splice(i,folds.length-i)


var newFoldLine=new FoldLine(foldData,folds)
return foldData.splice(foldData.indexOf(this)+1,0,newFoldLine),newFoldLine},this.merge=function(foldLineNext){
for(var folds=foldLineNext.folds,i=0;i<folds.length;i++)this.addFold(folds[i])
var foldData=this.foldData
foldData.splice(foldData.indexOf(foldLineNext),1)},this.toString=function(){var ret=[this.range.toString()+": ["]


return this.folds.forEach(function(fold){ret.push("  "+fold.toString())}),ret.push("]"),ret.join("\n")

},this.idxToPosition=function(idx){for(var lastFoldEndColumn=0,i=0;i<this.folds.length;i++){var fold=this.folds[i]


if(idx-=fold.start.column-lastFoldEndColumn,idx<0)return{row:fold.start.row,column:fold.start.column+idx
}
if(idx-=fold.placeholder.length,idx<0)return fold.start
lastFoldEndColumn=fold.end.column}return{row:this.end.row,column:this.end.column+idx}}}).call(FoldLine.prototype),
exports.FoldLine=FoldLine})


define("ace/edit_session/fold",[],function(require,exports,module){"use strict"
function consumePoint(point,anchor){point.row-=anchor.row,0==point.row&&(point.column-=anchor.column)

}function consumeRange(range,anchor){consumePoint(range.start,anchor),consumePoint(range.end,anchor)}
function restorePoint(point,anchor){0==point.row&&(point.column+=anchor.column),point.row+=anchor.row

}function restoreRange(range,anchor){restorePoint(range.start,anchor),restorePoint(range.end,anchor)}
var RangeList=(require("../range").Range,require("../range_list").RangeList),oop=require("../lib/oop"),Fold=exports.Fold=function(range,placeholder){
this.foldLine=null,this.placeholder=placeholder,this.range=range,this.start=range.start,this.end=range.end,
this.sameRow=range.start.row==range.end.row,this.subFolds=this.ranges=[]}
oop.inherits(Fold,RangeList),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()

},this.setFoldLine=function(foldLine){this.foldLine=foldLine,this.subFolds.forEach(function(fold){fold.setFoldLine(foldLine)

})},this.clone=function(){var range=this.range.clone(),fold=new Fold(range,this.placeholder)
return this.subFolds.forEach(function(subFold){fold.subFolds.push(subFold.clone())}),fold.collapseChildren=this.collapseChildren,
fold},this.addSubFold=function(fold){if(!this.range.isEqual(fold)){if(!this.range.containsRange(fold))throw new Error("A fold can't intersect already existing fold"+fold.range+this.range)


consumeRange(fold,this.start)
for(var row=fold.start.row,column=fold.start.column,i=0,cmp=-1;i<this.subFolds.length&&(cmp=this.subFolds[i].range.compare(row,column),
1==cmp);i++);var afterStart=this.subFolds[i]
if(0==cmp)return afterStart.addSubFold(fold)
for(var row=fold.range.end.row,column=fold.range.end.column,j=i,cmp=-1;j<this.subFolds.length&&(cmp=this.subFolds[j].range.compare(row,column),
1==cmp);j++);this.subFolds[j]
if(0==cmp)throw new Error("A fold can't intersect already existing fold"+fold.range+this.range)
this.subFolds.splice(i,j-i,fold)
return fold.setFoldLine(this.foldLine),fold}},this.restoreRange=function(range){return restoreRange(range,this.start)

}}.call(Fold.prototype)})


define("ace/edit_session/folding",[],function(require,exports,module){"use strict"
function Folding(){this.getFoldAt=function(row,column,side){var foldLine=this.getFoldLine(row)
if(!foldLine)return null
for(var folds=foldLine.folds,i=0;i<folds.length;i++){var fold=folds[i]
if(fold.range.contains(row,column)){if(1==side&&fold.range.isEnd(row,column))continue
if(side==-1&&fold.range.isStart(row,column))continue
return fold}}},this.getFoldsInRange=function(range){var start=range.start,end=range.end,foldLines=this.$foldData,foundFolds=[]


start.column+=1,end.column-=1
for(var i=0;i<foldLines.length;i++){var cmp=foldLines[i].range.compareRange(range)
if(2!=cmp){if(cmp==-2)break
for(var folds=foldLines[i].folds,j=0;j<folds.length;j++){var fold=folds[j]
if(cmp=fold.range.compareRange(range),cmp==-2)break
if(2!=cmp){if(42==cmp)break
foundFolds.push(fold)}}}}return start.column-=1,end.column+=1,foundFolds},this.getFoldsInRangeList=function(ranges){
if(Array.isArray(ranges)){var folds=[]
ranges.forEach(function(range){folds=folds.concat(this.getFoldsInRange(range))},this)}else var folds=this.getFoldsInRange(ranges)


return folds},this.getAllFolds=function(){for(var folds=[],foldLines=this.$foldData,i=0;i<foldLines.length;i++)for(var j=0;j<foldLines[i].folds.length;j++)folds.push(foldLines[i].folds[j])


return folds},this.getFoldStringAt=function(row,column,trim,foldLine){if(foldLine=foldLine||this.getFoldLine(row),
!foldLine)return null
for(var str,fold,lastFold={end:{column:0}},i=0;i<foldLine.folds.length;i++){fold=foldLine.folds[i]
var cmp=fold.range.compareEnd(row,column)
if(cmp==-1){str=this.getLine(fold.start.row).substring(lastFold.end.column,fold.start.column)
break}if(0===cmp)return null
lastFold=fold}return str||(str=this.getLine(fold.start.row).substring(lastFold.end.column)),trim==-1?str.substring(0,column-lastFold.end.column):1==trim?str.substring(column-lastFold.end.column):str

},this.getFoldLine=function(docRow,startFoldLine){var foldData=this.$foldData,i=0
for(startFoldLine&&(i=foldData.indexOf(startFoldLine)),i==-1&&(i=0),i;i<foldData.length;i++){var foldLine=foldData[i]


if(foldLine.start.row<=docRow&&foldLine.end.row>=docRow)return foldLine
if(foldLine.end.row>docRow)return null}return null},this.getNextFoldLine=function(docRow,startFoldLine){
var foldData=this.$foldData,i=0
for(startFoldLine&&(i=foldData.indexOf(startFoldLine)),i==-1&&(i=0),i;i<foldData.length;i++){var foldLine=foldData[i]


if(foldLine.end.row>=docRow)return foldLine}return null},this.getFoldedRowCount=function(first,last){
for(var foldData=this.$foldData,rowCount=last-first+1,i=0;i<foldData.length;i++){var foldLine=foldData[i],end=foldLine.end.row,start=foldLine.start.row


if(end>=last){start<last&&(start>=first?rowCount-=last-start:rowCount=0)
break}end>=first&&(rowCount-=start>=first?end-start:end-first+1)}return rowCount},this.$addFoldLine=function(foldLine){
return this.$foldData.push(foldLine),this.$foldData.sort(function(a,b){return a.start.row-b.start.row

}),foldLine},this.addFold=function(placeholder,range){var fold,foldData=this.$foldData,added=!1
placeholder instanceof Fold?fold=placeholder:(fold=new Fold(range,placeholder),fold.collapseChildren=range.collapseChildren),
this.$clipRangeToDocument(fold.range)
var startRow=fold.start.row,startColumn=fold.start.column,endRow=fold.end.row,endColumn=fold.end.column


if(!(startRow<endRow||startRow==endRow&&startColumn<=endColumn-2))throw new Error("The range has to be at least 2 characters width")


var startFold=this.getFoldAt(startRow,startColumn,1),endFold=this.getFoldAt(endRow,endColumn,-1)
if(startFold&&endFold==startFold)return startFold.addSubFold(fold)
startFold&&!startFold.range.isStart(startRow,startColumn)&&this.removeFold(startFold),endFold&&!endFold.range.isEnd(endRow,endColumn)&&this.removeFold(endFold)


var folds=this.getFoldsInRange(fold.range)
folds.length>0&&(this.removeFolds(folds),folds.forEach(function(subFold){fold.addSubFold(subFold)}))
for(var i=0;i<foldData.length;i++){var foldLine=foldData[i]
if(endRow==foldLine.start.row){foldLine.addFold(fold),added=!0
break}if(startRow==foldLine.end.row){if(foldLine.addFold(fold),added=!0,!fold.sameRow){var foldLineNext=foldData[i+1]


if(foldLineNext&&foldLineNext.start.row==endRow){foldLine.merge(foldLineNext)
break}}break}if(endRow<=foldLine.start.row)break}return added||(foldLine=this.$addFoldLine(new FoldLine(this.$foldData,fold))),
this.$useWrapMode?this.$updateWrapData(foldLine.start.row,foldLine.start.row):this.$updateRowLengthCache(foldLine.start.row,foldLine.start.row),
this.$modified=!0,this._signal("changeFold",{data:fold,action:"add"}),fold},this.addFolds=function(folds){
folds.forEach(function(fold){this.addFold(fold)},this)},this.removeFold=function(fold){var foldLine=fold.foldLine,startRow=foldLine.start.row,endRow=foldLine.end.row,foldLines=this.$foldData,folds=foldLine.folds


if(1==folds.length)foldLines.splice(foldLines.indexOf(foldLine),1)
else if(foldLine.range.isEnd(fold.end.row,fold.end.column))folds.pop(),foldLine.end.row=folds[folds.length-1].end.row,
foldLine.end.column=folds[folds.length-1].end.column
else if(foldLine.range.isStart(fold.start.row,fold.start.column))folds.shift(),foldLine.start.row=folds[0].start.row,
foldLine.start.column=folds[0].start.column
else if(fold.sameRow)folds.splice(folds.indexOf(fold),1)
else{var newFoldLine=foldLine.split(fold.start.row,fold.start.column)
folds=newFoldLine.folds,folds.shift(),newFoldLine.start.row=folds[0].start.row,newFoldLine.start.column=folds[0].start.column

}this.$updating||(this.$useWrapMode?this.$updateWrapData(startRow,endRow):this.$updateRowLengthCache(startRow,endRow)),
this.$modified=!0,this._signal("changeFold",{data:fold,action:"remove"})},this.removeFolds=function(folds){
for(var cloneFolds=[],i=0;i<folds.length;i++)cloneFolds.push(folds[i])
cloneFolds.forEach(function(fold){this.removeFold(fold)},this),this.$modified=!0},this.expandFold=function(fold){
this.removeFold(fold),fold.subFolds.forEach(function(subFold){fold.restoreRange(subFold),this.addFold(subFold)

},this),fold.collapseChildren>0&&this.foldAll(fold.start.row+1,fold.end.row,fold.collapseChildren-1),
fold.subFolds=[]},this.expandFolds=function(folds){folds.forEach(function(fold){this.expandFold(fold)

},this)},this.unfold=function(location,expandInner){var range,folds
if(null==location?(range=new Range(0,0,this.getLength(),0),expandInner=!0):range="number"==typeof location?new Range(location,0,location,this.getLine(location).length):"row"in location?Range.fromPoints(location,location):location,
folds=this.getFoldsInRangeList(range),expandInner)this.removeFolds(folds)
else for(var subFolds=folds;subFolds.length;)this.expandFolds(subFolds),subFolds=this.getFoldsInRangeList(range)


if(folds.length)return folds},this.isRowFolded=function(docRow,startFoldRow){return!!this.getFoldLine(docRow,startFoldRow)

},this.getRowFoldEnd=function(docRow,startFoldRow){var foldLine=this.getFoldLine(docRow,startFoldRow)


return foldLine?foldLine.end.row:docRow},this.getRowFoldStart=function(docRow,startFoldRow){var foldLine=this.getFoldLine(docRow,startFoldRow)


return foldLine?foldLine.start.row:docRow},this.getFoldDisplayLine=function(foldLine,endRow,endColumn,startRow,startColumn){
null==startRow&&(startRow=foldLine.start.row),null==startColumn&&(startColumn=0),null==endRow&&(endRow=foldLine.end.row),
null==endColumn&&(endColumn=this.getLine(endRow).length)
var doc=this.doc,textLine=""
return foldLine.walk(function(placeholder,row,column,lastColumn){if(!(row<startRow)){if(row==startRow){
if(column<startColumn)return
lastColumn=Math.max(startColumn,lastColumn)}textLine+=null!=placeholder?placeholder:doc.getLine(row).substring(lastColumn,column)

}},endRow,endColumn),textLine},this.getDisplayLine=function(row,endColumn,startRow,startColumn){var foldLine=this.getFoldLine(row)


if(foldLine)return this.getFoldDisplayLine(foldLine,row,endColumn,startRow,startColumn)
var line
return line=this.doc.getLine(row),line.substring(startColumn||0,endColumn||line.length)},this.$cloneFoldData=function(){
var fd=[]
return fd=this.$foldData.map(function(foldLine){var folds=foldLine.folds.map(function(fold){return fold.clone()

})
return new FoldLine(fd,folds)})},this.toggleFold=function(tryToUnfold){var fold,bracketPos,selection=this.selection,range=selection.getRange()


if(range.isEmpty()){var cursor=range.start
if(fold=this.getFoldAt(cursor.row,cursor.column))return void this.expandFold(fold);(bracketPos=this.findMatchingBracket(cursor))?1==range.comparePoint(bracketPos)?range.end=bracketPos:(range.start=bracketPos,
range.start.column++,range.end.column--):(bracketPos=this.findMatchingBracket({row:cursor.row,column:cursor.column+1
}))?(1==range.comparePoint(bracketPos)?range.end=bracketPos:range.start=bracketPos,range.start.column++):range=this.getCommentFoldRange(cursor.row,cursor.column)||range

}else{var folds=this.getFoldsInRange(range)
if(tryToUnfold&&folds.length)return void this.expandFolds(folds)
1==folds.length&&(fold=folds[0])}if(fold||(fold=this.getFoldAt(range.start.row,range.start.column)),fold&&fold.range.toString()==range.toString())return void this.expandFold(fold)


var placeholder="..."
if(!range.isMultiLine()){if(placeholder=this.getTextRange(range),placeholder.length<4)return
placeholder=placeholder.trim().substring(0,2)+".."}this.addFold(placeholder,range)},this.getCommentFoldRange=function(row,column,dir){
var iterator=new TokenIterator(this,row,column),token=iterator.getCurrentToken(),type=token.type
if(token&&/^comment|string/.test(type)){type=type.match(/comment|string/)[0],"comment"==type&&(type+="|doc-start")


var re=new RegExp(type),range=new Range
if(1!=dir){do token=iterator.stepBackward()
while(token&&re.test(token.type))
iterator.stepForward()}if(range.start.row=iterator.getCurrentTokenRow(),range.start.column=iterator.getCurrentTokenColumn()+2,
iterator=new TokenIterator(this,row,column),dir!=-1){var lastRow=-1
do if(token=iterator.stepForward(),lastRow==-1){var state=this.getState(iterator.$row)
re.test(state)||(lastRow=iterator.$row)}else if(iterator.$row>lastRow)break
while(token&&re.test(token.type))
token=iterator.stepBackward()}else token=iterator.getCurrentToken()
return range.end.row=iterator.getCurrentTokenRow(),range.end.column=iterator.getCurrentTokenColumn()+token.value.length-2,
range}},this.foldAll=function(startRow,endRow,depth){void 0==depth&&(depth=1e5)
var foldWidgets=this.foldWidgets
if(foldWidgets){endRow=endRow||this.getLength(),startRow=startRow||0
for(var row=startRow;row<endRow;row++)if(null==foldWidgets[row]&&(foldWidgets[row]=this.getFoldWidget(row)),
"start"==foldWidgets[row]){var range=this.getFoldWidgetRange(row)
if(range&&range.isMultiLine()&&range.end.row<=endRow&&range.start.row>=startRow){row=range.end.row
try{var fold=this.addFold("...",range)
fold&&(fold.collapseChildren=depth)}catch(e){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1
},this.$foldStyle="markbegin",this.setFoldStyle=function(style){if(!this.$foldStyles[style])throw new Error("invalid fold style: "+style+"["+Object.keys(this.$foldStyles).join(", ")+"]")


if(this.$foldStyle!=style){this.$foldStyle=style,"manual"==style&&this.unfold()
var mode=this.$foldMode
this.$setFolding(null),this.$setFolding(mode)}},this.$setFolding=function(foldMode){if(this.$foldMode!=foldMode){
if(this.$foldMode=foldMode,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),
this._signal("changeAnnotation"),!foldMode||"manual"==this.$foldStyle)return void(this.foldWidgets=null)


this.foldWidgets=[],this.getFoldWidget=foldMode.getFoldWidget.bind(foldMode,this,this.$foldStyle),this.getFoldWidgetRange=foldMode.getFoldWidgetRange.bind(foldMode,this,this.$foldStyle),
this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),
this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)

}},this.getParentFoldRangeData=function(row,ignoreCurrent){var fw=this.foldWidgets
if(!fw||ignoreCurrent&&fw[row])return{}
for(var firstRange,i=row-1;i>=0;){var c=fw[i]
if(null==c&&(c=fw[i]=this.getFoldWidget(i)),"start"==c){var range=this.getFoldWidgetRange(i)
if(firstRange||(firstRange=range),range&&range.end.row>=row)break}i--}return{range:i!==-1&&range,firstRange:firstRange
}},this.onFoldWidgetClick=function(row,e){e=e.domEvent
var options={children:e.shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey},range=this.$toggleFoldWidget(row,options)


if(!range){var el=e.target||e.srcElement
el&&/ace_fold-widget/.test(el.className)&&(el.className+=" ace_invalid")}},this.$toggleFoldWidget=function(row,options){
if(this.getFoldWidget){var type=this.getFoldWidget(row),line=this.getLine(row),dir="end"===type?-1:1,fold=this.getFoldAt(row,dir===-1?0:line.length,dir)


if(fold)return options.children||options.all?this.removeFold(fold):this.expandFold(fold),fold
var range=this.getFoldWidgetRange(row,!0)
if(range&&!range.isMultiLine()&&(fold=this.getFoldAt(range.start.row,range.start.column,1),fold&&range.isEqual(fold.range)))return this.removeFold(fold),
fold
if(options.siblings){var data=this.getParentFoldRangeData(row)
if(data.range)var startRow=data.range.start.row+1,endRow=data.range.end.row
this.foldAll(startRow,endRow,options.all?1e4:0)}else options.children?(endRow=range?range.end.row:this.getLength(),
this.foldAll(row+1,endRow,options.all?1e4:0)):range&&(options.all&&(range.collapseChildren=1e4),this.addFold("...",range))


return range}},this.toggleFoldWidget=function(toggleParent){var row=this.selection.getCursor().row
row=this.getRowFoldStart(row)
var range=this.$toggleFoldWidget(row,{})
if(!range){var data=this.getParentFoldRangeData(row,!0)
if(range=data.range||data.firstRange){row=range.start.row
var fold=this.getFoldAt(row,this.getLine(row).length,1)
fold?this.removeFold(fold):this.addFold("...",range)}}},this.updateFoldWidgets=function(delta){var firstRow=delta.start.row,len=delta.end.row-firstRow


if(0===len)this.foldWidgets[firstRow]=null
else if("remove"==delta.action)this.foldWidgets.splice(firstRow,len+1,null)
else{var args=Array(len+1)
args.unshift(firstRow,1),this.foldWidgets.splice.apply(this.foldWidgets,args)}},this.tokenizerUpdateFoldWidgets=function(e){
var rows=e.data
rows.first!=rows.last&&this.foldWidgets.length>rows.first&&this.foldWidgets.splice(rows.first,this.foldWidgets.length)

}}var Range=require("../range").Range,FoldLine=require("./fold_line").FoldLine,Fold=require("./fold").Fold,TokenIterator=require("../token_iterator").TokenIterator


exports.Folding=Folding})


define("ace/edit_session/bracket_match",[],function(require,exports,module){"use strict"
function BracketMatch(){this.findMatchingBracket=function(position,chr){if(0==position.column)return null


var charBeforeCursor=chr||this.getLine(position.row).charAt(position.column-1)
if(""==charBeforeCursor)return null
var match=charBeforeCursor.match(/([\(\[\{])|([\)\]\}])/)
return match?match[1]?this.$findClosingBracket(match[1],position):this.$findOpeningBracket(match[2],position):null

},this.getBracketRange=function(pos){var range,line=this.getLine(pos.row),before=!0,chr=line.charAt(pos.column-1),match=chr&&chr.match(/([\(\[\{])|([\)\]\}])/)


if(match||(chr=line.charAt(pos.column),pos={row:pos.row,column:pos.column+1},match=chr&&chr.match(/([\(\[\{])|([\)\]\}])/),
before=!1),!match)return null
if(match[1]){var bracketPos=this.$findClosingBracket(match[1],pos)
if(!bracketPos)return null
range=Range.fromPoints(pos,bracketPos),before||(range.end.column++,range.start.column--),range.cursor=range.end

}else{var bracketPos=this.$findOpeningBracket(match[2],pos)
if(!bracketPos)return null
range=Range.fromPoints(bracketPos,pos),before||(range.start.column++,range.end.column--),range.cursor=range.start

}return range},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(bracket,position,typeRe){
var openBracket=this.$brackets[bracket],depth=1,iterator=new TokenIterator(this,position.row,position.column),token=iterator.getCurrentToken()


if(token||(token=iterator.stepForward()),token){typeRe||(typeRe=new RegExp("(\\.?"+token.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"))


for(var valueIndex=position.column-iterator.getCurrentTokenColumn()-2,value=token.value;;){for(;valueIndex>=0;){
var chr=value.charAt(valueIndex)
if(chr==openBracket){if(depth-=1,0==depth)return{row:iterator.getCurrentTokenRow(),column:valueIndex+iterator.getCurrentTokenColumn()
}}else chr==bracket&&(depth+=1)
valueIndex-=1}do token=iterator.stepBackward()
while(token&&!typeRe.test(token.type))
if(null==token)break
value=token.value,valueIndex=value.length-1}return null}},this.$findClosingBracket=function(bracket,position,typeRe){
var closingBracket=this.$brackets[bracket],depth=1,iterator=new TokenIterator(this,position.row,position.column),token=iterator.getCurrentToken()


if(token||(token=iterator.stepForward()),token){typeRe||(typeRe=new RegExp("(\\.?"+token.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"))


for(var valueIndex=position.column-iterator.getCurrentTokenColumn();;){for(var value=token.value,valueLength=value.length;valueIndex<valueLength;){
var chr=value.charAt(valueIndex)
if(chr==closingBracket){if(depth-=1,0==depth)return{row:iterator.getCurrentTokenRow(),column:valueIndex+iterator.getCurrentTokenColumn()
}}else chr==bracket&&(depth+=1)
valueIndex+=1}do token=iterator.stepForward()
while(token&&!typeRe.test(token.type))
if(null==token)break
valueIndex=0}return null}}}var TokenIterator=require("../token_iterator").TokenIterator,Range=require("../range").Range


exports.BracketMatch=BracketMatch})


define("ace/edit_session",[],function(require,exports,module){"use strict"
var oop=require("./lib/oop"),lang=require("./lib/lang"),config=require("./config"),EventEmitter=require("./lib/event_emitter").EventEmitter,Selection=require("./selection").Selection,TextMode=require("./mode/text").Mode,Range=require("./range").Range,Document=require("./document").Document,BackgroundTokenizer=require("./background_tokenizer").BackgroundTokenizer,SearchHighlight=require("./search_highlight").SearchHighlight,EditSession=function(text,mode){
this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,
this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++EditSession.$uid,this.$foldData.toString=function(){
return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),
"object"==typeof text&&text.getLine||(text=new Document(text)),this.setDocument(text),this.selection=new Selection(this),
config.resetOptions(this),this.setMode(mode),config._signal("session",this)}
EditSession.$uid=0,function(){function isFullWidth(c){return!(c<4352)&&(c>=4352&&c<=4447||c>=4515&&c<=4519||c>=4602&&c<=4607||c>=9001&&c<=9002||c>=11904&&c<=11929||c>=11931&&c<=12019||c>=12032&&c<=12245||c>=12272&&c<=12283||c>=12288&&c<=12350||c>=12353&&c<=12438||c>=12441&&c<=12543||c>=12549&&c<=12589||c>=12593&&c<=12686||c>=12688&&c<=12730||c>=12736&&c<=12771||c>=12784&&c<=12830||c>=12832&&c<=12871||c>=12880&&c<=13054||c>=13056&&c<=19903||c>=19968&&c<=42124||c>=42128&&c<=42182||c>=43360&&c<=43388||c>=44032&&c<=55203||c>=55216&&c<=55238||c>=55243&&c<=55291||c>=63744&&c<=64255||c>=65040&&c<=65049||c>=65072&&c<=65106||c>=65108&&c<=65126||c>=65128&&c<=65131||c>=65281&&c<=65376||c>=65504&&c<=65510)

}oop.implement(this,EventEmitter),this.setDocument=function(doc){this.doc&&this.doc.removeListener("change",this.$onChange),
this.doc=doc,doc.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),
this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(docRow){
if(!docRow)return this.$docRowCache=[],void(this.$screenRowCache=[])
var l=this.$docRowCache.length,i=this.$getRowCacheIndex(this.$docRowCache,docRow)+1
l>i&&(this.$docRowCache.splice(i,l),this.$screenRowCache.splice(i,l))},this.$getRowCacheIndex=function(cacheArray,val){
for(var low=0,hi=cacheArray.length-1;low<=hi;){var mid=low+hi>>1,c=cacheArray[mid]
if(val>c)low=mid+1
else{if(!(val<c))return mid
hi=mid-1}}return low-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],
this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var fold=e.data


this.$resetRowCache(fold.start.row)},this.onChange=function(delta){this.$modified=!0,this.$resetRowCache(delta.start.row)


var removedFolds=this.$updateInternalDataOnChange(delta)
!this.$fromUndo&&this.$undoManager&&(removedFolds&&removedFolds.length&&(this.$undoManager.add({action:"removeFolds",
folds:removedFolds},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(delta,this.mergeUndoDeltas),
this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(delta),
this._signal("change",delta)},this.setValue=function(text){this.doc.setValue(text),this.selection.moveTo(0,0),
this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){
return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(row){
return this.bgTokenizer.getState(row)},this.getTokens=function(row){return this.bgTokenizer.getTokens(row)

},this.getTokenAt=function(row,column){var token,tokens=this.bgTokenizer.getTokens(row),c=0
if(null==column)i=tokens.length-1,c=this.getLine(row).length
else for(var i=0;i<tokens.length&&(c+=tokens[i].value.length,!(c>=column));i++);return(token=tokens[i])?(token.index=i,
token.start=c-token.value.length,token):null},this.setUndoManager=function(undoManager){if(this.$undoManager=undoManager,
this.$informUndoManager&&this.$informUndoManager.cancel(),undoManager){var self=this
undoManager.addSession(this),this.$syncInformUndoManager=function(){self.$informUndoManager.cancel(),
self.mergeUndoDeltas=!1},this.$informUndoManager=lang.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}

},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={
undo:function(){},redo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},
addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager

},this.getTabString=function(){return this.getUseSoftTabs()?lang.stringRepeat(" ",this.getTabSize()):"\t"

},this.setUseSoftTabs=function(val){this.setOption("useSoftTabs",val)},this.getUseSoftTabs=function(){
return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(tabSize){this.setOption("tabSize",tabSize)

},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(position){return this.$useSoftTabs&&position.column%this.$tabSize===0

},this.setNavigateWithinSoftTabs=function(navigateWithinSoftTabs){this.setOption("navigateWithinSoftTabs",navigateWithinSoftTabs)

},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(overwrite){
this.setOption("overwrite",overwrite)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){
this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(row,className){this.$decorations[row]||(this.$decorations[row]=""),
this.$decorations[row]+=" "+className,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(row,className){
this.$decorations[row]=(this.$decorations[row]||"").replace(" "+className,""),this._signal("changeBreakpoint",{})

},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(rows){this.$breakpoints=[]


for(var i=0;i<rows.length;i++)this.$breakpoints[rows[i]]="ace_breakpoint"
this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})

},this.setBreakpoint=function(row,className){void 0===className&&(className="ace_breakpoint"),className?this.$breakpoints[row]=className:delete this.$breakpoints[row],
this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(row){delete this.$breakpoints[row],
this._signal("changeBreakpoint",{})},this.addMarker=function(range,clazz,type,inFront){var id=this.$markerId++,marker={
range:range,type:type||"line",renderer:"function"==typeof type?type:null,clazz:clazz,inFront:!!inFront,
id:id}
return inFront?(this.$frontMarkers[id]=marker,this._signal("changeFrontMarker")):(this.$backMarkers[id]=marker,
this._signal("changeBackMarker")),id},this.addDynamicMarker=function(marker,inFront){if(marker.update){
var id=this.$markerId++
return marker.id=id,marker.inFront=!!inFront,inFront?(this.$frontMarkers[id]=marker,this._signal("changeFrontMarker")):(this.$backMarkers[id]=marker,
this._signal("changeBackMarker")),marker}},this.removeMarker=function(markerId){var marker=this.$frontMarkers[markerId]||this.$backMarkers[markerId]


if(marker){var markers=marker.inFront?this.$frontMarkers:this.$backMarkers
marker&&(delete markers[markerId],this._signal(marker.inFront?"changeFrontMarker":"changeBackMarker"))

}},this.getMarkers=function(inFront){return inFront?this.$frontMarkers:this.$backMarkers},this.highlight=function(re){
if(!this.$searchHighlight){var highlight=new SearchHighlight(null,"ace_selected-word","text")
this.$searchHighlight=this.addDynamicMarker(highlight)}this.$searchHighlight.setRegexp(re)},this.highlightLines=function(startRow,endRow,clazz,inFront){
"number"!=typeof endRow&&(clazz=endRow,endRow=startRow),clazz||(clazz="ace_step")
var range=new Range(startRow,0,endRow,1/0)
return range.id=this.addMarker(range,clazz,"fullLine",inFront),range},this.setAnnotations=function(annotations){
this.$annotations=annotations,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]

},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(text){var match=text.match(/^.*?(\r?\n)/m)


match?this.$autoNewLine=match[1]:this.$autoNewLine="\n"},this.getWordRange=function(row,column){var line=this.getLine(row),inToken=!1


if(column>0&&(inToken=!!line.charAt(column-1).match(this.tokenRe)),inToken||(inToken=!!line.charAt(column).match(this.tokenRe)),
inToken)var re=this.tokenRe
else if(/^\s+$/.test(line.slice(column-1,column+1)))var re=/\s/
else var re=this.nonTokenRe
var start=column
if(start>0){do start--
while(start>=0&&line.charAt(start).match(re))
start++}for(var end=column;end<line.length&&line.charAt(end).match(re);)end++
return new Range(row,start,row,end)},this.getAWordRange=function(row,column){for(var wordRange=this.getWordRange(row,column),line=this.getLine(wordRange.end.row);line.charAt(wordRange.end.column).match(/[ \t]/);)wordRange.end.column+=1


return wordRange},this.setNewLineMode=function(newLineMode){this.doc.setNewLineMode(newLineMode)},this.getNewLineMode=function(){
return this.doc.getNewLineMode()},this.setUseWorker=function(useWorker){this.setOption("useWorker",useWorker)

},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var rows=e.data


this.bgTokenizer.start(rows.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,
this.$modeId=null,this.setMode=function(mode,cb){if(mode&&"object"==typeof mode){if(mode.getTokenizer)return this.$onChangeMode(mode)


var options=mode,path=options.path}else path=mode||"ace/mode/text"
return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new TextMode),this.$modes[path]&&!options?(this.$onChangeMode(this.$modes[path]),
void(cb&&cb())):(this.$modeId=path,config.loadModule(["mode",path],function(m){return this.$modeId!==path?cb&&cb():(this.$modes[path]&&!options?this.$onChangeMode(this.$modes[path]):m&&m.Mode&&(m=new m.Mode(options),
options||(this.$modes[path]=m,m.$id=path),this.$onChangeMode(m)),void(cb&&cb()))}.bind(this)),void(this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)))

},this.$onChangeMode=function(mode,$isPlaceholder){if($isPlaceholder||(this.$modeId=mode.$id),this.$mode!==mode){
this.$mode=mode,this.$stopWorker(),this.$useWorker&&this.$startWorker()
var tokenizer=mode.getTokenizer()
if(void 0!==tokenizer.addEventListener){var onReloadTokenizer=this.onReloadTokenizer.bind(this)
tokenizer.addEventListener("update",onReloadTokenizer)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(tokenizer)
else{this.bgTokenizer=new BackgroundTokenizer(tokenizer)
var _self=this
this.bgTokenizer.addEventListener("update",function(e){_self._signal("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),
this.tokenRe=mode.tokenRe,this.nonTokenRe=mode.nonTokenRe,$isPlaceholder||(mode.attachToSession&&mode.attachToSession(this),
this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(mode.foldingRules),this.bgTokenizer.start(0),
this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)

},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){config.warn("Could not load worker",e),
this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(scrollTop){
this.$scrollTop===scrollTop||isNaN(scrollTop)||(this.$scrollTop=scrollTop,this._signal("changeScrollTop",scrollTop))

},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(scrollLeft){
this.$scrollLeft===scrollLeft||isNaN(scrollLeft)||(this.$scrollLeft=scrollLeft,this._signal("changeScrollLeft",scrollLeft))

},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),
this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){
if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth
var width=0
return this.lineWidgets.forEach(function(w){w&&w.screenWidth>width&&(width=w.screenWidth)}),this.lineWidgetWidth=width

},this.$computeWidth=function(force){if(this.$modified||force){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit


for(var lines=this.doc.getAllLines(),cache=this.$rowLengthCache,longestScreenLine=0,foldIndex=0,foldLine=this.$foldData[foldIndex],foldStart=foldLine?foldLine.start.row:1/0,len=lines.length,i=0;i<len;i++){
if(i>foldStart){if(i=foldLine.end.row+1,i>=len)break
foldLine=this.$foldData[foldIndex++],foldStart=foldLine?foldLine.start.row:1/0}null==cache[i]&&(cache[i]=this.$getStringScreenWidth(lines[i])[0]),
cache[i]>longestScreenLine&&(longestScreenLine=cache[i])}this.screenWidth=longestScreenLine}},this.getLine=function(row){
return this.doc.getLine(row)},this.getLines=function(firstRow,lastRow){return this.doc.getLines(firstRow,lastRow)

},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(range){return this.doc.getTextRange(range||this.selection.getRange())

},this.insert=function(position,text){return this.doc.insert(position,text)},this.remove=function(range){
return this.doc.remove(range)},this.removeFullLines=function(firstRow,lastRow){return this.doc.removeFullLines(firstRow,lastRow)

},this.undoChanges=function(deltas,dontSelect){if(deltas.length){this.$fromUndo=!0
for(var i=deltas.length-1;i!=-1;i--){var delta=deltas[i]
"insert"==delta.action||"remove"==delta.action?this.doc.revertDelta(delta):delta.folds&&this.addFolds(delta.folds)

}!dontSelect&&this.$undoSelect&&(deltas.selectionBefore?this.selection.fromJSON(deltas.selectionBefore):this.selection.setRange(this.$getUndoSelection(deltas,!0))),
this.$fromUndo=!1}},this.redoChanges=function(deltas,dontSelect){if(deltas.length){this.$fromUndo=!0
for(var i=0;i<deltas.length;i++){var delta=deltas[i]
"insert"!=delta.action&&"remove"!=delta.action||this.doc.applyDelta(delta)}!dontSelect&&this.$undoSelect&&(deltas.selectionAfter?this.selection.fromJSON(deltas.selectionAfter):this.selection.setRange(this.$getUndoSelection(deltas,!1))),
this.$fromUndo=!1}},this.setUndoSelect=function(enable){this.$undoSelect=enable},this.$getUndoSelection=function(deltas,isUndo){
function isInsert(delta){return isUndo?"insert"!==delta.action:"insert"===delta.action}for(var range,point,lastDeltaIsInsert,i=0;i<deltas.length;i++){
var delta=deltas[i]
delta.start&&(range?isInsert(delta)?(point=delta.start,range.compare(point.row,point.column)==-1&&range.setStart(point),
point=delta.end,1==range.compare(point.row,point.column)&&range.setEnd(point),lastDeltaIsInsert=!0):(point=delta.start,
range.compare(point.row,point.column)==-1&&(range=Range.fromPoints(delta.start,delta.start)),lastDeltaIsInsert=!1):isInsert(delta)?(range=Range.fromPoints(delta.start,delta.end),
lastDeltaIsInsert=!0):(range=Range.fromPoints(delta.start,delta.start),lastDeltaIsInsert=!1))}return range

},this.replace=function(range,text){return this.doc.replace(range,text)},this.moveText=function(fromRange,toPosition,copy){
var text=this.getTextRange(fromRange),folds=this.getFoldsInRange(fromRange),toRange=Range.fromPoints(toPosition,toPosition)


if(!copy){this.remove(fromRange)
var rowDiff=fromRange.start.row-fromRange.end.row,collDiff=rowDiff?-fromRange.end.column:fromRange.start.column-fromRange.end.column


collDiff&&(toRange.start.row==fromRange.end.row&&toRange.start.column>fromRange.end.column&&(toRange.start.column+=collDiff),
toRange.end.row==fromRange.end.row&&toRange.end.column>fromRange.end.column&&(toRange.end.column+=collDiff)),
rowDiff&&toRange.start.row>=fromRange.end.row&&(toRange.start.row+=rowDiff,toRange.end.row+=rowDiff)}
if(toRange.end=this.insert(toRange.start,text),folds.length){var oldStart=fromRange.start,newStart=toRange.start,rowDiff=newStart.row-oldStart.row,collDiff=newStart.column-oldStart.column


this.addFolds(folds.map(function(x){return x=x.clone(),x.start.row==oldStart.row&&(x.start.column+=collDiff),
x.end.row==oldStart.row&&(x.end.column+=collDiff),x.start.row+=rowDiff,x.end.row+=rowDiff,x}))}return toRange

},this.indentRows=function(startRow,endRow,indentString){indentString=indentString.replace(/\t/g,this.getTabString())


for(var row=startRow;row<=endRow;row++)this.doc.insertInLine({row:row,column:0},indentString)},this.outdentRows=function(range){
for(var rowRange=range.collapseRows(),deleteRange=new Range(0,0,0,0),size=this.getTabSize(),i=rowRange.start.row;i<=rowRange.end.row;++i){
var line=this.getLine(i)
deleteRange.start.row=i,deleteRange.end.row=i
for(var j=0;j<size&&" "==line.charAt(j);++j);j<size&&"\t"==line.charAt(j)?(deleteRange.start.column=j,
deleteRange.end.column=j+1):(deleteRange.start.column=0,deleteRange.end.column=j),this.remove(deleteRange)

}},this.$moveLines=function(firstRow,lastRow,dir){if(firstRow=this.getRowFoldStart(firstRow),lastRow=this.getRowFoldEnd(lastRow),
dir<0){var row=this.getRowFoldStart(firstRow+dir)
if(row<0)return 0
var diff=row-firstRow}else if(dir>0){var row=this.getRowFoldEnd(lastRow+dir)
if(row>this.doc.getLength()-1)return 0
var diff=row-lastRow}else{firstRow=this.$clipRowToDocument(firstRow),lastRow=this.$clipRowToDocument(lastRow)


var diff=lastRow-firstRow+1}var range=new Range(firstRow,0,lastRow,Number.MAX_VALUE),folds=this.getFoldsInRange(range).map(function(x){
return x=x.clone(),x.start.row+=diff,x.end.row+=diff,x}),lines=0==dir?this.doc.getLines(firstRow,lastRow):this.doc.removeFullLines(firstRow,lastRow)


return this.doc.insertFullLines(firstRow+diff,lines),folds.length&&this.addFolds(folds),diff},this.moveLinesUp=function(firstRow,lastRow){
return this.$moveLines(firstRow,lastRow,-1)},this.moveLinesDown=function(firstRow,lastRow){return this.$moveLines(firstRow,lastRow,1)

},this.duplicateLines=function(firstRow,lastRow){return this.$moveLines(firstRow,lastRow,0)},this.$clipRowToDocument=function(row){
return Math.max(0,Math.min(row,this.doc.getLength()-1))},this.$clipColumnToRow=function(row,column){return column<0?0:Math.min(this.doc.getLine(row).length,column)

},this.$clipPositionToDocument=function(row,column){if(column=Math.max(0,column),row<0)row=0,column=0
else{var len=this.doc.getLength()
row>=len?(row=len-1,column=this.doc.getLine(len-1).length):column=Math.min(this.doc.getLine(row).length,column)

}return{row:row,column:column}},this.$clipRangeToDocument=function(range){range.start.row<0?(range.start.row=0,
range.start.column=0):range.start.column=this.$clipColumnToRow(range.start.row,range.start.column)
var len=this.doc.getLength()-1
return range.end.row>len?(range.end.row=len,range.end.column=this.doc.getLine(len).length):range.end.column=this.$clipColumnToRow(range.end.row,range.end.column),
range},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(useWrapMode){
if(useWrapMode!=this.$useWrapMode){if(this.$useWrapMode=useWrapMode,this.$modified=!0,this.$resetRowCache(0),
useWrapMode){var len=this.getLength()
this.$wrapData=Array(len),this.$updateWrapData(0,len-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){
return this.$useWrapMode},this.setWrapLimitRange=function(min,max){this.$wrapLimitRange.min===min&&this.$wrapLimitRange.max===max||(this.$wrapLimitRange={
min:min,max:max},this.$modified=!0,this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(desiredLimit,$printMargin){
var limits=this.$wrapLimitRange
limits.max<0&&(limits={min:$printMargin,max:$printMargin})
var wrapLimit=this.$constrainWrapLimit(desiredLimit,limits.min,limits.max)
return wrapLimit!=this.$wrapLimit&&wrapLimit>1&&(this.$wrapLimit=wrapLimit,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),
this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(wrapLimit,min,max){
return min&&(wrapLimit=Math.max(min,wrapLimit)),max&&(wrapLimit=Math.min(max,wrapLimit)),wrapLimit},this.getWrapLimit=function(){
return this.$wrapLimit},this.setWrapLimit=function(limit){this.setWrapLimitRange(limit,limit)},this.getWrapLimitRange=function(){
return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(delta){
var useWrapMode=this.$useWrapMode,action=delta.action,start=delta.start,end=delta.end,firstRow=start.row,lastRow=end.row,len=lastRow-firstRow,removedFolds=null


if(this.$updating=!0,0!=len)if("remove"===action){this[useWrapMode?"$wrapData":"$rowLengthCache"].splice(firstRow,len)


var foldLines=this.$foldData
removedFolds=this.getFoldsInRange(delta),this.removeFolds(removedFolds)
var foldLine=this.getFoldLine(end.row),idx=0
if(foldLine){foldLine.addRemoveChars(end.row,end.column,start.column-end.column),foldLine.shiftRow(-len)


var foldLineBefore=this.getFoldLine(firstRow)
foldLineBefore&&foldLineBefore!==foldLine&&(foldLineBefore.merge(foldLine),foldLine=foldLineBefore),idx=foldLines.indexOf(foldLine)+1

}for(idx;idx<foldLines.length;idx++){var foldLine=foldLines[idx]
foldLine.start.row>=end.row&&foldLine.shiftRow(-len)}lastRow=firstRow}else{var args=Array(len)
args.unshift(firstRow,0)
var arr=useWrapMode?this.$wrapData:this.$rowLengthCache
arr.splice.apply(arr,args)
var foldLines=this.$foldData,foldLine=this.getFoldLine(firstRow),idx=0
if(foldLine){var cmp=foldLine.range.compareInside(start.row,start.column)
0==cmp?(foldLine=foldLine.split(start.row,start.column),foldLine&&(foldLine.shiftRow(len),foldLine.addRemoveChars(lastRow,0,end.column-start.column))):cmp==-1&&(foldLine.addRemoveChars(firstRow,0,end.column-start.column),
foldLine.shiftRow(len)),idx=foldLines.indexOf(foldLine)+1}for(idx;idx<foldLines.length;idx++){var foldLine=foldLines[idx]


foldLine.start.row>=firstRow&&foldLine.shiftRow(len)}}else{len=Math.abs(delta.start.column-delta.end.column),
"remove"===action&&(removedFolds=this.getFoldsInRange(delta),this.removeFolds(removedFolds),len=-len)


var foldLine=this.getFoldLine(firstRow)
foldLine&&foldLine.addRemoveChars(firstRow,start.column,len)}return useWrapMode&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),
this.$updating=!1,useWrapMode?this.$updateWrapData(firstRow,lastRow):this.$updateRowLengthCache(firstRow,lastRow),
removedFolds},this.$updateRowLengthCache=function(firstRow,lastRow,b){this.$rowLengthCache[firstRow]=null,
this.$rowLengthCache[lastRow]=null},this.$updateWrapData=function(firstRow,lastRow){var tokens,foldLine,lines=this.doc.getAllLines(),tabSize=this.getTabSize(),wrapData=this.$wrapData,wrapLimit=this.$wrapLimit,row=firstRow


for(lastRow=Math.min(lastRow,lines.length-1);row<=lastRow;)foldLine=this.getFoldLine(row,foldLine),foldLine?(tokens=[],
foldLine.walk(function(placeholder,row,column,lastColumn){var walkTokens
if(null!=placeholder){walkTokens=this.$getDisplayTokens(placeholder,tokens.length),walkTokens[0]=PLACEHOLDER_START


for(var i=1;i<walkTokens.length;i++)walkTokens[i]=PLACEHOLDER_BODY}else walkTokens=this.$getDisplayTokens(lines[row].substring(lastColumn,column),tokens.length)


tokens=tokens.concat(walkTokens)}.bind(this),foldLine.end.row,lines[foldLine.end.row].length+1),wrapData[foldLine.start.row]=this.$computeWrapSplits(tokens,wrapLimit,tabSize),
row=foldLine.end.row+1):(tokens=this.$getDisplayTokens(lines[row]),wrapData[row]=this.$computeWrapSplits(tokens,wrapLimit,tabSize),
row++)}
var CHAR=1,CHAR_EXT=2,PLACEHOLDER_START=3,PLACEHOLDER_BODY=4,PUNCTUATION=9,SPACE=10,TAB=11,TAB_SPACE=12


this.$computeWrapSplits=function(tokens,wrapLimit,tabSize){function getWrapIndent(){var indentation=0


if(0===maxIndent)return indentation
if(indentedSoftWrap)for(var i=0;i<tokens.length;i++){var token=tokens[i]
if(token==SPACE)indentation+=1
else{if(token!=TAB){if(token==TAB_SPACE)continue
break}indentation+=tabSize}}return isCode&&indentedSoftWrap!==!1&&(indentation+=tabSize),Math.min(indentation,maxIndent)

}function addSplit(screenPos){var displayed=tokens.slice(lastSplit,screenPos),len=displayed.length
displayed.join("").replace(/12/g,function(){len-=1}).replace(/2/g,function(){len-=1}),splits.length||(indent=getWrapIndent(),
splits.indent=indent),lastDocSplit+=len,splits.push(lastDocSplit),lastSplit=screenPos}if(0==tokens.length)return[]


for(var splits=[],displayLength=tokens.length,lastSplit=0,lastDocSplit=0,isCode=this.$wrapAsCode,indentedSoftWrap=this.$indentedSoftWrap,maxIndent=wrapLimit<=Math.max(2*tabSize,8)||indentedSoftWrap===!1?0:Math.floor(wrapLimit/2),indent=0;displayLength-lastSplit>wrapLimit-indent;){
var split=lastSplit+wrapLimit-indent
if(tokens[split-1]>=SPACE&&tokens[split]>=SPACE)addSplit(split)
else if(tokens[split]!=PLACEHOLDER_START&&tokens[split]!=PLACEHOLDER_BODY){for(var minSplit=Math.max(split-(wrapLimit-(wrapLimit>>2)),lastSplit-1);split>minSplit&&tokens[split]<PLACEHOLDER_START;)split--


if(isCode){for(;split>minSplit&&tokens[split]<PLACEHOLDER_START;)split--
for(;split>minSplit&&tokens[split]==PUNCTUATION;)split--}else for(;split>minSplit&&tokens[split]<SPACE;)split--


split>minSplit?addSplit(++split):(split=lastSplit+wrapLimit,tokens[split]==CHAR_EXT&&split--,addSplit(split-indent))

}else{for(split;split!=lastSplit-1&&tokens[split]!=PLACEHOLDER_START;split--);if(split>lastSplit){addSplit(split)


continue}for(split=lastSplit+wrapLimit;split<tokens.length&&tokens[split]==PLACEHOLDER_BODY;split++);
if(split==tokens.length)break
addSplit(split)}}return splits},this.$getDisplayTokens=function(str,offset){var tabSize,arr=[]
offset=offset||0
for(var i=0;i<str.length;i++){var c=str.charCodeAt(i)
if(9==c){tabSize=this.getScreenTabSize(arr.length+offset),arr.push(TAB)
for(var n=1;n<tabSize;n++)arr.push(TAB_SPACE)}else 32==c?arr.push(SPACE):c>39&&c<48||c>57&&c<64?arr.push(PUNCTUATION):c>=4352&&isFullWidth(c)?arr.push(CHAR,CHAR_EXT):arr.push(CHAR)

}return arr},this.$getStringScreenWidth=function(str,maxScreenColumn,screenColumn){if(0==maxScreenColumn)return[0,0]


null==maxScreenColumn&&(maxScreenColumn=1/0),screenColumn=screenColumn||0
var c,column
for(column=0;column<str.length&&(c=str.charCodeAt(column),screenColumn+=9==c?this.getScreenTabSize(screenColumn):c>=4352&&isFullWidth(c)?2:1,
!(screenColumn>maxScreenColumn));column++);return[screenColumn,column]},this.lineWidgets=null,this.getRowLength=function(row){
if(this.lineWidgets)var h=this.lineWidgets[row]&&this.lineWidgets[row].rowCount||0
else h=0
return this.$useWrapMode&&this.$wrapData[row]?this.$wrapData[row].length+1+h:1+h},this.getRowLineCount=function(row){
return this.$useWrapMode&&this.$wrapData[row]?this.$wrapData[row].length+1:1},this.getRowWrapIndent=function(screenRow){
if(this.$useWrapMode){var pos=this.screenToDocumentPosition(screenRow,Number.MAX_VALUE),splits=this.$wrapData[pos.row]


return splits.length&&splits[0]<pos.column?splits.indent:0}return 0},this.getScreenLastRowColumn=function(screenRow){
var pos=this.screenToDocumentPosition(screenRow,Number.MAX_VALUE)
return this.documentToScreenColumn(pos.row,pos.column)},this.getDocumentLastRowColumn=function(docRow,docColumn){
var screenRow=this.documentToScreenRow(docRow,docColumn)
return this.getScreenLastRowColumn(screenRow)},this.getDocumentLastRowColumnPosition=function(docRow,docColumn){
var screenRow=this.documentToScreenRow(docRow,docColumn)
return this.screenToDocumentPosition(screenRow,Number.MAX_VALUE/10)},this.getRowSplitData=function(row){
return this.$useWrapMode?this.$wrapData[row]:void 0},this.getScreenTabSize=function(screenColumn){return this.$tabSize-screenColumn%this.$tabSize

},this.screenToDocumentRow=function(screenRow,screenColumn){return this.screenToDocumentPosition(screenRow,screenColumn).row

},this.screenToDocumentColumn=function(screenRow,screenColumn){return this.screenToDocumentPosition(screenRow,screenColumn).column

},this.screenToDocumentPosition=function(screenRow,screenColumn){if(screenRow<0)return{row:0,column:0
}
var line,column,docRow=0,docColumn=0,row=0,rowLength=0,rowCache=this.$screenRowCache,i=this.$getRowCacheIndex(rowCache,screenRow),l=rowCache.length


if(l&&i>=0)var row=rowCache[i],docRow=this.$docRowCache[i],doCache=screenRow>rowCache[l-1]
else var doCache=!l
for(var maxRow=this.getLength()-1,foldLine=this.getNextFoldLine(docRow),foldStart=foldLine?foldLine.start.row:1/0;row<=screenRow&&(rowLength=this.getRowLength(docRow),
!(row+rowLength>screenRow||docRow>=maxRow));)row+=rowLength,docRow++,docRow>foldStart&&(docRow=foldLine.end.row+1,
foldLine=this.getNextFoldLine(docRow,foldLine),foldStart=foldLine?foldLine.start.row:1/0),doCache&&(this.$docRowCache.push(docRow),
this.$screenRowCache.push(row))
if(foldLine&&foldLine.start.row<=docRow)line=this.getFoldDisplayLine(foldLine),docRow=foldLine.start.row
else{if(row+rowLength<=screenRow||docRow>maxRow)return{row:maxRow,column:this.getLine(maxRow).length}


line=this.getLine(docRow),foldLine=null}var wrapIndent=0
if(this.$useWrapMode){var splits=this.$wrapData[docRow]
if(splits){var splitIndex=Math.floor(screenRow-row)
column=splits[splitIndex],splitIndex>0&&splits.length&&(wrapIndent=splits.indent,docColumn=splits[splitIndex-1]||splits[splits.length-1],
line=line.substring(docColumn))}}return docColumn+=this.$getStringScreenWidth(line,screenColumn-wrapIndent)[1],
this.$useWrapMode&&docColumn>=column&&(docColumn=column-1),foldLine?foldLine.idxToPosition(docColumn):{
row:docRow,column:docColumn}},this.documentToScreenPosition=function(docRow,docColumn){if("undefined"==typeof docColumn)var pos=this.$clipPositionToDocument(docRow.row,docRow.column)
else pos=this.$clipPositionToDocument(docRow,docColumn)
docRow=pos.row,docColumn=pos.column
var screenRow=0,foldStartRow=null,fold=null
fold=this.getFoldAt(docRow,docColumn,1),fold&&(docRow=fold.start.row,docColumn=fold.start.column)
var rowEnd,row=0,rowCache=this.$docRowCache,i=this.$getRowCacheIndex(rowCache,docRow),l=rowCache.length


if(l&&i>=0)var row=rowCache[i],screenRow=this.$screenRowCache[i],doCache=docRow>rowCache[l-1]
else var doCache=!l
for(var foldLine=this.getNextFoldLine(row),foldStart=foldLine?foldLine.start.row:1/0;row<docRow;){if(row>=foldStart){
if(rowEnd=foldLine.end.row+1,rowEnd>docRow)break
foldLine=this.getNextFoldLine(rowEnd,foldLine),foldStart=foldLine?foldLine.start.row:1/0}else rowEnd=row+1


screenRow+=this.getRowLength(row),row=rowEnd,doCache&&(this.$docRowCache.push(row),this.$screenRowCache.push(screenRow))

}var textLine=""
foldLine&&row>=foldStart?(textLine=this.getFoldDisplayLine(foldLine,docRow,docColumn),foldStartRow=foldLine.start.row):(textLine=this.getLine(docRow).substring(0,docColumn),
foldStartRow=docRow)
var wrapIndent=0
if(this.$useWrapMode){var wrapRow=this.$wrapData[foldStartRow]
if(wrapRow){for(var screenRowOffset=0;textLine.length>=wrapRow[screenRowOffset];)screenRow++,screenRowOffset++


textLine=textLine.substring(wrapRow[screenRowOffset-1]||0,textLine.length),wrapIndent=screenRowOffset>0?wrapRow.indent:0

}}return{row:screenRow,column:wrapIndent+this.$getStringScreenWidth(textLine)[0]}},this.documentToScreenColumn=function(row,docColumn){
return this.documentToScreenPosition(row,docColumn).column},this.documentToScreenRow=function(docRow,docColumn){
return this.documentToScreenPosition(docRow,docColumn).row},this.getScreenLength=function(){var screenRows=0,fold=null


if(this.$useWrapMode)for(var lastRow=this.$wrapData.length,row=0,i=0,fold=this.$foldData[i++],foldStart=fold?fold.start.row:1/0;row<lastRow;){
var splits=this.$wrapData[row]
screenRows+=splits?splits.length+1:1,row++,row>foldStart&&(row=fold.end.row+1,fold=this.$foldData[i++],
foldStart=fold?fold.start.row:1/0)}else{screenRows=this.getLength()
for(var foldData=this.$foldData,i=0;i<foldData.length;i++)fold=foldData[i],screenRows-=fold.end.row-fold.start.row

}return this.lineWidgets&&(screenRows+=this.$getWidgetScreenLength()),screenRows},this.$setFontMetrics=function(fm){
this.$getStringScreenWidth=function(str,maxScreenColumn,screenColumn){if(0===maxScreenColumn)return[0,0]


maxScreenColumn||(maxScreenColumn=1/0),screenColumn=screenColumn||0
var c,column
for(column=0;column<str.length&&(c=str.charAt(column),screenColumn+="\t"===c?this.getScreenTabSize(screenColumn):fm.getCharacterWidth(c),
!(screenColumn>maxScreenColumn));column++);return[screenColumn,column]}},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),
this.bgTokenizer=null),this.$stopWorker()}}.call(EditSession.prototype),require("./edit_session/folding").Folding.call(EditSession.prototype),
require("./edit_session/bracket_match").BracketMatch.call(EditSession.prototype),config.defineOptions(EditSession.prototype,"session",{
wrap:{set:function(value){if(value&&"off"!=value?"free"==value?value=!0:"printMargin"==value?value=-1:"string"==typeof value&&(value=parseInt(value,10)||!1):value=!1,
this.$wrap!=value)if(this.$wrap=value,value){var col="number"==typeof value?value:null
this.setWrapLimitRange(col,col),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){
return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"

},handlesSet:!0},wrapMethod:{set:function(val){val="auto"==val?"text"!=this.$mode.type:"text"!=val,val!=this.$wrapAsCode&&(this.$wrapAsCode=val,
this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))

},initialValue:"auto"},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")

},initialValue:1},useWorker:{set:function(useWorker){this.$useWorker=useWorker,this.$stopWorker(),useWorker&&this.$startWorker()

},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(tabSize){isNaN(tabSize)||this.$tabSize===tabSize||(this.$modified=!0,
this.$rowLengthCache=[],this.$tabSize=tabSize,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0
},navigateWithinSoftTabs:{initialValue:!1},overwrite:{set:function(val){this._signal("changeOverwrite")

},initialValue:!1},newLineMode:{set:function(val){this.doc.setNewLineMode(val)},get:function(){return this.doc.getNewLineMode()

},handlesSet:!0},mode:{set:function(val){this.setMode(val)},get:function(){return this.$modeId}}}),exports.EditSession=EditSession

})


define("ace/search",[],function(require,exports,module){"use strict"
function addWordBoundary(needle,options){function wordBoundary(c){return/\w/.test(c)||options.regExp?"\\b":""

}return wordBoundary(needle[0])+needle+wordBoundary(needle[needle.length-1])}var lang=require("./lib/lang"),oop=require("./lib/oop"),Range=require("./range").Range,Search=function(){
this.$options={}};(function(){this.set=function(options){return oop.mixin(this.$options,options),this

},this.getOptions=function(){return lang.copyObject(this.$options)},this.setOptions=function(options){
this.$options=options},this.find=function(session){var options=this.$options,iterator=this.$matchIterator(session,options)


if(!iterator)return!1
var firstRange=null
return iterator.forEach(function(sr,sc,er,ec){return firstRange=new Range(sr,sc,er,ec),!(sc==ec&&options.start&&options.start.start&&0!=options.skipCurrent&&firstRange.isEqual(options.start))||(firstRange=null,
!1)}),firstRange},this.findAll=function(session){var options=this.$options
if(!options.needle)return[]
this.$assembleRegExp(options)
var range=options.range,lines=range?session.getLines(range.start.row,range.end.row):session.doc.getAllLines(),ranges=[],re=options.re


if(options.$isMultiLine){var prevRange,len=re.length,maxRow=lines.length-len
outer:for(var row=re.offset||0;row<=maxRow;row++){for(var j=0;j<len;j++)if(lines[row+j].search(re[j])==-1)continue outer


var startLine=lines[row],line=lines[row+len-1],startIndex=startLine.length-startLine.match(re[0])[0].length,endIndex=line.match(re[len-1])[0].length


prevRange&&prevRange.end.row===row&&prevRange.end.column>startIndex||(ranges.push(prevRange=new Range(row,startIndex,row+len-1,endIndex)),
len>2&&(row=row+len-2))}}else for(var i=0;i<lines.length;i++)for(var matches=lang.getMatchOffsets(lines[i],re),j=0;j<matches.length;j++){
var match=matches[j]
ranges.push(new Range(i,match.offset,i,match.offset+match.length))}if(range){for(var startColumn=range.start.column,endColumn=range.start.column,i=0,j=ranges.length-1;i<j&&ranges[i].start.column<startColumn&&ranges[i].start.row==range.start.row;)i++


for(;i<j&&ranges[j].end.column>endColumn&&ranges[j].end.row==range.end.row;)j--
for(ranges=ranges.slice(i,j+1),i=0,j=ranges.length;i<j;i++)ranges[i].start.row+=range.start.row,ranges[i].end.row+=range.start.row

}return ranges},this.replace=function(input,replacement){var options=this.$options,re=this.$assembleRegExp(options)


if(options.$isMultiLine)return replacement
if(re){var match=re.exec(input)
if(!match||match[0].length!=input.length)return null
if(replacement=input.replace(re,replacement),options.preserveCase){replacement=replacement.split("")
for(var i=Math.min(input.length,input.length);i--;){var ch=input[i]
ch&&ch.toLowerCase()!=ch?replacement[i]=replacement[i].toUpperCase():replacement[i]=replacement[i].toLowerCase()

}replacement=replacement.join("")}return replacement}},this.$assembleRegExp=function(options,$disableFakeMultiline){
if(options.needle instanceof RegExp)return options.re=options.needle
var needle=options.needle
if(!options.needle)return options.re=!1
options.regExp||(needle=lang.escapeRegExp(needle)),options.wholeWord&&(needle=addWordBoundary(needle,options))


var modifier=options.caseSensitive?"gm":"gmi"
if(options.$isMultiLine=!$disableFakeMultiline&&/[\n\r]/.test(needle),options.$isMultiLine)return options.re=this.$assembleMultilineRegExp(needle,modifier)


try{var re=new RegExp(needle,modifier)}catch(e){re=!1}return options.re=re},this.$assembleMultilineRegExp=function(needle,modifier){
for(var parts=needle.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),re=[],i=0;i<parts.length;i++)try{re.push(new RegExp(parts[i],modifier))

}catch(e){return!1}return re},this.$matchIterator=function(session,options){var re=this.$assembleRegExp(options)


if(!re)return!1
var backwards=1==options.backwards,skipCurrent=0!=options.skipCurrent,range=options.range,start=options.start


start||(start=range?range[backwards?"end":"start"]:session.selection.getRange()),start.start&&(start=start[skipCurrent!=backwards?"end":"start"])


var firstRow=range?range.start.row:0,lastRow=range?range.end.row:session.getLength()-1
if(backwards)var forEach=function(callback){var row=start.row
if(!forEachInLine(row,start.column,callback)){for(row--;row>=firstRow;row--)if(forEachInLine(row,Number.MAX_VALUE,callback))return


if(0!=options.wrap)for(row=lastRow,firstRow=start.row;row>=firstRow;row--)if(forEachInLine(row,Number.MAX_VALUE,callback))return

}}
else var forEach=function(callback){var row=start.row
if(!forEachInLine(row,start.column,callback)){for(row+=1;row<=lastRow;row++)if(forEachInLine(row,0,callback))return


if(0!=options.wrap)for(row=firstRow,lastRow=start.row;row<=lastRow;row++)if(forEachInLine(row,0,callback))return

}}
if(options.$isMultiLine)var len=re.length,forEachInLine=function(row,offset,callback){var startRow=backwards?row-len+1:row


if(!(startRow<0)){var line=session.getLine(startRow),startIndex=line.search(re[0])
if(!(!backwards&&startIndex<offset||startIndex===-1)){for(var i=1;i<len;i++)if(line=session.getLine(startRow+i),
line.search(re[i])==-1)return
var endIndex=line.match(re[len-1])[0].length
if(!(backwards&&endIndex>offset))return!!callback(startRow,startIndex,startRow+len-1,endIndex)||void 0

}}}
else if(backwards)var forEachInLine=function(row,endIndex,callback){var m,line=session.getLine(row),matches=[],last=0


for(re.lastIndex=0;m=re.exec(line);){var length=m[0].length
if(last=m.index,!length){if(last>=line.length)break
re.lastIndex=last+=1}if(m.index+length>endIndex)break
matches.push(m.index,length)}for(var i=matches.length-1;i>=0;i-=2){var column=matches[i-1],length=matches[i]


if(callback(row,column,row,column+length))return!0}}
else var forEachInLine=function(row,startIndex,callback){var m,line=session.getLine(row),last=startIndex


for(re.lastIndex=startIndex;m=re.exec(line);){var length=m[0].length
if(last=m.index,callback(row,last,row,last+length))return!0
if(!length&&(re.lastIndex=last+=1,last>=line.length))return!1}}
return{forEach:forEach}}}).call(Search.prototype),exports.Search=Search})


define("ace/commands/default_commands",[],function(require,exports,module){"use strict"
function bindKey(win,mac){return{win:win,mac:mac}}var lang=require("../lib/lang"),config=require("../config"),Range=require("../range").Range


exports.commands=[{name:"showSettingsMenu",bindKey:bindKey("Ctrl-,","Command-,"),exec:function(editor){
config.loadModule("ace/ext/settings_menu",function(module){module.init(editor),editor.showSettingsMenu()

})},readOnly:!0},{name:"goToNextError",bindKey:bindKey("Alt-E","F4"),exec:function(editor){config.loadModule("ace/ext/error_marker",function(module){
module.showErrorMarker(editor,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:bindKey("Alt-Shift-E","Shift-F4"),
exec:function(editor){config.loadModule("ace/ext/error_marker",function(module){module.showErrorMarker(editor,-1)

})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:bindKey("Ctrl-A","Command-A"),exec:function(editor){
editor.selectAll()},readOnly:!0},{name:"centerselection",bindKey:bindKey(null,"Ctrl-L"),exec:function(editor){
editor.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:bindKey("Ctrl-L","Command-L"),exec:function(editor){
var line=parseInt(prompt("Enter line number:"),10)
isNaN(line)||editor.gotoLine(line)},readOnly:!0},{name:"fold",bindKey:bindKey("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),
exec:function(editor){editor.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",
readOnly:!0},{name:"unfold",bindKey:bindKey("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),
exec:function(editor){editor.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",
readOnly:!0},{name:"toggleFoldWidget",bindKey:bindKey("F2","F2"),exec:function(editor){editor.session.toggleFoldWidget()

},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:bindKey("Alt-F2","Alt-F2"),
exec:function(editor){editor.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",
readOnly:!0},{name:"foldall",bindKey:bindKey(null,"Ctrl-Command-Option-0"),exec:function(editor){editor.session.foldAll()

},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:bindKey("Alt-0","Command-Option-0"),
exec:function(editor){editor.session.foldAll(),editor.session.unfold(editor.selection.getAllRanges())

},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:bindKey("Alt-Shift-0","Command-Option-Shift-0"),
exec:function(editor){editor.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",
bindKey:bindKey("Ctrl-K","Command-G"),exec:function(editor){editor.findNext()},multiSelectAction:"forEach",
scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:bindKey("Ctrl-Shift-K","Command-Shift-G"),
exec:function(editor){editor.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0
},{name:"selectOrFindNext",bindKey:bindKey("Alt-K","Ctrl-G"),exec:function(editor){editor.selection.isEmpty()?editor.selection.selectWord():editor.findNext()

},readOnly:!0},{name:"selectOrFindPrevious",bindKey:bindKey("Alt-Shift-K","Ctrl-Shift-G"),exec:function(editor){
editor.selection.isEmpty()?editor.selection.selectWord():editor.findPrevious()},readOnly:!0},{name:"find",
bindKey:bindKey("Ctrl-F","Command-F"),exec:function(editor){config.loadModule("ace/ext/searchbox",function(e){
e.Search(editor)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(editor){editor.toggleOverwrite()

},readOnly:!0},{name:"selecttostart",bindKey:bindKey("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),
exec:function(editor){editor.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,
scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:bindKey("Ctrl-Home","Command-Home|Command-Up"),
exec:function(editor){editor.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",
aceCommandGroup:"fileJump"},{name:"selectup",bindKey:bindKey("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(editor){
editor.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",
bindKey:bindKey("Up","Up|Ctrl-P"),exec:function(editor,args){editor.navigateUp(args.times)},multiSelectAction:"forEach",
scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",bindKey:bindKey("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),
exec:function(editor){editor.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,
scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:bindKey("Ctrl-End","Command-End|Command-Down"),
exec:function(editor){editor.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",
aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:bindKey("Shift-Down","Shift-Down|Ctrl-Shift-N"),
exec:function(editor){editor.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",
readOnly:!0},{name:"golinedown",bindKey:bindKey("Down","Down|Ctrl-N"),exec:function(editor,args){editor.navigateDown(args.times)

},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:bindKey("Ctrl-Shift-Left","Option-Shift-Left"),
exec:function(editor){editor.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",
readOnly:!0},{name:"gotowordleft",bindKey:bindKey("Ctrl-Left","Option-Left"),exec:function(editor){editor.navigateWordLeft()

},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:bindKey("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),
exec:function(editor){editor.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",
readOnly:!0},{name:"gotolinestart",bindKey:bindKey("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(editor){
editor.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",
bindKey:bindKey("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(editor){editor.getSelection().selectLeft()

},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:bindKey("Left","Left|Ctrl-B"),
exec:function(editor,args){editor.navigateLeft(args.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",
readOnly:!0},{name:"selectwordright",bindKey:bindKey("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(editor){
editor.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0
},{name:"gotowordright",bindKey:bindKey("Ctrl-Right","Option-Right"),exec:function(editor){editor.navigateWordRight()

},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:bindKey("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),
exec:function(editor){editor.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",
readOnly:!0},{name:"gotolineend",bindKey:bindKey("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(editor){
editor.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",
bindKey:bindKey("Shift-Right","Shift-Right"),exec:function(editor){editor.getSelection().selectRight()

},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:bindKey("Right","Right|Ctrl-F"),
exec:function(editor,args){editor.navigateRight(args.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",
readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(editor){editor.selectPageDown()

},readOnly:!0},{name:"pagedown",bindKey:bindKey(null,"Option-PageDown"),exec:function(editor){editor.scrollPageDown()

},readOnly:!0},{name:"gotopagedown",bindKey:bindKey("PageDown","PageDown|Ctrl-V"),exec:function(editor){
editor.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(editor){
editor.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:bindKey(null,"Option-PageUp"),exec:function(editor){
editor.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(editor){editor.gotoPageUp()

},readOnly:!0},{name:"scrollup",bindKey:bindKey("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)

},readOnly:!0},{name:"scrolldown",bindKey:bindKey("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)

},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(editor){editor.getSelection().selectLineStart()

},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",
exec:function(editor){editor.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",
readOnly:!0},{name:"togglerecording",bindKey:bindKey("Ctrl-Alt-E","Command-Option-E"),exec:function(editor){
editor.commands.toggleRecording(editor)},readOnly:!0},{name:"replaymacro",bindKey:bindKey("Ctrl-Shift-E","Command-Shift-E"),
exec:function(editor){editor.commands.replay(editor)},readOnly:!0},{name:"jumptomatching",bindKey:bindKey("Ctrl-P","Ctrl-P"),
exec:function(editor){editor.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0
},{name:"selecttomatching",bindKey:bindKey("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(editor){editor.jumpToMatching(!0)

},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",bindKey:bindKey("Ctrl-Shift-M","Ctrl-Shift-M"),
exec:function(editor){editor.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",
readOnly:!0},{name:"passKeysToBrowser",bindKey:bindKey(null,null),exec:function(){},passEvent:!0,readOnly:!0
},{name:"copy",exec:function(editor){},readOnly:!0},{name:"cut",exec:function(editor){var range=editor.getSelectionRange()


editor._emit("cut",range),editor.selection.isEmpty()||(editor.session.remove(range),editor.clearSelection())

},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",exec:function(editor,args){editor.$handlePaste(args)

},scrollIntoView:"cursor"},{name:"removeline",bindKey:bindKey("Ctrl-D","Command-D"),exec:function(editor){
editor.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",
bindKey:bindKey("Ctrl-Shift-D","Command-Shift-D"),exec:function(editor){editor.duplicateSelection()},
scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:bindKey("Ctrl-Alt-S","Command-Alt-S"),
exec:function(editor){editor.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{
name:"togglecomment",bindKey:bindKey("Ctrl-/","Command-/"),exec:function(editor){editor.toggleCommentLines()

},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:bindKey("Ctrl-Shift-/","Command-Shift-/"),
exec:function(editor){editor.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"
},{name:"modifyNumberUp",bindKey:bindKey("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(editor){editor.modifyNumber(1)

},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:bindKey("Ctrl-Shift-Down","Alt-Shift-Down"),
exec:function(editor){editor.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{
name:"replace",bindKey:bindKey("Ctrl-H","Command-Option-F"),exec:function(editor){config.loadModule("ace/ext/searchbox",function(e){
e.Search(editor,!0)})}},{name:"undo",bindKey:bindKey("Ctrl-Z","Command-Z"),exec:function(editor){editor.undo()

}},{name:"redo",bindKey:bindKey("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(editor){
editor.redo()}},{name:"copylinesup",bindKey:bindKey("Alt-Shift-Up","Command-Option-Up"),exec:function(editor){
editor.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:bindKey("Alt-Up","Option-Up"),
exec:function(editor){editor.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:bindKey("Alt-Shift-Down","Command-Option-Down"),
exec:function(editor){editor.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:bindKey("Alt-Down","Option-Down"),
exec:function(editor){editor.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:bindKey("Delete","Delete|Ctrl-D|Shift-Delete"),
exec:function(editor){editor.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",
bindKey:bindKey("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(editor){
editor.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:bindKey("Shift-Delete",null),
exec:function(editor){return!!editor.selection.isEmpty()&&void editor.remove("left")},multiSelectAction:"forEach",
scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:bindKey("Alt-Backspace","Command-Backspace"),
exec:function(editor){editor.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"
},{name:"removetolineend",bindKey:bindKey("Alt-Delete","Ctrl-K"),exec:function(editor){editor.removeToLineEnd()

},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:bindKey("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),
exec:function(editor){editor.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{
name:"removewordright",bindKey:bindKey("Ctrl-Delete","Alt-Delete"),exec:function(editor){editor.removeWordRight()

},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:bindKey("Shift-Tab","Shift-Tab"),
exec:function(editor){editor.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"
},{name:"indent",bindKey:bindKey("Tab","Tab"),exec:function(editor){editor.indent()},multiSelectAction:"forEach",
scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:bindKey("Ctrl-[","Ctrl-["),exec:function(editor){
editor.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",
bindKey:bindKey("Ctrl-]","Ctrl-]"),exec:function(editor){editor.blockIndent()},multiSelectAction:"forEachLine",
scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(editor,str){editor.insert(str)},multiSelectAction:"forEach",
scrollIntoView:"cursor"},{name:"inserttext",exec:function(editor,args){editor.insert(lang.stringRepeat(args.text||"",args.times||1))

},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:bindKey(null,"Ctrl-O"),
exec:function(editor){editor.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",
bindKey:bindKey("Alt-X","Ctrl-T"),exec:function(editor){editor.transposeLetters()},multiSelectAction:function(editor){
editor.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:bindKey("Ctrl-U","Ctrl-U"),
exec:function(editor){editor.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",
bindKey:bindKey("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(editor){editor.toLowerCase()},multiSelectAction:"forEach",
scrollIntoView:"cursor"},{name:"expandtoline",bindKey:bindKey("Ctrl-Shift-L","Command-Shift-L"),exec:function(editor){
var range=editor.selection.getRange()
range.start.column=range.end.column=0,range.end.row++,editor.selection.setRange(range,!1)},multiSelectAction:"forEach",
scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:bindKey(null,null),exec:function(editor){
for(var isBackwards=editor.selection.isBackwards(),selectionStart=isBackwards?editor.selection.getSelectionLead():editor.selection.getSelectionAnchor(),selectionEnd=isBackwards?editor.selection.getSelectionAnchor():editor.selection.getSelectionLead(),firstLineEndCol=editor.session.doc.getLine(selectionStart.row).length,selectedText=editor.session.doc.getTextRange(editor.selection.getRange()),selectedCount=selectedText.replace(/\n\s*/," ").length,insertLine=editor.session.doc.getLine(selectionStart.row),i=selectionStart.row+1;i<=selectionEnd.row+1;i++){
var curLine=lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)))
0!==curLine.length&&(curLine=" "+curLine),insertLine+=curLine}selectionEnd.row+1<editor.session.doc.getLength()-1&&(insertLine+=editor.session.doc.getNewLineCharacter()),
editor.clearSelection(),editor.session.doc.replace(new Range(selectionStart.row,0,selectionEnd.row+2,0),insertLine),
selectedCount>0?(editor.selection.moveCursorTo(selectionStart.row,selectionStart.column),editor.selection.selectTo(selectionStart.row,selectionStart.column+selectedCount)):(firstLineEndCol=editor.session.doc.getLine(selectionStart.row).length>firstLineEndCol?firstLineEndCol+1:firstLineEndCol,
editor.selection.moveCursorTo(selectionStart.row,firstLineEndCol))},multiSelectAction:"forEach",readOnly:!0
},{name:"invertSelection",bindKey:bindKey(null,null),exec:function(editor){var endRow=editor.session.doc.getLength()-1,endCol=editor.session.doc.getLine(endRow).length,ranges=editor.selection.rangeList.ranges,newRanges=[]


ranges.length<1&&(ranges=[editor.selection.getRange()])
for(var i=0;i<ranges.length;i++)i==ranges.length-1&&(ranges[i].end.row===endRow&&ranges[i].end.column===endCol||newRanges.push(new Range(ranges[i].end.row,ranges[i].end.column,endRow,endCol))),
0===i?0===ranges[i].start.row&&0===ranges[i].start.column||newRanges.push(new Range(0,0,ranges[i].start.row,ranges[i].start.column)):newRanges.push(new Range(ranges[i-1].end.row,ranges[i-1].end.column,ranges[i].start.row,ranges[i].start.column))


editor.exitMultiSelectMode(),editor.clearSelection()
for(var i=0;i<newRanges.length;i++)editor.selection.addRange(newRanges[i],!1)},readOnly:!0,scrollIntoView:"none"
}]})


define("ace/editor",[],function(require,exports,module){"use strict"
require("./lib/fixoldbrowsers")
var oop=require("./lib/oop"),dom=require("./lib/dom"),lang=require("./lib/lang"),useragent=require("./lib/useragent"),TextInput=require("./keyboard/textinput").TextInput,MouseHandler=require("./mouse/mouse_handler").MouseHandler,FoldHandler=require("./mouse/fold_handler").FoldHandler,KeyBinding=require("./keyboard/keybinding").KeyBinding,EditSession=require("./edit_session").EditSession,Search=require("./search").Search,Range=require("./range").Range,EventEmitter=require("./lib/event_emitter").EventEmitter,CommandManager=require("./commands/command_manager").CommandManager,defaultCommands=require("./commands/default_commands").commands,config=require("./config"),TokenIterator=require("./token_iterator").TokenIterator,Editor=function(renderer,session){
var container=renderer.getContainerElement()
this.container=container,this.renderer=renderer,this.id="editor"+ ++Editor.$uid,this.commands=new CommandManager(useragent.isMac?"mac":"win",defaultCommands),
"object"==typeof document&&(this.textInput=new TextInput(renderer.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),
this.$mouseHandler=new MouseHandler(this),new FoldHandler(this)),this.keyBinding=new KeyBinding(this),
this.$search=(new Search).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),
this.$initOperationListeners(),this._$emitInputEvent=lang.delayedCall(function(){this._signal("input",{}),
this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(_,_self){
_self._$emitInputEvent.schedule(31)}),this.setSession(session||new EditSession("")),config.resetOptions(this),
config._signal("editor",this)}
Editor.$uid=0,function(){oop.implement(this,EventEmitter),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),
this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=lang.delayedCall(this.endOperation.bind(this)),
this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),
this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),
this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,
this.prevOp={},this.startOperation=function(commadEvent){if(this.curOp){if(!commadEvent||this.curOp.command)return


this.prevOp=this.curOp}commadEvent||(this.previousCommand=null,commadEvent={}),this.$opResetTimer.schedule(),
this.curOp=this.session.curOp={command:commadEvent.command||{},args:commadEvent.args,scrollTop:this.renderer.scrollTop
},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(e){if(this.curOp){if(e&&e.returnValue===!1)return this.curOp=null


this._signal("beforeEndOperation")
var command=this.curOp.command,scrollIntoView=command&&command.scrollIntoView
if(scrollIntoView){switch(scrollIntoView){case"center-animate":scrollIntoView="animate"
case"center":this.renderer.scrollCursorIntoView(null,.5)
break
case"animate":case"cursor":this.renderer.scrollCursorIntoView()
break
case"selectionPart":var range=this.selection.getRange(),config=this.renderer.layerConfig;(range.start.row>=config.lastRow||range.end.row<=config.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)

}"animate"==scrollIntoView&&this.renderer.animateScrolling(this.curOp.scrollTop)}var sel=this.selection.toJSON()


this.curOp.selectionAfter=sel,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(sel),
this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){
if(this.$mergeUndoDeltas){var prev=this.prevOp,mergeableCommands=this.$mergeableCommands,shouldMerge=prev.command&&e.command.name==prev.command.name


if("insertstring"==e.command.name){var text=e.args
void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),shouldMerge=shouldMerge&&this.mergeNextCommand&&(!/\s/.test(text)||/\s/.test(prev.args)),
this.mergeNextCommand=!0}else shouldMerge=shouldMerge&&mergeableCommands.indexOf(e.command.name)!==-1


"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(shouldMerge=!1),shouldMerge?this.session.mergeUndoDeltas=!0:mergeableCommands.indexOf(e.command.name)!==-1&&(this.sequenceStartTime=Date.now())

}},this.setKeyboardHandler=function(keyboardHandler,cb){if(keyboardHandler&&"string"==typeof keyboardHandler){
this.$keybindingId=keyboardHandler
var _self=this
config.loadModule(["keybinding",keyboardHandler],function(module){_self.$keybindingId==keyboardHandler&&_self.keyBinding.setKeyboardHandler(module&&module.handler),
cb&&cb()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(keyboardHandler),cb&&cb()},
this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(session){
if(this.session!=session){this.curOp&&this.endOperation(),this.curOp={}
var oldSession=this.session
if(oldSession){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),
this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),
this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),
this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),
this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),
this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),
this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange)


var selection=this.session.getSelection()
selection.off("changeCursor",this.$onCursorChange),selection.off("changeSelection",this.$onSelectionChange)

}this.session=session,session?(this.$onDocumentChange=this.onDocumentChange.bind(this),session.on("change",this.$onDocumentChange),
this.renderer.setSession(session),this.$onChangeMode=this.onChangeMode.bind(this),session.on("changeMode",this.$onChangeMode),
this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),session.on("tokenizerUpdate",this.$onTokenizerUpdate),
this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),session.on("changeTabSize",this.$onChangeTabSize),
this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),session.on("changeWrapLimit",this.$onChangeWrapLimit),
this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),session.on("changeWrapMode",this.$onChangeWrapMode),
this.$onChangeFold=this.onChangeFold.bind(this),session.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),
this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),
this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),
this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),
this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),
this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),
this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),
this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=session.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),
this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),
this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),
this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),
this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,
this.renderer.setSession(session)),this._signal("changeSession",{session:session,oldSession:oldSession
}),this.curOp=null,oldSession&&oldSession._signal("changeEditor",{oldEditor:this}),session&&session._signal("changeEditor",{
editor:this}),session&&session.bgTokenizer&&session.bgTokenizer.scheduleStart()}},this.getSession=function(){
return this.session},this.setValue=function(val,cursorPos){return this.session.doc.setValue(val),cursorPos?1==cursorPos?this.navigateFileEnd():cursorPos==-1&&this.navigateFileStart():this.selectAll(),
val},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection

},this.resize=function(force){this.renderer.onResize(force)},this.setTheme=function(theme,cb){this.renderer.setTheme(theme,cb)

},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(style){this.renderer.setStyle(style)

},this.unsetStyle=function(style){this.renderer.unsetStyle(style)},this.getFontSize=function(){return this.getOption("fontSize")||dom.computedStyle(this.container,"fontSize")

},this.setFontSize=function(size){this.setOption("fontSize",size)},this.$highlightBrackets=function(){
if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),
!this.$highlightPending){var self=this
this.$highlightPending=!0,setTimeout(function(){self.$highlightPending=!1
var session=self.session
if(session&&session.bgTokenizer){var pos=session.findMatchingBracket(self.getCursorPosition())
if(pos)var range=new Range(pos.row,pos.column,pos.row,pos.column+1)
else if(session.$mode.getMatching)var range=session.$mode.getMatching(self.session)
range&&(session.$bracketHighlight=session.addMarker(range,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){
if(!this.$highlightTagPending){var self=this
this.$highlightTagPending=!0,setTimeout(function(){self.$highlightTagPending=!1
var session=self.session
if(session&&session.bgTokenizer){var pos=self.getCursorPosition(),iterator=new TokenIterator(self.session,pos.row,pos.column),token=iterator.getCurrentToken()


if(!token||!/\b(?:tag-open|tag-name)/.test(token.type))return session.removeMarker(session.$tagHighlight),
void(session.$tagHighlight=null)
if(token.type.indexOf("tag-open")==-1||(token=iterator.stepForward())){var tag=token.value,depth=0,prevToken=iterator.stepBackward()


if("<"==prevToken.value){do prevToken=token,token=iterator.stepForward(),token&&token.value===tag&&token.type.indexOf("tag-name")!==-1&&("<"===prevToken.value?depth++:"</"===prevToken.value&&depth--)
while(token&&depth>=0)}else{do token=prevToken,prevToken=iterator.stepBackward(),token&&token.value===tag&&token.type.indexOf("tag-name")!==-1&&("<"===prevToken.value?depth++:"</"===prevToken.value&&depth--)
while(prevToken&&depth<=0)
iterator.stepForward()}if(!token)return session.removeMarker(session.$tagHighlight),void(session.$tagHighlight=null)


var row=iterator.getCurrentTokenRow(),column=iterator.getCurrentTokenColumn(),range=new Range(row,column,row,column+token.value.length),sbm=session.$backMarkers[session.$tagHighlight]


session.$tagHighlight&&void 0!=sbm&&0!==range.compareRange(sbm.range)&&(session.removeMarker(session.$tagHighlight),
session.$tagHighlight=null),range&&!session.$tagHighlight&&(session.$tagHighlight=session.addMarker(range,"ace_bracket","text"))

}}},50)}},this.focus=function(){var _self=this
setTimeout(function(){_self.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()

},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,
this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){
this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))

},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(delta){var wrap=this.session.$useWrapMode,lastRow=delta.start.row==delta.end.row?delta.end.row:1/0


this.renderer.updateLines(delta.start.row,lastRow,wrap),this._signal("change",delta),this.$cursorChange(),
this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var rows=e.data
this.renderer.updateLines(rows.first,rows.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())

},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){
this.$cursorChange(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),
this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var highlight,session=this.getSession()


if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(highlight=this.getCursorPosition()),
!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(highlight=!1)),session.$highlightLineMarker&&!highlight)session.removeMarker(session.$highlightLineMarker.id),
session.$highlightLineMarker=null
else if(!session.$highlightLineMarker&&highlight){var range=new Range(highlight.row,highlight.column,highlight.row,1/0)


range.id=session.addMarker(range,"ace_active-line","screenLine"),session.$highlightLineMarker=range}else highlight&&(session.$highlightLineMarker.start.row=highlight.row,
session.$highlightLineMarker.end.row=highlight.row,session.$highlightLineMarker.start.column=highlight.column,
session._signal("changeBackMarker"))},this.onSelectionChange=function(e){var session=this.session
if(session.$selectionMarker&&session.removeMarker(session.$selectionMarker),session.$selectionMarker=null,
this.selection.isEmpty())this.$updateHighlightActiveLine()
else{var range=this.selection.getRange(),style=this.getSelectionStyle()
session.$selectionMarker=session.addMarker(range,"ace_selection",style)}var re=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp()


this.session.highlight(re),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){
var session=this.session,selection=this.getSelectionRange()
if(!selection.isEmpty()&&!selection.isMultiLine()){var startOuter=selection.start.column-1,endOuter=selection.end.column+1,line=session.getLine(selection.start.row),lineCols=line.length,needle=line.substring(Math.max(startOuter,0),Math.min(endOuter,lineCols))


if(!(startOuter>=0&&/^[\w\d]/.test(needle)||endOuter<=lineCols&&/[\w\d]$/.test(needle))&&(needle=line.substring(selection.start.column,selection.end.column),
/^[\w\d]+$/.test(needle))){var re=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:needle
})
return re}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){
this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()

},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){
this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()

},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),
this.renderer.updateFull()},this.getSelectedText=function(newLineCharacter){return this.session.getTextRange(this.getSelectionRange(),newLineCharacter)

},this.getCopyText=function(){var text=this.getSelectedText(useragent.isWin?"\r\n":"\n")
return this._signal("copy",text),text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){
this.commands.exec("cut",this)},this.onPaste=function(text,event){var e={text:text,event:event}
this.commands.exec("paste",this,e)},this.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e)


var text=e.text
if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(text)
else{var lines=text.split(/\r\n|\r|\n/),ranges=this.selection.rangeList.ranges
if(lines.length>ranges.length||lines.length<2||!lines[1])return this.commands.exec("insertstring",this,text)


for(var i=ranges.length;i--;){var range=ranges[i]
range.isEmpty()||this.session.remove(range),this.session.insert(range.start,lines[i])}}},this.execCommand=function(command,args){
return this.commands.exec(command,this,args)},this.transformAction=function(type,text){},this.insert=function(text,pasted){
var session=this.session,mode=session.getMode(),cursor=this.getCursorPosition()
if(this.getBehavioursEnabled()&&!pasted){var transform=mode.transformAction(session.getState(cursor.row),"insertion",this,session,text)


transform&&(text!==transform.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),
text=transform.text)}if("\t"==text&&(text=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&text.indexOf("\n")==-1){
var range=new Range.fromPoints(cursor,cursor)
range.end.column+=text.length,this.session.remove(range)}}else{var range=this.getSelectionRange()
cursor=this.session.remove(range),this.clearSelection()}if("\n"==text||"\r\n"==text){var line=session.getLine(cursor.row)


if(cursor.column>line.search(/\S|$/)){var d=line.substr(cursor.column).search(/\S|$/)
session.doc.removeInLine(cursor.row,cursor.column,cursor.column+d)}}this.clearSelection()
var start=cursor.column,lineState=session.getState(cursor.row),line=session.getLine(cursor.row),shouldOutdent=mode.checkOutdent(lineState,line,text)


session.insert(cursor,text)
if(transform&&transform.selection&&(2==transform.selection.length?this.selection.setSelectionRange(new Range(cursor.row,start+transform.selection[0],cursor.row,start+transform.selection[1])):this.selection.setSelectionRange(new Range(cursor.row+transform.selection[0],transform.selection[1],cursor.row+transform.selection[2],transform.selection[3]))),
session.getDocument().isNewLine(text)){var lineIndent=mode.getNextLineIndent(lineState,line.slice(0,cursor.column),session.getTabString())


session.insert({row:cursor.row+1,column:0},lineIndent)}shouldOutdent&&mode.autoOutdent(lineState,session,cursor.row)

},this.onTextInput=function(text){this.keyBinding.onTextInput(text)},this.onCommandKey=function(e,hashId,keyCode){
this.keyBinding.onCommandKey(e,hashId,keyCode)},this.setOverwrite=function(overwrite){this.session.setOverwrite(overwrite)

},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()

},this.setScrollSpeed=function(speed){this.setOption("scrollSpeed",speed)},this.getScrollSpeed=function(){
return this.getOption("scrollSpeed")},this.setDragDelay=function(dragDelay){this.setOption("dragDelay",dragDelay)

},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(val){
this.setOption("selectionStyle",val)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")

},this.setHighlightActiveLine=function(shouldHighlight){this.setOption("highlightActiveLine",shouldHighlight)

},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(shouldHighlight){
this.setOption("highlightGutterLine",shouldHighlight)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")

},this.setHighlightSelectedWord=function(shouldHighlight){this.setOption("highlightSelectedWord",shouldHighlight)

},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(shouldAnimate){
this.renderer.setAnimatedScroll(shouldAnimate)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()

},this.setShowInvisibles=function(showInvisibles){this.renderer.setShowInvisibles(showInvisibles)},this.getShowInvisibles=function(){
return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(display){this.renderer.setDisplayIndentGuides(display)

},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(showPrintMargin){
this.renderer.setShowPrintMargin(showPrintMargin)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()

},this.setPrintMarginColumn=function(showPrintMargin){this.renderer.setPrintMarginColumn(showPrintMargin)

},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(readOnly){
this.setOption("readOnly",readOnly)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(enabled){
this.setOption("behavioursEnabled",enabled)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")

},this.setWrapBehavioursEnabled=function(enabled){this.setOption("wrapBehavioursEnabled",enabled)},this.getWrapBehavioursEnabled=function(){
return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(show){this.setOption("showFoldWidgets",show)

},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(fade){
this.setOption("fadeFoldWidgets",fade)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")

},this.remove=function(dir){this.selection.isEmpty()&&("left"==dir?this.selection.selectLeft():this.selection.selectRight())


var range=this.getSelectionRange()
if(this.getBehavioursEnabled()){var session=this.session,state=session.getState(range.start.row),new_range=session.getMode().transformAction(state,"deletion",this,session,range)


if(0===range.end.column){var text=session.getTextRange(range)
if("\n"==text[text.length-1]){var line=session.getLine(range.end.row);/^\s+$/.test(line)&&(range.end.column=line.length)

}}new_range&&(range=new_range)}this.session.remove(range),this.clearSelection()},this.removeWordRight=function(){
this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),
this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),
this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){
this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),
this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd()


var range=this.getSelectionRange()
range.start.column==range.end.column&&range.start.row==range.end.row&&(range.end.column=0,range.end.row++),
this.session.remove(range),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),
this.clearSelection())
var cursor=this.getCursorPosition()
this.insert("\n"),this.moveCursorToPosition(cursor)},this.transposeLetters=function(){if(this.selection.isEmpty()){
var cursor=this.getCursorPosition(),column=cursor.column
if(0!==column){var swap,range,line=this.session.getLine(cursor.row)
column<line.length?(swap=line.charAt(column)+line.charAt(column-1),range=new Range(cursor.row,column-1,cursor.row,column+1)):(swap=line.charAt(column-1)+line.charAt(column-2),
range=new Range(cursor.row,column-2,cursor.row,column)),this.session.replace(range,swap),this.session.selection.moveToPosition(range.end)

}}},this.toLowerCase=function(){var originalRange=this.getSelectionRange()
this.selection.isEmpty()&&this.selection.selectWord()
var range=this.getSelectionRange(),text=this.session.getTextRange(range)
this.session.replace(range,text.toLowerCase()),this.selection.setSelectionRange(originalRange)},this.toUpperCase=function(){
var originalRange=this.getSelectionRange()
this.selection.isEmpty()&&this.selection.selectWord()
var range=this.getSelectionRange(),text=this.session.getTextRange(range)
this.session.replace(range,text.toUpperCase()),this.selection.setSelectionRange(originalRange)},this.indent=function(){
var session=this.session,range=this.getSelectionRange()
if(range.start.row<range.end.row){var rows=this.$getSelectedRows()
return void session.indentRows(rows.first,rows.last,"\t")}if(range.start.column<range.end.column){var text=session.getTextRange(range)


if(!/^\s+$/.test(text)){var rows=this.$getSelectedRows()
return void session.indentRows(rows.first,rows.last,"\t")}}var line=session.getLine(range.start.row),position=range.start,size=session.getTabSize(),column=session.documentToScreenColumn(position.row,position.column)


if(this.session.getUseSoftTabs())var count=size-column%size,indentString=lang.stringRepeat(" ",count)
else{for(var count=column%size;" "==line[range.start.column-1]&&count;)range.start.column--,count--
this.selection.setSelectionRange(range),indentString="\t"}return this.insert(indentString)},this.blockIndent=function(){
var rows=this.$getSelectedRows()
this.session.indentRows(rows.first,rows.last,"\t")},this.blockOutdent=function(){var selection=this.session.getSelection()


this.session.outdentRows(selection.getRange())},this.sortLines=function(){var rows=this.$getSelectedRows(),session=this.session,lines=[]


for(i=rows.first;i<=rows.last;i++)lines.push(session.getLine(i))
lines.sort(function(a,b){return a.toLowerCase()<b.toLowerCase()?-1:a.toLowerCase()>b.toLowerCase()?1:0

})
for(var deleteRange=new Range(0,0,0,0),i=rows.first;i<=rows.last;i++){var line=session.getLine(i)
deleteRange.start.row=i,deleteRange.end.row=i,deleteRange.end.column=line.length,session.replace(deleteRange,lines[i-rows.first])

}},this.toggleCommentLines=function(){var state=this.session.getState(this.getCursorPosition().row),rows=this.$getSelectedRows()


this.session.getMode().toggleCommentLines(state,this.session,rows.first,rows.last)},this.toggleBlockComment=function(){
var cursor=this.getCursorPosition(),state=this.session.getState(cursor.row),range=this.getSelectionRange()


this.session.getMode().toggleBlockComment(state,this.session,range,cursor)},this.getNumberAt=function(row,column){
var _numberRx=/[\-]?[0-9]+(?:\.[0-9]+)?/g
_numberRx.lastIndex=0
for(var s=this.session.getLine(row);_numberRx.lastIndex<column;){var m=_numberRx.exec(s)
if(m.index<=column&&m.index+m[0].length>=column){var number={value:m[0],start:m.index,end:m.index+m[0].length
}
return number}}return null},this.modifyNumber=function(amount){var row=this.selection.getCursor().row,column=this.selection.getCursor().column,charRange=new Range(row,column-1,row,column),c=this.session.getTextRange(charRange)


if(!isNaN(parseFloat(c))&&isFinite(c)){var nr=this.getNumberAt(row,column)
if(nr){var fp=nr.value.indexOf(".")>=0?nr.start+nr.value.indexOf(".")+1:nr.end,decimals=nr.start+nr.value.length-fp,t=parseFloat(nr.value)


t*=Math.pow(10,decimals),amount*=fp!==nr.end&&column<fp?Math.pow(10,nr.end-column-1):Math.pow(10,nr.end-column),
t+=amount,t/=Math.pow(10,decimals)
var nnr=t.toFixed(decimals),replaceRange=new Range(row,nr.start,row,nr.end)
this.session.replace(replaceRange,nnr),this.moveCursorTo(row,Math.max(nr.start+1,column+nnr.length-nr.value.length))

}}},this.removeLines=function(){var rows=this.$getSelectedRows()
this.session.removeFullLines(rows.first,rows.last),this.clearSelection()},this.duplicateSelection=function(){
var sel=this.selection,doc=this.session,range=sel.getRange(),reverse=sel.isBackwards()
if(range.isEmpty()){var row=range.start.row
doc.duplicateLines(row,row)}else{var point=reverse?range.start:range.end,endPoint=doc.insert(point,doc.getTextRange(range),!1)


range.start=point,range.end=endPoint,sel.setSelectionRange(range,reverse)}},this.moveLinesDown=function(){
this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(range,toPosition,copy){
return this.session.moveText(range,toPosition,copy)},this.copyLinesUp=function(){this.$moveLines(-1,!0)

},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(dir,copy){var rows,moved,selection=this.selection


if(!selection.inMultiSelectMode||this.inVirtualSelectionMode){var range=selection.toOrientedRange()
rows=this.$getSelectedRows(range),moved=this.session.$moveLines(rows.first,rows.last,copy?0:dir),copy&&dir==-1&&(moved=0),
range.moveBy(moved,0),selection.fromOrientedRange(range)}else{var ranges=selection.rangeList.ranges
selection.rangeList.detach(this.session),this.inVirtualSelectionMode=!0
for(var diff=0,totalDiff=0,l=ranges.length,i=0;i<l;i++){var rangeIndex=i
ranges[i].moveBy(diff,0),rows=this.$getSelectedRows(ranges[i])
for(var first=rows.first,last=rows.last;++i<l;){totalDiff&&ranges[i].moveBy(totalDiff,0)
var subRows=this.$getSelectedRows(ranges[i])
if(copy&&subRows.first!=last)break
if(!copy&&subRows.first>last+1)break
last=subRows.last}for(i--,diff=this.session.$moveLines(first,last,copy?0:dir),copy&&dir==-1&&(rangeIndex=i+1);rangeIndex<=i;)ranges[rangeIndex].moveBy(diff,0),
rangeIndex++
copy||(diff=0),totalDiff+=diff}selection.fromOrientedRange(selection.ranges[0]),selection.rangeList.attach(this.session),
this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(range){return range=(range||this.getSelectionRange()).collapseRows(),
{first:this.session.getRowFoldStart(range.start.row),last:this.session.getRowFoldEnd(range.end.row)}},
this.onCompositionStart=function(text){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(text){
this.renderer.setCompositionText(text)},this.onCompositionEnd=function(){this.renderer.hideComposition()

},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){
return this.renderer.getLastVisibleRow()},this.isRowVisible=function(row){return row>=this.getFirstVisibleRow()&&row<=this.getLastVisibleRow()

},this.isRowFullyVisible=function(row){return row>=this.renderer.getFirstFullyVisibleRow()&&row<=this.renderer.getLastFullyVisibleRow()

},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1

},this.$moveByPage=function(dir,select){var renderer=this.renderer,config=this.renderer.layerConfig,rows=dir*Math.floor(config.height/config.lineHeight)


select===!0?this.selection.$moveSelection(function(){this.moveCursorBy(rows,0)}):select===!1&&(this.selection.moveCursorBy(rows,0),
this.selection.clearSelection())
var scrollTop=renderer.scrollTop
renderer.scrollBy(0,rows*config.lineHeight),null!=select&&renderer.scrollCursorIntoView(null,.5),renderer.animateScrolling(scrollTop)

},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)

},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)

},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)

},this.scrollToRow=function(row){this.renderer.scrollToRow(row)},this.scrollToLine=function(line,center,animate,callback){
this.renderer.scrollToLine(line,center,animate,callback)},this.centerSelection=function(){var range=this.getSelectionRange(),pos={
row:Math.floor(range.start.row+(range.end.row-range.start.row)/2),column:Math.floor(range.start.column+(range.end.column-range.start.column)/2)
}
this.renderer.alignCursor(pos,.5)},this.getCursorPosition=function(){return this.selection.getCursor()

},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())

},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()

},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(row,column){
this.selection.moveCursorTo(row,column)},this.moveCursorToPosition=function(pos){this.selection.moveCursorToPosition(pos)

},this.jumpToMatching=function(select,expand){var cursor=this.getCursorPosition(),iterator=new TokenIterator(this.session,cursor.row,cursor.column),prevToken=iterator.getCurrentToken(),token=prevToken||iterator.stepForward()


if(token){var matchType,bracketType,found=!1,depth={},i=cursor.column-token.start,brackets={")":"(","(":"(",
"]":"[","[":"[","{":"{","}":"{"}
do{if(token.value.match(/[{}()\[\]]/g)){for(;i<token.value.length&&!found;i++)if(brackets[token.value[i]])switch(bracketType=brackets[token.value[i]]+"."+token.type.replace("rparen","lparen"),
isNaN(depth[bracketType])&&(depth[bracketType]=0),token.value[i]){case"(":case"[":case"{":depth[bracketType]++


break
case")":case"]":case"}":depth[bracketType]--,depth[bracketType]===-1&&(matchType="bracket",found=!0)}
}else token&&token.type.indexOf("tag-name")!==-1&&(isNaN(depth[token.value])&&(depth[token.value]=0),
"<"===prevToken.value?depth[token.value]++:"</"===prevToken.value&&depth[token.value]--,depth[token.value]===-1&&(matchType="tag",
found=!0))
found||(prevToken=token,token=iterator.stepForward(),i=0)}while(token&&!found)
if(matchType){var range,pos
if("bracket"===matchType)range=this.session.getBracketRange(cursor),range||(range=new Range(iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()+i-1,iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()+i-1),
pos=range.start,(expand||pos.row===cursor.row&&Math.abs(pos.column-cursor.column)<2)&&(range=this.session.getBracketRange(pos)))
else if("tag"===matchType){if(!token||token.type.indexOf("tag-name")===-1)return
var tag=token.value
if(range=new Range(iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()-2,iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()-2),
0===range.compare(cursor.row,cursor.column)){found=!1
do token=prevToken,prevToken=iterator.stepBackward(),prevToken&&(prevToken.type.indexOf("tag-close")!==-1&&range.setEnd(iterator.getCurrentTokenRow(),iterator.getCurrentTokenColumn()+1),
token.value===tag&&token.type.indexOf("tag-name")!==-1&&("<"===prevToken.value?depth[tag]++:"</"===prevToken.value&&depth[tag]--,
0===depth[tag]&&(found=!0)))
while(prevToken&&!found)}token&&token.type.indexOf("tag-name")&&(pos=range.start,pos.row==cursor.row&&Math.abs(pos.column-cursor.column)<2&&(pos=range.end))

}pos=range&&range.cursor||pos,pos&&(select?range&&expand?this.selection.setRange(range):range&&range.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(pos.row,pos.column):this.selection.moveTo(pos.row,pos.column))

}}},this.gotoLine=function(lineNumber,column,animate){this.selection.clearSelection(),this.session.unfold({
row:lineNumber-1,column:column||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(lineNumber-1,column||0),
this.isRowFullyVisible(lineNumber-1)||this.scrollToLine(lineNumber-1,!0,animate)},this.navigateTo=function(row,column){
this.selection.moveTo(row,column)},this.navigateUp=function(times){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){
var selectionStart=this.selection.anchor.getPosition()
return this.moveCursorToPosition(selectionStart)}this.selection.clearSelection(),this.selection.moveCursorBy(-times||-1,0)

},this.navigateDown=function(times){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var selectionEnd=this.selection.anchor.getPosition()


return this.moveCursorToPosition(selectionEnd)}this.selection.clearSelection(),this.selection.moveCursorBy(times||1,0)

},this.navigateLeft=function(times){if(this.selection.isEmpty())for(times=times||1;times--;)this.selection.moveCursorLeft()
else{var selectionStart=this.getSelectionRange().start
this.moveCursorToPosition(selectionStart)}this.clearSelection()},this.navigateRight=function(times){if(this.selection.isEmpty())for(times=times||1;times--;)this.selection.moveCursorRight()
else{var selectionEnd=this.getSelectionRange().end
this.moveCursorToPosition(selectionEnd)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),
this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()

},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){
this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),
this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()

},this.replace=function(replacement,options){options&&this.$search.set(options)
var range=this.$search.find(this.session),replaced=0
return range?(this.$tryReplace(range,replacement)&&(replaced=1),null!==range&&(this.selection.setSelectionRange(range),
this.renderer.scrollSelectionIntoView(range.start,range.end)),replaced):replaced},this.replaceAll=function(replacement,options){
options&&this.$search.set(options)
var ranges=this.$search.findAll(this.session),replaced=0
if(!ranges.length)return replaced
var selection=this.getSelectionRange()
this.selection.moveTo(0,0)
for(var i=ranges.length-1;i>=0;--i)this.$tryReplace(ranges[i],replacement)&&replaced++
return this.selection.setSelectionRange(selection),replaced},this.$tryReplace=function(range,replacement){
var input=this.session.getTextRange(range)
return replacement=this.$search.replace(input,replacement),null!==replacement?(range.end=this.session.replace(range,replacement),
range):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(needle,options,animate){
options||(options={}),"string"==typeof needle||needle instanceof RegExp?options.needle=needle:"object"==typeof needle&&oop.mixin(options,needle)


var range=this.selection.getRange()
null==options.needle&&(needle=this.session.getTextRange(range)||this.$search.$options.needle,needle||(range=this.session.getWordRange(range.start.row,range.start.column),
needle=this.session.getTextRange(range)),this.$search.set({needle:needle})),this.$search.set(options),
options.start||this.$search.set({start:range})
var newRange=this.$search.find(this.session)
return options.preventScroll?newRange:newRange?(this.revealRange(newRange,animate),newRange):(options.backwards?range.start=range.end:range.end=range.start,
void this.selection.setRange(range))},this.findNext=function(options,animate){this.find({skipCurrent:!0,
backwards:!1},options,animate)},this.findPrevious=function(options,animate){this.find(options,{skipCurrent:!0,
backwards:!0},animate)},this.revealRange=function(range,animate){this.session.unfold(range),this.selection.setSelectionRange(range)


var scrollTop=this.renderer.scrollTop
this.renderer.scrollSelectionIntoView(range.start,range.end,.5),animate!==!1&&this.renderer.animateScrolling(scrollTop)

},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)

},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)

},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()

},this.setAutoScrollEditorIntoView=function(enable){if(enable){var rect,self=this,shouldScroll=!1
this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"))
var scrollAnchor=this.$scrollAnchor
scrollAnchor.style.cssText="position:absolute",this.container.insertBefore(scrollAnchor,this.container.firstChild)


var onChangeSelection=this.on("changeSelection",function(){shouldScroll=!0}),onBeforeRender=this.renderer.on("beforeRender",function(){
shouldScroll&&(rect=self.renderer.container.getBoundingClientRect())}),onAfterRender=this.renderer.on("afterRender",function(){
if(shouldScroll&&rect&&(self.isFocused()||self.searchBox&&self.searchBox.isFocused())){var renderer=self.renderer,pos=renderer.$cursorLayer.$pixelPos,config=renderer.layerConfig,top=pos.top-config.offset


shouldScroll=pos.top>=0&&top+rect.top<0||!(pos.top<config.height&&pos.top+rect.top+config.lineHeight>window.innerHeight)&&null,
null!=shouldScroll&&(scrollAnchor.style.top=top+"px",scrollAnchor.style.left=pos.left+"px",scrollAnchor.style.height=config.lineHeight+"px",
scrollAnchor.scrollIntoView(shouldScroll)),shouldScroll=rect=null}})
this.setAutoScrollEditorIntoView=function(enable){enable||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",onChangeSelection),
this.renderer.off("afterRender",onAfterRender),this.renderer.off("beforeRender",onBeforeRender))}}},this.$resetCursorStyle=function(){
var style=this.$cursorStyle||"ace",cursorLayer=this.renderer.$cursorLayer
cursorLayer&&(cursorLayer.setSmoothBlinking(/smooth/.test(style)),cursorLayer.isBlinking=!this.$readOnly&&"wide"!=style,
dom.setCssClass(cursorLayer.element,"ace_slim-cursors",/slim/.test(style)))}}.call(Editor.prototype),
config.defineOptions(Editor.prototype,"editor",{selectionStyle:{set:function(style){this.onSelectionChange(),
this._signal("changeSelectionStyle",{data:style})},initialValue:"line"},highlightActiveLine:{set:function(){
this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(shouldHighlight){
this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(readOnly){this.$resetCursorStyle()

},initialValue:!1},cursorStyle:{set:function(val){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],
initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0
},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(val){this.setAutoScrollEditorIntoView(val)

}},keyboardHandler:{set:function(val){this.setKeyboardHandler(val)},get:function(){return this.keybindingId

},handlesSet:!0},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",
animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",
printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",
showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",
minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",
dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",
firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",
tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),exports.Editor=Editor

})


define("ace/layer/gutter",[],function(require,exports,module){"use strict"
var dom=require("../lib/dom"),oop=require("../lib/oop"),lang=require("../lib/lang"),EventEmitter=require("../lib/event_emitter").EventEmitter,Gutter=function(parentEl){
this.element=dom.createElement("div"),this.element.className="ace_layer ace_gutter-layer",parentEl.appendChild(this.element),
this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),
this.$cells=[]};(function(){oop.implement(this,EventEmitter),this.setSession=function(session){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),
this.session=session,session&&session.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(row,className){
window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(row,className)

},this.removeGutterDecoration=function(row,className){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),
this.session.removeGutterDecoration(row,className)},this.setAnnotations=function(annotations){this.$annotations=[]


for(var i=0;i<annotations.length;i++){var annotation=annotations[i],row=annotation.row,rowInfo=this.$annotations[row]


rowInfo||(rowInfo=this.$annotations[row]={text:[]})
var annoText=annotation.text
annoText=annoText?lang.escapeHTML(annoText):annotation.html||"",rowInfo.text.indexOf(annoText)===-1&&rowInfo.text.push(annoText)


var type=annotation.type
"error"==type?rowInfo.className=" ace_error":"warning"==type&&" ace_error"!=rowInfo.className?rowInfo.className=" ace_warning":"info"!=type||rowInfo.className||(rowInfo.className=" ace_info")

}},this.$updateAnnotations=function(delta){if(this.$annotations.length){var firstRow=delta.start.row,len=delta.end.row-firstRow


if(0===len);else if("remove"==delta.action)this.$annotations.splice(firstRow,len+1,null)
else{var args=new Array(len+1)
args.unshift(firstRow,1),this.$annotations.splice.apply(this.$annotations,args)}}},this.update=function(config){
for(var session=this.session,firstRow=config.firstRow,lastRow=Math.min(config.lastRow+config.gutterOffset,session.getLength()-1),fold=session.getNextFoldLine(firstRow),foldStart=fold?fold.start.row:1/0,foldWidgets=this.$showFoldWidgets&&session.foldWidgets,breakpoints=session.$breakpoints,decorations=session.$decorations,firstLineNumber=session.$firstLineNumber,lastLineNumber=0,gutterRenderer=session.gutterRenderer||this.$renderer,cell=null,index=-1,row=firstRow;;){
if(row>foldStart&&(row=fold.end.row+1,fold=session.getNextFoldLine(row,fold),foldStart=fold?fold.start.row:1/0),
row>lastRow){for(;this.$cells.length>index+1;)cell=this.$cells.pop(),this.element.removeChild(cell.element)


break}cell=this.$cells[++index],cell||(cell={element:null,textNode:null,foldWidget:null},cell.element=dom.createElement("div"),
cell.textNode=document.createTextNode(""),cell.element.appendChild(cell.textNode),this.element.appendChild(cell.element),
this.$cells[index]=cell)
var className="ace_gutter-cell "
breakpoints[row]&&(className+=breakpoints[row]),decorations[row]&&(className+=decorations[row]),this.$annotations[row]&&(className+=this.$annotations[row].className),
cell.element.className!=className&&(cell.element.className=className)
var height=session.getRowLength(row)*config.lineHeight+"px"
if(height!=cell.element.style.height&&(cell.element.style.height=height),foldWidgets){var c=foldWidgets[row]


null==c&&(c=foldWidgets[row]=session.getFoldWidget(row))}if(c){cell.foldWidget||(cell.foldWidget=dom.createElement("span"),
cell.element.appendChild(cell.foldWidget))
var className="ace_fold-widget ace_"+c
className+="start"==c&&row==foldStart&&row<fold.end.row?" ace_closed":" ace_open",cell.foldWidget.className!=className&&(cell.foldWidget.className=className)


var height=config.lineHeight+"px"
cell.foldWidget.style.height!=height&&(cell.foldWidget.style.height=height)}else cell.foldWidget&&(cell.element.removeChild(cell.foldWidget),
cell.foldWidget=null)
var text=lastLineNumber=gutterRenderer?gutterRenderer.getText(session,row):row+firstLineNumber
text!==cell.textNode.data&&(cell.textNode.data=text),row++}this.element.style.height=config.minHeight+"px",
(this.$fixedWidth||session.$useWrapMode)&&(lastLineNumber=session.getLength()+firstLineNumber)
var gutterWidth=gutterRenderer?gutterRenderer.getWidth(session,lastLineNumber,config):lastLineNumber.toString().length*config.characterWidth,padding=this.$padding||this.$computePadding()


gutterWidth+=padding.left+padding.right,gutterWidth===this.gutterWidth||isNaN(gutterWidth)||(this.gutterWidth=gutterWidth,
this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",gutterWidth))

},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(show){
this.$renderer=!show&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){
return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(show){show?dom.addCssClass(this.element,"ace_folding-enabled"):dom.removeCssClass(this.element,"ace_folding-enabled"),
this.$showFoldWidgets=show,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets

},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0}
var style=dom.computedStyle(this.element.firstChild)
return this.$padding={},this.$padding.left=parseInt(style.paddingLeft)+1||0,this.$padding.right=parseInt(style.paddingRight)||0,
this.$padding},this.getRegion=function(point){var padding=this.$padding||this.$computePadding(),rect=this.element.getBoundingClientRect()


return point.x<padding.left+rect.left?"markers":this.$showFoldWidgets&&point.x>rect.right-padding.right?"foldWidgets":void 0

}}).call(Gutter.prototype),exports.Gutter=Gutter})


define("ace/layer/marker",[],function(require,exports,module){"use strict"
var Range=require("../range").Range,dom=require("../lib/dom"),Marker=function(parentEl){this.element=dom.createElement("div"),
this.element.className="ace_layer ace_marker-layer",parentEl.appendChild(this.element)};(function(){function getBorderClass(tl,tr,br,bl){
return(tl?1:0)|(tr?2:0)|(br?4:0)|(bl?8:0)}this.$padding=0,this.setPadding=function(padding){this.$padding=padding

},this.setSession=function(session){this.session=session},this.setMarkers=function(markers){this.markers=markers

},this.update=function(config){if(config){this.config=config
var html=[]
for(var key in this.markers){var marker=this.markers[key]
if(marker.range){var range=marker.range.clipRows(config.firstRow,config.lastRow)
if(!range.isEmpty())if(range=range.toScreenRange(this.session),marker.renderer){var top=this.$getTop(range.start.row,config),left=this.$padding+range.start.column*config.characterWidth


marker.renderer(html,range,left,top,config)}else"fullLine"==marker.type?this.drawFullLineMarker(html,range,marker.clazz,config):"screenLine"==marker.type?this.drawScreenLineMarker(html,range,marker.clazz,config):range.isMultiLine()?"text"==marker.type?this.drawTextMarker(html,range,marker.clazz,config):this.drawMultiLineMarker(html,range,marker.clazz,config):this.drawSingleLineMarker(html,range,marker.clazz+" ace_start ace_br15",config)

}else marker.update(html,this,this.session,config)}this.element.innerHTML=html.join("")}},this.$getTop=function(row,layerConfig){
return(row-layerConfig.firstRowScreen)*layerConfig.lineHeight},this.drawTextMarker=function(stringBuilder,range,clazz,layerConfig,extraStyle){
for(var session=this.session,start=range.start.row,end=range.end.row,row=start,prev=0,curr=0,next=session.getScreenLastRowColumn(row),lineRange=new Range(row,range.start.column,row,curr);row<=end;row++)lineRange.start.row=lineRange.end.row=row,
lineRange.start.column=row==start?range.start.column:session.getRowWrapIndent(row),lineRange.end.column=next,
prev=curr,curr=next,next=row+1<end?session.getScreenLastRowColumn(row+1):row==end?0:range.end.column,
this.drawSingleLineMarker(stringBuilder,lineRange,clazz+(row==start?" ace_start":"")+" ace_br"+getBorderClass(row==start||row==start+1&&range.start.column,prev<curr,curr>next,row==end),layerConfig,row==end?0:1,extraStyle)

},this.drawMultiLineMarker=function(stringBuilder,range,clazz,config,extraStyle){var padding=this.$padding,height=config.lineHeight,top=this.$getTop(range.start.row,config),left=padding+range.start.column*config.characterWidth


extraStyle=extraStyle||"",stringBuilder.push("<div class='",clazz," ace_br1 ace_start' style='","height:",height,"px;","right:0;","top:",top,"px;","left:",left,"px;",extraStyle,"'></div>"),
top=this.$getTop(range.end.row,config)
var width=range.end.column*config.characterWidth
if(stringBuilder.push("<div class='",clazz," ace_br12' style='","height:",height,"px;","width:",width,"px;","top:",top,"px;","left:",padding,"px;",extraStyle,"'></div>"),
height=(range.end.row-range.start.row-1)*config.lineHeight,!(height<=0)){top=this.$getTop(range.start.row+1,config)


var radiusClass=(range.start.column?1:0)|(range.end.column?0:8)
stringBuilder.push("<div class='",clazz,radiusClass?" ace_br"+radiusClass:"","' style='","height:",height,"px;","right:0;","top:",top,"px;","left:",padding,"px;",extraStyle,"'></div>")

}},this.drawSingleLineMarker=function(stringBuilder,range,clazz,config,extraLength,extraStyle){var height=config.lineHeight,width=(range.end.column+(extraLength||0)-range.start.column)*config.characterWidth,top=this.$getTop(range.start.row,config),left=this.$padding+range.start.column*config.characterWidth


stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","width:",width,"px;","top:",top,"px;","left:",left,"px;",extraStyle||"","'></div>")

},this.drawFullLineMarker=function(stringBuilder,range,clazz,config,extraStyle){var top=this.$getTop(range.start.row,config),height=config.lineHeight


range.start.row!=range.end.row&&(height+=this.$getTop(range.end.row,config)-top),stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","top:",top,"px;","left:0;right:0;",extraStyle||"","'></div>")

},this.drawScreenLineMarker=function(stringBuilder,range,clazz,config,extraStyle){var top=this.$getTop(range.start.row,config),height=config.lineHeight


stringBuilder.push("<div class='",clazz,"' style='","height:",height,"px;","top:",top,"px;","left:0;right:0;",extraStyle||"","'></div>")

}}).call(Marker.prototype),exports.Marker=Marker})


define("ace/layer/text",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),dom=require("../lib/dom"),lang=require("../lib/lang"),EventEmitter=(require("../lib/useragent"),
require("../lib/event_emitter").EventEmitter),Text=function(parentEl){this.element=dom.createElement("div"),
this.element.className="ace_layer ace_text-layer",parentEl.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)

};(function(){oop.implement(this,EventEmitter),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",
this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.$updateEolChar=function(){
var doc=this.session.doc,unixMode="\n"==doc.getNewLineCharacter()&&"windows"!=doc.getNewLineMode(),EOL_CHAR=unixMode?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF


if(this.EOL_CHAR!=EOL_CHAR)return this.EOL_CHAR=EOL_CHAR,!0},this.setPadding=function(padding){this.$padding=padding,
this.element.style.padding="0 "+padding+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0

},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(measure){
this.$fontMetrics=measure,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)

}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()

},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()

},this.setSession=function(session){this.session=session,session&&this.$computeTabString()},this.showInvisibles=!1,
this.setShowInvisibles=function(showInvisibles){return this.showInvisibles!=showInvisibles&&(this.showInvisibles=showInvisibles,
this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(display){
return this.displayIndentGuides!=display&&(this.displayIndentGuides=display,this.$computeTabString(),
!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var tabSize=this.session.getTabSize()


this.tabSize=tabSize
for(var tabStr=this.$tabStrings=[0],i=1;i<tabSize+1;i++)this.showInvisibles?tabStr.push("<span class='ace_invisible ace_invisible_tab'>"+lang.stringRepeat(this.TAB_CHAR,i)+"</span>"):tabStr.push(lang.stringRepeat(" ",i))


if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/
var className="ace_indent-guide",spaceClass="",tabClass=""
if(this.showInvisibles){className+=" ace_invisible",spaceClass=" ace_invisible_space",tabClass=" ace_invisible_tab"


var spaceContent=lang.stringRepeat(this.SPACE_CHAR,this.tabSize),tabContent=lang.stringRepeat(this.TAB_CHAR,this.tabSize)

}else var spaceContent=lang.stringRepeat(" ",this.tabSize),tabContent=spaceContent
this.$tabStrings[" "]="<span class='"+className+spaceClass+"'>"+spaceContent+"</span>",this.$tabStrings["\t"]="<span class='"+className+tabClass+"'>"+tabContent+"</span>"

}},this.updateLines=function(config,firstRow,lastRow){this.config.lastRow==config.lastRow&&this.config.firstRow==config.firstRow||this.scrollLines(config),
this.config=config
for(var first=Math.max(firstRow,config.firstRow),last=Math.min(lastRow,config.lastRow),lineElements=this.element.childNodes,lineElementsIdx=0,row=config.firstRow;row<first;row++){
var foldLine=this.session.getFoldLine(row)
if(foldLine){if(foldLine.containsRow(first)){first=foldLine.start.row
break}row=foldLine.end.row}lineElementsIdx++}for(var row=first,foldLine=this.session.getNextFoldLine(row),foldStart=foldLine?foldLine.start.row:1/0;;){
if(row>foldStart&&(row=foldLine.end.row+1,foldLine=this.session.getNextFoldLine(row,foldLine),foldStart=foldLine?foldLine.start.row:1/0),
row>last)break
var lineElement=lineElements[lineElementsIdx++]
if(lineElement){var html=[]
this.$renderLine(html,row,!this.$useLineGroups(),row==foldStart&&foldLine),lineElement.style.height=config.lineHeight*this.session.getRowLength(row)+"px",
lineElement.innerHTML=html.join("")}row++}},this.scrollLines=function(config){var oldConfig=this.config


if(this.config=config,!oldConfig||oldConfig.lastRow<config.firstRow)return this.update(config)
if(config.lastRow<oldConfig.firstRow)return this.update(config)
var el=this.element
if(oldConfig.firstRow<config.firstRow)for(var row=this.session.getFoldedRowCount(oldConfig.firstRow,config.firstRow-1);row>0;row--)el.removeChild(el.firstChild)


if(oldConfig.lastRow>config.lastRow)for(var row=this.session.getFoldedRowCount(config.lastRow+1,oldConfig.lastRow);row>0;row--)el.removeChild(el.lastChild)


if(config.firstRow<oldConfig.firstRow){var fragment=this.$renderLinesFragment(config,config.firstRow,oldConfig.firstRow-1)


el.firstChild?el.insertBefore(fragment,el.firstChild):el.appendChild(fragment)}if(config.lastRow>oldConfig.lastRow){
var fragment=this.$renderLinesFragment(config,oldConfig.lastRow+1,config.lastRow)
el.appendChild(fragment)}},this.$renderLinesFragment=function(config,firstRow,lastRow){for(var fragment=this.element.ownerDocument.createDocumentFragment(),row=firstRow,foldLine=this.session.getNextFoldLine(row),foldStart=foldLine?foldLine.start.row:1/0;;){
if(row>foldStart&&(row=foldLine.end.row+1,foldLine=this.session.getNextFoldLine(row,foldLine),foldStart=foldLine?foldLine.start.row:1/0),
row>lastRow)break
var container=dom.createElement("div"),html=[]
if(this.$renderLine(html,row,!1,row==foldStart&&foldLine),container.innerHTML=html.join(""),this.$useLineGroups())container.className="ace_line_group",
fragment.appendChild(container),container.style.height=config.lineHeight*this.session.getRowLength(row)+"px"
else for(;container.firstChild;)fragment.appendChild(container.firstChild)
row++}return fragment},this.update=function(config){this.config=config
for(var html=[],firstRow=config.firstRow,lastRow=config.lastRow,row=firstRow,foldLine=this.session.getNextFoldLine(row),foldStart=foldLine?foldLine.start.row:1/0;;){
if(row>foldStart&&(row=foldLine.end.row+1,foldLine=this.session.getNextFoldLine(row,foldLine),foldStart=foldLine?foldLine.start.row:1/0),
row>lastRow)break
this.$useLineGroups()&&html.push("<div class='ace_line_group' style='height:",config.lineHeight*this.session.getRowLength(row),"px'>"),
this.$renderLine(html,row,!1,row==foldStart&&foldLine),this.$useLineGroups()&&html.push("</div>"),row++

}this.element.innerHTML=html.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(stringBuilder,screenColumn,token,value){
var self=this,replaceReg=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,replaceFunc=function(c,a,b,tabIdx,idx4){
if(a)return self.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+lang.stringRepeat(self.SPACE_CHAR,c.length)+"</span>":c


if("&"==c)return"&#38;"
if("<"==c)return"&#60;"
if(">"==c)return"&#62;"
if("\t"==c){var tabSize=self.session.getScreenTabSize(screenColumn+tabIdx)
return screenColumn+=tabSize-1,self.$tabStrings[tabSize]}if("\u3000"==c){var classToUse=self.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",space=self.showInvisibles?self.SPACE_CHAR:""


return screenColumn+=1,"<span class='"+classToUse+"' style='width:"+2*self.config.characterWidth+"px'>"+space+"</span>"

}return b?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+self.SPACE_CHAR+"</span>":(screenColumn+=1,
"<span class='ace_cjk' style='width:"+2*self.config.characterWidth+"px'>"+c+"</span>")},output=value.replace(replaceReg,replaceFunc)


if(this.$textToken[token.type])stringBuilder.push(output)
else{var classes="ace_"+token.type.replace(/\./g," ace_"),style=""
"fold"==token.type&&(style=" style='width:"+token.value.length*this.config.characterWidth+"px;' "),stringBuilder.push("<span class='",classes,"'",style,">",output,"</span>")

}return screenColumn+value.length},this.renderIndentGuide=function(stringBuilder,value,max){var cols=value.search(this.$indentGuideRe)


return cols<=0||cols>=max?value:" "==value[0]?(cols-=cols%this.tabSize,stringBuilder.push(lang.stringRepeat(this.$tabStrings[" "],cols/this.tabSize)),
value.substr(cols)):"\t"==value[0]?(stringBuilder.push(lang.stringRepeat(this.$tabStrings["\t"],cols)),
value.substr(cols)):value},this.$renderWrappedLine=function(stringBuilder,tokens,splits,onlyContents){
for(var chars=0,split=0,splitChars=splits[0],screenColumn=0,i=0;i<tokens.length;i++){var token=tokens[i],value=token.value


if(0==i&&this.displayIndentGuides){if(chars=value.length,value=this.renderIndentGuide(stringBuilder,value,splitChars),
!value)continue
chars-=value.length}if(chars+value.length<splitChars)screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value),
chars+=value.length
else{for(;chars+value.length>=splitChars;)screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value.substring(0,splitChars-chars)),
value=value.substring(splitChars-chars),chars=splitChars,onlyContents||stringBuilder.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),
stringBuilder.push(lang.stringRepeat("\xa0",splits.indent)),split++,screenColumn=0,splitChars=splits[split]||Number.MAX_VALUE


0!=value.length&&(chars+=value.length,screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value))

}}},this.$renderSimpleLine=function(stringBuilder,tokens){var screenColumn=0,token=tokens[0],value=token.value


this.displayIndentGuides&&(value=this.renderIndentGuide(stringBuilder,value)),value&&(screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value))


for(var i=1;i<tokens.length;i++)token=tokens[i],value=token.value,screenColumn=this.$renderToken(stringBuilder,screenColumn,token,value)

},this.$renderLine=function(stringBuilder,row,onlyContents,foldLine){if(foldLine||0==foldLine||(foldLine=this.session.getFoldLine(row)),
foldLine)var tokens=this.$getFoldLineTokens(row,foldLine)
else var tokens=this.session.getTokens(row)
if(onlyContents||stringBuilder.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(row)),"px'>"),
tokens.length){var splits=this.session.getRowSplitData(row)
splits&&splits.length?this.$renderWrappedLine(stringBuilder,tokens,splits,onlyContents):this.$renderSimpleLine(stringBuilder,tokens)

}this.showInvisibles&&(foldLine&&(row=foldLine.end.row),stringBuilder.push("<span class='ace_invisible ace_invisible_eol'>",row==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),
onlyContents||stringBuilder.push("</div>")},this.$getFoldLineTokens=function(row,foldLine){function addTokens(tokens,from,to){
for(var idx=0,col=0;col+tokens[idx].value.length<from;)if(col+=tokens[idx].value.length,idx++,idx==tokens.length)return


if(col!=from){var value=tokens[idx].value.substring(from-col)
value.length>to-from&&(value=value.substring(0,to-from)),renderTokens.push({type:tokens[idx].type,value:value
}),col=from+value.length,idx+=1}for(;col<to&&idx<tokens.length;){var value=tokens[idx].value
value.length+col>to?renderTokens.push({type:tokens[idx].type,value:value.substring(0,to-col)}):renderTokens.push(tokens[idx]),
col+=value.length,idx+=1}}var session=this.session,renderTokens=[],tokens=session.getTokens(row)
return foldLine.walk(function(placeholder,row,column,lastColumn,isNewRow){null!=placeholder?renderTokens.push({
type:"fold",value:placeholder}):(isNewRow&&(tokens=session.getTokens(row)),tokens.length&&addTokens(tokens,lastColumn,column))

},foldLine.end.row,this.session.getLine(foldLine.end.row).length),renderTokens},this.$useLineGroups=function(){
return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),
this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode

}}).call(Text.prototype),exports.Text=Text})


define("ace/layer/cursor",[],function(require,exports,module){"use strict"
var isIE8,dom=require("../lib/dom"),Cursor=function(parentEl){this.element=dom.createElement("div"),this.element.className="ace_layer ace_cursor-layer",
parentEl.appendChild(this.element),void 0===isIE8&&(isIE8=!("opacity"in this.element.style)),this.isVisible=!1,
this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),
dom.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=(isIE8?this.$updateVisibility:this.$updateOpacity).bind(this)

};(function(){this.$updateVisibility=function(val){for(var cursors=this.cursors,i=cursors.length;i--;)cursors[i].style.visibility=val?"":"hidden"

},this.$updateOpacity=function(val){for(var cursors=this.cursors,i=cursors.length;i--;)cursors[i].style.opacity=val?"":"0"

},this.$padding=0,this.setPadding=function(padding){this.$padding=padding},this.setSession=function(session){
this.session=session},this.setBlinking=function(blinking){blinking!=this.isBlinking&&(this.isBlinking=blinking,
this.restartTimer())},this.setBlinkInterval=function(blinkInterval){blinkInterval!=this.blinkInterval&&(this.blinkInterval=blinkInterval,
this.restartTimer())},this.setSmoothBlinking=function(smoothBlinking){smoothBlinking==this.smoothBlinking||isIE8||(this.smoothBlinking=smoothBlinking,
dom.setCssClass(this.element,"ace_smooth-blinking",smoothBlinking),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),
this.restartTimer())},this.addCursor=function(){var el=dom.createElement("div")
return el.className="ace_cursor",this.element.appendChild(el),this.cursors.push(el),el},this.removeCursor=function(){
if(this.cursors.length>1){var el=this.cursors.pop()
return el.parentNode.removeChild(el),el}},this.hideCursor=function(){this.isVisible=!1,dom.addCssClass(this.element,"ace_hidden-cursors"),
this.restartTimer()},this.showCursor=function(){this.isVisible=!0,dom.removeCssClass(this.element,"ace_hidden-cursors"),
this.restartTimer()},this.restartTimer=function(){var update=this.$updateCursors
if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&dom.removeCssClass(this.element,"ace_smooth-blinking"),
update(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){
dom.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))
var blink=function(){this.timeoutId=setTimeout(function(){update(!1)},.6*this.blinkInterval)}.bind(this)


this.intervalId=setInterval(function(){update(!0),blink()},this.blinkInterval),blink()}},this.getPixelPosition=function(position,onScreen){
if(!this.config||!this.session)return{left:0,top:0}
position||(position=this.session.selection.getCursor())
var pos=this.session.documentToScreenPosition(position),cursorLeft=this.$padding+pos.column*this.config.characterWidth,cursorTop=(pos.row-(onScreen?this.config.firstRowScreen:0))*this.config.lineHeight


return{left:cursorLeft,top:cursorTop}},this.update=function(config){this.config=config
var selections=this.session.$selectionMarkers,i=0,cursorIndex=0
void 0!==selections&&0!==selections.length||(selections=[{cursor:null}])
for(var i=0,n=selections.length;i<n;i++){var pixelPos=this.getPixelPosition(selections[i].cursor,!0)
if(!((pixelPos.top>config.height+config.offset||pixelPos.top<0)&&i>1)){var style=(this.cursors[cursorIndex++]||this.addCursor()).style


this.drawCursor?this.drawCursor(style,pixelPos,config,selections[i],this.session):(style.left=pixelPos.left+"px",
style.top=pixelPos.top+"px",style.width=config.characterWidth+"px",style.height=config.lineHeight+"px")

}}for(;this.cursors.length>cursorIndex;)this.removeCursor()
var overwrite=this.session.getOverwrite()
this.$setOverwrite(overwrite),this.$pixelPos=pixelPos,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(overwrite){
overwrite!=this.overwrite&&(this.overwrite=overwrite,overwrite?dom.addCssClass(this.element,"ace_overwrite-cursors"):dom.removeCssClass(this.element,"ace_overwrite-cursors"))

},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(Cursor.prototype),
exports.Cursor=Cursor})


define("ace/layer/font_metrics",[],function(require,exports,module){var oop=require("../lib/oop"),dom=require("../lib/dom"),lang=require("../lib/lang"),useragent=require("../lib/useragent"),EventEmitter=require("../lib/event_emitter").EventEmitter,CHAR_COUNT=0,ANIMATING=!1


document.addEventListener("transitionstart",function(){ANIMATING=!0}),document.addEventListener("transitionend",function(){
ANIMATING=!1})
var FontMetrics=exports.FontMetrics=function(parentEl,interval){this.el=dom.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),
this.$main=dom.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=dom.createElement("div"),
this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),
parentEl.appendChild(this.el),CHAR_COUNT||this.$testFractionalRect(),this.$measureNode.innerHTML=lang.stringRepeat("X",CHAR_COUNT),
this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){oop.implement(this,EventEmitter),
this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var el=dom.createElement("div")


this.$setMeasureNodeStyles(el.style),el.style.width="0.2px",document.documentElement.appendChild(el)
var w=el.getBoundingClientRect().width
CHAR_COUNT=w>0&&w<1?50:100,el.parentNode.removeChild(el)},this.$setMeasureNodeStyles=function(style,isRoot){
style.width=style.height="auto",style.left=style.top="0px",style.visibility="hidden",style.position="absolute",
style.whiteSpace="pre",useragent.isIE<8?style["font-family"]="inherit":style.font="inherit",style.overflow=isRoot?"hidden":"visible"

},this.checkForSizeChanges=function(){if(!ANIMATING){var size=this.$measureSizes()
if(size&&(this.$characterSize.width!==size.width||this.$characterSize.height!==size.height)){this.$measureNode.style.fontWeight="bold"


var boldSize=this.$measureSizes()
this.$measureNode.style.fontWeight="",this.$characterSize=size,this.charSizes=Object.create(null),this.allowBoldFonts=boldSize&&boldSize.width===size.width&&boldSize.height===size.height,
this._emit("changeCharacterSize",{data:size})}}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer


var self=this
return this.$pollSizeChangesTimer=setInterval(function(){self.checkForSizeChanges()},500)},this.setPolling=function(val){
val?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)

},this.$measureSizes=function(){if(50===CHAR_COUNT){var rect=null
try{rect=this.$measureNode.getBoundingClientRect()}catch(e){rect={width:0,height:0}}var size={height:rect.height,
width:rect.width/CHAR_COUNT}}else var size={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/CHAR_COUNT
}
return 0===size.width||0===size.height?null:size},this.$measureCharWidth=function(ch){this.$main.innerHTML=lang.stringRepeat(ch,CHAR_COUNT)


var rect=this.$main.getBoundingClientRect()
return rect.width/CHAR_COUNT},this.getCharacterWidth=function(ch){var w=this.charSizes[ch]
return void 0===w&&(w=this.charSizes[ch]=this.$measureCharWidth(ch)/this.$characterSize.width),w},this.destroy=function(){
clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)

}}).call(FontMetrics.prototype)})


define("ace/requirejs/text!ace/css/editor.css",[],"")


define("ace/virtual_renderer",[],function(require,exports,module){"use strict"
var oop=require("./lib/oop"),dom=require("./lib/dom"),config=require("./config"),useragent=require("./lib/useragent"),GutterLayer=require("./layer/gutter").Gutter,MarkerLayer=require("./layer/marker").Marker,TextLayer=require("./layer/text").Text,CursorLayer=require("./layer/cursor").Cursor,HScrollBar=require("./scrollbar").HScrollBar,VScrollBar=require("./scrollbar").VScrollBar,RenderLoop=require("./renderloop").RenderLoop,FontMetrics=require("./layer/font_metrics").FontMetrics,EventEmitter=require("./lib/event_emitter").EventEmitter,editorCss=require("./requirejs/text!./css/editor.css")


dom.importCssString(editorCss,"ace_editor.css")
var VirtualRenderer=function(container,theme){var _self=this
this.container=container||dom.createElement("div"),this.$keepTextAreaAtCursor=!useragent.isOldIE,dom.addCssClass(this.container,"ace_editor"),
this.setTheme(theme),this.$gutter=dom.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),
this.scroller=dom.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),
this.content=dom.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),
this.$gutterLayer=new GutterLayer(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),
this.$markerBack=new MarkerLayer(this.content)
var textLayer=this.$textLayer=new TextLayer(this.content)
this.canvas=textLayer.element,this.$markerFront=new MarkerLayer(this.content),this.$cursorLayer=new CursorLayer(this.content),
this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new VScrollBar(this.container,this),
this.scrollBarH=new HScrollBar(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){
_self.$scrollAnimation||_self.session.setScrollTop(e.data-_self.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){
_self.$scrollAnimation||_self.session.setScrollLeft(e.data-_self.scrollMargin.left)}),this.scrollTop=0,
this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new FontMetrics(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),
this.$textLayer.addEventListener("changeCharacterSize",function(e){_self.updateCharacterSize(),_self.onResize(!0,_self.gutterWidth,_self.$size.width,_self.$size.height),
_self._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,
$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,
minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,
v:0,h:0},this.$loop=new RenderLoop(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),
this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),config.resetOptions(this),
config._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,
this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,
this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,oop.implement(this,EventEmitter),
this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,
this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),
this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()

},this.setSession=function(session){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),
this.session=session,session&&this.scrollMargin.top&&session.getScrollTop()<=0&&session.setScrollTop(-this.scrollMargin.top),
this.$cursorLayer.setSession(session),this.$markerBack.setSession(session),this.$markerFront.setSession(session),
this.$gutterLayer.setSession(session),this.$textLayer.setSession(session),session&&(this.$loop.schedule(this.CHANGE_FULL),
this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),
this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(firstRow,lastRow,force){
if(void 0===lastRow&&(lastRow=1/0),this.$changedLines?(this.$changedLines.firstRow>firstRow&&(this.$changedLines.firstRow=firstRow),
this.$changedLines.lastRow<lastRow&&(this.$changedLines.lastRow=lastRow)):this.$changedLines={firstRow:firstRow,
lastRow:lastRow},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!force)return
this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)

},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()

},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()

},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(force){force?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)

},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){
this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(force,gutterWidth,width,height){
if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=force?1:0
var el=this.container
height||(height=el.clientHeight||el.scrollHeight),width||(width=el.clientWidth||el.scrollWidth)
var changes=this.$updateCachedSize(force,gutterWidth,width,height)
if(!this.$size.scrollerHeight||!width&&!height)return this.resizing=0
force&&(this.$gutterLayer.$padding=null),force?this.$renderChanges(changes|this.$changes,!0):this.$loop.schedule(changes|this.$changes),
this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(force,gutterWidth,width,height){
height-=this.$extraHeight||0
var changes=0,size=this.$size,oldSize={width:size.width,height:size.height,scrollerHeight:size.scrollerHeight,
scrollerWidth:size.scrollerWidth}
return height&&(force||size.height!=height)&&(size.height=height,changes|=this.CHANGE_SIZE,size.scrollerHeight=size.height,
this.$horizScroll&&(size.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",
changes|=this.CHANGE_SCROLL),width&&(force||size.width!=width)&&(changes|=this.CHANGE_SIZE,size.width=width,
null==gutterWidth&&(gutterWidth=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=gutterWidth,
this.scrollBarH.element.style.left=this.scroller.style.left=gutterWidth+"px",size.scrollerWidth=Math.max(0,width-gutterWidth-this.scrollBarV.getWidth()),
this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",
(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||force)&&(changes|=this.CHANGE_FULL)),
size.$dirty=!width||!height,changes&&this._signal("resize",oldSize),changes},this.onGutterResize=function(){
var gutterWidth=this.$showGutter?this.$gutter.offsetWidth:0
gutterWidth!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,gutterWidth,this.$size.width,this.$size.height)),
this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),
this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var availableWidth=this.$size.scrollerWidth-2*this.$padding,limit=Math.floor(availableWidth/this.characterWidth)


return this.session.adjustWrapLimit(limit,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(shouldAnimate){
this.setOption("animatedScroll",shouldAnimate)},this.getAnimatedScroll=function(){return this.$animatedScroll

},this.setShowInvisibles=function(showInvisibles){this.setOption("showInvisibles",showInvisibles)},this.getShowInvisibles=function(){
return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")

},this.setDisplayIndentGuides=function(display){this.setOption("displayIndentGuides",display)},this.setShowPrintMargin=function(showPrintMargin){
this.setOption("showPrintMargin",showPrintMargin)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")

},this.setPrintMarginColumn=function(showPrintMargin){this.setOption("printMarginColumn",showPrintMargin)

},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){
return this.getOption("showGutter")},this.setShowGutter=function(show){return this.setOption("showGutter",show)

},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(show){
this.setOption("fadeFoldWidgets",show)},this.setHighlightGutterLine=function(shouldHighlight){this.setOption("highlightGutterLine",shouldHighlight)

},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){
var pos=this.$cursorLayer.$pixelPos,height=this.layerConfig.lineHeight
if(this.session.getUseWrapMode()){var cursor=this.session.selection.getCursor()
cursor.column=0,pos=this.$cursorLayer.getPixelPosition(cursor,!0),height*=this.session.getRowLength(cursor.row)

}this.$gutterLineHighlight.style.top=pos.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=height+"px"

},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){
var containerEl=dom.createElement("div")
containerEl.className="ace_layer ace_print-margin-layer",this.$printMarginEl=dom.createElement("div"),
this.$printMarginEl.className="ace_print-margin",containerEl.appendChild(this.$printMarginEl),this.content.insertBefore(containerEl,this.content.firstChild)

}var style=this.$printMarginEl.style
style.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",style.visibility=this.$showPrintMargin?"visible":"hidden",
this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container

},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container

},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var config=this.layerConfig,posTop=this.$cursorLayer.$pixelPos.top,posLeft=this.$cursorLayer.$pixelPos.left


posTop-=config.offset
var style=this.textarea.style,h=this.lineHeight
if(posTop<0||posTop>config.height-h)return void(style.top=style.left="0")
var w=this.characterWidth
if(this.$composition){var val=this.textarea.value.replace(/^\x01+/,"")
w*=this.session.$getStringScreenWidth(val)[0]+2,h+=2}posLeft-=this.scrollLeft,posLeft>this.$size.scrollerWidth-w&&(posLeft=this.$size.scrollerWidth-w),
posLeft+=this.gutterWidth,style.height=h+"px",style.width=w+"px",style.left=Math.min(posLeft,this.$size.scrollerWidth-w)+"px",
style.top=Math.min(posTop,this.$size.height-h)+"px"}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow

},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)

},this.getLastFullyVisibleRow=function(){var config=this.layerConfig,lastRow=config.lastRow,top=this.session.documentToScreenRow(lastRow,0)*config.lineHeight


return top-this.session.getScrollTop()>config.height-config.lineHeight?lastRow-1:lastRow},this.getLastVisibleRow=function(){
return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(padding){this.$padding=padding,
this.$textLayer.setPadding(padding),this.$cursorLayer.setPadding(padding),this.$markerFront.setPadding(padding),
this.$markerBack.setPadding(padding),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},
this.setScrollMargin=function(top,bottom,left,right){var sm=this.scrollMargin
sm.top=0|top,sm.bottom=0|bottom,sm.right=0|right,sm.left=0|left,sm.v=sm.top+sm.bottom,sm.h=sm.left+sm.right,
sm.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-sm.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){
return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(alwaysVisible){this.setOption("hScrollBarAlwaysVisible",alwaysVisible)

},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(alwaysVisible){
this.setOption("vScrollBarAlwaysVisible",alwaysVisible)},this.$updateScrollBarV=function(){var scrollHeight=this.layerConfig.maxHeight,scrollerHeight=this.$size.scrollerHeight


!this.$maxLines&&this.$scrollPastEnd&&(scrollHeight-=(scrollerHeight-this.lineHeight)*this.$scrollPastEnd,
this.scrollTop>scrollHeight-scrollerHeight&&(scrollHeight=this.scrollTop+scrollerHeight,this.scrollBarV.scrollTop=null)),
this.scrollBarV.setScrollHeight(scrollHeight+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)

},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),
this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){
this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(changes,force){
if(this.$changes&&(changes|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!changes&&!force)return void(this.$changes|=changes)


if(this.$size.$dirty)return this.$changes|=changes,this.onResize(!0)
this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender")
var config=this.layerConfig
if(changes&this.CHANGE_FULL||changes&this.CHANGE_SIZE||changes&this.CHANGE_TEXT||changes&this.CHANGE_LINES||changes&this.CHANGE_SCROLL||changes&this.CHANGE_H_SCROLL){
if(changes|=this.$computeLayerConfig(),config.firstRow!=this.layerConfig.firstRow&&config.firstRowScreen==this.layerConfig.firstRowScreen){
var st=this.scrollTop+(config.firstRow-this.layerConfig.firstRow)*this.lineHeight
st>0&&(this.scrollTop=st,changes|=this.CHANGE_SCROLL,changes|=this.$computeLayerConfig())}config=this.layerConfig,
this.$updateScrollBarV(),changes&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-config.offset+"px",
this.content.style.marginTop=-config.offset+"px",this.content.style.width=config.width+2*this.$padding+"px",
this.content.style.height=config.minHeight+"px"}return changes&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",
this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),changes&this.CHANGE_FULL?(this.$textLayer.update(config),
this.$showGutter&&this.$gutterLayer.update(config),this.$markerBack.update(config),this.$markerFront.update(config),
this.$cursorLayer.update(config),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),
void this._signal("afterRender")):changes&this.CHANGE_SCROLL?(changes&this.CHANGE_TEXT||changes&this.CHANGE_LINES?this.$textLayer.update(config):this.$textLayer.scrollLines(config),
this.$showGutter&&this.$gutterLayer.update(config),this.$markerBack.update(config),this.$markerFront.update(config),
this.$cursorLayer.update(config),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),
void this._signal("afterRender")):(changes&this.CHANGE_TEXT?(this.$textLayer.update(config),this.$showGutter&&this.$gutterLayer.update(config)):changes&this.CHANGE_LINES?(this.$updateLines()||changes&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(config):(changes&this.CHANGE_TEXT||changes&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(config),
changes&this.CHANGE_CURSOR&&(this.$cursorLayer.update(config),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),
changes&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(config),changes&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(config),
void this._signal("afterRender"))},this.$autosize=function(){var height=this.session.getScreenLength()*this.lineHeight,maxHeight=this.$maxLines*this.lineHeight,desiredHeight=Math.min(maxHeight,Math.max((this.$minLines||1)*this.lineHeight,height))+this.scrollMargin.v+(this.$extraHeight||0)


this.$horizScroll&&(desiredHeight+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&desiredHeight>this.$maxPixelHeight&&(desiredHeight=this.$maxPixelHeight)


var vScroll=height>maxHeight
if(desiredHeight!=this.desiredHeight||this.$size.height!=this.desiredHeight||vScroll!=this.$vScroll){
vScroll!=this.$vScroll&&(this.$vScroll=vScroll,this.scrollBarV.setVisible(vScroll))
var w=this.container.clientWidth
this.container.style.height=desiredHeight+"px",this.$updateCachedSize(!0,this.$gutterWidth,w,desiredHeight),
this.desiredHeight=desiredHeight,this._signal("autosize")}},this.$computeLayerConfig=function(){var session=this.session,size=this.$size,hideScrollbars=size.height<=2*this.lineHeight,screenLines=this.session.getScreenLength(),maxHeight=screenLines*this.lineHeight,longestLine=this.$getLongestLine(),horizScroll=!hideScrollbars&&(this.$hScrollBarAlwaysVisible||size.scrollerWidth-longestLine-2*this.$padding<0),hScrollChanged=this.$horizScroll!==horizScroll


hScrollChanged&&(this.$horizScroll=horizScroll,this.scrollBarH.setVisible(horizScroll))
var vScrollBefore=this.$vScroll
this.$maxLines&&this.lineHeight>1&&this.$autosize()
var offset=this.scrollTop%this.lineHeight,minHeight=size.scrollerHeight+this.lineHeight,scrollPastEnd=!this.$maxLines&&this.$scrollPastEnd?(size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0


maxHeight+=scrollPastEnd
var sm=this.scrollMargin
this.session.setScrollTop(Math.max(-sm.top,Math.min(this.scrollTop,maxHeight-size.scrollerHeight+sm.bottom))),
this.session.setScrollLeft(Math.max(-sm.left,Math.min(this.scrollLeft,longestLine+2*this.$padding-size.scrollerWidth+sm.right)))


var vScroll=!hideScrollbars&&(this.$vScrollBarAlwaysVisible||size.scrollerHeight-maxHeight+scrollPastEnd<0||this.scrollTop>sm.top),vScrollChanged=vScrollBefore!==vScroll


vScrollChanged&&(this.$vScroll=vScroll,this.scrollBarV.setVisible(vScroll))
var firstRowScreen,firstRowHeight,lineCount=Math.ceil(minHeight/this.lineHeight)-1,firstRow=Math.max(0,Math.round((this.scrollTop-offset)/this.lineHeight)),lastRow=firstRow+lineCount,lineHeight=this.lineHeight


firstRow=session.screenToDocumentRow(firstRow,0)
var foldLine=session.getFoldLine(firstRow)
foldLine&&(firstRow=foldLine.start.row),firstRowScreen=session.documentToScreenRow(firstRow,0),firstRowHeight=session.getRowLength(firstRow)*lineHeight,
lastRow=Math.min(session.screenToDocumentRow(lastRow,0),session.getLength()-1),minHeight=size.scrollerHeight+session.getRowLength(lastRow)*lineHeight+firstRowHeight,
offset=this.scrollTop-firstRowScreen*lineHeight
var changes=0
return this.layerConfig.width!=longestLine&&(changes=this.CHANGE_H_SCROLL),(hScrollChanged||vScrollChanged)&&(changes=this.$updateCachedSize(!0,this.gutterWidth,size.width,size.height),
this._signal("scrollbarVisibilityChanged"),vScrollChanged&&(longestLine=this.$getLongestLine())),this.layerConfig={
width:longestLine,padding:this.$padding,firstRow:firstRow,firstRowScreen:firstRowScreen,lastRow:lastRow,
lineHeight:lineHeight,characterWidth:this.characterWidth,minHeight:minHeight,maxHeight:maxHeight,offset:offset,
gutterOffset:lineHeight?Math.max(0,Math.ceil((offset+size.height-size.scrollerHeight)/lineHeight)):0,
height:this.$size.scrollerHeight},changes},this.$updateLines=function(){if(this.$changedLines){var firstRow=this.$changedLines.firstRow,lastRow=this.$changedLines.lastRow


this.$changedLines=null
var layerConfig=this.layerConfig
if(!(firstRow>layerConfig.lastRow+1||lastRow<layerConfig.firstRow))return lastRow===1/0?(this.$showGutter&&this.$gutterLayer.update(layerConfig),
void this.$textLayer.update(layerConfig)):(this.$textLayer.updateLines(layerConfig,firstRow,lastRow),
!0)}},this.$getLongestLine=function(){var charCount=this.session.getScreenWidth()
return this.showInvisibles&&!this.session.$useWrapMode&&(charCount+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(charCount*this.characterWidth))

},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)

},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)

},this.addGutterDecoration=function(row,className){this.$gutterLayer.addGutterDecoration(row,className)

},this.removeGutterDecoration=function(row,className){this.$gutterLayer.removeGutterDecoration(row,className)

},this.updateBreakpoints=function(rows){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(annotations){
this.$gutterLayer.setAnnotations(annotations),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){
this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){
this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(anchor,lead,offset){this.scrollCursorIntoView(anchor,offset),
this.scrollCursorIntoView(lead,offset)},this.scrollCursorIntoView=function(cursor,offset,$viewMargin){
if(0!==this.$size.scrollerHeight){var pos=this.$cursorLayer.getPixelPosition(cursor),left=pos.left,top=pos.top,topMargin=$viewMargin&&$viewMargin.top||0,bottomMargin=$viewMargin&&$viewMargin.bottom||0,scrollTop=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop


scrollTop+topMargin>top?(offset&&scrollTop+topMargin>top+this.lineHeight&&(top-=offset*this.$size.scrollerHeight),
0===top&&(top=-this.scrollMargin.top),this.session.setScrollTop(top)):scrollTop+this.$size.scrollerHeight-bottomMargin<top+this.lineHeight&&(offset&&scrollTop+this.$size.scrollerHeight-bottomMargin<top-this.lineHeight&&(top+=offset*this.$size.scrollerHeight),
this.session.setScrollTop(top+this.lineHeight-this.$size.scrollerHeight))
var scrollLeft=this.scrollLeft
scrollLeft>left?(left<this.$padding+2*this.layerConfig.characterWidth&&(left=-this.scrollMargin.left),
this.session.setScrollLeft(left)):scrollLeft+this.$size.scrollerWidth<left+this.characterWidth?this.session.setScrollLeft(Math.round(left+this.characterWidth-this.$size.scrollerWidth)):scrollLeft<=this.$padding&&left-scrollLeft<this.characterWidth&&this.session.setScrollLeft(0)

}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()

},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){
return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(row){
this.session.setScrollTop(row*this.lineHeight)},this.alignCursor=function(cursor,alignment){"number"==typeof cursor&&(cursor={
row:cursor,column:0})
var pos=this.$cursorLayer.getPixelPosition(cursor),h=this.$size.scrollerHeight-this.lineHeight,offset=pos.top-h*(alignment||0)


return this.session.setScrollTop(offset),offset},this.STEPS=8,this.$calcSteps=function(fromValue,toValue){
var i=0,l=this.STEPS,steps=[],func=function(t,x_min,dx){return dx*(Math.pow(t-1,3)+1)+x_min}
for(i=0;i<l;++i)steps.push(func(i/this.STEPS,fromValue,toValue-fromValue))
return steps},this.scrollToLine=function(line,center,animate,callback){var pos=this.$cursorLayer.getPixelPosition({
row:line,column:0}),offset=pos.top
center&&(offset-=this.$size.scrollerHeight/2)
var initialScroll=this.scrollTop
this.session.setScrollTop(offset),animate!==!1&&this.animateScrolling(initialScroll,callback)},this.animateScrolling=function(fromValue,callback){
var toValue=this.scrollTop
if(this.$animatedScroll){var _self=this
if(fromValue!=toValue){if(this.$scrollAnimation){var oldSteps=this.$scrollAnimation.steps
if(oldSteps.length&&(fromValue=oldSteps[0],fromValue==toValue))return}var steps=_self.$calcSteps(fromValue,toValue)


this.$scrollAnimation={from:fromValue,to:toValue,steps:steps},clearInterval(this.$timer),_self.session.setScrollTop(steps.shift()),
_self.session.$scrollTop=toValue,this.$timer=setInterval(function(){steps.length?(_self.session.setScrollTop(steps.shift()),
_self.session.$scrollTop=toValue):null!=toValue?(_self.session.$scrollTop=-1,_self.session.setScrollTop(toValue),
toValue=null):(_self.$timer=clearInterval(_self.$timer),_self.$scrollAnimation=null,callback&&callback())

},10)}}},this.scrollToY=function(scrollTop){this.scrollTop!==scrollTop&&(this.$loop.schedule(this.CHANGE_SCROLL),
this.scrollTop=scrollTop)},this.scrollToX=function(scrollLeft){this.scrollLeft!==scrollLeft&&(this.scrollLeft=scrollLeft),
this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(x,y){this.session.setScrollTop(y),this.session.setScrollLeft(y)

},this.scrollBy=function(deltaX,deltaY){deltaY&&this.session.setScrollTop(this.session.getScrollTop()+deltaY),
deltaX&&this.session.setScrollLeft(this.session.getScrollLeft()+deltaX)},this.isScrollableBy=function(deltaX,deltaY){
return deltaY<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(deltaY>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(deltaX<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(deltaX>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))

},this.pixelToScreenCoordinates=function(x,y){var canvasPos=this.scroller.getBoundingClientRect(),offset=(x+this.scrollLeft-canvasPos.left-this.$padding)/this.characterWidth,row=Math.floor((y+this.scrollTop-canvasPos.top)/this.lineHeight),col=Math.round(offset)


return{row:row,column:col,side:offset-col>0?1:-1}},this.screenToTextCoordinates=function(x,y){var canvasPos=this.scroller.getBoundingClientRect(),col=Math.round((x+this.scrollLeft-canvasPos.left-this.$padding)/this.characterWidth),row=(y+this.scrollTop-canvasPos.top)/this.lineHeight


return this.session.screenToDocumentPosition(row,Math.max(col,0))},this.textToScreenCoordinates=function(row,column){
var canvasPos=this.scroller.getBoundingClientRect(),pos=this.session.documentToScreenPosition(row,column),x=this.$padding+Math.round(pos.column*this.characterWidth),y=pos.row*this.lineHeight


return{pageX:canvasPos.left+x-this.scrollLeft,pageY:canvasPos.top+y-this.scrollTop}},this.visualizeFocus=function(){
dom.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){dom.removeCssClass(this.container,"ace_focus")

},this.showComposition=function(position){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,
cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,dom.addCssClass(this.textarea,"ace_composition"),
this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(text){this.$moveTextAreaToCursor()

},this.hideComposition=function(){this.$composition&&(dom.removeCssClass(this.textarea,"ace_composition"),
this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,
this.$composition=null)},this.setTheme=function(theme,cb){function afterLoad(module){if(_self.$themeId!=theme)return cb&&cb()


if(!module||!module.cssClass)throw new Error("couldn't load module "+theme+" or it didn't call define")


dom.importCssString(module.cssText,module.cssClass,_self.container.ownerDocument),_self.theme&&dom.removeCssClass(_self.container,_self.theme.cssClass)


var padding="padding"in module?module.padding:"padding"in(_self.theme||{})?4:_self.$padding
_self.$padding&&padding!=_self.$padding&&_self.setPadding(padding),_self.$theme=module.cssClass,_self.theme=module,
dom.addCssClass(_self.container,module.cssClass),dom.setCssClass(_self.container,"ace_dark",module.isDark),
_self.$size&&(_self.$size.width=0,_self.$updateSizeAsync()),_self._dispatchEvent("themeLoaded",{theme:module
}),cb&&cb()}var _self=this
if(this.$themeId=theme,_self._dispatchEvent("themeChange",{theme:theme}),theme&&"string"!=typeof theme)afterLoad(theme)
else{var moduleName=theme||this.$options.theme.initialValue
config.loadModule(["theme",moduleName],afterLoad)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(style,include){
dom.setCssClass(this.container,style,include!==!1)},this.unsetStyle=function(style){dom.removeCssClass(this.container,style)

},this.setCursorStyle=function(style){this.scroller.style.cursor!=style&&(this.scroller.style.cursor=style)

},this.setMouseCursor=function(cursorStyle){this.scroller.style.cursor=cursorStyle},this.destroy=function(){
this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(VirtualRenderer.prototype),config.defineOptions(VirtualRenderer.prototype,"renderer",{
animatedScroll:{initialValue:!1},showInvisibles:{set:function(value){this.$textLayer.setShowInvisibles(value)&&this.$loop.schedule(this.CHANGE_TEXT)

},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{
set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(val){"number"==typeof val&&(this.$printMarginColumn=val),
this.$showPrintMargin=!!val,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn

}},showGutter:{set:function(show){this.$gutter.style.display=show?"block":"none",this.$loop.schedule(this.CHANGE_FULL),
this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(show){dom.setCssClass(this.$gutter,"ace_fade-fold-widgets",show)

},initialValue:!1},showFoldWidgets:{set:function(show){this.$gutterLayer.setShowFoldWidgets(show)},initialValue:!0
},showLineNumbers:{set:function(show){this.$gutterLayer.setShowLineNumbers(show),this.$loop.schedule(this.CHANGE_GUTTER)

},initialValue:!0},displayIndentGuides:{set:function(show){this.$textLayer.setDisplayIndentGuides(show)&&this.$loop.schedule(this.CHANGE_TEXT)

},initialValue:!0},highlightGutterLine:{set:function(shouldHighlight){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=shouldHighlight?"":"none",
void(this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight())):(this.$gutterLineHighlight=dom.createElement("div"),
this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight))

},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(val){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)

},initialValue:!1},vScrollBarAlwaysVisible:{set:function(val){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)

},initialValue:!1},fontSize:{set:function(size){"number"==typeof size&&(size+="px"),this.container.style.fontSize=size,
this.updateFontSize()},initialValue:12},fontFamily:{set:function(name){this.container.style.fontFamily=name,
this.updateFontSize()}},maxLines:{set:function(val){this.updateFull()}},minLines:{set:function(val){this.updateFull()

}},maxPixelHeight:{set:function(val){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(val){
val=+val||0,this.$scrollPastEnd!=val&&(this.$scrollPastEnd=val,this.$loop.schedule(this.CHANGE_SCROLL))

},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(val){this.$gutterLayer.$fixedWidth=!!val,
this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(val){this.setTheme(val)},get:function(){
return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),exports.VirtualRenderer=VirtualRenderer

})


define("ace/undomanager",[],function(require,exports,module){"use strict"
function rearrangeUndoStack(stack,pos){for(var i=pos;i--;){var deltaSet=stack[i]
if(deltaSet&&!deltaSet[0].ignore){for(;i<pos-1;){var swapped=swapGroups(stack[i],stack[i+1])
stack[i]=swapped[0],stack[i+1]=swapped[1],i++}return!0}}}function clonePos(pos){return{row:pos.row,column:pos.column
}}function cloneDelta(d){return{start:clonePos(d.start),end:clonePos(d.end),action:d.action,lines:d.lines.slice()
}}function swap(d1,d2){var i1="insert"==d1.action,i2="insert"==d2.action
if(i1&&i2)if(cmp(d2.start,d1.end)>=0)shift(d2,d1,-1)
else{if(!(cmp(d2.start,d1.start)<=0))return null
shift(d1,d2,1)}else if(i1&&!i2)if(cmp(d2.start,d1.end)>=0)shift(d2,d1,-1)
else{if(!(cmp(d2.end,d1.start)<=0))return null
shift(d1,d2,-1)}else if(!i1&&i2)if(cmp(d2.start,d1.start)>=0)shift(d2,d1,1)
else{if(!(cmp(d2.start,d1.start)<=0))return null
shift(d1,d2,1)}else if(!i1&&!i2)if(cmp(d2.start,d1.start)>=0)shift(d2,d1,1)
else{if(!(cmp(d2.end,d1.start)<=0))return null
shift(d1,d2,-1)}return[d2,d1]}function swapGroups(ds1,ds2){for(var i=ds1.length;i--;)for(var j=0;j<ds2.length;j++)if(!swap(ds1[i],ds2[j])){
for(;i<ds1.length;){for(;j--;)swap(ds2[j],ds1[i])
j=ds2.length,i++}return[ds1,ds2]}return ds1.selectionBefore=ds2.selectionBefore=ds1.selectionAfter=ds2.selectionAfter=null,
[ds2,ds1]}function xform(d1,c1){var i1="insert"==d1.action,i2="insert"==c1.action
if(i1&&i2)cmp(d1.start,c1.start)<0?shift(c1,d1,1):shift(d1,c1,1)
else if(i1&&!i2)cmp(d1.start,c1.end)>=0?shift(d1,c1,-1):cmp(d1.start,c1.start)<=0?shift(c1,d1,1):(shift(d1,Range.fromPoints(c1.start,d1.start),-1),
shift(c1,d1,1))
else if(!i1&&i2)cmp(c1.start,d1.end)>=0?shift(c1,d1,-1):cmp(c1.start,d1.start)<=0?shift(d1,c1,1):(shift(c1,Range.fromPoints(d1.start,c1.start),-1),
shift(d1,c1,1))
else if(!i1&&!i2)if(cmp(c1.start,d1.end)>=0)shift(c1,d1,-1)
else{if(!(cmp(c1.end,d1.start)<=0)){var before,after
return cmp(d1.start,c1.start)<0&&(before=d1,d1=splitDelta(d1,c1.start)),cmp(d1.end,c1.end)>0&&(after=splitDelta(d1,c1.end)),
shiftPos(c1.end,d1.start,d1.end,-1),after&&!before&&(d1.lines=after.lines,d1.start=after.start,d1.end=after.end,
after=d1),[c1,before,after].filter(Boolean)}shift(d1,c1,-1)}return[c1,d1]}function shift(d1,d2,dir){shiftPos(d1.start,d2.start,d2.end,dir),
shiftPos(d1.end,d2.start,d2.end,dir)}function shiftPos(pos,start,end,dir){pos.row==(1==dir?start:end).row&&(pos.column+=dir*(end.column-start.column)),
pos.row+=dir*(end.row-start.row)}function splitDelta(c,pos){var lines=c.lines,end=c.end
c.end=clonePos(pos)
var rowsBefore=c.end.row-c.start.row,otherLines=lines.splice(rowsBefore,lines.length),col=rowsBefore?pos.column:pos.column-c.start.column


lines.push(otherLines[0].substring(0,col)),otherLines[0]=otherLines[0].substr(col)
var rest={start:clonePos(pos),end:end,lines:otherLines,action:c.action}
return rest}function moveDeltasByOne(redoStack,d){d=cloneDelta(d)
for(var j=redoStack.length;j--;)for(var deltaSet=redoStack[j],i=deltaSet.length;i-- >0;){var x=deltaSet[i],xformed=xform(x,d)


d=xformed[0],2!=xformed.length&&(xformed[2]?(redoStack.splice(i+1,1,xformed[1],xformed[2]),i++):xformed[1]||(redoStack.splice(i,1),
i--))}return redoStack}function rebaseRedoStack(redoStack,deltaSets){for(var i=0;i<deltaSets.length;i++)for(var deltas=deltaSets[i],j=0;j<deltas.length;j++)moveDeltasByOne(redoStack,deltas[j])

}var UndoManager=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(session){
this.$session=session},this.add=function(delta,allowMerge,session){this.$fromUndo||delta!=this.$lastDelta&&(allowMerge!==!1&&this.lastDeltas||(this.lastDeltas=[],
this.$undoStack.push(this.lastDeltas),delta.id=this.$rev=++this.$maxRev),"remove"!=delta.action&&"insert"!=delta.action||(this.$lastDelta=delta),
this.lastDeltas.push(delta))},this.addSelection=function(selection,rev){this.selections.push({value:selection,
rev:rev||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(from,to){
null==to&&(to=this.$rev+1)
for(var stack=this.$undoStack,i=stack.length;i--;){var delta=stack[i][0]
if(delta.id<=from)break
delta.id<to&&(delta.ignore=!0)}this.lastDeltas=null},this.getSelection=function(rev,after){for(var stack=this.selections,i=stack.length;i--;){
var selection=stack[i]
if(selection.rev<rev)return after&&(selection=stack[i+1]),selection}},this.getRevision=function(){return this.$rev

},this.getDeltas=function(from,to){null==to&&(to=this.$rev+1)
for(var stack=this.$undoStack,end=null,start=0,i=stack.length;i--;){var delta=stack[i][0]
if(delta.id<to&&!end&&(end=i+1),delta.id<=from){start=i+1
break}}return stack.slice(start,end)},this.getChangedRanges=function(from,to){null==to&&(to=this.$rev+1)

},this.getChangedLines=function(from,to){null==to&&(to=this.$rev+1)},this.undo=function(session,dontSelect){
this.lastDeltas=null
var stack=this.$undoStack
if(rearrangeUndoStack(stack,stack.length)){session||(session=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),
this.$fromUndo=!0
var deltaSet=stack.pop(),undoSelectionRange=null
return deltaSet&&deltaSet.length&&(undoSelectionRange=session.undoChanges(deltaSet,dontSelect),this.$redoStack.push(deltaSet),
this.$syncRev()),this.$fromUndo=!1,undoSelectionRange}},this.redo=function(session,dontSelect){if(this.lastDeltas=null,
session||(session=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var diff=this.getDeltas(this.$redoStackBaseRev,this.$rev+1)


rebaseRedoStack(this.$redoStack,diff),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(x){
x[0].id=++this.$maxRev},this)}var deltaSet=this.$redoStack.pop(),redoSelectionRange=null
return deltaSet&&(redoSelectionRange=session.redoChanges(deltaSet,dontSelect),this.$undoStack.push(deltaSet),
this.$syncRev()),this.$fromUndo=!1,redoSelectionRange},this.$syncRev=function(){var stack=this.$undoStack,nextDelta=stack[stack.length-1],id=nextDelta&&nextDelta[0].id||0


this.$redoStackBaseRev=id,this.$rev=id},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,
this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]

},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0

},this.bookmark=function(rev){void 0==rev&&(rev=this.$rev),this.mark=rev},this.isAtBookmark=function(){
return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,
this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark}).call(UndoManager.prototype)


var Range=require("./range").Range,cmp=Range.comparePoints
Range.comparePoints
exports.UndoManager=UndoManager})


define("ace/requirejs/text!ace/theme/textmate.css",[],"")


define("ace/theme/textmate",[],function(require,exports,module){"use strict"
exports.isDark=!1,exports.cssClass="ace-tm",exports.cssText=require("../requirejs/text!./textmate.css")


var dom=require("../lib/dom")
dom.importCssString(exports.cssText,exports.cssClass)})


define("plugins/c9.ide.scm/diff/twoway",[],function(require,exports,module){"use strict"
function createEditor(){var editor=new Editor(new Renderer,null)
return editor.session.setUndoManager(new UndoManager),editor}function DiffView(element,options){this.onInput=this.onInput.bind(this),
this.onConnectorScroll=this.onConnectorScroll.bind(this),this.onMouseWheel=this.onMouseWheel.bind(this),
this.onScroll=this.onScroll.bind(this),this.onChangeFold=this.onChangeFold.bind(this),this.onChangeTheme=this.onChangeTheme.bind(this),
dom.importCssString(css,"diffview.css"),this.options={},this.container=element,oop.mixin(this.options,{
showDiffs:!0,maxDiffs:5e3},options),this.orig=this.left=createEditor(),this.edit=this.right=createEditor(),
this.gutterEl=document.createElement("div"),element.appendChild(this.left.container),element.appendChild(this.gutterEl),
element.appendChild(this.right.container),this.left.setOption("scrollPastEnd",.5),this.right.setOption("scrollPastEnd",.5),
this.left.setOption("highlightActiveLine",!1),this.right.setOption("highlightActiveLine",!1),this.left.setOption("highlightGutterLine",!1),
this.right.setOption("highlightGutterLine",!1),this.left.setOption("animatedScroll",!0),this.right.setOption("animatedScroll",!0),
this.markerLeft=new DiffHighlight(this,(-1)),this.markerRight=new DiffHighlight(this,1),this.setSession({
orig:this.orig.session,edit:this.edit.session,chunks:[]}),this.connector=new Connector(this),this.connector.createGutter(),
this.onChangeTheme(),this.$initArrow(),this.$attachEventHandlers(),config.resetOptions(this),config._signal("diffView",this)

}function findChunkIndex(chunks,row,orig){if(orig)for(var i=0;i<chunks.length;i++){var ch=chunks[i]
if(!(ch.origEnd<row)&&ch.origStart>row)break}else for(var i=0;i<chunks.length;i++){var ch=chunks[i]
if(!(ch.editEnd<row)&&ch.editStart>row)break}return i-1}var oop=require("ace/lib/oop"),event=require("ace/lib/event"),Range=require("ace/range").Range,dom=require("ace/lib/dom"),config=require("ace/config"),LineWidgets=require("ace/line_widgets").LineWidgets,css=require("ace/requirejs/text!./styles.css"),diff_match_patch=require("./diff_match_patch").diff_match_patch,SVG_NS="http://www.w3.org/2000/svg",Editor=require("ace/editor").Editor,Renderer=require("ace/virtual_renderer").VirtualRenderer,UndoManager=require("ace/undomanager").UndoManager,EditSession=require("ace/edit_session").EditSession


require("ace/theme/textmate"),function(){this.setSession=function(session){this.session&&this.$detachSessionEventHandlers(),
this.session=session,this.session&&(this.chunks=this.session.chunks,this.orig.setSession(session.orig),
this.edit.setSession(session.edit),this.$attachSessionEventHandlers())},this.getSession=function(){return this.session

},this.createSession=function(){var session=new EditSession("")
return session.setUndoManager(new UndoManager),session},this.setTheme=function(theme){this.left.setTheme(theme)

},this.getTheme=function(){return this.left.getTheme()},this.onChangeTheme=function(){this.right.setTheme(this.left.getTheme())


var theme=this.right.renderer.theme
this.gutterEl.className="ace_diff-gutter "+theme.cssClass,dom.setCssClass(this.gutterEl,"ace_dark",theme.isDark)

},this.resize=function(){this.edit.resize(),this.orig.resize()},this.getDmp=function(){var dmp=new diff_match_patch


return dmp},this.onInput=this.computeDiff=function(){var val1=this.left.session.doc.getAllLines(),val2=this.right.session.doc.getAllLines(),chunks=this.$diffLines(val1,val2)


this.session.chunks=this.chunks=chunks,this.chunks.length>this.options.maxDiffs||(this.$alignDiffs&&this.align(),
this.left.renderer.updateBackMarkers(),this.right.renderer.updateBackMarkers())},this.$diffLines=function(val1,val2){
var lastChunk,dmp=this.getDmp(),a=diff_linesToChars_(val1,val2),diff=dmp.diff_main(a.chars1,a.chars2,!1),chunks=[],offset={
left:0,right:0}
return diff.forEach(function(chunk){var chunkType=chunk[0],length=chunk[1].length
0!==length&&(0===chunkType?(offset.left+=length,offset.right+=length,lastChunk=null):chunkType===-1?(lastChunk?(lastChunk.origEnd=Math.max(offset.left+length,lastChunk.origEnd),
lastChunk.editEnd=Math.max(offset.right,lastChunk.editEnd)):chunks.push(lastChunk={origStart:offset.left,
origEnd:offset.left+length,editStart:offset.right,editEnd:offset.right}),offset.left+=length):1===chunkType&&(lastChunk?(lastChunk.origEnd=Math.max(offset.left,lastChunk.origEnd),
lastChunk.editEnd=Math.max(offset.right+length,lastChunk.editEnd)):chunks.push(lastChunk={origStart:offset.left,
origEnd:offset.left,editStart:offset.right,editEnd:offset.right+length}),offset.right+=length))},this),
chunks.forEach(function(diff){var inlineChanges=[],type=0
if(diff.origStart==diff.origEnd)type=1
else if(diff.editStart==diff.editEnd)type=-1
else{var inlineDiff=dmp.diff_main(val1.slice(diff.origStart,diff.origEnd).join("\n"),val2.slice(diff.editStart,diff.editEnd).join("\n"),!1)


dmp.diff_cleanupSemantic(inlineDiff),inlineDiff.forEach(function(change){var text=change[1],lines=text.split("\n"),rowCh=lines.length-1,colCh=lines[rowCh].length,changeType=change[0]


text.length&&inlineChanges.push([changeType,rowCh,colCh])})}diff.inlineChanges=inlineChanges,diff.type=type

}),chunks},this.align=function(){function add(editor,w){editor.session.lineWidgets[w.row]=w,editor.session.widgetManager.lineWidgets.push(w)

}function init(editor){var session=editor.session
session.widgetManager||(session.widgetManager=new LineWidgets(session),session.widgetManager.attach(editor)),
editor.session.lineWidgets=[],editor.session.widgetManager.lineWidgets=[]}var diffView=this
init(diffView.edit),init(diffView.orig),diffView.chunks.forEach(function(ch){var diff1=ch.origEnd-ch.origStart,diff2=ch.editEnd-ch.editStart


diff1<diff2?add(diffView.orig,{rowCount:diff2-diff1,row:ch.origEnd-1}):diff1>diff2&&add(diffView.edit,{
rowCount:diff1-diff2,row:ch.editEnd-1})}),diffView.edit.session._emit("changeFold",{data:{start:{row:0
}}}),diffView.orig.session._emit("changeFold",{data:{start:{row:0}}})},this.onScroll=function(e,session){
this.syncScroll(this.left.session==session?this.left.renderer:this.right.renderer)},this.syncScroll=function(renderer){
if(0!=this.$syncScroll){var r1=this.left.renderer,r2=this.right.renderer,isOrig=renderer==r1
if(!r1.$scrollAnimation||!r2.$scrollAnimation){var now=Date.now()
if(!(this.scrollSetBy!=renderer&&now-this.scrollSetAt<500)){var r=isOrig?r1:r2
if(this.scrollSetBy!=renderer){if(isOrig&&this.scrollOrig==r.session.getScrollTop())return
if(!isOrig&&this.scrollEdit==r.session.getScrollTop())return}var rOther=isOrig?r2:r1
if(this.$alignDiffs)targetPos=r.session.getScrollTop()
else{var layerConfig=r.layerConfig,chunks=this.chunks,halfScreen=.4*r.$size.scrollerHeight,lc=layerConfig,midY=halfScreen+r.scrollTop,mid=r.session.screenToDocumentRow(midY/lc.lineHeight,0),i=findChunkIndex(chunks,mid,isOrig),ch=chunks[i]


if(ch||(ch={editStart:0,editEnd:0,origStart:0,origEnd:0}),mid>=(isOrig?ch.origEnd:ch.editEnd)){var next=chunks[i+1]||{
editStart:r2.session.getLength(),editEnd:r2.session.getLength(),origStart:r1.session.getLength(),origEnd:r1.session.getLength()
}
ch={origStart:ch.origEnd,origEnd:next.origStart,editStart:ch.editEnd,editEnd:next.editStart}}if(r==r1)var start=ch.origStart,end=ch.origEnd,otherStart=ch.editStart,otherEnd=ch.editEnd
else otherStart=ch.origStart,otherEnd=ch.origEnd,start=ch.editStart,end=ch.editEnd
var offOtherTop=rOther.session.documentToScreenRow(otherStart,0)*lc.lineHeight,offOtherBot=rOther.session.documentToScreenRow(otherEnd,0)*lc.lineHeight,offTop=r.session.documentToScreenRow(start,0)*lc.lineHeight,offBot=r.session.documentToScreenRow(end,0)*lc.lineHeight,ratio=(midY-offTop)/(offBot-offTop||offOtherBot-offOtherTop),targetPos=offOtherTop-halfScreen+ratio*(offOtherBot-offOtherTop)


targetPos=Math.max(0,targetPos)}this.$syncScroll=!1,isOrig?(this.scrollOrig=r.session.getScrollTop(),
this.scrollEdit=targetPos):(this.scrollOrig=targetPos,this.scrollEdit=r.session.getScrollTop()),this.scrollSetBy=renderer,
rOther.session.setScrollTop(targetPos),this.$syncScroll=!0,this.scrollSetAt=now}}}},this.onConnectorScroll=function(ev){
var dir=ev.wheelY>0?1:-1,r1=this.left.renderer,r2=this.right.renderer
if(!r1.$scrollAnimation||!r2.$scrollAnimation){var minAmount=2*ev.wheelY,r=r1.session.getLength()>r2.session.getLength()?r1:r2,layerConfig=r.layerConfig,chunks=this.chunks,halfScreen=.5*r.$size.scrollerHeight,lc=layerConfig,isOrig=r==r1,midY=halfScreen+r.scrollTop,mid=r.session.screenToDocumentRow(midY/lc.lineHeight,0),i=findChunkIndex(chunks,mid,isOrig),ch=chunks[i]


ch=dir<0?ch?mid<(isOrig?ch.origEnd:ch.editEnd)?chunks[i-1]||ch:chunks[i]:{editStart:0,editEnd:0,origStart:0,
origEnd:0}:chunks[i+1]||{editStart:r2.session.getLength(),editEnd:r2.session.getLength(),origStart:r1.session.getLength(),
origEnd:r1.session.getLength()}
var scrollTop1=r1.session.getScrollTop(),scrollTop2=r2.session.getScrollTop()
this.$syncScroll=!1,r1.scrollToLine(ch.origStart,!0,!0),r2.scrollToLine(ch.editStart,!0,!0),this.$syncScroll=!0,
Math.abs(scrollTop1-r1.session.getScrollTop())<=1&&Math.abs(scrollTop2-r2.session.getScrollTop())<=1&&r1.isScrollableBy(0,minAmount)&&r1.scrollBy(0,minAmount)

}},this.onMouseWheel=function(ev){if(!ev.getAccelKey()){ev.getShiftKey()&&ev.wheelY&&!ev.wheelX&&(ev.wheelX=ev.wheelY,
ev.wheelY=0)
var editor=ev.editor,isScrolable=editor.renderer.isScrollableBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed)


if(!isScrolable){var other=editor==this.left?this.right:this.left
return other.renderer.isScrollableBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed)&&other.renderer.scrollBy(ev.wheelX*ev.speed,ev.wheelY*ev.speed),
ev.stop()}}},this.onChangeFold=function(ev,session){if("remove"==ev.action){var other=session==this.orig.session?this.edit.session:this.orig.session,fold=ev.data


fold&&fold.other&&(fold.other.other=null,other.removeFold(fold.other))}},this.$attachSessionEventHandlers=function(){
this.left.session.on("changeScrollTop",this.onScroll),this.right.session.on("changeScrollTop",this.onScroll),
this.left.session.on("changeFold",this.onChangeFold),this.right.session.on("changeFold",this.onChangeFold),
this.left.session.addDynamicMarker(this.markerLeft),this.right.session.addDynamicMarker(this.markerRight)

},this.$detachSessionEventHandlers=function(){this.left.session.off("changeScrollTop",this.onScroll),
this.right.session.off("changeScrollTop",this.onScroll),this.left.session.off("changeFold",this.onChangeFold),
this.right.session.off("changeFold",this.onChangeFold),this.left.session.removeMarker(this.markerLeft.id),
this.right.session.removeMarker(this.markerRight.id)},this.$attachEventHandlers=function(){var _self=this


this.left.renderer.on("themeLoaded",this.onChangeTheme),this.right.renderer.on("afterRender",function(){
_self.left.renderer.$loop.changes||_self.connector.decorate()}),this.left.renderer.on("afterRender",function(){
_self.right.renderer.$loop.changes||_self.connector.decorate()}),event.addMouseWheelListener(this.gutterEl,this.onConnectorScroll),
this.left.on("mousewheel",this.onMouseWheel),this.right.on("mousewheel",this.onMouseWheel),this.left.on("input",this.onInput),
this.right.on("input",this.onInput)},this.$initArrow=function(){function hide(){region&&(region=null,
arrow.style.display="none")}var arrow=document.createElement("div")
this.gutterEl.appendChild(arrow)
var region=0,diffView=this
arrow.addEventListener("click",function(e){if(region&&region.chunk){var range=diffView.useChunk(region.chunk,1==region.side),editor=1==region.side?diffView.orig:diffView.edit


editor.selection.moveToPosition(range.start),editor.focus()}hide()}),this.gutterEl.addEventListener("mousemove",function(e){
var rect=e.currentTarget.getBoundingClientRect(),x=e.clientX-rect.left,y=e.clientY
region||(arrow.style.display="",region={}),x<rect.width/2?(region.side!=-1&&(arrow.className="diff-arrow diff-arrow-left"),
region.side=-1):(1!=region.side&&(arrow.className="diff-arrow diff-arrow-right"),region.side=1)
var editor=1==region.side?diffView.edit:diffView.orig,other=editor==diffView.edit?diffView.orig:diffView.edit,renderer=editor.renderer


if(other.getReadOnly())return hide()
var p=renderer.screenToTextCoordinates(x,y),row=p.row
row==renderer.session.getLength()-1&&row++
var chunks=diffView.chunks,i=findChunkIndex(chunks,row,region.side==-1)
i==-1&&(i=0)
var ch=chunks[i]||chunks[chunks.length-1],next=chunks[i+1],side=region.side==-1?"orig":"edit"
if(next&&ch&&ch[side+"End"]+next[side+"Start"]<2*row&&(ch=next),region.chunk=ch,!ch)return hide()
if(renderer.layerConfig.firstRow>ch[side+"End"])return hide()
if(renderer.layerConfig.lastRow<ch[side+"Start"]-1)return hide()
var screenPos=renderer.$cursorLayer.getPixelPosition({row:ch[side+"Start"],column:0},!0).top
screenPos<renderer.layerConfig.offset&&(screenPos=renderer.layerConfig.offset),arrow.style.top=screenPos-renderer.layerConfig.offset+"px",
region.side==-1?(arrow.style.left="2px",arrow.style.right=""):(arrow.style.left="",arrow.style.right="2px")

}.bind(this)),this.gutterEl.addEventListener("mouseout",function(e){hide()}),event.addMouseWheelListener(this.gutterEl,hide)

},this.destroy=function(){this.left.destroy(),this.right.destroy()},this.foldUnchanged=function(){this.edit.session.unfold(),
this.orig.session.unfold()
for(var chunks=this.chunks,sep="---",prev={editEnd:0,origEnd:0},i=0;i<chunks.length+1;i++){var ch=chunks[i]||{
editStart:this.edit.session.getLength(),origStart:this.orig.session.getLength()},l=ch.editStart-prev.editEnd-5


if(l>2){var s=prev.origEnd+2,f1=this.orig.session.addFold(sep,new Range(s,0,s+l,Number.MAX_VALUE))
s=prev.editEnd+2
var f2=this.edit.session.addFold(sep,new Range(s,0,s+l,Number.MAX_VALUE))
f1.other=f2,f2.other=f1}prev=ch}},this.gotoNext=function(dir){var orig=!1,ace=orig?this.orig:this.edit,row=ace.selection.lead.row,i=findChunkIndex(this.chunks,row,orig),chunk=this.chunks[i+dir]||this.chunks[i],scrollTop=ace.session.getScrollTop()


if(chunk){var line=Math.max(chunk.editStart,chunk.editEnd-1)
ace.selection.setRange(new Range(line,0,line,0))}ace.renderer.scrollSelectionIntoView(ace.selection.lead,ace.selection.anchor,.5),
ace.renderer.animateScrolling(scrollTop)},this.transformPosition=function(pos,orig){var chunkIndex=findChunkIndex(this.chunks,pos.row,orig),chunk=this.chunks[chunkIndex],result={
row:pos.row,column:pos.column}
if(orig)if(chunk.origEnd<=pos.row)result.row=pos.row-chunk.origEnd+chunk.editEnd
else{console.log("======================================")
for(var d=pos.row-chunk.origStart,c=pos.column,r1=0,c1=0,r2=0,c2=0,inlineChanges=chunk.inlineChanges,i=0;i<inlineChanges.length;i++){
var diff=inlineChanges[i]
if(diff[1]?0==diff[0]?(r1+=diff[1],r2+=diff[1],r1==d&&(c2=c1=diff[2])):1==diff[0]?(r2+=diff[1],r1==d&&(c2=diff[2])):diff[0]==-1&&(r1+=diff[1],
r1==d&&(c1=diff[2])):r1==d&&(0==diff[0]?(c1+=diff[2],c2+=diff[2]):1==diff[0]?c2+=diff[2]:diff[0]==-1&&(c1+=diff[2])),
console.log(diff+"",r1,c1,r2,c2,d,c),r1>d||r1==d&&c1>=c)break}r1>d&&(r2-=r1-d),c1!=c&&(c2-=c1-c),result.row=r2+chunk.editStart,
result.column=c2}return result},this.useChunk=function(chunk,toOrig){var origRange=new Range(chunk.origStart,0,chunk.origEnd,0),editRange=new Range(chunk.editStart,0,chunk.editEnd,0),srcEditor=toOrig?this.edit:this.orig,destEditor=toOrig?this.orig:this.edit,destRange=toOrig?origRange:editRange,srcRange=toOrig?editRange:origRange,value=srcEditor.session.getTextRange(srcRange)


return srcRange.isEmpty()&&!destRange.isEmpty()?destRange.end.row==destEditor.session.getLength()&&(destRange.start.row--,
destRange.start.column=Number.MAX_VALUE):destRange.isEmpty()&&!srcRange.isEmpty()&&srcRange.end.row==srcEditor.session.getLength()&&(value="\n"+value),
destRange.end=destEditor.session.replace(destRange,value),destRange},this.transformRange=function(range,orig){
return Range.fromPoints(this.transformPosition(range.start,orig),this.transformPosition(range.end,orig))

},this.findChunkIndex=function(row,orig){return findChunkIndex(this.chunks,row,orig)},this.createPatch=function(options){
function header(s1,c1,s2,c2){return"@@ -"+(c1?s1+1:s1)+","+c1+" +"+(c2?s2+1:s2)+","+c2+" @@"}var chunks=this.chunks,editLines=this.edit.session.doc.getAllLines(),origLines=this.orig.session.doc.getAllLines(),path1=options.path1||options.path||"_",path2=options.path2||path1,patch=["diff --git a/"+path1+" b/"+path2,"--- a/"+path1,"+++ b/"+path2].join("\n")


chunks.length||(chunks=[{origStart:0,origEnd:0,editStart:0,editEnd:0}])
var context=options.context||0,editEOF=!editLines[editLines.length-1],origEOF=!origLines[origLines.length-1]


if(editEOF&&editLines.pop(),origEOF&&origLines.pop(),editEOF!=origEOF){chunks=chunks.slice()
var last=chunks.pop()
chunks.push(last={origStart:Math.min(last.origStart,origLines.length-1),origEnd:Math.min(last.origEnd,origLines.length),
editStart:Math.min(last.editStart,editLines.length-1),editEnd:Math.min(last.editEnd,editLines.length)
})}for(var hunk="",start1=0,start2=0,end1=0,end2=0,length1=0,length2=0,mergeWithNext=!1,i=0;i<chunks.length;i++){
var ch=chunks[i],s1=ch.origStart,e1=ch.origEnd,s2=ch.editStart,e2=ch.editEnd,next=chunks[i+1]
start1=Math.max(s1-context,end1),start2=Math.max(s2-context,end2),end1=Math.min(e1+context,origLines.length),
end2=Math.min(e2+context,editLines.length),mergeWithNext=!1,next&&end1>=next.origStart-context&&(end1=next.origStart,
end2=next.editStart,mergeWithNext=!0)
for(var j=start1;j<s1;j++)hunk+="\n "+origLines[j]
for(var j=s1;j<e1;j++)hunk+="\n-"+origLines[j]
ch==last&&editEOF&&(hunk+="\n\\ No newline at end of file")
for(var j=s2;j<e2;j++)hunk+="\n+"+editLines[j]
ch==last&&origEOF&&(hunk+="\n\\ No newline at end of file")
for(var j=e1;j<end1;j++)hunk+="\n "+origLines[j]
length1+=end1-start1,length2+=end2-start2,mergeWithNext||(patch+="\n"+header(end1-length1,length1,end2-length2,length2)+hunk,
length2=length1=0,hunk="")}return editEOF||origEOF||end1!=origLines.length||(patch+="\n\\ No newline at end of file"),
patch},this.setValueFromFullPatch=function(fullUniDiff){for(var lines=fullUniDiff.split("\n"),missingEOF="",oldLines=[],newLines=[],i=0;i<lines.length&&!/^@@/.test(lines[i]);)i++


for(;++i<lines.length;){var tag=lines[i][0],line=lines[i].substr(1)
"+"===tag?newLines.push(line):"-"===tag?oldLines.push(line):" "===tag?(newLines.push(line),oldLines.push(line)):"\\"===tag&&(missingEOF=lines[i-1][0])

}"+"===missingEOF?oldLines.push(""):"-"===missingEOF?newLines.push(""):""===missingEOF&&(newLines.push(""),
oldLines.push("")),this.orig.session.setValue(oldLines.join("\n")),this.edit.session.setValue(newLines.join("\n"))

},this.applyPatch=function(oldStr,uniDiff){for(var lines=uniDiff.split("\n"),hunks=[],i=0,EOFChanged=0;i<lines.length&&!/^@@/.test(lines[i]);)i++


for(;i<lines.length;i++){var tag=lines[i][0],line=lines[i].substr(1)
if("@"===tag){var chunkHeader=/@@ -(\d+)(?:,(\d*))? \+(\d+)(?:,(\d*)) @@/.exec(line)
hunks.unshift({start:+chunkHeader[1],oldlength:+chunkHeader[2]||1,removed:[],added:[]})}else"+"===tag?hunks[0].added.push(line):"-"===tag?hunks[0].removed.push(line):" "===tag?(hunks[0].added.push(line),
hunks[0].removed.push(line)):"\\"===tag&&("+"===lines[i-1][0]?EOFChanged=1:"-"===lines[i-1][0]&&(EOFChanged=-1))

}for(lines=oldStr.split("\n"),i=hunks.length-1;i>=0;i--){for(var hunk=hunks[i],j=0;j<hunk.oldlength;j++)if(lines[hunk.start-1+j]!==hunk.removed[j])return!1


lines.splice.apply(lines,[hunk.start-1,hunk.oldlength].concat(hunk.added))}if(EOFChanged==-1)for(;!lines[lines.length-1];)lines.pop()
else 1==EOFChanged&&lines.push("")
return lines.join("\n")},config.defineOptions(this,"editor",{alignDiffs:{set:function(val){val&&this.align()

},initialValue:!1}})}.call(DiffView.prototype)
var diff_linesToChars_=function(text1,text2){function diff_linesToCharsMunge_(lines){for(var chars="",i=0;i<lines.length;i++){
var line=lines[i].trim()
"number"==typeof lineHash[line]?chars+=String.fromCharCode(lineHash[line]):(chars+=String.fromCharCode(lineCount),
lineHash[line]=lineCount++)}return chars}var lineHash=Object.create(null),lineCount=1,chars1=diff_linesToCharsMunge_(text1),chars2=diff_linesToCharsMunge_(text2)


return{chars1:chars1,chars2:chars2}},Connector=function(diffView){this.diffView=diffView};(function(){
this.addConnector=function(diffView,origStart,origEnd,editStart,editEnd,type){origStart=Math.ceil(origStart),
origEnd=Math.ceil(origEnd),editStart=Math.ceil(editStart),editEnd=Math.ceil(editEnd)
var p1_x=-1,p1_y=origStart+.5,p2_x=diffView.gutterWidth+1,p2_y=editStart+.5,p3_x=-1,p3_y=origEnd===origStart?origEnd+.5:origEnd+1.5,p4_x=diffView.gutterWidth+1,p4_y=editEnd===editStart?editEnd+.5:editEnd+1.5,curve1=this.getCurve(p1_x,p1_y,p2_x,p2_y),curve2=this.getCurve(p4_x,p4_y,p3_x,p3_y),verticalLine1="L"+p2_x+","+p2_y+" "+p4_x+","+p4_y,verticalLine2="L"+p3_x+","+p3_y+" "+p1_x+","+p1_y,d=curve1+" "+verticalLine1+" "+curve2+" "+verticalLine2,el=document.createElementNS(SVG_NS,"path")


el.setAttribute("d",d),el.setAttribute("class","ace_diff-connector"+(1==type?" insert":type==-1?" delete":"")),
diffView.gutterSVG.appendChild(el)},this.getCurve=function(startX,startY,endX,endY){var w=endX-startX,halfWidth=startX+.5*w,curve="M "+startX+","+startY+" C "+halfWidth+","+startY+" "+halfWidth+","+endY+" "+endX+","+endY


return curve},this.createGutter=function(){var diffView=this.diffView
diffView.gutterWidth=diffView.gutterEl.clientWidth
var leftHeight=diffView.left.renderer.$size.height,rightHeight=diffView.right.renderer.$size.height,height=Math.max(leftHeight,rightHeight)


diffView.gutterSVG=document.createElementNS(SVG_NS,"svg"),diffView.gutterSVG.setAttribute("width",diffView.gutterWidth),
diffView.gutterSVG.setAttribute("height",height),diffView.gutterEl.appendChild(diffView.gutterSVG)},this.clearGutter=function(diffView){
var gutterEl=diffView.gutterEl
gutterEl.removeChild(diffView.gutterSVG),this.createGutter()},this.decorate=function(){var diffView=this.diffView


if(!diffView.$alignDiffs){this.clearGutter(diffView)
for(var orig=diffView.left,edit=diffView.right,chunks=diffView.chunks,c1=orig.renderer.layerConfig,c2=edit.renderer.layerConfig,i=0;i<chunks.length;i++){
var ch=chunks[i]
if(!(ch.origEnd<c1.firstRow&&ch.editEnd<c2.firstRow)){if(ch.origStart>c1.lastRow&&ch.editStart>c2.lastRow)break


var origStart=orig.renderer.$cursorLayer.getPixelPosition({row:ch.origStart,column:0},!0).top-c1.offset,origEnd=orig.renderer.$cursorLayer.getPixelPosition({
row:ch.origEnd,column:0},!0).top-c1.offset,editStart=edit.renderer.$cursorLayer.getPixelPosition({row:ch.editStart,
column:0},!0).top-c2.offset,editEnd=edit.renderer.$cursorLayer.getPixelPosition({row:ch.editEnd,column:0
},!0).top-c2.offset
i==chunks.length-1&&(ch.origEnd>=orig.session.getLength()&&(origEnd+=c1.lineHeight),ch.origStart>=orig.session.getLength()&&(origStart+=c1.lineHeight),
ch.editEnd>=edit.session.getLength()&&(editEnd+=c1.lineHeight),ch.editStart>=edit.session.getLength()&&(editStart+=c1.lineHeight)),
this.addConnector(diffView,origStart,origEnd,editStart,editEnd,ch.type)}}}}}).call(Connector.prototype)


var DiffHighlight=function(diffView,type){this.diffView=diffView,this.type=type};(function(){this.MAX_RANGES=500,
this.update=function(html,markerLayer,session,config){var start=config.firstRow,end=config.lastRow,diffView=this.diffView,chunks=diffView.chunks,isOrig=this.type==-1,type=this.type,index=findChunkIndex(chunks,start,isOrig)


index==-1&&chunks.length&&(isOrig?chunks[0].origStart:chunks[0].editStart)>start&&(index=0)
for(var chunk=chunks[index];chunk;){if(isOrig){if(chunk.origStart>end&&chunk.origStart!=chunk.origEnd)return


var range=new Range(chunk.origStart,0,chunk.origEnd-1,1),l1=chunk.origEnd-chunk.origStart,l2=chunk.editEnd-chunk.editStart

}else{if(chunk.editStart>end&&chunk.editStart!=chunk.editEnd)return
range=new Range(chunk.editStart,0,chunk.editEnd-1,1),l1=chunk.origEnd-chunk.origStart,l2=chunk.editEnd-chunk.editStart

}var className="";(!l1&&isOrig||!l2&&!isOrig)&&(className=range.start.row==session.getLength()?"insertEnd":"insertStart"),
className+=chunk.type==-1?" delete":1==chunk.type?" insert":"",markerLayer.drawFullLineMarker(html,range.toScreenRange(session),"ace_diff "+className,config)


for(var inlineChanges=chunk.inlineChanges,row=range.start.row,column=0,j=0;j<inlineChanges.length;j++){
var diff=inlineChanges[j]
if(0==diff[0])diff[1]?(row+=diff[1],column=diff[2]):column+=diff[2]
else{if(range.start.row=row,range.start.column=column,row>end)break
if(diff[0]==(isOrig?-1:1)?(type=isOrig?"delete":"insert",diff[1]?(row+=diff[1],column=diff[2]):column+=diff[2]):type=isOrig?"insert":"delete",
row<start)continue
range.end.row=row,range.end.column=column,range.isEmpty()&&(type+=" empty")
var screenRange=range.clipRows(start,end).toScreenRange(session)
screenRange.isMultiLine()?markerLayer.drawTextMarker(html,screenRange,"ace_diff inline "+type,config):markerLayer.drawSingleLineMarker(html,screenRange,"ace_diff inline "+type,config)

}}chunk=chunks[++index]}}}).call(DiffHighlight.prototype),module.exports.DiffView=DiffView})


define("plugins/c9.ide.scm/v1/editor",[],function(require,exports,module){function main(options,imports,register){
function createMenu(){menuAce=new Menu({id:"menu",items:[new MenuItem({position:10,command:"cut",caption:"Cut"
},handle),new MenuItem({position:20,command:"copy",caption:"Copy"},handle),new MenuItem({position:30,
command:"paste",caption:"Paste"},handle),new Divider({position:40},handle),new MenuItem({position:50,
command:"selectall",caption:"Select All"},handle),new Divider({position:60},handle)]},handle),menuGutter=new Menu({
id:"menu-gutter",items:[]},handle)}function DiffViewer(){function getLabelValue(path){var hash
path.indexOf(":")>-1&&(hash=path.split(":"),path=hash[1],hash=hash[0])
var dirpath=dirname(path)
return(hash?"<span class='hash'>"+hash+"</span>":"")+basename(dirpath)+"/"+basename(path)+"<span class='dirname'> - "+dirname(dirpath)+"</span>"

}function loadSession(session){if(session.diffSession)return void diffview.setSession(session.diffSession)


diffview.setSession(session.diffSession={orig:diffview.createSession(),edit:diffview.createSession(),
chunks:[]})
var diff=session.diff||{}
"string"==typeof diff.patch?diffview.setValueFromFullPatch(diff.patch):(diffview.orig.session.setValue(diff.orig||""),
diffview.edit.session.setValue(diff.edit||"")),diffview.orig.setReadOnly(!0),diffview.edit.setReadOnly(!0)


var syntax=ace.getSyntaxForPath(session.newPath)
syntax&&syntax.indexOf("/")==-1&&(syntax="ace/mode/"+syntax),syntax&&(diffview.orig.session.setMode(syntax),
diffview.edit.session.setMode(syntax)),diffview.orig.renderer.once("afterRender",function(){diffview.session==session.diffSession&&(diffview.chunks.length||diffview.computeDiff(),
diffview.foldUnchanged(),diffview.gotoNext(1))})}var currentSession,diffview,lastAce,lblLeft,lblRight,btnNext,btnPrev,btnFold,container,toolbar,plugin=new Editor((!0),[])


plugin.getEmitter()
return plugin.on("draw",function(e){function focusApf(){var page=apf.findHost(diffview.container.parentElement.parentElement)


apf.activeElement!=page&&page.focus()}function updateLastAce(e,ace){lastAce=ace}var tab=e.tab
lblLeft=new ui.label({flex:1}),lblRight=new ui.label({flex:1,"class":"right"}),btnNext=new ui.button({
caption:">",height:24,skin:"c9-toolbarbutton-glossy",onclick:function(){diffview.gotoNext(1)}}),btnPrev=new ui.button({
caption:"<",height:24,skin:"c9-toolbarbutton-glossy",onclick:function(){diffview.gotoNext(-1)}}),btnFold=new ui.button({
caption:"Fold",height:24,skin:"c9-toolbarbutton-glossy",onclick:function(){diffview.orig.session.$foldData.length?diffview.orig.session.unfold():diffview.foldUnchanged()

}}),container=new ui.bar({flex:1,"class":"ace_diff-container"}),tab.appendChild(new ui.vsplitbox({anchors:"0 0 0 0",
childNodes:[toolbar=new ui.hbox({"class":"difftoolbar",height:36,align:"center",edge:"0 5 0 3",padding:3,
childNodes:[lblLeft,new ui.hbox({padding:3,edge:3,margin:"0 7 0 7",align:"center","class":"buttons",childNodes:[btnPrev,btnFold,btnNext]
}),lblRight]}),container]})),diffview=new DiffView(container.$ext,{}),tab.$blur=function(e){var ace=plugin.ace


ace&&e&&e.toElement&&"menu"!=e.toElement.tagName&&(ace.isFocused()?ace.textInput.blur():ace.renderer.visualizeBlur())

},diffview.edit.on("focus",focusApf),diffview.orig.on("focus",focusApf),diffview.edit.keyBinding.setDefaultHandler(null),
diffview.orig.keyBinding.setDefaultHandler(null),diffview.edit.on("focus",updateLastAce),diffview.orig.on("focus",updateLastAce),
lastAce=diffview.edit,tab.on("contextmenu",function(e){menuAce||createMenu()
var target=e.htmlEvent.target,gutter=plugin.diffview.gutterEl
return ui.isChildOf(gutter,target,!0)?menuGutter.show(e.x,e.y):menuAce.show(e.x,e.y),!1})}),plugin.on("load",function(){}),
plugin.on("documentLoad",function(e){function setTheme(e){var tab=doc.tab
if(e.theme&&BGCOLOR[e.theme]){var isDark="dark"==e.theme
toolbar.$ext.style.backgroundColor=tab.backgroundColor=BGCOLOR[e.theme],isDark?tab.classList.add("dark"):tab.classList.remove("dark")

}diffview.setTheme(settings.get("user/ace/@theme"))}var doc=e.doc,session=e.doc.getSession()
e.state.oldPath&&(session.oldPath=e.state.oldPath),e.state.newPath&&(session.newPath=e.state.newPath),
doc.title="Compare Files...",diffview.c9session=session,diffview.orig.session.c9session=session,diffview.edit.session.c9session=session,
layout.on("themeChange",setTheme,doc),settings.on("user/ace/@theme",setTheme,doc),setTheme({theme:settings.get("user/general/@skin")
})}),plugin.on("documentActivate",function(e){var session=currentSession=e.doc.getSession()
if(session.newPath){var newFilename=(session.newPath+"").split("/").pop()
if(e.doc.title="Compare "+newFilename,lblLeft.setAttribute("caption",getLabelValue(session.oldPath)),
lblRight.setAttribute("caption",getLabelValue(session.newPath)),session.diff)return loadSession(session)


var newPath=session.newPath.replace(/MODIFIED:/,"").replace(/STAGED:/,":"),oldPath=session.oldPath.replace(/PREVIOUS:/,":")


session.request=scm.loadDiff({oldPath:oldPath,newPath:newPath},function(err,diff){session.request==diff.request&&(session.diff=diff,
loadSession(session))})}}),plugin.on("documentUnload",function(e){}),plugin.on("getState",function(e){
var session=e.doc.getSession()
e.state.oldPath=session.oldPath,e.state.newPath=session.newPath}),plugin.on("setState",function(e){var session=e.doc.getSession()


session.oldPath=e.state.oldPath,session.newPath=e.state.newPath}),plugin.on("clear",function(){}),plugin.on("focus",function(){}),
plugin.on("enable",function(){}),plugin.on("disable",function(){}),plugin.on("unload",function(){}),plugin.on("resize",function(e){
diffview&&diffview.resize(e)}),plugin.freezePublicAPI({get diffview(){return diffview},get ace(){return lastAce

}}),plugin.load(null,"ace.repl"),plugin}var menuAce,menuGutter,settings=imports.settings,editors=imports.editors,Editor=imports.Editor,scm=imports.scm,layout=imports.layout,MenuItem=imports.MenuItem,Divider=imports.Divider,Menu=(imports.threewaymerge,
imports.Menu),ace=imports.ace,ui=imports.ui,dirname=require("path").dirname,basename=require("path").basename,DiffView=require("../diff/twoway").DiffView,extensions=[],BGCOLOR={
"flat-light":"#F1F1F1","flat-dark":"#3D3D3D",light:"#D3D3D3","light-gray":"#D3D3D3",dark:"#3D3D3D","dark-gray":"#3D3D3D"
},handle=editors.register("diffview","Compare",DiffViewer,extensions)
register(null,{diffview:handle})}return main.consumes=["editors","Editor","ui","scm","layout","settings","threewaymerge","menus","Menu","MenuItem","Divider","ace"],
main.provides=["diffview"],main})


define("plugins/c9.ide.scm/v1/git",[],function(require,exports,module){function main(options,imports,register){
function detect(path,callback){}function addAll(callback){git("add -u",callback)}function addFileToStaging(paths,callback){
git(["add","-f","--ignore-errors","--"].concat(paths),callback)}function unstageAll(callback){git("reset --mixed",callback)

}function unstage(paths,callback){git(["reset","--mixed","--"].concat(paths),callback)}function fetch(options,callback){
var args=["fetch"]
options.prune&&args.push("--prune"),options.branch&&args.push(options.branch),git(args,callback)}function pull(options,callback){
var args=["pull"]
options.prune&&args.push("--prune"),options.branch&&args.push(options.branch),git(args,callback)}function push(options,callback){
var args=["push"]
options.force&&args.push("--force"),options.branch&&args.push(options.branch),git(args,callback)}function git(args,cb){
"string"==typeof args&&(args=args.split(/\s+/)),proc.spawn("git",{args:args,cwd:workspaceDir},function(e,p){
buffer(p,function(stdout,stderr){cb&&cb(e,stdout,stderr)})})}function buffer(process,callback){var stdout="",stderr=""


process.stdout.on("data",function(c){stdout+=c}),process.stderr.on("data",function(c){stderr+=c}),process.on("exit",function(c){
callback(stdout,stderr)})}function getStatus(options,cb){var args=(Date.now(),[]),hash=options.hash,base=options.base


!hash&&!base||options.twoWay?(options.twoWay=!0,args.push("status","--porcelain","-b","-z"),args.push("--untracked-files=no"),
"all"==options.untracked&&args.push("--untracked-files=all"),options.ignored&&args.push("--ignored")):(args.push("diff","--name-status","-b","-z","--no-textconv","--no-ext-diff","--no-color","--find-renames"),
"staging"==hash&&(hash="--cached"),"staging"==base&&(base="--cached"),0===hash||0===base?args.push(base||hash):args.push(base||hash+"^1",hash)),
args.push("--"),options.path&&args.push(options.path),proc.execFile("git",{args:args,cwd:workspaceDir
},function(err,stdout,stderr){if(err){if(/fatal: bad revision/.test(err.message)){var EMPTY="4b825dc642cb6eb9a060e54bf8d69288fbee4904"


if(options.base!=EMPTY)return options.base=EMPTY,getStatus(options,cb)}return cb(err)}cb(err,stdout)})

}function getLog(options,cb){var t=Date.now()
git(["rev-list","HEAD","--count"],function(err,stdout,stderr){if(err)return cb(err)
console.log(err,stdout),console.log(t-Date.now(),stdout.length)
var args=["log","--topo-order","--date=raw"]
options.boundary!==!1&&args.push("--boundary"),options.logOptions&&args.push.apply(args,options.logOptions),
args.push("--pretty=format:"+(options.format||"%h %p %d %B %an %ct %ae ").replace(/ /g,"%x00")),args.push("--all"),
args.push("HEAD"),args.push("-n",options.count||1e3),options.from&&args.push("--skip="+options.from),
args.push("--"),options.path&&args.push(options.path),git(args,function(err,stdout,stderr){if(err)return cb(err)


var data=stdout.trim().split("\0\n")
1!=data.length||data[0]||(data=[])
for(var head,root=[],i=0;i<data.length;i++){var line=data[i].split("\0"),branches=line[2]
branches&&(branches=branches.replace(/^\s*\(\s*/g,"").replace(/\s*\)\s*$/g,""),/(^|, )HEAD[, ]/.test(branches)&&(head=line[0])),
root.push({hash:line[0],parents:line[1],message:line[3],label:line[3].substring(0,line[3].indexOf("\n")+1||void 0),
branches:branches||void 0,authorname:line[4],authoremail:line[5],date:line[6]})}console.log(t-Date.now(),stdout.length),
root.unshift({label:"// WIP",hash:0,parents:head}),cb(null,root)})})}function getFileAtHash(hash,path,cb){
var id=hash
if(path){if(!hash)return"/"!=path[0]&&(path="/"+path),proc.readfile(path,{},cb)
"staging"==hash&&(hash=""),"/"==path[0]&&(path=path.substr(1)),id=hash+":"+path}proc.execFile("git",{
args:["show",id],maxBuffer:1024e3,cwd:workspaceDir},function(err,stdout,stderr){cb(err,stdout,stderr)

})}function loadDiff(options,callback){var req={},args=["diff","-U20000",options.oldPath,options.newPath]


return proc.execFile("git",{args:args,cwd:workspaceDir},function(err,stdout,stderr){return err||!stdout?getFileAtHash(options.oldPath,"",function(err,orig){
getFileAtHash(options.newPath,"",function(err,edit){callback(err,{request:req,orig:orig||"",edit:edit||""
})})}):void callback(null,{request:req,patch:stdout})}),req}function addLinesToStaging(patch,cb){proc.spawn("git",{
args:["apply","--cached","--unidiff-zero","--whitespace=nowarn","-"],cwd:workspaceDir},function(err,p){
if(err)return cb(err)
process=p.process
var stderr="",stdout=""
process.stdout.on("data",function(e){stdout+=e}),process.stderr.on("data",function(e){stderr+=e}),process.on("exit",function(e){
cb(e,stdout,stderr)}),process.stdin.write(patch),process.stdin.end()})}function updateCommitStatus(ammend,callback){
var args=["commit","--dry-run","--porcelain","--branch","-z"]
ammend&&args.push("--amend"),git(args,callback)}function commit(options,callback){if(options.message){
var args=["commit",options.ammend&&"--amend","-m",options.message].filter(Boolean)
git(args,callback)}}function listAllRefs(cb){var args=["for-each-ref","--count=3000","--sort=*objecttype","--sort=-committerdate"]


args.push("--format=%(objectname:short) %(refname) %(upstream:trackshort) %(objecttype) %(subject) %(authorname) %(authoremail) %(committerdate:raw)".replace(/ /g,"%00")),
git(args,function(err,stdout){if(err)return cb(err)
var data=stdout.trim().split("\n").map(function(x){var parts=x.split("\0")
return{hash:parts[0],name:parts[1],upstream:parts[2],type:parts[3],subject:parts[4],authorname:parts[5],
authoremail:parts[6],committerdate:parts[7]}})
cb&&cb(null,data)})}function getBlame(path,callback){proc.spawn("git",{args:["blame","-wp","--",basename(path)],
cwd:workspaceDir+"/"+dirname(path)},function(err,process){return err?callback(err):void buffer(process,function(stdout,stderr){
callback(stderr,stdout)})})}var Plugin=imports.Plugin,scm=imports.scm,proc=imports.proc,c9=imports.c9,basename=require("path").basename,dirname=require("path").dirname,plugin=new Plugin("Ajax.org",main.consumes),workspaceDir=c9.workspaceDir


scm.on&&scm.on("workspaceDir",function(options){workspaceDir=options.workspaceDir||c9.workspaceDir},plugin),
plugin.on("load",function(){scm.register&&scm.register("git",plugin)}),plugin.on("unload",function(){
scm.register&&scm.unregister("git",plugin)}),plugin.freezePublicAPI({detect:detect,addAll:addAll,addFileToStaging:addFileToStaging,
unstageAll:unstageAll,unstage:unstage,fetch:fetch,pull:pull,git:git,push:push,buffer:buffer,getStatus:getStatus,
getLog:getLog,getFileAtHash:getFileAtHash,loadDiff:loadDiff,addLinesToStaging:addLinesToStaging,updateCommitStatus:updateCommitStatus,
commit:commit,listAllRefs:listAllRefs,getBlame:getBlame}),register(null,{"scm.git":plugin})}return main.consumes=["Plugin","scm","proc","c9"],
main.provides=["scm.git"],main})


define("plugins/c9.ide.scm/log/log",[],function(require,exports,module){"use strict"
function GitGraph(editor){this.colors=this.themes[0]}function createSvg(type){return document.createElementNS("http://www.w3.org/2000/svg",type)

}function lineTo(from,to,curv,path,offset,columnWidth,lineHeight){var collOffset=0,x=(from.column+.5+collOffset)*columnWidth,y=(from.row-offset+.5)*lineHeight,x1=(to.column+.5+collOffset)*columnWidth,y1=(to.row-offset+.5)*lineHeight


if(path||(path="M "+x+","+y),to.row-from.row>MAX_GAP&&(0!=from.column||0!=to.column)){if(to.column!=from.column)return y1=y+.5*lineHeight,
x1=x,path+=" L"+x1+","+y1
y1=y+lineHeight/2,x1=x}var dr=4
if(x1==x)y1!=y&&(path+=" L"+x1+","+y1)
else{var sign=x1>x?1:-1
curv>0?(y1-lineHeight>y&&(path+=" L"+x+","+(y1-lineHeight)),path+=" C"+x+","+(y1-dr)+" "+(x-dr)+","+y1+" "+(x+sign*columnWidth)+","+y1,
x1!=x+sign*columnWidth&&(path+=" L"+x1+","+y1)):(x1-sign*columnWidth!=x&&(path+=" L"+(x1-sign*columnWidth)+","+y),
path+=" C"+(x1-sign*dr)+","+y+" "+x1+","+(y+dr)+" "+x1+","+(y+lineHeight),y+lineHeight<y1&&(path+=" L"+x1+","+y1))

}return path}var MAX_GAP=(require("ace/lib/dom"),require("ace/lib/event"),20);(function(){this.themes=[["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]],
this.setLineHeight=function(lineHeight){var config={},circleRadius=.2,circleStroke=.08,branchSpacing=1,strokeWidth=.1


config.circleRadius=lineHeight*circleRadius,config.circleStroke=lineHeight*circleStroke,config.lineHeight=lineHeight,
config.columnWidth=lineHeight*branchSpacing,config.strokeWidth=lineHeight*strokeWidth,this.config=config

},this.setColumns=function(data){for(var bySha={},i=0;i<data.length;i++){var d=data[i]
bySha[d.hash]=d}for(var i=0;i<data.length;i++){var d=data[i],parents=d.parents?d.parents.split(" "):[]


d.parent=bySha[parents[0]],d.parent&&!d.parent.firstChild&&(d.parent.firstChild=d),d.parent2=parents.length>1&&parents.slice(1).map(function(x){
return bySha[x]}),d.row=i}for(var lines=[],colors=this.colors,i=0;i<data.length;i++){for(var d=data[i],found=!1,emptyLine=lines.length,j=0;j<lines.length;j++){
var path=lines[j];(!path&&emptyLine>j||path&&path.last==d)&&(emptyLine=j),path&&path.last.parent==d&&(found?lines[j]=null:(path.last=d,
found=!0,d.column=j,d.color=colors[j%colors.length])),path&&path.last.row==i-1&&(j&&path.last.parent&&path.last.parent.row-path.last.row>MAX_GAP&&(lines[j]=null,
path.last.gap=path.last.parent||1,path.last.parent&&(path.last.parent.cogap=path.last)),path.last.parent||(lines[j]=null))

}if(found||(lines[emptyLine]={last:d},d.column=emptyLine,d.color=colors[emptyLine%colors.length]),d.parent2)for(var p=d.parent2,k=0,j=0;k<p.length;j++){
for(;k<p.length;){var parent=p[k]
if(parent&&parent.row-d.row<MAX_GAP&&!parent.firstChild)break
k++}var path=lines[j]
!path&&p[k]&&(lines[j]={last:p[k]},k++)}for(d.w=lines.length;null===lines[lines.length-1];)lines.length=lines.length-1

}},this.draw=function(start,end,provider){var columns=provider.columns,config=this.config,lineHeight=config.lineHeight,columnWidth=config.columnWidth,data=this.data,container=this.container,svg=this.svg,desc=this.desc


desc.innerHTML=svg.innerHTML=""
var lineGroup=svg.appendChild(createSvg("g")),circleGroup=svg.appendChild(createSvg("g"))
circleGroup.setAttribute("stoke-width",config.circleStroke),circleGroup.setAttribute("stroke","#000"),
lineGroup.setAttribute("stroke","#000"),lineGroup.setAttribute("stroke-width",config.strokeWidth),lineGroup.setAttribute("fill","none"),
svg.setAttribute("width",1e3),svg.setAttribute("height",1e3)
var prevLength,offset=start,lines=[]
start=Math.max(start-MAX_GAP,0)
for(var i=start;i<end;i++){var d=data[i]
i!=start||lines[0]||0==d.column||(lines[0]=path={},path.el=createSvg("path"),path.last={row:0,column:0
},path.last.parent={row:end+MAX_GAP,column:0})
var col=d.column,path=lines[col]
if((!path||path.last.row>d.row||path.last.gap)&&(lines[col]=path={},path.el=createSvg("path"),path.last=d),
lines.length>prevLength&&(prevLength=lines.length),path.d=lineTo(path.last,d,1,path.d,offset,columnWidth,lineHeight),
path.last=d,!d.parent||d.parent.column!=col){var d1=d.parent
for(d1&&(path.d=lineTo(path.last,d1,1,path.d,offset,columnWidth,lineHeight)),lines[col]=void 0;lines.length>2&&!lines[lines.length-1];)lines.length=lines.length-1


path.el.setAttribute("d",path.d),lineGroup.appendChild(path.el)}path.el.setAttribute("d",path.d),path.el.setAttribute("stroke",d.color),
lineGroup.appendChild(path.el),d.parent2&&d.parent2.forEach(function(x){if(x){var el=createSvg("path"),pathd=lineTo(d,x,-1,"",offset,columnWidth,lineHeight)


el.setAttribute("d",pathd),el.setAttribute("stroke",d.color),lineGroup.appendChild(el),lines[x.column]||(lines[x.column]={
el:el,last:x,d:pathd})}})
var x=(d.column+.5)*columnWidth,y=(d.row-offset+.5)*lineHeight
if(d.gap){var el=createSvg("polygon")
el.setAttribute("points",x+","+(y+lineHeight/2+8)+" "+(x-5)+","+(y+lineHeight/2)+" "+(x+5)+","+(y+lineHeight/2)),
el.setAttribute("style","fill:lime;stroke:purple;stroke-width:1"),circleGroup.appendChild(el)}if(d.cogap){
var el=createSvg("polygon")
el.setAttribute("points",x+","+(y-lineHeight/2-8)+" "+(x-5)+","+(y-lineHeight/2)+" "+(x+5)+","+(y-lineHeight/2)),
el.setAttribute("style","fill:lime;stroke:purple;stroke-width:1"),circleGroup.appendChild(el)}if(d.parent2){
var circle=circleGroup.appendChild(createSvg("rect")),w=config.circleRadius
circle.setAttribute("width",2*w),circle.setAttribute("height",2*w),circle.setAttribute("x",x-w),circle.setAttribute("y",y-w),
circle.style.opacity=.6}else{var circle=circleGroup.appendChild(createSvg("circle"))
circle.setAttribute("r",config.circleRadius),circle.setAttribute("cx",x),circle.setAttribute("cy",y)}
if(circle.setAttribute("fill",d.color),y>=0){var p=document.createElement("div")
p.className=this.getRowClass(d,d.row),p.style.height=this.vsize+"px"
var graphW=(1+d.w)*columnWidth
columns?p.style.paddingRight=columns.fixedWidth+graphW+"px":p.style.marginLeft=graphW+"px"
var s=document.createElement("span")
if(s.className="tree-column",s.textContent=d.label,d.branches){var b=document.createElement("span")
b.textContent=d.branches,b.className="branch",s.insertBefore(b,s.firstChild)}if(p.appendChild(s),columns)for(var col=0;col<columns.length;col++){
var column=columns[col]
if("tree"!=column.type){var c=document.createElement("span")
c.className="tree-column",c.textContent=column.getText(d),c.style.width=column.$width,p.appendChild(c)

}else p.appendChild(s),s.style.width=column.$width,s.style.marginLeft=graphW+"px"}prevLength=lines.length,
desc.appendChild(p)}}lines.forEach(function(path){path&&(path.last.row<end&&path.last.parent&&(path.d=lineTo(path.last,path.last.parent,-1,path.d,offset,columnWidth,lineHeight)),
path.el.setAttribute("d",path.d),lineGroup.appendChild(path.el))}),svg.style.left=columnWidth/2+(columns?columns.fixedWidth:0)+"px",
container.appendChild(svg)},this.update=function(config){var provider=this.provider,graph=this.graph,html=[],firstRow=(config.view,
config.firstRow),lastRow=config.lastRow+1,vsize=provider.rowHeightInner||provider.rowHeight
0===firstRow&&0===lastRow?(this.renderPlaceHolder(provider,html,config),graph.desc.innerHTML=html.join("")):(graph.getRowClass=this.getRowClass.bind(this),
graph.vsize=vsize,graph.setLineHeight(provider.rowHeight),graph.draw(firstRow,lastRow,provider))},this.attachToTree=function(tree){
this.tree=tree,tree.renderer.$cellLayer.update=this.update,tree.renderer.$cellLayer.graph=this,this.container=tree.renderer.$cellLayer.element,
this.container.className+=" gitGraph",this.container.style.position="relative",this.desc=document.createElement("div"),
this.container.appendChild(this.desc),this.svg=createSvg("svg"),this.svg.style.top=0,this.svg.style.position="absolute",
this.container.appendChild(this.svg),tree.renderer.$cellLayer.element=this.desc
var that=this
tree.model.loadData=function(data){this.visibleItems=data,that.setColumns(data),that.data=data,this._signal("change")

},tree.model.getClassName=function(node){return(node.className||"")+(node.parent2?" merge":"")}}}).call(GitGraph.prototype),
module.exports=GitGraph})


define("plugins/c9.ide.scm/v1/log",[],function(require,exports,module){function main(options,imports,register){
function load(){scm.on&&panels.on("afterAnimate",function(){panels.isActive("changes")&&tree&&tree.resize()

})}function draw(opts){drawn||(drawn=!0,tree=new Tree({container:opts.html,scrollMargin:[10,0],theme:"filetree",
isLoading:function(){},getEmptyMessage:function(){return this.keyword?"No files found that match '"+this.keyword+"'":this.isLoading()?"Loading file list. One moment please...":"No files found."

}},plugin),tree.container.style.position="absolute",tree.container.style.left="0",tree.container.style.top="0",
tree.container.style.right="0px",tree.container.style.bottom="0",tree.container.style.height="",tree.renderer.scrollBarV.$minWidth=10,
(new GitGraph).attachToTree(tree.acetree),layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".filetree .tree-row","height"),10)||20


tree.rowHeightInner=height,tree.rowHeight=height,e.changed&&tree.resize()},plugin),tree.on("userSelect",function(e){
var options={},nodes=tree.selectedNodes
nodes[0]&&(options.hash=nodes[0].hash,nodes[0].parents&&(options.base=nodes[0].parents.match(/\S*/)[0]||"4b825dc6"),
nodes[1]&&(options.base=nodes[1].hash),nodes[1]||options.hash||(options.twoWay=!0),nodes[1]||(options.commit=nodes[0]),
emit("select",options))}),scm.on("log",function(node){tree.model.loadData(node)},plugin),scm.on("resize",function(){
tree&&tree.resize()}))}var tree,SCMPanel=imports.SCMPanel,panels=(imports.settings,imports.panels),scm=imports.scm,ui=imports.ui,Tree=(imports.preferences,
imports.Tree),layout=imports.layout,GitGraph=require("../log/log"),plugin=new SCMPanel("Ajax.org",main.consumes,{
caption:"Log View",index:200,showTitle:!0,style:"flex:1;-webkit-flex:1"}),emit=plugin.getEmitter(),drawn=!1


plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("show",function(e){}),
plugin.on("hide",function(e){}),plugin.on("unload",function(){drawn=!1}),plugin.freezePublicAPI({get tree(){
return tree}}),register(null,{"scm.log":plugin})}return main.consumes=["SCMPanel","settings","panels","preferences","Tree","layout","scm","ui"],
main.provides=["scm.log"],main})


define("plugins/c9.ide.scm/v1/detail",[],function(require,exports,module){function main(options,imports,register){
function load(){scm.on&&(scm.on("workspaceDir",function(options){workspaceDir=options.workspaceDir||c9.workspaceDir

},plugin),panels.on("afterAnimate",function(){panels.isActive("changes")&&tree&&tree.resize()}))}function draw(opts){
drawn||(drawn=!0,opts.html.innerHTML="<div class='detail-label'></div><div class='detail-tree'></div>",
opts.html.className="detail-root top-test-panel",label=opts.html.firstChild,label.host={textselect:!0
},tree=new Tree({container:opts.html.lastChild,scrollMargin:[10,0],theme:"filetree",enableDragdrop:!0,
getIconHTML:function(node){var icon=node.isFolder?"folder":"status-icon-"+node.type
return node.parent==conflicts&&(icon="status-icon-conflict"),"loading"===node.status&&(icon="loading"),
tree.model.twoWay&&!node.isFolder&&(icon+=" clickable"),"<span class='status-icon "+icon+"'>"+(node.type||"")+"</span>"

},getCaptionHTML:function(node){if(node.path){var path=node.labelPath||node.path
return basename(path)+"<span class='extrainfo'> - "+dirname(path)+"</span>"}return escapeHTML(node.label||node.name)

},getRowIndent:function(node){return 0},isLoading:function(){},getEmptyMessage:function(){return this.keyword?"No files found that match '"+this.keyword+"'":this.isLoading()?"Loading file list. One moment please...":"No files found."

}},plugin),tree.container.style.position="absolute",tree.container.style.left="0",tree.container.style.top="0",
tree.container.style.right="0",tree.container.style.bottom="0",tree.container.style.height="",tree.renderer.scrollBarV.$minWidth=10,
tree.commands.bindKey("Space",function(e){tabManager.previewTab?tabManager.preview({cancel:!0}):openSelection({
preview:!0})}),tree.commands.bindKey("Enter",function(e){openSelection()}),tree.commands.bindKey("Shift-Enter",function(e){
openSelectedFiles()}),layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".filetree .tree-row","height"),10)||22


tree.rowHeightInner=height,tree.rowHeight=height+1,e.changed&&tree.resize()},plugin),tree.on("afterChoose",function(e){
openSelection()}),tree.on("userSelect",function(e){tabManager.previewTab&&openSelection({preview:!0})

}),tree.on("drop",function(e){if(e.target&&e.selectedNodes){var nodes=e.selectedNodes
e.target==staged?scm.addFileToStaging(nodes):e.target==changed&&scm.unstage(nodes)}}),tree.on("click",function(e){
if(e.domEvent.target.classList.contains("status-icon")){var node=e.getNode()
node.parent==staged?scm.unstage(node):node.parent==changed||node.parent==ignored?scm.addFileToStaging(node):node.parent==conflicts&&scm.addFileToStaging(node)

}}),tree.setRoot(arrayCache),scm.on("reload",function(options){reload(options||{hash:0,force:!0},function(e,status){})

},plugin),scm.on("resize",function(){tree&&tree.resize()}),scmlog.on("select",function(options){options&&reload(options,function(){})

},plugin),menuContext=new Menu({items:[new MenuItem({match:"file","class":"strong",caption:"Open Diff",
onclick:openSelection},plugin),new MenuItem({match:"file",caption:"Open",onclick:openSelectedFiles},plugin),new MenuItem({
match:"file",caption:"Reveal in File Tree",onclick:reveal},plugin)]}),opts.aml.setAttribute("contextmenu",menuContext.aml),
reload({hash:0,force:!0},function(){}))}function reload(options,cb){options||(options={hash:0}),tree.meta.options||(tree.meta.options={}),
(options.force||tree.meta.options.hash!=options.hash||tree.meta.options.base!=options.base)&&scm.getStatus(options,function(e,status){
var i,name,x,root=[],twoWay=options.twoWay
if(status=(status||"").split("\0"),console.log(status),twoWay){for(status.shift(),changed.items=changed.children=[],
staged.items=staged.children=[],ignored.items=ignored.children=[],conflicts.items=conflicts.children=[],
untracked.items=untracked.children=[],root={items:[changed,staged,untracked],$sorted:!0,isFolder:!0},
i=0;i<status.length;i++)x=status[i],name=x.substr(twoWay?3:2),name&&("U"!=x[0]&&"U"!=x[1]?("R"==x[0]?(i++,
staged.items.push({label:name,path:name,originalPath:status[i],type:x[0]})):" "!=x[0]&&"?"!=x[0]&&staged.items.push({
label:name,path:name,type:x[0]}),"?"==x[1]&&untracked.items.push({label:name,path:name,type:x[1],isFolder:"/"==name.slice(-1)
}),"!"==x[1]?ignored.items.push({label:name,path:name,type:x[1],isFolder:"/"==name.slice(-1)}):" "!=x[1]&&changed.items.push({
label:name,path:name,type:x[1]})):conflicts.items.push({label:name,path:name,type:x[0]+x[1]}))
ignored.items.length&&root.items.push(ignored),conflicts.items.length&&root.items.unshift(conflicts),
label.style.display="none"}else{for(i=0;i<status.length;i+=2)x=status[i],name=status[i+1],name&&("R"==x[0]?(i++,
root.push({label:status[i+1]+"(from "+name+")",path:name,originalPath:status[i+1],type:x[0]})):root.push({
label:name,path:name,type:x[0]}))
options.commit?label.innerHTML="<span class='hash'>"+escapeHTML(options.hash)+"</span> <span>"+escapeHTML(options.commit.authorname)+"</span><div>"+escapeHTML(options.commit.label)+"</div>":label.innerHTML="<span class='hash'>"+escapeHTML(options.hash)+"</span> ... <span class='hash'>"+escapeHTML(options.base)+"</span> ",
label.style.display="block"}tree.setRoot(root),tree.meta.options=options,tree.model.twoWay=twoWay})}function reveal(){
var node=tree.selection.getCursor(),path=node.path
path&&("/"!=path[0]&&(path="/"+path),path=workspaceDir+path,path=util.normalizePath(path),tabbehavior.revealtab({
path:path}))}function openSelection(opts){if(c9.has(c9.STORAGE)){var node=tree.selectedNode
if(node&&!node.isFolder){if(node.parent==conflicts)return openConflictView(node)
var options=tree.meta.options,oldPath=node.path,newPath=node.originalPath||node.path,hash=options.hash?options.hash+":":node.parent==staged?"STAGED:":"MODIFIED:",base=options.base?options.base+":":node.parent==staged?"HEAD:":"PREVIOUS:",diffview={
oldPath:base+oldPath,newPath:hash+newPath},tab=findOpenDiffview(diffview)
return!tab||opts&&opts.preview?void tabManager[opts&&opts.preview?"preview":"open"]({editorType:"diffview",
focus:!0,document:{diffview:diffview}},function(){}):void(tab.document.meta.preview?tabManager.preview({
cancel:!0,keep:!0}):opts&&opts.preview?tabManager.activateTab(tab):tabManager.focusTab(tab))}}}function findOpenDiffview(options){
for(var pages=tabManager.getTabs(),i=0,tab=pages[i];tab;tab=pages[i++])if("diffview"==tab.editorType){
var session=tab.document.getSession()
if(session&&session.oldPath==options.oldPath&&session.newPath==options.newPath)return tab}}function openConflictView(node){
var addConflictMarker=require("../diff/conflictmarker"),path=workspaceDir+"/"+node.path
tabManager.open({path:path,focus:!0},function(e,tab){addConflictMarker(tab.editor.ace)})}function openSelectedFiles(opts){
if(c9.has(c9.STORAGE)){var focus=opts&&opts.focusNewTab||!0,sel=tree.selection.getSelectedNodes(),main=tree.selection.getCursor()


sel.forEach(function(node){if(node&&!node.isFolder){var pane=tabManager.focussedTab&&tabManager.focussedTab.pane


tabManager.getPanes(tabManager.container).indexOf(pane)==-1&&(pane=null),tabManager.open({path:workspaceDir+"/"+node.path,
pane:pane,noanim:sel.length>1,active:node===main,focus:node===main&&focus},function(){})}})}}var tree,menuContext,label,SCMPanel=imports.SCMPanel,tabManager=(imports.preferences,
imports.settings,imports.tabManager),panels=imports.panels,Tree=imports.Tree,scm=imports.scm,c9=imports.c9,layout=imports.layout,ui=imports.ui,Menu=imports.Menu,MenuItem=imports.MenuItem,tabbehavior=imports.tabbehavior,util=imports.util,scmlog=imports["scm.log"],basename=require("path").basename,dirname=require("path").dirname,escapeHTML=require("ace/lib/lang").escapeHTML,plugin=new SCMPanel("Ajax.org",main.consumes,{
caption:"Test Results",index:100,height:250,splitter:!0}),workspaceDir=c9.workspaceDir,arrayCache=[],drawn=!1,changed={
label:"modified files",className:"heading",items:[],isOpen:!0,isFolder:!0,noSelect:!0,$sorted:!0},staged={
label:"files staged for commit",className:"heading",items:[],isOpen:!0,isFolder:!0,noSelect:!0,$sorted:!0
},ignored={label:"ignored files",className:"heading",items:[],isOpen:!1,isFolder:!0,map:{},noSelect:!0,
$sorted:!0},untracked={label:"untracked files",className:"heading",items:[],isOpen:!1,isFolder:!0,map:{},
noSelect:!0,$sorted:!0},conflicts={label:"conflicts",className:"heading",items:[],isOpen:!0,isFolder:!0,
noSelect:!0,$sorted:!0}
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("show",function(e){}),
plugin.on("hide",function(e){}),plugin.on("unload",function(){drawn=!1}),plugin.freezePublicAPI({get tree(){
return tree},get changed(){return changed},get ignored(){return ignored},get staged(){return staged}}),
register(null,{"scm.detail":plugin})}return main.consumes=["SCMPanel","preferences","settings","panels","Tree","scm","Menu","MenuItem","tabManager","c9","util","tabbehavior","ui","layout","scm.log"],
main.provides=["scm.detail"],main})


define("plugins/c9.ide.scm/v1/scmpanel",[],function(require,module,exports){function main(options,imports,register){
function SCMPanel(developer,deps,options){function draw(e){amlFrame=showTitle?ui.frame({buttons:"min",
activetitle:"min","class":"absframe "+(options["class"]||""),style:"position:relative;"+(style||""),textselect:options.textselect,
caption:caption}):ui.bar({style:"position:relative;"+(style||""),"class":options["class"]||"",textselect:options.textselect
})
var aml=e.aml
100==index?aml.insertBefore(amlFrame,aml.firstChild):aml.appendChild(amlFrame),height&&amlFrame.setHeight(height),
plugin.addElement(amlFrame),emit.sticky("draw",{aml:amlFrame,html:amlFrame.$int}),amlFrame.on("prop.height",function(){
emit("resize")}),amlFrame.on("afterstatechange",function(){if(amlFrame.parentNode){amlFrame.parentNode.childNodes.forEach(function(n){
n.emit("resize")})
var closed="normal"!=amlFrame.state
settings.set("state/test/panel/"+options.name+"/@closed",closed)}}),settings.once("read",function(){var closed=settings.get("state/test/panel/"+options.name+"/@closed",closed)


closed&&setTimeout(function(){amlFrame.minimize()},10)}),scm.on("show",function(){emit("show")},plugin),
scm.on("hide",function(){emit("hide")},plugin),scm.resize()}function show(){amlFrame&&(amlFrame.restore?amlFrame.restore():amlFrame.show(),
scm.resize(),emit("show"))}function hide(){amlFrame.hide(),scm.resize(),emit("hide")}var plugin=new Plugin(developer,deps),emit=plugin.getEmitter()


emit.setMaxListeners(1e3)
var amlFrame,caption=options.caption,index=options.index||100,height=options.height||"",style=options.style||"",showTitle=options.showTitle||!1


return plugin.on("load",function(){scm.on&&scm.once("drawPanels",draw,plugin)}),plugin.freezePublicAPI.baseclass(),
plugin.freezePublicAPI({get aml(){return amlFrame},get visible(){return amlFrame.visible},get height(){
return amlFrame.getHeight()},set height(v){height!=v&&(height=v,amlFrame.setHeight(v))},_events:["draw"],
show:show,hide:hide}),plugin}var Plugin=imports.Plugin,ui=imports.ui,scm=imports.scm,settings=imports.settings


register(null,{SCMPanel:SCMPanel})}return main.consumes=["Plugin","ui","scm","settings"],main.provides=["SCMPanel"],
main})


define("text!plugins/c9.ide.scm/v1/style.css",[],"")


define("plugins/c9.ide.scm/v1/scm",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,plugin.setCommand({name:"changes",hint:"Changed Files",bindKey:{
mac:"",win:""},extra:function(editor,args,e){}}),commands.addCommand({name:"blame",group:"scm",exec:function(){
function done(){blameAnnotation&&null!==data&&blameAnnotation.setData(data)}var tab=tabs.focussedTab||tabs.getPanes()[0].activeTab


if(tab&&tab.path&&"ace"==tab.editorType){var blameAnnotation,data,ace=tab.editor.ace,session=ace.session


require(["../blame"],function(blameModule){ace.session==session&&(blameAnnotation=blameModule.annotate(ace),
done())})
var path=tab.path
scm.getBlame(path,function(err,blameInfo){return err?console.error(err):(data=blameInfo,void done())})

}},isAvailable:function(){var tab=tabs.focussedTab||tabs.getPanes()[0].activeTab
return!(!tab||!tab.path||"ace"!=tab.editorType)}},plugin),commands.addCommand({name:"addall",group:"scm",
exec:function(){addAll()}},plugin),commands.addCommand({name:"unstageall",group:"scm",exec:function(){
unstageAll()}},plugin),commands.addCommand({name:"fetch",group:"scm",exec:function(){fetch()}},plugin),
commands.addCommand({name:"push",group:"scm",exec:function(){push({})}},plugin),commands.addCommand({
name:"pull",group:"scm",exec:function(){pull({})}},plugin),void commands.addCommand({name:"commit",group:"scm",
exec:function(editor,args){args.message?commit(args.message,args.amend):(panels.activate("changes"),barCommit.show())

}},plugin))}function draw(opts){function link(btn,bar,main){btn.bar=bar,bar.button=btn,btn.onclick=function(){
bar.visible?bar.hide():(bar.show(),main&&main.focus())},bar.on("prop.visible",updateActiveDialog)}function updateActiveDialog(e){
e.value?(activeDialog&&activeDialog!=this&&activeDialog.hide(),activeDialog=this):activeDialog==this&&(activeDialog=null),
this.button.setAttribute("value",e.value)}function markDirty(e){clearTimeout(timer),timer=setTimeout(function(){
tree&&tree.meta.options&&!tree.meta.options.hash&&(tree.meta.options.force=!0,emit("reload",tree.meta.options))

},800)}if(!drawn){drawn=!0,ui.insertCss(require("text!./style.css"),plugin)
var vbox=opts.aml.appendChild(new ui.vbox({anchors:"0 0 0 0"}))
locationBar=vbox.appendChild(new ui.bar({skin:"toolbar-top","class":"fakehbox aligncenter debugger_buttons basic changes",
style:"white-space:nowrap !important;",height:30})),plugin.addElement(),ui.insertByIndex(locationBar,new ui.hsplitbox({
height:30,childNodes:[locationBox=new ui.textbox({skinset:"default",skin:"codebox","class":"tb_textbox",
value:"/",onkeyup:function(event){13===event.keyCode&&refreshWorkspace()}}),locationRefreshButton=new ui.button({
caption:"Refresh",skinset:"default",skin:"c9-menu-btn","class":"single-button",style:"text-align: center",
width:60,onclick:function(){refreshWorkspace()}})]}),1,plugin),toolbar=vbox.appendChild(new ui.bar({skin:"toolbar-top",
"class":"fakehbox aligncenter debugger_buttons basic changes",style:"white-space:nowrap !important;"})),
plugin.addElement(toolbar),barCommit=vbox.appendChild(new ui.bar({"class":"form-bar",visible:!1,childNodes:[commitBox=new apf.codebox({}),new ui.hbox({
padding:5,childNodes:[ammendCb=new ui.checkbox({label:"amend",skin:"checkbox_black",margin:"5 0 0 0"}),new ui.filler,commitBtn=new ui.button({
caption:"Commit",skin:"btn-default-css3","class":"btn-green",margin:"5 0 0 0",onclick:function(){commitBtn.disable(),
commit(commitBox.ace.getValue(),ammendCb.checked,function(err){return commitBtn.enable(),err?console.error(err):(ammendCb.uncheck(),
commitBox.ace.setValue(""),void barCommit.hide())})}})]})]})),commitBox.on("DOMNodeInsertedIntoDocument",function(){
commitBox.ace.setOption("minLines",2),commitBox.ace.commands.addCommand({bindKey:"Esc",exec:function(){
btnCommit.hideMenu()}}),commitBox.ace.commands.addCommand({bindKey:"Ctrl-Enter|Cmd-Enter",name:"commit",
exec:function(editor){commands.exec("commit",null,{message:commitBox.ace.getValue(),ammend:ammendCb.checked
})}})}),mnuCommit=new Menu({items:[new MenuItem({caption:"Add All",command:"addall",tooltip:"git add -u"
},plugin),new MenuItem({caption:"Unstage All",command:"unstageall",tooltip:"git add -u"},plugin)]}),btnCommit=ui.insertByIndex(toolbar,new ui.splitbutton({
caption:"Commit",skinset:"default",skin:"c9-menu-btn",submenu:mnuCommit.aml}),100,plugin),btnCommit.$button1.setAttribute("state",!0),
link(btnCommit.$button1,barCommit,commitBox)
var forceCb,branchBox
barPush=vbox.appendChild(new ui.bar({"class":"form-bar",visible:!1,childNodes:[new ui.hsplitbox({height:30,
align:"center",padding:3,childNodes:[new ui.label({caption:"Branch",width:70,margin:"5 0 0 0"}),branchBox=new apf.codebox]
}),new ui.hbox({padding:3,childNodes:[forceCb=new ui.checkbox({label:"force",skin:"checkbox_black",margin:"5 0 0 0"
}),new ui.filler,pushBtn=new ui.button({caption:"Push",skin:"btn-default-css3","class":"btn-green",margin:"5 0 0 0",
onclick:function(){pushBtn.disable(),push({branch:branchBox.ace.getValue(),force:forceCb.checked},function(err){
return pushBtn.enable(),err?console.error(err):void barPush.hide()})}})]})]})),btnPush=ui.insertByIndex(toolbar,new ui.button({
caption:"Push",skinset:"default",skin:"c9-menu-btn","class":"single-button",state:!0}),100,plugin),link(btnPush,barPush)


var pruneCb,branchBoxPull,pullBtn,fetchBtn
barPull=vbox.appendChild(new ui.bar({"class":"form-bar",visible:!1,childNodes:[new ui.hsplitbox({height:30,
align:"center",padding:3,childNodes:[new ui.label({caption:"Branch",width:70,margin:"5 0 0 0"}),branchBoxPull=new apf.codebox]
}),new ui.hbox({padding:3,childNodes:[pruneCb=new ui.checkbox({label:"prune",skin:"checkbox_black",margin:"5 0 0 0"
}),new ui.filler,fetchBtn=new ui.button({caption:"Fetch",skin:"btn-default-css3","class":"btn-green",
margin:"5 0 0 0",onclick:function(){pullBtn.disable(),fetchBtn.disable(),fetch({branch:branchBoxPull.ace.getValue(),
prune:pruneCb.checked},function(err){return pullBtn.enable(),fetchBtn.enable(),err?console.error(err):void barPull.hide()

})}}),pullBtn=new ui.button({caption:"Pull",skin:"btn-default-css3","class":"btn-green",margin:"5 0 0 0",
onclick:function(){pullBtn.disable(),fetchBtn.disable(),pull({branch:branchBoxPull.ace.getValue(),prune:pruneCb.checked
},function(err){return pullBtn.enable(),fetchBtn.enable(),err?console.error(err):void barPull.hide()})

}})]})]})),btnPull=ui.insertByIndex(toolbar,new ui.button({caption:"Pull",skinset:"default",skin:"c9-menu-btn",
"class":"single-button",state:!0}),100,plugin),link(btnPull,barPull),mnuBranches=new ui.menu({width:500,
style:"padding:0"}),mnuBranches.on("prop.visible",function(e){if(e.value){if(!branchesTree){branchesTree=new Datagrid({
container:mnuBranches.$int,scrollMargin:[0,0],theme:"blackdg",isLoading:function(){},getEmptyMessage:function(){
return this.keyword?"No files found that match '"+this.keyword+"'":this.isLoading()?"Loading file list. One moment please...":"No files found."

}},plugin),branchesTree.columns=[{caption:"Name",value:"name",width:"40%",type:"tree"},{caption:"Last Author",
value:"authorname",width:"20%"},{caption:"Last Commit",value:"subject",width:"40%"}]
var idMixin=function(){this.expandedList=Object.create(null),this.selectedList=Object.create(null),this.setOpen=function(node,val){
val?this.expandedList[node.path]=val:delete this.expandedList[node.path]},this.isOpen=function(node){
return this.expandedList[node.path]},this.isSelected=function(node){return this.selectedList[node.path]

},this.setSelected=function(node,val){val?this.selectedList[node.path]=!!val:delete this.selectedList[node.path]

}}
idMixin.call(branchesTree.model),branchesTree.model.expandedList["refs/remotes/"]=!0,branchesTree.container.style.margin="0 0px 0 0"

}branchesTree.minLines=3,branchesTree.maxLines=Math.floor((window.innerHeight-100)/branchesTree.rowHeight),
branchesTree.emptyMessage="loading...",scm.listAllRefs(function(err,data){if(err)return branchesTree.emptyMessage="Error while loading\n"+escapeHTML(err.message),
console.error(err)
var root={path:""}
data.forEach(function(x){x.path=x.name
var parts=x.name.split("/")
x.name=parts.pop()
var node=root
parts.forEach(function(p){var map=node.map||(node.map={})
node=map[p]||(map[p]={label:p,path:node.path+p+"/"})})
var map=node.map||(node.map={})
map[x.name]=x}),branchesTree.setRoot(root.map.refs),branchesTree.resize()})}}),btnBranches=ui.insertByIndex(toolbar,new ui.button({
caption:"Branches",skinset:"default",skin:"c9-menu-btn",style:"float:right",submenu:mnuBranches}),200,plugin),
mnuExecute=new Menu({items:[new MenuItem({caption:"Refresh",onclick:refresh},plugin)]},plugin),mnuSettings=mnuExecute,
btnSettings=opts.aml.appendChild(new ui.button({skin:"header-btn","class":"panel-settings changes",submenu:mnuSettings.aml
})),container=vbox.appendChild(new ui.bar({style:"flex:1;-webkit-flex:1;display:flex;flex-direction: column;"
})),plugin.on("show",function(){save.on("afterSave",markDirty),watcher.on("change",markDirty)}),plugin.on("hide",function(){
clearTimeout(timer),save.off("afterSave",markDirty),watcher.off("change",markDirty)}),watcher.watch(util.normalizePath(workspaceDir)+"/.git")


var timer=null
emit.sticky("drawPanels",{html:container.$int,aml:container})}}function registerSCM(name,scmPlugin){scms[name]=scmPlugin,
scm||(scm=scmPlugin),emit("register",{plugin:scmPlugin})}function unregisterSCM(name,scmPlugin){delete scms[name],
emit("unregister",{plugin:scmPlugin})}function refreshWorkspace(){var location=locationBox.getValue().trim()


"/"===location[0]&&(location=location.slice(1)),workspaceDir=c9.workspaceDir+"/"+location,emit("workspaceDir",{
workspaceDir:workspaceDir}),refresh()}function refresh(){getLog(),emit("reload")}function resize(){emit("resize")

}function getLog(){scm.getLog({},function(err,root){return err?console.error(err):void emit("log",root)

})}function commit(message,amend,callback){scm.commit({message:message,amend:amend},function(err){return err?console.error(err):(emit("reload"),
getLog(),void(callback&&callback()))})}function unstage(nodes){Array.isArray(nodes)||(nodes=[nodes])
var paths=nodes.map(function(node){return node.path}).filter(Boolean)
scm.unstage(paths,function(err){return err?console.error(err):void emit("reload")})}function addFileToStaging(nodes){
Array.isArray(nodes)||(nodes=[nodes])
var paths=nodes.map(function(node){return node.path}).filter(Boolean)
scm.addFileToStaging(paths,function(err){return err?console.error(err):void emit("reload")})}function addAll(){
scm.addAll(function(err){return err?console.error(err):void emit("reload")})}function unstageAll(){scm.unstageAll(function(err){
return err?console.error(err):void emit("reload")})}function fetch(options,callback){scm.fetch(options,function(err){
return err?console.error(err):(emit("reload"),void(callback&&callback()))})}function pull(options,callback){
scm.pull(options,function(err){return err?console.error(err):(emit("reload"),void(callback&&callback()))

})}function push(options,callback){scm.push(options,function(err){return err?callback(err):(emit("reload"),
void(callback&&callback()))})}function loadDiff(options,callback){return scm.loadDiff(options,function(err,result){
callback(err,result)})}function getStatus(options,callback){scm.getStatus(options,callback)}var Panel=imports.Panel,Menu=(imports.Tree,
imports.Menu),Datagrid=imports.Datagrid,MenuItem=imports.MenuItem,ui=(imports.Divider,imports.settings,
imports.ui),c9=imports.c9,tabs=imports.tabManager,watcher=imports.watcher,panels=imports.panels,util=imports.util,save=imports.save,commands=(imports.layout,
imports.preferences,imports.commands),experimental=imports["preferences.experimental"],escapeHTML=(require("ace_tree/data_provider"),
require("ace/lib/lang").escapeHTML),ENABLED=experimental.addExperiment("git",!c9.hosted,"Panels/Changes Panel")


if(!ENABLED)return register(null,{scm:{}})
var tree,commitBox,toolbar,ammendCb,commitBtn,mnuBranches,branchesTree,btnBranches,scm,mnuCommit,btnCommit,mnuExecute,barCommit,mnuSettings,btnSettings,container,btnPush,barPush,pushBtn,barPull,btnPull,activeDialog,locationBar,locationBox,locationRefreshButton,plugin=new Panel("Ajax.org",main.consumes,{
index:options.index||350,caption:"Changes",buttonCSSClass:"changes",minWidth:130,autohide:!0,where:options.where||"left"
}),emit=plugin.getEmitter(),scms={},workspaceDir=c9.workspaceDir,loaded=!1,drawn=!1
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("show",function onShow(e){return scm?(emit("reload",{force:!0
}),void getLog()):plugin.once("register",onShow)}),plugin.on("hide",function(e){}),plugin.on("unload",function(){
loaded=!1,drawn=!1}),plugin.freezePublicAPI({register:registerSCM,unregister:unregisterSCM,addFileToStaging:addFileToStaging,
loadDiff:loadDiff,unstage:unstage,getStatus:getStatus,resize:resize}),register(null,{scm:plugin})}return main.consumes=["Panel","Menu","MenuItem","Divider","settings","ui","c9","watcher","panels","util","save","preferences","commands","Tree","Datagrid","tabManager","layout","preferences.experimental"],
main.provides=["scm"],main})


define("plugins/c9.ide.test.mocha/mocha",[],function(require,exports,module){function main(options,imports,register){
function load(){test.inactive}function populate(node,callback){fs.readFile(node.path,function(err,contents){
return err?callback(err):void updateOutline(node,contents,callback)})}function updateOutline(node,contents,callback){
language.getWorker(function(err,worker){if(err)return callback&&callback(err)||console.error(err)
var currentId=++wid
worker.emit("mocha_outline",{data:{id:currentId,code:contents}}),worker.on("mocha_outline_result",function onResponse(e){
e.data.id===currentId&&(worker.off("mocha_outline_result",onResponse),node.importItems(e.data.result),
callback&&callback())})})}function getTestNode(node,id,name){var count=0,found=function recur(items,pname){
for(var j,i=0;i<items.length;i++){if(j=items[i],"test"==j.type&&count++,void 0!==id?count==id:pname+j.label==name)return j


if(j.items){var found=recur(j.items,pname+("testset"==j.type?j.label+" ":""))
if(found)return found}}}([node],"")
return found}function findTestName(name,node){for(var nodes=node.findAllNodes("testset"),i=0;i<nodes.length;i++){
var lbl=nodes[i].label.trim(),idx=name.indexOf(lbl)
if(~idx)return findTestName(name.substr(idx+lbl.length).trim(),nodes[i])}return[name,node]}function getFullTestName(node){
var name=[]
do name.unshift(node.label),node=node.parent
while("file"!=node.type)
return name.join(" ")}function run(node,progress,options,callback){"function"==typeof options&&(callback=options,
options=null)
var fileNode,exec="mocha",args=["--reporter","tap"],allTests=node.findAllNodes("test"),allTestIndex=0


"file"==node.type?(fileNode=node,progress.start(allTests[allTestIndex]||node)):(fileNode=node.findFileNode(),
progress.start("test"==node.type?node:allTests[allTestIndex]),args.push("--grep",util.escapeRegExp(getFullTestName(node))+("test"==node.type?"$":""))),
fileNode.ownPassed=null,fileNode.output=""
var withCodeCoverage=options&&options.withCodeCoverage,withDebug=options&&options.debug,parallel=options&&options.parallel


withCodeCoverage||parallel||!withDebug||(args.push("--debug","--debug-brk"),debugging=!0,debug.debug({
STARTED:2,runner:{"debugger":"v8",debugport:5858,disabled:{liveUpdate:!0}},running:2,name:plugin.root.label,
meta:{$debugger:!0}},!1,function(err){if(err)return debugging=!1}))
var path=join(c9.workspaceDir,fileNode.path)
args.push(path)
var coveragePath="~/.c9/coverage/run"+ ++uniqueId
return withCodeCoverage&&(exec="istanbul",args.unshift("cover","--print","none","--report","lcovonly","--dir",coveragePath,isWin?"node_modules/mocha/bin/_mocha":"_mocha","--")),
isWin?(args.unshift("-c",'"$0" "$@"',exec),exec="bash.exe"):(args.unshift("-l","-c",'"$0" "$@"',exec),
exec="bash"),proc.pty(exec,{args:args,cwd:dirname(path),fakePty:isWin},function(err,pty){if(err)return callback(err)


var buffer=createBuffer(pty,fileNode,node,progress,allTests,allTestIndex,withCodeCoverage,coveragePath,callback)


pty.on("data",function(c){buffer.read(c)}),pty.on("exit",function(c){buffer.end(c)})}),stop}function createBuffer(pty,fileNode,node,progress,allTests,allTestIndex,withCodeCoverage,coveragePath,callback){
var lastResultNode,testCount,bailed,ptyId=currentPty.push(pty),output="",totalTests=0
return{buffer:"",incomplete:"",read:function(c){progress.log(fileNode,c)
var lines=(this.incomplete+c).split(/[\r\n]+/)
this.incomplete=""
for(var line,i=0,l=lines.length;i<l;i++)if(line=lines[i],i==l-1)this.incomplete+=line
else if(line.match(/^(\d+)\.\.(\d+)$/m))testCount=parseInt(RegExp.$2,10)
else{if(line.match(/^# (?:tests|pass|fail)/))continue
line.match(/^Bail out!(.*)$/m)?bailed=3:line.match(/^(ok|not ok)\s+(\d+)\s+(.*)$/m)?(this.readTest(this.buffer),
this.buffer=line):this.buffer+=(this.buffer?"\n":"")+line}},readTest:function(c){var m=c.match(/^(ok|not ok)\s+(\d+)\s+(.*)$/m)


if(m){var pass="ok"==m[1]?1:0,id=m[2],name=m[3]
name.match(/"(before all|before each|after all|after each)" hook/,"$1")&&(name=name.replace(/"(before all|before each|after all|after each)" hook .*/,"$1"),
id=void 0,pass||(bailed=2,pass=2))
var resultNode="test"==node.type?node:getTestNode(node,id,name)
if(!resultNode){var context=findTestName(name,node)
resultNode=fileNode.addTest({label:context[0],type:"test",kind:"it",pos:{sl:0,el:0,sc:0,ec:0}},context[1])

}if(lastResultNode=resultNode,resultNode.output=output+"\n",resultNode.passed=pass,resultNode.annotations=null,
output="",totalTests++,progress.end(resultNode),c=c.replace(/^.*([\r\n]+|$)/,""),!bailed){var nextTest=allTests[++allTestIndex]


nextTest&&progress.start(nextTest)}}var stackTrace
if(c.match(/^\s*Error: timeout/)||c.match(/^\s+at .*:\d+:\d+\)?$/m)){if(!lastResultNode)return lastResultNode=fileNode,
fileNode.ownPassed=2,void(fileNode.output=c)
if(c.match(/^\s*Error: timeout/))lastResultNode.output+=c
else if(stackTrace=parseTrace(c))if(withCodeCoverage)lastResultNode.output+=c
else{lastResultNode.annotations||(lastResultNode.annotations=[])
var path=join(c9.workspaceDir,fileNode.path),pos=stackTrace.findPath(path)
pos?lastResultNode.annotations.push({line:pos.lineNumber,column:pos.column,message:c.trim().replace(/^\s+at/gm,"  at")
}):output+=c}}else output+=c},end:function(c){function done(err){allTests.forEach(function(n){"loaded"!=n.status&&progress.end(n)

}),callback(err,node)}if(delete currentPty[ptyId],this.buffer&&this.readTest(this.buffer),output&&(lastResultNode?lastResultNode.output+=output:fileNode.output=output,
output=""),fileNode.output.indexOf("SyntaxError:")>-1){var stackTrace=parseTrace(fileNode.output),filepath=isWin?fileNode.path.replace(/\//g,"\\"):fileNode.path,rePath=new RegExp(util.escapeRegExp(filepath)+":(\\d+)"),m=fileNode.output.match(rePath)


if(m[1]){fileNode.annotations||(fileNode.annotations=[])
var lineNumber=parseInt(m[1])
fileNode.annotations.push({line:lineNumber,column:0,message:"SyntaxError:"+stackTrace.message.split("SyntaxError:")[1]
}),fileNode.output=stackTrace.message+"\n"+fileNode.path.substr(1)+":"+lineNumber,fileNode.ownPassed=3

}}testCount!==totalTests?pty.isKilled||(fileNode.ownPassed=2):(bailed||pty.isKilled)&&(fileNode.ownPassed=pty.isKilled?3:bailed),
withCodeCoverage&&!bailed?fs.readFile(coveragePath+"/lcov.info",function(err,lcovString){return err?done(err):(node.coverage=Coverage.fromLCOV(lcovString,coveragePath),
void done())}):(node.coverage=null,done())}}}function parseTrace(stackString){for(var parts,started,node=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i,lines=stackString.split("\n"),stack=[],message=[],i=0,j=lines.length;i<j;++i)(parts=node.exec(lines[i]))?(stack.push({
file:parts[2],methodName:parts[1]||UNKNOWN_FUNCTION,lineNumber:+parts[3],column:parts[4]?+parts[4]:null
}),started=!0):started||message.push(lines[i])
return stack.message=message.join("\n"),!((stack.message+stack[0].file).indexOf("mocha/lib/runner.js")>-1)&&(stack.findPath=function(path,isFilename){
for(var i=0;i<stack.length;i++)if(stack[i].file==path)return stack[i]
return!isFilename&&this.findPath(basename(path),!0)},stack)}function stop(){currentPty.forEach(function(pty){
pty.isKilled=!0,pty.kill()}),currentPty=[],debugging&&debug.stop()}function parseLinks(strOutput){return strOutput.replace(reStack,function(m,name,l,c){
name=name.replace(c9.workspaceDir,""),"/"!=name.charAt(0)&&(name="/"+name)
var link=name+":"+(l-1)+(c?":"+c:"")
return"<span class='link' link='"+link+"'>"+m+"</span>"})}function findFileByPath(path){var found=!1
return plugin.root.findAllNodes("file").some(function(n){if(n.path==path)return found=n,!0}),found}function fileChange(options){
var fileNode=findFileByPath(options.path)
fileNode||(fileNode=plugin.createFile(options.path.substr(1))),fileNode.runner||(fileNode.runner=plugin),
(fileNode.items.length||options.runonsave)&&updateOutline(fileNode,options.value,function(){options.refresh(),
options.run(fileNode)})}var debugging,TestRunner=imports.TestRunner,proc=imports.proc,util=imports.util,test=imports.test,fs=imports.fs,c9=imports.c9,language=imports.language,debug=imports["debugger"],Coverage=test.Coverage,dirname=require("path").dirname,basename=require("path").basename,join=require("path").join,plugin=new TestRunner("Ajax.org",main.consumes,{
caption:"Mocha Javascript Tests",query:{id:"mocha",label:"Mocha Test Runner",def:{match:{content:["^\\s*describe\\s*\\(","^\\s*suite\\s*\\("],
filename:[".js$"]},exclude:{dir:["node_modules"],file:[]},search:"*"}},getName:function(name){return name.substr(1)

},options:[{title:"Enable Debugger",type:"checkbox-single",setting:"state/test/mocha/@debug",name:"debug"
}]}),currentPty=[],isWin="win32"==c9.platform,uniqueId=0,wid=0,UNKNOWN_FUNCTION="<unknown>",reStack=/([\\\/\w-_\.]+):(\d+)(?::(\d+))?/g


plugin.on("init",function(){}),plugin.on("load",function(){language.registerLanguageHandler("plugins/c9.ide.test.mocha/mocha_outline_worker"),
load()}),plugin.on("unload",function(){currentPty=null,debugging=null}),plugin.freezePublicAPI({populate:populate,
parseLinks:parseLinks,fileChange:fileChange,run:run,stop:stop}),register(null,{"test.mocha":plugin})}
return main.consumes=["TestRunner","proc","util","fs","test","language","c9","debugger"],main.provides=["test.mocha"],
main})


define("plugins/c9.ide.test/coverageview",[],function(require,exports,module){function main(options,imports,register){
function CoverageView(){function update(){var files,nodes=[],lookup=nodes.lookup||(nodes.lookup={}),filter=dropdown.value


"all"==filter?files=coverage.files:(files={},coverage.tests[filter].paths.forEach(function(path){var cvg=coverage.files[path]


cvg&&(files[path]={coveredLines:cvg.lines.covered.length,totalLines:cvg.lines.covered.length+cvg.lines.uncovered.length,
lines:coverage.files[path].lines})}))
for(var path in files){var file=files[path]
if(file.lines){var node=lookup[path]
node||nodes.push(node=lookup[path]={label:path.substr(1)}),node.covered=Math.round(file.coveredLines/file.totalLines*100),
node.uncovered=file.totalLines-file.coveredLines}}for(var items=dropdown.childNodes,i=items.length-1;i>=0;i--)"all"!=items[i].value&&dropdown.removeChild(items[i])


var tests=coverage.tests
for(var path in tests){var name=basename(dirname(path))+"/"+basename(path)
dropdown.appendChild(new ui.item({caption:name,value:path}))}datagrid.setRoot(nodes)}var datagrid,dropdown,plugin=new Editor("Ajax.org",main.consumes,extensions),BGCOLOR={
"flat-light":"#f7f7f7","flat-dark":"#3D3D3D",light:"#D3D3D3","light-gray":"#D3D3D3",dark:"#3D3D3D","dark-gray":"#3D3D3D"
}
return plugin.on("draw",function(e){var vbox=e.tab.appendChild(new ui.vsplitbox({childNodes:[new ui.hbox({
height:32,edge:"1 1 1 1","class":"coverage-toolbar",childNodes:[new ui.label({caption:"Filter:"}),dropdown=new ui.dropdown({
skin:"black_dropdown",value:"all",minwidth:150,maxitems:15,childNodes:[new ui.item({caption:"All Tests",
value:"all",selected:!0})]})]})]}))
dropdown.on("afterchange",function(){update()})
var container=vbox.appendChild(new ui.bar)
datagrid=new Datagrid({container:container.$int,columns:[{caption:"Hierarchy",value:"label",width:"60%",
type:"tree"},{caption:"Covered (%)",width:"20%",getText:function(node){return node.covered+"%"}},{caption:"Not Covered",
value:"uncovered",width:"20%"}]},plugin),datagrid.on("afterChoose",function(){tabManager.openFile("/"+datagrid.selectedNode.label,!0,function(){})

}),coverage.on("update",function(){update()},plugin),e.htmlNode.style.padding=0,update()}),plugin.on("documentLoad",function(e){
function setTheme(e){var tab=doc.tab,isDark="dark"==e.theme
tab.backgroundColor=BGCOLOR[e.theme],isDark?tab.classList.add("dark"):tab.classList.remove("dark")}var doc=e.doc


layout.on("themeChange",setTheme,doc),setTheme({theme:settings.get("user/general/@skin")}),doc.title="Code Coverage"

}),plugin.on("documentActivate",function(e){}),plugin.on("resize",function(e){datagrid&&datagrid.resize()

}),plugin.freezePublicAPI({}),plugin.load(null,"coverageview"),plugin}var ui=imports.ui,Editor=(imports.save,
imports.Editor),Datagrid=imports.Datagrid,editors=imports.editors,layout=imports.layout,Divider=imports.Divider,MenuItem=imports.MenuItem,tabManager=imports.tabManager,settings=imports.settings,console=imports.console,commands=imports.commands,coverage=imports["test.coverage"],basename=require("path").basename,dirname=require("path").dirname,extensions=[],handle=editors.register("coverageview","Coverage View",CoverageView,extensions)


handle.on("load",function(){commands.addCommand({name:"opencoverageview",group:"Test",exec:function(editor,args){
var tab
tabManager.getTabs().some(function(t){if("coverageview"==t.editorType)return tab=t,!0})?tabManager.focusTab(tab):(console.show(),
tabManager.open({editorType:"coverageview",focus:!0,pane:console.getPanes()[0]},function(){}))}},handle),
coverage.on("draw",function(){coverage.buttonMenu.append(new Divider),coverage.buttonMenu.append(new MenuItem({
caption:"Open Code Coverage View",command:"opencoverageview"}))},handle)}),register(null,{"test.coverageview":handle
})}return main.consumes=["Editor","editors","ui","save","test.coverage","Datagrid","layout","settings","tabManager","commands","Divider","MenuItem","console"],
main.provides=["test.coverageview"],main})


define("plugins/c9.ide.test/coverage",[],function(require,exports,module){function main(options,imports,register){
function load(){test.inactive||(test.on("coverage",function(e){addToLibrary(e.node),showCoverage||commands.exec("togglecoverage")

},plugin),test.on("clearCoverage",function(e){removeFromLibrary(e.node)},plugin),test.on("clear",function(){
clear()},plugin),tabManager.on("open",function(e){var tab=e.tab
showCoverage&&(files[tab.path]?decorateTab(tab):tests[tab.path]&&decorateTab(tab,!0))}),commands.addCommand({
name:"openrelatedtestfiles",group:"Test",exec:function(editor,args){var tree=test.focussedPanel.tree,fileNode=tree.selectedNode.findFileNode()


tests[fileNode.path]&&tests[fileNode.path].paths.forEach(function(path){tabManager.openFile(path,!0,function(){})

})},isAvailable:function(){var tree=test.focussedPanel.tree
if(!tree||!tree.selectedNode)return!1
var fileNode=tree.selectedNode.findFileNode()
return!!tests[fileNode.path]}},plugin),commands.addCommand({name:"togglecoverage",group:"Test",exec:function(){
if(showCoverage=!showCoverage,settings.set("state/test/coverage/@show",showCoverage),showCoverage){var tab


for(var path in tests)tab=tabManager.findTab(path),tab&&decorateTab(tab,!0)
for(var path in files)tab=tabManager.findTab(path),tab&&decorateTab(tab)}else clearAllDecorations()},
isAvailable:function(){for(var path in tests)if(tests[path].all)return!0
return!1}},plugin),commands.addCommand({name:"clearcoverage",group:"Test",exec:function(){clear()},isAvailable:function(){
for(var path in tests)if(tests[path].all)return!0
return!1}},plugin),settings.on("read",function(){settings.setDefaults("user/test/coverage",[["alwayson",!1],["fullline",!0],["testfiles",!1],["toolbar",!0]]),
settings.setDefaults("state/test/coverage",[["show",!1]]),settings.set("state/test/coverage/@show",!1)


var totalCoverage=settings.getNumber("state/test/coverage/@total")
if(totalCoverage&&settings.getBool("user/test/coverage/@toolbar")){draw()
var amount=button.$ext.querySelector(".amount")
amount.textContent=totalCoverage+"%",button.show()}all.once("draw",function(){test.settingsMenu.append(new Divider({
position:400})),test.settingsMenu.append(new MenuItem({caption:"Show Coverage",type:"check",checked:"state/test/coverage/@show",
position:500,command:"togglecoverage"})),test.settingsMenu.append(new MenuItem({caption:"Always Run With Code Coverage",
checked:"user/test/coverage/@alwayson",type:"check",position:600})),test.settingsMenu.append(new MenuItem({
caption:"Mark Full Line Coverage In Editor",checked:"user/test/coverage/@fullline",type:"check",position:700
}))})},plugin),settings.on("user/test/coverage/@fullline",function(value){showCoverage&&(commands.exec("togglecoverage"),
commands.exec("togglecoverage"))},plugin),settings.on("user/test/coverage/@testfiles",function(value){
if(showCoverage){var tab
if(value)for(var path in tests)tab=tabManager.findTab(path),tab&&decorateTab(tab)
else for(var path in tests)if(tab=tabManager.findTab(path)){var session=tab.document.getSession().session


session&&clearDecoration(session)}}},plugin),settings.on("user/test/coverage/@toolbar",function(value){
value?settings.getNumber("state/test/coverage/@total")&&button.show():button.hide()},plugin),prefs.add({
Test:{position:1e3,"Code Coverage":{position:400,"Always Run With Code Coverage":{type:"checkbox",position:100,
setting:"user/test/coverage/@alwayson"},"Mark Full Line Coverage In Editor":{type:"checkbox",position:200,
setting:"user/test/coverage/@fullline"},"Show Code Coverage In Test Files":{type:"checkbox",position:300,
setting:"user/test/coverage/@testfiles"},"Show Total Code Coverage In Toolbar":{type:"checkbox",position:400,
setting:"user/test/coverage/@toolbar"}}}},plugin),save.on("afterSave",function(e){if(settings.getBool("user/test/@runonsave")&&files[e.path]){
var tests=Object.keys(files[e.path].coverage).map(function(path){return all.findTest(path)}),cmd=files[e.path].coverage?"runtestwithcoverage":"runtest"


commands.exec(cmd,null,{nodes:tests})}},plugin),all.on("draw",function(){var menuRelatedFiles=new Menu({},plugin)


menuRelatedFiles.on("itemclick",function(e){tabManager.openFile(e.value,!0)}),menuRelatedFiles.on("show",function(){
for(var tree=test.focussedPanel.tree,fileNode=tree.selectedNode.findFileNode(),items=menuRelatedFiles.items,i=items.length-1;i>0;i--)menuRelatedFiles.remove(items[i])


tests[fileNode.path]&&tests[fileNode.path].paths.forEach(function(path){menuRelatedFiles.append(new MenuItem({
caption:path,value:path}))})}),all.contextMenu.append(new MenuItem({caption:"Open Related Files",position:450,
submenu:menuRelatedFiles,isAvailable:function(){var tree=test.focussedPanel.tree
if(!tree||!tree.selectedNode)return!1
var fileNode=tree.selectedNode.findFileNode()
return!!tests[fileNode.path]}}),plugin)}))}function draw(){drawn||(drawn=!0,menu=new Menu({items:[new MenuItem({
caption:"Show Coverage",checked:"state/test/coverage/@show",type:"check",position:500,command:"togglecoverage"
}),new MenuItem({caption:"Clear",command:"clearcoverage"})]},plugin),button=new ui.button({skin:"c9-simple-btn",
"class":"coverage-btn",visible:!1,submenu:menu.aml}),ui.insertByIndex(layout.findParent({name:"preferences"
}),button,865,plugin),button.$ext.innerHTML='                <div class="title">Code coverage</div>                <div class="amount">~</div>',
emit.sticky("draw"))}function addToLibrary(node){var fileNode=node.findFileNode(),coverageFiles=node.coverage.files


tests[fileNode.path]&&tests[fileNode.path].all||(tests[fileNode.path]={paths:coverageFiles.map(function(coverage){
return coverage.file.replace(reWs,"")}),node:fileNode,all:coverageFiles}),coverageFiles.forEach(function(coverage){
var tab,path=coverage.file.replace(reWs,"")
if(tests[path])tests[path].own=coverage,tab=tabManager.findTab(path),tab&&decorateTab(tab,!0)
else{var fInfo=files[path]
fInfo&&fInfo.coverage||(fInfo=files[path]={coverage:{},lines:{},paths:[],coveredLines:0})
var isNew=!fInfo.coverage[fileNode.path]
if(fInfo.coverage[fileNode.path]||fInfo.paths.push(fileNode.path),fInfo.coverage[fileNode.path]=coverage,
fInfo.totalLines=coverage.lines.found,isNew)fInfo.lines.covered=coverage.lines.covered,fInfo.lines.uncovered=coverage.lines.uncovered
else{var covered={},uncovered={}
for(var path in fInfo.coverage){var cvg=fInfo.coverage[path];(cvg.lines.covered||[]).forEach(function(nr){
covered[nr]=!0}),(cvg.lines.uncovered||[]).forEach(function(nr){uncovered[nr]=!0})}fInfo.lines={covered:Object.keys(covered),
uncovered:Object.keys(uncovered)}}fInfo.coveredLines=fInfo.lines.covered.length,tab=tabManager.findTab(path),
tab&&decorateTab(tab)}}),updateGlobalCoverage(),emit("update")}function removeFromLibrary(node){var path="string"==typeof node?node:node.findFileNode().path


if(tests[path]){var all=tests[path].all,fileNode=tests[path].node
delete tests[path].own,delete tests[path].all,delete tests[path].node,fileNode&&(fileNode.coverage=null,
testAll.writeToCache(fileNode.findRunner(),path,fileNode.serialize())),all&&(all.forEach(function(coverage){
var tab,path=coverage.file.replace(reWs,"")
if(files[path]){var fInfo=files[path]
delete fInfo.coverage,delete fInfo.lines}tab=tabManager.findTab(path),tab&&clearDecoration(tab)}),emit("update"))

}}function updateGlobalCoverage(){var totalLines=0,coveredLines=0
for(var path in files){var file=files[path]
totalLines+=file.totalLines,coveredLines+=file.coveredLines}draw()
var amount=button.$ext.querySelector(".amount"),totalCoverage=Math.round(coveredLines/totalLines*100)


amount.innerHTML=totalLines?totalCoverage+"%":"~",button[totalLines?"show":"hide"](),settings.set("state/test/coverage/@total",totalCoverage)

}function addMarker(session,type,row,showMarker){var marker=showMarker?session.addMarker(new Range(row,0,row,1),"test-"+type,"fullLine"):null


session.addGutterDecoration(row,type),session.coverageLines.push({marker:marker,gutter:row,type:type})

}function decorateTab(tab,isTest){if((!isTest||tests[tab.path])&&files[tab.path]&&(!isTest||settings.getBool("user/test/coverage/@testfiles"))){
var session=tab.document.getSession().session
if(!session)return void tab.once("activate",function(){setTimeout(function(){decorateTab(tab,isTest)})

})
clearDecoration(session)
var coverage=isTest?tests[tab.path].own:files[tab.path],showMarker=settings.getBool("user/test/coverage/@fullline")


coverage.lines.covered&&coverage.lines.covered.forEach(function(row){addMarker(session,"covered",row-1,showMarker)

}),coverage.lines.uncovered&&coverage.lines.uncovered.forEach(function(row){addMarker(session,"uncovered",row-1,showMarker)

})}}function clearDecoration(session){session.document&&!(session=session.document.getSession().session)||(session.coverageLines&&session.coverageLines.forEach(function(i){
i.marker&&session.removeMarker(i.marker),session.removeGutterDecoration(i.gutter,i.type)}),session.coverageLines=[])

}function clearAllDecorations(){tabManager.getTabs().forEach(function(tab){if("ace"==tab.editorType){
var session=tab.document.getSession().session
session&&session.coverageLines&&clearDecoration(session)}}),showCoverage=!1,settings.set("state/test/coverage/@show",!1)

}function clear(){for(var path in tests)removeFromLibrary(path)
emit("update")}var menu,button,drawn,Plugin=imports.Plugin,test=imports.test,all=imports["test.all"],ui=imports.ui,c9=imports.c9,util=imports.util,layout=imports.layout,commands=imports.commands,settings=imports.settings,tabManager=imports.tabManager,Menu=imports.Menu,MenuItem=imports.MenuItem,Divider=imports.Divider,save=imports.save,prefs=imports.preferences,testAll=imports["test.all"],Range=require("ace/range").Range,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),files={},tests={},showCoverage=!1,reWs=new RegExp("^"+util.escapeRegExp(c9.workspaceDir))


plugin.on("load",function(){load()}),plugin.on("unload",function(){drawn=!1,files=null,tests=null,showCoverage=null,
menu=null,button=null}),plugin.freezePublicAPI({get buttonMenu(){return menu},get tests(){return tests

},get files(){return files},clear:clear}),register(null,{"test.coverage":plugin})}return main.consumes=["Plugin","test","ui","layout","test.all","c9","util","tabManager","commands","settings","Menu","MenuItem","Divider","preferences","save","test.all"],
main.provides=["test.coverage"],main})


define("plugins/c9.ide.test/results",[],function(require,exports,module){function main(options,imports,register){
function load(){test.inactive||(panels.on("afterAnimate",function(){panels.isActive("test")&&tree&&tree.resize()

}),settings.on("read",function(){settings.setDefaults("user/test",[["collapsegroups",!1]])},plugin),prefs.add({
Test:{position:1e3,"Test Runner":{position:100,"Collapse Passed and Skipped Groups":{type:"checkbox",
position:200,setting:"user/test/@collapsegroups"}}}},plugin))}function draw(opts){drawn||(drawn=!0,tree=new Tree({
container:opts.html,maxLines:50,scrollMargin:[10,10],theme:"filetree",getCaptionHTML:function(node){if("file"==node.type){
var path=dirname(node.label)
return"."==path?escapeHTML(node.label):basename(path)+"/"+basename(node.label)+"<span class='extrainfo'> - "+dirname(path)+"</span>"

}return"all"==node.type?escapeHTML(node.label)+" ("+node.items.length+")":"testset"==node.type?"<span style='opacity:0.5;'>"+escapeHTML(node.label)+"</span>":"it"==node.kind?"it "+escapeHTML(node.label):"result"==node.type?escapeHTML(node.label)+" <span style='font-size:11px'>("+node.items.length+")</span>":escapeHTML(node.label)

},getIconHTML:function(node){var icon="default"
return"loading"===node.status?icon="loading":"running"===node.status?icon="test-in-progress":1===node.passed?icon="test-passed":0===node.passed?icon="test-failed":2===node.passed?icon="test-error":3===node.passed?icon="test-terminated":node.skip?icon="test-ignored":"testset"==node.type?icon="test-set":"file"==node.type?icon="test-file":"runner"==node.type?icon="test-file":"prepare"==node.type?icon="test-prepare":"test"==node.type&&(icon="test-notran"),
"<span class='ace_tree-icon filetree-icon "+icon+"'></span>"},getClassName:function(node){return(node.className||"")+("loading"==node.status?" loading":"")+("running"==node.status?" loading":"")

},getRowIndent:function(node){return node.$depth?node.$depth-1:0}},plugin),tree.container.style.position="absolute",
tree.container.style.left="0",tree.container.style.top="0",tree.container.style.right="10px",tree.container.style.bottom="0",
tree.container.style.height="",failNode=new Node({label:"failed",isOpen:!0,passed:0,type:"result",className:"heading",
noSelect:!0,$sorted:!0}),passNode=new Node({label:"passed",isOpen:!0,passed:1,type:"result",className:"heading",
noSelect:!0,$sorted:!0}),termNode=new Node({label:"terminated",isOpen:!0,passed:3,type:"result",className:"heading",
noSelect:!0,$sorted:!0}),skipNode=new Node({label:"skipped",isOpen:!0,passed:4,type:"result",className:"heading",
noSelect:!0,$sorted:!0}),errNode=new Node({label:"error",isOpen:!0,passed:2,type:"result",className:"heading",
noSelect:!0,$sorted:!0}),tree.setRoot(rootNode=new Node({label:"root",tree:tree})),tree.commands.bindKey("Space",function(e){
openTestFile()}),tree.commands.bindKey("Enter",function(e){commands.exec("runtest")}),tree.on("focus",function(){
test.focussedPanel=plugin}),tree.on("select",function(){openTestFile([tree.selectedNode],!0)}),tree.on("afterChoose",function(){
tree.selectedNode&&!tree.model.hasChildren(tree.selectedNode)&&openTestFile([tree.selectedNode],!1)}),
tree.on("afterRender",recalc),layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".filetree .tree-row","height"),10)||22


tree.rowHeightInner=height,tree.rowHeight=height,e.changed&&tree&&tree.resize(!0)}),all.on("draw",function(){
opts.aml.setAttribute("contextmenu",all.contextMenu.aml)},plugin),test.on("clear",function(){clear()},plugin),
plugin.hide(),all.on("result",function(e){handleResult(e.node)},plugin),all.on("clearResult",function(e){
clearResult(e.node)},plugin),function _(node){node.items.forEach(function(node){"file"==node.type?void 0!==node.passed&&handleResult(node):_(node)

})}(all.root),settings.on("read",function(){test.settingsMenu.append(new MenuItem({caption:"Collapse Passed and Skipped Groups",
checked:"user/test/@collapsegroups",type:"check",position:300}))},plugin),settings.on("user/test/@collapsegroups",function(value){
plugin.visible&&(skipNode.isOpen=!value,passNode.isOpen=!value,tree.refresh())},plugin))}function openTestFile(nodes,onlyWhenOpen){
all.openTestFile(nodes||tree.selectedNodes,onlyWhenOpen)}function skip(nodes,callback){"function"==typeof nodes&&(callback=nodes,
nodes=null),nodes||(nodes=tree.selectedNodes),all.skip(nodes,callback)}function remove(nodes,callback){
"function"==typeof nodes&&(callback=nodes,nodes=null),nodes||(nodes=tree.selectedNodes),all.remove(nodes,callback)

}function clear(){plugin.hide(),failNode.items.length=0,passNode.items.length=0,errNode.items.length=0,
skipNode.items.length=0,state={},tree.refresh()}function recalc(){var maxHeight=Math.round(.6*test.aml.getHeight()),cells=tree.container.querySelector(".ace_tree_cells").lastChild,newHeight=Math.min(maxHeight,cells.scrollHeight+tree.container.parentNode.offsetTop+20)


newHeight!=plugin.height&&(plugin.height=newHeight,test.resize())}function calcIndex(group,node){for(var pitems=node.parent.items,idx=pitems.indexOf(node),pass=node.passed,found=0,i=idx;i>=0;i--)if(pitems[i].passed==pass&&(group.some(function(n,j){
if(n.label==pitems[i].label)return found=j+1,!0}),found))return found
return found}function clearResult(node){!function _(items){for(var i=items.length-1;i>=0;i--)items[i].label==node.label?items.splice(i,1):items[i].items&&_(items[i].items)

}(tree.root.items),tree.refresh()}function handleResult(node){var nodes=[failNode,passNode,errNode,termNode,skipNode],results=[failNode.items,passNode.items,errNode.items,termNode.items,skipNode.items]


node.fixParents(),clearResult(node),importResultsToTree(node,results)
var hasFail=results[0].length||results[2].length
rootNode.items.length=0,[0,2,3,1,4].forEach(function(i){results[i].length&&(rootNode.items.push(nodes[i]),
!settings.getBool("user/test/@collapsegroups")||1!==i&&4!==i||(nodes[i].isOpen=!hasFail))}),rootNode.items.length&&plugin.show(),
tree.refresh()}function importResultsToTree(node,results,force){if(results.found||(results.found=0),"test"==node.type||"prepare"==node.type||force){
if(void 0===node.passed)return
var group=results[node.passed]
results.found++
for(var loop=node,parentList=[node];"file"!=loop.type;)loop=loop.parent,parentList.push(loop)
!function recur(pNode,group,name){if(pNode){var groupNode
if(group.some(function(n){if(n.label==pNode.label)return groupNode=n,!0})){var items=groupNode.items,isOpen=groupNode.isOpen


util.extend(groupNode.data,pNode.data),groupNode.isOpen=isOpen,groupNode.children=groupNode.items=items

}else groupNode=pNode.clone(!0),"file"==groupNode.type?(group.unshift(groupNode),groupNode.runner=pNode.runner||pNode.parent&&pNode.parent.runner):group.splice(calcIndex(group,pNode),0,groupNode),
groupNode.children=groupNode.items=[],"file"==groupNode.type&&(groupNode.isOpen=!(1===node.passed||4===node.passed))


if(groupNode.passed=node.passed,"test"==groupNode.type||"prepare"==groupNode.type){var cachedNode=state[name+" "+groupNode.label]


if(cachedNode&&cachedNode.passed!=groupNode.passed)do{if(!cachedNode.parent)break
cachedNode.parent.items.remove(cachedNode),cachedNode=cachedNode.parent}while(!cachedNode.items.length&&"result"!=cachedNode.type)


state[name+" "+groupNode.label]=groupNode}recur(parentList.pop(),groupNode.items,(name?name+" ":"")+groupNode.label)

}}(parentList.pop(),group,"")}else node.items.forEach(function(n){importResultsToTree(n,results)}),"file"==node.type&&node.ownPassed&&!results.found&&importResultsToTree(node,results,!0)

}function run(nodes,options,callback){nodes&&!Array.isArray(nodes)&&(callback=options,options=nodes,nodes=null),
"function"==typeof options&&(callback=options,options=null),nodes||(nodes=tree.selectedNodes),all.run(nodes,options,callback)

}function stop(callback){all.stop(callback)}var tree,failNode,passNode,skipNode,errNode,rootNode,termNode,TestPanel=imports.TestPanel,settings=imports.settings,panels=imports.panels,ui=imports.ui,util=imports.util,prefs=imports.preferences,Tree=imports.Tree,test=imports.test,commands=imports.commands,layout=imports.layout,MenuItem=(imports.Menu,
imports.MenuItem),all=(imports.Divider,imports["test.all"]),Node=test.Node,basename=require("path").basename,dirname=require("path").dirname,escapeHTML=require("ace/lib/lang").escapeHTML,plugin=new TestPanel("Ajax.org",main.consumes,{
caption:"Test Results",index:100,height:150,"class":"top-test-panel"}),state={},drawn=!1
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("show",function(e){
test.resize()}),plugin.on("hide",function(e){test.resize()}),plugin.on("unload",function(){drawn=!1}),
plugin.freezePublicAPI({get tree(){return tree},run:run,stop:stop,clear:clear,skip:skip,remove:remove,
findFileByPath:all.findFileByPath}),register(null,{"test.results":plugin})}return main.consumes=["TestPanel","ui","Tree","settings","panels","commands","test.all","util","test","Menu","MenuItem","Divider","preferences","layout"],
main.provides=["test.results"],main})


define("text!plugins/c9.ide.test/style.css",[],"")


define("plugins/c9.ide.test/all",[],function(require,exports,module){function main(options,imports,register){
function load(){if(!test.inactive){panels.on("afterAnimate",function(){panels.isActive("test")&&tree&&tree.resize()

},plugin),test.on("ready",function(){test.config.excluded||(test.config.excluded={}),test.config.skipped||(test.config.skipped={})

},plugin),test.on("updateConfig",function(){async.each(test.runners,function(runner,cb){runner.update(cb)

},function(){refresh()})},plugin),settings.on("read",function(){settings.setDefaults("user/test",[["inlineresults",!0],["runonsave",!0]])

},plugin),prefs.add({Test:{position:2e3,"Test Runner":{position:100,"Run Tests On Save":{type:"checkbox",
position:50,setting:"user/test/@runonsave"},"Show Inline Test Results":{type:"checkbox",position:100,
setting:"user/test/@inlineresults"},"Exclude These Files":{name:"txtTestExclude",type:"textarea-row",
fixedFont:!0,width:600,height:200,rowheight:250,position:1e3}}}},plugin),plugin.getElement("txtTestExclude",function(txtTestExclude){
var ta=txtTestExclude.lastChild
ta.on("blur",function(e){test.config.excluded={},ta.value.split("\n").forEach(function(rawLine){var path=rawLine.split("#")[0].trim()


test.config.excluded[path]=rawLine}),test.saveConfig(function(){test.refresh()})})
var update=function(){var str=[]
for(var path in test.config.excluded)str.push(test.config.excluded[path])
ta.setValue(str.join("\n"))}
test.on("ready",update,plugin),test.on("updateConfig",update,plugin)},plugin),save.on("afterSave",function(e){
var runner=isTest(e.path,e.value)
if(runner){var runonsave=settings.getBool("user/test/@runonsave")
runner.fileChange({path:e.path,value:e.value,runonsave:runonsave,run:function(fileNode){if(runonsave){
var cmd=fileNode.coverage?"runtestwithcoverage":"runtest"
fileNode.fixParents(),commands.exec(cmd,null,{nodes:[fileNode]})}},refresh:function(){tree&&tree.refresh()

}})}},plugin),runGui.on("updateRunButton",function(e){if(isTest(e.path)){var btnRun=e.button
return btnRun.enable(),btnRun.setAttribute("command","runfocussedtest"),btnRun.setAttribute("caption","Run Test"),
btnRun.setAttribute("tooltip","Run Test"+basename(e.path)),!1}},plugin),test.on("register",function(e){
init(e.runner)},plugin),test.on("unregister",function(e){deinit(e.runner)},plugin),test.on("update",function(){
test.runners.forEach(function(runner){updateStatus(runner.root,"loading"),runner.update()})},plugin),
test.on("resize",function(){tree&&tree.resize()},plugin),plugin.on("stop",function(){progress.stop=[],
running=!1,runGui.transformButton()})
var label,form
test.on("showRunMenu",function(e){if(!label){label=new ui.label({caption:"general","class":"runner-form-header"
})
var runner=e.runners[0]||0
form=new Form({colwidth:180,rowheight:45,style:"width:320px",form:[{title:"Parallel Test Execution",type:"checked-spinner",
name:"parallel",min:1,max:999,defaultCheckboxValue:void 0!==test.config.parallel?test.config.parallel:runner.defaultParallel||!1,
defaultValue:void 0!==test.config.parallelConcurrency?test.config.parallelConcurrency:runner.defaultParallelConcurrency||6,
onchange:function(e){test.config["checkbox"==e.type?"parallel":"parallelConcurrency"]=e.value,test.saveConfig(function(){})

}}]},plugin)}return e.menu.appendChild(label),form.attachTo(e.menu),!1}),test.runners.forEach(init),test.focussedPanel=plugin

}}function draw(opts){if(!drawn){drawn=!0,ui.insertCss(require("text!./style.css"),options.staticPrefix,plugin),
tree=new Tree({container:opts.html,scrollMargin:[10,10],theme:"filetree",emptyMessage:"No tests found",
getCaptionHTML:function(node){if("file"==node.type){var path=dirname(node.label)
return"."==path?escapeHTML(node.label):escapeHTML(basename(path)+"/"+basename(node.label))+"<span class='extrainfo'> - "+escapeHTML(dirname(path))+"</span>"

}return"testset"==node.type?escapeHTML(node.label):"it"==node.kind?"it "+escapeHTML(node.label):"runner"==node.type?escapeHTML(node.label)+" ("+(node.items.length||"loading"!=node.status?node.items.length:"loading")+")":escapeHTML(node.label)

},getIconHTML:function(node){var icon="default"
return"loading"===node.status?icon="loading":"running"===node.status?icon="test-in-progress":1===node.passed?icon="test-passed":0===node.passed?icon="test-failed":2===node.passed?icon="test-error":3===node.passed?icon="test-terminated":node.skip?icon="test-ignored":"testset"==node.type?icon="test-set":"file"==node.type?icon="test-file":"runner"==node.type?icon="test-file":"prepare"==node.type?icon="test-prepare":"test"==node.type&&(icon="test-notran"),
"<span class='ace_tree-icon filetree-icon "+icon+"'></span>"},getClassName:function(node){return(node.className||"")+("loading"==node.status?" loading":"")+("running"==node.status?" loading":"")

},getRowIndent:function(node){return node.$depth?node.$depth-1:0},hasChildren:function(node){return"pending"===node.status||node.items&&node.items.length

},loadChildren:function(node,callback){populate(node,callback)},sort:function(children){if(children.length&&"file"==children[0].type){
var compare=tree.model.alphanumCompare
return children.sort(function(a,b){return compare(a.path+"",b.path+"")})}}},plugin),tree.renderer.scrollBarV.$minWidth=10,
tree.container.style.position="absolute",tree.container.style.left="0",tree.container.style.top="0",tree.container.style.right="0",
tree.container.style.bottom="0",tree.container.style.height="",tree.setRoot(rootNode),tree.commands.bindKey("Space",function(e){
openTestFile()}),tree.commands.bindKey("Enter",function(e){commands.exec("runtest")}),tree.commands.bindKey("Shift-Enter",function(e){
commands.exec("runtestwithcoverage")}),tree.on("focus",function(){test.focussedPanel=plugin}),tree.on("select",function(){
openTestFile([tree.selectedNode],!0)}),tree.on("afterChoose",function(){commands.exec("runtest")}),layout.on("eachTheme",function(e){
var height=parseInt(ui.getStyleRule(".filetree .tree-row","height"),10)||22
tree.rowHeightInner=height,tree.rowHeight=height,e.changed&&tree&&tree.resize(!0)}),test.on("clear",function(){
clear()},plugin),tabManager.on("open",function(e){var node,tab=e.tab
rootNode.findAllNodes("file").some(function(n){return node=n,n.path==tab.path})&&decorate(node,tab)},plugin)


var toolbar=test.getElement("toolbar")
ui.insertByIndex(toolbar,new ui.filler,900,plugin),boxFilter=ui.insertByIndex(toolbar,new apf.codebox({
"initial-message":"Filter Tests",clearbutton:!0,focusselect:!0,singleline:!0,width:100,style:"flex:10; max-width:150px"
}),1e3,plugin),boxFilter.ace.on("input",function(){tree.filterKeyword=boxFilter.ace.getValue()}),menuContext=new Menu({
items:[new MenuItem({position:100,command:"runtest",caption:"Run","class":"strong",hotkey:"Enter"}),new MenuItem({
position:200,command:"runtestwithcoverage",caption:"Run with Code Coverage",hotkey:"Shift-Enter"}),new Divider({
position:300}),new MenuItem({position:400,caption:"Open Test File",onclick:openTestFile,hotkey:"Space"
}),new MenuItem({position:500,caption:"Open Raw Test Output",command:"opentestoutput"}),new Divider({
position:600}),new MenuItem({position:700,caption:"Skip",command:"skiptest"}),new MenuItem({position:800,
caption:"Remove",command:"removetest"})]},plugin),opts.aml.setAttribute("contextmenu",menuContext.aml),
menuInlineContext=new Menu({items:[new MenuItem({caption:"Show Inline Test Results",checked:"user/test/@inlineresults",
type:"check",position:100}),new Divider,new MenuItem({caption:"Open Raw Test Output",onclick:function(){
var path=tabManager.focussedTab.path,test=findTest(path)
test&&commands.exec("opentestoutput",null,{nodes:[test]})},position:300}),new MenuItem({caption:"Clear Test Results In This File",
onclick:function(){var editor=tabManager.focussedTab.editor
editor.ace&&clearDecoration(editor.ace.session)},position:400})]},plugin),settings.on("read",function(){
test.settingsMenu.append(new MenuItem({caption:"Show Inline Test Results",checked:"user/test/@inlineresults",
type:"check",position:100}))},plugin),settings.on("user/test/@inlineresults",function(value){rootNode.findAllNodes("file").forEach(function(fileNode){
if(void 0!==fileNode.passed){var tab=tabManager.findTab(fileNode.path)
tab&&decorate(fileNode,tab)}})},plugin),tree.resize()}}function populate(node,callback,force){var runner=node.findRunner()||findFileByPath(node.path).findRunner()


updateStatus(node,"loading"),runner.populate(node,function(err){return err?callback(err):(updateStatus(node,"loaded"),
node.fixParents(),node.skip&&node.findAllNodes("test").forEach(function(n){n.skip=!0}),void callback())

})}function filter(path){return!!test.config&&test.config.excluded[path]}function init(runner){if(!test.ready)return test.on("ready",init.bind(this,runner))


if(!test.drawn)return test.once("draw",init.bind(this,runner),runner)
var parent=runner.remote?rmtNode:wsNode
runner.root.parent=parent,parent.items.push(runner.root),1!=wsNode.items.length||tree&&tree.selectedNode||plugin.once("draw",function(){
tree.select(runner.root)}),updateStatus(runner.root,"loading")
var first=!0
runner.init(filter,function(err){return err?console.error(err):(runner.root.isOpen=!0,updateStatus(runner.root,"loaded"),
runner.root.findAllNodes("file").forEach(function(node){test.config.skipped[node.path]&&(node.skip=!0,
node.findAllNodes("test").forEach(function(n){n.skip=!0})),first&&("number"==typeof node.passed&&emit("result",{
node:node}),node.coverage&&test.setCoverage(node))}),runner.root.fixParents(),first&&tabManager.getTabs().forEach(function(tab){
tab.path&&isTest(tab.path,tab.document.value)&&decorate(findFileByPath(tab.path),tab)}),void(first=!1))

})}function deinit(runner){if(runner.root.parent){var items=runner.root.parent.items
items.splice(items.indexOf(runner.root),1)}tree.refresh()}function findFileByPath(path){var found=!1
return rootNode.findAllNodes("file").some(function(n){if(n.path==path)return found=n,!0}),found}function isTest(path,value){
return!filter(path)&&(knownTests[path]?knownTests[path]:(value||(value=tabManager.findTab(path).document.value),
test.runners.some(function(runner){return!!runner.isTest(path,value)&&(knownTests[path]=runner,!0)}),
knownTests[path]||!1))}function scrollToDefinition(ace,line,lineEnd){var lineHeight=ace.renderer.$cursorLayer.config.lineHeight,lineVisibleStart=ace.renderer.scrollTop/lineHeight,linesVisible=ace.renderer.$size.height/lineHeight


if(lineEnd=Math.min(lineEnd,line+linesVisible),!(lineVisibleStart<=line&&lineEnd<=lineVisibleStart+linesVisible)){
var SAFETY=1.5
ace.scrollToLine(Math.round((line+lineEnd)/2-SAFETY),!0)}}function openTestFile(nodes,onlyWhenOpen){(nodes||test.focussedPanel.tree.selectedNodes).forEach(function(n){
var tab
if(0===n.passed){var found
n.findAllNodes("test").some(function(n){return found=n,0===n.passed}),n=found}if("file"!=n.type||n.ownPassed&&n.output){
if("file"==n.type||n.pos){var fileNode=n.findFileNode()
if(onlyWhenOpen&&(tab=tabManager.findTab(fileNode.path),!tab||!tab.isActive()))return
tabManager.open({path:fileNode.path,active:!0},function(err,tab){return err?console.error(err):void scrollTab(tab,n)

})}}else{if(onlyWhenOpen&&(tab=tabManager.findTab(n.path),!tab||!tab.isActive()))return
tabManager.openFile(n.path,!0,function(){})}})}function scrollTab(tab,n){var pos=n.selpos||n.pos,select=n.selpos?{
row:n.selpos.el,column:n.selpos.ec}:void 0,ace=tab.editor.ace,scroll=function(){ace.selection.clearSelection()


var sl=n.pos?n.pos.sl:0,el=n.pos?n.pos.el:0,a=n.annotations
a&&a.length?(scrollToDefinition(ace,a[0].line,a[0].line),ace.moveCursorTo(a[0].line-1,a[0].column-1)):(scrollToDefinition(ace,sl,el),
ace.moveCursorTo(pos?pos.sl:0,pos?pos.sc:0),select&&ace.getSession().getSelection().selectToPosition({
row:pos.el,column:pos.ec}))}
ace.session.doc.$lines.length?ace.renderer.$cursorLayer.config?scroll():ace.once("afterRender",scroll):ace.once("changeSession",scroll)

}function run(nodes,options,callback){if(running)return stop(run.bind(this,nodes,options,callback))
if(running=!0,"string"==typeof nodes&&(nodes=[findFileByPath(nodes)],!nodes[0]))return callback(new Error("File not found"))


if(nodes&&!Array.isArray(nodes)&&(callback=options,options=nodes,nodes=null),"function"==typeof options&&(callback=options,
options=null),!nodes&&(nodes=tree.selectedNodes,!nodes))return callback(new Error("Nothing to do"))
var withCodeCoverage=options&&options.withCodeCoverage,transformRun=options&&options.transformRun
if(transformRun){var button=runGui.transformButton("stop")
button.setAttribute("command","stoptest")}var list=[],found={}
nodes.forEach(function(n){if("prepare"==n.type&&(n=n.findFileNode()),"all"==n.type||"root"==n.type||"runner"==n.type)n.findAllNodes("file").forEach(function(n){
n.skip||(list.push(n),found[n.path]=!0)})
else if(withCodeCoverage){var fileNode=n.findFileNode()
found[fileNode.path]||list.push(fileNode)}else list.push(n)})
var firstRunner=list[0].findRunner(),parallel=(options&&void 0!==options.parallel?options.parallel:test.config.parallel||firstRunner.defaultParallel)||!1,parallelConcurrency=(options&&void 0!==options.parallelConcurrency?options.parallelConcurrency:test.config.parallelConcurrency||firstRunner.defaultParallelConcurrency)||6


options.parallel=parallel,options.parallelConcurrency=parallelConcurrency,test.lastTest=nodes
var worker=function(node,callback){return stopping?callback(new Error("Terminated")):"pending"==node.status?populate(node,function(err){
return err?callback(err):void _run(node,options,callback)}):void _run(node,options,callback)},complete=function(err){
emit("stop",{nodes:list}),callback(err,list)}
if(parallel){var queue=async.queue(worker,parallelConcurrency)
queue.drain=complete,list.forEach(function(item){queue.push(item,function(){})})}else async.eachSeries(list,worker,complete)

}function findTest(path){return function recur(items){for(var j,i=0;i<items.length;i++)if(j=items[i],
"file"==j.type){if(j.path==path)return j}else if(j.items)return recur(j.items)}(rootNode.items)}function _run(node,options,callback){
tree&&tree.filterKeyword&&("file"==node.type?node=findFileByPath(node.path):node.parent.findAllNodes(node.type).some(function(n){
if(n.label==node.label)return node=n,!0}))
var runner=node.findRunner(),fileNode=node.findFileNode()
runner||(runner=findFileByPath(fileNode.path).findRunner()),runner.form&&(options=runner.form.toJson(null,options||{})),
fileNode.fullOutput="",updateStatus(node,"running"),clear([node],!0)
var stop=runner.run(node,progress,options,function(err){updateStatus(node,"loaded")
var tab=tabManager.findTab(fileNode.path)
tab&&decorate(fileNode,tab),delete progress.stop[stopId],callback(err,node),writeToCache(runner,fileNode.path,fileNode.serialize()),
emit("result",{node:node})}),stopId=progress.stop.push(stop)-1}function clearCache(runner,callback){fs.rmdir("~/.c9/cache/"+runner.name,{
recursive:!0},function(){callback&&callback.apply(this,arguments)})}function writeToCache(runner,path,cache,callback){
fs.writeFile("~/.c9/cache/"+runner.name+"/"+path.replace(/\//g,"\\"),cache,function(err){callback&&callback(err)

})}function refreshTree(node){for(;node&&!node.tree;)node=node.parent
var T=node&&node.tree||tree
T&&T.refresh()}function updateStatus(node,s){if("file"==node.type||"testset"==node.type){var st,tests=node.findAllNodes("test|prepare"),p=[]


tests.forEach(function(test){void 0===st&&"loaded"!=test.status&&(st=test.status),p[test.passed]||(p[test.passed]=0),
p[test.passed]++}),node.passed=p[3]?3:p[2]?2:p[0]?0:p[1]?1:void 0,node.status=st||"loaded"}else{if("root"==node.type)return void refreshTree(node)


node.status=s}node.parent?updateStatus(node.parent,s):refreshTree(node)}function stop(callback){if(!running)return callback(new Error("Not Running"))


var timer
stopping=Date.now(),plugin.once("stop",function(e){clearTimeout(timer),function _(items,first){items.forEach(function(node){
node.items?_(node.items):"number"!=typeof node.passed&&(node.passed=3)})}(e.nodes,!0),stopping=!1,callback()

}),progress.stop.forEach(function(stop){stop&&stop()}),timer=setTimeout(function(){emit("stop",{nodes:[]
}),test.transformRunButton("run")},5e3)}function clear(nodes,onlyNodes){nodes||(nodes=rootNode.items),
nodes.forEach(function(n){n.passed=void 0,n.ownPassed=null,n.output="","running"==n.status&&(n.status="loaded"),
n.annotations=[],n.items&&clear(n.items,!0)}),onlyNodes||(tree.filterKeyword?tree.filterKeyword=tree.filterKeyword:tree.refresh(),
test.runners.forEach(function(runner){clearCache(runner)}),clearAllDecorations())}function skip(nodes,callback){
"function"==typeof nodes&&(callback=nodes,nodes=null),nodes||(nodes=tree.selectedNodes)
var map={}
nodes.forEach(function(fileNode){"file"==fileNode.type&&(map[fileNode.path]||(fileNode.skip=!fileNode.skip,
fileNode.skip?test.config.skipped[fileNode.path]=!0:delete test.config.skipped[fileNode.path],fileNode.findAllNodes("test").forEach(function(n){
n.skip=fileNode.skip}),map[fileNode.path]=!0))}),test.saveConfig(function(err){tree.refresh(),callback(err)

})}function remove(nodes,callback){"function"==typeof nodes&&(callback=nodes,nodes=null),nodes||(nodes=tree.selectedNodes),
nodes.forEach(function(fileNode){"file"==fileNode.type&&(test.config.excluded[fileNode.path]||(fileNode.parent.children.remove(fileNode),
fileNode.parent.items.remove(fileNode),test.config.excluded[fileNode.path]=!0))}),test.saveConfig(function(err){
tree.refresh(),callback(err)})}function decorate(fileNode,tab){var editor=tab.editor.ace,session=(tab.document.getSession()||0).session


if(!session||!tab.isActive())return void tab.once("activate",function(){setTimeout(function(){decorate(fileNode,tab)

})})
session.$testMarkers||(session.$testMarkers={},session.on("changeEditor",function(e){e.oldEditor,e.editor&&decorateEditor(e.editor)

}),session.on("change",function(delta){var inlineWidgets=session.lineAnnotations,decorations=session.$decorations


if(inlineWidgets){var startRow=delta.start.row,len=delta.end.row-startRow
if(0===len)inlineWidgets[startRow]&&(inlineWidgets[startRow]=void 0)
else if("remove"==delta.action)inlineWidgets.splice(startRow+1,len),decorations.splice(startRow+1,len)
else{var args=new Array(len)
args.unshift(startRow,0),inlineWidgets.splice.apply(inlineWidgets,args),decorations.splice.apply(decorations,args)

}}})),session.widgetManager||(session.widgetManager=new LineWidgets(session),session.widgetManager.attach(editor)),
clearDecoration(session)
var showInline=settings.getBool("user/test/@inlineresults"),nodes=fileNode.findAllNodes("test|prepare")


fileNode.ownPassed&&nodes.push(fileNode),nodes.forEach(function(node){if(node.parent||fileNode.fixParents(),
void 0!==node.passed&&("test"==node.type||node.output)){var pos=node.pos?node.pos.sl:0
session.addGutterDecoration(pos,"test-"+node.passed),(session.$markers||(session.$markers=[])).push([pos,"test-"+node.passed])

}showInline&&(node.annotations&&createStackWidget(editor,session,node),node.output&&node.output.trim()&&createOutputWidget(editor,session,node))

})}function createOutputWidget(editor,session,node){var w={row:node.pos?node.pos.el:0,fullWidth:!0,el:dom.createElement("div")
},extraClass=2==node.passed?"ace_error":1==node.passed?"ace_ok":"ace_warning",el=w.el.appendChild(dom.createElement("div")),arrow=w.el.appendChild(dom.createElement("div"))


arrow.className="error_widget_arrow "+extraClass
var pos=node.pos?{row:node.pos.el,column:node.pos.ec}:{row:0,column:0},left=editor.renderer.$cursorLayer.getPixelPosition(pos).left


arrow.style.left=left-5+"px"
var runner=node.findRunner()
runner||(runner=findFileByPath(node.findFileNode().path)),w.el.className="error_widget_wrapper",el.style.whiteSpace="pre",
el.className="error_widget "+extraClass,el.innerHTML=runner?runner.parseLinks(escapeHTML(node.output)):escapeHTML(node.output)


var closeBtn=document.createElement("span")
return closeBtn.textContent="\xd7",closeBtn.className="widget-close-button",w.el.appendChild(closeBtn),closeBtn.onclick=function(){
w.destroy()},closeBtn.onmousedown=function(e){e.preventDefault()},w.el.addEventListener("click",function(e){
if(e.target&&"link"==e.target.className){var link=e.target.getAttribute("link"),parts=link.split(":")


fs.exists(parts[0],function(exists){if(!exists)return void commands.exec("navigate",null,{keyword:"/"==link[0]?link.substr(1):link
})
var path=0===parts[0].indexOf(c9.workspaceDir)?parts[0].replace(c9.workspaceDir,""):parts[0]
tabManager.open({path:path,focus:!0,document:{ace:{jump:{row:Number(parts[1]),column:Number(parts[1])
}}}})})}},!1),w.el.addEventListener("contextmenu",function(e){if(2==e.which||3==e.which)return menuInlineContext.show(e.x+1,e.y+1),
e.stopPropagation(),e.preventDefault(),!1},!1),el.appendChild(dom.createElement("div")),w.destroy=function(){
session.widgetManager.removeLineWidget(w),w.destroyed=!0},session.widgetManager.addLineWidget(w),session.$lineWidgets.push(w),
w}function decorateEditor(editor){if(!editor.decorated){editor.renderer.on("afterRender",updateLines)


var onMouseDown=function(e){var widget=e.target
if(widget.classList.contains("widget")){if(widget.annotation&&widget.classList.contains("more"))if(widget.output&&!widget.output.destroyed)widget.output.destroy(),
widget.output=null
else{var a=widget.annotation
widget.output=createOutputWidget(editor,a.session,{pos:{el:a.row,ec:a.column},passed:0,output:a.more,
findRunner:a.node.findRunner.bind(a.node)})}e.stopPropagation()}}
editor.decorated=!0,editor.container.addEventListener("mousedown",onMouseDown,!0)}}function createStackWidget(editor,session,node){
decorateEditor(editor)
var m,d
node.annotations.forEach(function(item){m=item.message.trim(),d=m.length<=50?m:m.match(/[\n\r]/)>-1?m.split("\n")[0].substr(0,45)+" ...":m.substr(0,20)+" ... "+m.substr(-25)


var pos=item.line-1
session.addGutterDecoration(pos,"test-0"),(session.$markers||(session.$markers=[])).push([pos,"test-0"]),
session.lineAnnotations[pos]={display:d,row:item.line-1,column:item.column,more:m.length>50?m:null,session:session,
node:node}})}function updateLines(e,renderer){var textLayer=renderer.$textLayer,config=textLayer.config,session=textLayer.session


if(session.lineAnnotations)for(var first=config.firstRow,last=config.lastRow,lineElements=textLayer.element.childNodes,lineElementsIdx=0,row=first,foldLine=session.getNextFoldLine(row),foldStart=foldLine?foldLine.start.row:1/0,useGroups=textLayer.$useLineGroups();;){
if(row>foldStart&&(row=foldLine.end.row+1,foldLine=textLayer.session.getNextFoldLine(row,foldLine),foldStart=foldLine?foldLine.start.row:1/0),
row>last)break
var lineElement=lineElements[lineElementsIdx++]
if(lineElement&&session.lineAnnotations[row]){useGroups&&(lineElement=lineElement.lastChild)
var widget,a=session.lineAnnotations[row]
a.element?widget=a.element:(widget=document.createElement("span"),widget.textContent=a.display,widget.className="widget stack-message"+(a.more?" more":""),
widget.annotation=a,session.lineAnnotations[row].element=widget),lineElement.appendChild(widget)}row++

}}function clearAllDecorations(){tabManager.getTabs().forEach(function(tab){if("ace"==tab.editorType){
var session=(tab.document.getSession()||0).session
session&&clearDecoration(session)}})}function clearDecoration(session){session.$markers&&session.$decorations.forEach(function(m,i){
m&&(session.$decorations[i]=m.replace(/ test-[01234]/g,""))}),session.lineAnnotations&&session.lineAnnotations.forEach(function(item){
item&&item.element&&item.element.parentNode&&item.element.remove()}),session.$lineWidgets&&session.$lineWidgets.forEach(function(widget){
session.widgetManager.removeLineWidget(widget)}),session.$markers=[],session.lineAnnotations=[],session.$lineWidgets=[]

}function refresh(){tree&&tree.refresh()}var tree,stopping,menuContext,running,boxFilter,menuInlineContext,TestPanel=imports.TestPanel,settings=imports.settings,panels=imports.panels,ui=imports.ui,Tree=imports.Tree,test=imports.test,commands=imports.commands,fs=imports.fs,c9=imports.c9,Form=imports.Form,Menu=imports.Menu,MenuItem=imports.MenuItem,Divider=imports.Divider,tabManager=imports.tabManager,save=imports.save,layout=imports.layout,prefs=imports.preferences,runGui=imports["run.gui"],Node=test.Node,async=require("async"),basename=require("path").basename,dirname=require("path").dirname,escapeHTML=require("ace/lib/lang").escapeHTML,LineWidgets=require("ace/line_widgets").LineWidgets,dom=require("ace/lib/dom"),plugin=new TestPanel("Ajax.org",main.consumes,{
caption:"All Tests",index:200,style:"flex:1;-webkit-flex:1"}),emit=plugin.getEmitter(),wsNode=new Node({
label:"workspace",isOpen:!0,className:"heading",status:"loaded",noSelect:!0,$sorted:!0}),rmtNode=new Node({
label:"remote",isOpen:!0,className:"heading",status:"loaded",noSelect:!0,$sorted:!0}),rootNode=new Node({
label:"root",tree:tree,items:[wsNode]}),drawn=!1,knownTests={},progress={log:function(node,chunk){node.fullOutput+=chunk,
emit("log",chunk)},start:function(node){updateStatus(node,"running")},end:function(node){updateStatus(node,"loaded")

},stop:[]}
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("show",function(e){}),
plugin.on("hide",function(e){}),plugin.on("unload",function(){drawn=!1,tree=null,stopping=null,menuContext=null,
running=null,boxFilter=null,menuInlineContext=null}),plugin.freezePublicAPI({get tree(){return tree},
get contextMenu(){return menuContext},get root(){return rootNode},refresh:refresh,run:run,stop:stop,skip:skip,
remove:remove,openTestFile:openTestFile,findTest:findTest,findFileByPath:findFileByPath,writeToCache:writeToCache,
clearCache:clearCache}),register(null,{"test.all":plugin})}return main.consumes=["TestPanel","ui","Tree","settings","panels","commands","test","Menu","MenuItem","Divider","tabManager","save","preferences","fs","run.gui","layout","c9","Form"],
main.provides=["test.all"],main})


define("plugins/c9.ide.test/testrunner",[],function(require,module,exports){function main(options,imports,register){
function TestRunner(developer,deps,options){function getForm(){return!!formOptions.length&&(form?form:form=new Form({
form:formOptions,rowheight:45,colwidth:100,style:"width:320px"},plugin))}function parseScript(def){var script=["grep -lsRi"]


return(def.match||0).content&&def.match.content.forEach(function(q){script.push("-E "+makeArg(q))}),(def.exclude||0).dir&&def.exclude.dir.forEach(function(q){
script.push("--exclude-dir "+makeArg(q))}),(def.exclude||0).file&&def.exclude.file.forEach(function(q){
script.push("--exclude "+makeArg(q))}),script.push(def.search),(def.match||0).filename&&def.match.filename.forEach(function(q){
"-"==q.charAt(0)?script.push("| grep -v "+makeArg(q.substr(1))):script.push("| grep "+makeArg(q))}),script.join(" ")

}function makeArg(str){return"'"+str.replace(/'/g,"\\'")+"'"}function createFile(path,items){var file=new File({
label:getName?getName(path):path,path:path})
return(items||plugin.root.items).push(file),file}function getConfig(){try{return test.config&&test.config[query.id]?JSON.parse(test.config[query.id]):query.def

}catch(e){return query.def}}function fetchFromCache(callback){fs.readFile("~/.c9/cache/"+plugin.name,function(err,data){
if(err)return callback(err)
try{callback(null,JSON.parse(data))}catch(e){callback()}})}function writeToCache(cache,callback){fs.writeFile("~/.c9/cache/"+plugin.name+"/index",cache,function(err){
callback&&callback(err)})}function fetch(callback){if(!query)return callback(new Error("Invalid Plugin Definition. Missing query"))


var script=parseScript(getConfig())
return"win32"==c9.platform&&/grep/.test(script)?callback(null,""):void proc.spawn("bash",{args:["-l","-c",script],
cwd:c9.workspaceDir},function(err,p){if(err)return callback(err)
var stdout="",stderr=""
p.stdout.on("data",function(c){stdout+=c}),p.stderr.on("data",function(c){stderr+=c}),p.on("exit",function(){
callback(null,stdout)})})}function init(filter,callback){function fsUpdate(e,time){clearTimeout(timer),
timer=setTimeout(update,time||1e3)}var isUpdating,initialUpdate=!0
update=function(otherCallback){return isUpdating?fsUpdate(null,1e4):(isUpdating=!0,void async.parallel({
cache:function(cb){initialUpdate?(initialUpdate=!1,fetchFromCache(function(err,nodes){return!nodes||err?cb():(nodes.forEach(function(node){
node.label||(node.label=getName(node.path),node.status="pending")}),plugin.root.importItems(nodes),callback(null,plugin.root.items),
void cb(null,nodes))})):(callback(),cb())},recent:function(callback){plugin.fetch(function(err,list){
if(isUpdating=!1,err)return callback(err)
var items=[],newCache=[]
list.split("\n").forEach(function(name){var path="/"+name
name&&!filter(path)&&(newCache.push(path),items.push({label:getName?getName(path):path,path:path,type:"file"
}))}),writeToCache(newCache.join("\n")),callback(null,items)})}},function(err,data){return otherCallback&&otherCallback(),
err?callback(err):(plugin.root.importItems(data.recent),void callback(null,plugin.root.items))}))}
var timer
emit("init"),update()}function isTest(path,value){var def=getConfig(),reSearch=util.escapeRegExp(def.search).replace(/\\\*/g,".*").replace(/\\\?/g,".")


if(!path.match(reSearch))return!1
if(((def.match||0).content||0).length&&!def.match.content.some(function(q){return(value||"").match(new RegExp(q))

}))return!1
var filename=basename(path)
if(((def.match||0).filename||0).length&&!def.match.filename.some(function(q){return"-"==q.charAt(0)?!filename.match(new RegExp(q.substr(1))):filename.match(new RegExp(q))

}))return!1
var dirpath=dirname(path)
return(!((def.exclude||0).dir||0).length||!def.exclude.dir.some(function(q){return dirpath.match(new RegExp(q))

}))&&(!((def.exclude||0).file||0).length||!def.exclude.file.some(function(q){return filename.match(new RegExp(q))

}))}var form,update,plugin=new Plugin(developer,deps),emit=plugin.getEmitter(),caption=options.caption,formOptions=options.options||[],index=options.index||100,watcher=imports.watcher,query=options.query,getName=options.getName,defaultParallel=options.defaultParallel||!1,defaultParallelConcurrency=options.defaultParallelConcurrency||4,meta={},DEFAULTSCRIPT=query?JSON.stringify(query.def," ",4):""


return plugin.on("load",function(){function addFile(path,value){isTest(path,value)&&!all.findFileByPath(path)&&(createFile(path),
all.refresh())}function removeTestFile(path){var fileNode=all.findFileByPath(path)
fileNode&&(plugin.root.items.remove(fileNode),all.refresh())}function rmdir(path){plugin.root.findAllNodes("file").forEach(function(fileNode){
0===fileNode.path.indexOf(path)&&plugin.root.items.remove(fileNode)}),all.refresh()}if(test.register(plugin),
query){var prefDef={Test:{position:1e3}}
prefDef.Test[query.label]={position:query.position||1e3,"Config To Fetch All Test Files In The Workspace":{
name:"txtTest",type:"textarea-row",fixedFont:!0,width:600,height:200,rowheight:250,position:1e3}},prefs.add(prefDef,plugin),
plugin.getElement("txtTest",function(txtTest){var ta=txtTest.lastChild
ta.on("blur",function(e){if(test.config[query.id]!=ta.value){try{JSON.parse(ta.value)}catch(e){return void showError("Invalid JSON "+e.message)

}test.config[query.id]=ta.value,test.saveConfig(function(){update(function(){all.refresh()})})}}),test.on("ready",function(){
ta.setValue(test.config[query.id]||DEFAULTSCRIPT)},plugin),test.on("updateConfig",function(){ta.setValue(test.config[query.id]||DEFAULTSCRIPT)

},plugin)},plugin),fs.on("afterWriteFile",function(e){addFile(e.path,e.args[1])},plugin),fs.on("afterUnlink",function(e){
removeTestFile(e.path)},plugin),fs.on("afterRmfile",function(e){removeTestFile(e.path)},plugin),fs.on("afterRmdir",function(e){
rmdir(e.path)},plugin),fs.on("afterCopy",function(e){var fromPath=e.args[0],toPath=e.args[1]
plugin.root.findAllNodes("file").forEach(function(fileNode){0===fileNode.path.indexOf(fromPath)&&createFile(fileNode.path.replace(fromPath,toPath))

}),all.refresh()},plugin),fs.on("afterRename",function(e){var fromPath=e.args[0],toPath=e.args[1]
plugin.root.findAllNodes("file").forEach(function(fileNode){0===fileNode.path.indexOf(fromPath)&&(fileNode.path=fileNode.path.replace(fromPath,toPath),
fileNode.label=fileNode.path.substr(1))}),all.refresh()},plugin),watcher.on("delete",function(e){rmdir(e.path)

},plugin),watcher.on("directory",function(e){},plugin),watcher.on("change",function(e){var fileNode=all.findFileByPath(e.path)


fileNode&&"pending"==fileNode.status&&plugin.update(fileNode,function(err){err||all.refresh()})},plugin)

}}),plugin.on("unload",function(){test.unregister(plugin)}),plugin.freezePublicAPI.baseclass(),plugin.freezePublicAPI({
get caption(){return caption},get form(){return getForm()},get meta(){return meta},get update(){return update

},get defaultParallel(){return defaultParallel},set defaultParallel(v){defaultParallel=v},get defaultParallelConcurrency(){
return defaultParallelConcurrency},set defaultParallelConcurrency(v){defaultParallelConcurrency=v},createFile:createFile,
isTest:isTest,init:init,fetch:fetch,root:new Node({label:caption,index:index,runner:plugin,type:"runner"
})}),plugin}var Plugin=imports.Plugin,Form=imports.Form,test=imports.test,proc=imports.proc,util=imports.util,c9=imports.c9,fs=imports.fs,showError=imports["dialog.error"].show,prefs=imports.preferences,all=imports["test.all"],Node=test.Node,File=test.File,basename=require("path").basename,dirname=require("path").dirname,async=require("async")


register(null,{TestRunner:TestRunner})}return main.consumes=["Plugin","test","Form","preferences","proc","watcher","util","c9","fs","test.all","dialog.error"],
main.provides=["TestRunner"],main})


define("plugins/c9.ide.test/testpanel",[],function(require,module,exports){function main(options,imports,register){
function TestPanel(developer,deps,options){function draw(e){amlFrame=showTitle?ui.frame({buttons:"min",
activetitle:"min","class":"absframe "+options["class"],style:"position:relative;"+(style||""),textselect:options.textselect,
caption:caption}):ui.bar({"class":options["class"],style:"position:relative;"+(style||""),textselect:options.textselect
})
var aml=e.aml
100==index?aml.insertBefore(amlFrame,aml.firstChild):aml.appendChild(amlFrame),height&&amlFrame.setHeight(height),
plugin.addElement(amlFrame),emit.sticky("draw",{aml:amlFrame,html:amlFrame.$int}),amlFrame.on("prop.height",function(){
emit("resize")}),amlFrame.on("afterstatechange",function(){if(amlFrame.parentNode){amlFrame.parentNode.childNodes.forEach(function(n){
n.emit("resize")})
var closed="normal"!=amlFrame.state
settings.set("state/test/panel/"+options.name+"/@closed",closed)}}),settings.once("read",function(){var closed=settings.get("state/test/panel/"+options.name+"/@closed",closed)


closed&&setTimeout(function(){amlFrame.minimize()},10)}),test.on("show",function(){emit("show")},plugin),
test.on("hide",function(){emit("hide")},plugin)}function show(){amlFrame&&(amlFrame.restore?amlFrame.restore():amlFrame.show(),
emit("show"))}function hide(){amlFrame.hide(),emit("hide")}var plugin=new Plugin(developer,deps),emit=plugin.getEmitter()


emit.setMaxListeners(1e3)
var amlFrame,caption=options.caption,index=options.index||100,height=options.height||"",style=options.style||"",showTitle=options.showTitle||!1


return plugin.on("load",function(){test.once("drawPanels",draw,plugin)}),plugin.freezePublicAPI.baseclass(),
plugin.freezePublicAPI({get aml(){return amlFrame},get visible(){return amlFrame.visible},get height(){
return amlFrame.getHeight()},set height(v){height!=v&&(height=v,amlFrame.setHeight(v))},_events:["draw"],
show:show,hide:hide}),plugin}var Plugin=imports.Plugin,ui=imports.ui,test=imports.test,settings=imports.settings


register(null,{TestPanel:TestPanel})}return main.consumes=["Plugin","ui","test","settings"],main.provides=["TestPanel"],
main})


define("plugins/c9.ide.test/data/data",[],function(require,exports,module){function Data(props,sets,singletons){
this.$props=props||[],this.$sets=sets||[],this.$single=singletons||[]
var _self=this
this.$props.concat(this.$sets).concat(this.$single).forEach(function(prop){_self.__defineGetter__(prop,function(){
return this.data[prop]}),_self.__defineSetter__(prop,function(v){"items"==prop&&(this.children=v),this.data[prop]=v

})})}var Emitter=require("events").EventEmitter
Data.prototype=new Emitter,Data.prototype.__defineGetter__("json",function(){return this.data}),Data.prototype.__defineSetter__("json",function(v){
this.data=v}),["label","status","className","isOpen","noSelect","$sorted"].forEach(function(prop){Data.prototype.__defineGetter__(prop,function(){
return this.data[prop]}),Data.prototype.__defineSetter__(prop,function(v){this.data[prop]=v})}),Data.prototype.findNextTest=function(){
return function recur(node,down){if(!node.parent)return!1
var i,items
down?(items=node.items,i=0):(i=node.parent.items.indexOf(node)+1,node=node.parent,items=node.items)
for(var j;i<items.length;i++){if(j=items[i],"test"==j.type||"prepare"==j.type)return j
if(j.items){var found=recur(j,!0)
if(found)return found}}return recur(node)}(this,"test"!=this.type)},Data.prototype.findFileNode=function(){
for(var node=this;node&&"file"!=node.type;)node=node.parent
return node||{}},Data.prototype.findAllNodes=function(type){var nodes=[],node=this
return type=new RegExp("^("+type+")$"),function recur(items){for(var i=0;i<items.length;i++){var j=items[i]


j&&type.test(j.type)?nodes.push(j):j&&j.items&&recur(j.items)}}([node]),nodes},Data.prototype.findRunner=function(){
for(var node=this;node&&!node.runner;)node=node.parent
return node&&node.runner||!1},Data.prototype.fixParents=function fixParents(node){node||(node=this),node.items&&node.items.forEach(function(n){
n.parent||(n.parent=node),n.items&&fixParents(n)})},Data.prototype.importItems=function(items){var node=this


node.items.length?!function recur(myItems,newItems){var map={}
!function _(items){items.forEach(function(n){map[n.label]=n,n.items&&_(n.items)})}(myItems),myItems.length=0


for(var n,m,i=0;i<newItems.length;i++){if(n=map[(m=newItems[i]).label]){for(var prop in m)"items"==prop?recur(n.items,m.items):n.data[prop]=m[prop]


delete map[m.label]}else n=Data.fromJSON([m])[0]
myItems.push(n)}}(node.items,items):node.items=Data.fromJSON(items)},Data.prototype.clone=function(forResults){
var _=function(){}
_.prototype=this
var items,parent,passed,isSelected,isOpen,clone=new _
return clone.__defineGetter__("children",function(){return this.items}),clone.__defineGetter__("map",function(){
return this.map}),clone.__defineGetter__("parent",function(){return parent}),clone.__defineSetter__("parent",function(v){
parent=v}),forResults||(isSelected=this.isSelected),clone.__defineGetter__("isSelected",function(){return isSelected

}),clone.__defineSetter__("isSelected",function(v){isSelected=v}),forResults&&(isOpen=this.isOpen,clone.__defineGetter__("isOpen",function(){
return isOpen}),clone.__defineSetter__("isOpen",function(v){isOpen=v})),"file"!=this.type&&"testset"!=this.type||forResults&&(passed=this.passed,
clone.__defineGetter__("passed",function(){return passed}),clone.__defineSetter__("passed",function(v){
passed=v})),(forResults||"runner"==this.type||"root"==this.type||"node"==this.type)&&(this.items&&(items=this.items.slice(0)),
clone.__defineGetter__("items",function(){return items}),clone.__defineSetter__("items",function(v){items=v

})),clone.clone=this.clone.bind(this),clone},Data.prototype.serialize=function(toJson){var obj={}
for(var prop in this.data)prop.match(/^(parent|isSelected|items|map|children|runner|tree)$/)||void 0===this.data[prop]||null===this.data[prop]||Array.isArray(this.data[prop])&&!this.data[prop].length||("coverage"!=prop?obj[prop]=this.data[prop]:obj.coverage=this.data.coverage.serialize(!0))


return this.data.items&&this.data.items.length&&(obj.items=this.data.items.map(function(item){return item.serialize(!0)

})),toJson?obj:JSON.stringify(obj)},module.exports=Data})


define("plugins/c9.ide.test/data/coverage",[],function(require,exports,module){function Coverage(options){
this.data=options||{},this.type="coverage"}var Data=require("./data")
Coverage.prototype=new Data(["path"],["files"]),Coverage.prototype.equals=function(coverage){return this.data.path==coverage.path

},module.exports=Coverage,Coverage.fromLCOV=function(lcovString,path){var item,data=[]
return["end_of_record"].concat(lcovString.split("\n")).forEach(function(line){line=line.trim()
var lines,allparts=line.split(":"),parts=[allparts.shift(),allparts.join(":")]
switch(parts[0].toUpperCase()){case"TN":break
case"SF":item.file=parts.slice(1).join(":").trim().replace(/\\/g,"/")
break
case"FNF":break
case"FNH":break
case"LF":item.lines.found=Number(parts[1].trim())
break
case"LH":item.lines.hit=Number(parts[1].trim())
break
case"DA":lines=parts[1].split(","),Number(lines[1])?item.lines.covered.push(Number(lines[0])):item.lines.uncovered.push(Number(lines[0]))


break
case"FN":break
case"FNDA":break
case"BRDA":break
case"BRF":break
case"BRH":}line.indexOf("end_of_record")>-1&&(data.push(item),item={lines:{found:0,hit:0,covered:[],uncovered:[]
}})}),data.shift(),!!data.length&&new Coverage({files:data,path:path})}})


define("plugins/c9.ide.test/data/file",[],function(require,exports,module){function File(options){this.data=options||{},
this.data.items||(this.data.items=[]),this.data.status||(this.data.status="pending"),this.type="file",
this.keepChildren=!0}var Data=require("./data")
File.prototype=new Data(["path","type","coverage","passed","fullOutput","output","ownPassed"],["items"]),
File.prototype.__defineGetter__("passed",function(){return"number"==typeof this.data.ownPassed?this.data.ownPassed:this.data.passed

}),File.prototype.equals=function(file){return this.data.label==file.label},File.prototype.addTest=function(def,parent){
var test=Data.fromJSON([def])[0]
return(parent||this).data.items.push(test),test},module.exports=File})


define("plugins/c9.ide.test/data/testset",[],function(require,exports,module){function TestSet(options){
this.data=options||{},this.data.items||(this.data.items=[]),this.type="testset",this.keepChildren=!0}
var Data=require("./data")
TestSet.prototype=new Data(["passed"],["items"],["pos","selpos"]),TestSet.prototype.equals=function(frame){
return this.data.label==frame.label},module.exports=TestSet})


define("plugins/c9.ide.test/data/test",[],function(require,exports,module){function Test(options){this.data=options||{},
this.data.type||(this.data.type="test")}var Data=require("./data")
Test.prototype=new Data(["passed","type","output","kind","skip"],["annotations"],["pos","selpos"]),Test.prototype.equals=function(frame){
return this.data.label==frame.label},module.exports=Test})


define("plugins/c9.ide.test/data/node",[],function(require,exports,module){function Node(options){this.data=options||{},
this.data.items||(this.data.items=[]),this.data.type||(this.data.type="node")}var Data=require("./data")


Node.prototype=new Data(["passed","type","runner","index","tree"],["items","annotations"],["pos","selpos"]),
Node.prototype.equals=function(node){return this.data.label==node.label},module.exports=Node})


define("plugins/c9.ide.test/test",[],function(require,exports,module){function main(options,imports,register){
function load(){function readConfig(cb){fs.readFile(configPath,function(err,data){return err&&"ENOENT"!=err.code?showError("Could not load "+configPath+". The test panel is disabled. Please restart Cloud9 to retry."):(parse(data||""),
cb&&cb(),ready=!0,void emit.sticky("ready"))})}plugin.setCommand({name:"showtestpanel"}),commands.addCommand({
name:"runtest",hint:"runs the selected test(s) in the test panel",group:"Test",exec:function(editor,args){
return settings.getBool("user/test/coverage/@alwayson")?commands.exec("runtestwithcoverage",editor,args):(transformRunButton("stop"),
void focussedPanel.run(args.nodes||null,{transformRun:args.transformRun},function(err,nodes){return transformRunButton("run"),
err?console.log(err):void(nodes&&nodes.forEach(function(node){emit(node.coverage?"coverage":"clearCoverage",{
node:node})}))}))},isAvailable:function(){return!!focussedPanel}},plugin),commands.addCommand({name:"runfocussedtest",
hint:"runs the focussed test or last run test",bindKey:{mac:"F6",win:"Ctrl-F5"},group:"Test",exec:function(editor,args){
var path=tabManager.focussedTab.path,test=focussedPanel.findFileByPath(path)
return commands.exec("runtest",editor,{nodes:test?[test]:lastTest,transformRun:!0})},isAvailable:function(){
var path=(tabManager.focussedTab||0).path
return!(!focussedPanel||!focussedPanel.findFileByPath(path)&&!lastTest)}},plugin),commands.addCommand({
name:"runfocussedtestwithcoverage",hint:"runs the focussed test or last run test with code coverage",
bindKey:{mac:"Shift-F6",win:"Ctrl-Shift-F5"},group:"Test",exec:function(editor,args){var path=tabManager.focussedTab.path,test=focussedPanel.findFileByPath(path)


return commands.exec("runtestwithcoverage",editor,{nodes:test?[test]:lastTest,transformRun:!0})},isAvailable:function(){
var path=(tabManager.focussedTab||0).path
return!(!focussedPanel||!focussedPanel.findFileByPath(path)&&!lastTest)}},plugin),commands.addCommand({
name:"runtestwithcoverage",hint:"runs the selected test(s) in the test panel with code coverage enabled",
group:"Test",exec:function(editor,args){transformRunButton("stop"),focussedPanel.run(args.nodes||null,{
withCodeCoverage:!0},function(err,nodes){return transformRunButton("run"),err?console.log(err):void(nodes&&nodes.forEach(function(node){
emit(node.coverage?"coverage":"clearCoverage",{node:node})}))})},isAvailable:function(){return!!focussedPanel

}},plugin),commands.addCommand({name:"stoptest",group:"Test",exec:function(editor,args){btnRun.disable(),
focussedPanel.stop(function(){btnRun.enable()})},isAvailable:function(){return!!focussedPanel}},plugin),
commands.addCommand({name:"cleartestresults",group:"Test",exec:function(){emit("clear")}},plugin),commands.addCommand({
name:"skiptest",group:"Test",exec:function(){focussedPanel.skip(function(){})},isAvailable:function(){
return focussedPanel&&focussedPanel.tree&&focussedPanel.tree.selectedNodes.some(function(n){if("file"==n.type)return!0

})}},plugin),commands.addCommand({name:"removetest",group:"Test",exec:function(){focussedPanel.remove(function(){})

},isAvailable:function(){return focussedPanel&&focussedPanel.tree&&focussedPanel.tree.selectedNodes.some(function(n){
if("file"==n.type)return!0})}},plugin),commands.addCommand({name:"opentestoutput",group:"Test",exec:function(args){
var nodes=args.nodes||focussedPanel.tree.selectedNodes
nodes.forEach(function(n){var output=(n.findFileNode()||0).fullOutput
output&&tabManager.open({editorType:"ace",focus:!0,document:{title:"Raw Test Output",meta:{nofs:!0,ignoreState:!0
}},value:output},function(){})})},isAvailable:function(){return focussedPanel&&focussedPanel.tree&&focussedPanel.tree.selectedNodes.some(function(n){
return(n.findFileNode()||0).fullOutput||!1})}},plugin),menus.addItemByPath("Cloud9/Open Your Test Configuration",new ui.item({
onclick:openTestConfigFile}),900,plugin),readConfig(function(){watcher.watch(configPath),watcher.on("change",function(e){
e.path==configPath&&readConfig(function(){emit("updateConfig")})})}),save.on("afterSave",function(e){
e.path==configPath&&(parse(e.value),emit("updateConfig"))},plugin)}function drawMenu(){drawnMenu||(drawnMenu=!0,
menus.addItemByPath("Run/Run Test",new ui.item({command:"runfocussedtest"}),1250,plugin),menus.addItemByPath("Run/Run Test with Code Coverage",new ui.item({
command:"runfocussedtestwithcoverage"}),1260,plugin))}function draw(opts){if(!drawn){drawn=!0
var vbox=opts.aml.appendChild(new ui.vbox({anchors:"0 0 0 0"}))
toolbar=vbox.appendChild(new ui.hbox({id:"toolbar","class":"toolbar-top",align:"center",edge:"0 2 0 0",
style:"border-top:0"})),plugin.addElement(toolbar)
var emptyLabel=new ui.label({caption:"No Settings "})
mnuRun=new ui.menu({"class":"runner-config-menu"}),mnuRun.addEventListener("prop.visible",function(e){
if(e.value){for(var runners=[],found={},i=mnuRun.childNodes.length-1;i>=0;i--)mnuRun.removeChild(mnuRun.childNodes[i])


return focussedPanel.tree.selectedNode&&focussedPanel.tree.selectedNodes.forEach(function(n){if("all"==n.type||"root"==n.type||"runner"==n.type)n.findAllNodes("runner").forEach(function(n){
var runner=n.runner
found[n.name]||(found[n.name]=!0,runners.push(runner))})
else{var runner=n.findRunner()
if(found[runner.name])return
found[runner.name]=!0,runners.push(runner)}}),emit("showRunMenu",{menu:mnuRun,runners:runners})===!1||runners.length?void runners.forEach(function(runner){
runner.form&&(runner.meta.$label||(runner.meta.$label=new ui.label({caption:runner.root.label.toLowerCase(),
"class":"runner-form-header"})),mnuRun.appendChild(runner.meta.$label),runner.form.attachTo(mnuRun))}):void mnuRun.appendChild(emptyLabel)

}}),btnRun=ui.insertByIndex(toolbar,new ui.splitbutton({caption:"Run",icon:"run.png",skinset:"default",
skin:"c9-menu-btn","class":"runtestbtn stopped",command:"runtest",submenu:mnuRun}),100,plugin),ui.insertByIndex(toolbar,new ui.button({
caption:"Clear",skinset:"default",skin:"c9-menu-btn",command:"cleartestresults"}),100,plugin),mnuSettings=new Menu({
items:[new MenuItem({caption:"Refresh",onclick:refresh}),new Divider]},plugin),opts.aml.appendChild(new ui.button({
skin:"header-btn","class":"panel-settings",style:"top:46px",submenu:mnuSettings.aml})),container=vbox.appendChild(new ui.bar({
style:"flex:1;-webkit-flex:1;display:flex;flex-direction: column;"})),emit.sticky("drawPanels",{html:container.$int,
aml:container})}}function registerTestRunner(runner){drawMenu(),runners.push(runner),emit("register",{
runner:runner})}function unregisterTestRunner(runner){runners.splice(runners.indexOf(runner),1),emit("unregister",{
runner:runner})}function transformRunButton(type){drawn&&(btnRun.setAttribute("caption","stop"==type?"Stop":"Run"),
btnRun.setAttribute("command","stop"==type?"stoptest":"runtest"),btnRun.setAttribute("class","runtestbtn "+("stop"==type?"running":"stopped")))

}function convertToType(x){if("true"==x.toLowerCase())return!0
if("false"==x.toLowerCase())return!1
if("number"==typeof parseFloat(x))return parseFloat(x)
throw new Error("Unknown Type")}function parse(data){config||(config={})
var keepNewline,name,create,value,stack=[config],top=config
return data.split("\n").forEach(function(rawLine){var line=rawLine.split("#")[0].trimRight()
line.match(/^\s*([\w-_ ]*):(\s?[|>]?)(.*)$/)?(top=config,name=RegExp.$1,create=!0,keepNewline="|"==RegExp.$2,
value=RegExp.$3,value.trim()&&(top[name]=convertToType(value))):line.match(/^\s*- (.*)$/)?(create&&(stack.push(top=top[name]={}),
create=!1),top[RegExp.$1]=rawLine.replace(/^\s*- /,"")):line.match(/ {2}(.*)/)&&(create&&(top[name]="",
stack.push(-1),create=!1),top[name]+=RegExp.$1+="\n")}),stack.pop()==-1&&"string"==typeof top[name]&&(top[name]=top[name].substr(0,top[name].length-1)),
config}function saveConfig(callback){var item,contents=""
for(var prop in config){if(contents+=prop+":",item=config[prop],"object"==typeof item){contents+="\n"


for(var name in item)contents+="  - "+("string"==typeof item[name]?item[name]:name)+"\n"}else"boolean"==typeof item?contents+=" "+item.toString():"number"==typeof item?contents+=" "+item.toString():(contents+=" |\n",
contents+="  "+item.toString().split("\n").join("\n  "))
contents+="\n"}fs.writeFile(configPath,contents,callback),emit("updateConfig")}function resize(){emit("resize")

}function refresh(){emit("update")}function setCoverage(node){emit("coverage",{node:node})}function clearCoverage(node){
emit("clearCoverage",{node:node})}function openTestConfigFile(){tabManager.open({path:configPath,newOnError:!0,
value:"excluded:\n  - \n\nskipped:\n  - \n",focus:!0},function(){})}var Panel=imports.Panel,ui=imports.ui,settings=imports.settings,menus=(imports.panels,
imports.menus),commands=imports.commands,tabManager=imports.tabManager,Menu=imports.Menu,MenuItem=imports.MenuItem,Divider=imports.Divider,fs=imports.fs,save=(imports.c9,
imports.save),watcher=imports.watcher,showError=imports["dialog.error"].show,experimental=imports["preferences.experimental"],Coverage=require("./data/coverage"),File=require("./data/file"),TestSet=require("./data/testset"),Test=require("./data/test"),Node=require("./data/node"),Data=require("./data/data")


Data.fromJSON=function(list){return list.map(function(node){return node instanceof Data?node:(node.items&&(node.items=Data.fromJSON(node.items)),
"file"==node.type?new File(node):"testset"==node.type?new TestSet(node):"test"==node.type?new Test(node):"prepare"==node.type?new Node(node):void console.error("unhandled type ",node))

}).filter(Boolean)}
var ENABLED=options.enabled||experimental.addExperiment("test",!1,"Panels/Test Panel")
if(!ENABLED&&!options.enabled)return register(null,{test:{Coverage:Coverage,File:File,TestSet:TestSet,
Test:Test,Node:Node,runners:[],register:function(){},unregister:function(){},on:function(){},once:function(){},
inactive:!0}})
var config,ready,toolbar,container,btnRun,focussedPanel,mnuRun,mnuSettings,lastTest,plugin=new Panel("Ajax.org",main.consumes,{
index:options.index||400,caption:"Test",buttonCSSClass:"test",minWidth:150,where:options.where||"left"
}),emit=plugin.getEmitter(),configPath=options.configPath||"/.c9/test.settings.yml",runners=[],drawnMenu=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("show",function(e){}),plugin.on("hide",function(e){}),plugin.on("unload",function(){
drawn=!1,drawnMenu=!1,toolbar=null,lastTest=null,container=null,config=null,ready=null,runners=[],btnRun=null,
focussedPanel=null,mnuRun=null,mnuSettings=null}),plugin.freezePublicAPI({Coverage:Coverage,File:File,
TestSet:TestSet,Test:Test,Node:Node,get ready(){return ready},get drawn(){return drawn},get config(){
return config},get runners(){return runners},get settingsMenu(){return mnuSettings},get focussedPanel(){
return focussedPanel},set focussedPanel(v){focussedPanel=v},get lastTest(){return lastTest},set lastTest(v){
lastTest=v},saveConfig:saveConfig,resize:resize,refresh:refresh,register:registerTestRunner,unregister:unregisterTestRunner,
setCoverage:setCoverage,clearCoverage:clearCoverage,transformRunButton:transformRunButton}),register(null,{
test:plugin})}return main.consumes=["Panel","ui","settings","panels","menus","commands","Menu","MenuItem","Divider","tabManager","fs","dialog.error","c9","preferences.experimental","save","watcher"],
main.provides=["test"],main})


define("plugins/c9.ide.behaviors/zentabs",[],function(require,exports,module){function main(options,imports,register){
function load(){prefs.add({Project:{position:10,"Tabs and IDE Layout":{position:1500,"Limit number of open tabs per pane (ZenTabs)":{
type:"checked-spinner",checkboxPath:"user/zentabs/@useZenTabs",path:"user/zentabs/@tabLimit",min:0,max:1e3,
position:100}}}},plugin),tabManager.on("open",runZenTabs,plugin)}function runZenTabs(event){var tab=event.tab,zentabsEnabled=settings.getBool("user/zentabs/@useZenTabs")


if(zentabsEnabled)for(var tabLimit=settings.get("user/zentabs/@tabLimit"),openTabs=tab.pane.meta.accessList,tabsToRemove=openTabs.length-tabLimit,i=openTabs.length-1;i>0;i--){
if(tabsToRemove<1)return tab.pane.aml.$waitForMouseOut=!1,void tab.pane.aml.$scaleinit(null,"sync")
openTabs[i].document.changed||(openTabs[i].close(),tabsToRemove--)}}var Plugin=imports.Plugin,tabManager=imports.tabManager,prefs=imports.preferences,settings=imports.settings,plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){load()}),plugin.on("unload",function(){}),plugin.freezePublicAPI({}),register(null,{
zen:plugin})}return main.consumes=["Plugin","tabManager","preferences","settings"],main.provides=["zen"],
main})


define("text!plugins/c9.ide.collab/notifications/skin.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:notifier name="notifications-bubble">\n        <a:style><![CDATA[]]></a:style>\n\n        <a:presentation>\n            <a:notification message="." body="div[3]" close="div[2]">\n                <div class="notifications-bubble">\n                    <div class="noise_bg"></div>\n                    <div class="close-notifier"></div>\n                    <div class="notifications-content"> </div>\n                </div>\n            </a:notification>\n        </a:presentation>\n    </a:notifier>\n</a:skin>\n')


define("text!plugins/c9.ide.collab/notifications/bubble.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:notifier id="ntNotifications"\n      position="top-right"\n      timeout="4"\n      start-padding ="45"\n      columnsize="200"\n      margin="10 45 10 10"\n      skin="notifications-bubble"\n      skinset="bubble" />\n</a:application>')


define("plugins/c9.ide.collab/notifications/bubble",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,settings.on("read",function(){settings.setDefaults("user/collab",[["showbubbles","true"]])

}),void prefs.add({General:{Collaboration:{"Show Notification Bubbles":{type:"checkbox",position:1e3,
path:"user/collab/@showbubbles"}}}},plugin))}function draw(){drawn||(drawn=!0,ui.insertSkin({name:"bubble",
data:skin,"media-path":staticPrefix+"/images/"},plugin),ui.insertMarkup(layout.findParent(plugin),markup,plugin),
ntNotifications=plugin.getElement("ntNotifications"),ntNotifications.on("closed",function(e){emit("closed",{
html:e.html})}),emit("draw"))}function popup(message,persistent,callback){if(settings.getBool("user/collab/@showbubbles")&&(draw(),
!(ntNotifications.showing>4)))return menus.minimized?ntNotifications.setAttribute("start-padding",25):ntNotifications.setAttribute("start-padding",45),
ntNotifications.popup(message,null,null,persistent,callback)}var ntNotifications,Plugin=imports.Plugin,ui=imports.ui,menus=imports.menus,layout=imports.layout,settings=imports.settings,prefs=imports.preferences,plugin=new Plugin("Ajax.org",main.consumes),staticPrefix=options.staticPrefix,skin=require("text!./skin.xml"),markup=require("text!./bubble.xml"),emit=plugin.getEmitter(),loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({popup:popup,_events:["draw"]
}),register(null,{"notification.bubble":plugin})}return main.consumes=["Plugin","ui","layout","menus","preferences","settings"],
main.provides=["notification.bubble"],main})


define("text!plugins/c9.ide.pubsub/pubsub-service.js",[],"module.exports = function (vfs, options, register) {\n    var Stream = require('stream');\n    \n    var stream = new Stream();\n    stream.readable = true;\n\n    register(null, {\n        subscribe: function (callback) {\n            callback(null, { stream: stream });\n        },\n\n        publish: function(message) {\n            stream.emit(\"data\", message);\n        }\n    });\n};\n")


define("plugins/c9.ide.pubsub/pubsub-client",[],function(require,exports,module){function main(options,imports,register){
function load(oldVfs){loaded&&!oldVfs||(loaded=!0,ext.loadRemotePlugin("pubsub",{file:oldVfs?void 0:"c9.ide.pubsub/pubsub-service.js",
code:oldVfs?require("text!./pubsub-service.js"):void 0},function(err,remote){return remote||oldVfs?remote?(api=remote,
void api.subscribe(function(err,meta){return console.log("PubSub connected"),emit.sticky("connected"),
err?(loaded=!1,void console.error(err)):(stream=meta.stream,stream.on("data",function(chunk){var message


try{message=JSON.parse(chunk)}catch(e){return setTimeout(function(){loaded=!1,load()},5e3)}console.log("PubSub message:",message),
emit("message",message)}),void stream.on("close",function(){loaded=!1}))})):console.error(err):load(!0)

}))}function unload(){console.warn("PubSub disconnected"),api=stream=null,loaded=!1}var stream,api,Plugin=imports.Plugin,c9=imports.c9,ext=imports.ext,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loaded=!1


plugin.on("load",function(){c9.on("connect",load,plugin),c9.on("disconnect",unload,plugin)}),plugin.freezePublicAPI({
_events:["message","connected"],get connected(){return loaded&&!!stream}}),register(null,{pubsub:plugin
})}return main.consumes=["c9","Plugin","ext"],main.provides=["pubsub"],main})


define("text!plugins/c9.ide.login/login.css",[],"")


define("plugins/c9.ide.login/login",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,info.getUser(function(err,user){updateButton({user:user})}),
auth.on("relogin",onReLogin),void(c9.local||(menus.addItemByPath("Cloud9/~",new apf.divider,2e6,plugin),
menus.addItemByPath("Cloud9/Quit Cloud9",new apf.item({onclick:function(){signout()}}),2000100,plugin))))

}function updateButton(e){var user=e.user
lastUser&&lastUser.id==user.id||(plugin.cleanUp(),info.on("change",updateButton,plugin),createButton(user),
lastUser=user,emit.sticky("ready",{name:user.fullname,id:user.id},plugin))}function createButton(user){
function minimize(){apf.document.documentElement.appendChild(button),ui.setStyleClass(button.$ext,"titlebar")

}function restore(){ui.insertByIndex(parent,button,870,plugin),ui.setStyleClass(button.$ext,"",["titlebar"])

}var name="user_"+user.id
lastUser&&menus.remove("user_"+lastUser.id),menus.remove(name)
var parent=layout.findParent(plugin)
ui.insertCss(require("text!./login.css"),plugin),mnuUser=new ui.menu,plugin.addElement(mnuUser)
var icon=util.getGravatarUrl(user.email,32,"")
menus.addItemByPath(name+"/",mnuUser,11e4,plugin),ui.insertByIndex(parent,new ui.divider({skin:"c9-divider-double",
"class":"extrasdivider"}),870,plugin)
var c=500
menus.addItemByPath(name+"/Dashboard",new ui.item({onclick:function(){window.open(dashboardUrl)}}),c+=100,plugin),
menus.addItemByPath(name+"/Account",new ui.item({onclick:function(){window.open(accountUrl)}}),c+=100,plugin),
menus.addItemByPath(name+"/Home",new ui.item({onclick:function(){window.open(ideBaseUrl+"?redirect=0")

}}),c+=100,plugin),options.noLogout||(menus.addItemByPath(name+"/~",new ui.divider,c+=100,plugin),menus.addItemByPath(name+"/Log out",new ui.item({
onclick:function(){return c9.local?void auth.logout(function(){info.login(!0)}):signout()}}),c+=100,plugin))


var button=menus.get(name).item
button.setAttribute("class","btnName"),button.setAttribute("icon",icon),button.setAttribute("iconsize","16px 16px"),
button.setAttribute("tooltip",user.fullname),button.setAttribute("caption",user.fullname),ui.insertByIndex(parent,button,600,plugin),
c9.local&&(menus.on("minimize",minimize,plugin),menus.on("restore",restore,plugin),menus.minimized&&minimize())

}function signout(){vfsEndpoint.clearCache(),auth.logout(ideBaseUrl)}function onReLogin(){c9.local||alert("Logged out","You have been logged in as a different user","Please hit OK to reload the IDE.",function(){
vfsEndpoint.clearCache(),auth.logout()})}var lastUser,mnuUser,Plugin=imports.Plugin,ui=imports.ui,c9=imports.c9,menus=imports.menus,layout=imports.layout,util=(imports.http,
imports.util),info=imports.info,auth=imports.auth,alert=imports["dialog.alert"].show,vfsEndpoint=imports["vfs.endpoint"],ideBaseUrl=options.ideBaseUrl,dashboardUrl=options.dashboardUrl,accountUrl=options.accountUrl,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({get menu(){return mnuUser},_events:["ready"],
createButton:createButton,updateButton:updateButton}),register(null,{login:plugin})}return main.consumes=["Plugin","ui","menus","info","layout","http","util","vfs.endpoint","auth","dialog.alert","c9"],
main.provides=["login"],main})


define("plugins/c9.ide.preferences/experimental",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,settings.setDefaults("state/experiments",[["@enabled",!0]]),
void plugin.form.add([{type:"custom",title:"Introduction",position:1,node:intro=new ui.bar({"class":"intro",
style:"padding:12px;position:relative;"})}],plugin))}function draw(e){drawn||(drawn=!0,intro.$int.innerHTML='<h1>Experimental Features (reload to apply changes)</h1><p style="white-space:normal">Cloud9 is continuously in development. New features in alpha or beta are first hidden and can be enabled via this page. <i>Use at your own risk</i>.</p>')

}function addExperiment(name,defaultValue,caption){for(var current,uniqueId=name.replace(/\//g,"-"),parts=caption.split("/"),obj={
Experimental:current={}},i=0;i<parts.length;i++)current[parts[i]]=current={}
current.type="checkbox",current.setting="state/experiments/@"+uniqueId,current.onchange=function(e){hasAlerted||(alert("Experimental Features","To see the effect of this change, please refresh Cloud9."),
hasAlerted=!0)},found[caption]||plugin.add(obj,plugin),found[caption]=!0,settings.setDefaults("state/experiments",[[uniqueId,Number(defaultValue)]])


var idx=c9.location.indexOf(name+"=")
if(idx!==-1){if(c9.location.indexOf(name+"=0")!=-1)return!1
if(c9.location.indexOf(name+"=1")!=-1)return!0}return settings.getBool(current.setting)}var PreferencePanel=imports.PreferencePanel,settings=imports.settings,ui=imports.ui,c9=imports.c9,alert=imports["dialog.alert"].show,plugin=new PreferencePanel("Ajax.org",main.consumes,{
caption:"Experimental",form:!0,index:500}),emit=plugin.getEmitter()
emit.setMaxListeners(1e3)
var intro,hasAlerted,loaded=!1,drawn=!1,found={}
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("unload",function(){
loaded=!1,drawn=!1,hasAlerted=!1,intro=null}),plugin.freezePublicAPI({_events:[],addExperiment:addExperiment
}),register(null,{"preferences.experimental":plugin})}return main.consumes=["PreferencePanel","ui","dialog.alert","settings","c9"],
main.provides=["preferences.experimental"],main})


define("plugins/c9.ide.preferences/project",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,plugin.form.add([{type:"custom",title:"Introduction",position:1,
node:intro=new ui.bar({"class":"intro",style:"padding:12px;position:relative;"})}],plugin),prefs.on("add",function(e){
"Project"in e.state&&plugin.add(e.state,e.plugin)},plugin),void prefs.on("draw",function(e){prefs.activePanel||prefs.activate(plugin)

},plugin))}function draw(e){drawn||(drawn=!0,intro.$int.innerHTML='<h1>Project Settings</h1><p>These settings are specific to this project. They are saved at: <span style="padding:5px 0 5px 0px"><a href="javascript:void(0)">&lt;project>/.c9/project.settings</a>.</span></p><p class="hint">Hint: Add the .c9 folder to your repository to share these settings with your collaborators.</p>',
intro.$int.querySelector("a").onclick=function(){emit("edit")})}var PreferencePanel=imports.PreferencePanel,prefs=imports.preferences,ui=imports.ui,plugin=new PreferencePanel("Ajax.org",main.consumes,{
caption:"Project Settings",form:!0,index:50}),emit=plugin.getEmitter()
emit.setMaxListeners(1e3)
var intro,loaded=!1,drawn=!1
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("unload",function(){
loaded=!1,drawn=!1,intro=null}),plugin.freezePublicAPI({_events:[]}),register(null,{"preferences.project":plugin
})}return main.consumes=["PreferencePanel","ui","dialog.confirm","settings","preferences"],main.provides=["preferences.project"],
main})


define("plugins/c9.ide.preferences/general",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,plugin.form.add([{type:"custom",title:"Introduction",position:1,
node:intro=new ui.bar({"class":"intro",style:"padding:12px;position:relative;"})}],plugin),void prefs.on("add",function(e){
"Project"in e.state||plugin.add(e.state,e.plugin)},plugin))}function draw(e){drawn||(drawn=!0,plugin.add({
General:{position:10,General:{position:10,"Reset to Factory Settings":{type:"button",caption:"Reset to Defaults",
width:140,onclick:function(){confirm("Reset Settings","Are you sure you want to reset your settings?","By resetting your settings to their defaults you will lose all custom settings. Cloud9 will return to it's original configuration",function(){
settings.reset()},function(){},{yes:"Reset settings",no:"Cancel"})}}},"User Interface":{position:20,"Enable UI Animations":{
type:"checkbox",path:"user/general/@animateui",position:1e3},"Use an Asterisk (*) to Mark Changed Tabs":{
type:"checkbox",path:"user/tabs/@asterisk",position:1050},"Display Title of Active Tab as Browser Title":{
type:"checkbox",path:"user/tabs/@title",position:1100}}}},plugin),intro.$int.innerHTML="<h1>User Settings</h1>"+(options.local?'<p>These settings are saved at <a href="javascript:void(0)">'+options.installPath+"/user.settings</a>.</p>":'<p>Manually edit these settings by clicking on this link: <a href="javascript:void(0)">user.settings</a>.</p>')+'<p class="hint">These settings are synced across all your workspaces.</p>',
intro.$int.querySelector("a").onclick=function(){emit("edit")})}var PreferencePanel=imports.PreferencePanel,prefs=imports.preferences,settings=imports.settings,ui=imports.ui,confirm=imports["dialog.confirm"].show,plugin=new PreferencePanel("Ajax.org",main.consumes,{
caption:"User Settings",form:!0,index:100}),emit=plugin.getEmitter()
emit.setMaxListeners(1e3)
var intro,loaded=!1,drawn=!1
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("unload",function(){
loaded=!1,drawn=!1,intro=null}),plugin.freezePublicAPI({}),register(null,{"preferences.general":plugin
})}return main.consumes=["PreferencePanel","ui","dialog.confirm","settings","preferences"],main.provides=["preferences.general"],
main})


define("plugins/c9.ide.preferences/preferencepanel",[],function(require,module,exports){function main(options,imports,register){
function PreferencePanel(developer,deps,options){function draw(){drawn||(drawn=!0,amlBar=ui.bar({htmlNode:prefs.container,
anchors:"0 0 0 0","class":"prefpanel "+className,visible:!1}),plugin.addElement(amlBar),options.form&&(form.draw(),
amlBar.appendChild(container=form.aml),noscroll||(container.$int.addEventListener("scroll",scroll),form.container.style.paddingBottom=amlBar.$ext.parentNode.offsetHeight-40+"px")),
emit.sticky("draw",{aml:amlBar,html:amlBar.$int,navHtml:navHtml}))}function scroll(){for(var node,scrollTop=container.$int.scrollTop,nodes=container.$int.childNodes,i=0;i<nodes.length;i++)if(1==(node=nodes[i]).nodeType&&node.offsetTop<=scrollTop&&node.offsetTop+node.offsetHeight>scrollTop){
var nodeTop=Math.max(node.offsetTop+node.offsetHeight-.3*node.offsetHeight,0)
nodeTop<scrollTop&&(node=nodes[i+1]||node),lastA&&ui.setStyleClass(lastA,"",["current"])
try{var nav=node.firstChild.lastChild.firstChild
if(nav){var name=nav.nodeValue
lastA=subHeadings[name].navHtml,ui.setStyleClass(lastA,"current")}}catch(e){}}}function show(noAnim){
if(draw(),!active){active=!0,navHtml.className+=" active"
var bq=navHtml.lastChild
"BLOCKQUOTE"==bq.tagName&&(bq.style.display="block",bq.style.height=noAnim?"":0,noAnim||anims.animate(bq,{
duration:.15,height:bq.scrollHeight+"px",timingFunction:"cubic-bezier(.30, .08, 0, 1)"},function(){})),
amlBar.show(),noAnim||(amlBar.$ext.style.opacity=0,amlBar.$ext.style.zIndex=100,amlBar.$ext.style.display="block",
anims.animate(amlBar,{duration:.15,opacity:1,timingFunction:"linear"},function(){})),options.form&&scroll(),
emit("activate")}}function hide(){navHtml.className=navHtml.className.replace(/ active/g,"")
var bq=navHtml.lastChild
"BLOCKQUOTE"==bq.tagName&&anims.animate(bq,{duration:.15,height:0,timingFunction:"cubic-bezier(.30, .08, 0, 1)"
},function(){bq.style.display="none"}),amlBar.$ext.style.zIndex=99,setTimeout(function(){amlBar.$ext.style.zIndex=1,
amlBar.$ext.style.display="none"},250),active=!1,emit("deactivate")}function resize(){form&&drawn&&!noscroll&&(form.container.style.paddingBottom=amlBar.$ext.parentNode.offsetHeight-40+"px"),
emit("resize")}function add(state,foreign){if(!foreign)throw new Error("Missing plugin parameter when calling preferences.add()")


if(!container)return void plugin.once("draw",function(){add(state,foreign)})
for(var name in state){var first=state[name],heading=getHeading(name,first.position,foreign)
for(var caption in first)if("position"!=caption){var second=first[caption]
second.position&&(second.position=heading.index+""+second.position),getSubHeading(heading,caption,second.position,foreign)

}form.add(first,foreign)}}function getHeading(caption,index,plugin){return headings[caption]||(headings[caption]={
navHtml:prefs.addNavigation(caption,index,navHtml,plugin),index:index}),headings[caption]}function getSubHeading(heading,caption,index,plugin){
if(!subHeadings[caption]){var htmlNode=prefs.addNavigation(caption,index,heading.navHtml,plugin)
subHeadings[caption]={navHtml:htmlNode,index:index},htmlNode.$caption=caption,htmlNode.addEventListener("mousedown",scrollTo.bind(null,caption))

}return subHeadings[caption]}function scrollTo(caption){form.headings[caption]&&apf.tween.single(container.$int,{
type:"scrollTop",steps:10,anim:apf.tween.easeInOutCubic,from:container.$int.scrollTop,to:form.headings[caption].container.$ext.offsetTop
})}var amlBar,navHtml,form,container,active,lastA,drawn,plugin=new Plugin(developer,deps),emit=plugin.getEmitter(),caption=options.caption,noscroll=options.noscroll,className=options.className||"",visible=null==options.visible||options.visible,index=options.index||100,headings={},subHeadings={}


return plugin.on("load",function(){visible&&(navHtml=prefs.addNavigation(caption,index,null,plugin),navHtml.addEventListener("mousedown",function(){
prefs.activate(plugin)}),prefs.on("resize",function(){resize()}),options.form&&(form=new Form({className:"container",
style:"overflow-y:auto;overflow-x:hidden;position:absolute;left:0;top:0;right:0;bottom:0",skins:{textbox:"tbsimple"
},colwidth:options.colwidth||"300",colmaxwidth:"300",widths:{dropdown:120,spinner:60,textbox:200,password:200,
colorbox:40,button:200,textarea:400,"checked-spinner":50}},plugin)))}),plugin.on("unload",function(){
drawn=!1}),plugin.freezePublicAPI.baseclass(),plugin.freezePublicAPI({get section(){return lastA&&lastA.$caption

},get aml(){return amlBar},get caption(){return caption},get index(){return index},get form(){return form

},get active(){return amlBar.visible},_events:["draw","activate","deactivate","resize"],add:add,show:show,
scrollTo:scrollTo,hide:hide,resize:resize}),plugin}var Plugin=imports.Plugin,ui=imports.ui,anims=imports.anims,Form=(imports.settings,
imports.Form),prefs=imports.preferences
register(null,{PreferencePanel:PreferencePanel})}return main.consumes=["Plugin","ui","preferences","anims","Form","settings"],
main.provides=["PreferencePanel"],main})


define("text!plugins/c9.ide.preferences/preferences.css",[],"")


define("plugins/c9.ide.preferences/preferences",[],function(require,exports,module){function main(options,imports,register){
function focusOpenPrefs(){for(var pages=tabs.getTabs(),i=0,tab=pages[i];tab;tab=pages[i++])if("preferences"==tab.editorType)return tabs.focusTab(tab),
!0}function draw(e){if(!drawn){drawn=!0
var css=require("text!./preferences.css")
ui.insertCss(css,options.staticPrefix,handle),parent=e.tab.appendChild(new ui.hsplitbox({"class":"bar-preferences",
anchors:"0 0 0 0"})),parent.appendChild(navigation),container=parent.appendChild(new ui.bar),handle.addElement(parent),
navigation.show(),emit("draw")}}function addNavigation(caption,index,parent,plugin){var level=parent?parent.level+1:1,markup="<div class='level"+level+"'><"+(2!=level?"a":"span")+">"+(debug?"["+(index||"")+"] ":"")+caption+"</"+(2!=level?"a":"span")+"></div>"


parent=parent?"BLOCKQUOTE"==parent.lastChild.tagName?parent.lastChild:parent.appendChild(document.createElement("blockquote")):navigation.$int


var htmlNode=ui.insertHtml(parent,markup,plugin)[0]
return ui.insertByIndex(parent,htmlNode,index,!1),htmlNode.level=level,htmlNode.name=plugin.name,htmlNode.hostPlugin=plugin,
htmlNode}function activate(panel,section){if(!drawn)return activePanel||handle.once("draw",function(){
activate(activePanel)}),void(activePanel=panel)
if("string"==typeof panel){var panels=navigation&&navigation.$ext&&navigation.$ext.children
if(panels)for(var i=0;i<panels.length;i++)if(panels[i].name==panel||panels[i].name=="preferences."+panel){
panel=panels[i].hostPlugin
break}}return panel&&panel.show?(activePanel&&activePanel!=panel&&activePanel.hide(),panel.show(!activePanel),
section&&panel.scrollTo(section),void(activePanel=panel)):console.error("Couldn't find preference panel",panel)

}function add(state,plugin){emit("add",{state:state,plugin:plugin})}function Preferences(){var tab,plugin=new Editor("Ajax.org",main.consumes,extensions)


return plugin.on("resize",function(e){emit("resize",e)}),plugin.on("draw",function(e){tab=e.tab,draw(e)

}),plugin.on("getState",function(e){e.state.activePanel=activePanel&&activePanel.name,e.state.section=activePanel&&activePanel.section

}),plugin.on("setState",function(e){activate(e.state.activePanel,e.state.section)}),plugin.on("documentLoad",function(e){
function setTheme(){var bg=ui.getStyleRule(".bar-preferences .container .header","backgroundColor")||"#F0F0F0"


doc.tab.backgroundColor=bg,util.shadeColor(bg,1).isLight?doc.tab.classList.remove("dark"):doc.tab.classList.add("dark")

}var doc=e.doc
doc.title="Preferences",layout.on("themeChange",setTheme,e.doc),setTheme()}),plugin.on("documentActivate",function(e){
e.doc.tab.on("unload",function(){parent.parentNode==tab&&tab.removeChild(parent)}),tab.appendChild(parent),
emit("show")}),plugin.freezePublicAPI({add:add}),plugin.load(null,"preferences"),plugin}var Editor=imports.Editor,editors=imports.editors,tabs=imports.tabManager,commands=imports.commands,settings=imports.settings,menus=imports.menus,util=imports.util,layout=imports.layout,ui=imports.ui,debug=location.href.indexOf("menus=1")>-1,extensions=[],handle=editors.register("preferences","Preferences",Preferences,extensions),emit=handle.getEmitter()


emit.setMaxListeners(1e3)
var parent,navigation,activePanel,container,drawn=!1
handle.on("load",function(){settings.on("read",function(){settings.setDefaults("user/general",[["animateui",!0]])

}),commands.addCommand({name:"openpreferences",hint:"show the open settings panel",group:"General",bindKey:{
mac:"Command-,",win:"Ctrl-,"},exec:function(editor,args){var tab=tabs.focussedTab,toggle=args.toggle||"click"==args.source


return tab&&"preferences"==tab.editor.type&&toggle?void tab.close():focusOpenPrefs()?void(args.panel&&activate(args.panel,args.section)):void tabs.open({
editorType:"preferences",active:!0},function(){args.panel&&activate(args.panel,args.section)})}},handle)


var menu=tabs.getElement("mnuEditors")
menus.addItemToMenu(menu,new ui.item({caption:"Open Preferences",hotkey:"commands.openpreferences",onclick:function(e){
focusOpenPrefs()||(e.pane=this.parentNode.pane,tabs.open({editorType:"preferences",active:!0,pane:e.pane
},function(){}))}}),500,handle),menus.addItemByPath("Cloud9/~",new ui.divider,280,handle),menus.addItemByPath("Cloud9/Preferences",new ui.item({
command:"openpreferences"}),300,handle)
var btn=new ui.button({skin:"c9-menu-btn","class":"preferences",tooltip:"Preferences",command:"openpreferences"
})
ui.insertByIndex(layout.findParent({name:"preferences"}),btn,900,handle),navigation=new ui.bar({htmlNode:document.body,
width:"170","class":"navigation",style:"overflow-y:auto; overflow-x:hidden",visible:"false"})}),handle.freezePublicAPI({
get activePanel(){return activePanel},get aml(){return container},get container(){return container.$int

},_events:["add"],add:add,addNavigation:addNavigation,activate:activate}),register(null,{preferences:handle
})}return main.consumes=["Editor","editors","ui","commands","menus","layout","tabManager","util","settings"],
main.provides=["preferences"],main})


define("text!plugins/c9.ide.behaviors/style.css",[],"")


define("plugins/c9.ide.behaviors/page",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,ui.insertCss(css,options.staticPrefix,handle),settings.on("read",function(){
settings.setDefaults("user/tabs",[["autoclosepanes",!0]])},handle),tabs.on("tabCreate",function(e){var tab=e.tab


addInteraction(tab),tab.aml.on("$skinchange",function(){addInteraction(tab)})},handle),tabs.on("tabDestroy",function(e){
e.tab.meta.$skipAnimation&&setTimeout(function(){e.tab.pane.unload()},0)},handle),tabs.on("tabAfterClose",function(e){
e.last&&canTabBeRemoved(e.tab.pane,1)&&settings.getBool("user/tabs/@autoclosepanes")&&(e.tab.meta.$skipAnimation=!0)

},handle),prefs.add({General:{"User Interface":{position:20,"Automatically Close Empty Panes":{type:"checkbox",
path:"user/tabs/@autoclosepanes",position:1150}}}},handle),void ui.insertCss("* { }",!1,handle))}function canTabBeRemoved(pane,min){
if(!pane||pane.getTabs().length>(min||0))return!1
for(var containers=tabs.containers,i=0;i<containers.length;i++)if(ui.isChildOf(containers[i],pane.aml))return containers[i].getElementsByTagNameNS(apf.ns.aml,"tab").length>1


return!1}function addInteraction(plugin){function setOrderMode(toTab,e){if(toTab.isOrderCleaned===!1)return setTimeout(function(){
setOrderMode(toTab,e)},10)
mode="order",clean&&clean()
if(pane=toTab,btnPlus=pane.$ext.querySelector(".plus_tab_button"),e){var curpage=pane.getPage()
if(curpage){var curbtn=curpage.$button
ui.setStyleClass(curbtn,"",["curbtn"])}ui.setStyleClass(tab.$button,"curbtn")}var container=pane.$buttons,nodes=container.childNodes,rect=container.getBoundingClientRect(),btn=(pane.getPage()||{
$button:button}).$button,diff=ui.getWidthDiff(btn),leftMargin=parseInt(ui.getStyle(btn,"marginLeft"),10)||0,rightMargin=parseInt(ui.getStyle(btn,"marginRight"),10)||0,maxWidth=parseInt(ui.getStyle(btn,"maxWidth"),10)||150


maxWidth>500&&(maxWidth=150),leftPos=rect.left,pages=pane.getPages(),leftPadding=parseInt(ui.getStyle(container,"paddingLeft"),10)||0,
rightPadding=(parseInt(ui.getStyle(container,"paddingRight"),10)||0)+24
var addOne=pages.indexOf(tab)==-1,maxTabWidth=Math.min(maxWidth+diff,(rect.width-leftPadding-rightPadding+rightMargin)/(pages.length+(addOne?1:0))-rightMargin),newTabWidth=maxTabWidth-diff


tabWidth=maxTabWidth+leftMargin+rightMargin
for(var info=[],i=nodes.length-1;i>=0;i--)1==(btn=nodes[i]).nodeType&&info.push([btn,btn.offsetLeft,btn.offsetTop,btn.offsetWidth])

;(e||addOne)&&(pane.$buttons.appendChild(button),info.push([button,0,button.offsetTop,dragWidth]))
for(var iter;iter=info.pop();)btn=iter[0],btn.style.left=iter[1]+"px",btn.style.top=iter[2]+"px",btn.style.width=iter[3]-ui.getWidthDiff(btn)+"px",
btn.style.margin=0,btn.style.position="absolute"
start=function(){pane.childNodes.indexOf(tab)
pane.childNodes.remove(tab)},started&&start(),(e||addOne)&&mouseMoveOrder(e,newTabWidth),apf.addListener(document,"mousemove",mouseMoveOrder),
apf.addListener(document,"mouseup",mouseUpOrder),clean=function(change,toTab){if(toTab||(toTab=pane),
toTab.isOrderCleaned=!1,change!==!1&&(apf.removeListener(document,"mousemove",mouseMoveOrder),apf.removeListener(document,"mouseup",mouseUpOrder)),
change===!0){var maxTabWidth=Math.min(maxWidth+diff,(rect.width-leftPadding-rightPadding+rightMargin+3)/pane.getPages().length-rightMargin)


tabWidth=maxTabWidth+leftMargin+rightMargin
var cb=clean.bind(this,!1,toTab)
return animateTabs(cb,null,maxTabWidth-diff)}curbtn&&curpage.parentNode&&curpage==curpage.parentNode.getPage()&&(ui.setStyleClass(curbtn,"curbtn"),
curbtn=null)
for(var i=nodes.length-1;i>=0;i--)1==(btn=nodes[i]).nodeType&&(btn.style.left=btn.style.top=btn.style.width=btn.style.margin=btn.style.position="")


toTab.isOrderCleaned=!0}}function setSplitMode(e){mode="split",divSplit||(divSplit=document.createElement("div"),
divSplit.className="split-area",document.body.appendChild(divSplit))
for(var frames=document.getElementsByTagName("iframe"),i=0;i<frames.length;i++)frames[i].style.pointerEvents="none"


start=function(){var rect=button.getBoundingClientRect()
button.style.left=rect.left+"px",button.style.top=rect.top+"px",button.style.width=dragWidth-ui.getWidthDiff(button)+"px",
button.style.position="absolute",divButton||(divButton=document.createElement("div"),document.body.appendChild(divButton))


var theme=aceHandle.theme||{}
divButton.className=(theme.isDark?"dark ":"")+(theme.cssClass||""),divButton.appendChild(button),pane.childNodes.remove(tab),
ui.setStyleRule("*","cursor","default!important")},apf.addListener(document,"mousemove",mouseMoveSplit),
apf.addListener(document,"mouseup",mouseUpSplit),started&&start(),clean&&clean(!0),clean=function(){button.style.left=button.style.top=button.style.width=button.style.margin=button.style.position="",
divSplit.style.display="none",ui.setStyleRule("*","cursor",""),apf.removeListener(document,"mousemove",mouseMoveSplit),
apf.removeListener(document,"mouseup",mouseUpSplit)},started&&mouseMoveSplit(e)===!1}function finish(){
if(!initMouse){clean(null,null,!0),button.style.zIndex=button.style.pointerEvents=""
for(var frames=document.getElementsByTagName("iframe"),i=0;i<frames.length;i++)frames[i].style.pointerEvents=""

}tab.$dragging=!1}function isNotSnapped(e,container){container||(container=pane.$buttons)
var rect=container.getBoundingClientRect(),x=e.clientX,y=e.clientY,diff=10
return x<rect.left-diff||x>rect.left+rect.width+diff||y<rect.top-5||y>rect.top+rect.height+diff}function showOrderPosition(idx,toWidth,finalize,finish){
idx<0&&(idx=0)
var orderTab=(pages[idx-1]==tab?pages[idx+1]:pages[idx])||null
if(pane.childNodes.remove(tab),finalize){pages=pane.getPages()
var insert=pages[idx]&&pages[idx].cloud9tab
plugin.attachTo(pane.cloud9pane,insert,!0)}else{if(orderTab==tab)return
idx=pane.childNodes.indexOf(orderTab),idx>-1?pane.childNodes.splice(idx,0,tab):pane.childNodes.push(tab),
pane.$buttons.insertBefore(tab.$button,orderTab&&orderTab.$button||btnPlus)}animateTabs(finish,finalize,toWidth)

}function animateTabs(finish,includeTab,toWidth){pages=pane.getPages(),pages.push({$button:btnPlus})
for(var p,tweens=[],offset=0,i=0,l=pages.length;i<l;i++)if(p=pages[i],includeTab||tab!==p){var curLeft=p.$button.offsetLeft,toLeft=leftPadding+(i-offset)*tabWidth+(p.localName?0:plusMargin)


if(toWidth||toLeft!=curLeft){var tween={node:p.$button,duration:tab===p?.2:.15,timingFunction:tab===p?"cubic-bezier(.30, .08, 0, 1)":"linear"
};(includeTab||tab!==p)&&(tween.left=toLeft+"px"),toWidth&&p.localName&&(tween.width=toWidth+"px"),tweens.push(tween)

}}else p.$button.parentNode==document.body&&(offset=1),toWidth&&(p.$button.style.width=toWidth+"px")
anims.animateMultiple(tweens,function(){finish&&finish()})}function mouseMoveOrder(e,toWidth,finalize){
if(e||(e=event),!started){if(Math.abs(startX-e.clientX)<4&&Math.abs(startY-e.clientY)<4)return
started=!0,initMouse(),start()}if(isNotSnapped(e))return setSplitMode(e)
button.style.left=e.clientX-leftPos-offsetX+"px"
var x=button.offsetLeft-leftPadding+tabWidth/2,idx=Math.floor(x/tabWidth)
showOrderPosition(idx,toWidth,finalize)}function mouseUpOrder(e){if(apf.removeListener(document,"mousemove",mouseMoveOrder),
apf.removeListener(document,"mouseup",mouseUpOrder),!started)return finish()
button.style.left=e.clientX-leftPos-offsetX+"px"
var x=button.offsetLeft-leftPadding+tabWidth/2,idx=Math.floor(x/tabWidth)
showOrderPosition(idx,null,!0,finish)
plugin.activate(),originalTab&&canTabBeRemoved(originalTab.cloud9pane)&&settings.getBool("user/tabs/@autoclosepanes")&&originalTab.cloud9pane.unload()

}function showSplitPosition(e){for(var el=document.elementFromPoint(e.clientX,e.clientY),aml=apf.findHost(el);aml&&"tab"!=aml.localName;)aml=aml.parentNode


if(!aml)return divSplit.style.display="none",splitTab=null,void(splitDirection=null)
var tab=(aml.getPage()||{}).cloud9tab,dark=!tab||tab.classList.names.indexOf("dark")>-1
divSplit.className="split-area"+(dark?" dark":"")
var rect=aml.$ext.getBoundingClientRect(),left=(e.clientX-rect.left)/rect.width,right=1-left,top=(e.clientY-rect.top)/rect.height,bottom=1-top


if(!isNotSnapped(e,aml.$buttons))return setOrderMode(aml,e),!1
if(0===aml.getPages().length)return divSplit.style.display="none",splitTab=null,void(splitDirection=null)


splitTab=aml
var min=Math.min(left,top,right,bottom),bHeight=pane.$buttons.offsetHeight-1
min==left?(divSplit.style.left=rect.left+"px",divSplit.style.top=bHeight+rect.top+"px",divSplit.style.width=rect.width/2+"px",
divSplit.style.height=rect.height-bHeight+"px",splitDirection="w"):min==right?(divSplit.style.left=rect.left+rect.width/2+"px",
divSplit.style.top=bHeight+rect.top+"px",divSplit.style.width=rect.width/2+"px",divSplit.style.height=rect.height-bHeight+"px",
splitDirection="e"):min==top?(divSplit.style.left=rect.left+"px",divSplit.style.top=bHeight+rect.top+"px",
divSplit.style.width=rect.width+"px",divSplit.style.height=rect.height/2-bHeight+"px",splitDirection="n"):min==bottom&&(divSplit.style.left=rect.left+"px",
divSplit.style.top=rect.top+rect.height/2+"px",divSplit.style.width=rect.width+"px",divSplit.style.height=rect.height/2+"px",
splitDirection="s"),divSplit.style.cursor=splitDirection+"-resize",divSplit.style.display="block"}function mouseMoveSplit(e){
if(!started){if(Math.abs(startX-e.clientX)<4&&Math.abs(startY-e.clientY)<4)return
started=!0,initMouse(),start()}return button.style.left=e.clientX-offsetX+"px",button.style.top=e.clientY-offsetY+"px",
showSplitPosition(e)}function mouseUpSplit(e){if(button.style.left=e.clientX-offsetX+"px",button.style.top=e.clientY-offsetY+"px",
apf.removeListener(document,"mousemove",mouseMoveSplit),apf.removeListener(document,"mouseup",mouseUpSplit),
showSplitPosition(e),splitTab){splitTab=splitTab.cloud9pane
var newTab
"n"==splitDirection?newTab=splitTab.vsplit():"s"==splitDirection?newTab=splitTab.vsplit(!0):"w"==splitDirection?newTab=splitTab.hsplit():"e"==splitDirection&&(newTab=splitTab.hsplit(!0))


var oldTab=pane
plugin.attachTo(newTab,null,!0),pane=newTab.aml,oldTab&&canTabBeRemoved(oldTab.cloud9pane)&&(oldTab.cloud9pane.unload(),
originalTab=null)}else if(tab.parentNode.$buttons.insertBefore(button,originalPosition),originalTab==tab.parentNode){
var idx=tab.parentNode.childNodes.indexOf(tab.nextSibling)
idx==-1?tab.parentNode.childNodes.push(tab):tab.parentNode.childNodes.splice(idx,0,tab)}originalTab&&originalTab!=tab.parentNode&&canTabBeRemoved(originalTab.cloud9pane)&&originalTab.cloud9pane.unload(),
finish()}var tab=plugin.aml,button=tab.$button
if(button){var offsetX,offsetY,startX,startY,dragWidth,mode,rightPadding,originalTab,btnPlus,pane,started,tabWidth,leftPadding,leftPos,start,initMouse,pages,clean,originalPosition,splitDirection,splitTab


button.addEventListener("mousedown",function(e){!tab.parentNode.$order||tab.$dragging||e.button||(tab.$dragging=!0,
startX=e.clientX,startY=e.clientY,initMouse=function(){var rect=button.getBoundingClientRect()
offsetX=startX-rect.left,offsetY=startY-rect.top,button.style.zIndex=1e5,button.style.pointerEvents="none",
setOrderMode(tab.parentNode,e),initMouse=null},started=!1,pane=plugin.pane.aml,originalTab=pane,originalPosition=button.nextSibling,
dragWidth=button.offsetWidth,apf.addListener(document,"mousemove",mouseMoveOrder),apf.addListener(document,"mouseup",mouseUpOrder))

},!0)}}var divSplit,divButton,Plugin=imports.Plugin,ui=imports.ui,anims=imports.anims,settings=imports.settings,prefs=imports.preferences,tabs=imports.tabManager,aceHandle=imports.ace,css=require("text!./style.css"),handle=new Plugin("Ajax.org",main.consumes),plusMargin=11,loaded=!1


handle.on("load",function(){load()}),handle.on("enable",function(){}),handle.on("disable",function(){}),
handle.on("unload",function(){loaded=!1}),handle.freezePublicAPI({get plusMargin(){return plusMargin},
set plusMargin(v){plusMargin=v}}),register(null,{tabinteraction:handle})}return main.consumes=["Plugin","ui","tabManager","ace","anims","settings","preferences"],
main.provides=["tabinteraction"],main})


define("plugins/c9.ide.behaviors/tabs",[],function(require,exports,module){function main(options,imports,register){
function load(){function removeContextInfo(e){e.value||setTimeout(function(){mnuContext.$tab=null,mnuContext.$pane=null

})}if(loaded)return!1
loaded=!0,settings.on("read",function(e){settings.setDefaults("user/general",[["revealfile",!1]])
var list=settings.getJson("state/panecycle")
list&&(list.remove(null),paneList=list)},plugin),settings.on("write",function(e){var list
paneList.changed&&(list=[],paneList.forEach(function(tab,i){tab&&tab.name&&list.push(tab.name)}),settings.setJson("state/panecycle",list),
paneList.changed=!1)},plugin),prefs.add({General:{"Tree & Navigate":{"Reveal Active File in Project Tree":{
type:"checkbox",position:4e3,path:"user/general/@revealfile"}}}},plugin),definition.forEach(function(item){
commands.addCommand({name:item[0],bindKey:{mac:item[1],win:item[2]},group:"Tabs",hint:item[4],isAvailable:item[3],
exec:function(editor,arg){arg&&!arg[0]&&"click"==arg.source&&(arg=[mnuContext.$tab,mnuContext.$pane]),
plugin[item[0]].apply(plugin,arg)}},plugin)}),commands.addCommand({name:"refocusTab",bindKey:{mac:"Esc",
win:"Esc",position:-1e3},group:"Tabs",isAvailable:function(){var el=apf.activeElement
return(!el||"page"!=el.tagName&&"menu"!=el.tagName)&&!!tabs.focussedTab},exec:function(e){tabs.focussedTab&&tabs.focusTab(tabs.focussedTab)

},passEvent:!0},plugin),commands.addCommand({name:"copyFilePath",group:"",isAvailable:function(){var el=apf.popup.getCurrentElement()


return!(el&&el.visible&&el.$tab)||!!(el.$tab.path||el.$tab.relatedPath||el.$tab.editor.getPathAsync)},
exec:function(editor,args){var tab,text="",el=apf.popup.getCurrentElement(),fromContextMenu=args&&"click"==args.source


fromContextMenu&&el?"mnuCtxTree"==el.name?text=tree.selectedNodes.map(function(n){return n.path}).join("\n"):el.$tab&&(tab=el.$tab,
text=tab.path||tab.relatedPath):(tab=tabs.focussedTab,text=tab.path||tab.relatedPath),text?clipboard.clipboardData.setData("text/plain",text):tab&&tab.editor.getPathAsync&&tab.editor.getPathAsync(function(err,text){
!err&&text&&clipboard.clipboardData.setData("text/plain",text)})}},plugin),menus.addItemByPath("File/~",new ui.divider,1e5,plugin),
menus.addItemByPath("File/Close File",new ui.item({command:"closetab"}),11e4,plugin),menus.addItemByPath("File/Close All Files",new ui.item({
command:"closealltabs"}),12e4,plugin),mnuTabs=new ui.menu,menus.addItemByPath("Window/Tabs",mnuTabs,10100,plugin),
menus.addItemByPath("Window/Tabs/Close Pane",new ui.item({command:"closepane"}),100,plugin),menus.addItemByPath("Window/Tabs/Close All Tabs In All Panes",new ui.item({
command:"closealltabs"}),200,plugin),menus.addItemByPath("Window/Tabs/Close All But Current Tab",new ui.item({
command:"closeallbutme"}),300,plugin),menus.addItemByPath("Window/Tabs/~",new ui.divider,1e6,plugin),
menus.addItemByPath("Window/Tabs/Split Pane in Two Rows",new ui.item({command:"vsplit"}),1000100,plugin),
menus.addItemByPath("Window/Tabs/Split Pane in Two Columns",new ui.item({command:"hsplit"}),1000200,plugin),
menus.addItemByPath("Window/Tabs/~",new ui.divider,1000300,plugin),menus.addItemByPath("Window/Tabs/~",new apf.label({
"class":"splits",caption:[["span",{"class":"nosplit"}],["span",{"class":"twovsplit"}],["span",{"class":"twohsplit"
}],["span",{"class":"foursplit"}],["span",{"class":"threeleft"}],["span",{"class":"threeright"}]],onclick:function(e){
var span=e.htmlEvent.target
span&&"SPAN"==span.tagName&&(plugin[span.className](),mnuTabs.hide())}}),1000400,plugin),menus.addItemByPath("Window/~",new ui.divider,9e3,plugin),
menus.addItemByPath("Window/Navigation/",null,9100,plugin),menus.addItemByPath("Window/Navigation/Tab to the Right",new ui.item({
command:"gototabright"}),100,plugin),menus.addItemByPath("Window/Navigation/Tab to the Left",new ui.item({
command:"gototableft"}),200,plugin),menus.addItemByPath("Window/Navigation/Next Tab in History",new ui.item({
command:"nexttab"}),300,plugin),menus.addItemByPath("Window/Navigation/Previous Tab in History",new ui.item({
command:"previoustab"}),400,plugin),menus.addItemByPath("Window/Navigation/~",new ui.divider,500,plugin),
menus.addItemByPath("Window/Navigation/Move Tab to Right",new ui.item({command:"movetabright"}),600,plugin),
menus.addItemByPath("Window/Navigation/Move Tab to Left",new ui.item({command:"movetableft"}),700,plugin),
menus.addItemByPath("Window/Navigation/Move Tab to Up",new ui.item({command:"movetabup"}),800,plugin),
menus.addItemByPath("Window/Navigation/Move Tab to Down",new ui.item({command:"movetabdown"}),900,plugin),
menus.addItemByPath("Window/Navigation/~",new ui.divider,1e3,plugin),menus.addItemByPath("Window/Navigation/Go to Pane to Right",new ui.item({
command:"gotopaneright"}),1100,plugin),menus.addItemByPath("Window/Navigation/Go to Pane to Left",new ui.item({
command:"gotopaneleft"}),1200,plugin),menus.addItemByPath("Window/Navigation/Go to Pane to Up",new ui.item({
command:"gotopaneup"}),1300,plugin),menus.addItemByPath("Window/Navigation/Go to Pane to Down",new ui.item({
command:"gotopanedown"}),1400,plugin),menus.addItemByPath("Window/Navigation/~",new ui.divider,1500,plugin),
menus.addItemByPath("Window/Navigation/Next Pane in History",new ui.item({command:"nextpane"}),1600,plugin),
menus.addItemByPath("Window/Navigation/Previous Pane in History",new ui.item({command:"previouspane"}),1700,plugin),
menus.addItemByPath("Window/~",new ui.divider,1e4,plugin),mnuTabs.addEventListener("prop.visible",function(e){
e.value?(mnuTabs.opener&&"tab"==mnuTabs.opener.parentNode.localName&&(mnuContext.$pane=mnuTabs.opener.parentNode.cloud9pane,
mnuContext.$tab=mnuContext.$pane.getTab()),updateTabMenu()):removeContextInfo(e),mnuTabs.opener&&"tabmenubtn"==mnuTabs.opener["class"]?apf.setStyleClass(mnuTabs.$ext,"tabsContextMenu"):apf.setStyleClass(mnuTabs.$ext,"",["tabsContextMenu"])

},!0),menus.addItemByPath("context/tree/Copy file path",new ui.item({command:"copyFilePath"}),800,plugin),
menus.addItemByPath("context/tree/~",new ui.divider({}),850,menus),mnuContext=new Menu({id:"mnuContext"
},plugin).aml,menus.addItemByPath("context/tabs/",mnuContext,0,plugin),mnuContext.on("prop.visible",removeContextInfo,!1),
menus.addItemByPath("Reveal in File Tree",new ui.item({command:"revealtab"}),100,mnuContext,plugin),menus.addItemByPath("~",new ui.divider,200,mnuContext,plugin),
menus.addItemByPath("Copy file path",new ui.item({command:"copyFilePath"}),230,mnuContext,plugin),menus.addItemByPath("~",new ui.divider,260,mnuContext,plugin),
menus.addItemByPath("Close Tab",new ui.item({command:"closetab"}),300,mnuContext,plugin),menus.addItemByPath("Close All Tabs",new ui.item({
command:"closepane"}),450,mnuContext,plugin),menus.addItemByPath("Close Other Tabs",new ui.item({command:"closeallbutme"
}),500,mnuContext,plugin),menus.addItemByPath("Close Tabs to the Left",new ui.item({command:"closealltotheleft"
}),600,mnuContext,plugin),menus.addItemByPath("Close Tabs to the Right",new ui.item({command:"closealltotheright"
}),700,mnuContext,plugin),menus.addItemByPath("~",new ui.divider,750,mnuContext,plugin),menus.addItemByPath("Split Pane in Two Rows",new ui.item({
command:"vsplit"}),800,mnuContext,plugin),menus.addItemByPath("Split Pane in Two Columns",new ui.item({
command:"hsplit"}),900,mnuContext,plugin),menus.addItemByPath("~",new ui.divider,1e3,mnuContext,plugin),
menus.addItemByPath("Duplicate View",new ui.item({command:"clonetab"}),1010,mnuContext,plugin),menus.addItemByPath("View/~",new ui.divider,800,plugin),
menus.addItemByPath("View/Layout/",null,900,plugin),menus.addItemByPath("View/Layout/Single",new ui.item({
command:"nosplit"}),100,mnuContext,plugin),menus.addItemByPath("View/Layout/Vertical Split",new ui.item({
command:"twovsplit"}),100,mnuContext,plugin),menus.addItemByPath("View/Layout/Horizontal Split",new ui.item({
command:"twohsplit"}),200,mnuContext,plugin),menus.addItemByPath("View/Layout/Cross Split",new ui.item({
command:"foursplit"}),300,mnuContext,plugin),menus.addItemByPath("View/Layout/Split 1:2",new ui.item({
command:"threeright"}),400,mnuContext,plugin),menus.addItemByPath("View/Layout/Split 2:1",new ui.item({
command:"threeleft"}),500,mnuContext,plugin),mnuEditors=tabs.getElement("mnuEditors")
var div,label
div=menus.addItemToMenu(mnuEditors,new ui.divider,1e6,plugin),label=menus.addItemToMenu(mnuEditors,new ui.item({
caption:"Recently Closed Tabs",disabled:!0}),1000001,plugin),menuClosedItems.hide=function(){div.hide(),
label.hide()},menuClosedItems.show=function(){div.show(),label.show()},menuClosedItems.hide(),tabs.on("paneCreate",function(e){
var pane=e.pane.aml
pane.on("contextmenu",function(e){if(e.currentTarget&&(mnuContext.$tab="page"==e.currentTarget.tagName?e.currentTarget.cloud9tab:null,
mnuContext.$pane=(mnuContext.$tab||0).pane||e.currentTarget.cloud9pane),ui.isChildOf(pane.$buttons,e.htmlEvent.target,!0))return mnuContext.display(e.x,e.y),
!1})
var meta=e.pane.meta
meta.accessList||(meta.accessList=[]),meta.accessList.toJson||(meta.accessList.toJson=accessListToJson)

},plugin),tabs.on("tabBeforeClose",function(e){var tab=e.tab,event=e.htmlEvent||{}
return event.shiftKey?(closealltabs(),!1):event.altKey?(closeallbutme(tab),!1):void 0},plugin),tabs.on("tabAfterClose",function(e){
var accessList=e.tab.pane.meta.accessList
tabs.focussedTab==e.tab&&accessList[1]&&(e.tab.pane.aml.nextTabInLine=accessList[1].aml)},plugin),tabs.on("tabBeforeReparent",function(e){
var lastList=e.lastPane.meta.accessList,accessList=e.tab.pane.meta.accessList
lastList.splice(lastList.indexOf(e.tab),1),e.tab==tabs.focussedTab?accessList.unshift(e.tab):accessList.push(e.tab),
tabs.focussedTab==e.tab&&lastList[0]&&(e.lastPane.aml.nextTabInLine=lastList[0].aml)},plugin),tabs.on("tabAfterClose",function(e){
var tab=e.tab
tab.document.meta.preview||(addTabToClosedMenu(tab),tab.pane.meta.accessList.remove(tab),paneList.remove(tab))

},plugin),tabs.on("tabCreate",function(e){var tab=e.tab
if(tab.title)for(var path=tab.path||tab.editorType,i=menuClosedItems.length-1;i>=0;i--)menuClosedItems[i].path==path&&(menuClosedItems.splice(i,1)[0].destroy(!0,!0),
menuClosedItems.length||menuClosedItems.hide())
if(!tab.document.meta.preview){var idx,accessList=tab.pane.meta.accessList
accessList.indexOf(tab)==-1&&(idx=accessList.indexOf(tab.name),idx==-1?tab==tabs.focussedTab?accessList.unshift(tab):accessList.push(tab):accessList[idx]=tab),
paneList.indexOf(tab)==-1&&(idx=paneList.indexOf(tab.name),idx==-1?tab.isActive()&&addToPaneList(tab):paneList[idx]=tab)

}},plugin),tabs.on("focusSync",function(e){var tab=e.tab
if(tab.loaded){if(!cycleKeyPressed){var accessList=tab.pane.meta.accessList
accessList.remove(tab),accessList.unshift(tab),accessList.changed=!0,addToPaneList(tab,!0),paneList.changed=!0,
settings.save()}tree.area&&"tree"==tree.area.activePanel&&settings.getBool("user/general/@revealfile")&&revealtab(tab,!0)

}},plugin),tabs.on("tabAfterActivate",function(e){var tab=e.tab
if(tab!=tabs.focussedTab&&tab.loaded&&!cycleKeyPressed){var accessList=tab.pane.meta.accessList
accessList.remove(tab),accessList.splice(1,0,tab),accessList.changed=!0,addToPaneList(tab,2),paneList.changed=!0,
settings.save()}},plugin),apf.addEventListener("keydown",function(eInfo){17!=eInfo.keyCode&&18!=eInfo.keyCode||(cycleKeyPressed=!0)

}),apf.addEventListener("keyup",function(eInfo){if(17==eInfo.keyCode||18==eInfo.keyCode){if(cycleKeyPressed=!1,
dirtyNextTab){var tab=tabs.focussedTab,accessList=tab.pane.meta.accessList
accessList[0]!=tab&&(accessList.remove(tab),accessList.unshift(tab),accessList.changed=!0,settings.save()),
dirtyNextTab=!1}if(dirtyNextPane){accessedPane=0
var tab=tabs.focussedTab
paneList[accessedPane]!=tab&&tab&&(paneList.remove(tab),paneList.unshift(tab),paneList.changed=!0,settings.save()),
dirtyNextPane=!1}}}),createLayoutMenus()}function addToPaneList(tab,first){var found,pane=tab.pane
paneList.every(function(tab){return!tab||!tab.pane||tab.pane!=pane||(found=tab,!1)}),found&&paneList.remove(found),
2==first?paneList.splice(1,0,tab):first?paneList.unshift(tab):paneList.push(tab)}function accessListToJson(){
var list=[]
return this.forEach(function(tab,i){tab&&tab.name&&list.push(tab.name)}),list}function clonetab(tab){
tab||(tab=mnuContext.$tab||tabs.focussedTab)
var pane
tabs.getTabs().every(function(tab){return!tab.document.meta.cloned||(pane=tab.pane,!1)}),pane&&pane!=tab.pane||(pane=tab.pane.hsplit(!0)),
tabs.clone(tab,pane,function(err,tab){})}function closetab(tab){tab||(tab=mnuContext.$tab||tabs.focussedTab)


var pages=tabs.getTabs(),isLast=pages[pages.length-1]==tab
return tab.close(),tabs.resizePanes(isLast),!1}function closealltabs(callback){callback="function"==typeof callback?callback:null,
changedTabs=[],unchangedTabs=[]
for(var pages=tabs.getTabs(),i=0,l=pages.length;i<l;i++)closepage(pages[i],callback)
checkTabRender(callback)}function closeallbutme(me,pages,callback){if(me||(me=mnuContext.$tab||tabs.focussedTab),
changedTabs=[],unchangedTabs=[],!(pages&&pages instanceof Array)){var container=me&&me.aml&&me.aml.parentNode||tabs.container


pages=tabs.getTabs(container)}for(var tab,i=0,l=pages.length;i<l;i++)tab=pages[i],tab!==me&&closepage(tab,callback)


tabs.resizePanes(),checkTabRender(callback)}function closepage(tab,callback){var doc=tab.document
!doc.changed||doc.meta.newfile&&!doc.value?unchangedTabs.push(tab):changedTabs.push(tab)}function checkTabRender(callback){
function done(){callback&&callback(),setTimeout(function(){changedTabs=[],unchangedTabs=[]})}save.saveAllInteractive(changedTabs,function(result){
result!=save.CANCEL?(changedTabs.forEach(function(tab){tab.unload()}),closeUnchangedTabs(done)):done()

})}function closeUnchangedTabs(callback){for(var tab,i=0,l=unchangedTabs.length;i<l;i++)tab=unchangedTabs[i],
tab.close(!0)
callback&&callback()}function closealltotheright(tab){tab||(tab=mnuContext.$tab||tabs.focussedTab)
var pages=tab.pane.getTabs(),currIdx=pages.indexOf(tab)
closeallbutme(tab,pages.slice(currIdx))}function closealltotheleft(tab){tab||(tab=mnuContext.$tab||tabs.focussedTab)


var pages=tab.pane.getTabs(),currIdx=pages.indexOf(tab)
closeallbutme(tab,pages.slice(0,currIdx))}function nexttab(dir,keepOrder){if(1!==tabs.getTabs().length){
var tab=tabs.focussedTab,accessList=tab.pane.meta.accessList,index=accessList.indexOf(tab)
index+=dir||1,index>=accessList.length?index=0:index<0&&(index=accessList.length-1)
var next=accessList[index]
if("object"!=typeof next||!next.pane.visible)return nexttab(dir,keepOrder)
keepOrder&&0==cycleKeyPressed?(cycleKeyPressed=!0,tabs.focusTab(next,null,!0),cycleKeyPressed=!1):tabs.focusTab(next,null,!0),
dirtyNextTab=!keepOrder}}function previoustab(dir,keepOrder){nexttab(dir||-1,keepOrder)}function nextpane(){
return $nextPane(1)}function previouspane(){return $nextPane(-1)}function $nextPane(dir){if(1!==tabs.getPanes().length)for(var l=paneList.length,i=1;i<=l;i++){
var index=(accessedPane+dir*i)%l,next=paneList[index]
if("object"==typeof next&&next.pane.visible){if(next.pane.activeTab!=tabs.focussedTab)return accessedPane=index,
tabs.focusTab(next.pane.activeTab,null,!0),dirtyNextPane=!0,next.pane
console.error("error in panelist")}}}function gotopaneleft(){return $goToPane("left")}function gotopaneright(){
return $goToPane("right")}function gotopanedown(){return $goToPane("down")}function gotopaneup(){return $goToPane("up")

}function $goToPane(direction){var newPane=findPaneToGoTo(direction)
if(newPane){var activeTab=newPane.activeTab
tabs.focusTab(activeTab)}}function getPaneDimensions(pane){var element=pane.container,size=getElementSize(element),dimensions={
x:getElementOffset(element,"Left"),y:getElementOffset(element,"Top"),width:size.width,height:size.height
}
return dimensions}function getElementOffset(element,type){var offset=0
do isNaN(element["offset"+type])||(offset+=element["offset"+type])
while(element=element.offsetParent)
return offset}function getElementSize(element){var computedStyle=window.getComputedStyle(element)
return{width:parseInt(computedStyle.width,10),height:parseInt(computedStyle.height,10)}}function findBoxToGoTo(boxes,currentBox,direction){
var possibleBoxes=[]
switch(direction){case"left":if(possibleBoxes=boxes.filter(function(box){return box.x<currentBox.x}).filter(areBoxesInLineVertically.bind(null,currentBox)),
!possibleBoxes.length)return null
var chosenBox=possibleBoxes.reduce(function(prev,cur){return!prev||cur.x>prev.x?cur:cur.x==prev.x&&cur.y<prev.y?cur:prev

})
return chosenBox
case"right":if(possibleBoxes=boxes.filter(function(box){return box.x>currentBox.x}).filter(areBoxesInLineVertically.bind(null,currentBox)),
!possibleBoxes.length)return null
var chosenBox=possibleBoxes.reduce(function(prev,cur){return!prev||cur.x<prev.x?cur:cur.x==prev.x&&cur.y<prev.y?cur:prev

})
return chosenBox
case"up":if(possibleBoxes=boxes.filter(function(box){return box.y<currentBox.y}).filter(areBoxesInLineHorizontally.bind(null,currentBox)),
!possibleBoxes.length)return null
var chosenBox=possibleBoxes.reduce(function(prev,cur){return!prev||cur.y>prev.y?cur:cur.y==prev.y&&cur.x<prev.x?cur:prev

})
return chosenBox
case"down":if(possibleBoxes=boxes.filter(function(box){return box.y>currentBox.y}).filter(areBoxesInLineHorizontally.bind(null,currentBox)),
!possibleBoxes.length)return null
var chosenBox=possibleBoxes.reduce(function(prev,cur){return!prev||cur.y<prev.y?cur:cur.y==prev.y&&cur.x<prev.x?cur:prev

})
return chosenBox}}function areBoxesInLineVertically(box1,box2){return!(box1.y+box1.height<box2.y||box2.y+box2.height<box1.y)

}function areBoxesInLineHorizontally(box1,box2){return!(box1.x+box1.width<box2.x||box2.x+box2.width<box1.x)

}function findPaneToGoTo(direction){var panes=tabs.getPanes()
if(tabs.focussed&&tabs.focussedTab){var currentPane=tabs.focussedTab.pane
if(currentPane){var boxes=panes.map(function(pane){return getPaneDimensions(pane)}),currentBox=getPaneDimensions(currentPane),newBox=findBoxToGoTo(boxes,currentBox,direction)


if(newBox){var newPane=null
return panes.forEach(function(pane){var paneDimensions=getPaneDimensions(pane)
paneDimensions.x==newBox.x&&paneDimensions.y==newBox.y&&(newPane=pane)}),newPane}}}}function gototabright(opts){
return cycleTab("right",opts)}function gototableft(opts){return cycleTab("left",opts)}function cycleTab(dir,opts){
var curr=tabs.focussedTab,pages=curr&&curr.pane.getTabs()
if(pages&&1!=pages.length){opts&&opts.editorType&&(pages=pages.filter(function(p){return p.editorType==opts.editorType

}))
var tab,currIdx=pages.indexOf(curr),start=currIdx
do{var idx=currIdx
switch(dir){case"right":idx++
break
case"left":idx--
break
case"first":idx=0
break
case"last":idx=pages.length-1
break
default:idx--}if(idx<0&&(idx=pages.length-1),idx>pages.length-1&&(idx=0),start==idx)return
tab=pages[idx]}while(!tab.pane.visible)
return tab.pane.visible&&tabs.focusTab(tab,null,!0),!1}}function movetabright(){hmoveTab("right")}function movetableft(){
hmoveTab("left")}function movetabup(){vmoveTab("up")}function movetabdown(){vmoveTab("down")}function hmoveTab(dir){
var bRight="right"==dir,tab=tabs.focussedTab
if(tab){var pages=tab.pane.getTabs(),idx=pages.indexOf(tab)+(bRight?2:-1)
return idx<0||idx>pages.length?tab.pane.moveTabToSplit(tab,dir):tab.attachTo(tab.pane,pages[idx],null,!0),
tabs.focusTab(tab),!1}}function vmoveTab(dir){var tab=tabs.focussedTab
if(tab)return tab.pane.moveTabToSplit(tab,dir),tabs.focusTab(tab),!1}function tab1(){return showTab(1)

}function tab2(){return showTab(2)}function tab3(){return showTab(3)}function tab4(){return showTab(4)

}function tab5(){return showTab(5)}function tab6(){return showTab(6)}function tab7(){return showTab(7)

}function tab8(){return showTab(8)}function tab9(){return showTab(9)}function tab0(){return showTab(10)

}function showTab(idx){var pages=[]
tabs.getPanes().forEach(function(pane){pages=pages.concat(pane.getTabs())}),pages=pages.filter(function(tab){
return tab.title})
var tab=pages[idx-1]
return!!tab&&(tabs.focusTab(tab,null,!0),!1)}function revealtab(tab,noFocus){return tab&&!tab.command||(tab=tabs.focussedTab),
!!tab&&void revealInTree(tab,noFocus)}function revealInTree(tab,noFocus){function done(err,path){return err||!path?console.error(err):void tree.expand(path,function(err){
err||tree.select(path),tree.scrollToSelection()})}panels.activate("tree")
var path=tab.path||tab.relatedPath
path?done(null,path):tab.editor.getPathAsync&&tab.editor.getPathAsync(done),noFocus||tree.focus()}function canTabBeRemoved(pane,min){
if(!pane||pane.getTabs().length>(min||0))return!1
for(var containers=tabs.containers,i=0;i<containers.length;i++)if(ui.isChildOf(containers[i],pane.aml))return containers[i].getElementsByTagNameNS(apf.ns.aml,"tab").length>1


return!1}function closepane(tab,pane){if(tab||(tab=tabs.focussedTab),pane||(pane=tab.pane),pane){var pages=pane.getTabs()


if(!pages.length)return void(canTabBeRemoved(pane)&&pane.unload())
changedTabs=[],unchangedTabs=[],menuClosedItems.ignore=!0
var state=[],type=pane.aml.parentNode.localName,nodes=pane.aml.parentNode.childNodes.filter(function(p){
return"splitter"!=p.localName})
state.title=pages.length+" Tabs",state.type="vsplitbox"==type?"vsplit":"hsplit",state.far=1==nodes.indexOf(pane.aml),
state.sibling=nodes[state.far?0:1],state.getState=function(){return state},state.restore=$restoreTabGroup,
state.paneName=pane.name,state.document={meta:{}},pages.forEach(function(tab){state.push(tab.getState()),
closepage(tab)}),tabs.resizePanes(),checkTabRender(function(){canTabBeRemoved(pane)&&pane.unload(),menuClosedItems.ignore=!1,
addTabToClosedMenu(state)})}}function $restoreTabGroup(state){var pane=tabs.findPane(state.paneName)||{},oldpane=state.pane,newpane=0===oldpane.getTabs().length?oldpane:oldpane[state.type](state.far,null,pane.aml)


state.forEach(function(s){s.pane=newpane,tabs.open(s,function(){})})}function hsplit(tab,pane){tab||(tab=tabs.focussedTab),
tab&&(pane=tab.pane)
var newpane=pane.hsplit(!0)
pane.getTabs().length>1&&tab.attachTo(newpane)}function vsplit(tab,pane){tab||(tab=tabs.focussedTab),
tab&&(pane=tab.pane)
var newpane=pane.vsplit(!0)
pane.getTabs().length>1&&tab.attachTo(newpane)}function nosplit(){for(var pane,panes=tabs.getPanes(tabs.container),first=panes[0],i=1,li=panes.length;i<li;i++){
for(var pages=(pane=panes[i]).getTabs(),j=0,lj=pages.length;j<lj;j++)pages[j].attachTo(first,null,!0)


pane.unload()}}function twovsplit(hsplit){var panes=tabs.getPanes(tabs.container)
if(2==panes.length&&panes[0].aml.parentNode.localName==(hsplit?"hsplitbox":"vsplitbox"))return panes
if(1==panes.length){var newtab=panes[0][hsplit?"hsplit":"vsplit"](!0)
return[panes[0],newtab]}for(var c=tabs.containers[0].firstChild.childNodes.filter(function(f){return"splitter"!=f.localName

}),right=c[1].getElementsByTagNameNS(apf.ns.aml,"tab"),i=1,l=panes.length;i<l;i++)panes[i].unload()
var newtab=panes[0][hsplit?"hsplit":"vsplit"](!0)
return right.forEach(function(tab){tab.cloud9tab&&tab.cloud9tab.attachTo(newtab,null,!0)}),[panes[0],newtab]

}function twohsplit(){return twovsplit(!0)}function foursplit(){var panes=twohsplit()
panes[0].vsplit(!0),panes[1].vsplit(!0)}function threeleft(){var panes=twohsplit()
panes[0].vsplit(!0)}function threeright(){var panes=twohsplit()
panes[1].vsplit(!0)}function checkReopenedTab(e){var tab=e.tab
tab.path&&fs.stat(tab.path,function(err,stat){if(!err&&tab.document.meta.timestamp<stat.mtime){var doc=tab.document


question("File Changed",tab.path+" has been changed on disk.","Would you like to reload this file?",function(){
tabs.reload(tab,function(){})},function(){doc.undoManager.bookmark(-2)},{merge:!1,all:!1})}})}function addTabToClosedMenu(tab){
if(!menuClosedItems.ignore&&!tab.document.meta.preview&&!tab.document.meta.cloned){var state=tab.getState(),restore=tab.restore,path=tab.path||tab.editorType


if(!restore)for(var i=menuClosedItems.length-1;i>=0;i--)menuClosedItems[i].path==path&&menuClosedItems.splice(i,1)[0].destroy(!0,!0)


var item=new ui.item({caption:tab.title,path:path,style:"padding-left:35px",onclick:function(e){state.active=!0,
state.pane=this.parentNode.pane,tabs.on("open",checkReopenedTab),restore?restore(state):tabs.open(state,function(){}),
tabs.off("open",checkReopenedTab),menuClosedItems.remove(item),item.destroy(!0,!0),0===menuClosedItems.length&&menuClosedItems.hide()

}})
item.path=path,menuClosedItems.push(item)
var index=menuClosedItems.index=(menuClosedItems.index||0)+1
menus.addItemToMenu(mnuEditors,item,2e6-index,!1),menuClosedItems.show(),menuClosedItems.length>10&&menuClosedItems.shift().destroy(!0,!0),
tab=null}}function updateTabMenu(force){var pages=[]
tabs.getPanes().forEach(function(pane){pages=pages.concat(pane.getTabs())})
var length=Math.min(10,pages.length),start=1e3
if(menuItems.forEach(function(item){item.destroy(!0,!0)}),menuItems=[],pages.length){var mnu,tab
menus.addItemToMenu(mnuTabs,mnu=new ui.divider,start,!1),menuItems.push(mnu)
for(var i=0;i<length;i++)tab=pages[i],tab.title&&(menus.addItemToMenu(mnuTabs,mnu=new ui.item({caption:tab.title.replace(/[\/]/g,"\u2044"),
relPage:tab,command:"tab"+(9==i?0:i+1)}),start+i+1,!1),menuItems.push(mnu))
pages.length>length&&(menus.addItemToMenu(mnuTabs,mnu=new ui.item({caption:"More...",onclick:function(){
commands.exec("toggleOpenfiles",null,{forceOpen:!0})}}),start+length+1,!1),menuItems.push(mnu)),tab=pages=null

}}function reopenLastTab(){var item=menuClosedItems[menuClosedItems.length-1]
item&&item.getAttribute("onclick").call(item)}function createLayoutMenus(){function getAutoSaveName(){
return(new Date).toLocaleString()+" ["+tabs.getTabs().length+" tabs]"}function rebuildLayoutMenu(err,stats){
menus.remove(LAYOUT_MENU_PATH)
var c=0
if(menus.addItemByPath(LAYOUT_MENU_PATH+"Save...",new ui.item({command:"savePaneLayout"}),c+=100,plugin),
menus.addItemByPath(LAYOUT_MENU_PATH+"Save And Close All...",new ui.item({command:"savePaneLayoutAndCloseTabs"
}),c+=100,plugin),menus.addItemByPath(LAYOUT_MENU_PATH+"~",new ui.divider({}),c+=100,plugin),menus.addItemByPath(LAYOUT_MENU_PATH+"Show Saved Layouts in File Tree",new ui.item({
onclick:function(){revealInTree({path:SAVED_LAYOUTS_PATH})}}),c+=100,plugin),menus.addItemByPath(LAYOUT_MENU_PATH+"~",new ui.divider({}),c+=100,plugin),
err){if("ENOENT"==err.code)return
return menus.addItemByPath(LAYOUT_MENU_PATH+"Error loading saved layouts",new ui.item({disabled:!0}),c+=100,plugin)

}if(!stats)return menus.addItemByPath(LAYOUT_MENU_PATH+"loading...",new ui.item({disabled:!0}),c+=100,plugin)


for(var i=0;i<stats.length;i++){var stat=stats[i],caption=stat.name.replace(/.tabstate$/,"")
menus.addItemByPath(LAYOUT_MENU_PATH+caption,new ui.item({value:stat}),c+=100,plugin)}}var LAYOUT_MENU_PATH="Window/Saved Layouts/",SAVED_LAYOUTS_PATH="/.c9/saved-layouts/"


commands.addCommand({name:"savePaneLayout",group:"Window",bindKey:{},exec:function(editor,args){var state=tabs.getState(null,!0),stateName=prompt("Name your layout",getAutoSaveName())


if(stateName){var sanitizedStateName=stateName.trim().replace(/[\\\/:\r\n~]|\.\./g,"-")+".tabstate"
fs.writeFile(SAVED_LAYOUTS_PATH+sanitizedStateName,JSON.stringify(state,null,"\t"),function(err){if(err)return alert(err)

})}}},plugin),commands.addCommand({name:"savePaneLayoutAndCloseTabs",group:"Window",bindKey:{},exec:function(editor,args){
commands.exec("savePaneLayout"),tabs.setState(null,function(){})}},plugin),menus.addItemByPath(LAYOUT_MENU_PATH,new ui.menu({
"onprop.visible":function(e){e.value&&(rebuildLayoutMenu(),fs.readdir(SAVED_LAYOUTS_PATH,function(err,files){
rebuildLayoutMenu(err,files)}))},onitemclick:function(e){var stat=e.relatedNode&&e.relatedNode.value
stat&&stat.name&&fs.readFile(SAVED_LAYOUTS_PATH+stat.name,function(err,contents){if(err)return alert(err)


try{contents=JSON.parse(contents)}catch(e){return alert(e)}tabs.setState(null,function(){}),tabs.setState(contents,function(err){
if(err)return alert(err)})})}}),10050,plugin)}var mnuContext,mnuEditors,mnuTabs,cycleKeyPressed,changedTabs,unchangedTabs,dirtyNextTab,dirtyNextPane,Plugin=imports.Plugin,settings=imports.settings,tabs=imports.tabManager,menus=imports.menus,Menu=imports.Menu,commands=imports.commands,clipboard=imports.clipboard,tree=imports.tree,save=imports.save,panels=imports.panels,ui=imports.ui,fs=imports.fs,prefs=imports.preferences,question=imports["dialog.question"].show,plugin=new Plugin("Ajax.org",main.consumes),menuItems=[],menuClosedItems=[],paneList=[],accessedPane=0,ACTIVEPAGE=function(){
return tabs.focussedTab},ACTIVEPATH=function(){var tab=mnuContext.$tab||tabs.focussedTab
return tab&&(tab.path||tab.relatedPath||tab.editor.getPathAsync)},MORETABS=function(){return tabs.getTabs().length>1

},MORETABSINPANE=function(){return tabs.focussedTab&&tabs.focussedTab.pane.getTabs().length>1},MOREPANES=function(){
return tabs.getPanes().length>1},movekey="Command-Option-Shift",definition=[["clonetab","","",ACTIVEPAGE,"create a new tab with a view on the same file"],["closetab","Option-W","Alt-W",ACTIVEPAGE,"close the tab that is currently active"],["closealltabs","Option-Shift-W","Alt-Shift-W",ACTIVEPAGE,"close all opened tabs"],["closeallbutme","Option-Ctrl-W","Ctrl-Alt-W",MORETABS,"close all opened tabs, except the tab that is currently active"],["gototabright","Command-]","Ctrl-]",MORETABSINPANE,"navigate to the next tab, right to the tab that is currently active"],["gototableft","Command-[","Ctrl-[",MORETABSINPANE,"navigate to the next tab, left to the tab that is currently active"],["movetabright",movekey+"-Right","Ctrl-Meta-Right",MORETABS,"move the tab that is currently active to the right. Will create a split tab to the right if it's the right most tab."],["movetableft",movekey+"-Left","Ctrl-Meta-Left",MORETABS,"move the tab that is currently active to the left. Will create a split tab to the left if it's the left most tab."],["movetabup",movekey+"-Up","Ctrl-Meta-Up",MORETABS,"move the tab that is currently active to the up. Will create a split tab to the top if it's the top most tab."],["movetabdown",movekey+"-Down","Ctrl-Meta-Down",MORETABS,"move the tab that is currently active to the down. Will create a split tab to the bottom if it's the bottom most tab."],["tab1","Command-1","Ctrl-1",null,"navigate to the first tab"],["tab2","Command-2","Ctrl-2",null,"navigate to the second tab"],["tab3","Command-3","Ctrl-3",null,"navigate to the third tab"],["tab4","Command-4","Ctrl-4",null,"navigate to the fourth tab"],["tab5","Command-5","Ctrl-5",null,"navigate to the fifth tab"],["tab6","Command-6","Ctrl-6",null,"navigate to the sixth tab"],["tab7","Command-7","Ctrl-7",null,"navigate to the seventh tab"],["tab8","Command-8","Ctrl-8",null,"navigate to the eighth tab"],["tab9","Command-9","Ctrl-9",null,"navigate to the ninth tab"],["tab0","Command-0","Ctrl-0",null,"navigate to the tenth tab"],["revealtab","Command-Shift-L","Ctrl-Shift-L",ACTIVEPATH,"reveal current tab in the file tree"],["nexttab","Option-Tab","Ctrl-Tab|Alt-`",MORETABSINPANE,"navigate to the next tab in the stack of accessed tabs"],["previoustab","Option-Shift-Tab","Ctrl-Shift-Tab|Alt-Shift-`",MORETABSINPANE,"navigate to the previous tab in the stack of accessed tabs"],["nextpane","Option-ESC","Ctrl-`",MOREPANES,"navigate to the next tab in the stack of panes"],["previouspane","Option-Shift-ESC","Ctrl-Shift-`",MOREPANES,"navigate to the previous tab in the stack of panes"],["gotopaneright","Ctrl-Meta-Right","Ctrl-Meta-Right",null,"navigate to the pane on the right"],["gotopaneleft","Ctrl-Meta-Left","Ctrl-Meta-Left",null,"navigate to the pane on the left"],["gotopaneup","Ctrl-Meta-Up","Ctrl-Meta-Up",null,"navigate to the pane on the top"],["gotopanedown","Ctrl-Meta-Down","Ctrl-Meta-Down",null,"navigate to the pane on the bottom"],["reopenLastTab","Option-Shift-T","Alt-Shift-T",function(){
return menuClosedItems.length},"reopen last closed tab"],["closealltotheright","","",function(){var tab=mnuContext.$tab||mnuContext.$pane&&mnuContext.$pane.getTab()


if(tab){var pages=tab.pane.getTabs()
return pages.pop()!=tab}},"close all tabs to the right of the focussed tab"],["closealltotheleft","","",function(){
var tab=mnuContext.$tab||mnuContext.$pane&&mnuContext.$pane.getTab()
if(tab){var pages=tab.pane.getTabs()
return pages.length>1&&pages[0]!=tab}},"close all tabs to the left of the focussed tab"],["closepane","Command-Ctrl-W","Ctrl-W",function(){
return mnuContext.$tab||mnuContext.$pane||tabs.getTabs().length},"close this pane"],["nosplit","","",null,"no split"],["hsplit","","",null,"split the current pane in two columns and move the active tab to it"],["vsplit","","",null,"split the current pane in two rows and move the active tab to it"],["twovsplit","","",null,"create a two pane row layout"],["twohsplit","","",null,"create a two pane column layout"],["foursplit","","",null,"create a four pane layout"],["threeleft","","",null,"create a three pane layout with the stack on the left side"],["threeright","","",null,"create a three pane layout with the stack on the right side"]],loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){menuItems.forEach(function(item){item.destroy(!0,!0)}),menuItems=[],menuClosedItems.forEach(function(item){
item.destroy(!0,!0)}),menuClosedItems.length=0,mnuContext=null,mnuEditors=null,mnuTabs=null,accessedTab=null,
paneList=null,accessedPane=null,cycleKeyPressed=null,changedTabs=null,unchangedTabs=null,dirtyNextTab=null,
dirtyNextPane=null,loaded=!1}),plugin.freezePublicAPI({get contextMenu(){return mnuContext},clonetab:clonetab,
closetab:closetab,closealltabs:closealltabs,closeallbutme:closeallbutme,gototabright:gototabright,gototableft:gototableft,
movetabright:movetabright,movetableft:movetableft,movetabup:movetabup,movetabdown:movetabdown,tab1:tab1,
tab2:tab2,tab3:tab3,tab4:tab4,tab5:tab5,tab6:tab6,tab7:tab7,tab8:tab8,tab9:tab9,tab0:tab0,revealtab:revealtab,
reopenLastTab:reopenLastTab,nexttab:nexttab,previoustab:previoustab,closealltotheright:closealltotheright,
closealltotheleft:closealltotheleft,closepane:closepane,hsplit:hsplit,vsplit:vsplit,nosplit:nosplit,twovsplit:twovsplit,
twohsplit:twohsplit,foursplit:foursplit,threeleft:threeleft,threeright:threeright,nextpane:nextpane,previouspane:previouspane,
gotopaneleft:gotopaneleft,gotopaneright:gotopaneright,gotopanedown:gotopanedown,gotopaneup:gotopaneup,
cycleTab:cycleTab}),register(null,{tabbehavior:plugin})}return main.consumes=["Plugin","settings","menus","preferences","commands","tabManager","ui","save","panels","tree","Menu","fs","dialog.question","clipboard"],
main.provides=["tabbehavior"],main})


define("plugins/c9.ide.clipboard/html5",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&void(loaded=!0)}function clear(){if(nativeObject)nativeObject.clearData()
else{var data=get("")
data!==!1&&set("","",data.types)}}function set(type,data,list){if(!notSupported(type)){if(nativeObject)return handleClipboardData(nativeObject,type,data),
!0
var setData=function(e){list&&list.forEach(function(type){handleClipboardData(e.clipboardData,type,data)

}),handleClipboardData(e.clipboardData,type,data),e.preventDefault(),e.stopPropagation()}
document.addEventListener("copy",setData,!0)
var result=execCommand("copy")
return document.removeEventListener("copy",setData,!0),!!result}}function get(type,full){if(!notSupported(type)){
if(!full&&nativeObject)return handleClipboardData(nativeObject,type)
var data,getData=function(e){data=full?e.clipboardData:handleClipboardData(e.clipboardData,type),e.preventDefault(),
e.stopPropagation()}
document.addEventListener("paste",getData,!0)
var result=execCommand("paste")
return document.removeEventListener("paste",getData,!0),!!result&&data}}function execCommand(commandName){
try{return document.execCommand(commandName,null,null)}catch(e){return!1}}function notSupported(type){
return!/text($|\/)/.test(type)}function handleClipboardData(clipboardData,type,data,forceIEMime){if(clipboardData){
var mime=forceIEMime?"Text":type
try{return data?clipboardData.setData(mime,data)!==!1:clipboardData.getData(mime)}catch(e){if(!forceIEMime)return handleClipboardData(clipboardData,type,data,!0)

}}}function wrap(obj){nativeObject=obj}function unwrap(){nativeObject=window.clipboardData}var nativeObject,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,nativeObject=null}),plugin.freezePublicAPI({wrap:wrap,unwrap:unwrap,
clear:clear,set:set,get:get}),register(null,{"clipboard.provider":plugin})}return main.consumes=["Plugin","dialog.error"],
main.provides=["clipboard.provider"],main})


define("plugins/c9.ide.clipboard/clipboard",[],function(require,exports,module){function main(options,imports,register){
function load(){function checkAvailable(editor,args,e){var handler=findClipboardHandler(),fromKeyboard=e instanceof KeyboardEvent


if(handler&&handler.isClipboardAvailable)return handler.isClipboardAvailable({type:this.name,fromKeyboard:fromKeyboard,
sourceEvent:e,editor:editor,args:args})
if(options.local){var name=document.activeElement.tagName.toLowerCase()
if(input[name]||document.activeElement.contentEditable)return!0}return!!handler}return!loaded&&(loaded=!0,
commands.addCommand({name:"cut",bindKey:{mac:"Command-X",win:"Ctrl-X"},isAvailable:checkAvailable,exec:function(){
cut()},passEvent:!0,readOnly:!0},plugin),commands.addCommand({name:"copy",bindKey:{mac:"Command-C",win:"Ctrl-C"
},isAvailable:checkAvailable,exec:function(editor,args){copy(null,args.data)},passEvent:!0},plugin),commands.addCommand({
name:"paste",bindKey:{mac:"Command-V",win:"Ctrl-V"},isAvailable:checkAvailable,exec:function(){paste()

},passEvent:!0,readOnly:!0},plugin),commands.addCommand({name:"clearcut",bindKey:{mac:"ESC",win:"ESC"
},isAvailable:checkAvailable,exec:clearcut,passEvent:!0},plugin),menus.addItemByPath("Edit/~",new ui.divider,300,plugin),
menus.addItemByPath("Edit/Cut",new ui.item({command:"cut"}),400,plugin),menus.addItemByPath("Edit/Copy",new ui.item({
command:"copy"}),500,plugin),void menus.addItemByPath("Edit/Paste",new ui.item({command:"paste"}),600,plugin))

}function findClipboardHandler(){var el=apf.activeElement||apf.menu.lastFocussed
if(el)for("menu"==el.localName&&(el=apf.menu.lastFocussed||el);el;){var handler=el.clipboardHandler||el.editor


if(handler)return handler
el=el.parentNode}}function cut(native){var handler=findClipboardHandler(),event={clipboardData:clipboardData,
"native":native,handler:handler}
emit("beforeCut",event)!==!1&&(native||clipboardData.unwrap(),emit("cut",event),handler&&handler.cut&&handler.cut(event))

}function copy(native,data){var handler=findClipboardHandler(),event={clipboardData:clipboardData,"native":native,
handler:handler}
emit("beforeCopy",event)!==!1&&(native||clipboardData.unwrap(),data?clipboardData.setData("text/plain",data):(emit("copy",event),
handler&&handler.copy&&handler.copy(event)))}function paste(native){var handler=findClipboardHandler(),event={
clipboardData:clipboardData,"native":native,handler:handler}
emit("beforePaste",event)!==!1&&(native||clipboardData.unwrap(),emit("paste",event),handler&&handler.paste&&handler.paste(event))

}function clearcut(){var handler=findClipboardHandler()
return!(!handler||!handler.clearcut)&&handler.clearcut()}function registerHandler(amlNode,clipboardHandler){
amlNode.clipboardHandler=clipboardHandler}function showAlert(data,isPaste){if(!settings.getBool("user/clipboard/@dontshow")){
var emitter=alert.show("Native Clipboard Unavailable","Important information regarding the Native Clipboard","By default the browser doesn't allow you to use the native clipboard via menus. This means that whatever you copy via a menu needs to be pasted by the menu as well and only works in Cloud9. <br /><br />"+(isPaste?"":"You can copy the string from the textarea below. <textarea style='width:100%;' rows='4'>"+data+"</textarea><br /><br />")+"To enable the native keyboard either use Command-C on Mac or Ctrl-C on Windows or for Chrome install the Cloud9 App at <a target='_blank' href='http://bit.ly/K5XNzK'>the Chrome store</a>.",function(){
alert.dontShow&&settings.set("user/clipboard/@dontshow",!0)},{isHTML:!0,showDontShow:!0})
emitter.on("show",function(){function hide(){setTimeout(function(){alert.hide()})}var textarea=alert.aml.$ext.querySelector("textarea")


textarea&&(textarea.select(),textarea.focus(),textarea.addEventListener("copy",hide),textarea.addEventListener("cut",hide))

})}}var ui=(imports.c9,imports.ui),Plugin=imports.Plugin,menus=imports.menus,settings=imports.settings,commands=imports.commands,provider=imports["clipboard.provider"],alert=imports["dialog.alert"],plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),input={
input:1,textarea:1,iframe:1},loaded=!1,clipboardData={items:[],get types(){return clipboardData.items.map(function(item){
return item.type})},wrap:function(nativeObject){provider.wrap(nativeObject)},unwrap:function(){provider.unwrap()

},setData:function(type,data){provider.set(type,data)===!1&&showAlert(data)
var found
clipboardData.items.every(function(item){return item.type!=type||(found=item,!1)}),found?found.value=data:clipboardData.items.push({
type:type,value:data})},getData:function(type,callback){var data=provider.get(type)
if(data===!1&&showAlert(null,!0),data===!1||void 0===data){var found
return clipboardData.items.every(function(item){return item.type!=type||(found=item,!1)}),found&&found.value||!1

}return data},clearData:function(type){provider.clear(),clipboardData.items=[],clipboardData.types=[]

}}
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({_events:["available","beforeCut","cut","beforePaste","paste","beforeCopy","copy","clearcut"],
registerHandler:registerHandler,clipboardData:clipboardData,cut:cut,copy:copy,paste:paste}),register(null,{
clipboard:plugin})}return main.consumes=["Plugin","c9","menus","commands","clipboard.provider","ui","dialog.alert","settings"],
main.provides=["clipboard"],main})


define("plugins/c9.ide.save/autosave",[],function(require,exports,module){function main(options,imports,register){
function load(){return!(loaded||!enabled)&&(loaded=!0,c9.on("stateChange",function(e){e.state&c9.STORAGE&&!(e.last&c9.STORAGE)&&check()

},plugin),save.getElement("btnSave",function(btn){btnSave=btn,transformButton()}),tabs.on("tabCreate",function(e){
var tab=e.tab
tab.document.undoManager.on("change",function(e){autosave&&tab.path&&(clearTimeout(docChangeTimeout),
docChangeTimeout=setTimeout(function(){saveTab(tab)},tab.document.meta.$slowSave?SLOW_CHANGE_TIMEOUT:CHANGE_TIMEOUT))

},plugin)},plugin),tabs.on("tabDestroy",function(e){e.tab.path&&(1==tabs.getTabs().length&&btnSave.hide(),
saveTab(e.tab))},plugin),void save.on("beforeWarn",function(e){if(autosave&&!e.tab.document.meta.newfile)return saveTab(e.tab),
!1},plugin))}function transformButton(){btnSave&&btnSave.autosave!==autosave&&(autosave&&(btnSave.setAttribute("caption",""),
btnSave.setAttribute("margin","0 20"),btnSave.removeAttribute("tooltip"),btnSave.removeAttribute("command"),
apf.setStyleClass(btnSave.$ext,"btnSave"),tooltip.add(btnSave,{message:"Changes to your file are automatically saved.<br />                        View all your changes through <a href='javascript:void(0)'                         onclick='require(\"ext/revisions/revisions\").toggle();'                         class='revisionsInfoLink'>the Revision History pane</a>.                         Rollback to a previous state, or make comparisons.",
width:"250px",hideonclick:!0},plugin)),btnSave.autosave=autosave)}function check(){if(autosave)for(var tab,pages=tabs.getTabs(),i=0,l=pages.length;i<l;i++)(tab=pages[i]).document.changed&&tab.path&&saveTab(tab)

}function saveTab(tab,force){if(autosave){if(!c9.has(c9.STORAGE))return void save.setSavingState(tab,"offline")


var doc
if(force||tab.path&&(doc=tab.document).changed&&!doc.meta.newfile&&!doc.meta.nofs&&!doc.meta.error&&!doc.meta.$saving){
var value=doc.value,slow=value.length>SLOW_SAVE_THRESHOLD
if(slow&&!doc.meta.$slowSave)return void(doc.meta.$slowSave=!0)
doc.meta.$slowSave=slow,save.save(tab,{silentsave:!0,timeout:1,value:value},function(){})}}}var btnSave,saveInterval,c9=imports.c9,Plugin=imports.Plugin,save=imports.save,tooltip=imports.tooltip,tabs=imports.tabManager,experimental=imports["preferences.experimental"],plugin=new Plugin("Ajax.org",main.consumes),CHANGE_TIMEOUT=500,SLOW_CHANGE_TIMEOUT=options.slowChangeTimeout||3e4,SLOW_SAVE_THRESHOLD=102400,docChangeTimeout=null,autosave=!0,enabled=options.testing||experimental.addExperiment("autosave",!1,"Files/Auto-Save"),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){autosave=!0,transformButton()}),plugin.on("disable",function(){
autosave=!1,transformButton()}),plugin.on("unload",function(){saveInterval&&clearInterval(saveInterval),
loaded=!1}),plugin.freezePublicAPI({}),register(null,{autosave:plugin})}return main.consumes=["Plugin","c9","ui","layout","tooltip","anims","menus","tabManager","save","preferences.experimental"],
main.provides=["autosave"],main})


define("plugins/c9.ide.recentfiles/recentfiles",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,menu=new ui.menu,menus.addItemByPath("File/Open Recent/",menu,500,plugin),
divider=new ui.divider,menus.addItemByPath("File/Open Recent/~",divider,1e6,plugin),menus.addItemByPath("File/Open Recent/Clear Menu",new ui.item({
onclick:function(){clearMenu()}}),2e6,plugin),settings.on("read",function(e){clearMenu()
for(var state=settings.getJson("state/recentfiles")||[],i=state.length-1;i>=0;i--)state[i]&&add(state[i])

},plugin),settings.on("write",function(e){if(changed){var state=menu.childNodes.filter(function(node){
return"item"==node.localName&&"object"==typeof node.value}).map(function(node){return node.value})
settings.setJson("state/recentfiles",state)}},plugin),void tabManager.on("tabDestroy",function(e){e.tab.path&&!e.tab.document.meta.newfile&&(add(e.tab.getState(!0)),
settings.save())},plugin))}function search(path){var found=!1
return menu.childNodes.every(function(item){return!item.value||item.value.path!=path||(found=item,!1)

}),found}function add(state){var item=search(state.path)
for(item?menu.insertBefore(item,menu.firstChild):menu.insertBefore(new ui.item({caption:state.document.title,
value:state,onclick:function(){state.active=!0,tabManager.open(state,function(){}),this.parentNode.removeChild(this)

}}),menu.firstChild);menu.childNodes.length>12;)divider.previousSibling.destroy(!0,!0)
var nodes=menu.selectNodes("item")
1==nodes.length?nodes[0].disable():nodes[nodes.length-1].enable(),changed=!0}function clearMenu(){for(var nodes=menu.childNodes,i=nodes.length-1;i>=0&&"item"==nodes[0].localName;i--)nodes[0].destroy(!0,!0)


var item=menu.selectNodes("item")[0]
item&&item.disable()}var changed,menu,divider,Plugin=imports.Plugin,ui=imports.ui,menus=imports.menus,settings=imports.settings,tabManager=imports.tabManager,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({}),register(null,{recentfiles:plugin
})}return main.consumes=["Plugin","menus","tabManager","settings","ui"],main.provides=["recentfiles"],
main})


define("plugins/c9.ide.save/save",[],function(require,exports,module){function main(options,imports,register){
function load(){function available(editor){return!!editor&&c9.status&c9.STORAGE&&(!tabManager.focussedTab||"string"==typeof tabManager.focussedTab.path)

}if(loaded)return!1
loaded=!0,commands.addCommand({name:"save",hint:"save the currently active file to disk",bindKey:{mac:"Command-S",
win:"Ctrl-S"},isAvailable:available,exec:function(){save(null,null,function(){})}},plugin),commands.addCommand({
name:"saveas",hint:"save the file to disk with a different filename",bindKey:{mac:"Command-Shift-S",win:"Ctrl-Shift-S"
},isAvailable:available,exec:function(){saveAs(null,function(){})}},plugin),commands.addCommand({name:"saveall",
hint:"save all unsaved files",isAvailable:available,exec:function(){saveAll(function(){})}},plugin),commands.addCommand({
name:"reverttosaved",hint:"downgrade the currently active file to the last saved version",bindKey:{mac:"Ctrl-Shift-Q",
win:"Ctrl-Shift-Q"},isAvailable:available,exec:function(){revertToSaved(null,function(){})}},plugin),
commands.addCommand({name:"reverttosavedall",hint:"downgrade the all open tabs to the last saved version",
bindKey:{mac:"Option-Shift-Q",win:"Alt-Shift-Q"},exec:function(){revertToSavedAll()}},plugin),tabManager.on("tabBeforeClose",function(e){
function close(err){err&&"EUSERCANCEL"==err.code||(tab.document.meta.$ignoreSave=!0,tab.close(),delete tab.document.meta.$ignoreSave),
emit("dialogClose",{tab:tab})}var tab=e.tab,undoManager=tab.document.undoManager
if("string"==typeof tab.path&&!undoManager.isAtBookmark()&&tab.document.changed&&!tab.document.meta.cloned&&!tab.document.meta.$ignoreSave&&!tab.document.meta.ignoreSave&&(!tab.document.meta.newfile||tab.document.value)&&emit("beforeWarn",{
tab:tab})!==!1)return tab.document.meta.$saveBuffer?(plugin.on("afterSave",function monitor(e){e.document==tab.document&&(tab.loaded&&tab.close(),
plugin.off("afterSave",monitor))}),!1):(tabManager.activateTab(tab),question("Would you like to save this file?","Save "+ui.escapeXML(tab.path)+"?","This file has unsaved changes. Your changes will be lost if you don't save them.",function(all,tab){
save(tab,{silentsave:!0},close)},function(all,cancel,tab){cancel?emit("dialogCancel",{tab:tab}):close()

},{cancel:!0,metadata:tab,yes:"Save",no:"Don't save"}),!1)},plugin),saveStatus=document.getElementById("saveStatus")


var toolbar=layout.findParent({name:"save"})
btnSave=ui.insertByIndex(toolbar,new ui.button({id:"btnSave","class":"btnSave",caption:"Save",tooltip:"Save",
disabled:"true",visible:!1,skin:"c9-toolbarbutton-glossy",command:"save"}),1e3,plugin),menus.addItemByPath("File/~",new ui.divider,600,plugin),
menus.addItemByPath("File/Save",new ui.item({command:"save"}),700,plugin),menus.addItemByPath("File/Save As...",new ui.item({
command:"saveas"}),800,plugin),menus.addItemByPath("File/Save All",new ui.item({command:"saveall"}),900,plugin),
menus.addItemByPath("File/Revert to Saved",new ui.item({command:"reverttosaved"}),1e3,plugin),menus.addItemByPath("File/Revert All to Saved",new ui.item({
command:"reverttosavedall"}),1100,plugin),tabManager.on("focus",function(e){btnSave.setAttribute("disabled",!available(!0))

}),tabManager.on("tabDestroy",function(e){e.last&&btnSave.setAttribute("disabled",!0)}),c9.on("stateChange",function(e){
e.state&c9.STORAGE?plugin.enable():plugin.disable()})}function revertToSaved(tab,callback){tabManager.reload(tab,callback)

}function revertToSavedAll(){tabManager.getTabs().forEach(function(tab){tab.path&&tabManager.reload(tab,function(){})

})}function saveAll(options,callback){callback||(callback=options,options={})
var count=0
tabManager.getTabs().forEach(function(tab){"string"==typeof tab.path&&(tab.document.undoManager.isAtBookmark()||tab.document.meta.newfile&&(tab.path.charAt(0).match(/[^\/~]/)||options.skipNewFiles)||tab.document.meta.preview||tab.document.meta.ignoreSave||(count++,
save(tab,null,function(err){(0===--count||err)&&(callback(err),count=0)})))}),count||callback()}function saveAllInteractive(tabs,callback){
var state=NO,counter=tabs.length
tabs=tabs.filter(function(tab){return!tab.document.undoManager.isAtBookmark()}),ui.asyncForEach(tabs,function(tab,next){
return counter--,state==YESTOALL?(save(tab,null,function(){}),next()):state===NOTOALL?(tab.document.meta.ignoreSave=!0,
next()):(tabManager.activateTab(tab),void question("Would you like to save this file?","Save "+ui.escapeXML(tab.path)+"?","This file has unsaved changes. Your changes will be lost if you don't save them.",function(all,tab){
state=all?YESTOALL:YES,save(tab,null,function(){}),next()},function(all,cancel,tab){return cancel?callback(state):(state=all?NOTOALL:NO,
tab.document.meta.ignoreSave=!0,void next())},{all:counter>=1,cancel:!0,metadata:tab,yes:"Save",no:"Don't save",
yestoall:"Save all",notoall:"Save none"}))},function(){callback(state)})}function ideIsOfflineMessage(){
showError("Failed to save file. Please check your connection. When your connection has been restored you can try to save the file again.")

}function save(tab,options,callback){function fnProgress(loaded,total,complete){doc.progress({loaded:loaded,
total:total,upload:!0,complete:complete,dt:Date.now()-loadStartT}),complete||(doc.meta.$saving=Date.now())

}if(tab||(tab=tabManager.focussedTab)){options||(options={})
var doc=tab.document,path=options.path||tab.path
if(doc.loaded){var value=options.value||doc.value
if(!(value&&value.length||doc.ready))return void console.log("[save] Document has zero length and is not ready, aborting save.")


var doSave=emit("beforeSave",{path:path,document:doc,tab:tab,value:value,options:options})
if(doSave===!1)return void console.log("[save] Saving not allowed by beforeSave event.")
if(doSave||(doSave=fs.writeFile),tab.classList.contains("conflict"))return void console.log("[save] Tab is in conflict mode which needs to be resolved, aborting save.")


if(!options.path&&(doc.meta.newfile||!tab.path))return void saveAs(tab,callback)
if(!c9.has(c9.STORAGE))return ideIsOfflineMessage()
if(!options.force){if(doc.meta.$saveBuffer){if(!(Date.now()-doc.meta.$saveBuffer[3]>DELAY_ALREADY_SAVING))return console.log("[save] Save cancelled, already saving"),
void(doc.meta.$saveBuffer=[tab,options,callback,doc.meta.$saveBuffer[3]||Date.now()])
doc.meta.$saveBuffer=!0}doc.meta.$saveBuffer=!0}setSavingState(tab,"saving")
var bookmark=doc.undoManager.position,loadStartT=Date.now()
return fnProgress(0,1,0),logger.log("User saving "+path),doSave(path,value,function(err){err?(options.silentsave||showError("Failed to save document. Please see if your internet connection is available and try again. "+err.message),
setSavingState(tab,"offline"),logger.log("Failed to save "+path)):(delete doc.meta.newfile,doc.meta.timestamp=Date.now()-settings.timeOffset,
doc.undoManager.bookmark(bookmark),options.path&&(tab.path=options.path),setSavingState(tab,"saved",options.timeout),
settings.save(),logger.log("Successfully saved "+path)),emit("afterSave",{path:path,value:value,document:doc,
tab:tab,err:err,options:options}),callback&&callback(err),checkBuffer(doc)},fnProgress),!1}}}function checkBuffer(doc){
if(doc.meta.$saveBuffer){var next=doc.meta.$saveBuffer
delete doc.meta.$saveBuffer,next===!0||doc.undoManager.isAtBookmark()||((next[1]||(next[1]={})).force=!0,
save.apply(window,next))}}function saveAs(tab,callback){function onCancel(){var err=new Error("User Cancelled Save")


err.code="EUSERCANCEL",err.tab=tab,callback(err)}(tab||(tab=tabManager.focussedTab))&&"string"==typeof tab.path&&showSaveAs("Save As",tab.path,function(path,exists,done){
function doSave(){done(),save(tab,{path:path},function(){callback.apply(this,arguments),emit("saveAs",{
oldPath:oldPath,path:path,document:tab.document})})}var oldPath=tab.path
return path!=oldPath&&exists?void question("Save As","","A file with the same name already exists in '"+dirname(path)+"'.\n Do you want to overwrite it?",doSave,function(){
done(),onCancel()},{queue:!1}):doSave()},onCancel)}function getSavingState(tab){return tab.classList.names.filter(function(c){
return["saving","saved","changed","offline","error"].indexOf(c)>-1})[0]||"saved"}function setSavingState(tab,state,timeout){
clearTimeout(stateTimer),clearTimeout(pageTimers[tab.name]),tab.classList.remove("saving","saved","error")


var doc=tab.document
clearTimeout(doc.meta.$saveTimer),"saving"==state?doc.meta.$saving=Date.now():delete doc.meta.$saving,
"saving"==state?(btnSave.show(),ui.setStyleClass(btnSave.$ext,"saving",["saved","error"]),ui.setStyleClass(saveStatus,"saving",["saved","error"]),
saveStatus.style.display="block",btnSave.currentState=SAVING,btnSave.setCaption("Saving..."),tab.classList.add("saving"),
function testSaveTimeout(){doc.meta.$saveTimer=setTimeout(function(){doc.meta.$saving&&(Date.now()-doc.meta.$saving>4e4?(setSavingState(tab,"offline"),
checkBuffer(tab.document)):testSaveTimeout())},3e4)}()):"saved"==state?(btnSave.show(),delete tab.document.meta.error,
ui.setStyleClass(btnSave.$ext,"saved",["saving","error"]),ui.setStyleClass(saveStatus,"saved",["saving","error"]),
saveStatus.style.display="block",btnSave.currentState=SAVED,btnSave.setCaption(CAPTION_SAVED),tab.classList.add("saved"),
stateTimer=setTimeout(function(){btnSave.currentState===SAVED&&btnSave.caption===CAPTION_SAVED&&btnSave.hide()

},4e3),pageTimers[tab.name]=setTimeout(function(){btnSave.currentState===SAVED&&(saveStatus.style.display="none",
tab.classList.remove("saved")),emit("tabSavingState",{tab:tab})},timeout||500)):"offline"==state&&(btnSave.show(),
ui.setStyleClass(btnSave.$ext,"saved"),ui.setStyleClass(btnSave.$ext,"error",["saving"]),ui.setStyleClass(saveStatus,"error",["saving"]),
saveStatus.style.display="block",btnSave.currentState=OFFLINE,btnSave.setCaption("Not saved"),tab.classList.add("error")),
emit("tabSavingState",{tab:tab})}var btnSave,saveStatus,c9=imports.c9,Plugin=imports.Plugin,settings=imports.settings,ui=imports.ui,commands=imports.commands,menus=imports.menus,fs=imports.fs,layout=imports.layout,tabManager=imports.tabManager,question=imports["dialog.question"].show,showSaveAs=imports["dialog.file"].show,showError=imports["dialog.error"].show,logger=imports["vfs.log"],dirname=require("path").dirname,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),SAVING=0,SAVED=1,OFFLINE=2,YESTOALL=-2,NOTOALL=-1,YES=2,NO=1,CANCEL=0,CAPTION_SAVED="All changes saved",DELAY_ALREADY_SAVING=12e4,loaded=!1,stateTimer=null,pageTimers={}


plugin.on("load",function(){load()}),plugin.on("enable",function(){btnSave&&btnSave.enable()}),plugin.on("disable",function(){
btnSave&&btnSave.disable(),tabManager.getTabs().forEach(function(tab){if(tab.document.meta.$saveBuffer){
setSavingState(tab,"offline")
var item=tab.document.meta.$saveBuffer
item[2]&&item[2](new Error("Disabled Save Plugin")),delete tab.document.meta.$saveBuffer}})}),plugin.on("unload",function(){
loaded=!1}),plugin.freezePublicAPI({YESTOALL:YESTOALL,NOTOALL:NOTOALL,YES:YES,NO:NO,CANCEL:CANCEL,get CAPTION_SAVED(){
return CAPTION_SAVED},set CAPTION_SAVED(value){CAPTION_SAVED=value},_events:["beforeSave","afterSave","saveAs","beforeWarn","dialogClose","dialogCancel","drawSaveas","tabSavingState"],
save:save,saveAs:saveAs,revertToSaved:revertToSaved,saveAll:saveAll,saveAllInteractive:saveAllInteractive,
setSavingState:setSavingState,getSavingState:getSavingState,hideCaption:function(){btnSave.hide()},getCaption:function(){
if(btnSave.caption!=CAPTION_SAVED)return btnSave.visible&&btnSave.caption},setCaption:function(value){
ui.setStyleClass(btnSave.$ext,"saving",["saved","error"]),btnSave.show(),btnSave.setCaption(value)}}),
register(null,{save:plugin})}return main.consumes=["Plugin","c9","fs","layout","commands","menus","settings","ui","tabManager","dialog.question","dialog.file","dialog.fileoverwrite","dialog.error","error_handler","vfs.log"],
main.provides=["save"],main})


define("plugins/c9.ide.configuration/configure",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0
var script=settings.get("user/config/init.js")
script&&runInitJs(script)
var css=settings.get("user/config/styles.css")
css&&insertCss(css,!1,cssSession),settings.on("user/config/styles.css",function(css){cssSession.cleanUp(),
insertCss(css,!1,cssSession)}),commands.addCommand({name:"restartc9",group:"General",bindKey:{mac:"Command-R",
win:"Ctrl-R"},exec:function(){location.reload()}},plugin),commands.addCommand({name:"rerunInitScript",
group:"General",bindKey:{mac:"Command-Enter",win:"Ctrl-Enter"},isAvailable:function(){return tabManager.focussedTab&&"~/.c9/init.js"==tabManager.focussedTab.path

},exec:function(){var script=settings.get("user/config/init.js")
runInitJs(script)}},plugin),menus.addItemByPath("Cloud9/~",new ui.divider,300,plugin),menus.addItemByPath("Cloud9/Go To Your Dashboard",new ui.item({
onclick:function(){window.open(options.dashboardUrl)}}),310,plugin),menus.addItemByPath("Cloud9/~",new ui.divider,350,plugin),
menus.addItemByPath("Cloud9/Open Your Project Settings",new ui.item({onclick:editProjectSettings}),400,plugin),
menus.addItemByPath("Cloud9/Open Your User Settings",new ui.item({onclick:editUserSettings}),400,plugin),
menus.addItemByPath("Cloud9/Open Your Keymap",new ui.item({onclick:function(){kbprefs.editUserKeys()}
}),600,plugin),menus.addItemByPath("Cloud9/Open Your Init Script",new ui.item({onclick:editInitJs}),700,plugin),
menus.addItemByPath("Cloud9/Open Your Stylesheet",new ui.item({onclick:editStylesCss}),800,plugin),c9.hosted?menus.addItemByPath("Cloud9/Restart Workspace",new apf.item({
command:"restartc9vm"}),2000080,plugin):menus.addItemByPath("Cloud9/Restart Cloud9",new apf.item({command:"restartc9"
}),2000080,plugin),genprefs.on("edit",function(){editUserSettings()}),prjprefs.on("edit",function(){editProjectSettings()

}),save.on("beforeSave",function(e){if(e.document.meta.config){var path=e.document.meta.config
if(e.path!=path&&e.path!=util.normalizePath(path))return delete e.document.meta.config,void delete e.document.meta.nofs


if("~/.c9/init.js"==path)settings.setJson("user/config/init.js",e.document.value),showError("Please reload or press '"+commands.getHotkey("rerunInitScript")+"' for these changes to take effect.")
else if("~/.c9/styles.css"==path){var css=e.document.value
settings.setJson("user/config/styles.css",css)}else if(path==settings.paths.project){try{var project=JSON.parse(e.document.value)

}catch(e){return showError("Syntax Error in Project Settings: "+e.message),!1}settings.read({project:project
}),settings.save(!0)}else if(path==settings.paths.user){try{var user=JSON.parse(e.document.value)}catch(e){
return showError("Syntax Error in User Settings: "+e.message),!1}settings.read({user:user}),settings.save(!0)

}return delete e.document.meta.newfile,e.document.undoManager.bookmark(),!1}},plugin)
var initWatcher,projectPath
settings.on("read",function(){function readHandler(err,data){if(!err){settings.paths.project=projectPath


try{var json=JSON.parse(data)}catch(e){return}settings.update("project",json)}}function updateFavPath(){
var mainPath=favs.getFavoritePaths()[0]
mainPath=mainPath?join(mainPath,".c9/project.settings"):originalPath,projectPath&&watcher.unwatch(projectPath),
projectPath=mainPath,watcher.watch(projectPath),fs.readFile(mainPath,readHandler)}if(!initWatcher)if(initWatcher=!0,
watcher.on("change",function(e){e.path==projectPath&&fs.readFile(e.path,readHandler)}),watcher.on("delete",function(e){
e.path==projectPath&&watcher.watch(projectPath)}),watcher.on("failed",function(e){e.path==projectPath&&setTimeout(function(){
watcher.watch(projectPath)})}),pathFromFavorite){var originalPath=settings.paths.project
favs.on("favoriteAdd",updateFavPath),favs.on("favoriteRemove",updateFavPath),favs.on("favoriteReorder",updateFavPath),
updateFavPath()}else projectPath=settings.paths.project,watcher.watch(projectPath),fs.readFile(projectPath,readHandler)

})}function insertCss(css,staticPrefix,plugin){css+="\n/*# sourceURL=~/.c9/styles.css */"
var style=document.createElement("style")
style.appendChild(document.createTextNode(css)),document.body.appendChild(style),plugin.addOther(function(){
style.parentNode.removeChild(style)})}function openTab(path,value,syntax,defaultValue){tabManager.open({
path:path,value:value||defaultValue,active:!0,editorType:"ace",document:{ace:{customSyntax:syntax},meta:{
config:path,newfile:!value.length,nofs:!0}}},function(err,tab){})}function editInitJs(){var script=settings.get("user/config/init.js")||""


openTab("~/.c9/init.js",script,"javascript",'// You can access plugins via the \'services\' global variable\n/*global services, plugin*/\n\n// to load plugins use\n// services.pluginManager.loadPackage([\n//     "https://<user>.github.io/<project>/build/package.<name>.js",\n//     "~/.c9/plugins/<name>/package.json",\n// ]);\n')

}function editStylesCss(){var css=settings.get("user/config/styles.css")||""
openTab("~/.c9/styles.css",css,"css")}function editProjectSettings(){var value=JSON.stringify(settings.model.project,0,"    ").replace(/"true"/g,"true").replace(/"false"/g,"false")


openTab(settings.paths.project,value,"javascript")}function editUserSettings(){var value=JSON.stringify(settings.model.user,0,"    ").replace(/"true"/g,"true").replace(/"false"/g,"false")


openTab(settings.paths.user,value,"javascript")}function runInitJs(script){c9.once("ready",function(){
try{var fn=new Function("services, plugin",script+"\n//@ sourceURL=config/init.js")
initPlugin&&initPlugin.unload()
var initPlugin=new Plugin("initScript",[])
initPlugin.name="initScript",fn(services,initPlugin)}catch(e){console.error(e),setTimeout(function(){
showError("Error Executing init.js: ",e.message)},500)}})}var initPlugin,Plugin=imports.Plugin,settings=imports.settings,commands=imports.commands,save=imports.save,menus=imports.menus,watcher=imports.watcher,tabManager=imports.tabManager,ui=imports.ui,c9=imports.c9,fs=imports.fs,kbprefs=imports["preferences.keybindings"],genprefs=imports["preferences.general"],prjprefs=imports["preferences.project"],services=imports.app.services,showError=imports["dialog.error"].show,favs=imports["tree.favorites"],util=imports.util,join=require("path").join,plugin=new Plugin("Ajax.org",main.consumes),cssSession=new Plugin("Ajax.org",main.consumes),pathFromFavorite=options.pathFromFavorite,loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,initPlugin&&initPlugin.unload()}),plugin.freezePublicAPI({editInitJs:editInitJs,
editStylesCss:editStylesCss,editProjectSettings:editProjectSettings,editUserSettings:editUserSettings
}),register(null,{configure:plugin})}return main.consumes=["Plugin","dialog.error","ui","settings","tabManager","save","menus","preferences.keybindings","preferences.general","preferences.project","c9","commands","watcher","fs","tree.favorites","util","app"],
main.provides=["configure"],main})


define("plugins/c9.ide.guide/default",[],function(require,exports,module){function main(options,imports,register){
function load(){guide.add(allThingies),guide.on("hide",function(e){settings.set("user/tour/@default-complete",!0)

}),guide.on("close",function(e){var completed=settings.getJson("user/tour/default")||{}
completed[e.name]=1,settings.setJson("user/tour/default",completed)}),settings.on("read",function(){settings.setDefaults("user/tour",[["default-complete",!1]]),
!settings.getBool("user/tour/@default-complete")&&info.getUser().date_add>FEATURE_DEPLOYED&&guide.show(settings.getJson("user/tour/default"))

})}var Plugin=imports.Plugin,settings=imports.settings,tabManager=imports.tabManager,info=imports.info,guide=imports.guide,plugin=new Plugin("Ajax.org",main.consumes),RIGHT=(plugin.getEmitter(),
2),LEFT=4,BOTTOM=8,TOP=16,FEATURE_DEPLOYED=new Date(2016,2,3).getTime(),allThingies=[{name:"workspace",
query:".workspace",width:340,attachment:LEFT,where:RIGHT,wherePopup:RIGHT|BOTTOM,color:"blue",title:"Manage and upload files & folders",
body:"Here's where all of your project files are. Double click a file to open it and right click for additional options. You can also create, delete, and move files around. <br /><br />Click the settings icon in the top right corner of the Workspace panel for additional options. Drag and drop to upload files and download them by right-clicking.<br /><br /><a href='https://docs.c9.io/docs/file-revision-history' target='_blank'>Read about Restoring Deleted Files</a>"
},{name:"navigate",query:".navigate",width:300,attachment:LEFT,where:RIGHT,color:"green",title:"Quickly navigate to files",
body:"The Navigate panel allows for quick searching and opening of files. Use ${key:navigate} to open the panel then navigate to any file in the file system by typing part of the filename or path.<br /><br /><a href='https://docs.c9.io/docs/navigate' target='_blank'>More about the Navigate Panel</a>"
},{name:"new tab",query:".plus_tab_button",width:360,attachment:LEFT,where:BOTTOM,color:"green",title:"Open a file, terminal, or recent tabs",
body:"Click the plus button to open a new tab for a file or terminal instance. You can also open an immediate window for testing Javascript expressions or reopen recently closed tabs.<br /><br /><a href='https://docs.c9.io/docs/immediate-window' target='_blank'>More about the Immediate Window</a>"
},{name:"terminal",query:function(){var t
if(tabManager.getTabs().some(function(tab){if("terminal"==tab.editorType)return t=tab,!0}))return t.aml.$button

},width:300,attachment:BOTTOM,where:TOP,title:"Full Linux terminal",color:"blue",body:"With full sudo access in the terminal, you can create files, run code, and install software. Open a new terminal at any time with ${key:openterminal}.<br /><br /><b>Pro Tip</b>: Your workspace layout is fully customizable, making split screen simple. Try dragging this terminal tab and dropping it all over the screen. This works for many tabs and many layouts.<br /><br /><a href='https://docs.c9.io/docs/terminal' target='_blank'>More about the Terminal</a>"
},{name:"preview",query:".preview",width:350,attachment:TOP,where:BOTTOM,color:"orange",title:"Preview your app as you code",
body:"Click Preview to open the current file in a raw preview, like for HTML or Markdown, or to see it as it's running on the server. To preview your running application, you'll need to first run it with the Run button or by executing a command from the terminal.<br /><br /><a href='https://docs.c9.io/docs/run-an-application#section--pre-view-your-application' target='_blank'>More about Previewing Your Application</a>"
},{name:"run",query:".runbtn",width:310,attachment:TOP,where:BOTTOM,color:"green",title:"Run your app or file",
body:"Running from here will use the default run configuration for the file or type of project you're using. Always make sure to run your app on port 8080. Once it's running, view your app by clicking Preview or by going straight to your application URL (found in the Share dialogue).<br /><br /><a href='https://docs.c9.io/docs/running-and-debugging-code' target='_blank'>More about Running Your Application</a>"
},{name:"share",query:".c9-share",width:300,attachment:TOP,where:BOTTOM,color:"orange",title:"Share your work with anyone",
body:"Click here to invite others to view or edit your code. Here you'll also find your application URL, which you can use to view or share your running app.<br /><br /><a href='https://docs.c9.io/docs/share-a-workspace' target='_blank'>More about Sharing a Workspace</a>"
},{name:"collaborate",query:".collab",width:400,attachment:RIGHT,where:LEFT,color:"orange",title:"Follow and chat with other collaborators",
body:"From the Collaboration panel, you can control all users' access to the workspace, see what files users are working on, and use real-time chat.<br /><br /><a href='https://docs.c9.io/docs/share-a-workspace' target='_blank'>More about Sharing a Workspace</a>"
},{name:"outline",query:".outline",width:320,attachment:RIGHT,where:LEFT,color:"blue",title:"Get an outline of your code",
body:"The Outline panel shows a full list of functions and definitions in your file so you can quickly navigate through your file without reading every line of code. Use ${key:outline} to open the panel and navigate to any definition file system by typing part of the name. The outline view has support for over a dozen languages.<br /><br /><a href='https://docs.c9.io/docs/supported-languages' target='_blank'>See All Supported Languages</a>"
},{name:"debugger",query:".debugger",width:320,attachment:RIGHT,where:LEFT,color:"green",title:"Built-in step-through debugging",
body:"Set a breakpoint in a Node, PHP, Go, or C++ file by clicking next to the appropriate line number in your file. Then when you run your program, the debug panel will open up and you can see what variables are set and execute your code one line at a time. <br /><br /><a href='https://docs.c9.io/docs/debugging-your-code' target='_blank'>More about Debugging</a>"
},{name:"preview-chooser",query:".btn-preview-choice",width:340,attachment:TOP,where:BOTTOM,color:"green",
title:"Preview your files in various ways",body:"When previewing your application, you may choose from a variety of different browsers to test your application in.<br /><br /><a href='https://docs.c9.io/docs/browser-testing' target='_blank'>More about Testing in Different Browsers</a>"
}]
plugin.on("load",function(){load()}),plugin.on("unload",function(){}),plugin.freezePublicAPI({}),register(null,{
"guide.default":plugin})}return main.consumes=["Plugin","settings","info","tabManager","guide"],main.provides=["guide.default"],
main})


define("text!plugins/c9.ide.guide/style.css",[],"")


define("plugins/c9.ide.guide/guide",[],function(require,exports,module){function main(options,imports,register){
function load(){menus.addItemByPath("Support/Show Guided Tour",new ui.item({onclick:show}),150,plugin)

}function draw(){drawn||(drawn=!0,ui.insertCss(require("text!./style.css"),options.staticPrefix,plugin),
thingies.forEach(drawThingy),emit("draw"))}function add(t){t instanceof Array||(t=[t]),thingies?t.forEach(function(i){
thingies.push(i),drawn||drawThingy(i)}):thingies=t}function setPosition(htmlNode,pos,def,width,height,margin,isThingy,isUpdate){
function right(){return window.innerWidth-pos.left-pos.width}function bottom(){return window.innerHeight-pos.top-pos.height

}htmlNode.style.right=htmlNode.style.left=htmlNode.style.top=htmlNode.style.bottom=""
var offsetW=isThingy?width/2:0,offsetH=isThingy?height/2:0,corW=isThingy?0:width,corH=isThingy?0:height,maxW=window.innerWidth-corW-margin,maxH=window.innerHeight-corH-margin,where=isThingy?def.where:def.wherePopup||def.where


where&LEFT?def.attachment&RIGHT?htmlNode.style.right=right()+pos.width-offsetW+margin+"px":htmlNode.style.left=pos.left-corW-offsetW-margin+"px":where&RIGHT?def.attachment&RIGHT?htmlNode.style.right=right()+pos.width+margin-offsetW+"px":htmlNode.style.left=pos.left+pos.width+margin-offsetW+"px":def.attachment&RIGHT?htmlNode.style.right=Math.max(margin,right()+(pos.width-width)/2)+"px":htmlNode.style.left=Math.min(maxW,Math.max(margin,pos.left+(pos.width-width)/2))+"px",
where&TOP?def.attachment&BOTTOM?htmlNode.style.bottom=bottom()+pos.height-offsetH+margin+"px":htmlNode.style.top=pos.top-corH-offsetH-margin+"px":where&BOTTOM?def.attachment&BOTTOM?htmlNode.style.bottom=bottom()+pos.height+margin-offsetH+"px":htmlNode.style.top=pos.top+pos.height+margin-offsetH+"px":def.attachment&BOTTOM?htmlNode.style.bottom=Math.max(margin,bottom()+(pos.height-height)/2)+"px":htmlNode.style.top=Math.min(maxH,Math.max(margin,pos.top+(pos.height-height)/2))+"px",
isThingy||updateBalloon(htmlNode,def)}function updateBalloon(htmlNode,def){var h
htmlNode.classList.remove("balloon-right","balloon-left","balloon-top","balloon-bottom")
var where=def.wherePopup||def.where
where&LEFT?(htmlNode.classList.add("balloon-right"),h=0):where&RIGHT&&(htmlNode.classList.add("balloon-left"),
h=0),where&BOTTOM?(htmlNode.classList.add("balloon-top"),h=1):where&TOP&&(htmlNode.classList.add("balloon-bottom"),
h=1)
var balloon=popup.firstElementChild
balloon.style.left=balloon.style.top="",where&BOTTOM?balloon.classList.remove("white"):balloon.classList.add("white"),
2!=htmlNode.className.match(/balloon/g).length&&(0==h?balloon.style.top=def.thingy.offsetTop-htmlNode.offsetTop-THINGY_SIZE-1+"px":balloon.style.left=def.thingy.offsetLeft-htmlNode.offsetLeft-THINGY_SIZE-1+"px")

}function drawThingy(def){var el="function"==typeof def.query?def.query():document.querySelector(def.query)


if(el){var thingy=document.body.appendChild(document.createElement("div"))
thingy.className="thingy"
var pos=el.getBoundingClientRect()
setPosition(thingy,pos,def,THINGY_SIZE,THINGY_SIZE,THINGY_MARGIN,!0),thingy.onclick=function(){togglePopup(def)

},def.body=def.body.replace(/\$\{key:([a-zA-Z]+)\}/g,function(match,name){return commands.getPrettyHotkey(name)

}),def.el=el,def.thingy=thingy}}function togglePopup(def){return popup&&currentPopup===def?void hidePopup(!0):void showPopup(def)

}function showPopup(def){if(analytics.track("Showed Guide Popup",{title:def.name}),popup)hidePopup()
else{popup=document.body.appendChild(document.createElement("div")),popup.className="thingy-popup",popup.innerHTML="<div class='balloon'></div><span class='close'></span><span class='title'></span><p></p><div class='tourButtons'><a href='javascript:void(0)' class='skip' title='Reopen the tour via the Help menu'>End Tour</a></div>"


var buttons=popup.querySelector(".tourButtons")
popup.querySelector(".skip").onclick=function(){hide()}
var btnDone=new ui.button({htmlNode:buttons,skin:"btn-default-css3",style:"display:inline-block;","class":"btn-green",
onclick:function(){for(var idx=thingies.indexOf(currentPopup);thingies[++idx]&&!thingies[idx].thingy;);
if(!thingies[idx])for(idx=-1;thingies[++idx]&&!thingies[idx].thingy;);return thingies[idx]&&"none"!=thingies[idx].thingy.style.display?void showPopup(thingies[idx]):hidePopup()

}})
btnDone.oCaption.parentNode.innerHTML="Next <span class='arrow'>&#x21E5;</span>",popup.querySelector(".close").onclick=function(){
hidePopup()}}if(popup.style.transition="",popup.classList.remove("green","blue","orange"),popup.classList.add(def.color),
def.width&&(popup.style.width=def.width+"px"),popup.querySelector("span.title").innerHTML=def.title,popup.querySelector("p").innerHTML=def.body,
def.thingy){var thingy=def.thingy,pos=thingy.getBoundingClientRect()
popup.style.display="block",thingy.classList.add("active"),setPosition(popup,pos,def,popup.offsetWidth,popup.offsetHeight,POPUP_MARGIN),
def.onshow&&def.onshow(),currentPopup=def}}function hidePopup(onlyCurrent){currentPopup&&(onlyCurrent||(currentPopup.thingy.style.display="none",
currentPopup.shown=!0),currentPopup.thingy.classList.remove("active"),onlyCurrent||emit("close",currentPopup),
currentPopup=null),popup.style.display="none"}function enable(){timer=setInterval(check,1e3),document.body.addEventListener("mouseup",delayCheck)

}function disable(){clearInterval(timer),document.body.removeEventListener("mouseup",delayCheck)}function check(){
thingies.forEach(function(def){if(!def.shown)if(def.thingy)if(!def.el||def.el.offsetHeight||def.el.offsetWidth){
if(!def||!def.el)return
var pos=def.el.getBoundingClientRect()
if(setPosition(def.thingy,pos,def,THINGY_SIZE,THINGY_SIZE,THINGY_MARGIN,!0),currentPopup==def){var p=def.thingy.getBoundingClientRect()


pos={left:parseFloat(def.thingy.style.left)||p.left,width:p.width,top:parseFloat(def.thingy.style.top)||p.top,
height:p.height},popup.style.transition="0.5s",setPosition(popup,pos,def,popup.offsetWidth,popup.offsetHeight,POPUP_MARGIN,!1,!0)

}}else currentPopup==def&&hidePopup(),def.thingy.parentNode.removeChild(def.thingy),def.thingy=def.el=null
else drawThingy(def),def.thingy&&!currentPopup&&showPopup(def)})}function delayCheck(){setTimeout(check,500)

}function show(list){return c9.isReady?(draw(),thingies.forEach(function(def){if(!def.thingy||list&&list[def.name])return void(def.thingy&&(def.thingy.style.display="none"))


if(def.el){if(!def.el.offsetWidth&&!def.el.offsetHeight)return void delete def.el}else drawThingy(def)


def.thingy.style.display="block",def.shown=!1}),emit("show"),showing=!0,void enable()):c9.on("ready",function(){
setTimeout(function(){show(list)})})}function hide(){drawn&&(thingies.forEach(function(def){def.thingy&&(def.thingy.style.display="none",
def.thingy.classList.remove("active"),delete def.shown)}),hidePopup(),currentPopup=null,emit("hide"),
showing=!1,disable())}var thingies,popup,showing,currentPopup,timer,listen,Plugin=imports.Plugin,ui=imports.ui,menus=imports.menus,commands=imports.commands,c9=(imports.settings,
imports.c9),analytics=(imports.info,imports["c9.analytics"]),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),RIGHT=2,LEFT=4,BOTTOM=8,TOP=16,THINGY_MARGIN=0,THINGY_SIZE=10,POPUP_MARGIN=17,drawn=!1


plugin.on("load",function(){load()}),plugin.on("unload",function(){drawn=!1,showing=!1,thingies=null,
popup=null,showing=null,currentPopup=null,timer=null,listen=null}),plugin.freezePublicAPI({get showing(){
return showing},_events:["show","hide"],add:add,show:show,hide:hide}),register(null,{guide:plugin})}return main.consumes=["Plugin","ui","commands","menus","settings","info","c9.analytics","c9"],
main.provides=["guide"],main})


define("text!plugins/c9.ide.help/help.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "aboutDialog"\n      icon      = ""\n      kbclose   = "true"\n      center    = "true"\n      width     = "512"\n      skinset   = "help-skin"\n      buttons   = "close"\n      skin      = "win-help-about"\n      class     = "aboutDialogBox">\n        <div class="aboutImage">\n            <div id="c9Version" textselect="true">Version</div>\n             <!-- <div class="c9Legal">\n            <p><a href="http://www.bettercallsaul.com/">Click here for legal notices.</p>\n            </div> -->\n            <div class="c9StaffHeader">\n                <p>Cloud9 is brought to you by:</p>\n            </div>\n            <div class="c9Staff">\n                <p textselect="true">\n                    Alex Brausewetter, Arron Bailiss, Bas de Wachter, Dan Armendariz, Dana Ivan,\n                    Fabian Jakobs, Harutyun Amirjanyan, Ivar Pruijn, Justin Dray, Lennart Kats, Luca Cipriani,\n                    Mostafa Eweda, Matthijs van Henten, Nikolai Onken, Suraj Biyani, Tim Robinson, Ruben Daniels\n                </p>\n            </div>\n            <div class="c9Copyright">\n                <p>&#169; 2010 \u2014 2017 Cloud9 Inc. All rights reserved</p>\n            </div>\n        </div>\n    </a:window>\n</a:application>\n')


define("text!plugins/c9.ide.help/style.css",[],"")


define("text!plugins/c9.ide.help/skin.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:modalwindow name="win-help-about">\n        <a:style><![CDATA[]]></a:style>\n    \n        <a:presentation>\n            <a:main\n              collapsed-height = "26"\n              minheight        = "50"\n              minwidth         = "50"\n              drag             = "div[2]"\n              container        = "div[2]"\n              title            = "div[2]/text()"\n              buttons          = "div[1]">\n                <div class="win-help-about">\n                    <div class="buttons"></div>\n                    <div class="wh-container"> </div>\n                </div>\n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n            <a:cover>\n                <div opacity="0"> </div>\n            </a:cover>\n        </a:presentation>\n    </a:modalwindow>\n</a:skin>')


define("plugins/c9.ide.help/help",[],function(require,exports,module){function main(options,imports,register){
function load(){function fetchBlog(){if(!fetched&&c9.has(c9.NETWORK)){fetched=!0
var blogURL="https://c9.io/site/?json=get_tag_posts&tag_slug=changelog&count=1"
http.jsonP(blogURL,function(jsonBlog){if(jsonBlog){var latestDate=""
try{latestDate=" ("+jsonBlog.posts[0].date.split(" ")[0].replace(/-/g,".")+")"}catch(e){console.error("Changelog JSON parse failed: "+e)

}}})}}if(menus.addItemByPath("Cloud9/About Cloud9",new ui.item({onclick:function(){showAbout()}}),100,plugin),
options.hosted){var mnuHelp=new ui.menu
menus.addItemByPath("Support/",mnuHelp,900,plugin)
var c=0
menus.addItemByPath("Support/Check Cloud9 Status",new ui.item({onclick:function(){window.open("http://status.c9.io")

}}),c+=100,plugin),menus.addItemByPath("Support/~",new ui.divider,c+=100,plugin),menus.addItemByPath("Support/Get Help (Community)",new ui.item({
onclick:function(){analytics.track("Visited Cloud9 Community"),window.open("https://community.c9.io")

}}),c+=100,plugin),menus.addItemByPath("Support/~",new ui.divider,c+=300,plugin),menus.addItemByPath("Support/Read Documentation",new ui.item({
onclick:function(){window.open("https://docs.c9.io/docs")}}),c+=100,plugin),menus.addItemByPath("Support/Request a Feature",new ui.item({
onclick:function(){window.open("https://community.c9.io/c/feature-requests")}}),c+=100,plugin),menus.addItemByPath("Support/Go To YouTube Channel",new ui.item({
onclick:function(){window.open("http://www.youtube.com/user/c9ide/videos?view=pl")}}),c+=100,plugin),
c=0,(c9.hosted||c9.local)&&(c9.on("state.change",fetchBlog),fetchBlog())
var fetched=!1}}function draw(){drawn||(drawn=!0,ui.insertSkin({name:"help-skin",data:require("text!./skin.xml"),
"media-path":options.staticPrefix+"/images/","icon-path":options.staticPrefix+"/icons/"},plugin),ui.insertCss(css,options.staticPrefix,plugin),
ui.insertMarkup(null,markup,plugin),aboutDialog=plugin.getElement("aboutDialog"),emit("draw"))}function showAbout(){
draw(),aboutDialog.show()
var version=c9.version.replace(/([a-f\d]{10})[a-f\d]{30}/,"$1")
document.getElementById("c9Version").textContent="Version "+version}var aboutDialog,c9=imports.c9,Plugin=imports.Plugin,http=imports.http,ui=imports.ui,menus=imports.menus,analytics=imports["c9.analytics"],markup=require("text!./help.xml"),css=require("text!./style.css"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){drawn=!1}),plugin.freezePublicAPI({showAbout:showAbout}),register(null,{
help:plugin})}return main.consumes=["Plugin","c9","menus","layout","ui","http","c9.analytics"],main.provides=["help"],
main})


define("plugins/c9.cli.bridge/bridge_commands",[],function(require,exports,module){function main(options,imports,register){
function load(){bridge.on("message",function(e){var message=e.message
switch(message.type){case"open":open(message,e.respond)
break
case"exec":exec(message,e.respond)
break
case"pipe":createPipe(message,e.respond)
break
case"pipeData":updatePipe(message,e.respond)
break
case"ping":e.respond(null,!0)
break
default:message.type&&console.error("Unknown Bridge Command: ",message.type)}},plugin),settings.on("read",function(e){
settings.setDefaults("user/terminal",[["defaultEnvEditor","false"]])},plugin),prefs.add({Editors:{Terminal:{
"Use Cloud9 as the Default Editor":{type:"checkbox",path:"user/terminal/@defaultEnvEditor",position:14e3
}}}},plugin)}function createPipe(message,callback){tabManager.once("ready",function(){tabManager.open({
focus:!0,editorType:"ace",path:message.path&&c9.toInternalPath(message.path),document:{meta:{newfile:!0
}}},function(err,tab){return err?callback(err):void callback(null,tab.path||tab.name)})})}function updatePipe(message,callback){
tabManager.once("ready",function(){var tab=tabManager.findTab(message.tab),c9Session=tab&&tab.document.getSession()


c9Session&&c9Session.session&&c9Session.session.insert({row:Number.MAX_VALUE,column:Number.MAX_VALUE},message.data),
callback(null,!0)})}function open(message,callback){var i=-1,tabs=[]
BASEPATH=c9.toInternalPath(BASEPATH),async.each(message.paths,function(info,next){var path=info.path
if(i++,path=c9.toInternalPath(path),"~"!==path.charAt(0)){if(path.substr(0,BASEPATH.length)!==BASEPATH)return


path=path.substr(BASEPATH.length)}if("directory"==info.type){path=path.replace(/\/$/,""),panels.activate("tree")


var node=favs.addFavorite(path)
tree.expand(path,function(){tree.select(node),tree.scrollToSelection(),next()}),tree.focus()}else tabManager.once("ready",function(){
var m=/:(\d*)(?::(\d*))?$/.exec(path),jump={}
m&&(m[1]&&(jump.row=parseInt(m[1],10)-1),m[2]&&(jump.column=parseInt(m[2],10)),path=path.slice(0,m.index)),
fs.exists(path,function(existing){var tab=tabManager.open({path:path,focus:0===i,document:existing?{ace:{
jump:jump}}:{meta:{newfile:!0}}},function(){setTimeout(next)})
message.wait&&tab.on("close",function(){tabs.splice(tabs.indexOf(tab),1),tabs.length||callback(null,!0)

}),tabs.push(tab)})})},function(err){return err?callback(err):void(message.wait&&tabs.length||callback(null,!0))

})}function exec(message,callback){var result=commands.exec(message.command,message.args),err=result?null:"command failed"


callback(err,result)}var Plugin=imports.Plugin,bridge=imports.bridge,tabManager=imports.tabManager,panels=imports.panels,tree=imports.tree,settings=imports.settings,favs=imports["tree.favorites"],fs=imports.fs,c9=imports.c9,prefs=imports.preferences,commands=imports.commands,async=require("async"),plugin=new Plugin("Ajax.org",main.consumes),BASEPATH=options.basePath


plugin.on("load",function(){load()}),plugin.on("unload",function(){}),plugin.freezePublicAPI({}),register(null,{
"bridge.commands":plugin})}return main.consumes=["Plugin","bridge","tabManager","panels","tree.favorites","tree","fs","preferences","settings","c9","commands"],
main.provides=["bridge.commands"],main})


define("plugins/c9.cli.bridge/json-stream",[],function(require,exports,module){var EventEmitter=require("events").EventEmitter


module.exports=function(stream){var emit=this.emit.bind(this),buffer=""
stream.on("data",function(chunk){buffer+=chunk
for(var parts=buffer.split("\n");parts.length;)try{var message=JSON.parse(parts[0])
emit("data",message),parts.shift()}catch(e){if(1===parts.length)break
emit("error",e),parts.shift()}buffer=parts.join("\n")}),stream.on("error",function(err){emit("error",err)

}),stream.on("close",function(data){emit("close",data)}),this.write=function(data){stream.write(JSON.stringify(data)+"\n")

}},module.exports.prototype=new EventEmitter})


define("text!plugins/c9.cli.bridge/bridge-service.js",[],'module.exports = function (vfs, options, register) { \n    var stream;\n    \n    var net = require("net");\n    var Stream = require(\'stream\');\n    var path = require("path");\n    \n    var SOCKET = process.platform == "win32"\n        ? "\\\\\\\\.\\\\pipe\\\\.c9\\\\bridge.socket"\n        : process.env.HOME + "/.c9/bridge.socket";\n\n    function createListenClient(api) {\n        var client = net.connect(SOCKET, function(data) {\n            api.onConnect(client);\n        });\n        client.setEncoding("utf8");\n        client.unref();\n        \n        client.on("data", function(data) {\n            if (data) api.onData(data);\n        });\n        \n        client.on("error", function(err) {\n            if (err.code == "ECONNREFUSED") {\n                require("fs").unlink(SOCKET, function() { \n                    createListenServer(api);\n                });\n            }\n            else if (err.code == "ENOENT") {\n                createListenServer(api);\n            }\n            else\n                api.onError(err);\n        });\n        \n        client.on("end", function() {\n            createListenServer(api);\n        });\n        \n        \n        api.disconnect = function() {\n            client.end();\n        };\n        \n        return client;\n    }\n    \n    function createListenServer(api) {\n        function broadcast(data, client) {\n            clients.forEach(function(c) {\n                if (c != client)\n                    c.write(data);\n            });\n        }\n        function registerClient(client) {\n            if (client.setEncoding)\n                client.setEncoding("utf8");\n            \n            client.on("data", function(data) {\n                broadcast(data, client);\n            });\n            function cleanup(e) {\n                var i = clients.indexOf(client);\n                if (i != -1)\n                    clients.splice(i, 1);\n\n                client.removeListener("end", cleanup);\n                client.removeListener("error", cleanup);\n            }\n            client.on("end", cleanup);\n            client.on("error", cleanup);\n            \n\n            clients.push(client);\n        }\n\n        var clients = [];\n        var stream = new Stream();\n        stream.readable = true;\n        stream.writable = true;\n        stream.write = function(e) {\n            api.onData(e);\n        };\n        registerClient(stream);\n        api.onConnect({ write: function(e) { \n            stream.emit("data", e); }\n        });\n        var unixServer = net.createServer(registerClient);\n        unixServer.listen(SOCKET);\n        \n        var socketDirExists = false;\n        unixServer.on("error", function(err) {\n            if (err.code == "EADDRINUSE") {\n                createListenClient(api);\n            }\n            else if (err.code == "EACCES" && !socketDirExists) {\n                vfs.mkdirP(path.dirname(SOCKET), {}, function() {\n                    socketDirExists = true;\n                    unixServer.listen(SOCKET);\n                });\n            }\n            else\n                api.onError(err);\n        });\n        \n        api.disconnect = function() {\n            unixServer.close();\n        };\n    }\n    \n    register(null, {\n        connect: function (callback) {\n            if (stream) return callback(null, { stream: stream });\n            \n            stream = new Stream();\n            stream.readable = true;\n            stream.writable = true;\n            stream.write = function(data) {\n                if (client) client.write(data);\n            };\n            \n            var client;\n            var sent = false;\n            var api = this.api = {\n                id: Math.random(), \n                onConnect: function(c) {\n                    client = c;\n                    if (sent) return;\n                    \n                    callback(null, { stream: stream });\n                    sent = true;\n                },\n                onData: function(data) {\n                    stream && stream.emit("data", data);\n                },\n                onError: function(err) {\n                    stream && stream.emit("error", err);\n                }\n            };\n            createListenClient(api);\n        },\n        \n        disconnect: function() {\n            try { this.api && this.api.disconnect(); }\n            catch (e) {}\n            \n            stream = null;\n            delete this.api;\n        },\n        \n        destroy: function() {\n            this.disconnect();\n        }\n    });\n};')


define("plugins/c9.cli.bridge/bridge",[],function(require,exports,module){function main(options,imports,register){
function load(){ENABLED&&(ext.loadRemotePlugin("bridge",{code:c9.standalone?void 0:require("text!./bridge-service.js"),
file:c9.standalone?"c9.cli.bridge/bridge-service.js":void 0,redefine:!0},function(err,remote){return err?console.error(err):(api=remote,
void api.connect(function(err,meta){return err?console.error(err):(stream=new JSONStream(meta.stream),
stream.on("error",function(err){console.error(err)}),stream.on("data",function(payload){emit("message",{
message:payload.message,respond:function(err,message){stream.write({id:payload.id,message:message,error:err
})}})}),stream.on("close",function(){load()}),void emit.sticky("ready"))}))}),window.addEventListener("unload",function(){
api&&api.disconnect()}))}function write(json){return stream?void stream.write(json):void plugin.once("ready",function(){
write(json)})}var stream,api,Plugin=imports.Plugin,c9=imports.c9,ext=imports.ext,JSONStream=require("./json-stream"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),ENABLED=options.startBridge!==!1


plugin.on("load",function(){c9.connected?load():c9.on("connect",load,plugin)}),plugin.on("unload",function(){
api&&api.disconnect(),stream=null,api=null}),plugin.freezePublicAPI({write:write}),register(null,{bridge:plugin
})}return main.consumes=["c9","Plugin","ext"],main.provides=["bridge"],main})


define("text!plugins/c9.ide.welcome/style.css",[],"")


define("text!plugins/c9.ide.welcome/welcome.html",[],'<div class="welcome">\n    <div class="main">\n        <div class="welcome-logo"></div>\n        <div class="welcome-heading">Welcome</div>\n        <div class="intro">\n            \n        </div>\n        \n        <div class="presets">\n            <h3>Choose a Preset</h3>\n            <div class="preset_container">\n                <div class="preset active" id="default">\n                    <label>Full IDE</label>\n                </div>\n                <div class="preset" id="minimal">\n                    <label>Minimal Editor</label>\n                </div>\n                <div class="preset" id="sublime">\n                    <label>Sublime Mode</label>\n                </div>\n            </div>\n        </div>\n        \n        <div class="configure">\n            <h3>Configure Cloud9</h3>\n            <div class="form"></div>\n            <div class="more">more settings...</div>\n        </div>\n        \n        <div class="next">\n            <h3>Next Steps</h3>\n            <ul>\n                <li class="openterminal">Open a Terminal</li>\n                <li class="openconsole">Open the Console</li>\n                <li class="newfile">Create a new file</li>\n            </ul>\n        </div>\n        \n        <div class="switched">\n            <h2>The Cloud9 Minimal Editor Layout</h2>\n            <p>While in this layout the buttons for several handy panels are \n            hidden from view by default. You can gain access to these panels using key bindings.\n            The list below are the most commonly used key bindings. For an \n            exhaustive list visit the key bindings editor in the preference panel. \n            You can also use the menus in the toolbar to find commands by walking \n            throught the sub menus.</p>\n            \n            <table>\n                <tr>\n                    <th>Key</th>\n                    <th>Command</th>\n                </tr>\n                <tr>\n                    <td>Command-U</td>\n                    <td>Show and Hide the File Tree</td>\n                </tr>\n                <tr>\n                    <td>Command-E</td>\n                    <td>Show and Hide the Navigate Panel</td>\n                </tr>\n                <tr>\n                    <td>Command-Shift-E</td>\n                    <td>Show and Hide the Outline Panel</td>\n                </tr>\n                <tr>\n                    <td>Command-,</td>\n                    <td>Show and Hide the Preference Panel</td>\n                </tr>\n                <tr>\n                    <td>Command-F</td>\n                    <td>Show the Find and Replace Panel</td>\n                </tr>\n                <tr>\n                    <td>Command-Shift-F</td>\n                    <td>Show the Find in Files Panel</td>\n                </tr>\n            </table>\n            \n            <button onclick="this.parentNode.style.display=\'none\'">Ok, Got it!</button>\n        </div>\n    </div>\n    \n    <div class="sidepanel">\n        <!--h3>Walkthroughs</h3>\n        <div class="video">\n            <iframe width="250" height="141" src="https://www.youtube.com/embed/bUfrKO0YueM?html5=1" frameborder="0" allowfullscreen></iframe>\n            <label>Cloud9 - The introduction</label>\n        </div>\n        <div class="more"><a href="https://www.youtube.com/user/c9ide/videos?flow=grid&amp;view=1" target="_blank">more...</a></div-->\n        \n        <h3>The Cloud9 Blog</h3>\n        <div class="article">\n            <h4><a href="https://c9.io/blog/edit-from-the-cloud9-terminal-like-a-boss-6-2-2015/" target="_blank">Edit from the Cloud9 Terminal like a Boss!</a></h4>\n            <p>Since the dark ages when the green on black screens were the only interface to a machine, the terminal has been a coder\u2019s best friend.</p>\n            <p>This has been especially true with the advent of command line driven ecosystems like the Ruby and the Node.js communities.</p> \n        </div>\n        <div class="more"><a href="https://blog.c9.io" target="_blank">more...</a></div>\n        \n        <h3>Docs</h3>\n        <div class="article">\n            <h4><a href="https://docs.c9.io/v1.0/docs/setup-a-database" target="_blank">Set up a Database</a></h4>\n            <p>Like to run a Database with your application? You can use any Database you like! We have guides for MySQL, MongoDB and more on our documentation site.</p>\n        </div>\n        <div class="article">\n            <h4><a href="https://docs.c9.io/v1.0/docs/faq-general" target="_blank">General FAQ</a></h4>\n            <p>Have a question about Cloud9? It\'s probably covered in our <a href="https://docs.c9.io/v1.0/docs/faq-general" target="_blank">FAQ</a>. If it\'s not send us a message through our <a href="https://c9.io/support" target="_blank">support page</a> and we\'ll get back to you as soon as possible!</p>\n        </div>\n        <div class="more"><a href="https://docs.c9.io/v1.0/docs" target="_blank">more...</a></div>\n        \n        <br /><br />\n    </div>\n</html>\n')


define("plugins/c9.ide.welcome/welcome",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,menus.addItemByPath("Cloud9/Welcome Page",new ui.item({onclick:function(){
tabManager.openEditor("welcome",!0,function(){})}}),320,handle),void tabManager.once("ready",function(){
if(settings.on("read",function(e){return e.reset?void settings.set("user/welcome/@first",!0):void(settings.getBool("user/welcome/@first")||show(function(){
settings.set("user/welcome/@first",!0)}))},handle),window.location.hash.match(/#openfile-(.*)/)){var file="/"+RegExp.$1


fs.exists(file,function(exists){exists&&commands.exec("preview",null,{path:file,focus:options.focusOpenFile||!1
})})}},handle))}function draw(){drawn||(drawn=!0,options.checkOS&&fs.stat("~/"+c9.projectId,function(err,stat){
err||stat.fullPath!=join(c9.home,"workspace")||(drawn?intro.innerHTML=WELCOME_INTRO+OS_INTRO:WELCOME_INTRO+=OS_INTRO)

}),ui.insertCss(require("text!./style.css"),options.staticPrefix,handle))}function search(){var found,tabs=tabManager.getTabs()


return tabs.every(function(tab){return!tab.document.meta.welcome||(found=tab,!1)}),found}function show(cb){
var tab=search()
return tab?tabManager.focusTab(tab):void tabManager.open({editorType:"welcome",noanim:!0,active:!0},cb)

}function Welcome(){var container,plugin=new Editor("Ajax.org",main.consumes,[])
return plugin.on("draw",function(e){draw(),container=e.htmlNode
var html=require("text!./welcome.html"),nodes=ui.insertHtml(container,html,plugin),node=nodes[0]
intro=node.querySelector(".intro"),intro.innerHTML=WELCOME_INTRO
var list=[],themes=ace.themes
for(var base in themes)themes[base]instanceof Array?themes[base].forEach(function(n){var themeprop=Object.keys(n)[0]


list.push({caption:themeprop,value:n[themeprop]})}):list.push({caption:base,value:themes[base]})
for(var current,preset,presetClick=function(){var value=this.id
current.className="preset",this.className="preset active",current=this,"default"==value||settings.getBool("user/welcome/@switched")||setTimeout(function(){
var div=container.querySelector(".switched")
div.style.display="block",apf.isMac||(div.innerHTML=div.innerHTML.replace(/Command/g,"Ctrl")),settings.set("user/welcome/@switched",!0)

},500),setTimeout(function(){layout.setBaseLayout(value)})},presets=node.querySelectorAll(".preset"),i=0;i<presets.length;i++)~(preset=presets[i]).className.indexOf("active")&&(current=preset),
preset.addEventListener("click",presetClick)
var form=new Form({edge:"3 3 8 3",rowheight:40,colwidth:150,style:"padding:10px;",form:[{title:"Main Theme",
type:"dropdown",path:"user/general/@skin",width:190,items:[{caption:"Cloud9 Classic Dark Theme",value:"dark"
},{caption:"Cloud9 Flat Light Theme",value:"flat-light"}],position:100},{title:"Split Layout",type:"dropdown",
width:190,defaultValue:"nosplit",onchange:function(e){commands.exec(e.value)},items:[{caption:"No Split",
value:"nosplit"},{caption:"Two Vertical Split",value:"twovsplit"},{caption:"Two Horizontal Split",value:"twohsplit"
},{caption:"Four Split",value:"foursplit"},{caption:"Three Split (Left)",value:"threeleft"},{caption:"Three Split (Right)",
value:"threeright"}],position:150},{title:"Editor (Ace) Theme",type:"dropdown",path:"user/ace/@theme",
width:190,onchange:function(e){ace.setTheme(e.value)},items:list,position:180},{title:"Keyboard Mode",
type:"dropdown",path:"user/ace/@keyboardmode",width:190,items:[{caption:"Default",value:"default"},{caption:"Vim",
value:"vim"},{caption:"Emacs",value:"emacs"},{caption:"Sublime",value:"sublime"}],position:190},{title:"Soft Tabs",
type:"checked-spinner",checkboxPath:"project/ace/@useSoftTabs",path:"project/ace/@tabSize",min:"1",max:"64",
width:"50",position:200}]})
form.attachTo(container.querySelector(".configure .form")),container.querySelector(".configure .more").onclick=function(){
commands.exec("openpreferences")},container.querySelector(".openterminal").onclick=function(){tabManager.openEditor("terminal",!0,function(){})

},container.querySelector(".openconsole").onclick=function(){commands.exec("toggleconsole")},container.querySelector(".newfile").onclick=function(){
commands.exec("newfile")}}),plugin.on("load",function(){}),plugin.on("documentLoad",function(e){function setTheme(e){
var isDark="dark"==e.theme,backgroundColor=defaults[e.theme]
backgroundColor&&(tab.backgroundColor=backgroundColor,isDark?tab.classList.add("dark"):tab.classList.remove("dark"))

}var doc=e.doc,tab=doc.tab
layout.on("themeChange",setTheme,doc),setTheme({theme:settings.get("user/general/@skin")}),doc.title="Welcome",
doc.meta.welcome=!0}),plugin.freezePublicAPI({}),plugin.load(null,"welcome"),plugin}var intro,Editor=imports.Editor,editors=imports.editors,ui=imports.ui,fs=imports.fs,c9=imports.c9,ace=imports.ace,commands=imports.commands,layout=imports.layout,tabManager=imports.tabManager,settings=imports.settings,Form=imports.Form,menus=imports.menus,join=require("path").join,handle=editors.register("welcome","URL Viewer",Welcome,[]),WELCOME_INTRO=(options.intro||"").replace(/\n/g,"<br />"),OS_INTRO="\n You can now use sudo and apt-get to manage your workspace!",defaults={
"flat-light":"#F8FDFF","flat-dark":"#203947",light:"#b7c9d4","light-gray":"#b7c9d4",dark:"#203947","dark-gray":"#203947"
},loaded=!1,drawn=!1
handle.on("load",load),register(null,{welcome:handle})}return main.consumes=["Editor","editors","ui","tabManager","settings","Form","commands","fs","ace","layout","c9","menus"],
main.provides=["welcome"],main})


define("plugins/c9.ide.info/info",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&void(loaded=!0)}function getUser(callback,noCache){return noCache?api.user.get("",function(err,data){
return err?callback(err):(user=data,void callback(err,data))}):callback?callback(null,user):user}function getWorkspace(callback,noCache){
return noCache?api.project.get("",function(err,data){return err?callback(err):(project=data,void callback(err,data))

}):callback?callback(null,project):project}var Plugin=imports.Plugin,api=imports.api
assert(options.user&&options.project,"Both options.user and options.project need to be set for 'info' to work")


var plugin=new Plugin("Ajax.org",main.consumes),user=options.user,project=options.project,loaded=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({getUser:getUser,getWorkspace:getWorkspace,
_events:["afterfilesave"]}),register(null,{info:plugin})}var assert=require("c9/assert")
return main.consumes=["Plugin","api"],main.provides=["info"],main})


define("plugins/c9.ide.download/download",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,menus.addItemByPath("File/Download Project",new ui.item({
onclick:downloadProject}),1300,plugin),tree.getElement("mnuCtxTree",function(mnuCtxTree){menus.addItemToMenu(mnuCtxTree,new ui.item({
match:"folder|project",isAvailable:function(){return tree.selectedNode},caption:"Download",onclick:download
}),140,plugin)}),prefs.add({General:{"Tree & Navigate":{"Download Files As":{type:"dropdown",path:SETTING_PATH,
items:[{caption:"auto",value:"auto"},{caption:"tar.gz",value:"tar.gz"},{caption:"zip",value:"zip"}],position:5e3
}}}},plugin),void settings.on("read",function(){settings.setDefaults("user/general",[[SETTING_NAME,"auto"]])

},plugin))}function download(){if(c9.has(c9.STORAGE)){var node=tree.selectedNode
if(node){var paths=tree.selectedNodes.map(function(node){return util.normalizePath(node.path)})
node.isFolder&&"/"==node.path?downloadProject():paths.length>1?downloadPaths(paths):node.isFolder?downloadFolder(paths[0]):downloadFile(paths[0])

}}}function downloadProject(){vfs.download("/",makeArchiveFilename(info.getWorkspace().name))}function downloadPaths(paths){
var lastPart=paths[0].match(/([^\/]*)\/?$/)[1],filename=lastPart?lastPart+"[+"+(paths.length-1)+"]":info.getWorkspace().name


vfs.download(paths,makeArchiveFilename(filename))}function downloadFolder(path){var withTrailingSlash=path.replace(/\/*$/,"/"),parts=withTrailingSlash.split("/"),folderName=parts[parts.length-2]


vfs.download(withTrailingSlash,makeArchiveFilename(folderName))}function downloadFile(path){vfs.download(path.replace(/\/*$/,""),null,!0)

}function makeArchiveFilename(filename){return filename+getArchiveFileExtension()}function getArchiveFileExtension(){
var downloadFilesAs=settings.get(SETTING_PATH)
return"auto"!==downloadFilesAs&&downloadFilesAs||(downloadFilesAs=/Win/.test(navigator.platform)?"zip":"tar.gz"),
"."+downloadFilesAs}var Plugin=imports.Plugin,ui=imports.ui,c9=imports.c9,util=imports.util,menus=imports.menus,tree=imports.tree,vfs=imports.vfs,info=imports.info,prefs=imports.preferences,settings=imports.settings,SETTING_NAME="downloadFilesAs",SETTING_PATH="user/general/@"+SETTING_NAME,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({}),register(null,{download:plugin})}return main.consumes=["Plugin","c9","ui","menus","tree","info","vfs","preferences","settings","util"],
main.provides=["download"],main})


define("require",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0
var requirejs,require,define
!function(global){function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){
return"[object Array]"===ostring.call(it)}function each(ary,func){if(ary){var i
for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}}function eachReverse(ary,func){if(ary){var i


for(i=ary.length-1;i>-1&&(!ary[i]||!func(ary[i],i,ary));i-=1);}}function hasProp(obj,prop){return hasOwn.call(obj,prop)

}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop
for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){
return source&&eachProp(source,function(value,prop){!force&&hasProp(target,prop)||(deepStringMixin&&"string"!=typeof value?(target[prop]||(target[prop]={}),
mixin(target[prop],value,force,deepStringMixin)):target[prop]=value)}),target}function bind(obj,fn){return function(){
return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){
throw err}function getGlobal(value){if(!value)return value
var g=global
return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){
var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id)
return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}function newContext(contextName){
function trimDots(ary){var i,part
for(i=0;ary[i];i+=1)if(part=ary[i],"."===part)ary.splice(i,1),i-=1
else if(".."===part){if(1===i&&(".."===ary[2]||".."===ary[0]))break
i>0&&(ary.splice(i-1,2),i-=2)}}function normalize(name,baseName,applyMap){var pkgName,pkgConfig,mapValue,nameParts,i,j,nameSegment,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),normalizedBaseParts=baseParts,map=config.map,starMap=map&&map["*"]


if(name&&"."===name.charAt(0)&&(baseName?(normalizedBaseParts=getOwn(config.pkgs,baseName)?baseParts=[baseName]:baseParts.slice(0,baseParts.length-1),
name=normalizedBaseParts.concat(name.split("/")),trimDots(name),pkgConfig=getOwn(config.pkgs,pkgName=name[0]),
name=name.join("/"),pkgConfig&&name===pkgName+"/"+pkgConfig.main&&(name=pkgName)):0===name.indexOf("./")&&(name=name.substring(2))),
applyMap&&map&&(baseParts||starMap)){for(nameParts=name.split("/"),i=nameParts.length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),
baseParts)for(j=baseParts.length;j>0;j-=1)if(mapValue=getOwn(map,baseParts.slice(0,j).join("/")),mapValue&&(mapValue=getOwn(mapValue,nameSegment))){
foundMap=mapValue,foundI=i
break}if(foundMap)break
!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)

}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),
name=nameParts.join("/"))}return name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){
if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName)return scriptNode.parentNode.removeChild(scriptNode),
!0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id)
if(pathConfig&&isArray(pathConfig)&&pathConfig.length>1)return pathConfig.shift(),context.require.undef(id),
context.require([id]),!0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1
return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]

}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName=""


return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),nameParts=splitPrefix(name),prefix=nameParts[0],
name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),
name&&(prefix?normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){
return normalize(name,parentName,applyMap)}):normalize(name,parentName,applyMap):(normalizedName=normalize(name,parentName,applyMap),
nameParts=splitPrefix(normalizedName),prefix=nameParts[0],normalizedName=nameParts[1],isNormalized=!0,
url=context.nameToUrl(normalizedName))),suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1),
{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,
isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){
var id=depMap.id,mod=getOwn(registry,id)
return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id)


!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap),mod.error&&"error"===name?fn(mod.error):mod.on(name,fn)):"defined"===name&&fn(defined[id])

}function onError(err,errback){var ids=err.requireModules,notified=!1
errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id)
mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))

}function takeGlobalQueue(){globalDefQueue.length&&(apsp.apply(defQueue,[defQueue.length-1,0].concat(globalDefQueue)),
globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function breakCycle(mod,traced,processed){
var id=mod.map.id
mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId)


!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))

}),processed[id]=!0)}function checkLoaded(){var map,modId,err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0


if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){if(map=mod.map,modId=map.id,
mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?(usingPathFallback=!0,
stillLoading=!0):(noLoads.push(modId),removeScript(modId))
else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1

}),expired&&noLoads.length)return err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads),
err.contextName=context.contextName,onError(err)
needCycleCheck&&each(reqCalls,function(mod){breakCycle(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){
checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])

}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)

}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement
return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),
{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args
for(takeGlobalQueue();defQueue.length;){if(args=defQueue.shift(),null===args[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]))


callGetModule(args)}}var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,
baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},requireCounter=1,unnormalizedCounter=1


return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)

},exports:function(mod){if(mod.usingExports=!0,mod.map.isDefine)return mod.exports?mod.exports:mod.exports=defined[mod.map.id]={}

},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){
var c,pkg=getOwn(config.pkgs,mod.map.id)
return c=pkg?getOwn(config.config,mod.map.id+"/"+pkg.main):getOwn(config.config,mod.map.id),c||{}},exports:defined[mod.map.id]
}}},Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),
this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},Module.prototype={
init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,
errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)

})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,
options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,
this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime()


var map=this.map
return this.shim?void context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){
return map.prefix?this.callPlugin():this.load()})):map.prefix?this.callPlugin():this.load()}},load:function(){
var url=this.map.url
urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){
var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory


if(this.inited){if(this.error)this.emit("error",this.error)
else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{
exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports)


if(this.map.isDefine&&(cjsModule=this.module,cjsModule&&void 0!==cjsModule.exports&&cjsModule.exports!==this.exports?exports=cjsModule.exports:void 0===exports&&this.usingExports&&(exports=this.exports)),
err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",
onError(this.error=err)}else exports=factory
this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad&&req.onResourceLoad(context,this.map,this.depMaps)),
cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,
this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){
var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix)
this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{
enableBuildCallback:!0})
return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)

})||""),normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap),on(normalizedMap,"defined",bind(this,function(value){
this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),normalizedMod=getOwn(registry,normalizedMap.id),
void(normalizedMod&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){
this.emit("error",err)})),normalizedMod.enable()))):(load=bind(this,function(value){this.init([],function(){
return value},null,{enabled:!0})}),load.error=bind(this,function(err){this.inited=!0,this.error=err,err.requireModules=[id],
eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)

}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive


textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id])


try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))

}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)

}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap

},enable:function(){enabledRegistry[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){
var id,mod,handler
if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),
this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return void(this.depExports[i]=handler(this))


this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.defineDep(i,depExports),this.check()

})),this.errback&&on(depMap,"error",bind(this,this.errback))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)

})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id)
mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){
var cbs=this.events[name]
cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){
cb(evt)}),"error"===name&&delete this.events[name]}},context={config:config,contextName:contextName,registry:registry,
defined:defined,urlFetched:urlFetched,defQueue:defQueue,Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,
onError:onError,configure:function(cfg){cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/")


var pkgs=config.pkgs,shim=config.shim,objs={paths:!0,config:!0,map:!0}
eachProp(cfg,function(value,prop){objs[prop]?"map"===prop?(config.map||(config.map={}),mixin(config[prop],value,!0,!0)):mixin(config[prop],value,!0):config[prop]=value

}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),
shim[id]=value}),config.shim=shim),cfg.packages&&(each(cfg.packages,function(pkgObj){var location
pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj,location=pkgObj.location,pkgs[pkgObj.name]={name:pkgObj.name,
location:location||pkgObj.name,main:(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")
}}),config.pkgs=pkgs),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id))

}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){
function fn(){var ret
return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)

}return fn},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,map,requireMod


return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(map=makeModuleMap(deps,relMap,!1,!0),
id=map.id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),
context.nextTick(function(){intakeDefines(),requireMod=getModule(makeModuleMap(null,relMap)),requireMod.skipMap=options.skipMap,
requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}return options=options||{},
mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0],isRelative="."===segment||".."===segment


return index!==-1&&(!isRelative||index>1)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),
moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)

},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){
return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(localRequire.undef=function(id){
takeGlobalQueue()
var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id)
removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),
cleanRegistry(id))}),localRequire},enable:function(depMap){var mod=getOwn(registry,depMap.id)
mod&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports


for(takeGlobalQueue();defQueue.length;){if(args=defQueue.shift(),null===args[0]){if(args[0]=moduleName,
found)break
found=!0}else args[0]===moduleName&&(found=!0)
callGetModule(args)}if(mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){
if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]))


callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){
var paths,pkgs,pkg,pkgPath,syms,i,parentModule,url,parentPath
if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"")
else{for(paths=config.paths,pkgs=config.pkgs,syms=moduleName.split("/"),i=syms.length;i>0;i-=1){if(parentModule=syms.slice(0,i).join("/"),
pkg=getOwn(pkgs,parentModule),parentPath=getOwn(paths,parentModule)){isArray(parentPath)&&(parentPath=parentPath[0]),
syms.splice(0,i,parentPath)
break}if(pkg){pkgPath=moduleName===pkg.name?pkg.location+"/"+pkg.main:pkg.location,syms.splice(0,i,pkgPath)


break}}url=syms.join("/"),url+=ext||(/^data\:|\?/.test(url)||skipExt?"":".js"),url=("/"===url.charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url

}return config.urlArgs?url+((url.indexOf("?")===-1?"?":"&")+config.urlArgs):url},load:function(id,url){
req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)

},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){
interactiveScript=null
var data=getScriptData(evt)
context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt)
if(!hasPathFallback(data.id))return onError(makeError("scripterror","Script error for: "+data.id,evt,[data.id]))

}},context.require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(script){
if("interactive"===script.readyState)return interactiveScript=script}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1


if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return
cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),
req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName
return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,
errback=optional):deps=[]),config&&config.context&&(contextName=config.context),context=getOwn(contexts,contextName),
context||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),
context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick="undefined"!=typeof setTimeout?function(fn){
setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,
req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){
req[prop]=function(){var ctx=contexts[defContextName]
return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],
baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),
req.onError=defaultOnError,req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script")


return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node},req.load=function(context,moduleName,url){
var node,config=context&&context.config||{}
if(isBrowser)return node=req.createNode(config,moduleName,url),node.setAttribute("data-requirecontext",context.contextName),
node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),
node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),
node.src=url,currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),
currentlyAddingScript=null,node
if(isWebWorker)try{importScripts(url),context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))

}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){if(head||(head=script.parentNode),
dataMain=script.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),
mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),
req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],
!0}),define=function(name,deps,callback){var node,context
"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],
callback.length&&(callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){
deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),
useInteractive&&(node=currentlyAddingScript||getInteractiveScript(),node&&(name||(name=node.getAttribute("data-requiremodule")),
context=contexts[node.getAttribute("data-requirecontext")])),(context?context.defQueue:globalDefQueue).push([name,deps,callback])

},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this)})


define("plugins/c9.ide.format/formatters/lib_jsbeautify",["require","exports","module"],function(_r,_e,module){
var define,window=module.exports={}
Object.values||(Object.values=function(o){if(o!==Object(o))throw new TypeError("Object.values called on a non-object")


var p,k=[]
for(p in o)Object.prototype.hasOwnProperty.call(o,p)&&k.push(o[p])
return k}),function(){var legacy_beautify_js=function(modules){function __webpack_require__(moduleId){
if(installedModules[moduleId])return installedModules[moduleId].exports
var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}}
return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports

}var installedModules={}
return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){
return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{
configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){
return module["default"]}:function(){return module}
return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){
return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=6)

}([function(module,exports){var nonASCIIidentifierStartChars="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",nonASCIIidentifierChars="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]")


exports.newline=/[\n\r\u2028\u2029]/,exports.lineBreak=new RegExp("\r\n|"+exports.newline.source),exports.allLineBreaks=new RegExp(exports.lineBreak.source,"g"),
exports.isIdentifierStart=function(code){return code<65?36===code||64===code:code<91||(code<97?95===code:code<123||code>=170&&nonASCIIidentifierStart.test(String.fromCharCode(code)))

},exports.isIdentifierChar=function(code){return code<48?36===code:code<58||!(code<65)&&(code<91||(code<97?95===code:code<123||code>=170&&nonASCIIidentifier.test(String.fromCharCode(code))))

}},function(module,exports,__webpack_require__){function remove_redundant_indentation(output,frame){if(!frame.multiline_frame&&frame.mode!==MODE.ForInitializer&&frame.mode!==MODE.Conditional){
var start_index=frame.start_line_index
output.remove_indent(start_index)}}function in_array(what,arr){for(var i=0;i<arr.length;i+=1)if(arr[i]===what)return!0


return!1}function trim(s){return s.replace(/^\s+|\s+$/g,"")}function ltrim(s){return s.replace(/^\s+/g,"")

}function sanitizeOperatorPosition(opPosition){opPosition=opPosition||OPERATOR_POSITION.before_newline


var validPositionValues=Object.values(OPERATOR_POSITION)
if(!in_array(opPosition,validPositionValues))throw new Error("Invalid Option Value: The option 'operator_position' must be one of the following values\n"+validPositionValues+"\nYou passed in: '"+opPosition+"'")


return opPosition}function Beautifier(js_source_text,options){"use strict"
function create_flags(flags_base,mode){var next_indent_level=0
flags_base&&(next_indent_level=flags_base.indentation_level,!output.just_added_newline()&&flags_base.line_indent_level>next_indent_level&&(next_indent_level=flags_base.line_indent_level))


var next_flags={mode:mode,parent:flags_base,last_text:flags_base?flags_base.last_text:"",last_word:flags_base?flags_base.last_word:"",
declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,
do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:next_indent_level,
line_indent_level:flags_base?flags_base.line_indent_level:next_indent_level,start_line_index:output.get_line_number(),
ternary_depth:0}
return next_flags}function handle_whitespace_and_comments(local_token,preserve_statement_flags){for(var newlines=local_token.newlines,keep_whitespace=opt.keep_array_indentation&&is_array(flags.mode),temp_token=current_token,h=0;h<local_token.comments_before.length;h++)current_token=local_token.comments_before[h],
handle_whitespace_and_comments(current_token,preserve_statement_flags),handlers[current_token.type](preserve_statement_flags)


if(current_token=temp_token,keep_whitespace)for(var i=0;i<newlines;i+=1)print_newline(i>0,preserve_statement_flags)
else if(opt.max_preserve_newlines&&newlines>opt.max_preserve_newlines&&(newlines=opt.max_preserve_newlines),
opt.preserve_newlines&&local_token.newlines>1){print_newline(!1,preserve_statement_flags)
for(var j=1;j<newlines;j+=1)print_newline(!0,preserve_statement_flags)}}function split_linebreaks(s){
s=s.replace(acorn.allLineBreaks,"\n")
for(var out=[],idx=s.indexOf("\n");idx!==-1;)out.push(s.substring(0,idx)),s=s.substring(idx+1),idx=s.indexOf("\n")


return s.length&&out.push(s),out}function allow_wrap_or_preserved_newline(force_linewrap){if(force_linewrap=void 0!==force_linewrap&&force_linewrap,
!output.just_added_newline()){var shouldPreserveOrForce=opt.preserve_newlines&&current_token.wanted_newline||force_linewrap,operatorLogicApplies=in_array(flags.last_text,tokenizer.positionable_operators)||in_array(current_token.text,tokenizer.positionable_operators)


if(operatorLogicApplies){var shouldPrintOperatorNewline=in_array(flags.last_text,tokenizer.positionable_operators)&&in_array(opt.operator_position,OPERATOR_POSITION_BEFORE_OR_PRESERVE)||in_array(current_token.text,tokenizer.positionable_operators)


shouldPreserveOrForce=shouldPreserveOrForce&&shouldPrintOperatorNewline}if(shouldPreserveOrForce)print_newline(!1,!0)
else if(opt.wrap_line_length){if("TK_RESERVED"===last_type&&in_array(flags.last_text,newline_restricted_tokens))return


var proposed_line_length=output.current_line.get_character_count()+current_token.text.length+(output.space_before_token?1:0)


proposed_line_length>=opt.wrap_line_length&&print_newline(!1,!0)}}}function print_newline(force_newline,preserve_statement_flags){
if(!preserve_statement_flags&&";"!==flags.last_text&&","!==flags.last_text&&"="!==flags.last_text&&"TK_OPERATOR"!==last_type)for(var next_token=get_token(1);!(flags.mode!==MODE.Statement||flags.if_block&&next_token&&"TK_RESERVED"===next_token.type&&"else"===next_token.text||flags.do_block);)restore_mode()


output.add_new_line(force_newline)&&(flags.multiline_frame=!0)}function print_token_line_indentation(){
output.just_added_newline()&&(opt.keep_array_indentation&&is_array(flags.mode)&&current_token.wanted_newline?(output.current_line.push(current_token.whitespace_before),
output.space_before_token=!1):output.set_indent(flags.indentation_level)&&(flags.line_indent_level=flags.indentation_level))

}function print_token(printable_token){if(output.raw)return void output.add_raw_token(current_token)
if(opt.comma_first&&"TK_COMMA"===last_type&&output.just_added_newline()&&","===output.previous_line.last()){
var popped=output.previous_line.pop()
output.previous_line.is_empty()&&(output.previous_line.push(popped),output.trim(!0),output.current_line.pop(),
output.trim()),print_token_line_indentation(),output.add_token(","),output.space_before_token=!0}printable_token=printable_token||current_token.text,
print_token_line_indentation(),output.add_token(printable_token)}function indent(){flags.indentation_level+=1

}function deindent(){flags.indentation_level>0&&(!flags.parent||flags.indentation_level>flags.parent.indentation_level)&&(flags.indentation_level-=1)

}function set_mode(mode){flags?(flag_store.push(flags),previous_flags=flags):previous_flags=create_flags(null,mode),
flags=create_flags(previous_flags,mode)}function is_array(mode){return mode===MODE.ArrayLiteral}function is_expression(mode){
return in_array(mode,[MODE.Expression,MODE.ForInitializer,MODE.Conditional])}function restore_mode(){
flag_store.length>0&&(previous_flags=flags,flags=flag_store.pop(),previous_flags.mode===MODE.Statement&&remove_redundant_indentation(output,previous_flags))

}function start_of_object_property(){return flags.parent.mode===MODE.ObjectLiteral&&flags.mode===MODE.Statement&&(":"===flags.last_text&&0===flags.ternary_depth||"TK_RESERVED"===last_type&&in_array(flags.last_text,["get","set"]))

}function start_of_statement(){return!!("TK_RESERVED"===last_type&&in_array(flags.last_text,["var","let","const"])&&"TK_WORD"===current_token.type||"TK_RESERVED"===last_type&&"do"===flags.last_text||"TK_RESERVED"===last_type&&in_array(flags.last_text,["return","throw"])&&!current_token.wanted_newline||"TK_RESERVED"===last_type&&"else"===flags.last_text&&("TK_RESERVED"!==current_token.type||"if"!==current_token.text||current_token.comments_before.length)||"TK_END_EXPR"===last_type&&(previous_flags.mode===MODE.ForInitializer||previous_flags.mode===MODE.Conditional)||"TK_WORD"===last_type&&flags.mode===MODE.BlockStatement&&!flags.in_case&&"--"!==current_token.text&&"++"!==current_token.text&&"function"!==last_last_text&&"TK_WORD"!==current_token.type&&"TK_RESERVED"!==current_token.type||flags.mode===MODE.ObjectLiteral&&(":"===flags.last_text&&0===flags.ternary_depth||"TK_RESERVED"===last_type&&in_array(flags.last_text,["get","set"])))&&(set_mode(MODE.Statement),
indent(),handle_whitespace_and_comments(current_token,!0),start_of_object_property()||allow_wrap_or_preserved_newline("TK_RESERVED"===current_token.type&&in_array(current_token.text,["do","for","if","while"])),
!0)}function all_lines_start_with(lines,c){for(var i=0;i<lines.length;i++){var line=trim(lines[i])
if(line.charAt(0)!==c)return!1}return!0}function each_line_matches_indent(lines,indent){for(var line,i=0,len=lines.length;i<len;i++)if(line=lines[i],
line&&0!==line.indexOf(indent))return!1
return!0}function is_special_word(word){return in_array(word,["case","return","do","if","throw","else"])

}function get_token(offset){var index=token_pos+(offset||0)
return index<0||index>=tokens.length?null:tokens[index]}function handle_start_expr(){start_of_statement()||handle_whitespace_and_comments(current_token)


var next_mode=MODE.Expression
if("["===current_token.text){if("TK_WORD"===last_type||")"===flags.last_text)return"TK_RESERVED"===last_type&&in_array(flags.last_text,tokenizer.line_starters)&&(output.space_before_token=!0),
set_mode(next_mode),print_token(),indent(),void(opt.space_in_paren&&(output.space_before_token=!0))
next_mode=MODE.ArrayLiteral,is_array(flags.mode)&&("["!==flags.last_text&&(","!==flags.last_text||"]"!==last_last_text&&"}"!==last_last_text)||opt.keep_array_indentation||print_newline())

}else"TK_RESERVED"===last_type&&"for"===flags.last_text?next_mode=MODE.ForInitializer:"TK_RESERVED"===last_type&&in_array(flags.last_text,["if","while"])&&(next_mode=MODE.Conditional)


";"===flags.last_text||"TK_START_BLOCK"===last_type?print_newline():"TK_END_EXPR"===last_type||"TK_START_EXPR"===last_type||"TK_END_BLOCK"===last_type||"."===flags.last_text?allow_wrap_or_preserved_newline(current_token.wanted_newline):"TK_RESERVED"===last_type&&"("===current_token.text||"TK_WORD"===last_type||"TK_OPERATOR"===last_type?"TK_RESERVED"===last_type&&("function"===flags.last_word||"typeof"===flags.last_word)||"*"===flags.last_text&&(in_array(last_last_text,["function","yield"])||flags.mode===MODE.ObjectLiteral&&in_array(last_last_text,["{",","]))?opt.space_after_anon_function&&(output.space_before_token=!0):"TK_RESERVED"!==last_type||!in_array(flags.last_text,tokenizer.line_starters)&&"catch"!==flags.last_text||opt.space_before_conditional&&(output.space_before_token=!0):output.space_before_token=!0,
"("===current_token.text&&"TK_RESERVED"===last_type&&"await"===flags.last_word&&(output.space_before_token=!0),
"("===current_token.text&&("TK_EQUALS"!==last_type&&"TK_OPERATOR"!==last_type||start_of_object_property()||allow_wrap_or_preserved_newline()),
"("===current_token.text&&"TK_WORD"!==last_type&&"TK_RESERVED"!==last_type&&allow_wrap_or_preserved_newline(),
set_mode(next_mode),print_token(),opt.space_in_paren&&(output.space_before_token=!0),indent()}function handle_end_expr(){
for(;flags.mode===MODE.Statement;)restore_mode()
handle_whitespace_and_comments(current_token),flags.multiline_frame&&allow_wrap_or_preserved_newline("]"===current_token.text&&is_array(flags.mode)&&!opt.keep_array_indentation),
opt.space_in_paren&&("TK_START_EXPR"!==last_type||opt.space_in_empty_paren?output.space_before_token=!0:(output.trim(),
output.space_before_token=!1)),"]"===current_token.text&&opt.keep_array_indentation?(print_token(),restore_mode()):(restore_mode(),
print_token()),remove_redundant_indentation(output,previous_flags),flags.do_while&&previous_flags.mode===MODE.Conditional&&(previous_flags.mode=MODE.Expression,
flags.do_block=!1,flags.do_while=!1)}function handle_start_block(){handle_whitespace_and_comments(current_token)


var next_token=get_token(1),second_token=get_token(2)
set_mode(second_token&&(in_array(second_token.text,[":",","])&&in_array(next_token.type,["TK_STRING","TK_WORD","TK_RESERVED"])||in_array(next_token.text,["get","set","..."])&&in_array(second_token.type,["TK_WORD","TK_RESERVED"]))?in_array(last_last_text,["class","interface"])?MODE.BlockStatement:MODE.ObjectLiteral:"TK_OPERATOR"===last_type&&"=>"===flags.last_text?MODE.BlockStatement:in_array(last_type,["TK_EQUALS","TK_START_EXPR","TK_COMMA","TK_OPERATOR"])||"TK_RESERVED"===last_type&&in_array(flags.last_text,["return","throw","import","default"])?MODE.ObjectLiteral:MODE.BlockStatement)


var empty_braces=!next_token.comments_before.length&&"}"===next_token.text,empty_anonymous_function=empty_braces&&"function"===flags.last_word&&"TK_END_EXPR"===last_type


if(opt.brace_preserve_inline){var index=0,check_token=null
flags.inline_frame=!0
do if(index+=1,check_token=get_token(index),check_token.wanted_newline){flags.inline_frame=!1
break}while("TK_EOF"!==check_token.type&&("TK_END_BLOCK"!==check_token.type||check_token.opened!==current_token))

}("expand"===opt.brace_style||"none"===opt.brace_style&&current_token.wanted_newline)&&!flags.inline_frame?"TK_OPERATOR"!==last_type&&(empty_anonymous_function||"TK_EQUALS"===last_type||"TK_RESERVED"===last_type&&is_special_word(flags.last_text)&&"else"!==flags.last_text)?output.space_before_token=!0:print_newline(!1,!0):(!is_array(previous_flags.mode)||"TK_START_EXPR"!==last_type&&"TK_COMMA"!==last_type||(("TK_COMMA"===last_type||opt.space_in_paren)&&(output.space_before_token=!0),
("TK_COMMA"===last_type||"TK_START_EXPR"===last_type&&flags.inline_frame)&&(allow_wrap_or_preserved_newline(),
previous_flags.multiline_frame=previous_flags.multiline_frame||flags.multiline_frame,flags.multiline_frame=!1)),
"TK_OPERATOR"!==last_type&&"TK_START_EXPR"!==last_type&&("TK_START_BLOCK"!==last_type||flags.inline_frame?output.space_before_token=!0:print_newline())),
print_token(),indent()}function handle_end_block(){for(handle_whitespace_and_comments(current_token);flags.mode===MODE.Statement;)restore_mode()


var empty_braces="TK_START_BLOCK"===last_type
flags.inline_frame&&!empty_braces?output.space_before_token=!0:"expand"===opt.brace_style?empty_braces||print_newline():empty_braces||(is_array(flags.mode)&&opt.keep_array_indentation?(opt.keep_array_indentation=!1,
print_newline(),opt.keep_array_indentation=!0):print_newline()),restore_mode(),print_token()}function handle_word(){
if("TK_RESERVED"===current_token.type)if(in_array(current_token.text,["set","get"])&&flags.mode!==MODE.ObjectLiteral)current_token.type="TK_WORD"
else if(in_array(current_token.text,["as","from"])&&!flags.import_block)current_token.type="TK_WORD"
else if(flags.mode===MODE.ObjectLiteral){var next_token=get_token(1)
":"===next_token.text&&(current_token.type="TK_WORD")}if(start_of_statement()?"TK_RESERVED"===last_type&&in_array(flags.last_text,["var","let","const"])&&"TK_WORD"===current_token.type&&(flags.declaration_statement=!0):!current_token.wanted_newline||is_expression(flags.mode)||"TK_OPERATOR"===last_type&&"--"!==flags.last_text&&"++"!==flags.last_text||"TK_EQUALS"===last_type||!opt.preserve_newlines&&"TK_RESERVED"===last_type&&in_array(flags.last_text,["var","let","const","set","get"])?handle_whitespace_and_comments(current_token):(handle_whitespace_and_comments(current_token),
print_newline()),flags.do_block&&!flags.do_while){if("TK_RESERVED"===current_token.type&&"while"===current_token.text)return output.space_before_token=!0,
print_token(),output.space_before_token=!0,void(flags.do_while=!0)
print_newline(),flags.do_block=!1}if(flags.if_block)if(flags.else_block||"TK_RESERVED"!==current_token.type||"else"!==current_token.text){
for(;flags.mode===MODE.Statement;)restore_mode()
flags.if_block=!1,flags.else_block=!1}else flags.else_block=!0
if("TK_RESERVED"===current_token.type&&("case"===current_token.text||"default"===current_token.text&&flags.in_case_statement))return print_newline(),
(flags.case_body||opt.jslint_happy)&&(deindent(),flags.case_body=!1),print_token(),flags.in_case=!0,void(flags.in_case_statement=!0)


if("TK_COMMA"!==last_type&&"TK_START_EXPR"!==last_type&&"TK_EQUALS"!==last_type&&"TK_OPERATOR"!==last_type||start_of_object_property()||allow_wrap_or_preserved_newline(),
"TK_RESERVED"===current_token.type&&"function"===current_token.text)return(in_array(flags.last_text,["}",";"])||output.just_added_newline()&&!in_array(flags.last_text,["(","[","{",":","=",","])&&"TK_OPERATOR"!==last_type)&&(output.just_added_blankline()||current_token.comments_before.length||(print_newline(),
print_newline(!0))),"TK_RESERVED"===last_type||"TK_WORD"===last_type?"TK_RESERVED"===last_type&&in_array(flags.last_text,["get","set","new","return","export","async"])?output.space_before_token=!0:"TK_RESERVED"===last_type&&"default"===flags.last_text&&"export"===last_last_text?output.space_before_token=!0:print_newline():"TK_OPERATOR"===last_type||"="===flags.last_text?output.space_before_token=!0:(flags.multiline_frame||!is_expression(flags.mode)&&!is_array(flags.mode))&&print_newline(),
print_token(),void(flags.last_word=current_token.text)
if(prefix="NONE","TK_END_BLOCK"===last_type?previous_flags.inline_frame?prefix="SPACE":"TK_RESERVED"===current_token.type&&in_array(current_token.text,["else","catch","finally","from"])?"expand"===opt.brace_style||"end-expand"===opt.brace_style||"none"===opt.brace_style&&current_token.wanted_newline?prefix="NEWLINE":(prefix="SPACE",
output.space_before_token=!0):prefix="NEWLINE":"TK_SEMICOLON"===last_type&&flags.mode===MODE.BlockStatement?prefix="NEWLINE":"TK_SEMICOLON"===last_type&&is_expression(flags.mode)?prefix="SPACE":"TK_STRING"===last_type?prefix="NEWLINE":"TK_RESERVED"===last_type||"TK_WORD"===last_type||"*"===flags.last_text&&(in_array(last_last_text,["function","yield"])||flags.mode===MODE.ObjectLiteral&&in_array(last_last_text,["{",","]))?prefix="SPACE":"TK_START_BLOCK"===last_type?prefix=flags.inline_frame?"SPACE":"NEWLINE":"TK_END_EXPR"===last_type&&(output.space_before_token=!0,
prefix="NEWLINE"),"TK_RESERVED"===current_token.type&&in_array(current_token.text,tokenizer.line_starters)&&")"!==flags.last_text&&(prefix=flags.inline_frame||"else"===flags.last_text||"export"===flags.last_text?"SPACE":"NEWLINE"),
"TK_RESERVED"===current_token.type&&in_array(current_token.text,["else","catch","finally"]))if(("TK_END_BLOCK"!==last_type||previous_flags.mode!==MODE.BlockStatement||"expand"===opt.brace_style||"end-expand"===opt.brace_style||"none"===opt.brace_style&&current_token.wanted_newline)&&!flags.inline_frame)print_newline()
else{output.trim(!0)
var line=output.current_line
"}"!==line.last()&&print_newline(),output.space_before_token=!0}else"NEWLINE"===prefix?"TK_RESERVED"===last_type&&is_special_word(flags.last_text)?output.space_before_token=!0:"TK_END_EXPR"!==last_type?"TK_START_EXPR"===last_type&&"TK_RESERVED"===current_token.type&&in_array(current_token.text,["var","let","const"])||":"===flags.last_text||("TK_RESERVED"===current_token.type&&"if"===current_token.text&&"else"===flags.last_text?output.space_before_token=!0:print_newline()):"TK_RESERVED"===current_token.type&&in_array(current_token.text,tokenizer.line_starters)&&")"!==flags.last_text&&print_newline():flags.multiline_frame&&is_array(flags.mode)&&","===flags.last_text&&"}"===last_last_text?print_newline():"SPACE"===prefix&&(output.space_before_token=!0)


print_token(),flags.last_word=current_token.text,"TK_RESERVED"===current_token.type&&("do"===current_token.text?flags.do_block=!0:"if"===current_token.text?flags.if_block=!0:"import"===current_token.text?flags.import_block=!0:flags.import_block&&"TK_RESERVED"===current_token.type&&"from"===current_token.text&&(flags.import_block=!1))

}function handle_semicolon(){start_of_statement()?output.space_before_token=!1:handle_whitespace_and_comments(current_token)


for(var next_token=get_token(1);!(flags.mode!==MODE.Statement||flags.if_block&&next_token&&"TK_RESERVED"===next_token.type&&"else"===next_token.text||flags.do_block);)restore_mode()


flags.import_block&&(flags.import_block=!1),print_token()}function handle_string(){start_of_statement()?output.space_before_token=!0:(handle_whitespace_and_comments(current_token),
"TK_RESERVED"===last_type||"TK_WORD"===last_type||flags.inline_frame?output.space_before_token=!0:"TK_COMMA"===last_type||"TK_START_EXPR"===last_type||"TK_EQUALS"===last_type||"TK_OPERATOR"===last_type?start_of_object_property()||allow_wrap_or_preserved_newline():print_newline()),
print_token()}function handle_equals(){start_of_statement()||handle_whitespace_and_comments(current_token),
flags.declaration_statement&&(flags.declaration_assignment=!0),output.space_before_token=!0,print_token(),
output.space_before_token=!0}function handle_comma(){handle_whitespace_and_comments(current_token,!0),
print_token(),output.space_before_token=!0,flags.declaration_statement?(is_expression(flags.parent.mode)&&(flags.declaration_assignment=!1),
flags.declaration_assignment?(flags.declaration_assignment=!1,print_newline(!1,!0)):opt.comma_first&&allow_wrap_or_preserved_newline()):flags.mode===MODE.ObjectLiteral||flags.mode===MODE.Statement&&flags.parent.mode===MODE.ObjectLiteral?(flags.mode===MODE.Statement&&restore_mode(),
flags.inline_frame||print_newline()):opt.comma_first&&allow_wrap_or_preserved_newline()}function handle_operator(){
var isGeneratorAsterisk="*"===current_token.text&&("TK_RESERVED"===last_type&&in_array(flags.last_text,["function","yield"])||in_array(last_type,["TK_START_BLOCK","TK_COMMA","TK_END_BLOCK","TK_SEMICOLON"])),isUnary=in_array(current_token.text,["-","+"])&&(in_array(last_type,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||in_array(flags.last_text,tokenizer.line_starters)||","===flags.last_text)


if(start_of_statement());else{var preserve_statement_flags=!isGeneratorAsterisk
handle_whitespace_and_comments(current_token,preserve_statement_flags)}if("TK_RESERVED"===last_type&&is_special_word(flags.last_text))return output.space_before_token=!0,
void print_token()
if("*"===current_token.text&&"TK_DOT"===last_type)return void print_token()
if("::"===current_token.text)return void print_token()
if("TK_OPERATOR"===last_type&&in_array(opt.operator_position,OPERATOR_POSITION_BEFORE_OR_PRESERVE)&&allow_wrap_or_preserved_newline(),
":"===current_token.text&&flags.in_case)return flags.case_body=!0,indent(),print_token(),print_newline(),
void(flags.in_case=!1)
var space_before=!0,space_after=!0,in_ternary=!1
if(":"===current_token.text?0===flags.ternary_depth?space_before=!1:(flags.ternary_depth-=1,in_ternary=!0):"?"===current_token.text&&(flags.ternary_depth+=1),
!isUnary&&!isGeneratorAsterisk&&opt.preserve_newlines&&in_array(current_token.text,tokenizer.positionable_operators)){
var isColon=":"===current_token.text,isTernaryColon=isColon&&in_ternary,isOtherColon=isColon&&!in_ternary


switch(opt.operator_position){case OPERATOR_POSITION.before_newline:return output.space_before_token=!isOtherColon,
print_token(),isColon&&!isTernaryColon||allow_wrap_or_preserved_newline(),void(output.space_before_token=!0)


case OPERATOR_POSITION.after_newline:return output.space_before_token=!0,!isColon||isTernaryColon?get_token(1).wanted_newline?print_newline(!1,!0):allow_wrap_or_preserved_newline():output.space_before_token=!1,
print_token(),void(output.space_before_token=!0)
case OPERATOR_POSITION.preserve_newline:return isOtherColon||allow_wrap_or_preserved_newline(),space_before=!(output.just_added_newline()||isOtherColon),
output.space_before_token=space_before,print_token(),void(output.space_before_token=!0)}}if(isGeneratorAsterisk){
allow_wrap_or_preserved_newline(),space_before=!1
var next_token=get_token(1)
space_after=next_token&&in_array(next_token.type,["TK_WORD","TK_RESERVED"])}else"..."===current_token.text?(allow_wrap_or_preserved_newline(),
space_before="TK_START_BLOCK"===last_type,space_after=!1):(in_array(current_token.text,["--","++","!","~"])||isUnary)&&(space_before=!1,
space_after=!1,!current_token.wanted_newline||"--"!==current_token.text&&"++"!==current_token.text||print_newline(!1,!0),
";"===flags.last_text&&is_expression(flags.mode)&&(space_before=!0),"TK_RESERVED"===last_type?space_before=!0:"TK_END_EXPR"===last_type?space_before=!("]"===flags.last_text&&("--"===current_token.text||"++"===current_token.text)):"TK_OPERATOR"===last_type&&(space_before=in_array(current_token.text,["--","-","++","+"])&&in_array(flags.last_text,["--","-","++","+"]),
in_array(current_token.text,["+","-"])&&in_array(flags.last_text,["--","++"])&&(space_after=!0)),(flags.mode!==MODE.BlockStatement||flags.inline_frame)&&flags.mode!==MODE.Statement||"{"!==flags.last_text&&";"!==flags.last_text||print_newline())


output.space_before_token=output.space_before_token||space_before,print_token(),output.space_before_token=space_after

}function handle_block_comment(preserve_statement_flags){if(output.raw)return output.add_raw_token(current_token),
void(current_token.directives&&"end"===current_token.directives.preserve&&(output.raw=opt.test_output_raw))


if(current_token.directives)return print_newline(!1,preserve_statement_flags),print_token(),"start"===current_token.directives.preserve&&(output.raw=!0),
void print_newline(!1,!0)
if(!acorn.newline.test(current_token.text)&&!current_token.wanted_newline)return output.space_before_token=!0,
print_token(),void(output.space_before_token=!0)
var j,lines=split_linebreaks(current_token.text),javadoc=!1,starless=!1,lastIndent=current_token.whitespace_before,lastIndentLength=lastIndent.length


for(print_newline(!1,preserve_statement_flags),lines.length>1&&(javadoc=all_lines_start_with(lines.slice(1),"*"),
starless=each_line_matches_indent(lines.slice(1),lastIndent)),print_token(lines[0]),j=1;j<lines.length;j++)print_newline(!1,!0),
javadoc?print_token(" "+ltrim(lines[j])):starless&&lines[j].length>lastIndentLength?print_token(lines[j].substring(lastIndentLength)):output.add_token(lines[j])


print_newline(!1,preserve_statement_flags)}function handle_comment(preserve_statement_flags){current_token.wanted_newline?print_newline(!1,preserve_statement_flags):output.trim(!0),
output.space_before_token=!0,print_token(),print_newline(!1,preserve_statement_flags)}function handle_dot(){
start_of_statement()||handle_whitespace_and_comments(current_token,!0),"TK_RESERVED"===last_type&&is_special_word(flags.last_text)?output.space_before_token=!0:allow_wrap_or_preserved_newline(")"===flags.last_text&&opt.break_chained_methods),
print_token()}function handle_unknown(preserve_statement_flags){print_token(),"\n"===current_token.text[current_token.text.length-1]&&print_newline(!1,preserve_statement_flags)

}function handle_eof(){for(;flags.mode===MODE.Statement;)restore_mode()
handle_whitespace_and_comments(current_token)}var output,token_pos,tokenizer,current_token,last_type,last_last_text,indent_string,flags,previous_flags,flag_store,prefix,handlers,opt,tokens=[],baseIndentString=""


handlers={TK_START_EXPR:handle_start_expr,TK_END_EXPR:handle_end_expr,TK_START_BLOCK:handle_start_block,
TK_END_BLOCK:handle_end_block,TK_WORD:handle_word,TK_RESERVED:handle_word,TK_SEMICOLON:handle_semicolon,
TK_STRING:handle_string,TK_EQUALS:handle_equals,TK_OPERATOR:handle_operator,TK_COMMA:handle_comma,TK_BLOCK_COMMENT:handle_block_comment,
TK_COMMENT:handle_comment,TK_DOT:handle_dot,TK_UNKNOWN:handle_unknown,TK_EOF:handle_eof},options=options?options:{},
options=mergeOpts(options,"js"),opt={},"expand-strict"===options.brace_style?options.brace_style="expand":"collapse-preserve-inline"===options.brace_style?options.brace_style="collapse,preserve-inline":void 0!==options.braces_on_own_line?options.brace_style=options.braces_on_own_line?"expand":"collapse":options.brace_style||(options.brace_style="collapse")


var brace_style_split=options.brace_style.split(/[^a-zA-Z0-9_\-]+/)
for(opt.brace_style=brace_style_split[0],opt.brace_preserve_inline=!!brace_style_split[1]&&brace_style_split[1],
opt.indent_size=options.indent_size?parseInt(options.indent_size,10):4,opt.indent_char=options.indent_char?options.indent_char:" ",
opt.eol=options.eol?options.eol:"auto",opt.preserve_newlines=void 0===options.preserve_newlines||options.preserve_newlines,
opt.break_chained_methods=void 0!==options.break_chained_methods&&options.break_chained_methods,opt.max_preserve_newlines=void 0===options.max_preserve_newlines?0:parseInt(options.max_preserve_newlines,10),
opt.space_in_paren=void 0!==options.space_in_paren&&options.space_in_paren,opt.space_in_empty_paren=void 0!==options.space_in_empty_paren&&options.space_in_empty_paren,
opt.jslint_happy=void 0!==options.jslint_happy&&options.jslint_happy,opt.space_after_anon_function=void 0!==options.space_after_anon_function&&options.space_after_anon_function,
opt.keep_array_indentation=void 0!==options.keep_array_indentation&&options.keep_array_indentation,opt.space_before_conditional=void 0===options.space_before_conditional||options.space_before_conditional,
opt.unescape_strings=void 0!==options.unescape_strings&&options.unescape_strings,opt.wrap_line_length=void 0===options.wrap_line_length?0:parseInt(options.wrap_line_length,10),
opt.e4x=void 0!==options.e4x&&options.e4x,opt.end_with_newline=void 0!==options.end_with_newline&&options.end_with_newline,
opt.comma_first=void 0!==options.comma_first&&options.comma_first,opt.operator_position=sanitizeOperatorPosition(options.operator_position),
opt.test_output_raw=void 0!==options.test_output_raw&&options.test_output_raw,opt.jslint_happy&&(opt.space_after_anon_function=!0),
options.indent_with_tabs&&(opt.indent_char="\t",opt.indent_size=1),"auto"===opt.eol&&(opt.eol="\n",js_source_text&&acorn.lineBreak.test(js_source_text||"")&&(opt.eol=js_source_text.match(acorn.lineBreak)[0])),
opt.eol=opt.eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),indent_string="";opt.indent_size>0;)indent_string+=opt.indent_char,
opt.indent_size-=1
var preindent_index=0
if(js_source_text&&js_source_text.length){for(;" "===js_source_text.charAt(preindent_index)||"\t"===js_source_text.charAt(preindent_index);)preindent_index+=1


baseIndentString=js_source_text.substring(0,preindent_index),js_source_text=js_source_text.substring(preindent_index)

}last_type="TK_START_BLOCK",last_last_text="",output=new Output(indent_string,baseIndentString),output.raw=opt.test_output_raw,
flag_store=[],set_mode(MODE.BlockStatement),this.beautify=function(){var sweet_code
for(tokenizer=new Tokenizer(js_source_text,opt,indent_string),tokens=tokenizer.tokenize(),token_pos=0,
current_token=get_token();current_token;)handlers[current_token.type](),last_last_text=flags.last_text,
last_type=current_token.type,flags.last_text=current_token.text,token_pos+=1,current_token=get_token()


return sweet_code=output.get_code(opt.end_with_newline,opt.eol)}
var newline_restricted_tokens=["break","continue","return","throw"]}var mergeOpts=__webpack_require__(3).mergeOpts,acorn=__webpack_require__(0),Output=__webpack_require__(4).Output,Tokenizer=__webpack_require__(7).Tokenizer,OPERATOR_POSITION={
before_newline:"before-newline",after_newline:"after-newline",preserve_newline:"preserve-newline"},OPERATOR_POSITION_BEFORE_OR_PRESERVE=[OPERATOR_POSITION.before_newline,OPERATOR_POSITION.preserve_newline],MODE={
BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",
ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"}
module.exports.Beautifier=Beautifier},function(module,exports){function InputScanner(input){var _input=input,_input_length=_input.length,_position=0


this.back=function(){_position-=1},this.hasNext=function(){return _position<_input_length},this.next=function(){
var val=null
return this.hasNext()&&(val=_input.charAt(_position),_position+=1),val},this.peek=function(index){var val=null


return index=index||0,index+=_position,index>=0&&index<_input_length&&(val=_input.charAt(index)),val},
this.peekCharCode=function(index){var val=0
return index=index||0,index+=_position,index>=0&&index<_input_length&&(val=_input.charCodeAt(index)),
val},this.test=function(pattern,index){return index=index||0,pattern.lastIndex=_position+index,pattern.test(_input)

},this.testChar=function(pattern,index){var val=this.peek(index)
return null!==val&&pattern.test(val)},this.match=function(pattern){pattern.lastIndex=_position
var pattern_match=pattern.exec(_input)
return pattern_match&&pattern_match.index===_position?_position+=pattern_match[0].length:pattern_match=null,
pattern_match}}module.exports.InputScanner=InputScanner},function(module,exports){function mergeOpts(allOptions,targetType){
var name,finalOpts={}
for(name in allOptions)name!==targetType&&(finalOpts[name]=allOptions[name])
if(targetType in allOptions)for(name in allOptions[targetType])finalOpts[name]=allOptions[targetType][name]


return finalOpts}module.exports.mergeOpts=mergeOpts},function(module,exports){function OutputLine(parent){
var _character_count=0,_indent_count=-1,_items=[],_empty=!0
this.set_indent=function(level){_character_count=parent.baseIndentLength+level*parent.indent_length,_indent_count=level

},this.get_character_count=function(){return _character_count},this.is_empty=function(){return _empty

},this.last=function(){return this._empty?null:_items[_items.length-1]},this.push=function(input){_items.push(input),
_character_count+=input.length,_empty=!1},this.pop=function(){var item=null
return _empty||(item=_items.pop(),_character_count-=item.length,_empty=0===_items.length),item},this.remove_indent=function(){
_indent_count>0&&(_indent_count-=1,_character_count-=parent.indent_length)},this.trim=function(){for(;" "===this.last();)_items.pop(),
_character_count-=1
_empty=0===_items.length},this.toString=function(){var result=""
return this._empty||(_indent_count>=0&&(result=parent.indent_cache[_indent_count]),result+=_items.join("")),
result}}function Output(indent_string,baseIndentString){baseIndentString=baseIndentString||"",this.indent_cache=[baseIndentString],
this.baseIndentLength=baseIndentString.length,this.indent_length=indent_string.length,this.raw=!1
var lines=[]
this.baseIndentString=baseIndentString,this.indent_string=indent_string,this.previous_line=null,this.current_line=null,
this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new OutputLine(this),
lines.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return lines.length

},this.add_new_line=function(force_newline){return(1!==this.get_line_number()||!this.just_added_newline())&&(!(!force_newline&&this.just_added_newline())&&(this.raw||this.add_outputline(),
!0))},this.get_code=function(end_with_newline,eol){var sweet_code=lines.join("\n").replace(/[\r\n\t ]+$/,"")


return end_with_newline&&(sweet_code+="\n"),"\n"!==eol&&(sweet_code=sweet_code.replace(/[\n]/g,eol)),
sweet_code},this.set_indent=function(level){if(lines.length>1){for(;level>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string)


return this.current_line.set_indent(level),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(token){
for(var x=0;x<token.newlines;x++)this.add_outputline()
this.current_line.push(token.whitespace_before),this.current_line.push(token.text),this.space_before_token=!1

},this.add_token=function(printable_token){this.add_space_before_token(),this.current_line.push(printable_token)

},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),
this.space_before_token=!1},this.remove_indent=function(index){for(var output_length=lines.length;index<output_length;)lines[index].remove_indent(),
index++},this.trim=function(eat_newlines){for(eat_newlines=void 0!==eat_newlines&&eat_newlines,this.current_line.trim(indent_string,baseIndentString);eat_newlines&&lines.length>1&&this.current_line.is_empty();)lines.pop(),
this.current_line=lines[lines.length-1],this.current_line.trim()
this.previous_line=lines.length>1?lines[lines.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()

},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===lines.length)return!0
var line=lines[lines.length-2]
return line.is_empty()}return!1}}module.exports.Output=Output},function(module,exports){function Token(type,text,newlines,whitespace_before,parent){
this.type=type,this.text=text,this.comments_before=[],this.comments_after=[],this.newlines=newlines||0,
this.wanted_newline=newlines>0,this.whitespace_before=whitespace_before||"",this.parent=parent||null,
this.opened=null,this.directives=null}module.exports.Token=Token},function(module,exports,__webpack_require__){
function js_beautify(js_source_text,options){var beautifier=new Beautifier(js_source_text,options)
return beautifier.beautify()}var Beautifier=__webpack_require__(1).Beautifier
module.exports=js_beautify},function(module,exports,__webpack_require__){function trim(s){return s.replace(/^\s+|\s+$/g,"")

}function in_array(what,arr){for(var i=0;i<arr.length;i+=1)if(arr[i]===what)return!0
return!1}function Tokenizer(input_string,opts){function get_directives(text){if(!text.match(directives_block_pattern))return null


var directives={}
directive_pattern.lastIndex=0
for(var directive_match=directive_pattern.exec(text);directive_match;)directives[directive_match[1]]=directive_match[2],
directive_match=directive_pattern.exec(text)
return directives}function tokenize_next(){var resulting_string,whitespace_on_this_line=[]
n_newlines=0,whitespace_before_token=""
var c=input.next()
if(null===c)return["","TK_EOF"]
var last_token
for(last_token=tokens.length?tokens[tokens.length-1]:new Token("TK_START_BLOCK","{");in_array(c,whitespace);)if(acorn.newline.test(c)?"\n"===c&&"\r"===input.peek(-2)||(n_newlines+=1,
whitespace_on_this_line=[]):whitespace_on_this_line.push(c),c=input.next(),null===c)return["","TK_EOF"]


if(whitespace_on_this_line.length&&(whitespace_before_token=whitespace_on_this_line.join("")),digit.test(c)||"."===c&&input.testChar(digit)){
var allow_decimal=!0,allow_e=!0,local_digit=digit
for("0"===c&&input.testChar(/[XxOoBb]/)?(allow_decimal=!1,allow_e=!1,local_digit=input.testChar(/[Bb]/)?digit_bin:input.testChar(/[Oo]/)?digit_oct:digit_hex,
c+=input.next()):"."===c?allow_decimal=!1:(c="",input.back());input.testChar(local_digit);)c+=input.next(),
allow_decimal&&"."===input.peek()&&(c+=input.next(),allow_decimal=!1),allow_e&&input.testChar(/[Ee]/)&&(c+=input.next(),
input.testChar(/[+-]/)&&(c+=input.next()),allow_e=!1,allow_decimal=!1)
return[c,"TK_WORD"]}if(acorn.isIdentifierStart(input.peekCharCode(-1))){if(input.hasNext())for(;acorn.isIdentifierChar(input.peekCharCode())&&(c+=input.next(),
input.hasNext()););return"TK_DOT"===last_token.type||"TK_RESERVED"===last_token.type&&in_array(last_token.text,["set","get"])||!in_array(c,reserved_words)?[c,"TK_WORD"]:"in"===c||"of"===c?[c,"TK_OPERATOR"]:[c,"TK_RESERVED"]

}if("("===c||"["===c)return[c,"TK_START_EXPR"]
if(")"===c||"]"===c)return[c,"TK_END_EXPR"]
if("{"===c)return[c,"TK_START_BLOCK"]
if("}"===c)return[c,"TK_END_BLOCK"]
if(";"===c)return[c,"TK_SEMICOLON"]
if("/"===c){var comment_match,comment=""
if("*"===input.peek()){input.next(),comment_match=input.match(block_comment_pattern),comment="/*"+comment_match[0]


var directives=get_directives(comment)
return directives&&"start"===directives.ignore&&(comment_match=input.match(directives_end_ignore_pattern),
comment+=comment_match[0]),comment=comment.replace(acorn.allLineBreaks,"\n"),[comment,"TK_BLOCK_COMMENT",directives]

}if("/"===input.peek())return input.next(),comment_match=input.match(comment_pattern),comment="//"+comment_match[0],
[comment,"TK_COMMENT"]}var startXmlRegExp=/<()([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g


if("`"===c||"'"===c||'"'===c||("/"===c||opts.e4x&&"<"===c&&input.test(startXmlRegExp,-1))&&("TK_RESERVED"===last_token.type&&in_array(last_token.text,["return","case","throw","else","do","typeof","yield"])||"TK_END_EXPR"===last_token.type&&")"===last_token.text&&last_token.parent&&"TK_RESERVED"===last_token.parent.type&&in_array(last_token.parent.text,["if","while","for"])||in_array(last_token.type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){
var sep=c,esc=!1,has_char_escapes=!1
if(resulting_string=c,"/"===sep)for(var in_char_class=!1;input.hasNext()&&(esc||in_char_class||input.peek()!==sep)&&!input.testChar(acorn.newline);)resulting_string+=input.peek(),
esc?esc=!1:(esc="\\"===input.peek(),"["===input.peek()?in_char_class=!0:"]"===input.peek()&&(in_char_class=!1)),
input.next()
else if(opts.e4x&&"<"===sep){var xmlRegExp=/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[\s\S]+?}|!\[CDATA\[[\s\S]*?\]\])(\s+{[\s\S]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{[\s\S]+?}))*\s*(\/?)\s*>/g


input.back()
var xmlStr="",match=input.match(startXmlRegExp)
if(match){for(var rootTag=match[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),isCurlyRoot=0===rootTag.indexOf("{"),depth=0;match;){
var isEndTag=!!match[1],tagName=match[2],isSingletonTag=!!match[match.length-1]||"![CDATA["===tagName.slice(0,8)


if(!isSingletonTag&&(tagName===rootTag||isCurlyRoot&&tagName.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(isEndTag?--depth:++depth),
xmlStr+=match[0],depth<=0)break
match=input.match(xmlRegExp)}return match||(xmlStr+=input.match(/[\s\S]*/g)[0]),xmlStr=xmlStr.replace(acorn.allLineBreaks,"\n"),
[xmlStr,"TK_STRING"]}}else{var parse_string=function(delimiter,allow_unescaped_newlines,start_sub){for(var current_char;input.hasNext()&&(current_char=input.peek(),
esc||current_char!==delimiter&&(allow_unescaped_newlines||!acorn.newline.test(current_char)));)(esc||allow_unescaped_newlines)&&acorn.newline.test(current_char)?("\r"===current_char&&"\n"===input.peek(1)&&(input.next(),
current_char=input.peek()),resulting_string+="\n"):resulting_string+=current_char,esc?("x"!==current_char&&"u"!==current_char||(has_char_escapes=!0),
esc=!1):esc="\\"===current_char,input.next(),start_sub&&resulting_string.indexOf(start_sub,resulting_string.length-start_sub.length)!==-1&&("`"===delimiter?parse_string("}",allow_unescaped_newlines,"`"):parse_string("`",allow_unescaped_newlines,"${"),
input.hasNext()&&(resulting_string+=input.next()))}
"`"===sep?parse_string("`",!0,"${"):parse_string(sep)}if(has_char_escapes&&opts.unescape_strings&&(resulting_string=unescape_string(resulting_string)),
input.peek()===sep&&(resulting_string+=sep,input.next(),"/"===sep))for(;input.hasNext()&&acorn.isIdentifierStart(input.peekCharCode());)resulting_string+=input.next()


return[resulting_string,"TK_STRING"]}if("#"===c){if(0===tokens.length&&"!"===input.peek()){for(resulting_string=c;input.hasNext()&&"\n"!==c;)c=input.next(),
resulting_string+=c
return[trim(resulting_string)+"\n","TK_UNKNOWN"]}var sharp="#"
if(input.hasNext()&&input.testChar(digit)){do c=input.next(),sharp+=c
while(input.hasNext()&&"#"!==c&&"="!==c)
return"#"===c||("["===input.peek()&&"]"===input.peek(1)?(sharp+="[]",input.next(),input.next()):"{"===input.peek()&&"}"===input.peek(1)&&(sharp+="{}",
input.next(),input.next())),[sharp,"TK_WORD"]}}if("<"===c&&("?"===input.peek()||"%"===input.peek())){
input.back()
var template_match=input.match(template_pattern)
if(template_match)return c=template_match[0],c=c.replace(acorn.allLineBreaks,"\n"),[c,"TK_STRING"]}if("<"===c&&input.match(/\!--/g)){
for(c="<!--";input.hasNext()&&!input.testChar(acorn.newline);)c+=input.next()
return in_html_comment=!0,[c,"TK_COMMENT"]}if("-"===c&&in_html_comment&&input.match(/->/g))return in_html_comment=!1,
["-->","TK_COMMENT"]
if("."===c)return"."===input.peek()&&"."===input.peek(1)?(c+=input.next()+input.next(),[c,"TK_OPERATOR"]):[c,"TK_DOT"]


if(in_array(c,punct)){for(;input.hasNext()&&in_array(c+input.peek(),punct)&&(c+=input.next(),input.hasNext()););
return","===c?[c,"TK_COMMA"]:"="===c?[c,"TK_EQUALS"]:[c,"TK_OPERATOR"]}return[c,"TK_UNKNOWN"]}function unescape_string(s){
for(var out="",escaped=0,input_scan=new InputScanner(s),matched=null;input_scan.hasNext();)if(matched=input_scan.match(/([\s]|[^\\]|\\\\)+/g),
matched&&(out+=matched[0]),"\\"===input_scan.peek()){if(input_scan.next(),"x"===input_scan.peek())matched=input_scan.match(/x([0-9A-Fa-f]{2})/g)
else{if("u"!==input_scan.peek()){out+="\\",input_scan.hasNext()&&(out+=input_scan.next())
continue}matched=input_scan.match(/u([0-9A-Fa-f]{4})/g)}if(!matched)return s
if(escaped=parseInt(matched[1],16),escaped>126&&escaped<=255&&0===matched[0].indexOf("x"))return s
if(escaped>=0&&escaped<32){out+="\\"+matched[0]
continue}out+=34===escaped||39===escaped||92===escaped?"\\"+String.fromCharCode(escaped):String.fromCharCode(escaped)

}return out}var whitespace="\n\r\t ".split(""),digit=/[0-9]/,digit_bin=/[01]/,digit_oct=/[01234567]/,digit_hex=/[0123456789abcdefABCDEF]/


this.positionable_operators="!= !== % & && * ** + - / : < << <= == === > >= >> >>> ? ^ | ||".split(" ")


var punct=this.positionable_operators.concat("! %= &= *= **= ++ += , -- -= /= :: <<= = => >>= >>>= ^= |= ~ ...".split(" "))


this.line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(",")


var n_newlines,whitespace_before_token,in_html_comment,tokens,input,reserved_words=this.line_starters.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as"]),block_comment_pattern=/([\s\S]*?)((?:\*\/)|$)/g,comment_pattern=/([^\n\r\u2028\u2029]*)/g,directives_block_pattern=/\/\* beautify( \w+[:]\w+)+ \*\//g,directive_pattern=/ (\w+)[:](\w+)/g,directives_end_ignore_pattern=/([\s\S]*?)((?:\/\*\sbeautify\signore:end\s\*\/)|$)/g,template_pattern=/((<\?php|<\?=)[\s\S]*?\?>)|(<%[\s\S]*?%>)/g


this.tokenize=function(){input=new InputScanner(input_string),in_html_comment=!1,tokens=[]
for(var next,last,token_values,open=null,open_stack=[],comments=[];!last||"TK_EOF"!==last.type;){for(token_values=tokenize_next(),
next=new Token(token_values[1],token_values[0],n_newlines,whitespace_before_token);"TK_COMMENT"===next.type||"TK_BLOCK_COMMENT"===next.type||"TK_UNKNOWN"===next.type;)"TK_BLOCK_COMMENT"===next.type&&(next.directives=token_values[2]),
comments.push(next),token_values=tokenize_next(),next=new Token(token_values[1],token_values[0],n_newlines,whitespace_before_token)


comments.length&&(next.comments_before=comments,comments=[]),"TK_START_BLOCK"===next.type||"TK_START_EXPR"===next.type?(next.parent=last,
open_stack.push(open),open=next):("TK_END_BLOCK"===next.type||"TK_END_EXPR"===next.type)&&open&&("]"===next.text&&"["===open.text||")"===next.text&&"("===open.text||"}"===next.text&&"{"===open.text)&&(next.parent=open.parent,
next.opened=open,open=open_stack.pop()),tokens.push(next),last=next}return tokens}}var InputScanner=__webpack_require__(2).InputScanner,Token=__webpack_require__(5).Token,acorn=__webpack_require__(0)


module.exports.Tokenizer=Tokenizer}]),js_beautify=legacy_beautify_js
"function"==typeof define&&define.amd?define([],function(){return{js_beautify:js_beautify}}):"undefined"!=typeof exports?exports.js_beautify=js_beautify:"undefined"!=typeof window?window.js_beautify=js_beautify:"undefined"!=typeof global&&(global.js_beautify=js_beautify)

}(),function(){var legacy_beautify_css=function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports


var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}}
return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports

}var installedModules={}
return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){
return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{
configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){
return module["default"]}:function(){return module}
return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){
return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=4)

}([function(module,exports,__webpack_require__){function Beautifier(source_text,options){function next(){
return ch=source_text.charAt(++pos),ch||""}function peek(skipWhitespace){var result="",prev_pos=pos
return skipWhitespace&&eatWhitespace(),result=source_text.charAt(pos+1)||"",pos=prev_pos-1,next(),result

}function eatString(endChars){for(var start=pos;next();)if("\\"===ch)next()
else{if(endChars.indexOf(ch)!==-1)break
if("\n"===ch)break}return source_text.substring(start,pos+1)}function peekString(endChar){var prev_pos=pos,str=eatString(endChar)


return pos=prev_pos-1,next(),str}function eatWhitespace(preserve_newlines_local){for(var result=0;whiteRe.test(peek());)next(),
"\n"===ch&&preserve_newlines_local&&preserve_newlines&&(output.add_new_line(!0),result++)
return newlinesFromLastWSEat=result,result}function skipWhitespace(){var result=""
for(ch&&whiteRe.test(ch)&&(result=ch);whiteRe.test(next());)result+=ch
return result}function eatComment(){var start=pos,singleLine="/"===peek()
for(next();next();){if(!singleLine&&"*"===ch&&"/"===peek()){next()
break}if(singleLine&&"\n"===ch)return source_text.substring(start,pos)}return source_text.substring(start,pos)+ch

}function lookBack(str){return source_text.substring(pos-str.length,pos).toLowerCase()===str}function foundNestedPseudoClass(){
for(var openParen=0,i=pos+1;i<source_text.length;i++){var ch=source_text.charAt(i)
if("{"===ch)return!0
if("("===ch)openParen+=1
else if(")"===ch){if(0===openParen)return!1
openParen-=1}else if(";"===ch||"}"===ch)return!1}return!1}function print_string(output_string){output.just_added_newline()&&output.set_indent(indentLevel),
output.add_token(output_string)}function preserveSingleSpace(isAfterSpace){isAfterSpace&&(output.space_before_token=!0)

}function indent(){indentLevel++}function outdent(){indentLevel>0&&indentLevel--}options=options||{},
options=mergeOpts(options,"css"),source_text=source_text||""
var newlinesFromLastWSEat=0,indentSize=options.indent_size?parseInt(options.indent_size,10):4,indentCharacter=options.indent_char||" ",preserve_newlines=void 0!==options.preserve_newlines&&options.preserve_newlines,selectorSeparatorNewline=void 0===options.selector_separator_newline||options.selector_separator_newline,end_with_newline=void 0!==options.end_with_newline&&options.end_with_newline,newline_between_rules=void 0===options.newline_between_rules||options.newline_between_rules,space_around_combinator=void 0!==options.space_around_combinator&&options.space_around_combinator


space_around_combinator=space_around_combinator||void 0!==options.space_around_selector_separator&&options.space_around_selector_separator


var eol=options.eol?options.eol:"auto"
options.indent_with_tabs&&(indentCharacter="\t",indentSize=1),"auto"===eol&&(eol="\n",source_text&&lineBreak.test(source_text||"")&&(eol=source_text.match(lineBreak)[0])),
eol=eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),source_text=source_text.replace(allLineBreaks,"\n")
var ch,whiteRe=/^\s+$/,pos=-1,parenLevel=0,baseIndentString="",preindent_index=0
if(source_text&&source_text.length){for(;" "===source_text.charAt(preindent_index)||"\t"===source_text.charAt(preindent_index);)preindent_index+=1


baseIndentString=source_text.substring(0,preindent_index),js_source_text=source_text.substring(preindent_index)

}var indentLevel,nestedLevel,output,singleIndent=new Array(indentSize+1).join(indentCharacter)
this.beautify=function(){output=new Output(singleIndent,baseIndentString),indentLevel=0,nestedLevel=0,
pos=-1,ch=null,parenLevel=0
for(var insideRule=!1,insidePropertyValue=!1,enteringConditionalGroup=!1,top_ch="",last_top_ch="";;){
var whitespace=skipWhitespace(),isAfterSpace=""!==whitespace,isAfterNewline=whitespace.indexOf("\n")!==-1


if(last_top_ch=top_ch,top_ch=ch,!ch)break
if("/"===ch&&"*"===peek()){var header=0===indentLevel;(isAfterNewline||header)&&output.add_new_line(),
print_string(eatComment()),output.add_new_line(),header&&output.add_new_line(!0)}else if("/"===ch&&"/"===peek())isAfterNewline||"{"===last_top_ch||output.trim(!0),
output.space_before_token=!0,print_string(eatComment()),output.add_new_line()
else if("@"===ch)if(preserveSingleSpace(isAfterSpace),"{"===peek())print_string(eatString("}"))
else{print_string(ch)
var variableOrRule=peekString(": ,;{}()[]/='\"")
variableOrRule.match(/[ :]$/)&&(next(),variableOrRule=eatString(": ").replace(/\s$/,""),print_string(variableOrRule),
output.space_before_token=!0),variableOrRule=variableOrRule.replace(/\s$/,""),variableOrRule in this.NESTED_AT_RULE&&(nestedLevel+=1,
variableOrRule in this.CONDITIONAL_GROUP_RULE&&(enteringConditionalGroup=!0))}else"#"===ch&&"{"===peek()?(preserveSingleSpace(isAfterSpace),
print_string(eatString("}"))):"{"===ch?"}"===peek(!0)?(eatWhitespace(),next(),output.space_before_token=!0,
print_string("{}"),eatWhitespace(!0)||output.add_new_line(),newlinesFromLastWSEat<2&&newline_between_rules&&0===indentLevel&&output.add_new_line(!0)):(indent(),
output.space_before_token=!0,print_string(ch),eatWhitespace(!0)||output.add_new_line(),enteringConditionalGroup?(enteringConditionalGroup=!1,
insideRule=indentLevel>nestedLevel):insideRule=indentLevel>=nestedLevel):"}"===ch?(outdent(),output.add_new_line(),
print_string(ch),insideRule=!1,insidePropertyValue=!1,nestedLevel&&nestedLevel--,eatWhitespace(!0)||output.add_new_line(),
newlinesFromLastWSEat<2&&newline_between_rules&&0===indentLevel&&output.add_new_line(!0)):":"===ch?(eatWhitespace(),
!insideRule&&!enteringConditionalGroup||lookBack("&")||foundNestedPseudoClass()||lookBack("(")?(lookBack(" ")&&(output.space_before_token=!0),
":"===peek()?(next(),print_string("::")):print_string(":")):(print_string(":"),insidePropertyValue||(insidePropertyValue=!0,
output.space_before_token=!0))):'"'===ch||"'"===ch?(preserveSingleSpace(isAfterSpace),print_string(eatString(ch))):";"===ch?(insidePropertyValue=!1,
print_string(ch),eatWhitespace(!0)||output.add_new_line()):"("===ch?lookBack("url")?(print_string(ch),
eatWhitespace(),next()&&(")"!==ch&&'"'!==ch&&"'"!==ch?print_string(eatString(")")):pos--)):(parenLevel++,
preserveSingleSpace(isAfterSpace),print_string(ch),eatWhitespace()):")"===ch?(print_string(ch),parenLevel--):","===ch?(print_string(ch),
!eatWhitespace(!0)&&selectorSeparatorNewline&&!insidePropertyValue&&parenLevel<1?output.add_new_line():output.space_before_token=!0):(">"===ch||"+"===ch||"~"===ch)&&!insidePropertyValue&&parenLevel<1?space_around_combinator?(output.space_before_token=!0,
print_string(ch),output.space_before_token=!0):(print_string(ch),eatWhitespace(),ch&&whiteRe.test(ch)&&(ch="")):"]"===ch?print_string(ch):"["===ch?(preserveSingleSpace(isAfterSpace),
print_string(ch)):"="===ch?(eatWhitespace(),print_string("="),whiteRe.test(ch)&&(ch="")):(preserveSingleSpace(isAfterSpace),
print_string(ch))}var sweetCode=output.get_code(end_with_newline,eol)
return sweetCode},this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,
"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0}}var mergeOpts=__webpack_require__(2).mergeOpts,acorn=__webpack_require__(1),Output=__webpack_require__(3).Output,lineBreak=acorn.lineBreak,allLineBreaks=acorn.allLineBreaks


module.exports.Beautifier=Beautifier},function(module,exports){var nonASCIIidentifierStartChars="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",nonASCIIidentifierChars="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]")


exports.newline=/[\n\r\u2028\u2029]/,exports.lineBreak=new RegExp("\r\n|"+exports.newline.source),exports.allLineBreaks=new RegExp(exports.lineBreak.source,"g"),
exports.isIdentifierStart=function(code){return code<65?36===code||64===code:code<91||(code<97?95===code:code<123||code>=170&&nonASCIIidentifierStart.test(String.fromCharCode(code)))

},exports.isIdentifierChar=function(code){return code<48?36===code:code<58||!(code<65)&&(code<91||(code<97?95===code:code<123||code>=170&&nonASCIIidentifier.test(String.fromCharCode(code))))

}},function(module,exports){function mergeOpts(allOptions,targetType){var name,finalOpts={}
for(name in allOptions)name!==targetType&&(finalOpts[name]=allOptions[name])
if(targetType in allOptions)for(name in allOptions[targetType])finalOpts[name]=allOptions[targetType][name]


return finalOpts}module.exports.mergeOpts=mergeOpts},function(module,exports){function OutputLine(parent){
var _character_count=0,_indent_count=-1,_items=[],_empty=!0
this.set_indent=function(level){_character_count=parent.baseIndentLength+level*parent.indent_length,_indent_count=level

},this.get_character_count=function(){return _character_count},this.is_empty=function(){return _empty

},this.last=function(){return this._empty?null:_items[_items.length-1]},this.push=function(input){_items.push(input),
_character_count+=input.length,_empty=!1},this.pop=function(){var item=null
return _empty||(item=_items.pop(),_character_count-=item.length,_empty=0===_items.length),item},this.remove_indent=function(){
_indent_count>0&&(_indent_count-=1,_character_count-=parent.indent_length)},this.trim=function(){for(;" "===this.last();)_items.pop(),
_character_count-=1
_empty=0===_items.length},this.toString=function(){var result=""
return this._empty||(_indent_count>=0&&(result=parent.indent_cache[_indent_count]),result+=_items.join("")),
result}}function Output(indent_string,baseIndentString){baseIndentString=baseIndentString||"",this.indent_cache=[baseIndentString],
this.baseIndentLength=baseIndentString.length,this.indent_length=indent_string.length,this.raw=!1
var lines=[]
this.baseIndentString=baseIndentString,this.indent_string=indent_string,this.previous_line=null,this.current_line=null,
this.space_before_token=!1,this.add_outputline=function(){this.previous_line=this.current_line,this.current_line=new OutputLine(this),
lines.push(this.current_line)},this.add_outputline(),this.get_line_number=function(){return lines.length

},this.add_new_line=function(force_newline){return(1!==this.get_line_number()||!this.just_added_newline())&&(!(!force_newline&&this.just_added_newline())&&(this.raw||this.add_outputline(),
!0))},this.get_code=function(end_with_newline,eol){var sweet_code=lines.join("\n").replace(/[\r\n\t ]+$/,"")


return end_with_newline&&(sweet_code+="\n"),"\n"!==eol&&(sweet_code=sweet_code.replace(/[\n]/g,eol)),
sweet_code},this.set_indent=function(level){if(lines.length>1){for(;level>=this.indent_cache.length;)this.indent_cache.push(this.indent_cache[this.indent_cache.length-1]+this.indent_string)


return this.current_line.set_indent(level),!0}return this.current_line.set_indent(0),!1},this.add_raw_token=function(token){
for(var x=0;x<token.newlines;x++)this.add_outputline()
this.current_line.push(token.whitespace_before),this.current_line.push(token.text),this.space_before_token=!1

},this.add_token=function(printable_token){this.add_space_before_token(),this.current_line.push(printable_token)

},this.add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&this.current_line.push(" "),
this.space_before_token=!1},this.remove_indent=function(index){for(var output_length=lines.length;index<output_length;)lines[index].remove_indent(),
index++},this.trim=function(eat_newlines){for(eat_newlines=void 0!==eat_newlines&&eat_newlines,this.current_line.trim(indent_string,baseIndentString);eat_newlines&&lines.length>1&&this.current_line.is_empty();)lines.pop(),
this.current_line=lines[lines.length-1],this.current_line.trim()
this.previous_line=lines.length>1?lines[lines.length-2]:null},this.just_added_newline=function(){return this.current_line.is_empty()

},this.just_added_blankline=function(){if(this.just_added_newline()){if(1===lines.length)return!0
var line=lines[lines.length-2]
return line.is_empty()}return!1}}module.exports.Output=Output},function(module,exports,__webpack_require__){
function css_beautify(source_text,options){var beautifier=new Beautifier(source_text,options)
return beautifier.beautify()}var Beautifier=__webpack_require__(0).Beautifier
module.exports=css_beautify}]),css_beautify=legacy_beautify_css
"function"==typeof define&&define.amd?define([],function(){return{css_beautify:css_beautify}}):"undefined"!=typeof exports?exports.css_beautify=css_beautify:"undefined"!=typeof window?window.css_beautify=css_beautify:"undefined"!=typeof global&&(global.css_beautify=css_beautify)

}(),function(){var legacy_beautify_html=function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports


var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}}
return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports

}var installedModules={}
return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){
return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{
configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){
return module["default"]}:function(){return module}
return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){
return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)

}([function(module,exports,__webpack_require__){function ltrim(s){return s.replace(/^\s+/g,"")}function rtrim(s){
return s.replace(/\s+$/g,"")}function Beautifier(html_source,options,js_beautify,css_beautify){function Parser(){
function tokenMatcher(delimiter){var token="",add=function(str){var newToken=token+str.toLowerCase()
token=newToken.length<=delimiter.length?newToken:newToken.substr(newToken.length-delimiter.length,delimiter.length)

},doesNotMatch=function(){return token.indexOf(delimiter)===-1}
return{add:add,doesNotMatch:doesNotMatch}}return this.pos=0,this.token="",this.current_mode="CONTENT",
this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",
this.newlines=0,this.indent_content=indent_inner_html,this.indent_body_inner_html=indent_body_inner_html,
this.indent_head_inner_html=indent_head_inner_html,this.Utils={whitespace:"\n\r\t ".split(""),single_token:options.void_elements||["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","?php","basefont","isindex"],
extra_liners:extra_liners,in_array:function(what,arr){for(var i=0;i<arr.length;i++)if(what===arr[i])return!0


return!1}},this.is_whitespace=function(text){for(var n=0;n<text.length;n++)if(!this.Utils.in_array(text.charAt(n),this.Utils.whitespace))return!1


return!0},this.traverse_whitespace=function(){var input_char=""
if(input_char=this.input.charAt(this.pos),this.Utils.in_array(input_char,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(input_char,this.Utils.whitespace);)preserve_newlines&&"\n"===input_char&&this.newlines<=max_preserve_newlines&&(this.newlines+=1),
this.pos++,input_char=this.input.charAt(this.pos)
return!0}return!1},this.space_or_wrap=function(content){return this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,content),
this.print_indentation(content),!0):(this.line_char_count++,content.push(" "),!1)},this.get_content=function(){
for(var input_char="",content=[],handlebarsStarted=0;"<"!==this.input.charAt(this.pos)||2===handlebarsStarted;){
if(this.pos>=this.input.length)return content.length?content.join(""):["","TK_EOF"]
if(handlebarsStarted<2&&this.traverse_whitespace())this.space_or_wrap(content)
else{if(input_char=this.input.charAt(this.pos),indent_handlebars){if("{"===input_char?handlebarsStarted+=1:handlebarsStarted<2&&(handlebarsStarted=0),
"}"===input_char&&handlebarsStarted>0&&0===handlebarsStarted--)break
var peek3=this.input.substr(this.pos,3)
if("{{#"===peek3||"{{/"===peek3)break
if("{{!"===peek3)return[this.get_tag(),"TK_TAG_HANDLEBARS_COMMENT"]
if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}this.pos++,this.line_char_count++,
content.push(input_char)}}return content.length?content.join(""):""},this.get_contents_to=function(name){
if(this.pos===this.input.length)return["","TK_EOF"]
var content="",reg_match=new RegExp("</"+name+"\\s*>","igm")
reg_match.lastIndex=this.pos
var reg_array=reg_match.exec(this.input),end_script=reg_array?reg_array.index:this.input.length
return this.pos<end_script&&(content=this.input.substring(this.pos,end_script),this.pos=end_script),content

},this.record_tag=function(tag){this.tags[tag+"count"]?(this.tags[tag+"count"]++,this.tags[tag+this.tags[tag+"count"]]=this.indent_level):(this.tags[tag+"count"]=1,
this.tags[tag+this.tags[tag+"count"]]=this.indent_level),this.tags[tag+this.tags[tag+"count"]+"parent"]=this.tags.parent,
this.tags.parent=tag+this.tags[tag+"count"]},this.retrieve_tag=function(tag){if(this.tags[tag+"count"]){
for(var temp_parent=this.tags.parent;temp_parent&&tag+this.tags[tag+"count"]!==temp_parent;)temp_parent=this.tags[temp_parent+"parent"]


temp_parent&&(this.indent_level=this.tags[tag+this.tags[tag+"count"]],this.tags.parent=this.tags[temp_parent+"parent"]),
delete this.tags[tag+this.tags[tag+"count"]+"parent"],delete this.tags[tag+this.tags[tag+"count"]],1===this.tags[tag+"count"]?delete this.tags[tag+"count"]:this.tags[tag+"count"]--

}},this.indent_to_tag=function(tag){if(this.tags[tag+"count"]){for(var temp_parent=this.tags.parent;temp_parent&&tag+this.tags[tag+"count"]!==temp_parent;)temp_parent=this.tags[temp_parent+"parent"]


temp_parent&&(this.indent_level=this.tags[tag+this.tags[tag+"count"]])}},this.get_tag=function(peek){
var tag_start,tag_end,tag_start_char,tail,input_char="",content=[],comment="",space=!1,first_attr=!0,has_wrapped_attrs=!1,orig_pos=this.pos,orig_line_char_count=this.line_char_count,is_tag_closed=!1


peek=void 0!==peek&&peek
do{if(this.pos>=this.input.length)return peek&&(this.pos=orig_pos,this.line_char_count=orig_line_char_count),
content.length?content.join(""):["","TK_EOF"]
if(input_char=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(input_char,this.Utils.whitespace))space=!0
else{if("'"!==input_char&&'"'!==input_char||(input_char+=this.get_unformatted(input_char),space=!0),"="===input_char&&(space=!1),
tail=this.input.substr(this.pos-1),!is_wrap_attributes_force_expand_multiline||!has_wrapped_attrs||is_tag_closed||">"!==input_char&&"/"!==input_char||tail.match(/^\/?\s*>/)&&(space=!1,
is_tag_closed=!0,this.print_newline(!1,content),this.print_indentation(content)),content.length&&"="!==content[content.length-1]&&">"!==input_char&&space){
var wrapped=this.space_or_wrap(content),indentAttrs=wrapped&&"/"!==input_char&&!is_wrap_attributes_force


if(space=!1,is_wrap_attributes_force&&"/"!==input_char){var force_first_attr_wrap=!1
if(is_wrap_attributes_force_expand_multiline&&first_attr){var is_only_attribute=null!==tail.match(/^\S*(="([^"]|\\")*")?\s*\/?\s*>/)


force_first_attr_wrap=!is_only_attribute}first_attr&&!force_first_attr_wrap||(this.print_newline(!1,content),
this.print_indentation(content),indentAttrs=!0)}if(indentAttrs){has_wrapped_attrs=!0
var alignment_size=wrap_attributes_indent_size
is_wrap_attributes_force_aligned&&(alignment_size=content.indexOf(" ")+1)
for(var count=0;count<alignment_size;count++)content.push(" ")}if(first_attr)for(var i=0;i<content.length;i++)if(" "===content[i]){
first_attr=!1
break}}if(indent_handlebars&&"<"===tag_start_char&&input_char+this.input.charAt(this.pos)==="{{"&&(input_char+=this.get_unformatted("}}"),
content.length&&" "!==content[content.length-1]&&"<"!==content[content.length-1]&&(input_char=" "+input_char),
space=!0),"<"!==input_char||tag_start_char||(tag_start=this.pos-1,tag_start_char="<"),indent_handlebars&&!tag_start_char&&content.length>=2&&"{"===content[content.length-1]&&"{"===content[content.length-2]&&(tag_start="#"===input_char||"/"===input_char||"!"===input_char?this.pos-3:this.pos-2,
tag_start_char="{"),this.line_char_count++,content.push(input_char),content[1]&&("!"===content[1]||"?"===content[1]||"%"===content[1])){
content=[this.get_comment(tag_start)]
break}if(indent_handlebars&&content[1]&&"{"===content[1]&&content[2]&&"!"===content[2]){content=[this.get_comment(tag_start)]


break}if(indent_handlebars&&"{"===tag_start_char&&content.length>2&&"}"===content[content.length-2]&&"}"===content[content.length-1])break

}}while(">"!==input_char)
var tag_index,tag_offset,tag_complete=content.join("")
tag_index=tag_complete.indexOf(" ")!==-1?tag_complete.indexOf(" "):tag_complete.indexOf("\n")!==-1?tag_complete.indexOf("\n"):"{"===tag_complete.charAt(0)?tag_complete.indexOf("}"):tag_complete.indexOf(">"),
tag_offset="<"!==tag_complete.charAt(0)&&indent_handlebars?"#"===tag_complete.charAt(2)?3:2:1
var tag_check=tag_complete.substring(tag_offset,tag_index).toLowerCase()
return"/"===tag_complete.charAt(tag_complete.length-2)||this.Utils.in_array(tag_check,this.Utils.single_token)?peek||(this.tag_type="SINGLE"):indent_handlebars&&"{"===tag_complete.charAt(0)&&"else"===tag_check?peek||(this.indent_to_tag("if"),
this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):this.is_unformatted(tag_check,unformatted)||this.is_unformatted(tag_check,content_unformatted)?(comment=this.get_unformatted("</"+tag_check+">",tag_complete),
content.push(comment),tag_end=this.pos-1,this.tag_type="SINGLE"):"script"===tag_check&&(tag_complete.search("type")===-1||tag_complete.search("type")>-1&&tag_complete.search(/\b(text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect)/)>-1)?peek||(this.record_tag(tag_check),
this.tag_type="SCRIPT"):"style"===tag_check&&(tag_complete.search("type")===-1||tag_complete.search("type")>-1&&tag_complete.search("text/css")>-1)?peek||(this.record_tag(tag_check),
this.tag_type="STYLE"):"!"===tag_check.charAt(0)?peek||(this.tag_type="SINGLE",this.traverse_whitespace()):peek||("/"===tag_check.charAt(0)?(this.retrieve_tag(tag_check.substring(1)),
this.tag_type="END"):(this.record_tag(tag_check),"html"!==tag_check.toLowerCase()&&(this.indent_content=!0),
this.tag_type="START"),this.traverse_whitespace()&&this.space_or_wrap(content),this.Utils.in_array(tag_check,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),
this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),peek&&(this.pos=orig_pos,
this.line_char_count=orig_line_char_count),content.join("")},this.get_comment=function(start_pos){var comment="",delimiter=">",matched=!1


this.pos=start_pos
var input_char=this.input.charAt(this.pos)
for(this.pos++;this.pos<=this.input.length&&(comment+=input_char,comment.charAt(comment.length-1)!==delimiter.charAt(delimiter.length-1)||comment.indexOf(delimiter)===-1);)!matched&&comment.length<10&&(0===comment.indexOf("<![if")?(delimiter="<![endif]>",
matched=!0):0===comment.indexOf("<![cdata[")?(delimiter="]]>",matched=!0):0===comment.indexOf("<![")?(delimiter="]>",
matched=!0):0===comment.indexOf("<!--")?(delimiter="-->",matched=!0):0===comment.indexOf("{{!--")?(delimiter="--}}",
matched=!0):0===comment.indexOf("{{!")?5===comment.length&&comment.indexOf("{{!--")===-1&&(delimiter="}}",
matched=!0):0===comment.indexOf("<?")?(delimiter="?>",matched=!0):0===comment.indexOf("<%")&&(delimiter="%>",
matched=!0)),input_char=this.input.charAt(this.pos),this.pos++
return comment},this.get_unformatted=function(delimiter,orig_tag){if(orig_tag&&orig_tag.toLowerCase().indexOf(delimiter)!==-1)return""


var input_char="",content="",space=!0,delimiterMatcher=tokenMatcher(delimiter)
do{if(this.pos>=this.input.length)return content
if(input_char=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(input_char,this.Utils.whitespace)){
if(!space){this.line_char_count--
continue}if("\n"===input_char||"\r"===input_char){content+="\n",this.line_char_count=0
continue}}content+=input_char,delimiterMatcher.add(input_char),this.line_char_count++,space=!0,indent_handlebars&&"{"===input_char&&content.length&&"{"===content.charAt(content.length-2)&&(content+=this.get_unformatted("}}"))

}while(delimiterMatcher.doesNotMatch())
return content},this.get_token=function(){var token
if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var type=this.last_token.substr(7)


return token=this.get_contents_to(type),"string"!=typeof token?token:[token,"TK_"+type]}if("CONTENT"===this.current_mode)return token=this.get_content(),
"string"!=typeof token?token:[token,"TK_CONTENT"]
if("TAG"===this.current_mode){if(token=this.get_tag(),"string"!=typeof token)return token
var tag_name_type="TK_TAG_"+this.tag_type
return[token,tag_name_type]}},this.get_full_indent=function(level){return level=this.indent_level+level||0,
level<1?"":Array(level+1).join(this.indent_string)},this.is_unformatted=function(tag_check,unformatted){
if(!this.Utils.in_array(tag_check,unformatted))return!1
if("a"!==tag_check.toLowerCase()||!this.Utils.in_array("a",unformatted))return!0
var next_tag=this.get_tag(!0),tag=(next_tag||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/)
return!(tag&&!this.Utils.in_array(tag[1],unformatted))},this.printer=function(js_source,indent_character,indent_size,wrap_line_length,brace_style){
this.input=js_source||"",this.input=this.input.replace(/\r\n|[\r\u2028\u2029]/g,"\n"),this.output=[],
this.indent_character=indent_character,this.indent_string="",this.indent_size=indent_size,this.brace_style=brace_style,
this.indent_level=0,this.wrap_line_length=wrap_line_length,this.line_char_count=0
for(var i=0;i<this.indent_size;i++)this.indent_string+=this.indent_character
this.print_newline=function(force,arr){this.line_char_count=0,arr&&arr.length&&(force||"\n"!==arr[arr.length-1])&&("\n"!==arr[arr.length-1]&&(arr[arr.length-1]=rtrim(arr[arr.length-1])),
arr.push("\n"))},this.print_indentation=function(arr){for(var i=0;i<this.indent_level;i++)arr.push(this.indent_string),
this.line_char_count+=this.indent_string.length},this.print_token=function(text){this.is_whitespace(text)&&!this.output.length||((text||""!==text)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),
text=ltrim(text)),this.print_token_raw(text))},this.print_token_raw=function(text){this.newlines>0&&(text=rtrim(text)),
text&&""!==text&&(text.length>1&&"\n"===text.charAt(text.length-1)?(this.output.push(text.slice(0,-1)),
this.print_newline(!1,this.output)):this.output.push(text))
for(var n=0;n<this.newlines;n++)this.print_newline(n>0,this.output)
this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--

}},this}html_source=html_source||""
var multi_parser,indent_inner_html,indent_body_inner_html,indent_head_inner_html,indent_size,indent_character,wrap_line_length,brace_style,unformatted,content_unformatted,preserve_newlines,max_preserve_newlines,indent_handlebars,wrap_attributes,wrap_attributes_indent_size,is_wrap_attributes_force,is_wrap_attributes_force_expand_multiline,is_wrap_attributes_force_aligned,end_with_newline,extra_liners,eol


options=options||{},options=mergeOpts(options,"html"),void 0!==options.wrap_line_length&&0!==parseInt(options.wrap_line_length,10)||void 0===options.max_char||0===parseInt(options.max_char,10)||(options.wrap_line_length=options.max_char),
indent_inner_html=void 0!==options.indent_inner_html&&options.indent_inner_html,indent_body_inner_html=void 0===options.indent_body_inner_html||options.indent_body_inner_html,
indent_head_inner_html=void 0===options.indent_head_inner_html||options.indent_head_inner_html,indent_size=void 0===options.indent_size?4:parseInt(options.indent_size,10),
indent_character=void 0===options.indent_char?" ":options.indent_char,brace_style=void 0===options.brace_style?"collapse":options.brace_style,
wrap_line_length=0===parseInt(options.wrap_line_length,10)?32786:parseInt(options.wrap_line_length||250,10),
unformatted=options.unformatted||["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","address","big","dt","ins","strike","tt"],
content_unformatted=options.content_unformatted||["pre"],preserve_newlines=void 0===options.preserve_newlines||options.preserve_newlines,
max_preserve_newlines=preserve_newlines?isNaN(parseInt(options.max_preserve_newlines,10))?32786:parseInt(options.max_preserve_newlines,10):0,
indent_handlebars=void 0!==options.indent_handlebars&&options.indent_handlebars,wrap_attributes=void 0===options.wrap_attributes?"auto":options.wrap_attributes,
wrap_attributes_indent_size=isNaN(parseInt(options.wrap_attributes_indent_size,10))?indent_size:parseInt(options.wrap_attributes_indent_size,10),
is_wrap_attributes_force="force"===wrap_attributes.substr(0,"force".length),is_wrap_attributes_force_expand_multiline="force-expand-multiline"===wrap_attributes,
is_wrap_attributes_force_aligned="force-aligned"===wrap_attributes,end_with_newline=void 0!==options.end_with_newline&&options.end_with_newline,
extra_liners="object"==typeof options.extra_liners&&options.extra_liners?options.extra_liners.concat():"string"==typeof options.extra_liners?options.extra_liners.split(","):"head,body,/html".split(","),
eol=options.eol?options.eol:"auto",options.indent_with_tabs&&(indent_character="\t",indent_size=1),"auto"===eol&&(eol="\n",
html_source&&lineBreak.test(html_source||"")&&(eol=html_source.match(lineBreak)[0])),eol=eol.replace(/\\r/,"\r").replace(/\\n/,"\n"),
html_source=html_source.replace(allLineBreaks,"\n"),this.beautify=function(){for(multi_parser=new Parser,
multi_parser.printer(html_source,indent_character,indent_size,wrap_line_length,brace_style);;){var t=multi_parser.get_token()


if(multi_parser.token_text=t[0],multi_parser.token_type=t[1],"TK_EOF"===multi_parser.token_type)break


switch(multi_parser.token_type){case"TK_TAG_START":multi_parser.print_newline(!1,multi_parser.output),
multi_parser.print_token(multi_parser.token_text),multi_parser.indent_content&&(!multi_parser.indent_body_inner_html&&multi_parser.token_text.match(/<body(?:.*)>/)||!multi_parser.indent_head_inner_html&&multi_parser.token_text.match(/<head(?:.*)>/)||multi_parser.indent(),
multi_parser.indent_content=!1),multi_parser.current_mode="CONTENT"
break
case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":multi_parser.print_newline(!1,multi_parser.output),multi_parser.print_token(multi_parser.token_text),
multi_parser.current_mode="CONTENT"
break
case"TK_TAG_END":if("TK_CONTENT"===multi_parser.last_token&&""===multi_parser.last_text){var tag_name=(multi_parser.token_text.match(/\w+/)||[])[0],tag_extracted_from_last_output=null


multi_parser.output.length&&(tag_extracted_from_last_output=multi_parser.output[multi_parser.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),
(null===tag_extracted_from_last_output||tag_extracted_from_last_output[1]!==tag_name&&!multi_parser.Utils.in_array(tag_extracted_from_last_output[1],unformatted))&&multi_parser.print_newline(!1,multi_parser.output)

}multi_parser.print_token(multi_parser.token_text),multi_parser.current_mode="CONTENT"
break
case"TK_TAG_SINGLE":var tag_check=multi_parser.token_text.match(/^\s*<([a-z-]+)/i)
tag_check&&multi_parser.Utils.in_array(tag_check[1],unformatted)||multi_parser.print_newline(!1,multi_parser.output),
multi_parser.print_token(multi_parser.token_text),multi_parser.current_mode="CONTENT"
break
case"TK_TAG_HANDLEBARS_ELSE":for(var foundIfOnCurrentLine=!1,lastCheckedOutput=multi_parser.output.length-1;lastCheckedOutput>=0&&"\n"!==multi_parser.output[lastCheckedOutput];lastCheckedOutput--)if(multi_parser.output[lastCheckedOutput].match(/{{#if/)){
foundIfOnCurrentLine=!0
break}foundIfOnCurrentLine||multi_parser.print_newline(!1,multi_parser.output),multi_parser.print_token(multi_parser.token_text),
multi_parser.indent_content&&(multi_parser.indent(),multi_parser.indent_content=!1),multi_parser.current_mode="CONTENT"


break
case"TK_TAG_HANDLEBARS_COMMENT":multi_parser.print_token(multi_parser.token_text),multi_parser.current_mode="TAG"


break
case"TK_CONTENT":multi_parser.print_token(multi_parser.token_text),multi_parser.current_mode="TAG"
break
case"TK_STYLE":case"TK_SCRIPT":if(""!==multi_parser.token_text){multi_parser.print_newline(!1,multi_parser.output)


var _beautifier,text=multi_parser.token_text,script_indent_level=1
"TK_SCRIPT"===multi_parser.token_type?_beautifier="function"==typeof js_beautify&&js_beautify:"TK_STYLE"===multi_parser.token_type&&(_beautifier="function"==typeof css_beautify&&css_beautify),
"keep"===options.indent_scripts?script_indent_level=0:"separate"===options.indent_scripts&&(script_indent_level=-multi_parser.indent_level)


var indentation=multi_parser.get_full_indent(script_indent_level)
if(_beautifier){var Child_options=function(){this.eol="\n"}
Child_options.prototype=options
var child_options=new Child_options
text=_beautifier(text.replace(/^\s*/,indentation),child_options)}else{var white=text.match(/^\s*/)[0],_level=white.match(/[^\n\r]*$/)[0].split(multi_parser.indent_string).length-1,reindent=multi_parser.get_full_indent(script_indent_level-_level)


text=text.replace(/^\s*/,indentation).replace(/\r\n|\r|\n/g,"\n"+reindent).replace(/\s+$/,"")}text&&(multi_parser.print_token_raw(text),
multi_parser.print_newline(!0,multi_parser.output))}multi_parser.current_mode="TAG"
break
default:""!==multi_parser.token_text&&multi_parser.print_token(multi_parser.token_text)}multi_parser.last_token=multi_parser.token_type,
multi_parser.last_text=multi_parser.token_text}var sweet_code=multi_parser.output.join("").replace(/[\r\n\t ]+$/,"")


return end_with_newline&&(sweet_code+="\n"),"\n"!==eol&&(sweet_code=sweet_code.replace(/[\n]/g,eol)),
sweet_code}}var mergeOpts=__webpack_require__(2).mergeOpts,acorn=__webpack_require__(1),lineBreak=acorn.lineBreak,allLineBreaks=acorn.allLineBreaks


module.exports.Beautifier=Beautifier},function(module,exports){var nonASCIIidentifierStartChars="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",nonASCIIidentifierChars="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]"),nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]")


exports.newline=/[\n\r\u2028\u2029]/,exports.lineBreak=new RegExp("\r\n|"+exports.newline.source),exports.allLineBreaks=new RegExp(exports.lineBreak.source,"g"),
exports.isIdentifierStart=function(code){return code<65?36===code||64===code:code<91||(code<97?95===code:code<123||code>=170&&nonASCIIidentifierStart.test(String.fromCharCode(code)))

},exports.isIdentifierChar=function(code){return code<48?36===code:code<58||!(code<65)&&(code<91||(code<97?95===code:code<123||code>=170&&nonASCIIidentifier.test(String.fromCharCode(code))))

}},function(module,exports){function mergeOpts(allOptions,targetType){var name,finalOpts={}
for(name in allOptions)name!==targetType&&(finalOpts[name]=allOptions[name])
if(targetType in allOptions)for(name in allOptions[targetType])finalOpts[name]=allOptions[targetType][name]


return finalOpts}module.exports.mergeOpts=mergeOpts},function(module,exports,__webpack_require__){function style_html(html_source,options,js_beautify,css_beautify){
var beautifier=new Beautifier(html_source,options,js_beautify,css_beautify)
return beautifier.beautify()}var Beautifier=__webpack_require__(0).Beautifier
module.exports=style_html}]),style_html=legacy_beautify_html
if("function"==typeof define&&define.amd)define(["require","./beautify","./beautify-css"],function(requireamd){
var js_beautify=requireamd("./beautify"),css_beautify=requireamd("./beautify-css")
return{html_beautify:function(html_source,options){return style_html(html_source,options,js_beautify.js_beautify,css_beautify.css_beautify)

}}})
else if("undefined"!=typeof exports){var js_beautify=require("./beautify.js"),css_beautify=require("./beautify-css.js")


exports.html_beautify=function(html_source,options){return style_html(html_source,options,js_beautify.js_beautify,css_beautify.css_beautify)

}}else"undefined"!=typeof window?window.html_beautify=function(html_source,options){return style_html(html_source,options,window.js_beautify,window.css_beautify)

}:"undefined"!=typeof global&&(global.html_beautify=function(html_source,options){return style_html(html_source,options,global.js_beautify,global.css_beautify)

})}()})


define("plugins/c9.ide.format/formatters/jsbeautify",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,settings.on("read",function(){settings.setDefaults("project/javascript",[["use_jsbeautify","true"]]),
settings.setDefaults("project/format/jsbeautify",[["preserveempty","true"],["keeparrayindentation","false"],["jslinthappy","false"],["braces","end-expand"],["preserve-inline",!0],["space_before_conditional","true"],["unescape_strings","true"],["indent_inner_html",!1],["advanced",{}]])

}),format.on("format",function(e){if(MODES[e.mode])return formatEditor(e.editor,e.mode,e.all)}),prefs.add({
Project:{"Code Formatters":{position:900,JSBeautify:{type:"label",caption:"JSBeautify settings:"},"Format Code on Save":{
position:320,type:"checkbox",path:"project/format/jsbeautify/@formatOnSave",onchange:function(e){e.value&&settings.get("project/javascript/@formatter","")&&settings.set("project/javascript/@use_jsbeautify",!0)

}},"Use JSBeautify for JavaScript":{position:340,type:"checkbox",path:"project/javascript/@use_jsbeautify",
onchange:function(e){e.value&&settings.set("project/javascript/@formatter","")}},"Preserve Empty Lines":{
type:"checkbox",path:"project/format/jsbeautify/@preserveempty",position:350},"Keep Array Indentation":{
type:"checkbox",path:"project/format/jsbeautify/@keeparrayindentation",position:351},"JSLint Strict Whitespace":{
type:"checkbox",path:"project/format/jsbeautify/@jslinthappy",position:352},Braces:{type:"dropdown",path:"project/format/jsbeautify/@braces",
width:"185",position:353,items:[{value:"collapse",caption:"Braces with control statement"},{value:"expand",
caption:"Braces on own line"},{value:"end-expand",caption:"End braces on own line"}]},"Preserve Inline Blocks":{
type:"checkbox",path:"project/format/jsbeautify/@preserve-inline",position:353.5},"Space Before Conditionals":{
type:"checkbox",path:"project/format/jsbeautify/@space_before_conditional",position:354},"Unescape Strings":{
type:"checkbox",path:"project/format/jsbeautify/@unescape_strings",position:355},"Indent Inner Html":{
type:"checkbox",path:"project/format/jsbeautify/@indent_inner_html",position:356}},"JavaScript Support":{
position:1100,"Use Built-in JSBeautify as Code Formatter":{position:320,type:"checkbox",path:"project/javascript/@use_jsbeautify",
onchange:function(e){e.value&&settings.set("project/javascript/@formatter","")}}}}},plugin),void save.on("beforeSave",function(e){
if(e.tab.editor&&e.tab.editor.ace&&e.tab.path){var mode=e.tab.editor.ace.session.syntax;(e.tab.editor||e.tab.editor.ace)&&MODES[mode]&&("javascript"!==mode||settings.getBool("project/javascript/@formatOnSave")||settings.getBool("project/format/jsbeautify/@formatOnSave"))&&("javascript"!==mode||settings.getBool("project/javascript/@use_jsbeautify"))&&("javascript"===mode||settings.getBool("project/format/jsbeautify/@formatOnSave"))&&format.formatCode(null,e.tab.editor)

}},plugin))}function formatEditor(editor,mode,all){if(this.disabled!==!0&&("javascript"!==mode||settings.getBool("project/javascript/@use_jsbeautify"))){
var ace=editor.ace,sel=ace.selection,session=ace.session,range=sel.getRange(),keepSelection=!1;(range.isEmpty()||all)&&(range=new Range(0,0,session.getLength(),0),
keepSelection=!0)
var options=getOptions(null,!0)
session.getUseSoftTabs()?(options.indent_char=" ",options.indent_size=session.getTabSize()):(options.indent_char="\t",
options.indent_size=1)
var line=session.getLine(range.start.row),indent=line.match(/^\s*/)[0],trim=!1
range.start.column<indent.length?range.start.column=0:trim=!0
var value=session.getTextRange(range),type=getType(mode,value,options)
try{value=jsbeautify[type+"_beautify"](value,options),trim&&(value=value.replace(/^/gm,indent).trim()),
0===range.end.column&&(value+="\n"+indent)}catch(e){return!1}var end=session.diffAndReplace(range,value)


return keepSelection||sel.setSelectionRange(Range.fromPoints(range.start,end)),!0}}function formatString(mode,value,options){
options=getOptions(options)
var type=getType(mode,value,options)
return jsbeautify[type+"_beautify"](value,options)}function getOptions(options,allowAdvanced){if(options||(options={}),
options.hasOwnProperty("space_before_conditional")||(options.space_before_conditional=settings.getBool("project/format/jsbeautify/@space_before_conditional")),
options.hasOwnProperty("keep_array_indentation")||(options.keep_array_indentation=settings.getBool("project/format/jsbeautify/@keeparrayindentation")),
options.hasOwnProperty("preserve_newlines")||(options.preserve_newlines=settings.getBool("project/format/jsbeautify/@preserveempty")),
options.hasOwnProperty("unescape_strings")||(options.unescape_strings=settings.getBool("project/format/jsbeautify/@unescape_strings")),
options.hasOwnProperty("jslint_happy")||(options.jslint_happy=settings.getBool("project/format/jsbeautify/@jslinthappy")),
options.hasOwnProperty("brace_style")||(options.brace_style=settings.get("project/format/jsbeautify/@braces")+(settings.get("project/format/jsbeautify/@preserve-inline")?",preserve-inline":"")),
options.hasOwnProperty("indent_inner_html")||(options.indent_inner_html=settings.get("project/format/jsbeautify/@indent_inner_html")),
options.hasOwnProperty("e4x")||(options.e4x=!0),allowAdvanced){var json=settings.get("project/format/jsbeautify/@advanced")


json&&"object"==typeof json&&util.extend(options,json)}return options.indent_char||(options.indent_char=" "),
options.indent_size||(options.indent_size=4),options}function getType(mode,value,options){var type=null


return"javascript"==mode||"json"==mode||"jsx"==mode?type="js":"css"==mode||"less"==mode||"scss"==mode?type="css":/^\s*<!?\w/.test(value)?type="html":"xml"==mode?type="html":"html_ruby"==mode?type="html":"html"==mode||"xhtml"==mode||"plugins/salesforce.language/modes/visualforce"===mode||"plugins/salesforce.language/modes/lightning"===mode?type=/[^<]+?{[\s\-\w]+:[^}]+;/.test(value)?"css":/<\w+[ \/>]/.test(value)?"html":"js":"handlebars"==mode&&(options&&(options.indent_handlebars=!0),
type="html"),type}var util=imports.util,prefs=imports.preferences,Plugin=imports.Plugin,format=imports.format,settings=imports.settings,save=imports.save,Range=require("ace/range").Range,jsbeautify=require("./lib_jsbeautify"),plugin=new Plugin("Ajax.org",main.consumes),MODES={
javascript:!0,html:!0,xhtml:!0,"plugins/salesforce.language/modes/visualforce":!0,"plugins/salesforce.language/modes/lightning":!0,
css:!0,less:!0,scss:!0,xml:!0,json:!0,handlebars:!0},loaded=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({formatEditor:formatEditor,formatString:formatString
}),register(null,{"format.jsbeautify":plugin})}return main.consumes=["Plugin","format","settings","preferences","util","save"],
main.provides=["format.jsbeautify"],main})


define("plugins/c9.ide.format/format",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,commands.addCommand({name:"formatcode",hint:"reformat selected JavaScript code in the editor",
msg:"Beautifying selection.",bindKey:{mac:"Command-Shift-B",win:"Ctrl-Shift-B"},exec:function(editor,args){
formatCode(args.mode,editor,args.all)}},plugin),commands.addCommand({name:"formatprefs",hint:"open language & formatting preferences",
exec:function(editor,args){commands.exec("openpreferences",null,{panel:"preferences.project",section:"JavaScript Support"
})}},plugin),mnuFormat=new ui.menu({onitemclick:function(e){e.value&&"auto"!=e.value&&formatCode(e.value)

}}),menus.addItemByPath("Edit/Code Formatting",mnuFormat,1400,plugin),menus.addItemByPath("Edit/Code Formatting/Apply Code Formatting",new ui.item({
selected:!0,value:"auto",command:"formatcode"}),100,plugin),void menus.addItemByPath("Edit/Code Formatting/Open Language & Formatting Preferences...",new ui.item({
selected:!0,value:"auto",command:"formatprefs"}),200,plugin))}function getMode(editor){return editor.ace.session.syntax

}function formatCode(mode,editor,all){editor||(editor=tabManager.focussedTab.editor),mode&&"auto"!==mode||(mode=getMode(editor)),
editor.ace.selection.isEmpty()&&(all=!0),emit("format",{mode:mode,editor:editor,all:all})||alert("Error","This code could not be beautified",'"'+mode+'" is not supported yet')

}function addFormatter(caption,mode,plugin){300===count&&menus.addItemByPath("Edit/Code Formatting/~",new ui.divider,300,plugin),
menus.addItemByPath("Edit/Code Formatting/"+caption,new ui.item({value:mode,isAvailable:commands.commands.formatcode.isAvailable
}),count+=100,plugin)}var mnuFormat,Plugin=imports.Plugin,ui=imports.ui,commands=imports.commands,tabManager=imports.tabManager,menus=imports.menus,alert=imports["dialog.alert"].show,plugin=(imports.preferences,
new Plugin("Ajax.org",main.consumes)),emit=plugin.getEmitter(),count=300,loaded=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,mnuFormat=null}),plugin.freezePublicAPI({formatCode:formatCode,
addFormatter:addFormatter,_events:["format"]}),register(null,{format:plugin})}return main.consumes=["Plugin","ui","commands","menus","tabManager","dialog.alert","preferences"],
main.provides=["format"],main})


define("plugins/c9.ide.remote/transports/postmessage",[],function(require,exports,module){function main(options,imports,register){
function PostMessage(iframe,sessionId){function load(){if(loaded)return!1
loaded=!0
var onMessage=function(e){if((!c9.hosted||e.origin===previewBaseUrl)&&sessionId==e.data.id)if("exec"==e.data.message)commands.exec(e.data.command)
else if("callback"==e.data.message){var cb=callbacks[e.data.cb]
cb&&(cb(e.data.data),delete callbacks[e.data.cb])}else if("focus"==e.data.message)emit("focus")
else if("html.ready"==e.data.message){var data=e.data.data
styleSheets=data.styles.map(toPath),scripts=data.scripts.map(toPath),html=toPath(data.href),windows.indexOf(e.source)==-1&&windows.push(e.source),
e.source.postMessage({id:sessionId,type:"keys",keys:commands.getExceptionBindings()},"*"),emit("ready")

}}
window.addEventListener("message",onMessage,!1),plugin.addOther(function(){window.removeEventListener("message",onMessage,!1)

}),setInterval(function gc(){getWindows().length||(clearInterval(gc),emit("empty"))},5e3)}function toPath(href){
return href=unescape(href),c9.hosted?href.replace(new RegExp("^/"+c9.workspaceId),""):href}function wrapCallback(callback){
return callbacks.push(callback)-1}function getSources(callback){return callback(null,{styleSheets:styleSheets,
scripts:scripts,html:html})}function getWindows(){return windows=windows.filter(function(w){return w&&!w.closed

})}function send(message){getWindows().forEach(function(w){w.postMessage(message,"*")})}function getStyleSheet(){}
function getHTMLDocument(callback){var message={id:sessionId,type:"simpledom",cb:wrapCallback(callback)
}
send(message)}function initHTMLDocument(dom){var message={id:sessionId,type:"initdom",dom:dom}
send(message)}function getScript(){}function updateStyleSheet(path,value){var message={id:sessionId,type:"updatecss",
path:path,data:value}
send(message)}function updateStyleRule(url,rule){var message={id:sessionId,type:"stylerule",url:url,rule:rule
}
send(message)}function processDOMChanges(edits){var message={id:sessionId,type:"domedits",edits:edits
}
send(message)}function updateScript(){}function deleteStyleSheet(url){var message={id:sessionId,type:"update",
url:url,del:!0}
send(message)}function deleteScript(){}function reload(){var message={id:sessionId,type:"reload"}
send(message)}function highlightCSSQuery(query,force){if((force||lastQuery!=query)&&enableHighlighting){
lastQuery=query
var message={id:sessionId,type:"highlight",query:query}
send(message)}}function reveal(query){var message={id:sessionId,type:"reveal",query:query||lastQuery}


send(message)}var styleSheets,scripts,html,lastQuery,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),windows=[],enableHighlighting=!0,loaded=!1,callbacks=[]


return plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({get enableHighlighting(){return enableHighlighting

},set enableHighlighting(v){v||highlightCSSQuery(),enableHighlighting=v},_events:["draw","empty"],getWindows:getWindows,
reload:reload,getSources:getSources,getStyleSheet:getStyleSheet,getHTMLDocument:getHTMLDocument,initHTMLDocument:initHTMLDocument,
getScript:getScript,updateStyleSheet:updateStyleSheet,updateStyleRule:updateStyleRule,processDOMChanges:processDOMChanges,
updateScript:updateScript,deleteStyleSheet:deleteStyleSheet,deleteScript:deleteScript,highlightCSSQuery:highlightCSSQuery,
reveal:reveal}),plugin.load(null,"postmessage"),plugin}var Plugin=imports.Plugin,commands=imports.commands,c9=imports.c9,previewBaseUrl=options.previewBaseUrl


register(null,{"remote.PostMessage":PostMessage})}return main.consumes=["Plugin","commands","c9"],main.provides=["remote.PostMessage"],
main})


define("plugins/c9.ide.remote/documents/jsdocument",[],function(require,exports,module){function main(options,imports,register){
function JSDocument(path){function load(){return!loaded&&(loaded=!0,void remote.register(plugin))}function addTransport(transport){
return transports.indexOf(transport)==-1&&(transports.push(transport),transport.addOther(function(){var idx=transports.indexOf(transport)


~idx&&(transports.splice(idx,1),0===transports.length&&plugin.unload())})),plugin}function initTab(t){
if(tab=t){var undo=t.document.undoManager
undo.on("change",function(){undo.isAtBookmark()&&transports.forEach(function(transport){transport.reload()

})},tab)}}function remove(){transports.forEach(function(transport){transport.deleteStyleSheet(path)})

}var exists=remote.findDocument(path)
if(exists)return exists
var tab,plugin=new Plugin("Ajax.org",main.consumes),transports=[],loaded=!1
return plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({get path(){return path},get tab(){return tab

},set tab(tab){initTab(tab)},_events:["draw"],addTransport:addTransport,remove:remove}),plugin.load(null,"jsdocument"),
plugin}var Plugin=imports.Plugin,remote=imports.remote
register(null,{JSDocument:JSDocument})}return main.consumes=["Plugin","remote"],main.provides=["JSDocument"],
main})


define("plugins/c9.ide.remote/documents/cssdocument",[],function(require,exports,module){function main(options,imports,register){
function CSSDocument(path){function load(){return!loaded&&(loaded=!0,void remote.register(plugin))}function addTransport(transport){
return transports.indexOf(transport)==-1&&(transports.push(transport),transport.addOther(function(){var idx=transports.indexOf(transport)


~idx&&(transports.splice(idx,1),0===transports.length&&plugin.unload())})),tab&&tab.isActive()&&updateHighlight(!0),
doc&&doc.changed&&update(),plugin}function initTab(t){if(!t)return doc=null,tab&&fs.readFile(path,function(err,data){
update(null,data)}),void(tab=null)
tab=t,doc=tab.document,tab.on("activate",function(){updateHighlight()},plugin),tab.on("deactivate",function(){
updateHighlight(!1)},plugin)
var c9session=doc.getSession()
c9session.once("init",function(e){e.session.on("change",function(e){update(e.data)}),e.session.selection.on("changeCursor",updateHighlight)

}),tab.on("close",function(){watcher.watch(path)},plugin)}function updateHighlight(e){var query
if(tab&&e!==!1){var session=doc.getSession().session
if(!session)return
var lines=session.doc.$lines,cursor=session.selection.lead
if(!lines[cursor.row])return
var line=lines[cursor.row].substr(0,cursor.column),started=!1
if(line.match(reCssQuery)&&(query=RegExp.$2,started=!0),!started||query)for(var i=cursor.row-1;i>=0;i--)if(started){
if(lines[i].match(/[\}\;]/))break
query=lines[i]+" "+query}else if(lines[i].match(reCssQuery)){if(query=RegExp.$2,!query)break
started=!0}}else query=!1
var rules=style.sheet.cssRules||style.sheet.rules
query&&rules.length&&(style.textContent=query+"{}",query=rules[0].selectorText),lastQuery=query,transports.forEach(function(transport){
transport.highlightCSSQuery(query,e===!0)})}function remove(){transports.forEach(function(transport){
transport.deleteStyleSheet(path)})}function update(changes,value){var range=changes&&changes.range
if(changes&&lastQuery&&changes.text&&range.start.row==range.end.row&&("insertText"!=changes.text||changes.text.indexOf(";")==-1)){
var session=doc.getSession().session,line=session.doc.$lines[range.end.row],section="insertText"==changes.action?line.substr(range.start.column,range.end.column-range.start.column):"",idx=section.indexOf(";")


if(idx==-1||idx==section.length-1){var char
if(idx==-1)for(var i=range.end.column;i<line.length&&(char=line.charAt(i),";"!=char);i++)section+=char


for(var start=range.start.column-1+("removeText"==changes.action?changes.text.length:0),i=start;i>=0&&(char=line.charAt(i),
";"!=char);i--)section=char+section
var parts=section.split(":"),key=parts[0].trim(),css=(parts[1]||"").trim()
if(key){var rule={selector:lastQuery,key:key,value:css}
return void transports.forEach(function(transport){transport.updateStyleRule(path,rule)})}}}void 0==value&&(value=doc&&doc.value||""),
transports.forEach(function(transport){transport.updateStyleSheet(path,value)})}var exists=remote.findDocument(path)


if(exists)return exists
var tab,doc,lastQuery,plugin=new Plugin("Ajax.org",main.consumes),transports=[],loaded=!1,reCssQuery=/(^|.*\})(.*)\{|\}/


return plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({get path(){return path},get tab(){return tab

},set tab(tab){initTab(tab)},_events:["draw"],addTransport:addTransport,remove:remove,update:update}),
plugin.load(null,"cssdocument"),plugin}var Plugin=imports.Plugin,remote=imports.remote,watcher=imports.watcher,fs=imports.fs,style=document.createElement("style")


document.documentElement.appendChild(style),register(null,{CSSDocument:CSSDocument})}return main.consumes=["Plugin","remote","watcher","fs"],
main.provides=["CSSDocument"],main})


define("plugins/c9.ide.language.html.diff/HTMLTokenizer",[],function(require,exports,module){"use strict"


function isWhitespace(c){return" "===c||"\t"===c||"\r"===c||"\n"===c}function isLegalInTagName(c){return/[A-Za-z0-9\-]/.test(c)

}function isLegalInAttributeName(c){return'"'!==c&&"'"!==c&&"<"!==c&&"="!==c}function isLegalInUnquotedAttributeValue(c){
return"<"!==c&&"="!==c}function _clonePos(pos,offset){return pos?{row:pos.row,column:pos.column+(offset||0)
}:null}function Tokenizer(text){this._state=TEXT,this._buffer=text,this._sectionStart=0,this._sectionStartPos={
row:0,column:0},this._index=0,this._indexPos={row:0,column:0},this._special=0,this._token=null,this._nextToken=null

}var i=0,TEXT=i++,BEFORE_TAG_NAME=i++,IN_TAG_NAME=i++,BEFORE_CLOSING_TAG_NAME=i++,IN_CLOSING_TAG_NAME=i++,AFTER_CLOSING_TAG_NAME=i++,AFTER_SELFCLOSE_SLASH=i++,BEFORE_ATTRIBUTE_NAME=i++,AFTER_QUOTED_ATTRIBUTE_VALUE=i++,IN_ATTRIBUTE_NAME=i++,AFTER_ATTRIBUTE_NAME=i++,BEFORE_ATTRIBUTE_VALUE=i++,IN_ATTRIBUTE_VALUE_DOUBLE_QUOTES=i++,IN_ATTRIBUTE_VALUE_SINGLE_QUOTES=i++,IN_ATTRIBUTE_VALUE_NO_QUOTES=i++,BEFORE_DECLARATION=i++,IN_DECLARATION=i++,IN_PROCESSING_INSTRUCTION=i++,BEFORE_COMMENT=i++,IN_COMMENT=i++,AFTER_COMMENT_1=i++,AFTER_COMMENT_2=i++,BEFORE_CDATA_1=i++,BEFORE_CDATA_2=i++,BEFORE_CDATA_3=i++,BEFORE_CDATA_4=i++,BEFORE_CDATA_5=i++,BEFORE_CDATA_6=i++,IN_CDATA=i++,AFTER_CDATA_1=i++,AFTER_CDATA_2=i++,SPECIAL=i++


Tokenizer.prototype.nextToken=function(){if(this._token=null,this._nextToken){var result=this._nextToken


return this._nextToken=null,result}for(;this._index<this._buffer.length&&!this._token;){var c=this._buffer.charAt(this._index)


if(this._state===TEXT)"<"===c&&(this._emitTokenIfNonempty("text"),this._state=BEFORE_TAG_NAME,this._startSection())
else if(this._state===BEFORE_TAG_NAME)if("/"===c)this._state=BEFORE_CLOSING_TAG_NAME
else if(">"===c||this._special>0)this._state=TEXT
else if("!"===c)this._state=BEFORE_DECLARATION,this._startSection(1)
else if("?"===c)this._state=IN_PROCESSING_INSTRUCTION,this._startSection(1)
else{if(!isLegalInTagName(c)){this._emitSpecialToken("error")
break}isWhitespace(c)||(this._state=IN_TAG_NAME,this._startSection())}else if(this._state===IN_TAG_NAME){
if("/"===c)this._emitToken("opentagname"),this._checkSpecial(),this._emitSpecialToken("selfclosingtag",this._index+2,_clonePos(this._indexPos,2)),
this._state=AFTER_SELFCLOSE_SLASH
else if(">"===c)this._emitToken("opentagname"),this._checkSpecial(),this._emitSpecialToken("opentagend",this._index+1,_clonePos(this._indexPos,1)),
this._special?this._startSpecial():(this._state=TEXT,this._startSection(1))
else if(isWhitespace(c))this._emitToken("opentagname"),this._checkSpecial(),this._state=BEFORE_ATTRIBUTE_NAME
else if(!isLegalInTagName(c)){this._emitSpecialToken("error")
break}}else if(this._state===BEFORE_CLOSING_TAG_NAME)if(">"===c)this._state=TEXT
else{if(!isLegalInTagName(c)){this._emitSpecialToken("error")
break}isWhitespace(c)||(this._state=IN_CLOSING_TAG_NAME,this._startSection())}else if(this._state===IN_CLOSING_TAG_NAME){
if(">"===c)this._emitToken("closetag"),this._state=TEXT,this._startSection(1),this._special=0
else if(isWhitespace(c))this._emitToken("closetag"),this._state=AFTER_CLOSING_TAG_NAME,this._special=0
else if(!isLegalInTagName(c)){this._emitSpecialToken("error")
break}}else if(this._state===AFTER_CLOSING_TAG_NAME){if(">"===c)this._state=TEXT,this._startSection(1)
else if(!isWhitespace(c)){this._emitSpecialToken("error")
break}}else if(this._state===AFTER_SELFCLOSE_SLASH){if(">"!==c){this._emitSpecialToken("error")
break}this._state=TEXT,this._startSection(1)}else if(this._state===BEFORE_ATTRIBUTE_NAME)if(">"===c)this._state=TEXT,
this._emitSpecialToken("opentagend",this._index+1,_clonePos(this._indexPos,1)),this._special?this._startSpecial():this._startSection(1)
else if("/"===c)this._emitSpecialToken("selfclosingtag",this._index+2,_clonePos(this._indexPos,2)),this._state=AFTER_SELFCLOSE_SLASH
else{if(!isLegalInAttributeName(c)){this._emitSpecialToken("error")
break}isWhitespace(c)||(this._state=IN_ATTRIBUTE_NAME,this._startSection())}else if(this._state===IN_ATTRIBUTE_NAME)if("="===c)this._emitTokenIfNonempty("attribname"),
this._state=BEFORE_ATTRIBUTE_VALUE
else if(isWhitespace(c))this._emitTokenIfNonempty("attribname"),this._state=AFTER_ATTRIBUTE_NAME
else{if("/"===c||">"===c){this._emitTokenIfNonempty("attribname"),this._state=BEFORE_ATTRIBUTE_NAME
continue}if(!isLegalInAttributeName(c)){this._emitSpecialToken("error")
break}}else if(this._state===AFTER_ATTRIBUTE_NAME)if("="===c)this._state=BEFORE_ATTRIBUTE_VALUE
else{if("/"===c||">"===c){this._state=BEFORE_ATTRIBUTE_NAME
continue}if(!isLegalInAttributeName(c)){this._emitSpecialToken("error")
break}isWhitespace(c)||(this._state=IN_ATTRIBUTE_NAME,this._startSection())}else if(this._state===BEFORE_ATTRIBUTE_VALUE)if('"'===c)this._state=IN_ATTRIBUTE_VALUE_DOUBLE_QUOTES,
this._startSection(1)
else if("'"===c)this._state=IN_ATTRIBUTE_VALUE_SINGLE_QUOTES,this._startSection(1)
else{if(!isLegalInUnquotedAttributeValue(c)){this._emitSpecialToken("error")
break}isWhitespace(c)||(this._state=IN_ATTRIBUTE_VALUE_NO_QUOTES,this._startSection())}else if(this._state===IN_ATTRIBUTE_VALUE_DOUBLE_QUOTES)'"'===c&&(this._emitToken("attribvalue"),
this._state=AFTER_QUOTED_ATTRIBUTE_VALUE)
else if(this._state===IN_ATTRIBUTE_VALUE_SINGLE_QUOTES)"'"===c&&(this._state=AFTER_QUOTED_ATTRIBUTE_VALUE,
this._emitToken("attribvalue"))
else if(this._state===IN_ATTRIBUTE_VALUE_NO_QUOTES){if(">"===c)this._emitToken("attribvalue"),this._emitSpecialToken("opentagend",this._index+1,_clonePos(this._indexPos,1)),
this._special?this._startSpecial():(this._state=TEXT,this._startSection(1))
else if(isWhitespace(c))this._emitToken("attribvalue"),this._state=BEFORE_ATTRIBUTE_NAME
else if(!isLegalInUnquotedAttributeValue(c)){this._emitSpecialToken("error")
break}}else if(this._state===AFTER_QUOTED_ATTRIBUTE_VALUE)if(">"===c)this._state=TEXT,this._emitSpecialToken("opentagend",this._index+1,_clonePos(this._indexPos,1)),
this._special?this._startSpecial():this._startSection(1)
else if("/"===c)this._emitSpecialToken("selfclosingtag",this._index+2,_clonePos(this._indexPos,2)),this._state=AFTER_SELFCLOSE_SLASH
else{if(!isWhitespace(c)){this._emitSpecialToken("error")
break}this._state=BEFORE_ATTRIBUTE_NAME}else if(this._state===BEFORE_DECLARATION)"["===c?this._state=BEFORE_CDATA_1:"-"===c?this._state=BEFORE_COMMENT:this._state=IN_DECLARATION
else if(this._state===IN_DECLARATION)">"===c&&(this._emitToken("declaration"),this._state=TEXT,this._startSection(1))
else if(this._state===IN_PROCESSING_INSTRUCTION)">"===c&&(this._emitToken("processinginstruction"),this._state=TEXT,
this._startSection(1))
else if(this._state===BEFORE_COMMENT)"-"===c?(this._state=IN_COMMENT,this._startSection(1)):this._state=IN_DECLARATION
else if(this._state===IN_COMMENT)"-"===c&&(this._state=AFTER_COMMENT_1)
else if(this._state===AFTER_COMMENT_1)"-"===c?this._state=AFTER_COMMENT_2:this._state=IN_COMMENT
else if(this._state===AFTER_COMMENT_2)">"===c?(this._emitToken("comment",this._index-2,_clonePos(this._indexPos,-2)),
this._state=TEXT,this._startSection(1)):"-"!==c&&(this._state=IN_COMMENT)
else if(this._state===BEFORE_CDATA_1)"C"===c?this._state=BEFORE_CDATA_2:this._state=IN_DECLARATION
else if(this._state===BEFORE_CDATA_2)"D"===c?this._state=BEFORE_CDATA_3:this._state=IN_DECLARATION
else if(this._state===BEFORE_CDATA_3)"A"===c?this._state=BEFORE_CDATA_4:this._state=IN_DECLARATION
else if(this._state===BEFORE_CDATA_4)"T"===c?this._state=BEFORE_CDATA_5:this._state=IN_DECLARATION
else if(this._state===BEFORE_CDATA_5)"A"===c?this._state=BEFORE_CDATA_6:this._state=IN_DECLARATION
else if(this._state===BEFORE_CDATA_6)"["===c?(this._state=IN_CDATA,this._startSection(1)):this._state=IN_DECLARATION
else if(this._state===IN_CDATA)"]"===c&&(this._state=AFTER_CDATA_1)
else if(this._state===AFTER_CDATA_1)"]"===c?this._state=AFTER_CDATA_2:this._state=IN_CDATA
else if(this._state===AFTER_CDATA_2)">"===c?(this._emitToken("cdata",this._index-2,_clonePos(this._indexPos,-2)),
this._state=TEXT,this._startSection(1)):"]"!==c&&(this._state=IN_CDATA)
else{if(this._state!==SPECIAL){console.error("HTMLTokenizer: Encountered unknown state"),this._emitSpecialToken("error")


break}if("<"===c){var re
switch(this._special){case"c":re=/^\/script[ >]/i
break
case"t":re=/^\/style[ >]/i
break
case"e":re=/^\/textarea[ >]/i}var m=re.exec(this._buffer.substring(this._index+1,this._index+15))
if(m){this._state=TEXT
continue}}}"\n"===c?(this._indexPos.row++,this._indexPos.column=0):this._indexPos.column++,this._index++

}return this._index===this._buffer.length&&(this._state!==TEXT?this._emitSpecialToken("error"):this._emitTokenIfNonempty("text")),
this._token},Tokenizer.prototype._checkSpecial=function(){var name=this._token&&this._token.contents
return!!/^s(?:cript|tyle)|textarea$/i.test(name)&&(this._special=name[1].toLowerCase(),!0)},Tokenizer.prototype._startSpecial=function(){
return this._state=SPECIAL,this._startSection(1),!0},Tokenizer.prototype._startSection=function(offset){
offset=offset||0,this._sectionStart=this._index+offset,this._sectionStartPos=_clonePos(this._indexPos,offset)

},Tokenizer.prototype._setToken=function(type,index,indexPos){void 0===index&&(index=this._index),void 0===indexPos&&(indexPos=this._indexPos)


var token={type:type,contents:this._sectionStart===-1?"":this._buffer.substring(this._sectionStart,index),
start:this._sectionStart,end:index,startPos:_clonePos(this._sectionStartPos),endPos:_clonePos(indexPos)
}
this._token?(this._nextToken&&console.error("HTMLTokenizer: Tried to emit more than two tokens in a single call"),
this._nextToken=token):this._token=token},Tokenizer.prototype._emitToken=function(type,index,indexPos){
this._setToken(type,index,indexPos),this._sectionStart=-1,this._sectionStartPos=null},Tokenizer.prototype._emitSpecialToken=function(type,index,indexPos){
this._sectionStart=-1,this._sectionStartPos=null,this._emitToken(type,index,indexPos)},Tokenizer.prototype._emitTokenIfNonempty=function(type){
this._index>this._sectionStart&&this._sectionStart!=-1&&this._setToken(type),this._sectionStart=-1,this._sectionStartPos=null

},exports.Tokenizer=Tokenizer})


define("plugins/c9.ide.language.html.diff/murmurhash3_gc",[],function(require,exports,module){var MurmurHash3={
mul32:function(m,n){var nlo=65535&n,nhi=n-nlo
return(nhi*m|0)+(nlo*m|0)|0},hashBytes:function(data,len,seed){for(var c1=3432918353,c2=461845907,h1=seed,roundedEnd=len&-4,i=0;i<roundedEnd;i+=4){
var k1=255&data.charCodeAt(i)|(255&data.charCodeAt(i+1))<<8|(255&data.charCodeAt(i+2))<<16|(255&data.charCodeAt(i+3))<<24


k1=this.mul32(k1,c1),k1=(131071&k1)<<15|k1>>>17,k1=this.mul32(k1,c2),h1^=k1,h1=(524287&h1)<<13|h1>>>19,
h1=5*h1+3864292196|0}switch(k1=0,len%4){case 3:k1=(255&data.charCodeAt(roundedEnd+2))<<16
case 2:k1|=(255&data.charCodeAt(roundedEnd+1))<<8
case 1:k1|=255&data.charCodeAt(roundedEnd),k1=this.mul32(k1,c1),k1=(131071&k1)<<15|k1>>>17,k1=this.mul32(k1,c2),
h1^=k1}return h1^=len,h1^=h1>>>16,h1=this.mul32(h1,2246822507),h1^=h1>>>13,h1=this.mul32(h1,3266489909),
h1^=h1>>>16},hashString:function(data,len,seed){for(var c1=3432918353,c2=461845907,h1=seed,roundedEnd=len&-2,i=0;i<roundedEnd;i+=2){
var k1=data.charCodeAt(i)|data.charCodeAt(i+1)<<16
k1=this.mul32(k1,c1),k1=(131071&k1)<<15|k1>>>17,k1=this.mul32(k1,c2),h1^=k1,h1=(524287&h1)<<13|h1>>>19,
h1=5*h1+3864292196|0}return len%2==1&&(k1=data.charCodeAt(roundedEnd),k1=this.mul32(k1,c1),k1=(131071&k1)<<15|k1>>>17,
k1=this.mul32(k1,c2),h1^=k1),h1^=len<<1,h1^=h1>>>16,h1=this.mul32(h1,2246822507),h1^=h1>>>13,h1=this.mul32(h1,3266489909),
h1^=h1>>>16}}
"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=MurmurHash3)})


define("plugins/c9.ide.language.html.diff/HTMLSimpleDOM",[],function(require,exports,module){"use strict"


function SimpleNode(properties){extend(this,properties)}function getTextNodeID(textNode){var childIndex=textNode.parent.children.indexOf(textNode)


return 0===childIndex?textNode.parent.tagID+".0":textNode.parent.children[childIndex-1].tagID+"t"}function _addPos(pos1,pos2){
return{row:pos1.row+pos2.row,column:0===pos2.row?pos1.column+pos2.column:pos2.column}}function _offsetPos(pos,offset){
return{row:pos.row,column:pos.column+offset}}function Builder(text,startOffset,startOffsetPos){this.stack=[],
this.text=text,this.t=new Tokenizer(text),this.currentTag=null,this.startOffset=startOffset||0,this.startOffsetPos=startOffsetPos||{
row:0,column:0}}function build(text,strict){var builder=new Builder(text)
return builder.build(strict)}function _dumpDOM(root){function walk(node){result+=node.tag?indent+"TAG "+node.tagID+" "+node.tag+" "+JSON.stringify(node.attributes)+"\n":indent+"TEXT "+(node.tagID||"- ")+node.content+"\n",
node.isElement()&&(indent+="  ",node.children.forEach(walk),indent=indent.slice(2))}var result="",indent=""


return walk(root),result}function generateInstrumentedHTML(text){function walk(node){if(node.tag){var attrText=" data-cloud9-id='"+node.tagID+"'",insertIndex=node.start+node.tag.length+1


gen+=orig.substr(lastIndex,insertIndex-lastIndex)+attrText,lastIndex=insertIndex}node.isElement()&&node.children.forEach(walk)

}var builder=new Builder(text)
builder.getID=builder.getNewID=Builder.newIdGenerator()
var dom=builder.build(),orig=text,gen="",lastIndex=0
return dom?(walk(dom),gen+=orig.substr(lastIndex)):text}var extend=function(obj,mixin){return Object.keys(mixin).forEach(function(key){
obj[key]=mixin[key]}),obj},Tokenizer=require("./HTMLTokenizer").Tokenizer,MurmurHash3=require("./murmurhash3_gc"),PerfUtils={
markStart:function(){},finalizeMeasurement:function(){},addMeasurement:function(){}},seed=Math.floor(65535*Math.random()),openImpliesClose={
li:{li:!0},dt:{dd:!0,dt:!0},dd:{dd:!0,dt:!0},address:{p:!0},article:{p:!0},aside:{p:!0},blockquote:{p:!0
},dir:{p:!0},div:{p:!0},dl:{p:!0},fieldset:{p:!0},footer:{p:!0},form:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0
},h4:{p:!0},h5:{p:!0},h6:{p:!0},header:{p:!0},hgroup:{p:!0},hr:{p:!0},main:{p:!0},menu:{p:!0},nav:{p:!0
},ol:{p:!0},p:{p:!0},pre:{p:!0},section:{p:!0},table:{p:!0},ul:{p:!0},rt:{rp:!0,rt:!0},rp:{rp:!0,rt:!0
},optgroup:{optgroup:!0,option:!0},option:{option:!0},tbody:{thead:!0,tbody:!0,tfoot:!0},tfoot:{tbody:!0
},tr:{tr:!0,th:!0,td:!0},th:{th:!0,td:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0}},voidElements={
area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,
keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}
SimpleNode.prototype={update:function(){if(this.isElement()){var i,child,subtreeHashes="",childHashes=""


for(i=0;i<this.children.length;i++)child=this.children[i],child.isElement()?(childHashes+=String(child.tagID),
subtreeHashes+=String(child.tagID)+child.attributeSignature+child.subtreeSignature):(childHashes+=child.textSignature,
subtreeHashes+=child.textSignature)
this.childSignature=MurmurHash3.hashString(childHashes,childHashes.length,seed),this.subtreeSignature=MurmurHash3.hashString(subtreeHashes,subtreeHashes.length,seed)

}else this.textSignature=MurmurHash3.hashString(this.content,this.content.length,seed)},updateAttributeSignature:function(){
var attributeString=JSON.stringify(this.attributes)
this.attributeSignature=MurmurHash3.hashString(attributeString,attributeString.length,seed)},isElement:function(){
return!!this.children},isText:function(){return!this.children}},Builder.prototype._logError=function(token){
var error={token:token},startPos=token?token.startPos||token.endPos:this.startOffsetPos,endPos=token?token.endPos:this.startOffsetPos


error.startPos=_addPos(this.startOffsetPos,startPos),error.endPos=_addPos(this.startOffsetPos,endPos),
this.errors||(this.errors=[]),this.errors.push(error)},Builder.prototype.build=function(strict,markCache){
function closeTag(endIndex,endPos){lastClosedTag=stack[stack.length-1],stack.pop(),lastClosedTag.update(),
lastClosedTag.end=self.startOffset+endIndex,lastClosedTag.endPos=_addPos(self.startOffsetPos,endPos)}
var token,lastClosedTag,lastTextNode,self=this,lastIndex=0,stack=this.stack,attributeName=null,nodeMap={}


markCache=markCache||{}
var timerBuildFull="HTMLInstr. Build DOM Full",timerBuildPart="HTMLInstr. Build DOM Partial"
for(PerfUtils.markStart([timerBuildFull,timerBuildPart]);null!==(token=this.t.nextToken());){if("text"!==token.type&&"comment"!==token.type&&lastTextNode&&(lastTextNode=null),
"error"===token.type)return PerfUtils.finalizeMeasurement(timerBuildFull),PerfUtils.addMeasurement(timerBuildPart),
this._logError(token),null
if("opentagname"===token.type){var newTag,newTagName=token.contents.toLowerCase()
if(openImpliesClose.hasOwnProperty(newTagName))for(var closable=openImpliesClose[newTagName];stack.length>0&&closable.hasOwnProperty(stack[stack.length-1].tag);)closeTag(token.start-1,_offsetPos(token.startPos,-1))


newTag=new SimpleNode({tag:token.contents.toLowerCase(),children:[],attributes:{},parent:stack.length?stack[stack.length-1]:null,
start:this.startOffset+token.start-1,startPos:_addPos(this.startOffsetPos,_offsetPos(token.startPos,-1))
}),newTag.tagID=this.getID(newTag,markCache),nodeMap[newTag.tagID]&&(newTag.tagID=this.getNewID(newTag)),
nodeMap[newTag.tagID]=newTag,newTag.parent&&newTag.parent.children.push(newTag),this.currentTag=newTag,
voidElements.hasOwnProperty(newTag.tag)?newTag.update():stack.push(newTag)}else if("opentagend"===token.type||"selfclosingtag"===token.type)this.currentTag&&("selfclosingtag"===token.type&&stack.length&&stack[stack.length-1]===this.currentTag?closeTag(token.end,token.endPos):(this.currentTag.end=this.startOffset+token.end,
this.currentTag.endPos=_addPos(this.startOffsetPos,token.endPos),lastClosedTag=this.currentTag,this.currentTag.updateAttributeSignature(),
this.currentTag=null))
else if("closetag"===token.type){var closeTagName=token.contents.toLowerCase()
if(!voidElements.hasOwnProperty(closeTagName)){var i
for(i=stack.length-1;i>=0&&stack[i].tag!==closeTagName;i--);if(i!==stack.length-1&&(this._logError(token),
strict))return null
if(i>=0){do stack.length===i+1?closeTag(token.end+1,_offsetPos(token.endPos,1)):closeTag(token.start-2,_offsetPos(token.startPos,-2))
while(stack.length>i)}else if(this._logError(token),strict)return PerfUtils.finalizeMeasurement(timerBuildFull),
PerfUtils.addMeasurement(timerBuildPart),null}}else if("attribname"===token.type)attributeName=token.contents.toLowerCase(),
this.currentTag.attributes[attributeName]=""
else if("attribvalue"===token.type&&null!==attributeName)this.currentTag.attributes[attributeName]=token.contents,
attributeName=null
else if("text"===token.type&&stack.length){var newNode,parent=stack[stack.length-1]
lastTextNode?(newNode=lastTextNode,newNode.content+=token.contents):(newNode=new SimpleNode({parent:stack[stack.length-1],
content:token.contents}),parent.children.push(newNode),newNode.tagID=getTextNodeID(newNode),nodeMap[newNode.tagID]=newNode,
lastTextNode=newNode),newNode.update()}lastIndex=token.end}if(stack.length){if(this._logError(token),
strict)return PerfUtils.finalizeMeasurement(timerBuildFull),PerfUtils.addMeasurement(timerBuildPart),
null
for(var lines=this.text.split("\n"),lastPos={row:lines.length-1,column:lines[lines.length-1].length};stack.length;)closeTag(this.text.length,lastPos)

}var dom=lastClosedTag
return dom?(dom.nodeMap=nodeMap,PerfUtils.addMeasurement(timerBuildFull),PerfUtils.finalizeMeasurement(timerBuildPart),
dom):(this._logError(token),null)},Builder.newIdGenerator=function(){var tagID=5
return function(newTag){if(newTag){if("html"==newTag.tag)return 1
if("body"==newTag.tag)return 3
if("head"==newTag.tag)return 2}return tagID++}},Builder.prototype.getNewID=Builder.newIdGenerator(),Builder.prototype.getID=Builder.prototype.getNewID,
exports.build=build,exports.Builder=Builder,exports.SimpleNode=SimpleNode,exports.generateInstrumentedHTML=generateInstrumentedHTML,
exports._dumpDOM=_dumpDOM,exports._offsetPos=_offsetPos,exports._getTextNodeID=getTextNodeID,exports._seed=seed

})


define("plugins/c9.ide.language.html.diff/HTMLDOMDiff",[],function(require,exports,module){"use strict"


function generateAttributeEdits(oldNode,newNode){var oldAttributes=extend({},oldNode.attributes),newAttributes=newNode.attributes,edits=[]


return Object.keys(newAttributes).forEach(function(attributeName){if(oldAttributes[attributeName]!==newAttributes[attributeName]){
var type=oldAttributes.hasOwnProperty(attributeName)?"attrChange":"attrAdd"
edits.push({type:type,tagID:oldNode.tagID,attribute:attributeName,value:newAttributes[attributeName]})

}delete oldAttributes[attributeName]}),Object.keys(oldAttributes).forEach(function(attributeName){edits.push({
type:"attrDelete",tagID:oldNode.tagID,attribute:attributeName})}),edits}function getParentID(node){return node.parent&&node.parent.tagID

}function domdiff(oldNode,newNode){var newElement,oldElement,queue=[],edits=[],moves=[],oldNodeMap=oldNode?oldNode.nodeMap:{},newNodeMap=newNode.nodeMap,queuePush=function(node){
node.children&&oldNodeMap[node.tagID]&&queue.push(node)},addEdits=function(delta){edits.push.apply(edits,delta.edits),
moves.push.apply(moves,delta.moves),queue.push.apply(queue,delta.newElements)}
queue.push(newNode)
do newElement=queue.pop(),oldElement=oldNodeMap[newElement.tagID],oldElement?(newElement.attributeSignature!==oldElement.attributeSignature&&edits.push.apply(edits,generateAttributeEdits(oldElement,newElement)),
newElement.childSignature!==oldElement.childSignature&&addEdits(generateChildEdits(oldElement,oldNodeMap,newElement,newNodeMap)),
newElement.subtreeSignature!==oldElement.subtreeSignature&&newElement.children.forEach(queuePush)):(newElement.parent||edits.push({
type:"elementInsert",tag:newElement.tag,tagID:newElement.tagID,parentID:null,attributes:newElement.attributes
}),addEdits(generateChildEdits(null,oldNodeMap,newElement,newNodeMap)))
while(queue.length)
return moves.length>0&&edits.unshift({type:"rememberNodes",tagIDs:moves}),edits}var extend=require("ace/lib/oop").mixin,generateChildEdits=function(oldParent,oldNodeMap,newParent,newNodeMap){
for(var newChild,oldChild,newEdit,textAfterID,newIndex=0,oldIndex=0,newChildren=newParent.children,oldChildren=oldParent?oldParent.children:[],newEdits=[],edits=[],moves=[],newElements=[],finalizeNewEdits=function(beforeID,isBeingDeleted){
newEdits.forEach(function(edit){"elementDelete"!==edit.type&&(edit.beforeID=beforeID)}),edits.push.apply(edits,newEdits),
newEdits=[],isBeingDeleted||(textAfterID=beforeID)},addElementInsert=function(){return!oldNodeMap[newChild.tagID]&&(newEdit={
type:"elementInsert",tag:newChild.tag,tagID:newChild.tagID,parentID:newChild.parent.tagID,attributes:newChild.attributes
},newEdits.push(newEdit),newElements.push(newChild),textAfterID=newChild.tagID,newIndex++,!0)},addElementDelete=function(){
return!newNodeMap[oldChild.tagID]&&(finalizeNewEdits(oldChild.tagID,!0),newEdit={type:"elementDelete",
tagID:oldChild.tagID},newEdits.push(newEdit),oldIndex++,!0)},addTextInsert=function(){newEdit={type:"textInsert",
content:newChild.content,parentID:newChild.parent.tagID},textAfterID?newEdit.afterID=textAfterID:newEdit.firstChild=!0,
newEdits.push(newEdit),newIndex++},prevNode=function(){return newIndex>0?newParent.children[newIndex-1]:null

},addTextDelete=function(){var prev=prevNode()
newEdit=prev&&!prev.children?{type:"textReplace",content:prev.content}:{type:"textDelete"}
var previousEdit=newEdits.length>0&&newEdits[newEdits.length-1]
return previousEdit&&"textReplace"===previousEdit.type&&previousEdit.afterID===textAfterID?void oldIndex++:(newEdit.parentID=oldChild.parent.tagID,
1===oldChild.parent.children.length?newEdits.push(newEdit):(textAfterID&&(newEdit.afterID=textAfterID),
newEdits.push(newEdit)),void oldIndex++)},addElementMove=function(){var possiblyMovedElement=oldNodeMap[newChild.tagID]


return!(!possiblyMovedElement||newParent.tagID===getParentID(possiblyMovedElement))&&(newEdit={type:"elementMove",
tagID:newChild.tagID,parentID:newChild.parent.tagID},moves.push(newEdit.tagID),newEdits.push(newEdit),
newIndex++,!0)},hasMoved=function(oldChild){var oldChildInNewTree=newNodeMap[oldChild.tagID]
return oldChild.children&&oldChildInNewTree&&getParentID(oldChild)!==getParentID(oldChildInNewTree)};newIndex<newChildren.length&&oldIndex<oldChildren.length;)newChild=newChildren[newIndex],
newChild.children&&addElementMove()||(oldChild=oldChildren[oldIndex],hasMoved(oldChild)?oldIndex++:newChild.isElement()||oldChild.isElement()?newChild.isElement()&&oldChild.isText()?(addTextDelete(),
addElementInsert()):oldChild.isElement()&&newChild.isText()?addElementDelete()||addTextInsert():newChild.tagID!==oldChild.tagID?addElementDelete()||addElementInsert()||(console.error("HTML Instrumentation: This should not happen. Two elements have different tag IDs and there was no insert/delete. This generally means there was a reordering of elements."),
newIndex++,oldIndex++):(finalizeNewEdits(oldChild.tagID,!1),newIndex++,oldIndex++):(newChild.textSignature!==oldChild.textSignature&&(newEdit={
type:"textReplace",content:newChild.content,parentID:newChild.parent.tagID},textAfterID&&(newEdit.afterID=textAfterID),
newEdits.push(newEdit)),newIndex++,oldIndex++))
for(;oldIndex<oldChildren.length;)oldChild=oldChildren[oldIndex],hasMoved(oldChild)?oldIndex++:oldChild.isElement()?addElementDelete()||(console.error("HTML Instrumentation: failed to add elementDelete for remaining element in the original DOM. This should not happen.",oldChild),
oldIndex++):addTextDelete()
for(;newIndex<newChildren.length;)newChild=newChildren[newIndex],newChild.isElement()?addElementMove()||addElementInsert()||(console.error("HTML Instrumentation: failed to add elementInsert for remaining element in the updated DOM. This should not happen."),
newIndex++):addTextInsert()
return newEdits.forEach(function(edit){"textInsert"!==edit.type&&"elementInsert"!==edit.type&&"elementMove"!==edit.type||(edit.lastChild=!0,
delete edit.firstChild,delete edit.afterID)}),edits.push.apply(edits,newEdits),{edits:edits,moves:moves,
newElements:newElements}}
exports.domdiff=domdiff})


define("plugins/c9.ide.language.html.diff/HTMLInstrumentation",[],function(require,exports,module){"use strict"


function _posEq(pos1,pos2){return pos1&&pos2&&pos1.row===pos2.row&&pos1.column===pos2.column}function _getNodeAtDocumentPos(session,pos,preferParent,markCache){
return findNode(session.dom,pos,preferParent)}function findNode(node,pos,preferParent){for(var children=node&&node.children||[],i=0;i<children.length;i++){
var ch=node.children[i]
if(ch.children){var cmp=comparePoints(pos,ch.endPos)
if(cmp<0){if(ch&&comparePoints(pos,ch.startPos)>0)return findNode(ch,pos,preferParent)
break}if(preferParent&&0===cmp)return node}}return node}function _getTagIDAtDocumentPos(session,pos,markCache){
var match=_getNodeAtDocumentPos(session,pos,!1,markCache)
return match?match.tagID:-1}function DOMUpdater(previousDOM,session,delta){var text,startOffsetPos,startOffset=0


if(this.isIncremental=!1,delta&&(text=delta.text,"string"!=typeof text&&(text=delta.lines.join("\n")),
previousDOM&&updatePositions(previousDOM,delta)),text&&!isDangerousEdit(text)){var startNode=_getNodeAtDocumentPos(session,delta.start,!0)


if(startNode){var range=Range.fromPoints(startNode.startPos,startNode.endPos)
range&&(text=session.getTextRange(range),this.changedTagID=startNode.tagID,startOffsetPos=startNode.startPos,
startOffset=session.doc.positionToIndex(startOffsetPos),this.isIncremental=!0)}}this.changedTagID||(text=session.getValue()),
HTMLSimpleDOM.Builder.call(this,text,startOffset,startOffsetPos),this.session=session,this.cm=session._codeMirror,
this.previousDOM=previousDOM}function isDangerousEdit(text){return/[<>\/=\"\']/.test(text)}function _hasAncestorWithID(node,id){
for(var ancestor=node.parent;ancestor&&ancestor.tagID!==id;)ancestor=ancestor.parent
return!!ancestor}function _updateDOM(previousDOM,session,delta){var updater=new DOMUpdater(previousDOM,session,delta),result=updater.update()


if(!result)return{errors:updater.errors}
var edits=HTMLDOMDiff.domdiff(result.oldSubtree,result.newSubtree)
return result.newSubtree!==result.newDOM&&delete result.newSubtree.nodeMap,{errors:updater.errors,dom:result.newDOM,
edits:edits,_wasIncremental:updater.isIncremental}}function updatePositions(dom,delta){function update(pos){
pos.row==(sign==-1?end.row:start.row)&&(pos.column+=columnChange),rowChange&&(pos.row+=rowChange)}function walk(node){
if(node.children){var sp=node.startPos,ep=node.endPos
if(1===sign){var cmpStartPos=comparePoints(start,sp)
if(cmpStartPos<0){if(update(sp),update(ep),!rowChange&&sp.row>start.row)return}else{var cmpEndPos=comparePoints(start,ep)


if(!(cmpEndPos<0))return
update(ep)}}else{var cmp=comparePoints(end,sp)
if(cmp<=0){if(update(sp),update(ep),!rowChange&&sp.row>end.row)return}else{if(cmp=comparePoints(start,ep),
!(cmp<=0))return
update(ep)}}return node.children.some(walk)}}var start=delta.start,end=delta.end,sign="i"==delta.action[0]?1:-1,rowChange=sign*(end.row-start.row),columnChange=sign*(end.column-start.column)


walk(dom)}function getUnappliedEditList(session,delta){var dom=session.dom,result=_updateDOM(dom,session,delta)


return dom&&result.errors&&(dom.errors=result.errors),result.dom&&(session.dom=result.dom),result}function _processBrowserSimpleDOM(browserRoot,sessionRootTagID){
function _processElement(elem){elem.tagID=elem.attributes["data-cloud9-id"],delete elem.attributes["data-cloud9-id"],
elem.children.forEach(function(child){child.parent=elem,child.isElement()?_processElement(child):child.isText()&&(child.update(),
child.tagID=HTMLSimpleDOM.getTextNodeID(child),nodeMap[child.tagID]=child)}),elem.update(),nodeMap[elem.tagID]=elem,
elem.tagID===sessionRootTagID&&(root=elem)}var root,nodeMap={}
return _processElement(browserRoot),root=root||browserRoot,root.nodeMap=nodeMap,root}function _getBrowserDiff(session,browserSimpleDOM){
var browserRoot,sessionRoot=session.dom
return browserRoot=_processBrowserSimpleDOM(browserSimpleDOM,sessionRoot.tagID),{diff:HTMLDOMDiff.domdiff(sessionRoot,browserRoot),
browser:browserRoot,session:sessionRoot}}function scanDocument(session){var value=session.getValue(),savedValue=session.c9doc.meta.$savedValue||value


session.savedDom||(session.savedDom=HTMLSimpleDOM.build(savedValue))
var update
return savedValue!=value?(session.dom=session.savedDom,update=_updateDOM(session.savedDom,session),session.dom=update.dom,
update.dom=session.savedDom):(session.dom=session.savedDom,update={dom:session.savedDom}),update}function syncTagIds(session){
function walk(node){if(node.children){var defaultId=getNewID(node)
node.tagID!=defaultId&&(idMap[defaultId]=node.tagID),node.children&&node.children.forEach(walk)}}var value=session.getValue(),savedValue=session.c9doc.meta.$savedValue||value


if(session.savedDom||(session.savedDom=HTMLSimpleDOM.build(savedValue)),!session.savedDom)return{errors:["save"]
}
var update={}
if(savedValue==value||session.dom)if(session.dom){var edits=HTMLDOMDiff.domdiff(session.savedDom,session.dom)


update.edits=edits}else session.dom=session.savedDom
else session.dom=session.savedDom,getDeltaList(savedValue,value).forEach(function(delta){updatePositions(session.savedDom,delta)

}),update=_updateDOM(session.savedDom,session),session.dom=update.dom
var getNewID=HTMLSimpleDOM.Builder.newIdGenerator(),idMap={}
return walk(session.savedDom),update.dom=null,update.idMap=idMap,update}function getDeltaList(v1,v2){
var DiffMatchPatch=require("plugins/c9.ide.threewaymerge/diff_match_patch_amd").diff_match_patch,dfm=new DiffMatchPatch,row=0,column=0,deltas=[]


return dfm.diff_main(v1,v2).forEach(function(change){var text=change[1],lines=text.split(/\r\n|\r|\n/),colCh=lines[lines.length-1].length,rowCh=lines.length-1,endRow=row+rowCh,endColumn=colCh


rowCh||(endColumn=column+colCh),0===change[0]?(row=endRow,column=endColumn):change[0]==-1?deltas.push({
start:{row:row,column:column},end:{row:endRow,column:endColumn},lines:lines,action:"remove"}):1==change[0]&&(deltas.push({
start:{row:row,column:column},end:{row:endRow,column:endColumn},lines:lines,action:"insert"}),row=endRow,
column=endColumn)}),deltas}var extend=require("ace/lib/oop").mixin,Range=require("ace/range").Range,comparePoints=Range.comparePoints,HTMLSimpleDOM=require("./HTMLSimpleDOM"),HTMLDOMDiff=require("./HTMLDOMDiff")


DOMUpdater.prototype=Object.create(HTMLSimpleDOM.Builder.prototype),DOMUpdater.prototype.getID=function(newTag,markCache){
var currentTagID=_getTagIDAtDocumentPos(this.session,HTMLSimpleDOM._offsetPos(newTag.startPos,1),markCache)


if(currentTagID===-1||_hasAncestorWithID(newTag,currentTagID))currentTagID=this.getNewID()
else{var oldNode=this.previousDOM.nodeMap[currentTagID]
oldNode&&oldNode.tag===newTag.tag||(currentTagID=this.getNewID())}return currentTagID},DOMUpdater.prototype._updateMarkedRanges=function(nodeMap,markCache){
var updateIDs=Object.keys(nodeMap),cm=this.cm,marks=cm.getAllMarks()
cm.operation(function(){marks.forEach(function(mark){if(mark.hasOwnProperty("tagID")&&nodeMap[mark.tagID]){
var node=nodeMap[mark.tagID],markInfo=markCache[mark.tagID]
markInfo&&_posEq(markInfo.range.from,node.startPos)&&_posEq(markInfo.range.to,node.endPos)||(mark.clear(),
mark=cm.markText(node.startPos,node.endPos),mark.tagID=node.tagID),updateIDs.splice(updateIDs.indexOf(String(node.tagID)),1)

}}),updateIDs.forEach(function(id){var mark,node=nodeMap[id]
node.isElement()&&(mark=cm.markText(node.startPos,node.endPos),mark.tagID=Number(id))})})},DOMUpdater.prototype._buildNodeMap=function(root){
function walk(node){node.tagID&&(nodeMap[node.tagID]=node),node.isElement()&&node.children.forEach(walk)

}var nodeMap={}
walk(root),root.nodeMap=nodeMap},DOMUpdater.prototype._handleDeletions=function(nodeMap,oldSubtreeMap,newSubtreeMap){
var deletedIDs=[]
Object.keys(oldSubtreeMap).forEach(function(key){newSubtreeMap.hasOwnProperty(key)||(deletedIDs.push(key),
delete nodeMap[key])})},DOMUpdater.prototype.update=function(){var markCache={},newSubtree=this.build(!1,markCache),result={
newDOM:newSubtree,oldSubtree:this.previousDOM,newSubtree:newSubtree}
if(!newSubtree)return null
if(this.changedTagID){var oldSubtree=this.previousDOM.nodeMap[this.changedTagID],parent=oldSubtree.parent


if(parent){var childIndex=parent.children.indexOf(oldSubtree)
if(childIndex===-1)console.error("DOMUpdater.update(): couldn't locate old subtree in tree")
else{oldSubtree.parent=null,newSubtree.parent=parent,parent.children[childIndex]=newSubtree,extend(this.previousDOM.nodeMap,newSubtree.nodeMap),
this._buildNodeMap(oldSubtree),this._handleDeletions(this.previousDOM.nodeMap,oldSubtree.nodeMap,newSubtree.nodeMap)


for(var curParent=parent;curParent;)curParent.update(),curParent=curParent.parent
result.newDOM=this.previousDOM,result.oldSubtree=oldSubtree}}}else this.session.dom=result.newDOM
return result},exports._getNodeAtDocumentPos=_getNodeAtDocumentPos,exports._getTagIDAtDocumentPos=_getTagIDAtDocumentPos,
exports._updateDOM=_updateDOM,exports._getBrowserDiff=_getBrowserDiff,exports.syncTagIds=syncTagIds,exports.scanDocument=scanDocument,
exports.generateInstrumentedHTML=HTMLSimpleDOM.generateInstrumentedHTML,exports.getUnappliedEditList=getUnappliedEditList

})


define("plugins/c9.ide.remote/documents/htmldocument",[],function(require,exports,module){function main(options,imports,register){
function HTMLDocument(path){function load(){return!loaded&&(loaded=!0,void remote.register(plugin))}function addTransport(transport){
return transports.indexOf(transport)==-1&&(transports.push(transport),transport.addOther(function(){var idx=transports.indexOf(transport)


~idx&&(transports.splice(idx,1),0===transports.length&&plugin.unload())})),doc&&initDom(transport),tab&&tab.isActive()&&updateHighlight(!0),
plugin}function initTab(t){if(!t)return doc=null,tab&&fs.readFile(path,function(err,data){update(null,data)

}),void(tab=null)
tab=t,doc=tab.document
var c9session=doc.getSession()
c9session.once("init",function(e){e.session.on("change",update),e.session.selection.on("changeCursor",updateHighlight),
e.session.savedDom=null,e.session.dom=null,e.session.htmldocument=plugin,plugin.addOther(function(){e.session.off("change",update),
e.session.selection.off("changeCursor",updateHighlight),e.session.savedDom=null,e.session.dom=null,e.session.htmldocument=null

}),transports.forEach(function(transport){initDom(transport,doc)})}),tab.editor.ace.on("focus",function(){
updateHighlight(!0)},plugin),tab.on("activate",function(){updateHighlight()},plugin),tab.on("deactivate",function(){
updateHighlight(!1)},plugin),tab.on("close",function(){watcher.watch(path)}),save.on("afterSave",function(e){
if(e.document==doc){var session=doc.getSession().session
session&&(session.dom||session.savedDom||!errors.save||(errors.save=!1,transports.forEach(function(transport){
transport.reload()})),session.savedDom=session.dom)}},plugin)}function initDom(transport){if(doc){var session=doc.getSession().session


if(session){var docState=HTMLInstrumentation.syncTagIds(session)
if(!session.dom&&docState.errors){var editList=HTMLInstrumentation.getUnappliedEditList(session)
if(!reportErrors(session,editList)){errors.save=!0
var name=doc.tab.path&&doc.tab.path.match(/(^|\/)([^\/]*)$/)[2]||"the document"
errorDialog.show("Please save "+name+" to start a new live editing session")}}docState.errors?(session.dom=null,
this.errors=docState.errors,console.log(this.errors)):transport.initHTMLDocument(docState)}}}function updateHighlight(e){
var query,tagId
if(tab&&e!==!1){var session=doc.getSession().session
if(!session||!session.dom)return
var pos={row:session.selection.lead.row,column:session.selection.lead.column}
"<"===session.doc.getLine(pos.row)[pos.column]&&pos.column++,tagId=HTMLInstrumentation._getTagIDAtDocumentPos(session,pos)

}query=!!tagId&&"[data-cloud9-id='"+tagId+"']",transports.forEach(function(transport){transport.highlightCSSQuery(query,e===!0)

})}function update(changes,value){if(changes){var session=doc.getSession().session
if(!session.dom)return void transports.forEach(function(transport){initDom(transport)})
var result=HTMLInstrumentation.getUnappliedEditList(session,changes)
result.edits&&result.edits.length&&transports.forEach(function(transport){transport.processDOMChanges(result.edits,path)

}),reportErrors(session,result)}}function reportErrors(session,editList){if(scheduleDisplayError(!editList.edits&&editList.errors&&editList.errors.length?"Unable to update preview: unmatched tags detected":!1),
errors.unmatchedTags=editList.errors,session.domErrorMarker&&(session.removeMarker(session.domErrorMarker),
session.domErrorMarker=null),errors.unmatchedTags&&errors.unmatchedTags.length){var error=errors.unmatchedTags[0],range=Range.fromPoints(error.startPos,error.endPos)


range.isEmpty()&&(range.start.column--,range.end.column++),session.domErrorMarker=session.addMarker(range,"language_highlight_error","text")

}return editList.errors&&editList.errors.length}function scheduleDisplayError(msg){clearTimeout(errors.timer),
(msg||errors.msg)&&(errors.timer=setTimeout(function(){errors.msg=msg,errorDialog.show(msg,2e3)},800))

}function scrollIntoView(){updateHighlight(),transports.forEach(function(transport){transport.reveal()

})}var exists=remote.findDocument(path)
if(exists)return exists
var tab,doc,plugin=new Plugin("Ajax.org",main.consumes),transports=[],errors={},loaded=!1
return plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({get path(){return path},get tab(){return tab

},set tab(tab){initTab(tab)},_events:["draw"],addTransport:addTransport,update:update,scrollIntoView:scrollIntoView
}),plugin.load(null,"htmldocument"),plugin}var Plugin=imports.Plugin,remote=imports.remote,watcher=imports.watcher,save=imports.save,fs=imports.fs,Range=(imports.commands,
require("ace/range").Range),errorDialog=imports["dialog.error"],HTMLInstrumentation=require("../../c9.ide.language.html.diff/HTMLInstrumentation")


register(null,{HTMLDocument:HTMLDocument})}return main.consumes=["Plugin","remote","watcher","fs","save","dialog.error","commands"],
main.provides=["HTMLDocument"],main})


define("plugins/c9.ide.remote/manager",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,watcher.on("delete",function(e){var doc=documents[e.path]
doc&&!doc.tab&&doc.remove&&doc.remove()},plugin),watcher.on("change",function(e){var doc=documents[e.path]


doc&&!doc.tab&&fs.readFile(e.path,function(err,data){return"function"!=typeof doc.update?errorHandler.log(new Error("Tracked: doc.update is not a function"),{
path:e.path,err:err,doc:doc}):void doc.update(null,data)})},plugin),tabManager.on("open",function(e){
var tab=e.tab,doc=tab.path&&documents[tab.path]
doc&&(doc.tab=tab)},plugin),void tabManager.on("tabDestroy",function(e){var tab=e.tab,doc=tab.path&&documents[tab.path]


doc&&(doc.tab=null)},plugin))}function registerDocument(doc){documents[doc.path]=doc,watcher.watch(doc.path),
doc.tab=tabManager.findTab(doc.path),doc.addOther(function(){delete documents[doc.path]})}function findDocument(path){
return documents[path]}var Plugin=imports.Plugin,watcher=imports.watcher,fs=imports.fs,tabManager=imports.tabManager,errorHandler=imports.error_handler,plugin=new Plugin("Ajax.org",main.consumes),documents={},loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({get documents(){return documents},_events:["draw"],
findDocument:findDocument,register:registerDocument}),register(null,{remote:plugin})}return main.consumes=["Plugin","watcher","tabManager","fs","error_handler"],
main.provides=["remote"],main})


define("ace/requirejs/text!ace/ext/static.css",[],"")


define("ace/ext/static_highlight",[],function(require,exports,module){"use strict"
var EditSession=require("../edit_session").EditSession,TextLayer=require("../layer/text").Text,baseStyles=require("../requirejs/text!./static.css"),config=require("../config"),dom=require("../lib/dom"),SimpleTextLayer=function(){
this.config={}}
SimpleTextLayer.prototype=TextLayer.prototype
var highlight=function(el,opts,callback){var m=el.className.match(/lang-(\w+)/),mode=opts.mode||m&&"ace/mode/"+m[1]


if(!mode)return!1
var theme=opts.theme||"ace/theme/textmate",data="",nodes=[]
if(el.firstElementChild)for(var textLen=0,i=0;i<el.childNodes.length;i++){var ch=el.childNodes[i]
3==ch.nodeType?(textLen+=ch.data.length,data+=ch.data):nodes.push(textLen,ch)}else data=dom.getInnerText(el),
opts.trim&&(data=data.trim())
highlight.render(data,mode,theme,opts.firstLineNumber,!opts.showGutter,function(highlighted){dom.importCssString(highlighted.css,"ace_highlight"),
el.innerHTML=highlighted.html
for(var container=el.firstChild.firstChild,i=0;i<nodes.length;i+=2){var pos=highlighted.session.doc.indexToPosition(nodes[i]),node=nodes[i+1],lineEl=container.children[pos.row]


lineEl&&lineEl.appendChild(node)}callback&&callback()})}
highlight.render=function(input,mode,theme,lineStart,disableGutter,callback){function done(){var result=highlight.renderSync(input,mode,theme,lineStart,disableGutter)


return callback?callback(result):result}var waiting=1,modeCache=EditSession.prototype.$modes
"string"==typeof theme&&(waiting++,config.loadModule(["theme",theme],function(m){theme=m,--waiting||done()

}))
var modeOptions
return mode&&"object"==typeof mode&&!mode.getTokenizer&&(modeOptions=mode,mode=modeOptions.path),"string"==typeof mode&&(waiting++,
config.loadModule(["mode",mode],function(m){modeCache[mode]&&!modeOptions||(modeCache[mode]=new m.Mode(modeOptions)),
mode=modeCache[mode],--waiting||done()})),--waiting||done()},highlight.renderSync=function(input,mode,theme,lineStart,disableGutter){
lineStart=parseInt(lineStart||1,10)
var session=new EditSession("")
session.setUseWorker(!1),session.setMode(mode)
var textLayer=new SimpleTextLayer
textLayer.setSession(session),session.setValue(input)
for(var stringBuilder=[],length=session.getLength(),ix=0;ix<length;ix++)stringBuilder.push("<div class='ace_line'>"),
disableGutter||stringBuilder.push("<span class='ace_gutter ace_gutter-cell' unselectable='on'></span>"),
textLayer.$renderLine(stringBuilder,ix,!0,!1),stringBuilder.push("\n</div>")
var html="<div class='"+theme.cssClass+"'><div class='ace_static_highlight"+(disableGutter?"":" ace_show_gutter")+"' style='counter-reset:ace_line "+(lineStart-1)+"'>"+stringBuilder.join("")+"</div></div>"


return textLayer.destroy(),{css:baseStyles+theme.cssText,html:html,session:session}},module.exports=highlight,
module.exports.highlight=highlight})


define("ace/ext/modelist",[],function(require,exports,module){"use strict"
function getModeForPath(path){for(var mode=modesByName.text,fileName=path.split(/[\/\\]/).pop(),i=0;i<modes.length;i++)if(modes[i].supportsFile(fileName)){
mode=modes[i]
break}return mode}var modes=[],Mode=function(name,caption,extensions){this.name=name,this.caption=caption,
this.mode="ace/mode/"+name,this.extensions=extensions
var re
re=/\^/.test(extensions)?extensions.replace(/\|(\^)?/g,function(a,b){return"$|"+(b?"^":"^.*\\.")})+"$":"^.*\\.("+extensions+")$",
this.extRe=new RegExp(re,"gi")}
Mode.prototype.supportsFile=function(filename){return filename.match(this.extRe)}
var supportedModes={ABAP:["abap"],ABC:["abc"],ActionScript:["as"],ADA:["ada|adb"],Apache_Conf:["^htaccess|^htgroups|^htpasswd|^conf|htaccess|htgroups|htpasswd"],
AsciiDoc:["asciidoc|adoc"],Assembly_x86:["asm|a"],AutoHotKey:["ahk"],BatchFile:["bat|cmd"],Bro:["bro"],
C_Cpp:["cpp|c|cc|cxx|h|hh|hpp|ino"],C9Search:["c9search_results"],Cirru:["cirru|cr"],Clojure:["clj|cljs"],
Cobol:["CBL|COB"],coffee:["coffee|cf|cson|^Cakefile"],ColdFusion:["cfm"],CSharp:["cs"],CSS:["css"],Curly:["curly"],
D:["d|di"],Dart:["dart"],Diff:["diff|patch"],Dockerfile:["^Dockerfile"],Dot:["dot"],Drools:["drl"],Dummy:["dummy"],
DummySyntax:["dummy"],Eiffel:["e|ge"],EJS:["ejs"],Elixir:["ex|exs"],Elm:["elm"],Erlang:["erl|hrl"],Forth:["frt|fs|ldr|fth|4th"],
Fortran:["f|f90"],FTL:["ftl"],Gcode:["gcode"],Gherkin:["feature"],Gitignore:["^.gitignore"],Glsl:["glsl|frag|vert"],
Gobstones:["gbs"],golang:["go"],GraphQLSchema:["gql"],Groovy:["groovy"],HAML:["haml"],Handlebars:["hbs|handlebars|tpl|mustache"],
Haskell:["hs"],Haskell_Cabal:["cabal"],haXe:["hx"],Hjson:["hjson"],HTML:["html|htm|xhtml|vue|we|wpy"],
HTML_Elixir:["eex|html.eex"],HTML_Ruby:["erb|rhtml|html.erb"],INI:["ini|conf|cfg|prefs"],Io:["io"],Jack:["jack"],
Jade:["jade|pug"],Java:["java"],JavaScript:["js|jsm|jsx"],JSON:["json"],JSONiq:["jq"],JSP:["jsp"],JSX:["jsx"],
Julia:["jl"],Kotlin:["kt|kts"],LaTeX:["tex|latex|ltx|bib"],LESS:["less"],Liquid:["liquid"],Lisp:["lisp"],
LiveScript:["ls"],LogiQL:["logic|lql"],LSL:["lsl"],Lua:["lua"],LuaPage:["lp"],Lucene:["lucene"],Makefile:["^Makefile|^GNUmakefile|^makefile|^OCamlMakefile|make"],
Markdown:["md|markdown"],Mask:["mask"],MATLAB:["matlab"],Maze:["mz"],MEL:["mel"],MUSHCode:["mc|mush"],
MySQL:["mysql"],Nix:["nix"],NSIS:["nsi|nsh"],ObjectiveC:["m|mm"],OCaml:["ml|mli"],Pascal:["pas|p"],Perl:["pl|pm"],
pgSQL:["pgsql"],PHP:["php|phtml|shtml|php3|php4|php5|phps|phpt|aw|ctp|module"],Pig:["pig"],Powershell:["ps1"],
Praat:["praat|praatscript|psc|proc"],Prolog:["plg|prolog"],Properties:["properties"],Protobuf:["proto"],
Python:["py"],R:["r"],Razor:["cshtml|asp"],RDoc:["Rd"],RHTML:["Rhtml"],RST:["rst"],Ruby:["rb|ru|gemspec|rake|^Guardfile|^Rakefile|^Gemfile"],
Rust:["rs"],SASS:["sass"],SCAD:["scad"],Scala:["scala"],Scheme:["scm|sm|rkt|oak|scheme"],SCSS:["scss"],
SH:["sh|bash|^.bashrc"],SJS:["sjs"],Smarty:["smarty|tpl"],snippets:["snippets"],Soy_Template:["soy"],
Space:["space"],SQL:["sql"],SQLServer:["sqlserver"],Stylus:["styl|stylus"],SVG:["svg"],Swift:["swift"],
Tcl:["tcl"],Tex:["tex"],Text:["txt"],Textile:["textile"],Toml:["toml"],TSX:["tsx"],Twig:["twig|swig"],
Typescript:["ts|typescript|str"],Vala:["vala"],VBScript:["vbs|vb"],Velocity:["vm"],Verilog:["v|vh|sv|svh"],
VHDL:["vhd|vhdl"],Wollok:["wlk|wpgm|wtest"],XML:["xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl|xaml"],
XQuery:["xq"],YAML:["yaml|yml"],Django:["html"]},nameOverrides={ObjectiveC:"Objective-C",CSharp:"C#",
golang:"Go",C_Cpp:"C and C++",coffee:"CoffeeScript",HTML_Ruby:"HTML (Ruby)",HTML_Elixir:"HTML (Elixir)",
FTL:"FreeMarker"},modesByName={}
for(var name in supportedModes){var data=supportedModes[name],displayName=(nameOverrides[name]||name).replace(/_/g," "),filename=name.toLowerCase(),mode=new Mode(filename,displayName,data[0])


modesByName[filename]=mode,modes.push(mode)}module.exports={getModeForPath:getModeForPath,modes:modes,
modesByName:modesByName}})


define("plugins/c9.ide.preview.markdown/markdown",[],function(require,exports,module){function main(options,imports,register){
function getPreviewUrl(fn){return options.local&&"file:"==document.baseURI.substr(0,5)?setTimeout(getPreviewUrl.bind(null,fn),100):HTMLURL?fn(HTMLURL):(HTMLURL=(options.staticPrefix?(options.local?dirname(document.baseURI)+"/static":options.staticPrefix)+options.htmlPath:"/static/plugins/c9.ide.preview/previewers/markdown.html")+"?host="+(options.local?"local":location.origin),
"/"==HTMLURL.charAt(0)&&(HTMLURL=location.protocol+"//"+location.host+HTMLURL),previewOrigin=HTMLURL.match(/^(?:[^\/]|\/\/)*/)[0],
void fn(HTMLURL))}function enableScroll(session){if(session.previewTab&&session.previewTab.loaded&&(!session.scrollHook||session.scrollHook!=session.previewTab)){
var aceSession=session.previewTab.document.getSession().session
if(aceSession){var listen=function(scrollTopPx){if(session.source){var visibleRow=aceSession.c9doc.editor.ace.renderer.getFirstFullyVisibleRow()


setTimeout(function(){session.source.postMessage({type:"scroll",lineNumber:visibleRow},"*")})}}
aceSession.on("changeScrollTop",listen),session.previewTab.on("unload",function(){aceSession.removeListener("changeScrollTop",listen)

}),session.scrollHook=session.previewTab}}}var HTMLURL,previewOrigin,Previewer=imports.Previewer,c9=imports.c9,fs=imports.fs,commands=imports.commands,layout=imports.layout,settings=imports.settings,tabManager=imports.tabManager,showError=imports["dialog.error"].show,dirname=require("path").dirname,highlighter=require("ace/ext/static_highlight"),modelist=require("ace/ext/modelist"),plugin=new Previewer("Ajax.org",main.consumes,{
caption:"Markdown",index:200,selector:function(path){return path&&path.match(/(?:\.md|\.markdown)$/i)

}}),emit=plugin.getEmitter(),BGCOLOR={"flat-light":"rgb(255,255,255)","flat-dark":"rgba(255, 255, 255, 0.88)",
light:"rgba(255, 255, 255, 0.88)","light-gray":"rgba(255, 255, 255, 0.88)",dark:"rgba(255, 255, 255, 0.88)",
"dark-gray":"rgba(255, 255, 255, 0.88)"},counter=0
plugin.on("load",function(){}),plugin.on("sessionStart",function(e){function setTheme(e){iframe.style.backgroundColor=BGCOLOR[e.theme]

}var doc=e.doc,session=e.session,tab=e.tab,editor=e.editor
if(session.iframe)return session.editor=editor,void editor.container.appendChild(session.iframe)
var iframe=document.createElement("iframe")
iframe.setAttribute("nwfaketop",!0),iframe.setAttribute("nwdisable",!0),iframe.style.width="100%",iframe.style.height="100%",
iframe.style.border=0,layout.on("themeChange",setTheme,doc),setTheme({theme:settings.get("user/general/@skin")
}),options.local&&iframe.addEventListener("load",function(){iframe.contentWindow.opener=window,iframe.contentWindow.start&&iframe.contentWindow.start(window)

})
var onMessage=function(e){if((!c9.hosted||e.origin===previewOrigin)&&e.data.id==session.id)if("exec"==e.data.message)commands.exec(e.data.command)
else if("focus"==e.data.message)tabManager.focusTab(tab)
else if("highlight"==e.data.message){var mode=(modelist.modesByName[e.data.lang]||modelist.getModeForPath("file."+e.data.lang)||0).mode||"ace/mode/"+e.data.lang,theme="ace/theme/cloud9_day",value=e.data.content.replace(/[\n\r]*$/,"")


highlighter.render(value,mode,theme,0,!0,function(highlighted){session.source.postMessage({type:"highlight",
hid:e.data.hid,html:highlighted.html,css:highlighted.css},"*")})}else if("stream.document"==e.data.message){
if(session.source=e.source,session.previewTab){var doc=session.previewTab.document
doc.hasValue()?emit("update",{previewDocument:doc}):doc.once("setValue",function(){emit("update",{previewDocument:doc
})})}else fs.readFile(session.path,function(err,data){return err?showError(err.message):void session.source.postMessage({
type:"document",content:data},"*")})
session.source.postMessage({type:"keys",keys:commands.getExceptionBindings()},"*"),tab.classList.remove("loading")

}}
window.addEventListener("message",onMessage,!1),session.iframe=iframe,session.id="markdown"+counter++,
session.destroy=function(){delete session.editor,delete session.iframe,window.removeEventListener("message",onMessage,!1)

},getPreviewUrl(function(url){iframe.src=url+"&id="+session.id}),session.editor=editor,editor.container.appendChild(session.iframe)

}),plugin.on("sessionEnd",function(e){var tab=e.tab,session=e.session,iframe=session.iframe
iframe.parentNode.removeChild(iframe),tab.classList.remove("loading")}),plugin.on("sessionActivate",function(e){
var session=e.session
session.iframe.style.display="block",session.editor.setLocation(session.path),session.editor.setButtonStyle("Markdown","page_white.png")

}),plugin.on("sessionDeactivate",function(e){var session=e.session
session.iframe.style.display="none"}),plugin.on("navigate",function(e){var tab=plugin.activeDocument.tab,iframe=plugin.activeSession.iframe,editor=plugin.activeSession.editor,session=e.session


tab.classList.add("loading"),tab.title=tab.tooltip="[M] "+e.url,editor.setLocation(e.url),iframe.src=iframe.src,
enableScroll(session)}),plugin.on("update",function(e){var session=plugin.activeSession
session.source&&(session.source.postMessage({type:"document",content:e.previewDocument.value,fontSize:settings.get("user/ace/fontSize"),
fontFamily:settings.get("user/ace/fontFamily")},"*"),enableScroll(session),setTimeout(function(){if(session.previewTab&&session.previewTab.loaded){
var doc=session.previewTab.document
doc.getSession().session._emit("changeScrollTop")}},100))}),plugin.on("reload",function(){var iframe=plugin.activeSession.iframe,tab=plugin.activeDocument.tab


tab.classList.add("loading"),iframe.src=iframe.src}),plugin.on("popout",function(){var src=plugin.activeSession.iframe.src


window.open(src)}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),plugin.on("unload",function(){}),
plugin.freezePublicAPI({}),register(null,{"preview.markdown":plugin})}return main.consumes=["c9","Previewer","fs","dialog.error","commands","tabManager","layout","settings"],
main.provides=["preview.markdown"],main})


define("text!plugins/c9.ide.preview.browser/suspended.html",[],'<meta charset="utf-8">\n<style>\n    .button{\n        text-decoration: none;\n        display: inline-block;\n        padding: 8px 10px 8px 10px;\n        background: #767676;\n        font-family: Helvetica, Arial, sans-serif;\n        font-size: 13px;\n        border-radius: 5px;\n        color: white;\n    }\n    \n    .button:hover{\n        background: #8B8B8B;\n    }\n    \n    .link {\n        color: #A5A5A5;\n        font-size: 13px;\n        display: inline-block;\n        margin: 10px 0 0 0;\n        -webkit-font-smoothing: antialiased;\n    }\n    .link:hover{\n        color: #888;\n    }\n</style>\n\n<div style="position:absolute;left:0;top:0;right:0;bottom:0;\n    background: url({{staticPrefix}}/../c9.ide.layout.classic/images/loadingbgrepeat.png);\n    background-size: 1px 8px;\n    cursor: pointer;\n">\n    <div style="font-family: arial;position:absolute;left:50%;top:50%;text-align: center;width: 200px;height: 60px;margin-left: -100px;margin-top: -30px;">\n        <a class="button">Click to load the page</a>\n        <a href="https://community.c9.io/t/why-doesnt-the-embedded-preview-of-my-app-load-right-when-i-open-my-workplace/2556" class="link" target="_blank" onclick="event.cancelBubble=true;">Why am I seeing this?</a>\n    </div>\n</div>')


define("plugins/c9.ide.preview.browser/browser",[],function(require,exports,module){function main(options,imports,register){
function calcRootedPath(url){return url.startsWith(BASEPATH)?url.substr(BASEPATH.length):url}function getIframeSrc(iframe){
var src
try{src=iframe.contentWindow.location.href}catch(e){src=iframe.src}return"about:blank"==src&&(src=""),
src}function cleanIframeSrc(src){return src.replace(/([&?])_c9_id=\w+\&_c9_host=[^&#]+/g,"$1").replace(/[\?\&]$/,"")

}function calcAbsolutepath(url){return"/"==url[0]?BASEPATH+url:url}function loadPreviewSession(session,allowAutoFocus){
var iframe=session.iframe
session.suspended=!1
var tab=session.tab
tab.classList.add("loading"),allowAutoFocus||window.addEventListener("blur",function onblur(x){window.removeEventListener("blur",onblur,!1),
document.activeElement==iframe&&setTimeout(function(){window.focus()})},!1)
var url=calcAbsolutepath(session.url)
if(!session.disableInjection&&!/^(data|blob):/.test(url)){var parts=url.split("#")
url=parts[0]+(~parts[0].indexOf("?")?"&":"?")+"_c9_id="+session.id+"&_c9_host="+(options.local?"local":location.origin)+(parts.length>1?"#"+parts.slice(1).join(""):"")

}var mainPath=url.match(/^[^?#]*/)[0],noSandbox=/\.(pdf)$/.test(mainPath)
options.local||(noSandbox?iframe.removeAttribute("sandbox"):iframe.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-modals allow-popups-to-escape-sandbox")),
!options.local&&"https:"==window.location.protocol&&url.startsWith("http://")&&(url=options.staticPrefix+"/nohttps.html#"+url),
iframe.src=url}var c9=imports.c9,util=imports.util,Previewer=imports.Previewer,tabManager=imports.tabManager,preview=imports.preview,PostMessage=imports["remote.PostMessage"],CSSDocument=imports.CSSDocument,HTMLDocument=imports.HTMLDocument,JSDocument=imports.JSDocument,MenuItem=imports.MenuItem,commands=imports.commands,plugin=new Previewer("Ajax.org",main.consumes,{
caption:"Browser",index:10,divider:!0,selector:function(path){return/\.(?:html|htm|xhtml|pdf|svg)$|^https?\:\/\//.test(path)

}}),BASEPATH=preview.previewUrl,counter=0
plugin.on("load",function(){commands.addCommand({name:"scrollPreviewElementIntoView",displayName:"Preview:scroll element into view",
bindKey:{win:"Ctrl-I",mac:"Ctrl-I"},exec:function(editor){"preview"==editor.type?plugin.activeSession.transport.reveal():editor.ace.session.htmldocument.scrollIntoView()

},isAvailable:function(editor){return editor&&(editor.ace&&editor.ace.session.htmldocument||"preview"==editor.type)

}},plugin)
var item=new MenuItem({caption:"Enable Highlighting",type:"check",onclick:function(){var session=plugin.activeSession

;(session.transport||0).enableHighlighting=item.checked},isAvailable:function(){return item.checked=((plugin.activeSession||0).transport||0).enableHighlighting,
!0}},plugin)
preview.settingsMenu.append(item)
var item2=new MenuItem({caption:"Disable Live Preview Injection",type:"check",onclick:function(){var session=plugin.activeSession||0


session.disableInjection=item2.checked,plugin.navigate({url:session.path})},isAvailable:function(){return item2.checked=(plugin.activeSession||0).disableInjection,
!0}},plugin)
preview.settingsMenu.append(item2),preview.settingsMenu.append(new MenuItem({caption:"Scroll Preview Element Into View",
command:"scrollPreviewElementIntoView"},plugin))}),plugin.on("sessionStart",function(e){var doc=e.doc,session=e.session,tab=e.tab,editor=e.editor


if(session.iframe)return session.editor=editor,void editor.container.appendChild(session.iframe)
tabManager.isReady||session.trustedPath==session.initPath||(session.suspended=!0)
var iframe=document.createElement("iframe")
iframe.setAttribute("nwfaketop",!0),iframe.setAttribute("nwdisable",!0),iframe.style.width="100%",iframe.style.height="100%",
iframe.style.border=0,iframe.style.backgroundColor="rgba(255, 255, 255, 0.88)",iframe.addEventListener("load",function(){
if(iframe.src){var src=getIframeSrc(iframe),path=calcRootedPath(cleanIframeSrc(src))
if(tab.title=tab.tooltip="[B] "+path,session.lastSrc=src,options.local){var url=cleanIframeSrc(getIframeSrc(iframe))


0===url.indexOf("data:")?editor.setLocation(path):(editor.setLocation(url),session.currentLocation=url),
iframe.contentWindow.postMessage("start-c9-livecss","*")}else~path.indexOf(options.staticPrefix)||editor.setLocation(path)


tab.classList.remove("loading")}}),session.id="livepreview"+counter++,session.iframe=iframe,session.editor=editor,
session.transport=new PostMessage(iframe,session.id),session.transport.on("ready",function(){session.transport.getSources(function(err,sources){
session.styleSheets=sources.styleSheets.map(function(path){return new CSSDocument(path).addTransport(session.transport)

}),session.scripts=sources.scripts.map(function(path){return new JSDocument(path).addTransport(session.transport)

}),session.html=new HTMLDocument(sources.html).addTransport(session.transport)})},doc),session.transport.on("focus",function(){
tabManager.focusTab(doc.tab)},doc),session.destroy=function(){session.transport&&session.transport.unload(),
delete session.editor,delete session.transport,delete session.iframe,delete session.id},doc.addOther(function(){
session.destroy()}),doc.on("canUnload",function(e){if(session.transport){var count=session.transport.getWindows().length


return count<=1||(session.transport.once("empty",function(){doc.unload()}),!1)}},session),editor.container.appendChild(session.iframe)

}),plugin.on("sessionEnd",function(e){var tab=e.tab,session=e.session,iframe=session.iframe
iframe.remove(),tab.classList.remove("loading")}),plugin.on("sessionActivate",function(e){var session=e.session,path=calcRootedPath(session.url||session.path||session.initPath)

;/^https?:/.test(path)&&(session.disableInjection=!0),session.iframe.style.display="block",session.editor.setLocation(path,!0),
session.editor.setButtonStyle("Browser","page_white.png")}),plugin.on("sessionDeactivate",function(e){
var session=e.session
session.iframe.style.display="none"}),plugin.on("navigate",function(e){var tab=plugin.activeDocument.tab,session=plugin.activeSession,iframe=session.iframe


if(iframe){var nurl=e.url.replace(/^~/,c9.home),url=nurl.match(/^[a-z]\w{1,4}\:/)?nurl:BASEPATH+nurl,base=(session.url||"").split("#")[0]


url.indexOf(base+"#")==-1&&url!=base&&tab.classList.add("loading"),session.url=url
var path=calcRootedPath(url)
if(tab.title=tab.tooltip="[B] "+path,plugin.activeSession.editor.setLocation(path,!0),session.suspended){
var staticPrefix=options.staticPrefix
0!==staticPrefix.indexOf("https://")&&(staticPrefix=location.protocol+"//"+location.host+staticPrefix),
iframe.contentDocument.body.innerHTML=require("text!./suspended.html").replace(/\{\{staticPrefix\}\}/g,staticPrefix),
iframe.contentWindow.onclick=function(){session.suspended=!1,loadPreviewSession(session)},session.suspended=!1

}else loadPreviewSession(session)}}),plugin.on("update",function(e){}),plugin.on("reload",function(){
var session=plugin.activeSession
loadPreviewSession(session,tabManager.focussedTab==session.tab)}),plugin.on("popout",function(){var src=getIframeSrc(plugin.activeSession.iframe)


src||(src=plugin.activeSession.url),plugin.activeSession.disableInjection?util.openNewWindow(src):window.open(src)

}),plugin.on("getState",function(e){var session=e.doc.getSession(),state=e.state
state.currentLocation=session.currentLocation,state.disableInjection=session.disableInjection,state.trustedPath=session.trustedPath

}),plugin.on("setState",function(e){var session=e.doc.getSession(),state=e.state
state.currentLocation&&session.initPath&&(session.initPath=state.currentLocation),session.disableInjection=state.disableInjection

}),plugin.on("unload",function(){}),plugin.freezePublicAPI({}),register(null,{"preview.browser":plugin
})}return main.consumes=["Previewer","preview","vfs","tabManager","remote.PostMessage","c9","CSSDocument","HTMLDocument","JSDocument","MenuItem","commands","util"],
main.provides=["preview.browser"],main})


define("text!plugins/c9.ide.preview/previewers/raw.css",[],"")


define("plugins/c9.ide.preview/previewers/raw",[],function(require,exports,module){function main(options,imports,register){
function draw(){drawn||(drawn=!0,ui.insertCss(require("text!./raw.css"),plugin))}function update(e){var session=plugin.activeSession


session.pre.innerHTML=session.previewTab?(session.previewTab.document.value||"").replace(/</g,"&lt;"):"[Please Open Document To Display In Raw Viewer]"

}var Previewer=imports.Previewer,ui=imports.ui,plugin=new Previewer("Ajax.org",main.consumes,{caption:"Raw Content (UTF-8)",
index:100,selector:function(path){return path&&path.match(/(?:\.txt)$/)}}),drawn=!1
plugin.on("load",function(){}),plugin.on("sessionStart",function(e){var session=e.session,editor=e.editor


draw()
var pre=document.createElement("pre")
pre.className="rawview",session.pre=editor.container.appendChild(pre),session.editor=editor
var container=editor.getElement("container")
container.$isTextInput=function(){return!0},container.disabled=!1}),plugin.on("sessionEnd",function(e){
var pre=e.session.pre
pre.parentNode.removeChild(pre)}),plugin.on("sessionActivate",function(e){var session=e.session
session.pre.style.display="block",session.editor.setLocation(session.path),session.editor.setButtonStyle("Raw Content (UTF-8)","page_white.png"),
session.editor.getElement("btnPopOut").hide(),session.editor.getElement("btnSettings").hide()}),plugin.on("sessionDeactivate",function(e){
var session=e.session
session.pre.style.display="none"}),plugin.on("navigate",function(e){var tab=plugin.activeDocument.tab,session=plugin.activeSession


tab.title=tab.tooltip="[R] "+e.url,session.editor.setLocation(e.url),update()}),plugin.on("update",update),
plugin.on("reload",update),plugin.on("enable",function(){}),plugin.on("disable",function(){}),plugin.on("unload",function(){
drawn=!1}),plugin.freezePublicAPI({}),register(null,{"preview.raw":plugin})}return main.consumes=["Previewer","ui"],
main.provides=["preview.raw"],main})


define("plugins/c9.ide.preview/previewer",[],function(require,module,exports){function main(options,imports,register){
function Previewer(developer,deps,options){function loadDocument(doc,editor,state){doc.meta.$previewInited||(doc.addOther(function(){
navigate({doc:doc},!0)}),doc.meta.$previewInited=!0),state&&setState(doc,state)
var session=doc.getSession()
session.changeListener=function(){session.previewTab&&session.previewTab.loaded&&update({doc:session.previewTab.document,
saved:session.previewTab.document.undoManager.isAtBookmark()})},session.renameListener=function(e){session.previewTab&&session.previewTab.loaded&&navigate({
url:e.path,doc:session.previewTab.document})},tabs.on("open",function(e){e.tab.path==session.path&&(updatePreviewTab(session,null,e.tab),
session.changeListener())},session),emit("sessionStart",{doc:doc,tab:doc.tab,session:session,editor:editor,
state:state})}function unloadDocument(doc,options){options||(options={}),options.doc=doc,options.session=doc.getSession(),
options.tab=doc.tab,emit("sessionEnd",options)}function activateDocument(doc){currentDocument=doc,currentSession=doc.getSession(),
emit("sessionActivate",{doc:currentDocument,tab:currentDocument.tab,session:currentSession})}function deactivateDocument(doc){
currentDocument=null,currentSession=null,emit("sessionDeactivate",{doc:doc,tab:doc.tab,session:doc.getSession()
})}function update(e){if(currentDocument){var session=currentDocument.getSession()
session.previewTab&&e.doc==session.previewTab.document&&(e.previewDocument=e.doc,e.session=session,emit("update",e))

}}function reload(){emit("reload",{session:currentSession})}function popout(){emit("popout",{session:currentSession
})}function updatePreviewTab(session,remove,tab){if(remove||(tab||(tab=tabs.findTab(session.path)),tab!==session.previewTab)){
if(session.previewTab){var doc=session.previewTab.document
session.changeListener&&doc.undoManager.off("change",session.changeListener),session.renameListener&&doc.tab.off("path.set",session.renameListener)

}if(!remove)return session.previewTab=tab,session.previewTab&&(doc=session.previewTab.document,doc.undoManager.on("change",session.changeListener),
doc.tab.on("setPath",session.renameListener)),session.previewTab}}function navigate(e,remove){var session=e&&e.doc?e.doc.getSession():currentSession


if(!session){var err=new Error("navigate called without session")
return void errorHandler.reportError(err,{doc:!(!e||!e.doc),remove:remove},["collab"])}return remove?updatePreviewTab(session,!0):(e.tab=updatePreviewTab(session),
e.session=session,session==currentSession&&emit("navigate",e),void(session.path=e.url))}function getState(doc,state){
return emit("getState",{doc:doc,session:doc.getSession(),state:state}),state}function setState(doc,state){
emit("setState",{doc:doc,session:doc.getSession(),state:state||{}})}function focus(regain,lost){emit("focus",{
regain:regain||!1,lost:lost||!1})}function blur(){emit("blur")}var plugin=new Plugin(developer,deps),emit=plugin.getEmitter()


emit.setMaxListeners(1e3)
var menu,item,div,currentSession,currentDocument,caption=options.caption,onclick=options.onclick,submenu=options.submenu,divider=options.divider,selector=options.selector||function(){
return!1},index=options.index||100
return plugin.on("load",function(){preview.register(plugin,selector)
var rootMenu=preview.previewMenu
item=rootMenu.append(new MenuItem({caption:caption,position:index})),!onclick&&submenu||item.on("click",onclick||function(){
var editor=tabs.focussedTab.editor
editor.setPreviewer(plugin.name)}),submenu&&(item.submenu=menu=submenu instanceof Menu?submenu:new Menu({},plugin)),
divider&&(div=rootMenu.append(new Divider({position:index+10}))),tabs.on("focusSync",function(e){if("preview"==e.tab.editorType){
var session=e.tab.document.getSession()
session.previewer==plugin&&currentSession!=session&&activateDocument(e.tab.document)}},plugin)}),plugin.freezePublicAPI.baseclass(),
plugin.freezePublicAPI({get menu(){return menu},get item(){return item},get divider(){return div},get activeDocument(){
return currentDocument},get activeSession(){return currentSession},_events:["sessionStart","sessionActivate","sessionDeactivate","sessionEnd","getState","setState","focus","blur","update","reload","popout","navigate"],
unloadDocument:unloadDocument,loadDocument:loadDocument,focus:focus,blur:blur,activateDocument:activateDocument,
deactivateDocument:deactivateDocument,reload:reload,popout:popout,navigate:navigate,getState:getState,
setState:setState}),plugin}var Menu=imports.Menu,Plugin=imports.Plugin,preview=imports.preview,errorHandler=imports.error_handler,MenuItem=imports.MenuItem,Divider=imports.Divider,tabs=imports.tabManager


register(null,{Previewer:Previewer})}return main.consumes=["Plugin","preview","MenuItem","Menu","Divider","tabManager","error_handler"],
main.provides=["Previewer"],main})


define("text!plugins/c9.ide.preview/preview.css",[],"")


define("plugins/c9.ide.preview/preview",[],function(require,exports,module){function main(options,imports,register){
function load(){var parent=layout.findParent({name:"preview"})
if(!options.hideButton){var submenu=new ui.menu({"onprop.visible":function(e){e.value&&updatePreviewMenu(e,submenu)

}}),button=new ui.button({skin:"c9-toolbarbutton-glossy","class":"preview",caption:"Preview",submenu:submenu
})
button&&ui.insertByIndex(parent,button,10,handle),menus.addItemByPath("Tools/Preview/",submenu,1e3,handle),
liveMenuItem=new ui.item({onclick:function(e){commands.exec("preview",null,{newTab:e&&1==e.button})}}),
menus.addItemByPath("Tools/Preview/Live Preview Files",liveMenuItem,100,handle),menus.addItemByPath("Tools/Preview/Preview Running Application",new ui.item({
onclick:function(e){commands.exec("preview",null,{server:!0,newTab:e&&1==e.button})}}),200,handle),menus.addItemByPath("Tools/Preview/~",new ui.divider({}),2e3,handle),
menus.addItemByPath("Tools/Preview/~",new ui.divider({}),4e3,handle),menus.addItemByPath("Tools/Preview/Configure Preview URL...",new ui.item({
onclick:function(e){commands.exec("openpreferences",null,{panel:"project",section:"Run & Debug"})}}),4200,handle),
menus.addItemByPath("Tools/Preview/Show Active Servers...",new ui.item({onclick:function(e){commands.exec("showprocesslist",null,{
mode:"lsof"})}}),4300,handle)}settings.on("read",function(e){settings.setDefaults("user/preview",[["running_app",options.defaultRunApp||"false"],["default",options.defaultPreviewer||"raw"],["onSave","false"]])

},handle),tree.getElement("mnuCtxTree",function(mnuCtxTree){var itemCtxTreePreview=new ui.item({match:"file",
caption:"Preview",isAvailable:function(){return tree.selectedNode&&!tree.selectedNode.isFolder&&(options.local||"~"!=util.normalizePath(tree.selectedNode.path).charAt(0))

},onclick:function(){openPreview(tree.selected)}})
ui.insertByIndex(mnuCtxTree,itemCtxTreePreview,160,handle)}),mnuSettings=new Menu({},handle),commands.addCommand({
name:"preview",exec:function(editor,args){function findPane(){if(tab){var pane,otherPreview=search()
if(otherPreview&&tab.pane!=otherPreview)pane=otherPreview
else if(args.pane)pane=args.pane
else{var nodes=tab.pane.group
pane=nodes?nodes[0===nodes.indexOf(tab.pane)?1:0]:tab.pane.hsplit(!0)}return pane}}var path,pane,tab=tabs.focussedTab


if(args.server){var openInNewTab=args.newTab
return path=args.url,path||(path="https://$C9_HOSTNAME"),path=expandUrl(path),"https:"!=window.location.protocol||path.startsWith("https:")||(openInNewTab=!0),
openInNewTab?util.openNewWindow(path):(pane=findPane(),openPreview(path,pane,args&&args.active))}if(args.path)path=args.path
else{if(!tab||"preview"===tab.editor.type||!tab.path)return
pane=findPane(),path=tab.path.replace(/[#?]/g,escape)}return searchTab(path)?commands.exec("reloadpreview"):void openPreview(path,pane,args&&args.active)

}},handle),commands.addCommand({name:"reloadpreview",bindKey:{mac:"Command-Enter",win:"Ctrl-Enter"},isAvailable:function(){
var path=tabs.focussedTab&&tabs.focussedTab.path,tab=searchTab(path)||searchTab()||searchTab(-1)
return!!tab},exec:function(){var path=tabs.focussedTab&&tabs.focussedTab.path,tab=searchTab(path)||searchTab()||searchTab(-1)


tab&&(tabs.focussedTab&&tabs.focussedTab.document.changed?save.save(tabs.focussedTab,null,function(){
tab.editor.reload()}):tab.editor.reload())}},handle),save.on("afterSave",function(e){if("true"===settings.get("user/preview/@onSave")){
var tab=searchTab(e.path)||searchTab()||searchTab(-1)
tab&&tab.editor.reload()}}),menu=new Menu({},handle)
var key=commands.getPrettyHotkey("reloadpreview")
prefs.add({Project:{position:100,"Run & Debug":{position:300,"Preview URL":{type:"textbox",path:"project/preview/@url"
}}}},handle),prefs.add({Run:{position:600,Preview:{position:200,"Preview Running Apps":{type:"checkbox",
path:"user/preview/@running_app",position:400},"Default Previewer":{type:"dropdown",path:"user/preview/@default",
position:500,items:[{caption:"Raw",value:"preview.raw"},{caption:"Browser",value:"preview.browser"}]},
"When Saving Reload Preview":{type:"dropdown",path:"user/preview/@onSave",position:600,items:[{caption:"Only on "+key,
value:"false"},{caption:"Always",value:"true"}]}}}},handle)}function drawHandle(){if(!drawn){drawn=!0


var css=require("text!./preview.css")
ui.insertCss(css,options.staticPrefix,handle),handleEmit.sticky("draw")}}function search(){var pane
return tabs.getTabs().every(function(tab){return"preview"!=tab.editorType||(pane=tab.pane,!1)}),pane}
function searchTab(path){var pane
return tabs.getTabs().every(function(tab){return"preview"!=tab.editorType||!(!path&&tab.isActive()||path&&path!=-1&&path==(tab.document.getSession()||{}).path)||(pane=tab,
!1)}),pane}function expandUrl(url){var hostname=c9.hostname
return c9.hosted||hostname||(hostname=window.location.hostname),url.replace(/\$C9_HOSTNAME\b/,hostname)

}function registerPlugin(plugin,matcher){previewers[plugin.name]={plugin:plugin,matcher:matcher}}function unregisterPlugin(plugin){
delete previewers[plugin.name]}function openPreview(path,pane,active,callback){return tabs.open({name:"preview-"+path,
editorType:"preview",pane:pane,active:active!==!1,document:{title:"[P] "+path,preview:{path:path}}},function(err,tab,done,existing){
existing&&tab.editor.reload(),callback&&callback(err,tab)})}function findPreviewer(path,id){if(id)return previewers[id].plugin


if(path)for(id in previewers)if(previewers[id].matcher(path))return previewers[id].plugin
return id=settings.get("user/preview/@default"),previewers[id].plugin}function updatePreviewMenu(e,submenu){
function openUrl(e){commands.exec("preview",null,{newTab:1==e.button,url:e.currentTarget.value,server:!0
})}var tab=tabs.focussedTab,isKnown=!1,title="Live Preview File"
if(tab&&tab.path){var path=tab.path
for(var name in previewers)if(previewers[name].matcher(path)){isKnown=!0
break}isKnown?title+=" ("+basename(path)+")":(title="Raw Content of "+basename(path),isKnown=!0)}liveMenuItem.setAttribute("caption",title),
isKnown?liveMenuItem.enable():liveMenuItem.disable()
var url=settings.get("project/preview/@url")
Array.isArray(url)||(url=[url])
for(var added=!1,index=0,children=submenu.childNodes;children[index]&&"divider"!=children[index].localName;)index++


var appMenu=children[index-1],firstDivider=children[index]
index++
for(var i=0;i<url.length;i++)if("string"==typeof url[i]&&url[i]){var oldNode=children[index]
oldNode&&"item"==oldNode.localName||(oldNode=submenu.insertBefore(new ui.item({onclick:openUrl}),oldNode)),
oldNode.value=url[i]
var caption="Open "+expandUrl(url[i])
oldNode.setAttribute("caption",caption),added=!0,index++}for(;index<children.length-3;)submenu.removeChild(children[index])


appMenu.setAttribute("visible",!added),firstDivider.setAttribute("visible",added)}function Preview(){
function reload(){var session=currentSession
session&&session.previewer.reload()}function popout(){currentSession.previewer.popout()}function setPreviewer(id){
var session=currentSession
if(session){if(!previewers[id])return showError("Could not find previewer:"+id)
if(session.previewer.name==id)return
var doc=currentDocument,state=plugin.getState(doc)
session.previewer&&(session.previewer.unloadDocument(doc),session.cleanUp(),session.destroy&&session.destroy())


var previewer=previewers[id].plugin
session.previewer=previewer,btnSettings.show(),btnPopOut.show(),previewer.loadDocument(doc,plugin,state),
previewer.activateDocument(doc),previewer.navigate({url:session.path})}}function goBack(){currentSession.previewer.navigate({
url:currentSession.back()}),updateButtons()}function goForward(){currentSession.previewer.navigate({url:currentSession.forward()
}),updateButtons()}function setLocation(value,visualOnly){if(value&&currentSession){if(!visualOnly){var session=currentSession,current=session.stack[session.position]


current!=value&&session.add(value)}txtPreview.setValue(value),updateButtons()}}function setButtonStyle(caption,icon){
btnMode.setCaption(caption),btnMode.setIcon(icon)}function updateButtons(){btnBack&&(btnBack.setAttribute("disabled",currentSession.position<1),
btnForward.setAttribute("disabled",currentSession.position==currentSession.stack.length-1))}var currentDocument,currentSession,container,txtPreview,btnMode,btnBack,btnForward,btnPopOut,btnSettings,plugin=new Editor("Ajax.org",main.consumes,extensions),emit=plugin.getEmitter()


return plugin.on("draw",function(e){drawHandle()
var buttons=options.local?[btnBack=new ui.button({skin:"c9-toolbarbutton-glossy","class":"goback",tooltip:"Back",
width:"29",disabled:!0,onclick:function(e){goBack()}}),btnForward=new ui.button({skin:"c9-toolbarbutton-glossy",
"class":"goforward",tooltip:"Forward",disabled:!0,width:"29",onclick:function(e){goForward()}})]:[]
buttons.push(new ui.button({skin:"c9-toolbarbutton-glossy","class":"refresh",tooltip:"Refresh",width:"29",
onclick:function(e){reload()}}))
var bar=e.tab.appendChild(new ui.vsplitbox({anchors:"0 0 0 0",childNodes:[new ui.hsplitbox({"class":"toolbar-top previewbar",
height:35,edge:"4",padding:3,childNodes:[new ui.bar({width:options.local?87:29,"class":"fakehbox aligncenter",
childNodes:buttons}),new ui.hbox({padding:3,childNodes:[new ui.bar({id:"locationbar","class":"locationbar",
flex:1,childNodes:[new ui.textbox({id:"txtPreview","class":"ace_searchbox tb_textbox searchbox searchTxt tb_console",
value:"",focusselect:!0}),new ui.button({id:"btnMode",submenu:menu.aml,icon:"page_white.png",skin:"btn-switcher",
caption:"browser"})]}),btnPopOut=new ui.button({id:"btnPopOut",skin:"c9-toolbarbutton-glossy","class":"popout",
tooltip:"Pop Out Into New Window",width:"30",onclick:function(e){popout()}}),btnSettings=new ui.button({
id:"btnSettings",skin:"c9-toolbarbutton-glossy","class":"settings",tooltip:"Preview Settings",width:"30",
submenu:mnuSettings.aml})]})]}),new ui.bar({id:"container"})]}))
plugin.addElement(bar),btnMode=plugin.getElement("btnMode"),txtPreview=plugin.getElement("txtPreview"),
container=plugin.getElement("container").$int,txtPreview.$input.onkeydown=function(e){13==e.keyCode&&(currentSession.previewer.navigate({
url:this.value}),txtPreview.blur())},txtPreview.addEventListener("contextmenu",function(e){return e.cancelBubble=!0,
!0})}),plugin.on("load",function(){}),plugin.on("documentLoad",function(e){function setTheme(e){var isDark="dark"==e.theme


tab.backgroundColor=BGCOLOR[e.theme],isDark?tab.classList.add("dark"):tab.classList.remove("dark")}var doc=e.doc,tab=doc.tab,session=doc.getSession()


if(session.doc=doc,session.tab=tab,session.inited)return void session.previewer.loadDocument(doc,plugin)


layout.on("themeChange",setTheme,doc),setTheme({theme:settings.get("user/general/@skin")}),session.initPath=session.path||e.state.path||doc.tab.path,
session.inited=!0,(e.state.trusted||e.state.trustedPath)&&(session.trustedPath=e.state.trustedPath||e.state.path),
session.previewer=findPreviewer(session.initPath,(e.state||0).previewer),session.previewer.loadDocument(doc,plugin,e.state)


var handler=function(type,e){currentSession==e.session&&emit(type,{previewer:session.previewer,session:session,
url:e.url})}
session.previewer.on("navigate",handler.bind(null,"navigate"),session),session.previewer.on("reload",handler.bind(null,"reload"),session),
session.stack=[],session.position=-1,session.add=function(value){session.stack.splice(session.position+1),
session.stack.push(value),session.position++},session.back=function(){return 0!==session.position&&(session.position--,
session.stack[session.position])},session.forward=function(){return session.position!==session.stack.length-1&&(session.position++,
session.stack[session.position])},tabs.on("open",function(e){!session.previewTab&&e.options&&e.options.path==session.path&&(session.previewTab=e.tab,
session.previewer.navigate({url:session.path,tab:e.tab}))},doc)}),plugin.on("documentActivate",function(e){
currentDocument&&currentSession.previewer.deactivateDocument(currentDocument),currentDocument=e.doc,currentSession=e.doc.getSession(),
btnSettings.show(),btnPopOut.show()
var previewer=currentSession.previewer
previewer.activateDocument(currentDocument),currentSession.initPath&&(previewer.navigate({url:currentSession.initPath
}),delete currentSession.initPath),updateButtons()}),plugin.on("documentUnload",function(e){var doc=e.doc,session=doc.getSession()


session.previewer.navigate(doc,!0),session.previewer.unloadDocument(doc,e),session==currentSession&&(currentDocument=null,
currentSession=null)}),plugin.on("getState",function(e){var state=e.state,session=e.doc.getSession()
state.path=session.path,session.previewer&&(state.previewer=session.previewer.name,session.previewer.getState(e.doc,state))

}),plugin.on("setState",function(e){var state=e.state,session=e.doc.getSession()
session.path=state.path,session.previewer.setState(e.doc,state)}),plugin.on("clear",function(){}),plugin.on("focus",function(e){
currentSession&&currentSession.previewer.focus(e)}),plugin.on("blur",function(e){currentSession&&currentSession.previewer.blur(e)

}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),plugin.on("unload",function(){}),
plugin.freezePublicAPI({get container(){return container},reload:reload,popout:popout,setPreviewer:setPreviewer,
setLocation:setLocation,setButtonStyle:setButtonStyle}),plugin.load(null,"preview"),plugin}var menu,liveMenuItem,mnuSettings,Editor=imports.Editor,editors=imports.editors,ui=imports.ui,c9=imports.c9,settings=imports.settings,commands=imports.commands,menus=imports.menus,layout=imports.layout,tree=imports.tree,save=imports.save,util=(imports.proc,
imports.util),tabs=imports.tabManager,prefs=imports.preferences,Menu=imports.Menu,showError=(imports.MenuItem,
imports.Divider,imports["dialog.error"].show),basename=(imports["dialog.alert"].show,require("path").basename),extensions=["pdf","swf"],previewUrl=options.previewUrl.replace(/^[\/]/,function(){
return c9.location.replace(/^(\w+:[\/]+[^\/#?]+).*/,"$1/")}).replace(/[\/]$/,""),handle=editors.register("preview","Preview",Preview,extensions),handleEmit=handle.getEmitter(),BGCOLOR={
"flat-light":"#F1F1F1","flat-dark":"#303130",light:"#d6d5d5","light-gray":"#d6d5d5",dark:"#303130","dark-gray":"#303130"
},previewers={},drawn=!1
handle.freezePublicAPI({get previewUrl(){return previewUrl},get previewMenu(){return menu},get settingsMenu(){
return mnuSettings},openPreview:openPreview,register:registerPlugin,unregister:unregisterPlugin,findPreviewer:findPreviewer
}),handle.on("load",load),register(null,{preview:handle})}return main.consumes=["Editor","editors","settings","ui","proc","c9","util","preferences","layout","tabManager","tree","commands","menus","dialog.error","dialog.alert","save","Menu","MenuItem","Divider"],
main.provides=["preview"],main})


define("text!plugins/c9.ide.installer/install/intro.html",[],'<h3>Can we quickly set up Cloud9 on your workspace?</h3>\n<p>\n    Cloud9 needs a few dependencies to be able to work with this SSH workspace.\n    If you agree, we\u2019ll install a few things in the ~/.c9 folder.\n    This will not affect any other part of your system, it\u2019s fully self-contained!\n</p>\n\n<h4>How can I revert this later?</h4>\n<p>\n    To fully remove Cloud9 from your machine, all you need to do is \n    remove the ~/.c9 folder! Nothing will be left over on your system.\n</p>\n\n<h4>Can I install this manually?</h4>\n<p>\n    See <a target="_blank" href="https://github.com/c9/install">https://github.com/c9/install</a>\n</p>\n\n<p style=\'margin-top:30px\'><i>The next step allows you to select which components to install.</i></p>')


define("text!plugins/c9.ide.installer/install/check-deps.sh",[],'set -e\n\nhas() {\n  type "$1" > /dev/null 2>&1\n  return $?\n}\n\n\ncheck_deps() {\n  local MISSING\n  local OS\n  local CMD\n\n  if [[ `cat /etc/issue 2>/dev/null` =~ CentOS ]]; then\n    OS="RHEL"\n  elif [[ `cat /etc/redhat-release 2>/dev/null` =~ "Red Hat" ]]; then\n    OS="RHEL"\n  elif [[ `cat /etc/system-release 2>/dev/null` =~ "Amazon Linux" ]]; then\n    OS="RHEL"\n  elif [[ `cat /proc/version 2>/dev/null` =~ Ubuntu|Debian ]]; then\n    OS="DEBIAN"\n  fi\n  \n  check_missing() {\n    MISSING=\n    for DEP in "make" "gcc" "g++"; do\n      if ! has $DEP; then \n        MISSING="$MISSING, $DEP"\n      fi\n    done\n  }\n  \n  check_missing\n  \n  if [ "$MISSING" ]; then\n    \n    if [ "$OS" == "RHEL" ]; then\n      CMD="sudo yum groupinstall -y development"\n    elif [ "$OS" == "DEBIAN" ]; then\n      sudo apt-get update || true\n      CMD="sudo apt-get install -y build-essential"\n    fi\n    \n    if [ "$CMD" ]; then\n      echo "running \'$CMD\' to install missing dependencies: $MISSING"\n      $CMD || true;\n    fi\n    \n    check_missing\n    \n    if [ "$MISSING" ]; then\n      echo "ERROR: failed to install \'${MISSING/, /}\'"\n    fi\n  fi\n  \n  # RHEL, CentOS, Amazon Linux\n  if [ "$OS" == "RHEL" ]; then\n    if ! yum list installed glibc-static >/dev/null 2>&1; then\n      echo "Error: please install glibc-static to proceed"\n      echo "To do so, log into your machine and type \'sudo yum install glibc-static\'"\n      MISSING=1\n    fi\n  fi\n  \n  if which python2.7 &> /dev/null; then\n    PYTHONVERSION="2.7"\n  else\n    PYTHONVERSION=`python --version 2>&1`\n  fi\n  \n  if [[ $PYTHONVERSION != *2.7* ]]; then\n    echo "Python version 2.7 is required to install pty.js. Please install python 2.7 and try again. You can find more information on how to install Python in the docs: https://docs.c9.io/ssh_workspaces.html"\n    MISSING=1\n  fi\n  \n  if [ "$MISSING" ]; then exit 1; fi\n}\n\ncheck_deps\n')


define("text!plugins/c9.ide.installer/install/node.sh",[],'set -e\n\nhas() {\n  type "$1" > /dev/null 2>&1\n  return $?\n}\n\nif has "wget"; then\n    DOWNLOAD="wget --no-check-certificate -nc"\nelif has "curl"; then\n    DOWNLOAD="curl -sSOL"\nelse\n    echo "Error: you need curl or wget to proceed" >&2;\n    exit 1\nfi\n\nC9_DIR="$HOME/.c9"\nNPM="$C9_DIR/node/bin/npm"\ncd "$C9_DIR"\n\ndownload_virtualenv() {\n  VIRTUALENV_VERSION="virtualenv-12.0.7"\n  $DOWNLOAD "https://pypi.python.org/packages/source/v/virtualenv/$VIRTUALENV_VERSION.tar.gz"\n  tar xzf $VIRTUALENV_VERSION.tar.gz\n  rm $VIRTUALENV_VERSION.tar.gz\n  mv $VIRTUALENV_VERSION virtualenv\n}\n\ncheck_python() {\n  if which python2.7 &> /dev/null; then\n    PYTHONVERSION="2.7"\n    PYTHON="python2.7"\n  else\n    PYTHONVERSION=`python --version 2>&1`\n    PYTHON=python\n  fi\n  \n  if [[ $PYTHONVERSION != *2.7* ]]; then\n    echo "Python version 2.7 is required to install pty.js. Please install python 2.7 and try again. You can find more information on how to install Python in the docs: https://docs.c9.io/ssh_workspaces.html"\n    exit 100\n  fi\n}\n\nconfigure_python() {\n  check_python\n  # when gyp is installed globally npm install pty.js won\'t work\n  # to test this use `sudo apt-get install gyp`\n  if [ `"$PYTHON" -c \'import gyp; print gyp.__file__\' 2> /dev/null` ]; then\n    echo "You have a global gyp installed. Setting up VirtualEnv without global pakages"\n    rm -rf virtualenv\n    rm -rf python\n    installed=\n    if has virtualenv; then\n      # try global virtualenv first\n      (virtualenv -p python2.7  "$C9_DIR/python") && installed=1\n    fi\n    \n    if ! [ "$installed" ]; then\n      download_virtualenv\n      "$PYTHON" virtualenv/virtualenv.py -p python2.7 "$C9_DIR/python"\n    fi\n    if [[ -f "$C9_DIR/python/bin/python2" ]]; then\n      PYTHON="$C9_DIR/python/bin/python2"\n    else\n      echo "Unable to setup virtualenv"\n      exit 1\n    fi\n  fi\n  "$NPM" config -g set python "$PYTHON"\n  "$NPM" config -g set unsafe-perm true\n}\n\n# use local npm cache\n"$NPM" config -g set cache  "$C9_DIR/tmp/.npm"\n\n\nPYTHON=python\nconfigure_python\n\n')


define("text!plugins/c9.ide.installer/install/tmux.sh",[],'set -e\n\nhas() {\n  type "$1" > /dev/null 2>&1\n  return $?\n}\n\nif has "wget"; then\n    DOWNLOAD="wget --no-check-certificate -nc"\nelif has "curl"; then\n    DOWNLOAD="curl -sSOL"\nelse\n    echo "Error: you need curl or wget to proceed" >&2;\n    exit 1\nfi\n\nC9_DIR="$HOME/.c9"\ncd "$C9_DIR"\nPATH="$C9_DIR/node/bin/:$C9_DIR/node_modules/.bin:$PATH";\n\ncompile_tmux(){\n  cd "$C9_DIR"\n  echo "Compiling libevent..."\n  tar xzf libevent-2.0.21-stable.tar.gz\n  rm libevent-2.0.21-stable.tar.gz\n  cd libevent-2.0.21-stable\n  echo "Configuring Libevent"\n  ./configure --prefix="$C9_DIR/local"\n  echo "Compiling Libevent"\n  make\n  echo "Installing libevent"\n  make install\n \n  cd "$C9_DIR"\n  echo "Compiling ncurses..."\n  tar xzf ncurses-5.9.tar.gz\n  rm ncurses-5.9.tar.gz\n  cd ncurses-5.9\n  echo "Configuring Ncurses"\n  CPPFLAGS=-P ./configure --prefix="$C9_DIR/local" --without-tests --without-cxx\n  echo "Compiling Ncurses"\n  make\n  echo "Installing Ncurses"\n  make install\n \n  cd "$C9_DIR"\n  echo "Compiling tmux..."\n  tar xzf tmux-1.9.tar.gz\n  rm tmux-1.9.tar.gz\n  cd tmux-1.9\n  echo "Configuring Tmux"\n  ./configure CFLAGS="-I$C9_DIR/local/include -I$C9_DIR/local/include/ncurses" CPPFLAGS="-I$C9_DIR/local/include -I$C9_DIR/local/include/ncurses" LDFLAGS="-static-libgcc -L$C9_DIR/local/lib" LIBEVENT_CFLAGS="-I$C9_DIR/local/include" LIBEVENT_LIBS="-static -L$C9_DIR/local/lib -levent" LIBS="-L$C9_DIR/local/lib/ncurses -lncurses" --prefix="$C9_DIR/local"\n  echo "Compiling Tmux"\n  make\n  echo "Installing Tmux"\n  make install\n}\n\ntmux_download(){\n  echo "Downloading tmux source code"\n  echo "N.B: This will take a while. To speed this up install tmux 1.9 manually on your machine and restart this process."\n  \n  echo "Downloading Libevent..."\n  $DOWNLOAD https://raw.githubusercontent.com/c9/install/master/packages/tmux/libevent-2.0.21-stable.tar.gz\n  echo "Downloading Ncurses..."\n  $DOWNLOAD https://raw.githubusercontent.com/c9/install/master/packages/tmux/ncurses-5.9.tar.gz\n  echo "Downloading Tmux..."\n  $DOWNLOAD https://raw.githubusercontent.com/c9/install/master/packages/tmux/tmux-1.9.tar.gz\n}\n\ncheck_tmux_version(){\n  if [ ! -x $1 ]; then\n    return 1\n  fi\n  tmux_version=$($1 -V | sed -e\'s/^[a-z0-9.-]* //g\')\n  if [ ! "$tmux_version" ]; then\n    return 1\n  fi\n\n  if [ "$(node -e "console.log(1.7<=$tmux_version)")" == "true"  ]; then\n    return 0\n  else\n    return 1\n  fi\n}\n\nmkdir -p "$C9_DIR/bin"\n\nif check_tmux_version $C9_DIR/bin/tmux; then\n  echo \'Existing tmux version is up-to-date\'\n\n# If we can support tmux 1.9 or detect upgrades, the following would work:\nelif has "tmux" && check_tmux_version `which tmux`; then\n  echo \'A good version of tmux was found, creating a symlink\'\n  ln -sf $(which tmux) "$C9_DIR"/bin/tmux\n\n# If tmux is not present or at the wrong version, we will install it\nelse\n  if [ $os = "darwin" ]; then\n    if ! has "brew"; then\n      ruby -e "$($DOWNLOAD https://raw.githubusercontent.com/mxcl/homebrew/go/install)"\n    fi\n    brew install tmux > /dev/null ||\n      (brew remove tmux &>/dev/null && brew install tmux >/dev/null)\n    ln -sf $(which tmux) "$C9_DIR"/bin/tmux\n  # Linux\n  else\n    if ! has "make"; then\n      echo "Could not find make. Please install make and try again."\n      exit 100;\n    fi\n  \n    tmux_download  \n    compile_tmux\n    ln -sf "$C9_DIR"/local/bin/tmux "$C9_DIR"/bin/tmux\n  fi\nfi\n\nif ! check_tmux_version "$C9_DIR"/bin/tmux; then\n  echo "Installed tmux does not appear to work:"\n  exit 100\nfi\n')


define("plugins/c9.ide.installer/install/install",[],function(require,exports,module){module.exports=function(session,options){
session.introduction=require("text!./intro.html"),session.preInstallScript=require("text!./check-deps.sh")


var NODEVERSION="v4.4.6",nodeName="node-"+NODEVERSION+"-"+options.platform+"-"+options.arch
"win32"==options.platform?(session.preInstallScript=null,session.install({name:"Node.js",description:"binary dependencies: node@0.12, pty.js, sqlite3"
},[{"tar.gz":{url:"https://github.com/cloud9ide/sdk-deps-win32/releases/download/v0.0.1/node.tar.gz",
target:"~/.c9/"}}]),session.install({name:"Msys",description:"minimal version of msys"},[{"tar.gz":{url:"https://github.com/cloud9ide/sdk-deps-win32/releases/download/v0.0.1/msys.tar.gz",
target:"~/.c9/"}}])):(session.install({name:"Node.js",description:"Node.js "+NODEVERSION},[{"tar.gz":{
url:"http://nodejs.org/dist/"+NODEVERSION+"/"+nodeName+".tar.gz",target:"~/.c9/node",dir:nodeName}},{
bash:require("text!./node.sh")}]),session.install({name:"Pty.js",description:"Pseudo Terminal support. Used by the Cloud9 Terminal",
cwd:"~/.c9"},{npm:["node-gyp","pty.js@0.3.0"]}),session.install({name:"tmux",description:"Tmux - the terminal multiplexer",
cwd:"~/.c9"},{bash:require("text!./tmux.sh")})),session.start()}})


define("plugins/c9.ide.installer/installer",[],function(require,exports,module){function main(options,imports,register){
function load(){if(!c9.readonly)return options.cli?simpleInstallRead():void imports.vfs.on("beforeConnect",function(e){
return installChecked?e.done(!1):installSelfCheck?(installCb=e.done,proc.installMode?proc.installMode=e.vfs:readFromDisk(e.vfs),
!1):(installChecked=!0,e.done(!1),void simpleInstallRead())})}function simpleInstallRead(){var path=options.installPath.replace(c9.home,"~")+"/installed"


fs.readFile(path,function(err,data){if(err){if("ENOENT"!=err.code)return void c9.once("connect",simpleInstallRead)


data=""}parse(data),emit.sticky("ready",installed)})}function parse(data){data.match(/^1[\r\n]*$/)&&(data="Cloud9 IDE@1\nc9.ide.collab@1\nc9.ide.find@1\nCloud9 CLI@1"),
installed={},data.split("\n").forEach(function(line){if(line){var p=line.split("@")
installed[p[0]]=parseInt(p[1],10)||0}}),installSelfCheck||(installed["Cloud9 IDE"]=1,installed["c9.ide.collab"]=1,
installed["c9.ide.find"]=1,installed["Cloud9 CLI"]=1)}function readFromDisk(vfs){function done(err){installed||(installed={}),
err&&"ENOENT"==err.code||installed["Cloud9 IDE"]!==VERSION?(proc.installMode=vfs,plugin.once("success",function(){
proc.installMode=!1,installChecked=!0,installCb(!0),installCb=null}),plugin.on("stop",function listen(e){
"Cloud9 IDE"!=e.session["package"].name||e.error&&waitForSuccess||(plugin.waitForSuccess=!1,plugin.off("stop",listen))

},plugin)):(installChecked=!0,installCb(),installCb=null),emit.sticky("ready",installed)}vfs.readfile(options.installPath.replace(c9.home,"~")+"/installed",{
encoding:"utf8"},function(err,meta){if(err)return void("ENOENT"==err.code&&done(err))
var data="",stream=meta.stream
stream.on("data",function(chunk){data+=chunk}),stream.on("end",function(){parse(data),done()})})}function addPackageManager(name,implementation){
automate.addCommand(NAMESPACE,name,implementation)}function removePackageManager(name){automate.removeCommand(NAMESPACE,name)

}function addPackageManagerAlias(){for(var args=[NAMESPACE],i=0;i<arguments.length;i++)args.push(arguments[i])


automate.addCommandAlias.apply(this,args)}function isInstalled(pkgName,pkgVersion,callback){if(!installSelfCheck)return!0


if("function"==typeof pkgVersion&&(callback=pkgVersion,pkgVersion=void 0),!installed&&callback)return plugin.once("ready",function(){
isInstalled(pkgName,pkgVersion,callback)&&callback()})
var boolInstalled=installed[pkgName]&&(!pkgVersion||installed[pkgName]==pkgVersion)
return!boolInstalled&&callback&&plugin.on("stop",function listen(){isInstalled(pkgName,pkgVersion)&&(callback(),
plugin.off("stop",listen))}),boolInstalled}function reinstall(packageName,silent){return!!packages[packageName]&&(silent||emit("reinstall",{
name:packageName}),createSession(packageName,packages[packageName].version,packages[packageName].populate,null,!0),
!0)}function createSession(packageName,packageVersion,populateSession,callback,force){function install(options,task,validate){
task&&"function"!=typeof task||("function"==typeof task&&(validate=task),task=options,options={}),add(task,options,validate)

}function start(callback,force){(force||emit("beforeStart",{session:session})!==!1)&&(pre&&session.tasks.unshift({
bash:pre}),post&&session.tasks.push({bash:post}),session.run(callback))}if(!installed)return plugin.on("ready",createSession.bind(this,packageName,packageVersion,populateSession,callback,force))


if(!options.cli&&!c9.isReady)return c9.on("ready",createSession.bind(this,packageName,packageVersion,populateSession,callback,force))


if("function"==typeof packageVersion&&(force=callback,callback=populateSession,populateSession=packageVersion,
packageVersion=populateSession.version),packageVersion=populateSession.version||parseInt(packageVersion,10)||0,
packages[packageName]={version:packageVersion,populate:populateSession},!force&&installed[packageName]==packageVersion)return callback&&callback()


var session=automate.createSession(NAMESPACE),add=session.task
delete session.task,session.on("run",function(){emit("start",{session:session})}),session.on("stop",function(err){
if(sessions.splice(sessions.indexOf(session),1),emit("stop",{session:session,error:err}),err||2===force)callback&&callback(err)
else{installed[packageName]=packageVersion
var contents=Object.keys(installed).map(function(item){return item+"@"+installed[item]}).join("\n")
fs.writeFile("~/.c9/installed",contents,function(){callback&&callback(err)})}}),session.on("each",function(e){
emit("each",e)})
var intro,pre,post
return session.freezePublicAPI({"package":{name:packageName,version:packageVersion},get introduction(){
return intro},set introduction(value){intro=value},get preInstallScript(){return pre},set preInstallScript(value){
pre=value},get postInstallScript(){return post},set postInstallScript(value){post=value},install:install,
start:start}),session.on("unload",function(){sessions.splice(sessions.indexOf(session),1)},plugin),sessions.push(session),
void 0===arch&&(arch=null,proc.execFile("uname",{args:["-ms"]},function(e,p){var parts=p.trim().split(/\s+/)


platform=parts[0].toLowerCase(),/MINGW|MSYS|CYGWIN/i.test(platform)&&(platform=c9.platform),arch=parts[1],
/x86_64/i.test(arch)?arch="x64":/armv6l/i.test(arch)?arch="armv6l":/armv7l/i.test(arch)?arch="armv7l":/i.*86/i.test(arch)&&(arch="x86"),
arch||(arch=void 0),emit.sticky("arch",arch)})),plugin.once("arch",function(){populateSession(session,{
platform:platform,arch:arch})}),session}function ptyExec(options,onData,callback){if(parentPty)return parentPty(options,callback)


if("win32"==c9.platform)return options.code=options.code.replace(/\r\n/g,"\n"),proc.spawn("bash.exe",{
args:["-c",options.code].concat(options.args||[]),cwd:options.cwd||null},function(err,pty){return err?callback(err):(pty.stderr.on("data",function(chunk){
onData(chunk,pty)}),pty.stdout.on("data",function(chunk){onData(chunk,pty)}),void pty.on("exit",function(code){
code?callback(new Error("Failed "+options.name+". Exit code "+code)):callback()}))})
var script=(DEBUG?"set -x\n":"")+"export TERM=xterm\nfcn() {\n"+options.code+'\n}\nsudo(){ /usr/bin/sudo -S -p "###[sudo] password for %p: " "$@" ; }\nexit() { if [ "$1" == "0" ]; then echo \xdf; else echo "exiting with $1"; fi; command exit $1; }\nfcn "$@" && echo \xdf\n'


proc.pty(options.bash||"bash",{args:["-c",script].concat(options.args||[]),cwd:options.cwd||null},function(err,pty){
if(err)return callback(err)
var done=!1,buffer=""
pty.on("data",function(chunk){buffer+=chunk,chunk.indexOf("\xdf")>-1&&(done=!0,chunk=chunk.replace("\xdf","")),
onData(chunk,pty)}),pty.on("exit",function(code){done||code||(code="E_MISSING_END_MARKER"),code&&errorHandler.log("install error",{
output:buffer,script:script,name:options.name,args:options.args,code:code}),code?callback(new Error("Failed "+options.name+". Exit code "+code)):callback()

})})}var installCb,arch,platform,parentPty,Plugin=imports.Plugin,automate=imports.automate,c9=imports.c9,fs=imports.fs,proc=imports.proc,errorHandler=imports.error_handler,DEBUG=c9.location.indexOf("debug=3")!=-1,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),NAMESPACE="installer",installSelfCheck=options.installSelfCheck,installChecked=!1,packages={},sessions=[],installed=!1,waitForSuccess=!1,VERSION=1


options.cli||createSession("Cloud9 IDE",VERSION,require("./install/install")),plugin.on("load",function(){
load()}),plugin.on("unload",function(){installChecked=!1,installed=!1,installCb=arch=platform=void 0,
waitForSuccess=!1,parentPty=null}),plugin.freezePublicAPI({get packages(){return packages},get sessions(){
return sessions},get installed(){return installed},get checked(){return installChecked},get ptyEnabled(){
return installChecked&&"win32"!=c9.platform},get waitForSuccess(){return waitForSuccess},set waitForSuccess(v){
waitForSuccess=v,v||emit("success")},_events:["beforeStart","start","stop","each"],isInstalled:isInstalled,
reinstall:reinstall,createSession:createSession,addPackageManager:addPackageManager,removePackageManager:removePackageManager,
addPackageManagerAlias:addPackageManagerAlias,ptyExec:ptyExec,$setPtyExec:function(v){options.cli&&(parentPty=v)

}}),register(null,{installer:plugin})}return main.consumes=["Plugin","automate","vfs","c9","proc","fs","error_handler"],
main.provides=["installer"],main})


define("plugins/c9.ide.installer/commands/ubuntu",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){var script="sudo apt-get -qq -y install "+task+"\nEXIT=$?\nif [ $EXIT = 100 ]; then\n  sudo apt-get update\n  sudo apt-get -qq -y install "+task+"\n  exit $?\nfi\nexit $EXIT\n"


installer.ptyExec({name:"Ubuntu",bash:bashBin,code:script,cwd:options.cwd},onData,callback)}function isAvailable(callback){
return"undefined"!=typeof available?callback(available):void proc.execFile("which",{args:["apt-get"]},function(err,stdout){
return err?callback(!1):(available=stdout.length>0,void callback(available))})}var available,Plugin=imports.Plugin,installer=imports.installer,proc=imports.proc,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("ubuntu",plugin),installer.addPackageManagerAlias("ubuntu","debian")

}),plugin.on("unload",function(){installer.removePackageManager("ubuntu"),available=void 0}),plugin.freezePublicAPI({
execute:execute,isAvailable:isAvailable}),register(null,{"installer.ubuntu":plugin})}return main.consumes=["Plugin","installer","proc"],
main.provides=["installer.ubuntu"],main})


define("text!plugins/c9.ide.installer/commands/tar.gz.sh",[],'set -ex\n\nSOURCE="$1"\nTARGET="$2"\nURL="$3"\nDIR="$4"\n\n\nhas() {\n  type "$1" > /dev/null 2>&1\n  return $?\n}\n\nif [ ! "$SOURCE" ] || [ ! "$URL" ] || [ ! "$TARGET" ]; then\n    echo "Error: missing source and/or target" >&2;\n    exit 10\nfi\n\nif [ "$DIR" ]; then\n    set +e\n    rm -Rf "$TARGET" 2>/dev/null\n    set -e\nfi\n\nmkdir -p "$TARGET"\ncd "$TARGET"\n\n# Download file if needed\nif [ "$URL" ]; then\n\n    if has "wget"; then\n        DOWNLOAD="wget --no-check-certificate -nc"\n    elif has "curl"; then\n        DOWNLOAD="curl -sSOL"\n    else\n        echo "Error: you need curl or wget to proceed" >&2;\n        exit 20\n    fi\n\n    echo "Downloading... $URL"\n    printf "\\e[01;30m"\n    $DOWNLOAD "$URL"\n    printf "\\e[0m"\n    \n    SOURCE="$TARGET/$(basename $URL)"\nfi\n\n# Make sure package is in the target folder\nif [ "$(dirname "$SOURCE")" != "$(dirname "$TARGET"/x)" ]; then\n    cp -a "$SOURCE" "$TARGET"\n    SOURCE="$TARGET/$(basename "$SOURCE")"\nfi\n\n# Unpack source\necho "Unpacking... $SOURCE"\nprintf "\\e[01;30m"\ntar -U -zxf "$SOURCE"\nprintf "\\e[0m"\n\n# Delete package\nrm -Rf $SOURCE\n\n# Move directory\nif [ "$DIR" ]; then\n    echo "Merging... $TARGET/$DIR in $TARGET"\n    \n    merge() {\n        mkdir -p "c9_tmp"\n        rm -rf "c9_tmp/$DIR"\n        mv "$DIR" "c9_tmp/$DIR"\n        mv "c9_tmp/$DIR/"* .\n        set +e\n        mv "c9_tmp/$DIR/."* . 2>/dev/null\n        set -e\n        rm -rf "c9_tmp"\n    }\n\n    printf "\\e[01;30m"\n    merge\n    printf "\\e[0m"\nfi')


define("plugins/c9.ide.installer/commands/tar.gz",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){if(!task.source&&!task.url)throw new Error("Invalid Task Definition. Missing source or url field: "+JSON.stringify(task))


var source=(task.source||"-1").replace(/^~/,c9.home),target=task.target.replace(/^~/,c9.home)
source=normalizePath(source),target=normalizePath(target)
var code=require("text!./tar.gz.sh")
"win32"==c9.platform&&(code=code.replace(/2> >\(/g,"#")),installer.ptyExec({name:"Tar.Gz",bash:bashBin,
proc:proc,code:code,args:[".",source,target,task.url||"",task.dir||""],cwd:options.cwd},onData,callback)

}function normalizePath(p){return"win32"==c9.platform&&(p=p.replace(/\\/g,"/").replace(/^(\w):/,"/$1")),
p}function isAvailable(callback){callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,proc=imports.proc,c9=imports.c9,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("tar.gz",plugin)}),plugin.on("unload",function(){
installer.removePackageManager("tar.gz")}),plugin.freezePublicAPI({execute:execute,isAvailable:isAvailable
}),register(null,{"installer.tar.gz":plugin})}return main.consumes=["Plugin","installer","proc","c9"],
main.provides=["installer.tar.gz"],main})


define("plugins/c9.ide.installer/commands/message",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){onData("\n"+task),callback()}function isAvailable(callback){
return callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("message",plugin)}),plugin.on("unload",function(){
installer.removePackageManager("message")}),plugin.freezePublicAPI({execute:execute,isAvailable:isAvailable
}),register(null,{"installer.message":plugin})}return main.consumes=["Plugin","installer"],main.provides=["installer.message"],
main})


define("plugins/c9.ide.installer/commands/symlink",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){if(!task.source||!task.target)throw new Error("Invalid Task Definition. Missing source and/or target field: "+JSON.stringify(task))


var source=task.source.replace(/^~/,c9.home),target=task.target.replace(/^~/,c9.home),script=["set -ex",'export C9_DIR="$HOME"/.c9','mkdir -p "$1"','ln -sf "$2" "$3"']


installer.ptyExec({name:"ln",code:script.join("\n"),cwd:options.cwd,args:[".",dirname(target),source,target]
},onData,callback)}function isAvailable(callback){callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,c9=imports.c9,dirname=require("path").dirname,plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("symlink",plugin)}),plugin.on("unload",function(){
installer.removePackageManager("symlink")}),plugin.freezePublicAPI({execute:execute,isAvailable:isAvailable
}),register(null,{"installer.symlink":plugin})}return main.consumes=["Plugin","installer","proc","c9"],
main.provides=["installer.symlink"],main})


define("text!plugins/c9.ide.installer/commands/zip.sh",[],'set -e\n\nSOURCE=$0\nTARGET=$1\nURL=$2\nDIR=$3\n\nhas() {\n  type "$1" > /dev/null 2>&1\n  return $?\n}\n\nif [ ! "$SOURCE" ] || [ ! "$URL" ] || [ ! "$TARGET" ]; then\n    echo "Error: missing source and/or target" >&2;\n    exit 10\nfi\n\nif [ "$DIR" ]; then\n    set +e\n    rm -Rf "$TARGET" 2>/dev/null\n    set -e\nfi\n\nmkdir -p "$TARGET"\ncd "$TARGET"\n\n# Download file if needed\nif [ "$URL" ]; then\n\n    if has "wget"; then\n        DOWNLOAD="wget --no-check-certificate -nc -nv"\n    elif has "curl"; then\n        DOWNLOAD="curl -sSOL"\n    else\n        echo "Error: you need curl or wget to proceed" >&2;\n        exit 20\n    fi\n\n    echo "Downloading... $URL"\n    $DOWNLOAD "$URL" 2> >(while read line; do echo -e "\\e[01;30m$line\\e[0m" >&2; done)\n    \n    SOURCE="$TARGET/$(basename $URL)"\nfi\n\n# Make sure package is in the target folder\nif [ `dirname $SOURCE` != $TARGET ]; then\n    cp -a "$SOURCE" "$TARGET"\n    SOURCE="$TARGET/$(basename $SOURCE)"\nfi\n\n# Unpack source\necho "Unpacking... $SOURCE"\nunzip -q -o "$SOURCE" 2> >(while read line; do echo -e "\\e[01;30m$line\\e[0m" >&2; done)\n\n# Delete package\nrm -Rf $SOURCE\n\n# Move directory\nif [ "$DIR" ]; then\n    echo "Merging... $TARGET/$DIR in $TARGET"\n    \n    merge() {\n        mv "$DIR" "/tmp/$DIR"\n        mv "/tmp/$DIR/"* .\n        set +e\n        mv "/tmp/$DIR/."* . 2>/dev/null\n        set -e\n        rmdir "/tmp/$DIR"\n    }\n    \n    merge 2> >(while read line; do echo -e "\\e[01;30m$line\\e[0m" >&2; done)\nfi')


define("plugins/c9.ide.installer/commands/zip",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){if(!task.source&&!task.url)throw new Error("Invalid Task Definition. Missing source or url field: "+JSON.stringify(task))


var source=(task.source||"-1").replace(/^~/,c9.home),target=task.target.replace(/^~/,c9.home)
installer.ptyExec({name:"Zip",bash:bashBin,proc:proc,code:require("text!./zip.sh"),args:[source,target,task.url||"",task.dir||""],
cwd:options.cwd},onData,callback)}function isAvailable(callback){callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,proc=imports.proc,c9=imports.c9,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("zip",plugin)}),plugin.on("unload",function(){
installer.removePackageManager("zip")}),plugin.freezePublicAPI({execute:execute,isAvailable:isAvailable
}),register(null,{"installer.zip":plugin})}return main.consumes=["Plugin","installer","proc","c9"],main.provides=["installer.zip"],
main})


define("plugins/c9.ide.installer/commands/gem",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){var GEM="gem",script="set -e\n"+GEM+" install "+task
installer.ptyExec({name:"GEM",bash:bashBin,code:script,cwd:options.cwd},onData,callback)}function isAvailable(callback){
callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("gem",plugin)}),plugin.on("unload",function(){
installer.removePackageManager("gem")}),plugin.freezePublicAPI({execute:execute,isAvailable:isAvailable
}),register(null,{"installer.gem":plugin})}return main.consumes=["Plugin","installer"],main.provides=["installer.gem"],
main})


define("plugins/c9.ide.installer/commands/pip",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){var PIP="pip",script="set -e\n"+PIP+" install "+task
installer.ptyExec({name:"PIP",bash:bashBin,code:script,cwd:options.cwd},onData,callback)}function isAvailable(callback){
callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("pip",plugin)}),plugin.on("unload",function(){
installer.removePackageManager("pip")}),plugin.freezePublicAPI({execute:execute,isAvailable:isAvailable
}),register(null,{"installer.pip":plugin})}return main.consumes=["Plugin","installer"],main.provides=["installer.pip"],
main})


define("plugins/c9.ide.installer/commands/npm-g",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){var script=[c9.debug?"set -x":"","set -e","export C9_DIR=$HOME/.c9","export PATH=$C9_DIR/node/bin:$PATH","export NPM=$C9_DIR/node/bin/npm","mkdir -p $C9_DIR/empty","cd $C9_DIR/empty","$NPM install -g --production "+task,"if [[ -w /usr/bin ]]; then","$NPM explore -g "+task+" -- 'ln -sfv $(pwd)/bin/* /usr/bin/'","elif [[ -w /usr/local/bin ]]; then","$NPM explore -g "+task+" -- 'ln -sfv $(pwd)/bin/* /usr/local/bin/'","else","echo WARN: command installed to $($NPM bin -g 2>&1) >&2","fi"]


installer.ptyExec({name:"npm-g",bash:bashBin,code:script.join("\n"),cwd:options.cwd},onData,callback)

}function isAvailable(callback){callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,c9=imports.c9,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){"win32"!==c9.platform&&installer.addPackageManager("npm-g",plugin)}),plugin.on("unload",function(){
"win32"!==c9.platform&&installer.removePackageManager("npm-g")}),plugin.freezePublicAPI({execute:execute,
isAvailable:isAvailable}),register(null,{"installer.npm-g":plugin})}return main.consumes=["Plugin","installer","c9"],
main.provides=["installer.npm-g"],main})


define("plugins/c9.ide.installer/commands/npm",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback,global){var script=["set -e",'export C9_DIR="$HOME"/.c9','export PATH="$C9_DIR/node/bin:$C9_DIR/node_modules/.bin:/mnt/shared/sbin:$PATH"',"mkdir -p ./node_modules","npm install --production "+task]


installer.ptyExec({name:"npm",bash:bashBin,code:script.join("\n"),cwd:options.cwd},onData,callback)}function isAvailable(callback){
callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,c9=imports.c9,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("npm",plugin),"win32"===c9.platform&&installer.addPackageManager("npm-g",plugin)

}),plugin.on("unload",function(){installer.removePackageManager("npm"),"win32"===c9.platform&&installer.removePackageManager("npm-g")

}),plugin.freezePublicAPI({execute:execute,isAvailable:isAvailable}),register(null,{"installer.npm":plugin
})}return main.consumes=["Plugin","installer","c9"],main.provides=["installer.npm"],main})


define("plugins/c9.ide.installer/commands/bash",[],function(require,exports,module){function main(options,imports,register){
function execute(script,options,onData,callback){"string"==typeof script&&(script={code:script}),installer.ptyExec({
name:"Bash",code:script.code,args:script.args,cwd:options.cwd},onData,callback)}function isAvailable(callback){
callback(!0)}var Plugin=imports.Plugin,installer=imports.installer,plugin=(imports.proc,new Plugin("Ajax.org",main.consumes))


plugin.on("load",function(){installer.addPackageManager("bash",plugin)}),plugin.on("unload",function(){
installer.removePackageManager("bash")}),plugin.freezePublicAPI({execute:execute,isAvailable:isAvailable
}),register(null,{"installer.bash":plugin})}return main.consumes=["Plugin","installer","proc"],main.provides=["installer.bash"],
main})


define("text!plugins/c9.ide.installer/commands/darwin.sh",[],'set -e\n\nTASK=$0\n\nhas() {\n  type "$1" > /dev/null 2>&1\n  return $?\n}\n\nif has "wget"; then\n    DOWNLOAD="wget --no-check-certificate -nc -nv"\nelif has "curl"; then\n    DOWNLOAD="curl -sSOL"\nelse\n    echo "Error: you need curl or wget to proceed" >&2;\n    exit 20\nfi\n\nif ! has "brew"; then\n    ruby -e "$($DOWNLOAD https://raw.githubusercontent.com/mxcl/homebrew/go/install)"\nfi\n\nbrew install $TASK > /dev/null ||\n    (brew remove $TASK &>/dev/null && brew install $TASK)')


define("plugins/c9.ide.installer/commands/darwin",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){installer.ptyExec({name:"Darwin",bash:bashBin,code:require("text!./darwin.sh"),
args:[task],cwd:options.cwd},onData,callback)}function isAvailable(callback){return callback("darwin"==c9.platform)

}var Plugin=imports.Plugin,installer=imports.installer,c9=imports.c9,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("darwin",plugin),installer.addPackageManagerAlias("darwin","osx")

}),plugin.on("unload",function(){installer.removePackageManager("darwin")}),plugin.freezePublicAPI({execute:execute,
isAvailable:isAvailable}),register(null,{"installer.darwin":plugin})}return main.consumes=["Plugin","installer","c9"],
main.provides=["installer.darwin"],main})


define("plugins/c9.ide.installer/commands/centos",[],function(require,exports,module){function main(options,imports,register){
function execute(task,options,onData,callback){var script="set -e\nsudo yum -y install "+task+"\n"
installer.ptyExec({name:"CentOS",bash:bashBin,code:script,cwd:options.cwd},onData,callback)}function isAvailable(callback){
return"undefined"!=typeof available?callback(available):void proc.execFile("which",{args:["yum"]},function(err,stdout){
return err?callback(!1):(available=stdout.length>0,void callback(available))})}var available,Plugin=imports.Plugin,installer=imports.installer,proc=imports.proc,bashBin=options.bashBin||"bash",plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){installer.addPackageManager("centos",plugin),installer.addPackageManagerAlias("centos","rhel","fedora")

}),plugin.on("unload",function(){installer.removePackageManager("centos"),available=void 0}),plugin.freezePublicAPI({
execute:execute,isAvailable:isAvailable}),register(null,{"installer.centos":plugin})}return main.consumes=["Plugin","installer","proc"],
main.provides=["installer.centos"],main})


define("plugins/c9.automate/automate",[],function(require,exports,module){function main(options,imports,register){
function addCommand(ns,name,implementation){namespaces[ns]||(namespaces[ns]={commands:{},alias:{}}),namespaces[ns].commands[name]=implementation

}function removeCommand(ns,name){namespaces[ns]||(namespaces[ns]={commands:{},alias:{}}),delete namespaces[ns].commands[name]

}function addCommandAlias(ns,name){namespaces[ns]||(namespaces[ns]={commands:{},alias:{}})
for(var i=1;i<arguments.length;i++)namespaces[ns].alias[arguments[i]]=name}function getCommand(ns,name){
if(!namespaces[ns])throw new Error("Unknown namespace: "+ns)
var cmd=namespaces[ns].commands
return cmd[name]||cmd[namespaces[ns].alias[name]]}function createSession(ns){function task(task,options,validate){
if(executing)throw new Error("Adding tasks while executing")
"function"!=typeof options&&void 0!==options||(validate||(validate=options),options={}),Object.defineProperty(task,"$options",{
enumerable:!1,configurable:!1,writable:!1,value:options}),tasks.push(task)}function execute(tasks,callback,options){
tasks.$options&&(options=tasks.$options),async.eachSeries(tasks,function(task,next){return options=task.$options||options||{},
options.ignore?next():Array.isArray(task)?execute(task,next,options):void async.eachSeries(Object.keys(task),function(type,next){
var s=type.split(":")
if(s.length>1&&(s={ns:s[0],type:s[1]}),"install"==type)return execute(task[type],function(err){next(err||1)

},options)
var command=getCommand(s.ns||ns,s.type||type)
command.isAvailable(function(available){if(!available)return next()
var items=Array.isArray(task[type])?task[type]:[task[type]]
async.eachSeries(items,function(item,next){if(aborting)return next(new Error("Aborted"))
emit("each",{session:session,task:task,options:options,type:type,item:item}),lastTask=task
var onData=function(chunk,process){return aborting?process&&process.end():(output+=chunk,lastProcess=process,
void emit("data",{data:chunk,process:process}))},onFinish=function(err){return err&&"EDISCONNECT"==err.code?void c9.once("connect",function(){
command.execute(item,options,onData,onFinish)}):void next(err)}
command.execute(item,options,onData,onFinish)},function(err){next(err||1)})})},function(err){return 1===err?next():err?next(err):(err=new Error("None of the available commands are available: "+JSON.stringify(task,4,"   ")),
err.code="ENOTAVAILABLE",next(err))})},function(err){callback(err)})}function run(callback){executing||(emit("run"),
aborting=!1,executing=!0,execute(tasks,function(err){executing=!1,lastProcess=null,callback&&callback.apply(this,arguments),
session.unload(),emit("stop",err)}))}function abort(callback){aborting=!0,executing||(lastProcess=null,
emit("stop",new Error("Aborted"))),callback&&callback()}var lastProcess,lastTask,session=new Plugin("Ajax.org",main.consumes),emit=session.getEmitter(),tasks=[],output="",executing=!1,aborting=!1


return session.baseclass(),session.freezePublicAPI({get tasks(){return tasks},get executing(){return executing

},get output(){return output},get process(){return lastProcess||null},get lastTask(){return lastTask||null

},task:task,run:run,abort:abort}),session}var Plugin=imports.Plugin,c9=imports.c9,async=require("async"),plugin=new Plugin("Ajax.org",main.consumes),namespaces={}


plugin.on("load",function(){}),plugin.on("unload",function(){}),plugin.freezePublicAPI({createSession:createSession,
addCommand:addCommand,removeCommand:removeCommand,addCommandAlias:addCommandAlias}),register(null,{automate:plugin
})}return main.consumes=["Plugin","c9"],main.provides=["automate"],main})


define("text!plugins/c9.ide.installer/style.css",[],"")


define("text!plugins/c9.ide.installer/pages/intro.html",[],'<div class="page intro">\n    <blockquote>\n        \n    </blockquote>\n</div>')


define("text!plugins/c9.ide.installer/pages/overview.html",[],'<div class="page overview">\n    The following components will be installed. You can untick any of the optional components.\n    \n    <blockquote>\n        \n    </blockquote>\n</div>')


define("text!plugins/c9.ide.installer/pages/execute.html",[],'<div class="page execute">\n    <div class="title">Installing Components</div>\n    <pre class="log"></pre>\n    <div class="progress">\n        <span class="install-spinner"></span>\n        Installing...\n    </div>\n    <div class="cb">\n        <input type="checkbox" id="details">\n        <label for="details">Show Installation Details</label>\n    </div>\n</div>')


define("text!plugins/c9.ide.installer/pages/complete.html",[],'<div class="page complete">\n    <h3></h3>\n    <blockquote>\n        \n    </blockquote>\n</div>')


define("text!plugins/c9.ide.installer/install/aborted.html",[],"<p>\n    You have aborted the installation process. The installer will be \n    automatically restarted on your next refresh. Uninstall the component of \n    choice to prevent the installer from being triggered.\n</p>")


define("text!plugins/c9.ide.installer/install/success.html",[],"<p>These components were successfully installed:</p>\n\n<ul>\n    <li>{{sessions}}</li>\n</ul>")


define("plugins/c9.ide.installer/gui",[],function(require,exports,module){function main(options,imports,register){
function load(){return options.testing?plugin.show(!0):(commands.addCommand({name:"showinstaller",exec:function(editor,args){
if(!plugin.visible)return args&&args.packages?void args.packages.forEach(function(name){installer.reinstall(name)

}):void(installing?plugin.show():(draw(),plugin.startPage=overview,plugin.show(!0),addUnselectedPackages()))

}},plugin),menus.addItemByPath("Window/Installer...",new ui.item({command:"showinstaller"}),38,plugin),
installer.on("beforeStart",beforeStart,plugin),void installer.on("reinstall",function(e){var prefs=settings.getJson("state/installer"),pref=prefs[e.name]||0


delete pref.$version,settings.setJson("state/installer",prefs)},plugin))}function beforeStart(e){var session=e.session,pkgName=session["package"].name


if(sessions.some(function(n){return n["package"].name==pkgName}))return session.abort(),!1
aborting=!1,sessions.push(session),session.once("stop",function(){sessions.remove(session)})
var state=settings.getJson("state/installer")||{}
state[session["package"].name]||(state[session["package"].name]={},settings.setJson("state/installer",state))


var pref=state[session["package"].name]||0
if(pref.$version===session["package"].version)return plugin.visible&&"execute"!=plugin.activePage.name&&"done"!=plugin.activePage.name?updatePackages():sessions.remove(session),
!1
var hasOptional=session.tasks.some(function(n){return(n.$options||0).optional})
if(installing)return sessions.remove(session),void plugin.once("finished",function(){beforeStart(e)})


if(settings.getBool("user/installer/@auto")&&!plugin.visible)installing===!1&&(setTimeout(function(){
draw(),plugin.startPage=overview,plugin.show(!0),plugin.hide(),plugin.next()},500),installing=null)
else if(session.introduction||hasOptional)draw(),plugin.visible?updatePackages():(plugin.startPage=session.introduction?intro:overview,
plugin.show(!0),addUnselectedPackages())
else{if(!plugin.visible)return
updatePackages()}return!1}function draw(){drawn||(drawn=!0,ui.insertCss(require("text!./style.css"),options.staticPrefix,plugin),
settings.on("user/installer/@auto",function(){cbAlways.setAttribute("checked",settings.get("user/installer/@auto"))

},plugin),intro=new WizardPage({name:"intro"},plugin),intro.on("draw",function(e){ui.insertHtml(e.html,require("text!./pages/intro.html"),intro)

}),intro.on("show",function(){updateIntro()}),overview=new WizardPage({name:"overview"},plugin),overview.on("draw",function(e){
function updateParents(nodes){var parents={},toChildren={}
nodes.forEach(function(n){n.parent.label?n.optional?parents[n.parent.label]=n.parent:n.isChecked=!0:(toChildren[n.label]=!0,
parents[n.label]=n)}),Object.keys(parents).forEach(function(label){var parent=parents[label]
if(toChildren[label]){var all=!0,hasUnchecked=parent.items.some(function(n){return nodes.indexOf(n)==-1&&!n.isChecked

})
return hasUnchecked&&(parent.isChecked=!0),parent.items.forEach(function(n){n.optional?n.isChecked=!!parent.isChecked:all=!1

}),void(all||parent.isChecked||(parent.isChecked=-1))}var state=0
parent.items.forEach(function(n){n.isChecked&&state++}),state==parent.items.length?parent.isChecked=!0:parent.isChecked=!!state&&-1

}),0===getSelectedSessions().length?(plugin.showFinish=!0,plugin.showNext=!1):(plugin.showFinish=!1,plugin.showNext=!0)

}ui.insertHtml(e.html,require("text!./pages/overview.html"),overview),datagrid=new Datagrid({container:e.html.querySelector("blockquote"),
enableCheckboxes:!0,columns:[{caption:"Name",value:"name",width:"35%",type:"tree"},{caption:"Description",
value:"description",width:"65%"}],getClassName:function(node){return node.optional?"":"required"}},plugin),
datagrid.on("check",updateParents),datagrid.on("uncheck",updateParents)}),overview.on("show",function(){
updatePackages(),0===getSelectedSessions().length?(plugin.showFinish=!0,plugin.showNext=!1):(plugin.showFinish=!1,
plugin.showNext=!0)}),execute=new WizardPage({name:"execute"},plugin),execute.on("draw",function(e){var div=e.html


ui.insertHtml(div,require("text!./pages/execute.html"),execute),logDiv=div.querySelector(".log"),spinner=div.querySelector(".progress"),
title=div.querySelector(".title"),terminal=new Terminal({container:logDiv},plugin),terminal.on("input",function(e){
var data=e.data
sessions.some(function(session){if(session.executing)return session.process&&session.process.write(data),
!0})})
var cb=div.querySelector("#details")
cb.addEventListener("click",function(){toggleLogDetails(cb.checked)}),plugin.addOther(function(){div.textContent="",
div.parentNode.removeChild(div),terminal.destroy()})}),complete=new WizardPage({name:"complete"},plugin),
complete.on("draw",function(e){ui.insertHtml(e.html,require("text!./pages/complete.html"),complete),setCompleteMessage(),
plugin.showPrevious=!1,plugin.showFinish=!0}),plugin.on("previous",function(e){var page=e.activePage
"overview"==page.name&&clear()}),plugin.on("next",function(e){cbAlways.show()
var page=e.activePage
return"intro"==page.name?overview:"overview"==page.name?(cbAlways.hide(),setTimeout(start),execute):"execute"==page.name?(plugin.showFinish=!0,
plugin.showPrevious=!1,plugin.showNext=!1,complete):void 0},plugin),plugin.on("cancel",function(e){"execute"==e.activePage.name&&(aborting=!0,
setCompleteMessage("Installation Aborted",require("text!./install/aborted.html")),plugin.gotoPage(complete),
plugin.showCancel=!1,executeList.forEach(function(session){session.executing&&session.abort()}))},plugin),
plugin.on("finish",function(e){if("overview"==e.activePage.name){var state={}
getSelectedSessions(null,state),settings.setJson("state/installer",state)}return cbAlways.show(),cbAlways.checked&&"complete"!=e.activePage.name?void runHeadless(function(){
installer.waitForSuccess&&(installer.waitForSuccess=!1)}):void(installer.waitForSuccess&&(installer.waitForSuccess=!1))

},plugin),plugin.startPage||(plugin.startPage=intro))}function updateIntro(){var html=""
sessions.forEach(function(session){html+=session.introduction||""}),intro.container.querySelector("blockquote").innerHTML=html

}function updatePackages(){if(datagrid){var root={items:[]},prefs=settings.getJson("state/installer")


sessions.forEach(function(session){var sessionState=prefs[session["package"].name]||0,node={label:session["package"].name,
description:"Version "+session["package"].version,session:session,items:[],isOpen:!1}
root.items.push(node)
var optional=!1,checked=0
session.tasks.forEach(function(task){var options=task.$options
options&&(options.optional&&(optional=!0,options.ignore=sessionState[options.name]||!1),void 0===options.isChecked&&(options.isChecked=!options.ignore),
checked+=options.isChecked?1:0,node.items.push(options))}),node.isChecked=0!=checked&&(checked==session.tasks.length||-1),
node.optional=optional}),datagrid.setRoot(root)}}function setCompleteMessage(title,msg){return complete.container?(complete.container.querySelector("h3").innerHTML=title||lastComplete[0],
void(complete.container.querySelector("blockquote").innerHTML=msg||lastComplete[1])):lastComplete=[title,msg]

}function getSelectedSessions(ignored,state){var sessions=[],start=settings.getJson("state/installer"),nodes=datagrid.root.items


return nodes.filter(function(node){var sessionState,session=node.session
state&&(sessionState={})
var hasNotInstalled=0,totalIgnored=0
return session.tasks.forEach(function(task){var options=task.$options||0,alreadyInstalled=(start&&start[session["package"].name]||0)[options.name]===!1


options.ignore=alreadyInstalled||options.isChecked===!1,options.ignore&&(alreadyInstalled||hasNotInstalled++,
totalIgnored++),sessionState&&(sessionState[options.name]=!alreadyInstalled&&options.ignore)}),0!=hasNotInstalled&&state&&(state[session["package"].name]=sessionState),
totalIgnored==session.tasks.length?(sessionState&&(sessionState.$version=session["package"].version),
ignored&&ignored.push(session),!1):void sessions.push(session)}),sessions}function clear(){terminal.clear()

}function log(msg){terminal.convertEol=!installer.ptyEnabled,terminal.write(msg)}function logln(msg,color,unset){
terminal.convertEol=!0,terminal.write((color||"")+msg+(color?unset||RESETCOLOR:"")+"\n")}function toggleLogDetails(show){}
function start(){if(!installing){installing=!0,plugin.showCancel=!0,plugin.showPrevious=!1,plugin.showNext=!1,
logln("Installation Started",LIGHTBlUE),logln(""),spinner.style.display="block"
var aborted=[],state={}
executeList=getSelectedSessions(aborted,state),aborted.forEach(function(session){session.abort()}),async.eachSeries(executeList,function(session,next){
if(aborting)return next(new Error("Aborted"))
session.on("run",function(){var heading="Package "+session["package"].name+" "+session["package"].version


logln(heading+"\n"+Array(heading.length+1).join("-")),title.innerHTML="Installing "+session["package"].name

})
var lastOptions
session.on("each",function(e){lastOptions!=e.options&&(lastOptions=e.options,e.options.name&&logln("Installing "+e.options.name,BLUE))

}),session.on("data",function(e){log(e.data)}),session.start(next,!0)},function(err){logDiv.scrollTop=logDiv.scrollHeight,
plugin.showCancel=!1,installing=!1,err?(plugin.visible||plugin.show(),title.innerHTML="Installation Failed",
logln("\n"+err.message+"\n\n"+RED+"One or more errors occured. Please try to resolve them and restart Cloud9 or contact support@c9.io."+RESETCOLOR),
spinner.style.display="none",logDiv.className="log details",sessions=[],executeList.forEach(function(session){
installer.createSession(session["package"].name,session["package"].version,installer.packages[session["package"].name].populate)

}),addUnselectedPackages(),plugin.showPrevious=!0,"execute"==plugin.activePage.name&&(plugin.showFinish=!0),
plugin.once("hide",function(){emit("finished")})):(logln(""),logln("Installation Completed.",LIGHTBlUE),
title.innerHTML="Installation Completed",settings.setJson("state/installer",state),spinner.style.display="none",
setCompleteMessage("Installation Complete",require("text!./install/success.html").replace("{{sessions}}",executeList.map(function(s){
return s["package"].name+" "+s["package"].version}).join("</li><li>"))),plugin.showNext=!0,emit("finished"))

})}}function addUnselectedPackages(){var prefs=settings.getJson("state/installer")
for(var pkgName in prefs)sessions.some(function(n){return n["package"].name==pkgName})||installer.reinstall(pkgName,!0)

}function runHeadless(callback){async.eachSeries(sessions,function(session,next){session.start(next,!0)

},callback)}var Wizard=imports.Wizard,WizardPage=imports.WizardPage,ui=imports.ui,installer=imports.installer,commands=imports.commands,menus=imports.menus,settings=imports.settings,Datagrid=imports.Datagrid,Terminal=imports.Terminal,async=require("async"),RED="[01;31m",BLUE="[01;34m",LIGHTBlUE="[01;94m",RESETCOLOR="[0m"


installer.waitForSuccess=!0
var logDiv,spinner,datagrid,aborting,intro,overview,execute,complete,cbAlways,terminal,title,executeList,drawn,lastComplete,plugin=new Wizard("Ajax.org",main.consumes,{
title:"Cloud9 Installer",allowClose:!0,"class":"installer",resizable:!0,height:400,width:650}),emit=plugin.getEmitter(),sessions=[],installing=!1


plugin.on("draw",function(){draw(),plugin.createElement({id:"cbAlways",type:"checkbox",caption:"Always install everything",
position:150,defaultValue:settings.getBool("user/installer/@auto")}),cbAlways=plugin.getElement("cbAlways"),
cbAlways.on("afterchange",function(e){e.value?(plugin.showCancel=!1,plugin.showFinish=!0,plugin.showNext=!1,
plugin.showPrevious=!1):(plugin.showFinish=!1,"intro"==plugin.activePage.name?plugin.showNext=!0:"overview"==plugin.activePage.name?plugin.activePage.show():"complete"==plugin.activePage.name&&(plugin.showFinish=!0)),
settings.set("user/installer/@auto",e.value)})}),plugin.on("load",function(){load()}),plugin.on("unload",function(){
aborting=!1,terminal=null,logDiv=null,spinner=null,intro=null,title=null,overview=null,execute=null,complete=null,
drawn=null,datagrid=null,lastComplete=null,executeList=null,cbAlways=null,sessions=[],installing=!1}),
plugin.on("hide",function(){terminal&&terminal.clear()}),plugin.on("show",function(){plugin.allowClose=installer.checked

}),plugin.on("resize",function(){terminal&&terminal.resize()}),plugin.freezePublicAPI({}),register(null,{
"installer.gui":plugin})}return main.consumes=["Wizard","WizardPage","ui","installer","Datagrid","settings","menus","commands","Terminal"],
main.provides=["installer.gui"],main})


define("plugins/c9.ide.navigate/heap",[],function(require,exports,module){"use strict"
function Heap(param){var pq
Array.isArray(param)?(pq=param.slice(),pq.unshift(null)):pq=[null],this.pq=pq,this.__defineGetter__("N",function(){
return pq.length-1})
for(var k=Math.floor(this.N/2);k>=1;k--)this.sink(k)}(function(){this.empty=function(){return 0===this.N

},this.size=function(){return this.N},this.min=function(){if(this.empty())throw new Exception("Priority queue underflow")


return this.pq[1]},this.push=function(x){this.pq.push(x),this.heapify(this.N)},this.pop=function(){if(this.empty())throw new Exception("Priority queue underflow")


this.$exch(1,this.N)
var min=this.pq.splice(this.pq.length-1,1)[0]
return this.sink(1),min},this.heapify=function(k){for(;k>1&&this.$greater(Math.floor(k/2),k);)this.$exch(k,Math.floor(k/2)),
k=Math.floor(k/2)},this.sink=function(k){for(;2*k<=this.N;){var j=2*k
if(j<this.N&&this.$greater(j,j+1)&&j++,!this.$greater(k,j))break
this.$exch(k,j),k=j}},this.$exch=function(i,j){var swap=this.pq[i]
this.pq[i]=this.pq[j],this.pq[j]=swap},this.$greater=function(i,j){return this.pq[i]>this.pq[j]}}).call(Heap.prototype),
module.exports=Heap})


define("plugins/c9.ide.navigate/search",[],function(require,exports,module){var Heap=require("./heap"),fileTypes={
js:1,json:11,css:5,less:5,scss:5,sass:5,xml:11,rdf:15,rss:15,svg:5,wsdl:11,xslt:5,atom:5,mathml:5,mml:5,
php:1,phtml:1,html:5,xhtml:5,coffee:1,py:1,ru:1,gemspec:5,rake:5,rb:1,c:1,cc:1,cpp:1,cxx:1,h:2,hh:2,hpp:2,
cs:1,java:1,clj:1,groovy:1,logic:1,lql:1,scala:1,ml:1,mli:1,md:2,markdown:2,textile:5,latex:5,tex:5,ltx:5,
lua:1,pl:1,pm:2,ps1:1,cfm:1,sql:2,sh:1,bash:1,bmp:10,djv:10,djvu:10,gif:10,ico:10,jpg:10,jpeg:10,pbm:10,
pgm:10,png:10,pnm:10,ppm:10,psd:10,tiff:10,xbm:10,xpm:10,go:5,hx:5,yaml:5,psql:2}
module.exports.fileSearch=function(filelist,keyword){keyword||(keyword="")
for(var name,value,displayName,s,j,k,q,klen=keyword.length,keywordLower=keyword.toLowerCase(),type="value",toS=function(){
return this[type]},newlist=[],l=filelist.length,big=l>5e4,res=big?[]:new Heap,i=0;i<l;i++){if(displayName=filelist[i],
name=displayName.toLowerCase(),value=0,(j=name.lastIndexOf(keywordLower))>-1){if(big){res.push(displayName)


continue}if(j>(q=name.lastIndexOf("/")))k=name.lastIndexOf("/"+keywordLower),k>-1&&(value+=name.length==klen+1+k?1e3:name.lastIndexOf(".")==k+klen+1?201:k==q?200:100),
value+=200-Math.min(10*name.split("/").length,150)
else if(keywordLower.indexOf("/")>-1){var idx=keywordLower.lastIndexOf("/"),rest=name.substr(j+idx+1),file=keywordLower.substr(idx+1)


0===j&&(value+=1e3),file.indexOf(".")>-1?(0===rest.indexOf(file)&&(value+=200),value+=200-Math.min(10*(rest.length-file.length),150)):value+=rest.substr(file.length).match(/^\..*(\/|$)/)?201:50

}else value+=50}else{if(big||name.split("/").length>10)continue
var result
if(result=matchPath(name,keywordLower),!result.length||result.length>20)continue
var matched=name.substring(result[0].val.length)
value+=20-Math.min(3*(result.length-2),19),value+=15-Math.min(2*name.split("/").length,14),value+=10-Math.min(matched.length-keyword.length,9),
value+=20}value>0&&(newlist.push(displayName),s=name.lastIndexOf("."),value-=s>-1?10*(fileTypes[name.substr(s+1)]||0)||20:20,
100===res.size()&&value>res.min().value&&res.pop(),res.size()<100&&res.push({toString:toS,value:value,
name:displayName}))}if(big)return res.newlist=res,res
for(var ret=[];res.size();)ret.unshift(res.pop().name)
return ret.newlist=newlist,ret}
var treeSearch=module.exports.treeSearch=function(tree,keyword,caseInsensitive,results,head,indexProperty){
caseInsensitive&&(keyword=keyword.toLowerCase()),results=results||[],head=head||0
for(var i=0;i<tree.length;i++){var node=tree[i],name=indexProperty?node[indexProperty]||"":node.name||node.label||node.caption||("string"==typeof node?node:"")


caseInsensitive&&(name=name.toLowerCase())
var index=name.indexOf(keyword)
if(index!==-1){var result=node.clone?node.clone():{}
if(result.items=node.items?result.keepChildren?result.items:treeSearch(node.items,keyword,caseInsensitive):[],
!node.clone)for(var p in node)node[p]&&"items"!==p&&(result[p]=node[p])
0===index?(results.splice(head,0,result),head++):results.push(result)}else node.items&&!node.keepChildren&&(results=treeSearch(node.items,keyword,caseInsensitive,results,head))

}return results},matchPath=module.exports.matchPath=function(path,keyword){var result=[],pathSplits=path.split("/")


pathSplits.length>4&&(pathSplits=[pathSplits.slice(0,pathSplits.length-4).join("/")+"/"].concat(pathSplits.slice(pathSplits.length-4,pathSplits.length)),
"/"==pathSplits[0]&&(pathSplits[0]=""))
var k,i,value="",j=-1
for(k=pathSplits.length-1;k>=0&&!result.length;k--){value=(k>0?"/":"")+pathSplits[k]+value
var matchI=null,missI=null
for(i=0,j=0;i<value.length&&j<keyword.length;i++)value[i]===keyword[j]?(matchI=null===matchI?i:matchI,
j++,null!==missI&&(result.push({val:value.substring(missI,i)}),missI=null)):(missI=null===missI?i:missI,
null!==matchI&&(result.push({match:!0,val:value.substring(matchI,i)}),matchI=null))
j===keyword.length?(null!==missI&&result.push({val:value.substring(missI,i)}),null!==matchI&&result.push({
match:!0,val:value.substring(matchI,i)}),result.push({val:value.substring(i,value.length)}),k&&result.unshift({
val:pathSplits.slice(0,k).join("/")})):result=[]}return result}})


define("text!plugins/c9.ide.processlist/processlist.css",[],"")


define("plugins/c9.ide.processlist/processlist",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,commands.addCommand({name:"showprocesslist",bindKey:{mac:"Command-Option-P",
win:"Ctrl-Alt-P"},exec:function(editor,args){plugin.show(args.mode||"ps")}},plugin),void menus.addItemByPath("Tools/Process List",new ui.item({
command:"showprocesslist"}),1100,plugin))}function draw(options){if(!drawn){drawn=!0,ui.insertCss(require("text!./processlist.css"),plugin),
plugin.aml.setAttribute("resizable",!0)
var pNode=options.html
pNode.className="process-list",model=new TreeData,model.emptyMessage="No processes to be shown",model.$sortNodes=!0,
model.$sorted=!0,model.columnsPs=[{caption:"Process Name",value:"name",width:"100%",type:"tree"},{caption:"CPU",
getText:function(node){return node.cpu+"%"},width:"50"},{caption:"MEM",getText:function(node){return node.mem+"%"

},width:"50"},{caption:"Process Time",value:"ptime",width:"50"},{caption:"PID",value:"pid",width:"50"
},{caption:"User",value:"user",width:"80"}],model.columnsLsof=[{caption:"Address",value:"address",width:"100%"
},{caption:"Process Name",value:"command",width:"80"},{caption:"Status",value:"status",width:"50"},{caption:"PID",
value:"pid",width:"50"},{caption:"Type",value:"type",width:"50"}],model.columns=model.columnsPs
var datagridDiv=pNode.appendChild(document.createElement("div"))
datagrid=new Tree(datagridDiv),datagrid.renderer.setTheme({cssClass:"blackdg"}),layout.on("eachTheme",function(e){
var height=parseInt(ui.getStyleRule(".blackdg .row","height"),10)||24
model.rowHeightInner=height,model.rowHeight=height,e.changed&&datagrid.resize(!0)}),datagrid.setDataProvider(model),
layout.on("resize",function(){datagrid.resize()},plugin),datagrid.on("changeSelection",function(e){var row=datagrid.selection.getCursor()


row?(btnKill.enable(),btnForceKill.enable()):(btnKill.disable(),btnForceKill.disable())}),btnKill=plugin.getElement("btnKill"),
btnForceKill=plugin.getElement("btnForceKill"),tbFilter=plugin.getElement("tbFilter"),tbFilter.on("afterchange",function(e){
applyFilter()}),update(),emit("draw")}}function update(){"ps"==mode?updateProcessList():updateServerList()

}function updateProcessList(){setModel(null,model.columnsPs),proc.execFile("ps",{args:["axh","-ouser,pid:1,ppid:1,pcpu:1,pmem:1,time:1,command:1"]
},function(err,stdout,stderr){if(!err){var hiddenRegex=/^\[kthreadd|/,oldNodes=model.pidMap
oldNodes&&oldNodes.mode==mode||(oldNodes={mode:mode})
var pidMap=model.pidMap={mode:mode},lines=stdout.substr(0,stdout.length-1).split("\n"),json=lines.map(function(line){
var item=line.split(/\s+/),name=item.slice(6).join(" "),pid=item[1],node=oldNodes[pid]||{pid:pid,isOpen:hiddenRegex.test(name)
}
return pidMap[pid]=node,node.cpu=item[3],node.mem=item[4],node.ppid=item[2],node.name=name,node.user=item[0],
node.ptime=item[5],node.items=node.children=null,node}),root=[]
json.forEach(function(node){var parent=pidMap[node.ppid]
return parent?(parent.items||(parent.items=[]),void parent.items.push(node)):root.push(node)}),json=root,
setModel(json,model.columnsPs)}})}function updateServerList(){setModel(null,model.columnsLsof),proc.execFile("bash",{
args:["-c","sudo -n lsof -P -i -F pcnTtu; lsof -P -i -F pcnTtu"]},function(err,stdout,stderr){if(!err){
var node,json=[],oldNodes=model.pidMap
oldNodes&&oldNodes.mode==mode||(oldNodes={mode:mode}),model.pidMap={mode:mode},stdout.split("\n").forEach(function(part){
if("p"==part[0]){node&&json.push(node)
var pid=part.slice(1)
node=oldNodes[pid]||{pid:pid},model.pidMap[pid]=node}"c"==part[0]&&(node.command=part.slice(1)),"n"==part[0]&&(node.address=part.slice(1)),
"T"==part[0]&&/^TST=/.test(part)&&(node.status=part.slice(4)),"t"==part[0]&&(node.type=part.slice(1)),
"u"==part[0]&&(node.uid=parseInt(part.slice(1),10))}),node&&json.push(node),setModel(json,model.columnsLsof)

}})}function setModel(json,columns){model.columns!=columns&&(model.columns=columns,datagrid.setDataProvider(model),
json||(json=[])),json&&(model.cachedRoot=json,model.setRoot(json)),model.keyword&&applyFilter()}function forceKill(){
kill(!0)}function kill(force){var nodes=datagrid.selection.getSelectedNodes()
if(nodes.length){var button=force?btnForceKill:btnKill
async.each(nodes,function(row,next){if(!/^\d+$/.test(row.pid))return next()
button.disable()
var args=(force?"":"-9 ")+row.pid
proc.execFile("bash",{args:["-c","sudo -n kill "+args+" || kill "+args]},function(err,stdout,stderr){
next(err)})},function(err){return button.enable(),err?showError(err):void update()})}}function applyFilter(){
if(model.keyword=tbFilter.getValue(),model.keyword){model.reKeyword=new RegExp("("+util.escapeRegExp(model.keyword)+")","i")


var root=search.treeSearch(model.cachedRoot,model.keyword,!0)
model.setRoot(root)}else model.reKeyword=null,model.setRoot(model.cachedRoot)}function show(mode,options){
return options||(options={}),setMode(mode),plugin.queue(function(){},!0)}function setMode(val){"ps"!=val&&"lsof"!=val||mode==val||(mode=val,
timer&&update())}var model,datagrid,btnKill,btnForceKill,tbFilter,timer,Dialog=imports.Dialog,ui=imports.ui,commands=imports.commands,layout=imports.layout,proc=imports.proc,util=imports.util,menus=imports.menus,showError=imports["dialog.error"].show,search=require("../c9.ide.navigate/search"),Tree=require("ace_tree/tree"),TreeData=require("ace_tree/data_provider"),async=require("async"),plugin=new Dialog("Ajax.org",main.consumes,{
name:"dialog.processlist",allowClose:!0,dark:!0,title:"Process List",width:600,height:500,zindex:1e5,
resizable:!0,modal:!0,custom:!0,elements:[{type:"textbox",id:"tbFilter",message:"Filter",width:200,realtime:!0
},{type:"filler"},{type:"button",id:"btnKill",caption:"Kill",onclick:kill,disabled:!0},{type:"button",
id:"btnForceKill",color:"red",caption:"Force Kill",onclick:forceKill,disabled:!0}]}),emit=plugin.getEmitter(),INTERVAL=5e3,mode="ps",loaded=!1,drawn=!1


plugin.on("show",function(){timer=setInterval(function(){update()},INTERVAL),update()}),plugin.on("hide",function(){
timer=clearInterval(timer)}),plugin.on("draw",function(options){draw(options)}),plugin.on("load",function(){
load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),plugin.on("unload",function(){
loaded=!1,drawn=!1,model=null,datagrid=null,btnKill=null,btnForceKill=null,tbFilter=null,timer=null}),
plugin.freezePublicAPI({show:show}),register(null,{processlist:plugin})}return main.consumes=["ui","layout","commands","Dialog","proc","util","menus","dialog.error"],
main.provides=["processlist"],main})


define("c9/string",[],function(require,exports,module){"use strict"
exports.uCaseFirst=function(str){return str.substr(0,1).toUpperCase()+str.substr(1)},exports.trim=function(str){
return str.replace(/[\s\n\r]*$/,"").replace(/^[\s\n\r]*/,"")},exports.repeat=function(str,times){return new Array(times+1).join(str)

},exports.count=function(str,substr){return str.split(substr).length-1},exports.endsWith=function(subjectString,searchString,position){
("number"!=typeof position||!isFinite(position)||Math.floor(position)!==position||position>subjectString.length)&&(position=subjectString.length),
position-=searchString.length
var lastIndex=subjectString.indexOf(searchString,position)
return lastIndex!==-1&&lastIndex===position}})


define("plugins/c9.ide.panels/area",[],function(require,module,exports){function main(options,imports,register){
function Area(where,defaultActive,panels,emit){function getElement(name){var panel=panels.panels[name]


return panel&&panel.aml}function draw(){if(drawn)return bar
drawn=!0,emit("draw"),column=layout.findParent(plugin,where),bar=column.appendChild(new ui.bar({skinset:"panels"
})),plugin.addElement(bar),column.setWidth(CURWIDTH),column.setAttribute("class",where),bar.oncontextmenu=function(e){
var menu=menus.get("Window").menu
return menu.display(e.x,e.y),menu.childNodes.forEach(function(x){x.visible&&!x.panel&&(x.hide(),menu.on("prop.visible",function show(e){
e.value||(menu.off("prop.visible",show),x.show())}))}),!1},column.$int.addEventListener("scroll",function(e){
column.$int.scrollTop=0},!0)
var name="splitterPanel"+uCaseFirst(where)
return splitter=layout.getElement(name),splitter.on("dragdrop",function(e){if(activePanel){var width=column.getWidth()-CURWIDTH


settings.get(query)!=width&&settings.set(query,width)}}),bar.hide(),bar}function animate(fromName,toName,toWidth,noAnim){
var win=getElement(fromName),toWin=getElement(toName),autohide=fromName&&panels.panels[fromName].autohide


if(win!==toWin||!win){column.setAttribute("minwidth",CURWIDTH),animateCounter++
var onfinish=function(){onfinish.counter==animateCounter&&(setTimeout(function(){onfinish.counter==animateCounter&&(toWin?(toWinExt.style.zIndex=zIndex2,
toWinExt.style[where]=CURWIDTH+"px",toWinExt.style.minWidth="",toWinExt.style.maxWidth="","right"==where&&(toWinExt.style.left="0"),
panels.showing=!1):column.setWidth(CURWIDTH),win&&(winExt.style.zIndex=zIndex,win.$ext.style[where]=CURWIDTH+"px",
win.$ext.style.minWidth="",win.hide()))},100),emit("afterAnimate"))}
if(onfinish.counter=animateCounter,toWin){var toWinExt=toWin.$altExt||toWin.$ext,zIndex2=toWinExt.style.zIndex


toWinExt.style.zIndex=2e3,toWin.show(),panels.panels[toName].autohide&&(panels.showing=!0)}var anim={
duration:.15,timingFunction:"cubic-bezier(.10, .10, .25, .90)",immediate:noAnim}
if(win){var diff,width,winExt=win.$altExt||win.$ext,zIndex=winExt.style.zIndex
toWin?autohide?(winExt.style.zIndex=3e3,diff=apf.getWidthDiff(winExt),width=winExt.offsetWidth-diff,winExt.style.minWidth=width+"px",
winExt.style.maxWidth=width+"px","right"==where&&(winExt.style.left=""),anim[where]=CURWIDTH-win.getWidth()-1+"px",
anims.animate(win,anim,onfinish)):(winExt.style.zIndex=1e3,diff=apf.getWidthDiff(winExt),width=winExt.offsetWidth-diff-1,
toWinExt.style.minWidth=width+"px",toWinExt.style.maxWidth=width+"px","right"==where&&(toWinExt.style.left=""),
toWinExt.style[where]=CURWIDTH-win.getWidth()+"px",anim[where]=CURWIDTH+"px",anims.animate(toWin,anim,onfinish)):(winExt.style.minWidth=winExt.offsetWidth-apf.getWidthDiff(winExt)+"px",
winExt.style[where]="",anim.width=CURWIDTH+"px",anims.animateSplitBoxNode(column,anim,onfinish))}else toWin.show(),
column.visible||(column.show(),setTabPadding(1)),toWinExt.style.minWidth=toWidth-apf.getWidthDiff(toWinExt)-CURWIDTH+"px",
toWinExt.style[where]="",anim.width=toWidth+"px",anims.animateSplitBoxNode(column,anim,onfinish)}}function activate(name,noAnim,viaButton){
if(activePanel!=name){draw()
var panel=panels.panels[name]
if(panel&&panel.area===plugin){lastPanel=activePanel,activePanel&&activePanel!=name&&deactivate(!0,noAnim===!0)


var width=(settings.getNumber("state/panels/@width-"+where)||panel.width||WIDTH)+CURWIDTH,firstTime=panel.draw()


noAnim||(noAnim=!settings.getBool("user/general/@animateui")),firstTime&&!noAnim?setTimeout(function(){
animate(lastPanel,name,width,noAnim)}):animate(lastPanel,name,width,noAnim),activePanel=name,emit("showPanel"+uCaseFirst(name),{
lastPanel:lastPanel,button:viaButton}),panel.autohide||settings.set("state/panels/@active-"+where,name),
splitter.show()}}}function deactivate(admin,noAnim,viaButton){if(activePanel){var animSetting=settings.getBool("user/general/@animateui")


admin||(animSetting?(noAnim=0,animate(activePanel)):(column.setWidth(CURWIDTH),anims.emitAnimate({noanim:!0
}))),0===noAnim||admin&&animSetting||getElement(activePanel).hide(),emit("hidePanel"+uCaseFirst(activePanel),{
button:viaButton}),activePanel=null,admin||(settings.set("state/panels/@active-"+where,"none"),splitter.hide())

}}function toggle(name,autohide,viaButton){activePanel!=name?activate(name,null,viaButton):autohide&&lastPanel?activate(lastPanel,null,viaButton):deactivate(null,null,viaButton)

}function setTabPadding(which){"right"==where&&ui.setStyleRule(".editor_tab.morepadding .btnsesssioncontainer","padding-right",which?"14px":"53px")

}function enablePanel(name){var panel=panels.panels[name]
CURWIDTH=BARWIDTH,draw(),bar.visible||(panels.areas[panel.where].activePanel==name?(getElement(name).$ext.style[where]=CURWIDTH+"px",
column.setWidth(column.width+CURWIDTH),activate(name,!0)):(column.setAttribute("minwidth",CURWIDTH),column.setWidth(CURWIDTH)),
bar.show(),column.visible||(column.show(),splitter.hide(),setTabPadding(1))),panel.enable(),settings.set("state/panels/"+panel.name+"/@enabled","true")

}function disablePanel(name,noAnim,keep){var panel=panels.panels[name]
if(panel.disable(),bar){if(bar.childNodes)var hideBar=bar.childNodes.every(function(x){return!x.visible

})
hideBar&&(CURWIDTH=0),keep||panels.areas[panel.where].activePanel!=name||(animating=!noAnim,panels.areas[panel.where].deactivate(null,noAnim)),
hideBar&&setTimeout(function(){if(bar.hide(),panels.areas[panel.where].activePanel){var width=(settings.getNumber("state/panels/@width-"+panel.where)||panel.width||WIDTH)+CURWIDTH


column.setAttribute("minwidth",panel.minWidth+CURWIDTH),column.setWidth(width),column.$int.lastChild.style.left=0,
keep&&panels.areas[panel.where].activePanel==name&&panel.aml.setLeft(0)}else column.hide(),setTabPadding(0)

},animating?150:0),settings.set("state/panels/"+panel.name+"/@enabled","false")}}var column,lastPanel,bar,splitter,animating,plugin=new Plugin("Ajax.org",main.consumes),query="state/panels/@width-"+where,activePanel=null,CURWIDTH=0,drawn=!1,animateCounter=0


return plugin.freezePublicAPI({get activePanel(){return activePanel},get defaultActive(){return defaultActive

},get container(){return column.$ext},get aml(){return column},get width(){return CURWIDTH},draw:draw,
toggle:toggle,activate:activate,deactivate:deactivate,enablePanel:enablePanel,disablePanel:disablePanel
}),plugin.load("area-"+where),plugin}var Plugin=imports.Plugin,layout=imports.layout,anims=imports.anims,ui=imports.ui,menus=imports.menus,settings=imports.settings,uCaseFirst=require("c9/string").uCaseFirst,BARWIDTH=36,WIDTH=200


register(null,{"panels.Area":Area})}return main.consumes=["Plugin","layout","settings","anims","ui","menus"],
main.provides=["panels.Area"],main})


define("plugins/c9.ide.panels/panel",[],function(require,module,exports){function main(options,imports,register){
function Panel(developer,deps,options){function setCommand(options){var command=commands.addCommand({
name:options.name,group:"Panels",hint:options.hint,bindKey:options.bindKey,exec:options.exec||function(){
autohide?panels.activate(plugin.name):panels.isActive(plugin.name)?panels.deactivate(plugin.name):panels.activate(plugin.name),
options.extra&&options.extra.apply(this,arguments)}},plugin)
return mnuItem&&mnuItem.setAttribute("hotkey","commands."+options.name),button&&(button.setAttribute("hotkey","commands."+options.name),
button.setAttribute("tooltip",options.name)),command}function draw(){return!drawn&&(drawn=!0,aml=area.aml.appendChild(new ui.bar({
skin:"panel-bar","class":panelCSSClass||"",visible:!1})),plugin.addElement(aml),emit.sticky("draw",{html:aml.$int,
aml:aml}),aml.$ext.style.zIndex=100,aml.$ext.style.minWidth="",aml.$ext.style.position="absolute",aml.$ext.style.left="left"==where?area.width+"px":0,
aml.$ext.style.top=0,aml.$ext.style.right="right"==where?area.width+"px":0,aml.$ext.style.bottom=0,aml.$display=apf.CSSPREFIX+"Flex",
!0)}function attachTo(toArea){area=toArea
try{aml&&area.aml.appendChild(aml)}catch(e){}plugin.enabled&&enable()}function detach(){disable(),area=null

}function enable(){var container=area.draw()
if(!button){var hotkey=mnuItem&&mnuItem.getAttribute("hotkey")||""
button=new ui.button({skinset:"panels",state:!0,caption:caption,auto:!1,"class":buttonCSSClass||"",hotkey:hotkey,
tooltip:hotkey.slice(9),onmousedown:function(e){e.htmlEvent&&e.htmlEvent.button||panels.areas[where].toggle(plugin.name,autohide,!0)

}}),plugin.addElement(button)}ui.insertByIndex(container,button,index,!1),button.show(),area.activePanel==plugin.name&&button.setValue(!0),
mnuItem.setAttribute("checked",!0)}function disable(){button&&button.hide(),mnuItem.setAttribute("checked",!1)

}function show(){panels.activate(plugin.name)}function hide(){panels.isActive(plugin.name)&&(autohide&&lastPanel?panels.activate(lastPanel):panels.deactivate(plugin.name),
tabs.focussedTab&&tabs.focussedTab.editor&&!panels.showing&&tabs.focussedTab.editor.focus())}var mnuItem,button,area,lastPanel,xpath,where,aml,plugin=new Plugin(developer,deps),emit=plugin.getEmitter(),autohide=options.autohide||!1,index=options.index||100,buttonCSSClass=options.buttonCSSClass,panelCSSClass=options.panelCSSClass,caption=options.caption,width=options.width,minWidth=options.minWidth


plugin.on("load",function(){xpath="state/panels/"+plugin.name,where=settings.get(xpath+"/@where")||options.where||"left",
panels.register(plugin),mnuItem=new ui.item({type:"check",value:plugin.name,onclick:function(){var area=panels.areas[panels.panels[plugin.name].where]


this.checked?area.enablePanel(plugin.name):area.disablePanel(plugin.name)}}),mnuItem.panel=plugin,menus.addItemByPath("Window/"+caption,mnuItem,index,plugin),
panels.on("showPanel"+uCaseFirst(plugin.name),function(e){lastPanel=e.lastPanel,lastPanel&&panels.panels[lastPanel].autohide&&(lastPanel=panels.panels[lastPanel].lastPanel),
button&&button.setValue(!0),emit("show",e)},plugin),panels.on("hidePanel"+uCaseFirst(plugin.name),function(e){
button&&button.setValue(!1),emit("hide")},plugin),settings.on("read",function(){settings.setDefaults(xpath,[["name",plugin.name],["enabled","true"]]),
plugin.disable()
var areas=panels.areas
attachTo(panels.areas[where]),settings.getBool(xpath+"/@enabled")&&(areas[where].enablePanel(plugin.name),
mnuItem.setAttribute("checked",!0)),["left","right"].forEach(function(where){var active=settings.get("state/panels/@active-"+where)

;(!active&&areas[where].defaultActive==plugin.name||active==plugin.name)&&areas[where].activate(plugin.name,!0,"restoreSettings")

})})}),plugin.on("unload",function(){panels.deactivate(plugin.name),button=null,mnuItem=null,button=null,
area=null,lastPanel=null,xpath=null,where=null,drawn=!1,button&&button.destroy(!0,!0),mnuItem&&mnuItem.destroy(!0,!0),
menus.remove("Window/"+caption),panels.unregister(plugin)})
var drawn
return plugin.on("enable",function(){enable()}),plugin.on("disable",function(){disable()}),plugin.freezePublicAPI.baseclass(),
plugin.freezePublicAPI({get lastPanel(){return lastPanel},get autohide(){return autohide},set autohide(value){
autohide=value},get width(){return width},get minWidth(){return minWidth},get aml(){return aml},get container(){
return aml&&aml.$ext},get area(){return area},get where(){return where},get button(){return button},get active(){
return panels.isActive(plugin.name)},_events:["draw","show","hide"],setCommand:setCommand,attachTo:attachTo,
detach:detach,draw:draw,show:show,hide:hide}),plugin}var Plugin=imports.Plugin,panels=imports.panels,menus=imports.menus,ui=imports.ui,commands=imports.commands,settings=imports.settings,tabs=imports.tabManager,uCaseFirst=require("c9/string").uCaseFirst


register(null,{Panel:Panel})}return main.consumes=["Plugin","panels","settings","menus","commands","ui","tabManager"],
main.provides=["Panel"],main})


define("text!plugins/c9.ide.panels/skin.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:bar name="bar">\n        <a:style><![CDATA[]]></a:style>\n    \n        <a:presentation>\n            <a:main container=".">\n                <div class="panelsbar">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    <a:button name="button">\n        <a:style><![CDATA[]]></a:style>\n    \n        <a:presentation>\n            <a:main caption=".">\n                <div class="panelsbutton">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>')


define("plugins/c9.ide.panels/panels",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,layout.findParent(plugin),areas.left=new Area("left",options.defaultActiveLeft,plugin,emit),
areas.right=new Area("right",options.defaultActiveRight,plugin,emit),void plugin.on("draw",draw))}function draw(){
drawn||(drawn=!0,ui.insertSkin({name:"panels",data:require("text!./skin.xml"),"media-path":options.staticPrefix+"/images/",
"icon-path":options.staticPrefix+"/icons/"},plugin),menus.addItemByPath("Window/~",new ui.divider,40,plugin))

}function registerPanel(panel){emit("register",{panel:panel}),panels[panel.name]=panel}function unregisterPanel(panel){
emit("unregister",{panel:panel}),delete panels[panel.name]}function isActive(name){return areas.left.activePanel==name||areas.right.activePanel==name

}function activate(name,noAnim){var options=panels[name]
return!!options&&void areas[options.where].activate(name,noAnim)}function deactivate(name){var options=panels[name]


return!!options&&void areas[options.where].deactivate()}function enablePanel(name){var options=panels[name]


return!!options&&(areas[options.where].enablePanel(name),!0)}function disablePanel(name,noAnim,keep){
var panel=panels[name]
return!!panel&&(areas[panel.where].disablePanel(name,noAnim,keep),!0)}var showing,Plugin=imports.Plugin,ui=imports.ui,menus=imports.menus,layout=imports.layout,Area=imports["panels.Area"],plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),panels={},areas={},loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){Object.keys(panels).forEach(function(name){panels[name].unload()}),Object.keys(areas).forEach(function(name){
areas[name].unload()}),loaded=!1,drawn=!1}),plugin.freezePublicAPI({get activePanels(){var panels=[]
return areas.left.activePanel&&panels.push(areas.left.activePanel),areas.right.activePanel&&panels.push(areas.right.activePanel),
panels},get areas(){return areas},get panels(){return panels},get showing(){return showing},set showing(v){
showing=v},_event:["draw","register","unregister","animate","afterAnimate"],register:registerPanel,unregister:unregisterPanel,
activate:activate,deactivate:deactivate,enablePanel:enablePanel,disablePanel:disablePanel,isActive:isActive
}),register(null,{panels:plugin})}return main.consumes=["Plugin","ui","panels.Area","menus","layout"],
main.provides=["panels"],main})


define("text!plugins/c9.ide.language.core/outline.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:codebox id="textbox" realtime="true" skin="codebox" clearbutton="true" focusselect="true" singleline="true" \n        style="position:absolute;height:27px;left:10px;top:10px;right:10px" />\n    <a:bar id="outlineTree" top="47" right="0" left="10" bottom="0" class="outline" />\n</a:application>')


define("plugins/c9.ide.language.core/outlinedp",[],function(require,exports,module){var oop=require("ace/lib/oop"),escapeHTML=require("ace/lib/lang").escapeHTML,BaseClass=require("ace_tree/data_provider"),DataProvider=function(root){
BaseClass.call(this,root||{}),this.rowHeight=20,Object.defineProperty(this,"loaded",{get:function(){return this.visibleItems.length

}})}
return oop.inherits(DataProvider,BaseClass),function(){this.$sortNodes=!1,this.getEmptyMessage=function(){
return"No outline available for the active view"},this.setRoot=function(root){Array.isArray(root)&&(root={
items:root}),this.root=root||{},this.$selectedNode=this.root,this.visibleItems=[],this.open(this.root,!0),
this._signal("change")},this.select=function(index){this.selectNode(0===index?this.root:{index:index})

},this.getIconHTML=function(node){return"<span class='icon "+node.icon+"'></span>"},this.getClassName=function(node){
return node.className||""},this.getCaptionHTML=function(node){var value=escapeHTML(node.name)
if(this.filter){var re=new RegExp("("+this.reFilter+")","i")
value=value.replace(re,"<strong>$1</strong>")}return value+(node.meta?"<code style='color:gray;'>"+node.meta+"</code>":"")

}}.call(DataProvider.prototype),DataProvider})


define("text!plugins/c9.ide.language.core/outline.css",[],"")


define("text!plugins/c9.ide.language.core/outline_template.js",[],'define(function(require, exports, module) {\n\nvar jsonalyzer = require("plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_worker");\nvar PluginBase = require("plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_base_handler");\nvar ctagsUtil = require("plugins/c9.ide.language.jsonalyzer/worker/ctags/ctags_util");\n\nvar CONFIG = {{CONFIG}};\nvar TAGS = CONFIG.tags;\nvar GUESS_FARGS = CONFIG.guess_fargs;\nvar EXTRACT_DOCS = CONFIG.extract_docs;\n\nvar handler = module.exports = Object.create(PluginBase);\n\nhandler.languages = CONFIG.languages;\n\nhandler.extensions = CONFIG.extensions;\n\nhandler.analyzeCurrent = function(path, doc, ast, options, callback) {\n    if (doc === "")\n        return callback(null, {});\n        \n    if (doc.length > jsonalyzer.getMaxFileSizeSupported())\n        return callback(null, {});\n    \n    var results = {};\n    TAGS.forEach(function(tag) {\n        if (tag.kind === "import")\n            return;\n        ctagsUtil.findMatchingTags(path, doc, tag, GUESS_FARGS, EXTRACT_DOCS, results);\n    });\n\n    callback(null, { properties: results });\n};\n\nhandler.analyzeOthers = handler.analyzeCurrentAll;\n\nhandler.findImports = function(path, doc, ast, options, callback) {\n    callback(null, ctagsUtil.findMatchingOpenFiles(path));\n};\n\n});')


define("plugins/c9.ide.language.core/outline",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0,plugin.setCommand({name:"outline",hint:"search for a definition and jump to it",bindKey:{mac:"Command-Shift-E",
win:"Ctrl-Shift-E"},exec:function(){isActive?focussed?(panels.deactivate("outline"),tabs.focussedTab&&tabs.focussedTab.aml.focus()):textbox.focus():panels.activate("outline")

}}),isActive=panels.isActive("outline"),menus.addItemByPath("Goto/Goto Symbol...",new apf.item({command:"outline"
}),110,plugin),language.getWorker(function(err,worker){worker.on("outline",onOutlineData)}),tabs.on("open",function(e){
var tab=e.tab
isActive&&(tab.path||tab.document.meta.newfile)&&tab.editor.ace&&tab==tabs.focussedTab&&(originalTab||(originalTab=e.tab),
updateOutline(!0))}),tabs.on("focusSync",onTabFocus),tabs.on("tabDestroy",function(e){isActive&&e.last&&clear()

})
var cursorTimeout
language.on("cursormove",function(){!cursorTimeout&&isActive&&(cursorTimeout=setTimeout(function moveSelection(){
if((dirty||scheduled)&&isActive)return setTimeout(moveSelection,50)
try{handleCursor()}finally{cursorTimeout=null}},100))}),panels.on("showPanelOutline",function(e){plugin.autohide=!e.button

},plugin),panels.on("hidePanelOutline",function(e){plugin.autohide=!0},plugin),isActive&&tabs.focussedTab&&(plugin.autohide=!1,
updateOutline(),onTabFocus({tab:tabs.focussedTab})),updateInitialOutline()
var wasActive,onsel=function(){if(navigate.tree.isFocused()){var node=navigate.tree.selection.getCursor()


node&&onSelect(node)}}
navigate.on("outline",function(e){var value=e.value
tdOutline||createProvider(),tabs.focusTab(e.tab,!0),hasNavigateOutline=!0,wasActive=isActive,isActive=!0,
onTabFocus(e,!0),navigate.tree.off("changeSelection",onsel),navigate.tree.setDataProvider(tdOutline),
navigate.tree.on("changeSelection",onsel),renderOutline(!0,value),ui.setStyleClass(navigate.tree.container,"outline")

}),navigate.on("outline.stop",function(e){hasNavigateOutline=!1,renderOutline(!0),navigate.tree.off("changeSelection",onsel),
ui.setStyleClass(navigate.tree.container,"",["outline"]),isActive=wasActive})}function updateInitialOutline(){
setTimeout(updateOutline.bind(null,!0),4e3),setTimeout(updateOutline.bind(null,!0),6e3),setTimeout(updateOutline.bind(null,!0),8e3),
setTimeout(updateOutline.bind(null,!0),1e4),setTimeout(updateOutline.bind(null,!0),2e4)}function onTabFocus(event,force){
var session,tab=event.tab
if(originalTab!=tab||force===!0){if(originalTab&&(session=originalTab.document.getSession().session,session&&session.off("changeMode",onChange),
session&&session.off("change",onChange)),!tab.path&&!tab.document.meta.newfile||"ace"!==tab.editorType)return originalTab=null,
clear(tab.editorType)
if(!tab.editor)return tab.document.once("setEditor",onTabFocus.bind(null,event))
session=tab.document.getSession().session,session&&session.on("changeMode",onChange),session&&session.on("change",onChange),
originalTab=tab,isActive&&updateOutline(!0)}}function onChange(){isActive&&originalTab==tabs.focussedTab&&updateOutline()

}function handleCursor(ignoreFocus){if(isActive&&originalTab&&originalTab==tabs.focussedTab){var ace=originalTab.editor.ace


if(!outline||!ace.selection.isEmpty()||!tree||tree.isFocused()&&!ignoreFocus)return
var selected=findCursorInOutline(outline,ace.getCursorPosition())
if(tdOutline.$selectedNode==selected)return
selected?tree.selection.selectNode(selected):tree.selection.selectNode(0),tree.renderer.scrollCaretIntoView(null,.5)

}}function createProvider(){ui.insertCss(require("text!./outline.css"),staticPrefix,plugin),tdOutline=new TreeData,
tdOutline.staticPrefix=staticPrefix}function draw(options){function onAllBlur(e){if(winOutline.visible&&plugin.autohide){
var to=e.toElement
to&&!apf.isChildOf(winOutline,to,!0)&&setTimeout(function(){plugin.hide()},10)}}function onFocus(){focussed=!0,
ui.setStyleClass(treeParent.$int,"focus")
var tab=tabs.focussedTab,ace=tab&&tab.editor.ace
if(ace){var cursor=ace.getCursorPosition()
originalLine=cursor.row+1,originalColumn=cursor.column}}function onBlur(){focussed=!1,ui.setStyleClass(treeParent.$int,"",["focus"])

}if(!drawn){drawn=!0,ui.insertMarkup(options.aml,markup,plugin),treeParent=plugin.getElement("outlineTree"),
textbox=plugin.getElement("textbox"),winOutline=options.aml
var key=commands.getPrettyHotkey("outline")
textbox.setAttribute("initial-message","Filter ("+key+")"),tree=new Tree(treeParent.$int),tree.renderer.setScrollMargin(0,10),
tree.renderer.scrollBarV.$minWidth=10,tdOutline||createProvider(),tree.setDataProvider(tdOutline),layout.on("resize",function(){
tree.resize()},plugin),tree.textInput=textbox.ace.textInput,textbox.ace.commands.addCommands([{bindKey:"ESC",
exec:function(){if(!originalTab||!originalTab.loaded)return clear()
if(originalLine){var ace=originalTab&&originalTab.editor.ace
ace.gotoLine(originalLine,originalColumn,settings.getBool("editors/code/@animatedscroll")),originalLine=originalColumn=null

}textbox.setValue(""),tabs.focusTab(originalTab)}},{bindKey:"Up",exec:function(){tree.execCommand("goUp")

}},{bindKey:"Down",exec:function(){tree.execCommand("goDown")}},{bindKey:"Enter",exec:function(){onSelect(),
textbox.setValue(""),originalTab.loaded&&tabs.focusTab(originalTab)}}]),textbox.ace.on("input",function(e){
renderOutline(),onSelect()}),tree.on("userSelect",function(){tree.isFocused()&&onSelect()}),apf.addEventListener("movefocus",onAllBlur),
textbox.ace.on("blur",onBlur),textbox.ace.on("focus",onFocus),language.getWorker(function(err,_worker){
worker=_worker,timer=setInterval(function(){dirty&&updateOutline(!0)},1e3)})}}function updateOutline(now){
if(isActive&&(dirty=!0,now&&tabs.focussedTab&&!scheduled)){if(!worker)return language.getWorker(function(err,_worker){
worker=_worker,updateOutline(!0)})
setTimeout(function(){dirty=!1,worker.emit("outline",{data:{ignoreFilter:!1,path:tabs.focussedTab&&tabs.focussedTab.path
}})}),scheduled=!0,clearTimeout(scheduleWatcher),scheduleWatcher=setTimeout(function(){scheduled=!1},1e4)

}}function findCursorInOutline(json,cursor){function findPrecise(json,cursor){for(var i=0;i<json.length;i++){
var elem=json[i]
if(!(cursor.row<elem.pos.sl||cursor.row>(elem.pos.el||elem.pos.sl))){var childResult=elem.items&&findPrecise(elem.items,cursor)


return childResult||elem}}return null}function findApprox(json,cursor){for(var result,i=0;i<json.length;i++){
var elem=json[i],childResult=elem.items&&findApprox(elem.items,cursor)
childResult?result=childResult:elem.pos.sl<=cursor.row&&(result=elem)}return result}return isUnordered&&findPrecise(json,cursor)||findApprox(json,cursor)

}function onOutlineData(event){if(scheduled=!1,!hasNavigateOutline){var data=event.data
if(data.error)return void console.error("Oh noes! "+data.error)
var tab=tabs.focussedTab,editor=tab&&tab.editor
tab&&(tab.path||tab.document.meta.newfile)&&editor.ace&&(dirty||tab.path!==data.path?updateOutline(!0):clearTimeout(scheduleWatcher),
fullOutline=event.data.body,isUnordered=event.data.isUnordered,renderOutline(event.data.showNow))}}function renderOutline(ignoreFilter,filter){
var tab=tabs.focussedTab,editor=tab&&tab.editor
if(tab&&(tab.path||tab.document.meta.newfile)&&editor.ace){originalTab=tab,filter||(filter=ignoreFilter?"":textbox?textbox.getValue():lastFilter),
outline=search.treeSearch(fullOutline,filter,!0),lastFilter=filter
var ace=editor.ace,selected=findCursorInOutline(outline,ace.getCursorPosition())
return tdOutline.setRoot(outline),tdOutline.selected=selected,tdOutline.filter=filter,tdOutline.reFilter=escapeHTML(util.escapeRegExp(filter)),
filter?(tree&&tree.select(tree.provider.getNodeAtIndex(0)),hasNavigateOutline&&navigate.tree.select(navigate.tree.provider.getNodeAtIndex(0))):selected&&tdOutline.selection.selectNode(selected),
drawn&&(tree.resize(),handleCursor(ignoreFocusOnce),ignoreFocusOnce=!1),selected}}function onSelect(node){
if(node||(node=tree.selection.getCursor()),node){if(!originalTab.loaded)return clear()
var ace=originalTab.editor.ace,pos=jumptodef.addUnknownColumn(ace,node.pos,node.name),displayPos=node.displayPos?jumptodef.addUnknownColumn(ace,node.displayPos,node.name):void 0


scrollToDefinition(ace,pos.sl,pos.el)
var range=displayPos?new Range(displayPos.sl,displayPos.sc,displayPos.el||displayPos.sl,displayPos.el>displayPos.sl?displayPos.ec||0:displayPos.ec||displayPos.sc):new Range(pos.sl,pos.sc,pos.sl,pos.sc)


ace.session.unfold(range),ace.selection.setSelectionRange(range)}}function clear(type){textbox&&(textbox.setValue(""),
"terminal"===type?tdOutline.setRoot([{icon:"property",name:"Terminal"}]):tdOutline.setRoot({}))}function scrollToDefinition(ace,line,lineEnd){
var lineHeight=ace.renderer.$cursorLayer.config.lineHeight,lineVisibleStart=ace.renderer.scrollTop/lineHeight,linesVisible=ace.renderer.$size.height/lineHeight


if(lineEnd=Math.min(lineEnd,line+linesVisible),!(lineVisibleStart<=line&&lineEnd<=lineVisibleStart+linesVisible)){
var SAFETY=1.5
ace.scrollToLine(Math.round((line+lineEnd)/2-SAFETY),!0)}}function addOutlinePlugin(path,contents,plugin){
var template=require("text!./outline_template.js")
template=template.replace("{{CONFIG}}",function(){return contents}),jsonalyzer.registerWorkerHandler(path,template),
plugin.addOther(function(){jsonalyzer.unregisterWorkerHandler&&jsonalyzer.unregisterWorkerHandler(path)

})}var tree,tdOutline,winOutline,textbox,treeParent,originalLine,originalColumn,originalTab,focussed,isActive,outline,timer,dirty,scheduled,scheduleWatcher,isUnordered,lastFilter,hasNavigateOutline,worker,Panel=imports.Panel,settings=imports.settings,ui=imports.ui,util=imports.util,menus=imports.menus,panels=imports.panels,layout=imports.layout,navigate=imports.navigate,tabs=imports.tabManager,language=imports.language,commands=imports.commands,jsonalyzer=imports.jsonalyzer,jumptodef=imports["language.jumptodef"],escapeHTML=require("ace/lib/lang").escapeHTML,Range=require("ace/range").Range,search=require("../c9.ide.navigate/search"),markup=require("text!./outline.xml"),Tree=require("ace_tree/tree"),TreeData=require("./outlinedp"),plugin=new Panel("Ajax.org",main.consumes,{
index:options.index||50,width:250,caption:"Outline",buttonCSSClass:"outline",minWidth:130,where:options.where||"right",
autohide:!0}),fullOutline=[],ignoreFocusOnce=!1,staticPrefix=options.staticPrefix,loaded=!1,drawn=!1
plugin.on("load",function(){load()}),plugin.on("draw",function(e){load(),draw(e)}),plugin.on("show",function(e){
isActive=!0,tree.resize(),plugin.autohide=!e.button,"restoreSettings"!==e.button&&(textbox.focus(),textbox.select(),
updateOutline(!0),handleCursor(!0),ignoreFocusOnce=!0)}),plugin.on("hide",function(e){isActive=!1}),plugin.on("unload",function(){
loaded=!1,drawn=!1,fullOutline=[],ignoreFocusOnce=!1,tree=null,tdOutline=null,winOutline=null,textbox=null,
treeParent=null,originalLine=null,originalColumn=null,originalTab=null,focussed=null,isActive=null,outline=null,
timer=null,dirty=null,scheduled=null,scheduleWatcher=null,isUnordered=null,lastFilter=null,hasNavigateOutline=null,
worker=null,clearInterval(timer)}),plugin.freezePublicAPI({addOutlinePlugin:addOutlinePlugin}),register(null,{
outline:plugin})}return main.consumes=["Panel","c9","settings","ui","menus","panels","tabManager","language","util","language.jumptodef","navigate","layout","commands","jsonalyzer"],
main.provides=["outline"],main})


define("text!plugins/c9.ide.keys/panel.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:codebox id="txtFilter" realtime="true" skin="codebox" clearbutton="true"\n      focusselect="true" height="27" left="10" top="10" right="10" singleline="true" />\n    <a:bar id="commandsList" style="position:absolute;top:47px;right:10px;left:10px;bottom:0" class="searchresults" />\n</a:application>')


define("ace_tree/list_data",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),DataProvider=require("./data_provider"),ListData=function(array){this.visibleItems=array||[],
this._selectStore=Object.create(null)}
return oop.inherits(ListData,DataProvider),function(){this.setRoot=function(array){this.visibleItems=array||[],
this._signal("change")},this.getDataRange=function(rows,columns,callback){var view=this.visibleItems.slice(rows.start,rows.start+rows.length)


return callback(null,view,!1),view},this.getRange=function(top,bottom){var start=Math.floor(top/this.rowHeight),end=Math.ceil(bottom/this.rowHeight)+1,range=this.visibleItems.slice(start,end)


return range.count=start,range.size=this.rowHeight*range.count,range},this.getTotalHeight=function(top,bottom){
return this.rowHeight*this.visibleItems.length},this.getNodePosition=function(node){var i=node?node.index:0,top=i*this.rowHeight,height=this.rowHeight


return{top:top,height:height}},this.findItemAtOffset=function(offset){var index=Math.floor(offset/this.rowHeight)


return this.getNodeAtIndex(index)},this.getNodeAtIndex=function(index){var id=this.visibleItems[index]


return this._selectStore[id]||{id:id,index:index,isSelected:this.isSelected(id)}},this.getIndexForNode=function(node){
return"string"==typeof node?this.visibleItems.indexOf(node):node?this.visibleItems[node.index]===node.id?node.index:this.visibleItems.indexOf(node.id):-1

},this.isSelected=function(node){if("object"==typeof node)var id=node.id
else if("number"==typeof node)var id=this.visibleItems[node]
else var id=node
return!!this._selectStore[id]},this.setSelected=function(node,val){val?this._selectStore[node.id]=node:delete this._selectStore[node.id],
node.isSelected=val}}.call(ListData.prototype),ListData})


define("plugins/c9.ide.keys/dataprovider",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),Base=require("ace_tree/list_data"),ListData=function(commands,tabManager){
Base.call(this),this.classes={},this.innerRowHeight=34,this.rowHeight=42,this.commands=commands,this.tabManager=tabManager,
this.updateData(),Object.defineProperty(this,"loaded",{get:function(){return this.visibleItems.length

}})}
return oop.inherits(ListData,Base),function(){var cache
this.updateData=function(subset){function sort(a,b){var commands=this.commands.commands,ca=commands[a],cb=commands[b]


if(cache[a]||(cache[a]=!ca.isAvailable||ca.isAvailable(editor,{})),cache[b]||(cache[b]=!cb.isAvailable||cb.isAvailable(editor,{})),
cache[a]&&!cache[b])return-1
if(cache[b]&&!cache[a])return 1
var namea=(ca.group||"General")+a,nameb=(cb.group||"General")+b
return namea>nameb?1:-1}this.visibleItems=subset||Object.keys(this.commands.commands),cache={}
var tab=this.tabManager.focussedTab,editor=tab&&tab.editor
this.visibleItems.sort(sort.bind(this)),this._signal("change")},this.getEmptyMessage=function(){return this.keyword?"No commands found that match '"+this.keyword+"'":"Loading command list. One moment please..."

},this.replaceStrong=function(value){if(!value)return""
var i,keyword=(this.keyword||"").replace(/\*/g,"")
if((i=value.lastIndexOf(keyword))!==-1)return value.substring(0,i)+"<strong>"+keyword+"</strong>"+value.substring(i+keyword.length)


var result=this.search.matchPath(value,keyword)
return result.length?(result.forEach(function(part,i){part.match?result[i]="<strong>"+part.val+"</strong>":result[i]=part.val

}),result.join("")):value},this.renderRow=function(row,html,config){var key=this.visibleItems[row],command=this.commands.commands[key],name=command.displayName||key,isSelected=this.isSelected(row),available=!0,keys=(command.bindKey||0)[this.commands.platform]||""


apf.isMac&&(keys=apf.hotkeys.toMacNotation(keys)),html.push("<div class='item "+(available&&isSelected?"selected ":"")+(available&&this.getClassName(row))+(available?"":" notAvailable")+"' style='height:"+this.innerRowHeight+"px'><span class='caption'>"+this.replaceStrong(name)+"</span><span class='keys'>"+keys+"</span><span class='path'>"+(command.group||"General")+"</span></div>")

},this.getText=function(node){var command=this.commands.commands[node.id]
if(!command)return""
var keys=(command.bindKey||0)[this.commands.platform]||""
return(command.group||"General")+": "+(command.displayName||command.name||node.id)+(command.hint?"\n"+command.hint:"")+(keys?"\n"+keys:"")+"\nPress F2 to change keybinding"

},this.getClassName=function(row){return this.classes[row]||""},this.setClass=function(node,className,include){
include?this.classes[node.index]=className:delete this.classes[node.index],this._signal("changeClass")

}}.call(ListData.prototype),ListData})


define("text!plugins/c9.ide.keys/style.css",[],"")


define("plugins/c9.ide.keys/panel",[],function(require,exports,module){function main(options,imports,register){
function load(){plugin.setCommand({name:"commands",hint:"search for a command and execute it",bindKey:{
mac:"Command-.",win:"Ctrl-."}}),panels.on("afterAnimate",function(){panels.isActive("commands.panel")&&tree&&tree.resize()

}),menus.addItemByPath("Goto/Goto Command...",new ui.item({command:"commands"}),250,plugin)}function draw(options){
function forwardToTree(){tree.execCommand(this.name)}function onblur(e){if(winCommands.visible){var to=e.toElement


to&&!apf.isChildOf(winCommands,to,!0)&&"menu"!=to.localName&&setTimeout(function(){plugin.hide()},10)

}}if(!drawn){drawn=!0,ui.insertMarkup(options.aml,markup,plugin),ui.insertCss(require("text!./style.css"),plugin)


var treeParent=plugin.getElement("commandsList")
txtFilter=plugin.getElement("txtFilter"),winCommands=options.aml,tree=new Tree(treeParent.$int),ldSearch=new ListData(commands,tabs),
ldSearch.search=search,tree.renderer.setScrollMargin(0,10),layout.on("resize",function(){tree.resize()

},plugin)
var key=commands.getPrettyHotkey("commands")
txtFilter.setAttribute("initial-message",key),tree.textInput=txtFilter.ace.textInput,txtFilter.ace.commands.addCommands([{
bindKey:"ESC",exec:function(){plugin.hide()}},{bindKey:"Enter",exec:function(){execCommand(!0)}},{bindKey:"Shift-Enter",
exec:function(){execCommand(!1,!0)}},{bindKey:"F2",exec:function(){showKeyEditor()}}]),txtFilter.ace.commands.addCommands(["centerselection","goToStart","goToEnd","pageup","gotopageup","scrollup","scrolldown","goUp","goDown","selectUp","selectDown","selectMoreUp","selectMoreDown"].map(function(name){
var command=tree.commands.byName[name]
return{name:command.name,bindKey:command.editorKey||command.bindKey,exec:forwardToTree}})),tree.on("click",function(ev){
var e=ev.domEvent
e.shiftKey||e.metaKey||e.ctrlKey||e.altKey||1===tree.selection.getSelectedNodes().length&&execCommand(!0)

}),txtFilter.ace.on("input",function(e){var val=txtFilter.getValue()
filter(val),settings.set("state/commandPanel/@value",val)}),apf.addEventListener("movefocus",onblur),
setTimeout(function(){txtFilter.focus()}),tree.setDataProvider(ldSearch),tree.selection.$wrapAround=!0


var val=settings.get("state/commandPanel/@value")
val&&txtFilter.ace.setValue(val)}}function showKeyEditor(){commands.exec("openpreferences",null,{panel:"preferences.keybindings"
})}function filter(keyword,nosel){keyword=keyword.replace(/\*/g,""),ldSearch.keyword=keyword
var searchResults,names=Object.keys(commands.commands)
keyword?(tree.provider.setScrollTop(0),searchResults=search.fileSearch(names,keyword)):searchResults=names,
lastSearch=keyword,searchResults&&ldSearch.updateData(searchResults),!nosel&&searchResults.length&&tree.select(tree.provider.getNodeAtIndex(0))

}function execCommand(noanim,nohide){var nodes=tree.selection.getSelectedNodes()
nohide||plugin.hide()
for(var i=0,l=nodes.length;i<l;i++){var name=nodes[i].id
commands.exec(name)}}var winCommands,txtFilter,tree,ldSearch,lastSearch,Panel=imports.Panel,ui=imports.ui,tabs=imports.tabManager,menus=imports.menus,panels=imports.panels,layout=imports.layout,commands=imports.commands,settings=imports.settings,markup=require("text!./panel.xml"),search=require("../c9.ide.navigate/search"),Tree=require("ace_tree/tree"),ListData=require("./dataprovider"),plugin=new Panel("Ajax.org",main.consumes,{
index:options.index||300,caption:"Commands",buttonCSSClass:"commands",minWidth:150,autohide:!0,where:options.where||"left"
}),drawn=!1
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("show",function(e){txtFilter.focus(),txtFilter.select()}),
plugin.on("hide",function(e){tabs.preview({cancel:!0})}),plugin.on("unload",function(){drawn=!1}),plugin.freezePublicAPI({
get tree(){return tree}}),register(null,{"commands.panel":plugin})}return main.consumes=["Panel","ui","menus","panels","commands","tabManager","layout","settings"],
main.provides=["commands.panel"],main})


define("text!plugins/c9.ide.navigate/navigate.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:codebox id="txtGoToFile" realtime="true" skin="codebox" clearbutton="true" focusselect="true" singleline="true" class="navigate-search" />\n    <a:bar id="navigateList" class="searchresults navigate-list" />\n</a:application>')


define("plugins/c9.ide.navigate/dataprovider",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),Base=require("ace_tree/list_data"),escapeHTML=require("ace/lib/lang").escapeHTML,ListData=function(array){
Base.call(this),this.classes={},this.innerRowHeight=34,this.rowHeight=42,Object.defineProperty(this,"loaded",{
get:function(){return this.visibleItems.length}})}
return oop.inherits(ListData,Base),function(){this.updateData=function(array){this.visibleItems=array||[],
this._signal("change")},this.isLoading=function(){},this.getEmptyMessage=function(){return this.keyword?"No files found that match '"+this.keyword+"'":this.isLoading()?"Loading file list. One moment please...":"No files found."

},this.replaceStrong=function(value){if(!value)return""
var keyword=(this.keyword||"").replace(/\*/g,""),i=value.lastIndexOf(keyword)
if(i!==-1)return escapeHTML(value.substring(0,i))+"<strong>"+escapeHTML(keyword)+"</strong>"+escapeHTML(value.substring(i+keyword.length))


var result=this.search.matchPath(value,keyword)
return result.length?(result.forEach(function(part,i){part.match?result[i]="<strong>"+escapeHTML(part.val)+"</strong>":result[i]=escapeHTML(part.val)

}),result.join("")):escapeHTML(value)},this.renderRow=function(row,html,config){var path=this.visibleItems[row],isSelected=this.isSelected(row),filename=path.substr(path.lastIndexOf("/")+1)


html.push("<div class='item "+(isSelected?"selected ":"")+this.getClassName(row)+"' style='height:"+this.innerRowHeight+"px'><span>"+this.replaceStrong(filename)+"</span><span class='path'>"+this.replaceStrong(path)+"</span></div>")

},this.getClassName=function(row){return this.classes[row]||""},this.setClass=function(node,className,include){
include?this.classes[node.index]=className:delete this.classes[node.index],this._signal("changeClass")

}}.call(ListData.prototype),ListData})


define("text!plugins/c9.ide.navigate/style.css",[],"")


define("plugins/c9.ide.navigate/navigate",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0
var command=plugin.setCommand({name:"navigate",hint:"search for a filename, line or symbol and jump to it",
bindKey:{mac:"Command-E|Command-P",win:"Ctrl-E"},extra:function(editor,args,e){args&&args.keyword&&(txtGoToFile.setValue(args.keyword),
filter(args.keyword)),args&&"click"!==args.source&&analytics.log("Opened Navigate using shortcut")}})


commands.addCommand({name:"navigate_altkey",hint:"search for a filename, line or symbol and jump to it",
bindKey:{mac:"Command-O",win:"Ctrl-O"},group:"Panels",exec:command.exec},plugin),panels.on("afterAnimate",function(){
panels.isActive("navigate")&&tree&&tree.resize()}),menus.addItemByPath("Goto/Goto Anything...",new ui.item({
command:"navigate"}),100,plugin),settings.on("read",function(){settings.setDefaults("user/general",[["preview-navigate","false"]])

},plugin),prefs.add({General:{"Tree & Navigate":{"Enable Preview on Navigation":{type:"checkbox",position:2e3,
path:"user/general/@preview-navigate"}}}},plugin)
var quickUpdate=markDirty.bind(null,null,2e3),newfile=function(e){arrayCache.indexOf(e.path)!=-1||e.path.match(/(?:^|\/)\./)||e.path.match(/\/(?:state|user|project)\.settings$/)||arrayCache.push(e.path)

}
fs.on("afterWriteFile",newfile),fs.on("afterSymlink",newfile)
var rmfile=function(e){var idx=arrayCache.indexOf(e.path)
~idx&&arrayCache.splice(idx,1)}
fs.on("afterUnlink",rmfile),fs.on("afterRmfile",rmfile)
var rmdir=function(e){for(var path=e.path,len=path.length,i=arrayCache.length-1;i>=0;i--)arrayCache[i].substr(0,len)==path&&arrayCache.splice(i,1)

}
fs.on("afterRmdir",rmdir),fs.on("afterCopy",quickUpdate),fs.on("afterMkdir",quickUpdate),fs.on("afterMkdirP",quickUpdate),
fs.on("afterRename",function(e){rmfile(e),newfile({path:e.args[1]})}),watcher.on("delete",quickUpdate),
watcher.on("directory",quickUpdate),filetree.on("refresh",markDirty),fsCache.on("setShowHidden",quickUpdate),
loadListAtInit&&updateFileCache()}function offlineHandler(e){e.state&c9.STORAGE?txtGoToFile.enable():txtGoToFile.ace.isFocused()||txtGoToFile.disable()

}function draw(options){function forwardToTree(){cleanInput(),tree.execCommand(this.name)}function onblur(e){
if(winGoToFile&&winGoToFile.visible){var to=e.toElement
!to||apf.isChildOf(winGoToFile,to,!0)||lastPreviewed&&tabs.previewTab&&tabs.previewTab===lastPreviewed&&(apf.isChildOf(lastPreviewed.aml.relPage,to,!0)||lastPreviewed.aml==to)||"menu"!=to.localName&&setTimeout(function(){
plugin.hide()},10)}}if(!drawn){drawn=!0,ui.insertMarkup(options.aml,markup,plugin),ui.insertCss(require("text!./style.css"),plugin)


var treeParent=plugin.getElement("navigateList")
txtGoToFile=plugin.getElement("txtGoToFile"),winGoToFile=options.aml,tree=new Tree(treeParent.$int),ldSearch=new ListData(arrayCache),
ldSearch.search=search,ldSearch.isLoading=function(){return updating},tree.setDataProvider(ldSearch),
tree.renderer.setScrollMargin(0,10),layout.on("resize",function(){tree.resize()},plugin),tree.textInput=txtGoToFile.ace.textInput


var key=commands.getPrettyHotkey("navigate")
txtGoToFile.setAttribute("initial-message",key),txtGoToFile.ace.commands.addCommands([{bindKey:"ESC",
exec:function(){plugin.hide()}},{bindKey:"Enter",exec:function(){openFile(!0)}},{bindKey:"Shift-Enter",
exec:function(){openFile(!1,!0)}},{bindKey:"Shift-Space",exec:function(){previewFile(!0)}}]),txtGoToFile.ace.commands.addCommands(["centerselection","goToStart","goToEnd","pageup","gotopageup","pagedown","gotopageDown","scrollup","scrolldown","goUp","goDown","selectUp","selectDown","selectMoreUp","selectMoreDown"].map(function(name){
var command=tree.commands.byName[name]
return{name:command.name,bindKey:command.editorKey||command.bindKey,exec:forwardToTree}})),tree.on("click",function(ev){
var e=ev.domEvent
e.shiftKey||e.metaKey||e.ctrlKey||e.altKey||1===tree.selection.getSelectedNodes().length&&openFile(!0)

}),tree.selection.$wrapAround=!0,txtGoToFile.ace.on("input",onInput),tree.selection.on("change",function(){
previewFile()}),apf.addEventListener("movefocus",onblur),setTimeout(function(){txtGoToFile.focus()},10),
c9.on("stateChange",offlineHandler,plugin),offlineHandler({state:c9.status})}}function onInput(updatePreview){
var parts,tab,val=txtGoToFile.getValue()
return cleaning?void(cleaning=!1):(~val.indexOf("@")?(parts=val.split("@"),parts[0]?(lastSearch!=parts[0]&&filter(parts[0]),
updatePreview!==!1&&previewFile(!0),tab=lastPreviewed||tabs.focussedTab,tab&&(emit("outline",{value:parts[1],
tab:tab}),intoOutline=!0)):(tab=tabs.focussedTab,tab&&(emit("outline",{value:parts[1],tab:tab}),intoOutline=!0))):(intoOutline&&stopOutline(),
~val.indexOf(":")&&(parts=/^(.*?):(\d*)(?::(\d+))?$/g.exec(val)),parts?parts[1]?(lastSearch!=parts[1]&&filter(parts[1]),
updatePreview!==!1&&previewFile(!0),tab=lastPreviewed||tabs.focussedTab,tab&&parts[2]&&tab.editor.ace.gotoLine(parts[2],parts[3])):(tab=tabs.focussedTab,
tab&&parts[2]&&tab.editor.ace.gotoLine(parts[2],parts[3])):updatePreview!==!1&&filter(val)),void(dirty&&val.length>0&&ldSearch.loaded&&(dirty=!1,
updateFileCache(!0))))}function reloadResults(){if(!winGoToFile){if(isReloadScheduled)return
return isReloadScheduled=!0,void plugin.once("draw",function(){isReloadScheduled=!1,reloadResults()})

}if(!winGoToFile.visible)return void winGoToFile.on("prop.visible",function visible(e){e.value&&(reloadResults(),
winGoToFile.off("prop.visible",visible))})
var sel=tree.selection.getSelectedNodes()
lastSearch?filter(lastSearch,sel.length,!0):ldSearch.updateData(arrayCache)}function markDirty(options,timeout){
var path=options&&options.path||""
if(!path||fsCache.showHidden||"."!=path.charAt(0)){if(timeout<=0)return clearTimeout(timer),void(timeout<0?timer=setTimeout(function(){
updateFileCache(!0)},-1*timeout):updateFileCache(!0))
dirty=!0,panels.isActive("navigate")&&(clearTimeout(timer),timer=setTimeout(function(){updateFileCache(!0)

},timeout||6e4))}}function updateFileCache(isDirty){clearTimeout(timer),updating||c9.readOnly||(updating=!0,
find.getFileList({path:"/",nocache:isDirty,hidden:fsCache.showHidden,buffer:!0},function(err,data){err?console.error(err):arrayCache=data.trim().split("\n"),
updating=!1,reloadResults()}),dirty=!1)}function stopOutline(){intoOutline&&(emit("outline.stop"),tree.setDataProvider(ldSearch),
intoOutline=!1)}function cleanInput(){var value=txtGoToFile.getValue()
value.match(/[:\@]/)&&(cleaning=!0,txtGoToFile.setValue(value.split(":")[0].split("@")[0]))}function filter(keyword,nosel,clear){
if(keyword=keyword.replace(/\*/g,"").replace(/^\.\//,""),!arrayCache.length)return void(lastSearch=keyword)


ldSearch.keyword=keyword
var searchResults
if(keyword){tree.provider.setScrollTop(0)
var base
base=lastSearch&&!clear&&keyword.substr(0,lastSearch.length)==lastSearch?lastResults:arrayCache,searchResults=search.fileSearch(base,keyword)

}else{var result=arrayCache.slice()
tabs.getTabs().forEach(function(tab){if(tab.path&&!tab.document.meta.preview){var idx=result.indexOf(tab.path)


idx>-1&&(result.splice(idx,1),result.unshift(tab.path))}}),searchResults=result}if(lastSearch=keyword,
lastResults=searchResults.newlist,searchResults&&ldSearch.updateData(searchResults),!nosel&&searchResults.length){
var first=-1
if(keyword){first=0
for(var openTabs=tabs.getTabs(),hash={},i=openTabs.length-1;i>=0;i--){var tab=openTabs[i]
!tab.document.meta.preview&&tab.path&&0===basename(tab.path).indexOf(keyword)&&(hash[tab.path]=!0)}for(var last=tree.renderer.$size.height/tree.provider.rowHeight,i=0;i<last;i++)if(hash[ldSearch.visibleItems[i]]){
first=i
break}}tree.select(tree.provider.getNodeAtIndex(first))}}function openFile(noanim,nohide){if(!ldSearch.loaded)return!1


var nodes=tree.selection.getSelectedNodes(),cursor=tree.selection.getCursor()
if(tabs.preview({cancel:!0,keep:1==nodes.length})===!0||intoOutline)return nohide||plugin.hide()
nohide||plugin.hide()
for(var fn=function(){},i=0,l=nodes.length;i<l;i++){var id=nodes[i].id
if(id){var path=id,focus=id===cursor.id
tabs.open({path:path,noanim:l>1,focus:focus&&(!nohide||"soft")},fn)}}lastPreviewed=null}function previewFile(force){
if(lastPreviewed&&lastPreviewed.loaded||settings.getBool("user/general/@preview-navigate")||force){if(!ldSearch.loaded)return!1


var node=tree.selection.getCursor(),value=node&&node.id
if(value){var path=util.normalizePath(value)
lastPreviewed=tabs.preview({path:path},function(){onInput(!1)})}}}var winGoToFile,txtGoToFile,tree,ldSearch,lastSearch,lastPreviewed,cleaning,intoOutline,isReloadScheduled,timer,lastResults,Panel=imports.Panel,settings=imports.settings,ui=imports.ui,c9=imports.c9,fs=imports.fs,fsCache=imports["fs.cache"],tabs=imports.tabManager,menus=imports.menus,layout=imports.layout,watcher=imports.watcher,panels=imports.panels,util=imports.util,find=imports.find,filetree=imports.tree,prefs=imports.preferences,commands=imports.commands,analytics=imports["c9.analytics"],markup=require("text!./navigate.xml"),search=require("./search"),Tree=require("ace_tree/tree"),ListData=require("./dataprovider"),basename=require("path").basename,plugin=new Panel("Ajax.org",main.consumes,{
index:options.index||200,caption:"Navigate",buttonCSSClass:"navigate",minWidth:130,autohide:!0,where:options.where||"left"
}),emit=plugin.getEmitter(),dirty=!0,arrayCache=[],loadListAtInit=options.loadListAtInit,loaded=!1,drawn=!1,updating=!1


plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("show",function(e){analytics.log("Opened Navigate"),cleanInput(),
txtGoToFile.focus(),txtGoToFile.select(),dirty&&updateFileCache(!0)}),plugin.on("hide",function(e){tabs.preview({
cancel:!0}),stopOutline(),clearTimeout(timer),txtGoToFile.blur()}),plugin.on("unload",function(){loaded=!1,
drawn=!1,winGoToFile=null,txtGoToFile=null,tree=null,ldSearch=null,lastSearch=null,lastPreviewed=null,
cleaning=null,intoOutline=null,isReloadScheduled=null,dirty=!0,updating=!1}),plugin.freezePublicAPI({
get tree(){return tree},markDirty:markDirty}),register(null,{navigate:plugin})}return main.consumes=["Panel","settings","ui","watcher","menus","tabManager","find","fs","panels","fs.cache","preferences","c9","tree","commands","layout","util","c9.analytics"],
main.provides=["navigate"],main})


define("text!plugins/c9.ide.upload/upload_progress.css",[],"")


define("text!plugins/c9.ide.upload/markup/box_upload_activity.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:frame id="boxUploadActivity" caption="Upload Activity" class="uploadframe">\n        <a:button id="btnCancelUploads"\n          caption = "Cancel"\n          skin    = "btn-cancel-upload"\n          skinset = "uploadfiles"\n          margin  = "7 3 0 0" \n          top     = "-25"\n          right   = "20" \n          zindex  = "100" />\n        <a:button id="btnToggleUploadQueue" skin="btn_console_open" \n             state="true" value="0" margin="6 5 0 0" \n            top="-31" right="-15" zindex="100" />\n    \n        <a:bar id="lstUploadActivity"\n            skin = "list-uploadactivity"\n            skinset = "uploadfiles"\n            height="160"\n        >\n        </a:bar>\n    </a:frame>\n</a:application>\n')


define("text!plugins/c9.ide.upload/markup/skin.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:list name="list-uploadactivity">\n        <a:style><![CDATA[]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class="list-uploadactivity">\n                    <div class="uploadactivity-tree-rows"></div>\n                </div>\n            </a:main>\n            <a:tree-row\n                class   = "."\n                caption = "."\n                icon    = "div"\n                select  = ".">\n                <div class="tree-row"> </div>\n            </a:tree-row>\n            <a:dragindicator>\n                <div class=\'draglist\'><span><u>-</u></span></div>\n            </a:dragindicator>\n            <a:loading>\n                <div class="loading">Loading...</div>\n            </a:loading>\n            <a:empty caption=".">\n                <div class="message">-</div>\n            </a:empty>\n        </a:presentation>\n    </a:list>\n    \n    <a:button name="btn-cancel-upload">\n        <a:style><![CDATA[]]></a:style>\n    \n        <a:presentation>\n            <a:main\n              caption    = ".">\n                <div class="btn-cancel-upload">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>\n')


define("plugins/c9.ide.upload/upload_progress",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,uploadManager.on("addJob",onAddUploadJob),void uploadManager.on("removeJob",onRemoveUploadJob))

}function draw(){drawn||(drawn=!0,ui.insertCss(css,options.staticPrefix,plugin),ui.insertSkin({name:"uploadfiles",
data:require("text!./markup/skin.xml"),"media-path":options.staticPrefix+"/images/","icon-path":options.staticPrefix+"/icons/"
},plugin),ui.insertMarkup(layout.findParent(plugin),boxUploadActivityMarkup,plugin),boxUploadActivity=plugin.getElement("boxUploadActivity"),
tree.getElement("container",function(treeContainer){var p=treeContainer.parentNode,box=new ui.vsplitbox({
id:"vboxTreeContainer",style:"position:relative;flex:1;-webkit-flex:1",splitter:!1})
p.insertBefore(box,treeContainer),box.appendChild(treeContainer),box.appendChild(boxUploadActivity)}),
list=plugin.getElement("lstUploadActivity"),tree=new Tree(list.$ext),mdlUploadActivity=new TreeData,tree.setDataProvider(mdlUploadActivity),
tree.renderer.setScrollMargin(10,10),tree.renderer.setTheme({cssClass:"list-uploadactivity"}),mdlUploadActivity.rowHeight=21,
mdlUploadActivity.rowHeightInner=20,mdlUploadActivity.getContentHTML=function(node){return"<span class='uploadactivity-caption'>"+escapeHTML(node.label)+"</span><span class='uploadactivity-progress'>"+(void 0==node.progress?"&nbsp;":escapeHTML(node.progress+"%"))+"</span><span class='uploadactivity-delete'>&nbsp;</span>"

},mdlUploadActivity.updateProgress=function(node,val){node.progress=val,this._signal("changeClass")},
mdlUploadActivity.redrawNode=function(el,node){node.progress&&el.children[2]&&(el.children[2].textContent=node.progress+"%")

},tree.on("delete",function(node){var job=uploadManager.jobById(node.job_id)
return job&&job.cancel(),!1}),tree.on("click",function(ev){"uploadactivity-delete"==ev.domEvent.target.className&&tree._signal("delete",ev.getNode())

}),plugin.getElement("btnCancelUploads").on("click",function(e){cancelAll()}),plugin.getElement("btnToggleUploadQueue").addEventListener("click",function(e){
var checked=!this.value
checked?hidePanel(boxUploadActivity):showPanel(boxUploadActivity)}),showPanel(boxUploadActivity),emit("draw"))

}function hidePanel(list){panelVisible&&(panelVisible=!1,anims.animateSplitBoxNode(list,{height:"22px",
duration:.2,timingFunction:"ease-in-out"},function(){tree&&tree.resize()}))}function removePanel(panel){
panelVisible&&(panelVisible=!1,panel.$amlDestroyed||anims.animateSplitBoxNode(panel,{height:"0px",duration:.2,
timingFunction:"ease-in-out"}))}function showPanel(panel){panelVisible||(panelVisible=!0,panel.show(),
panel.$ext.style.height="22px",anims.animateSplitBoxNode(panel,{height:"175px",duration:.2,timingFunction:"ease-in-out"
},function(){tree&&tree.resize()}))}function onAddUploadJob(e){var job=e.job
show()
var node={label:job.file.name,job_id:job.id}
job.node=node,mdlUploadActivity.visibleItems.push(node),mdlUploadActivity._signal("change"),job.on("progress",updateProgress),
updateUploadCount()}function updateProgress(e){e.job.node&&mdlUploadActivity.updateProgress(e.job.node,Math.round(100*e.progress))

}function onRemoveUploadJob(e){var job=e.job,i=mdlUploadActivity.visibleItems.indexOf(job.node)
i!=-1&&mdlUploadActivity.visibleItems.splice(i,1),mdlUploadActivity._signal("change"),updateUploadCount(),
0===uploadManager.jobs.length&&setTimeout(function(){removePanel(boxUploadActivity)},1e3)}function updateUploadCountSync(){
updateUploadCountSyncTimer=null
var count=uploadManager.jobs.length
boxUploadActivity.setAttribute("caption","Upload Activity"+(count?"("+count+")":""))}function updateUploadCount(){
updateUploadCountSyncTimer||(updateUploadCountSyncTimer=setTimeout(updateUploadCountSync,100))}function cancelAll(){
uploadManager.jobs.forEach(function(job){job.cancel()})}function show(){draw(),list.show(),showPanel(boxUploadActivity)

}function hide(){hidePanel(boxUploadActivity)}var list,boxUploadActivity,mdlUploadActivity,updateUploadCountSyncTimer,Plugin=imports.Plugin,ui=imports.ui,layout=imports.layout,tree=imports.tree,anims=imports.anims,uploadManager=imports["upload.manager"],css=require("text!./upload_progress.css"),TreeData=require("ace_tree/data_provider"),Tree=require("ace_tree/tree"),escapeHTML=require("ace/lib/lang").escapeHTML,boxUploadActivityMarkup=require("text!./markup/box_upload_activity.xml"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loaded=!1,drawn=!1,panelVisible=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){drawn=!1}),plugin.freezePublicAPI({show:show,hide:hide,cancelAll:cancelAll
}),register(null,{"upload.progress":plugin})}return main.consumes=["Plugin","util","ui","layout","tree","upload.manager","anims"],
main.provides=["upload.progress"],main})


define("plugins/c9.ide.upload/batch",[],function(require,module,exports){"use strict"
function Batch(files,entries){this.files=files,this.entries=entries}function walkFiles(entry,onEntry,callback){
return entry?void(entry.isFile?onEntry(entry,callback):entry.isDirectory&&onEntry(entry,function(err){
function handleEntries(entries){return entries.length?void forEach(entries,function(entry,next){walkFiles(entry,onEntry,next)

},readMore):callback()}function readMore(){reader.readEntries(handleEntries,callback)}if(err)return callback(err)


var reader=entry.createReader()
readMore()})):callback()}function forEach(list,onEntry,callback){!function loop(i){return i>=list.length?callback():void onEntry(list[i],function(err){
return err?callback(err):void loop(i+1)})}(0)}var SUPPORT_FOLDER_UPLOAD=function(){var input=document.createElement("input")


return"webkitdirectory"in input||"directory"in input}()
return Batch.prototype.hasDirectories=function(){return this.files.some(function(file){return!!file.isDirectory

})},Batch.prototype.removeRoot=function(root){this.files=this.files.filter(function(file){return file.fullPath.split("/")[1]!==root

})},Batch.prototype.subTree=function(root){return this.files.filter(function(file){return file.fullPath.split("/")[1]===root

})},Batch.prototype.ignoreFiles=function(ignoredFilesMap){this.files=this.files.filter(function(file){
return!ignoredFilesMap[file.name]})},Batch.prototype.getSizes=function(){var max=0,sum=this.files.reduce(function(sum,file){
return file.size>max&&(max=file.size),sum+file.size},0)
return{max:max,sum:sum,count:this.files.length}},Batch.prototype.getRoots=function(){return Object.keys(this.files.reduce(function(roots,file){
var root=file.fullPath.split("/")[1]
return root&&(roots[root]=1),roots},{}))},Batch.prototype._detectDirectories=function(callback){forEach(this.files,function(file,next){
if("number"!=typeof file.size)return file.isDirectory=!0,next()
if(file.size>17e3)return file.isFile=!0,next()
try{var reader=new FileReader
reader.readAsArrayBuffer(file),reader.onloadend=function(e){var error=reader.error,hadError=error&&("SecurityError"==error.name||"NotReadableError"==error.name||4==error.code||1==error.code)


console.log(e,hadError,reader.error,file.size),hadError?file.isDirectory=!0:file.isFile=!0,next()}}catch(e){
return file.isDirectory=!0,next()}},callback)},Batch.fromInput=function(inputEl,callback){if(!inputEl.files)return new Batch([])


var files=[].slice.call(inputEl.files,0)
files.forEach(function(file){var relativePath=file.relativePath||file.webkitRelativePath
file.fullPath="/"+(relativePath?relativePath:file.name)})
var fromFolderUpload=SUPPORT_FOLDER_UPLOAD&&inputEl.getAttribute&&("string"==typeof inputEl.getAttribute("directory")||"string"==typeof inputEl.getAttribute("webkitdirectory"))


if(fromFolderUpload)return files=files.filter(function(file){return file.isFile=!0,"."!==file.name}),
callback(null,new Batch(files))
var batch=new Batch(files)
batch._detectDirectories(function(err){callback(err,batch)})},Batch.fromFileApi=function(entries,callback){
var files=[],skipped={}
forEach(entries,function(entry,next){walkFiles(entry,function(entry,next){return entry.isDirectory?next():void entry.file(function(file){
file.fullPath=entry.fullPath,file.isFile=!0,files.push(file),next()},function(err){skipped[entry.fullPath]=err,
next()})},function(err){next()})},function(err){return err?callback(err):void callback(null,new Batch(files,entries),skipped)

})},Batch.fromDrop=function(dropEvent,callback){var dataTransfer=dropEvent.dataTransfer
if(!dataTransfer)return callback(null,new Batch([]))
if(dataTransfer.getFilesAndDirectories)return Batch.fromMozFileApi(dataTransfer,callback)
if(!dataTransfer.items)return Batch.fromInput(dataTransfer,callback)
if(!dataTransfer.items||0===dataTransfer.items.length)return callback(null,new Batch([]))
var first=dataTransfer.items[0],getAsEntry=first.getAsEntry||first.webkitGetAsEntry,entries=[].map.call(dataTransfer.items,function(item){
return getAsEntry.call(item)})
Batch.fromFileApi(entries,callback)},Batch.fromMozFileApi=function(dataTransfer,callback){function done(){
pending||callback(null,new Batch(files))}var files=[],pending=0,walkdDirs=function(entries,parentPath){
entries.forEach(function(entry){var name=entry.name
"/"!=parentPath||"\\"!=name[0]&&"//"!=name[0]||(name=name.slice(1))
var path=parentPath?parentPath+name:""
"function"==typeof entry.getFilesAndDirectories?(pending++,entry.getFilesAndDirectories().then(function(entries){
walkdDirs(entries,path+"/"),pending--,done()})):(entry.fullPath=path,entry.isFile=!0,files.push(entry))

}),done()}
walkdDirs([dataTransfer])},{SUPPORT_FOLDER_UPLOAD:SUPPORT_FOLDER_UPLOAD,fromFileApi:Batch.fromFileApi,
fromDrop:Batch.fromDrop,fromInput:Batch.fromInput}})


define("plugins/c9.ide.upload/upload_job",[],function(require,module,exports){"use strict"
function UploadJob(file,fullPath,manager,workerPrefix){this.fullPath=fullPath,this.file=file,this.manager=manager,
this.state=STATE_NEW,this.progress=0,this.id=UploadJob.ID++,this.workerPrefix=workerPrefix
var emitter=new EventEmitter
this.on=emitter.on.bind(emitter),this.off=emitter.off.bind(emitter),this._emit=emitter.emit.bind(emitter)

}var EventEmitter=require("events").EventEmitter,path=require("path"),STATE_NEW="new",STATE_UPLOADING="uploading",STATE_ERROR="error"


return UploadJob.ID=1,UploadJob.prototype.cancel=function(){this.xhr&&this.xhr.abort(),this._setState(STATE_ERROR)

},UploadJob.prototype._setState=function(state){this.state=state,this._emit("changeState",{state:state,
job:this})},UploadJob.prototype._error=function(code,message){this.error={code:code,message:message},
this._setState(STATE_ERROR)},UploadJob.prototype._progress=function(progress){this.progress=progress,
this._emit("progress",{progress:progress,job:this})},UploadJob.prototype._startUpload=function(){var job=this


if(job._setState(STATE_UPLOADING),job.vfs)return job.vfs.rest(job.fullPath,{method:"PUT",body:job.file,
timeout:0,progress:function(loaded,total){job._progress(loaded/total)}},function(err,data,res){job._progress(1),
err?job._error(err.status,err.message):job._setState("done")})
var url=path.join(job.manager.filesPrefix,job.fullPath),xhr=new XMLHttpRequest
xhr.open("PUT",url,!0),xhr.onload=function(e){job._progress(1),xhr.status>=400?job._error(xhr.status,xhr.statusText):job._setState("done"),
xhr=null},xhr.upload.onprogress=function(e){e.lengthComputable&&job._progress(e.loaded/e.total)},xhr.send(job.file)

},UploadJob.prototype._startUploadWorker=function(){var job=this
job._setState(STATE_UPLOADING)
var url=path.join(job.manager.filesPrefix,job.fullPath),worker=new Worker(path.join(this.workerPrefix,"upload_worker.js"))


worker.postMessage({method:"start",args:[job.file,url]}),this.xhr={abort:worker.postMessage.bind(worker,{
method:"abort"})},worker.onmessage=function(msg){var method=msg.data.method,args=msg.data.args||[]
"_setState"==method&&(this.xhr=null,worker.terminate()),job[method].apply(job,args)}},UploadJob})


define("plugins/c9.ide.upload/upload_manager",[],function(require,module,exports){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,jobs=[],void(concurrentUploads=options.concurrentUploads||6))

}function isSupported(){return window.FormData}function upload(targetPath,batch,dialog,callback){function getAction(batch,root,callback){
return toAll?callback(action):void dialog(batch,targetPath,root,function(_action,_toAll){toAll=_toAll,
action=_action,callback(action)})}function uploadFiles(root,doOverwrite,callback){var files=batch.subTree(root),uploaded=0


files.forEach(function(file){var job=uploadFile(file,path.join(targetPath,file.fullPath))
file.job=job,job.checkOverwrite=doOverwrite&&!toAll,job.on("changeState",function(e){e.state!=STATE_DONE&&e.state!=STATE_ERROR||(uploaded++,
uploaded==files.length&&emit("batchDone",{batch:batch}))})}),callback()}forEach(batch.getRoots(),function(root,next){
fs.exists(path.join(targetPath,root),function(exists){return exists?void getAction(batch,root,function(action){
switch(action){case"replace":uploadFiles(root,!0,next)
break
case"no-replace":return batch.removeRoot(root),next()
case"stop":return callback()
default:throw new TypeError("Invalid replace action: "+action)}}):uploadFiles(root,!1,next)})},callback)


var toAll=!1,action=""}function _createJob(file,fullPath){var job=new UploadJob(file,fullPath,plugin,options.workerPrefix)


return job.vfs=vfs,job}function uploadFile(file,fullPath){var job=_createJob(file,fullPath)
return job.on("changeState",_checkAsync),jobs.push(job),emit("addJob",{job:job}),_checkAsync(),job}function batchFromInput(inputEl,callback){
return UploadBatch.fromInput(inputEl,callback)}function batchFromDrop(dropEvent,callback){return UploadBatch.fromDrop(dropEvent,callback)

}function batchFromFileApi(entries,callback){return UploadBatch.fromFileApi(entries,callback)}function jobById(id){
for(var i=0;i<jobs.length;i++){var job=jobs[i]
if(job.id==id)return job}}function checkSync(){for(var wip=[],done=[],candidates=[],i=0;i<jobs.length;i++){
var job=jobs[i]
switch(job.state){case STATE_DONE:case STATE_ERROR:done.push(job),jobs.splice(i,1),i--
break
case STATE_RESUME:candidates.push(job)
break
case STATE_NEW:candidates.unshift(job)
break
case STATE_UPLOADING:wip.push(job)}}done.length&&setTimeout(function(){done.forEach(function(job){emit("removeJob",{
job:job})})},0)
for(var i=wip.length;i<concurrentUploads;i++){var job=candidates.pop()
if(!job)break
job._startUpload()}timer=null}function _checkAsync(){timer||(timer=setTimeout(checkSync,100))}function forEach(list,onEntry,callback){
!function loop(i){return i>=list.length?callback():void onEntry(list[i],function(err){return err?callback(err):void loop(i+1)

})}(0)}var jobs,concurrentUploads,timer,fs=imports.fs,vfs=imports.vfs,Plugin=imports.Plugin,UploadBatch=require("./batch"),UploadJob=require("./upload_job"),path=require("path"),STATE_NEW="new",STATE_UPLOADING="uploading",STATE_RESUME="resume",STATE_DONE="done",STATE_ERROR="error",plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({SUPPORT_FOLDER_UPLOAD:UploadBatch.SUPPORT_FOLDER_UPLOAD,
get jobs(){return jobs},_events:["addJob","removeJob","batchDone"],isSupported:isSupported,upload:upload,
uploadFile:uploadFile,batchFromInput:batchFromInput,batchFromDrop:batchFromDrop,batchFromFileApi:batchFromFileApi,
jobById:jobById}),register(null,{"upload.manager":plugin})}return main.consumes=["Plugin","fs","vfs"],
main.provides=["upload.manager"],main})


define("text!plugins/c9.ide.upload/upload.css",[],"")


define("text!plugins/c9.ide.upload/markup/win_upload_files.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n\n    <a:window id="winUploadFiles"\n      title   = "Upload Files"\n      buttons = "close"\n      skin    = "bk-window"\n      class   = "relative dark upload-window"\n      modal   = "false"\n      center  = "true"\n      zindex  = "10000"\n      kbclose = "true">\n        <div id="uploadDropArea" class="uploadDropArea">\n            <div class="long">\n                <h3>Drag &amp; drop files here</h3>\n                <span>Or you can select them manually</span>\n            </div>\n            <div class="short">\n                Drag &amp; Drop\n            </div>\n        </div>\n        <input id="fileUploadSelect" type="file" multiple="multiple" />\n        <input id="folderUploadSelect" type="file" webkitdirectory="" directory="" />\n        \n        <a:divider />\n        \n        <div class="txtUploadTargetFolder" margin="0 0 10">Upload to folder: <span id="uplTargetFolder"></span></div>\n        <a:hbox id="hboxUploadNoFolders" class="uploadSelectButtons" padding="10" pack="center" align="center">\n            <a:button skin="btn-default-css3" disabled="true">Select files to upload</a:button>\n        </a:hbox>\n        <a:hbox id="hboxUploadWithFolders" class="uploadSelectButtons" padding="5" pack="center" align="center" visible="false">\n            <a:button id="fileUploadSelectBtn" skin="btn-default-css3" disabled="true">Select files</a:button>\n            <a:button skin="btn-default-css3" disabled="true">Select folder</a:button>\n        </a:hbox>\n\n        <a:hbox class="button-container" padding="10" pack="end" edge="6 10 10">\n            <a:button skin="btn-default-css3">Close</a:button>\n        </a:hbox>\n    </a:window>\n    \n</a:application>\n')


define("plugins/c9.ide.upload/upload",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,menus.addItemByPath("File/~",new ui.divider,1200,plugin),
menus.addItemByPath("File/Upload Local Files...",new ui.item({onclick:showUploadWindow}),1300,plugin),
void uploadManager.on("addJob",onAddUploadJob))}function onAddUploadJob(e){function onExpand(e){e.path==dir&&(cleanup(),
updateNode(fsCache.findNode(dir)))}function updateNode(parent){var node=fsCache.findNode(job.fullPath)


node||(node=fsCache.createNode(job.fullPath,{mime:job.file.type,size:job.file.size||0})),node.status="predicted"

}var job=e.job,dir=path.dirname(job.fullPath),cleanup=function(){}
job.on("changeState",function(state){switch(state.state){case"uploading":fsCache.on("readdir",onExpand),
cleanup=function(){fsCache.off("readdir",onExpand)}
var parent=fsCache.findNode(dir)
parent&&updateNode(parent)
break
case"done":var node=fsCache.findNode(job.fullPath)
node&&(node.status="loaded"),cleanup()
break
case"error":var node=fsCache.findNode(job.fullPath)
node&&fsCache.removeNode(node),cleanup()}})}function uploadFromInput(inputEl){uploadManager.batchFromInput(inputEl,function(err,batch){
return err?onUploadError(err):void uploadBatch(batch)})}function getEntries(e){if(!e.dataTransfer.items)return[]


var first=e.dataTransfer.items[0],getAsEntry=first.getAsEntry||first.webkitGetAsEntry
return[].map.call(e.dataTransfer.items,function(item){return getAsEntry.call(item)})}function uploadFromDrop(dropEvent,targetPath,type){
emit("upload.drop",{files:dropEvent.dataTransfer.files,entries:getEntries(dropEvent),path:targetPath,
type:type})!==!1&&uploadManager.batchFromDrop(dropEvent,function(err,batch,skipped){return err?onUploadError(err):(skipped&&Object.keys(skipped).length&&alert("File upload","Not all files can be uploaded:",Object.keys(skipped).map(util.escapeXml).join("</br>")),
void uploadBatch(batch,targetPath.path||targetPath))})}function onUploadError(err){console.error(err)

}function uploadBatch(batch,targetPath){if(batch.hasDirectories())return void alert("Folder Upload","Folder uploads are currently only supported by Google Chrome.","If you want to upload folders you need to run a current version of Google Chrome.")


batch.ignoreFiles({".DS_Store":1,"Thumbs.db":1})
var sizes=batch.getSizes()
if(sizes.count>MAX_FILE_COUNT)return void alert("Too many files","File uploads are limited to "+MAX_FILE_COUNT+" files per upload.","Please upload files in smaller batches")


if(sizes.sum>MAX_UPLOAD_SIZE)return void alert("Maximum upload-size exceeded","File uploads are limited to "+Math.floor(MAX_UPLOAD_SIZE/1e3/1e3)+"MB in total.","")


if(batch.files.length){var targetFolder
if(targetPath&&"object"==typeof targetPath){if(!window.FileReader)return alert("Unable to open files","Drop files on the tree to upload","")


if(batch.files.length>MAX_OPEN_COUNT)return alert("Maximum open count exceeded ("+batch.files.length+")","Drop files on the tree to upload","")


var hasImage=!1
return batch.files.forEach(function(file,i){if(/image/i.test(file.type))return hasImage=!0
var reader=new FileReader
reader.onload=function(){tabManager.open({path:"/"+file.name,value:reader.result,document:{meta:{newfile:!0
}},active:0===i,pane:targetPath},function(err,tab){})},reader.readAsText(file)}),void(hasImage&&alert("Can't open an image","Drop files on the tree to upload",""))

}targetPath?targetFolder=fsCache.findNode(targetPath):(targetFolder=getTargetFolder(),targetPath=targetFolder.path),
tree.expand(targetFolder,function(){uploadManager.upload(targetPath,batch,fileExistsDialog,function(err){})

})
var initialSelection=JSON.stringify(tree.selection)
uploadManager.on("batchDone",function onBatchDone(e){var b=e.batch
b==batch&&(uploadManager.off("batchDone",onBatchDone),initialSelection==JSON.stringify(tree.selection)&&tree.selectList(batch.getRoots().map(function(p){
return path.join(targetPath,p)})))})}}function showUploadWindow(){function handleFileSelect(e){uploadFromInput(e.target),
e.target.value=""}if(!winUploadFiles){ui.insertCss(css,options.staticPrefix,plugin),ui.insertMarkup(null,winUploadFilesMarkup,plugin),
winUploadFiles=plugin.getElement("winUploadFiles"),winUploadFiles.on("show",function(e){onShow()}),winUploadFiles.on("close",function(e){
onClose()}),winUploadFiles.selectNodes(".//a:button").pop().on("click",function(){winUploadFiles.hide()

})
var fileUploadSelect=plugin.getElement("fileUploadSelect"),folderUploadSelect=plugin.getElement("folderUploadSelect"),hboxUploadNoFolders=plugin.getElement("hboxUploadNoFolders"),hboxUploadWithFolders=plugin.getElement("hboxUploadWithFolders"),filebrowser=fileUploadSelect.$ext


if(filebrowser.addEventListener("change",handleFileSelect,!1),uploadManager.SUPPORT_FOLDER_UPLOAD){hboxUploadNoFolders.hide(),
hboxUploadWithFolders.show(),apf.setStyleClass(filebrowser,"uploadWithFolders")
var folderbrowser=folderUploadSelect.$ext
folderbrowser.style.display="block",folderbrowser.addEventListener("change",handleFileSelect,!1)}emit("drawUploadWindow",plugin.getElement("uploadDropArea"))

}winUploadFiles.show()}function hideUploadWindow(){winUploadFiles&&winUploadFiles.hide()}function fileExistsDialog(batch,path,root,callback){
question("File already exists","File already exists",'"'+root+'" already exists, do you want to replace it? Replacing it will overwrite its current contents.',function(all){
callback("replace",all)},function(all){all?callback("stop",!0):callback("no-replace",!1)},{all:batch.files.length>1
})}function onShow(){return window.File&&window.FileReader&&window.FileList&&window.Blob?(updateTargetFolder(),
void tree.on("select",updateTargetFolder)):(alert("The File APIs are not fully supported in this browser."),
hideUploadWindow())}function onClose(){tree.off("select",updateTargetFolder)}function getTargetFolder(){
return tree.getSelectedFolder()}function updateTargetFolder(){plugin.getElement("uplTargetFolder").$ext.textContent=getTargetFolder().path

}var winUploadFiles,util=imports.util,Plugin=imports.Plugin,ui=imports.ui,menus=imports.menus,fsCache=imports["fs.cache"],tree=imports.tree,uploadManager=imports["upload.manager"],question=imports["dialog.fileoverwrite"].show,alert=imports["dialog.alert"].show,apf=imports.apf,tabManager=imports.tabManager,path=require("path"),css=require("text!./upload.css"),winUploadFilesMarkup=require("text!./markup/win_upload_files.xml"),MAX_OPEN_COUNT=options.maxOpenCount||10,MAX_FILE_COUNT=options.maxFileCount||1e5,MAX_UPLOAD_SIZE=options.maxUploadSize||1/0,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({showUploadWindow:showUploadWindow,fileExistsDialog:fileExistsDialog,
uploadFromDrop:uploadFromDrop,uploadFromInput:uploadFromInput,getTargetFolder:getTargetFolder}),register(null,{
upload:plugin})}return main.consumes=["Plugin","util","ui","layout","menus","fs","tree","fs.cache","upload.manager","apf","dialog.fileoverwrite","dialog.alert","tabManager"],
main.provides=["upload"],main})


define("text!plugins/c9.ide.upload/dragdrop.css",[],"")


define("plugins/c9.ide.upload/dragdrop",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,ui.insertCss(css,plugin),
document.addEventListener("dragenter",dragEnter,!0),document.addEventListener("dragleave",dragLeave,!0),
document.addEventListener("dragover",dragOver,!0),document.addEventListener("drop",dragDrop,!0),void tree.once("draw",function(){
function updateDrag(ev){var selectedNodes=ev.dragInfo.selectedNodes,hasFile=selectedNodes&&selectedNodes.some(function(node){
return!node.isFolder}),host=hasFile&&findHost(ev.domEvent.target,ev)
updateTabDrag(!ev.dragInfo.isInTree&&host)}function treeDrop(ev){var selectedNodes=ev.dragInfo.selectedNodes


selectedNodes&&dragContext.pane&&selectedNodes.forEach(function(node,i){tabs.open({path:node.path,active:i===selectedNodes.length-1,
pane:dragContext.pane},function(err,tab){})}),updateTabDrag()}var acetree=tree.tree
treeMouseHandler=acetree.$mouseHandler,acetree.on("dragIn",updateDrag),acetree.on("dragMoveOutside",updateDrag),
acetree.on("dropOutside",treeDrop,!1)}))}function unload(){loaded=!1,document.removeEventListener("dragenter",dragEnter,!0),
document.removeEventListener("dragleave",dragLeave,!0),document.removeEventListener("dragover",dragOver,!0),
document.removeEventListener("drop",dragDrop,!0)}function dragEnter(e){if(apf.preventDefault(e),!plugin.disableDropbox&&isFile(e)){
var host=findHost(e.target,e)
dragContext.mouseListener||treeAsPane&&!e.ctrlKey||window.addEventListener("mousemove",clearDrag,!0),
updateUploadAreaDrag(e.target.host),updateTreeDrag(e,host),updateTabDrag(host),clearTimeout(dragContext.timer),
dragContext.dropEffect="copy",treeAsPane&&dragContext.pane&&dragContext.pane.isTree&&(dragContext.dropEffect="link"),
e.dataTransfer.dropEffect=dragContext.dropEffect}}function dragLeave(e){apf.preventDefault(e),plugin.disableDropbox||(clearTimeout(dragContext.timer),
dragContext.timer=setTimeout(clearDrag,100))}function dragOver(e){if(apf.preventDefault(e),!plugin.disableDropbox&&isFile(e)){
if(treeAsPane&&e.ctrlKey!=dragContext.ctrlKey){var pane=dragContext.pane;(pane&&pane.isTree||dragContext.path)&&dragEnter(e)

}treeMouseHandler&&treeMouseHandler.$onCaptureMouseMove&&treeMouseHandler.$onCaptureMouseMove(e),dragContext.timer&&(dragContext.timer=clearTimeout(dragContext.timer)),
e.dataTransfer.dropEffect=dragContext.dropEffect}}function dragDrop(e){if(apf.preventDefault(e),setTimeout(clearDrag),
!plugin.disableDropbox){var target=dragContext.path||dragContext.pane
target&&(upload.uploadFromDrop(e,target,dragContext.pane&&!target.isTree?"tab":"tree"),apf.stopEvent(e))

}}function clearDrag(e){dragContext.mouseListener=null,window.removeEventListener("mousemove",clearDrag,!0),
updateTreeDrag(e),updateTabDrag(),updateUploadAreaDrag()}function findHost(el,e){var ctrlKey=dragContext.ctrlKey=e.ctrlKey,treeEl=tree.getElement("container")


for(treeAsPane&&!ctrlKey&&(treeEl=treeEl.parentNode);el;){var host=el.host
if(host&&host.cloud9pane)return host
if(host&&host===treeEl)return treeAsPane&&!ctrlKey?{cloud9pane:{isTree:!0,container:host.$ext,dropboxTitle:"Drop a file or folder"
}}:host
if(el===dropbox)return treeAsPane&&ctrlKey&&dragContext.pane.isTree?treeEl:{cloud9pane:dragContext.pane
}
el=el.parentNode}}function isFile(e){var types=e.dataTransfer.types
if(types&&Array.prototype.indexOf.call(types,"Files")!==-1)return!0}function getDropbox(title){if(!dropbox){
dropbox=document.createElement("div"),dropbox.className="draganddrop"
var label=document.createElement("span")
dropbox.appendChild(label)}return dropbox.firstChild.textContent=title||"Drop a file here to open",dropbox

}function updateTabDrag(host){var pane=host&&(host.cloud9pane||host.parentNode&&host.parentNode.cloud9pane)


if(clearTimeout(dragContext.dropboxTimer),pane){if(dragContext.path=null,dragContext.pane===pane)return


var parent=pane.container
dropbox=getDropbox(pane.dropboxTitle),parent&&parent.appendChild(dropbox),apf.setStyleClass(dropbox,"over"),
dragContext.pane=pane}else dragContext.pane&&(dragContext.pane=null,dropbox&&dropbox.parentNode&&(dragContext.dropboxTimer=setTimeout(function(){
dropbox.parentNode&&dropbox.parentNode.removeChild(dropbox)},100),apf.setStyleClass(dropbox,null,["over"])))

}function updateUploadAreaDrag(host){host&&host.$ext&&"uploadDropArea"===host.$ext.id?(dragContext.uploadDropArea=host.$ext,
dragContext.path=upload.getTargetFolder().path,apf.setStyleClass(dragContext.uploadDropArea,"over")):dragContext.uploadDropArea&&(apf.setStyleClass(dragContext.uploadDropArea,null,["over"]),
dragContext.uploadDropArea=null)}function updateTreeDrag(e,host){var isOnlineTree,online=c9.status&c9.STORAGE


try{isOnlineTree=online&&host===tree.getElement("container")}catch(e){}if(isOnlineTree)treeMouseHandler.releaseMouse||(treeMouseHandler.captureMouse(e),
treeMouseHandler.setState("drag"),treeMouseHandler.dragStart(),tree.tree.on("folderDragEnter",folderDragEnter),
tree.tree.on("folderDragLeave",folderDragLeave))
else if(treeMouseHandler&&treeMouseHandler.releaseMouse){var path=dragContext.path
treeMouseHandler.releaseMouse(e||{}),tree.tree.off("folderDragEnter",folderDragEnter),tree.tree.off("folderDragLeave",folderDragLeave),
dragContext.path=path}}function folderDragLeave(e){tree.tree.provider.setClass(e.hoverNode,"dragAppendUpload",!1),
dragContext.path=null}function folderDragEnter(e){tree.tree.provider.setClass(e.hoverNode,"dragAppendUpload",!0),
dragContext.path=e.hoverNode.path}var dropbox,treeMouseHandler,Plugin=imports.Plugin,upload=imports.upload,tree=imports.tree,ui=imports.ui,c9=imports.c9,tabs=imports.tabManager,css=require("text!./dragdrop.css"),treeAsPane=(require("path").dirname,
options.treeAsPane),plugin=new Plugin("Ajax.org",main.consumes),loaded=!1,dragContext={}
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){unload()}),plugin.freezePublicAPI({}),register(null,{dragdrop:plugin})}
return main.consumes=["Plugin","upload","tree","ui","layout","c9","tabManager"],main.provides=["dragdrop"],
main})


define("plugins/c9.ide.tree/favorites",[],function(require,exports,module){function main(options,imports,register){
function load(){function keepSane(path){var len=path.length+1
for(var favPath in lut)favPath!=path&&favPath.substr(0,len)!=path+"/"||removeFavorite(favPath)}function update(e){
e&&isFavoriteNode(e)&&(changed=!0,settings.save())}if(loaded)return!1
loaded=!0,commands.addCommand({name:"addfavorite",exec:function(){tree.selectedNodes.forEach(function(node){
addFavorite(node.path)})}},plugin),commands.addCommand({name:"removefavorite",isAvailable:function(){
return tree&&tree.selectedNode&&isFavoritePath(tree.selectedNode.path)},exec:function(){tree.selectedNodes.forEach(function(node){
removeFavorite(node.path)})}},plugin),model.realRoot=model.root,startEmpty?model.emptyMessage="Drag one or more folders here to populate this panel with files. Use the settings button in the top right to enable browsing the root file system.":realRoot?model.emptyMessage="There are no favorites defined. Please add some favorites to the tree using the settings button in the top right.":model.emptyMessage="There are no favorites defined. Use the settings button in the top right to add your workspace directory.",
altRoot={children:[favRoot={label:"favorites",path:"!favorites",isOpen:!0,className:"heading",isRoot:!0,
isFolder:!0,status:"loaded",map:{},children:[],noSelect:!0,$sorted:!0}]},startEmpty&&toggleRootFS(!1),
tree.once("draw",function(){tree.tree.on("dblclick",function(e){var selected=e.getNode(),favNode=selected&&isFavoritePath(selected.path)


favNode&&favNode!=selected&&(tree.select(favNode),tree.scrollToSelection(),e.preventDefault())},plugin),
tree.tree.keyBinding.addKeyboardHandler(function(data,hashId,keyString,keyCode,e){if(0===hashId){var nodes=tree.selectedNodes


if(1==nodes.length){var node=nodes[0],favNode=isFavoritePath(node.path)
if(favNode){if("left"==keyString)return favNode==node?node.isOpen?tree.collapse(node):tree.expandAndSelect(node.path):tree.expandAndSelect(node.parent),
{command:"null"}
if(("right"==keyString||"return"==keyString)&&favNode!=node)return tree.select(favNode),tree.scrollToSelection(),
{command:"null"}}else if("left"==keyString&&!node.isOpen&&(node=node.parent,favNode=node&&isFavoritePath(node.path)))return tree.select(favNode),
tree.scrollToSelection(),{command:"null"}}}}),tree.tree.on("folderDragEnter",function(dragInfo){if(dragInfo.$allowSortMode)if(dragInfo.hoverNode==favRoot)dragInfo.mode="sort",
dragInfo.hoverNode=favRoot.children[0],dragInfo.insertPos=-1
else if(isFavoriteNode(dragInfo.hoverNode))dragInfo.mode="sort",dragInfo.insertPos=1
else{var fsRoot=fsCache.model.realRoot,node=dragInfo.hoverNode
do{if(node==fsRoot){dragInfo.hoverNode=fsRoot,dragInfo.insertPos=1
break}if(isFavoritePath(node.path)){dragInfo.hoverNode=isFavoritePath(node.path),dragInfo.insertPos=1


break}}while(node=node.parent)}else dragInfo.hoverNode==favRoot?(dragInfo.mode="sort",dragInfo.insertPos=1):"sort"==dragInfo.mode&&(dragInfo.mode="move",
dragInfo.insertPos=0)}),tree.tree.on("dragStarted",function(e){var dragInfo=e.dragInfo,favs=dragInfo.selectedNodes.filter(function(node){
return isFavoriteNode(node)})
favs.length&&(favs.length<dragInfo.selectedNodes.length?dragInfo.selectedNodes=dragInfo.selectedNodes.filter(function(node){
return isFavoriteNode(node)}):(dragInfo.$allowSortMode=!0,dragInfo.selectedNodes=[],dragInfo.mode="sort"))

}),tree.tree.on("drop",function(dragInfo){var target=dragInfo.hoverNode
if(target==favRoot&&(dragInfo.mode="sort",target=favRoot.children[0]),"sort"==dragInfo.mode){if(dragInfo.selectedNodes=null,
!dragInfo.node||!target)return
if(dragInfo.hoverNode==fsCache.model.realRoot)return removeFavorite(dragInfo.node.path)
var favNode=addFavorite(dragInfo.node.path),index=favRoot.children.indexOf(target)
if(index==-1)return
1==dragInfo.insertPos&&index++
var oldIndex=favRoot.children.indexOf(favNode)
oldIndex!=-1&&favRoot.children.splice(oldIndex,1),oldIndex<index&&index--,favRoot.children.splice(index,0,favNode),
fsCache.refresh(favRoot),emit("favoriteReorder"),update(favNode)}},!0),tree.on("isRootContext",function(node){
return isFavoritePath(node.path)||"~"==node.path.charAt(0)&&isFavoritePath(node.path.replace(/^~/,c9.home))

})}),tree.on("menuUpdate",function(e){e.node&&isFavoriteNode(e.node)&&e.menu.childNodes.some(function(item){
if("Delete"==item.caption)return item.setAttribute("disabled",!0),!0})}),tree.on("beforeRename",function(e){
return!e.node.isFavorite},plugin),tree.on("delete",function(e){var ok=[]
if(e.selection.forEach(function(node){node.isFavorite?removeFavorite(node.path):ok.push(node)}),ok.length!=e.selection.length)return ok.length&&tree.remove(ok),
!1},plugin),fsCache.on("findNode",function(e){var path=e.path
if("~"==path)return lut["~"]
if("~"==path.charAt(0)){var findNode=function(parts,node){for(var iter=0,newp=parts[iter];iter<parts.length;)if(node){
if(node=node.map[parts[++iter]],!node)break}else node=lut[newp],newp+="/"+parts[++iter]
return node},parts=path.split("/"),node=findNode(parts)
return node}if("!"==path.charAt(0))return!1
if(enabled&&lut[path]){if(e.type)return lut[path]}else"/"==path&&"expand"==e.type&&toggleRootFS(!0)},plugin),
fsCache.on("readdir",function(e){var node=isFavoritePath(e.parent.path)
node&&model.setAttribute(node,"status","loaded")}),fsCache.on("remove",function(e){!fsCache.showHidden&&e.path.indexOf("/.")>-1||keepSane(e.path)

}),tree.on("rename",function(e){keepSane(e.oldpath)}),model.on("startUpdate",function(node){var favNode=isFavoritePath(node.path)


favNode&&(favNode.wasOpen=favNode.isOpen,model.close(favNode,null,!0))}),model.on("endUpdate",function(node,wasOpen){
var favNode=isFavoritePath(node.path)
favNode&&favNode.wasOpen&&(model.open(favNode,null,!0),favNode.wasOpen=!1)}),model.on("expand",function(node){
var favNode=isFavoritePath(node.path)
favNode&&isFavoriteNode(node)&&(node=fsCache.findNode(node.path),model.open(node))}),model.on("collapse",function(node){
var favNode=isFavoritePath(node.path)
favNode&&isFavoriteNode(node)&&(node=fsCache.findNode(node.path),model.close(node))}),find.on("fileList",function(options){
if(hasScoping&&"/"==options.path&&!options.startPaths){var paths=Object.keys(lut)
if(!paths.length)return!1
options.startPaths=paths.filter(function(p){return!lut[p].excludeFilelist&&!paths.some(function(n){return p!=n&&p.substr(0,n.length)==n

})})}},plugin)
var updateNavigate=function(e){hasScoping&&navigate.markDirty(null,e.init?-100:0,!0)}
plugin.on("favoriteRemove",updateNavigate),plugin.on("favoriteAdd",updateNavigate),navigate.on("draw",function(){
var replaceStrong=navigate.tree.provider.replaceStrong
navigate.tree.provider.replaceStrong=function(path){return hasScoping&&reFavs&&"/"==path.charAt(0)&&(path=path.replace(reFavs,function(m,n){
return"("+n.split("/").pop()+")/"})),replaceStrong.call(navigate.tree.provider,path)}},plugin),tree.getElement("mnuCtxTree",function(mnuCtxTree){
var remove,add
ui.insertByIndex(mnuCtxTree,add=new ui.item({match:"folder|file",command:"addfavorite",caption:"Add to Favorites"
}),1e3,plugin),ui.insertByIndex(mnuCtxTree,remove=new ui.item({command:"removefavorite",caption:"Remove from Favorites"
}),1001,plugin),ui.insertByIndex(mnuCtxTree,new ui.divider,1100,plugin),mnuCtxTree.on("prop.visible",function(e){
if(e.value){var node=tree.selectedNode
node&&isFavoritePath(node.path)?(add.hide(),remove.show()):(add.show(),remove.hide())}})
var mnuSettings=tree.getElement("mnuFilesSettings")
ui.insertByIndex(mnuSettings,new ui.item({type:"check",caption:"Show Workspace Root",checked:"state/projecttree/@showfs",
onclick:function(e){toggleRootFS()}}),250,plugin)
var cbHome=new ui.item({type:"check",caption:"Show Home in Favorites",write:!0,onclick:function(e){this.checked?addFavorite(c9.toInternalPath(home)):removeFavorite(c9.toInternalPath(home))

}})
ui.insertByIndex(mnuSettings,cbHome,260,plugin),mnuSettings.on("prop.visible",function(e){e.value&&cbHome.setAttribute("checked",!!lut["~"])

})})
var init=!1
settings.on("read",function(){settings.setDefaults("state/projecttree",[["showfs",startEmpty?"false":"true"]]),
settings.setDefaults("user/projecttree",[["scope","false"]]),toggleRootFS(settings.getBool("state/projecttree/@showfs")?!0:!1),
hasScoping=alwaysScope||settings.getBool("user/projecttree/@scope"),init||((settings.getJson("state/projecttree/favorites")||[]).forEach(function(n){
addFavorite(n,null,!0)}),navigate.markDirty(null,0),init=!0)},plugin),settings.on("user/projecttree",function(){
var wasScoping=hasScoping
hasScoping=alwaysScope||settings.getBool("user/projecttree/@scope"),wasScoping!=hasScoping&&navigate.markDirty(null,0,!0)

}),settings.on("write",function(){if(changed){var saved=favRoot.children.map(function(n){var node=util.extend({},n)


return delete node.isSelected,delete node.children,delete node.map,delete node.parent,delete node.$depth,
node})
settings.setJson("state/projecttree/favorites",saved),changed=!1}}),alwaysScope||prefs.add({General:{
"Tree & Navigate":{"Scope Navigate To Favorites":{type:"checkbox",position:1e3,path:"user/projecttree/@scope"
}}}},plugin),model.on("expand",update),model.on("collapse",update)}function wrap(){enabled=!0
var getClassName=model.getClassName
model.getClassName=function(node){var favNode=isFavoritePath(node.path)
return favNode&&favNode!=node?"favorite":getClassName.call(model,node)}
var getChildren=model.getChildren
model.getChildren=function(node){if(isFavoriteNode(node)){var realNode=fsCache.findNode(node.path),nodes=realNode&&getChildren.call(model,realNode)||[]


return nodes.forEach(function(child){child.$depth=node.$depth+1}),nodes}return isFavoritePath(node.path)?[]:getChildren.call(model,node)

}
var hasChildren=model.hasChildren
model.hasChildren=function(node){if(isFavoriteNode(node)){var realNode=fsCache.findNode(node.path)
return!realNode||hasChildren.call(model,realNode)}return!isFavoritePath(node.path)&&hasChildren.call(model,node)

}
var setRoot=model.setRoot
model.setRoot=function(node){node!=altRoot&&(node.empty?(altRoot.map||(altRoot.map={"":model.realRoot
}),2==favRoot.children.length&&favRoot.children.splice(1,1)):(altRoot.children.push(node),node.isRoot=!0,
node.isFSRoot=!0,node.label="file system",node.isFolder=!0,node.path="!fsroot",node.status="loaded",node.className="heading",
node.noSelect=!0,altRoot.map=node.map)),setRoot.call(model,altRoot)}
var getRowIndent=model.getRowIndent
model.getRowIndent=function(node){return node.$depth?node.$depth-1:0}
var getIconHTML=model.getIconHTML
model.getIconHTML=function(node){if(node.isFavorite){var realNode=fsCache.findNode(node.path)
node={label:node.path,status:realNode?realNode.status:node.status,isFolder:node.isFolder}}return getIconHTML.call(model,node)

}
var getCaptionHTML=model.getCaptionHTML
model.getCaptionHTML=function(node){if(node.isFavorite){var path=node.labelPath||node.path
return escapeHTML(basename(path))+"<span class='extrainfo'> - "+escapeHTML(dirname(path))+"</span>"}return getCaptionHTML.call(model,node)

},model.root&&model.setRoot(model.root),toggleRootFS(),stored={setRoot:setRoot,getRowIndent:getRowIndent,
getChildren:getChildren,hasChildren:hasChildren,getCaptionHTML:getCaptionHTML,getClassName:getClassName
}}function unwrap(){enabled=!1
for(var prop in stored)model[prop]=stored[prop]
stored=null,lut={},altRoot.children.splice(1,1)
var node=model.realRoot
delete node.isRoot,delete node.isFSRoot,delete node.label,delete node.isFolder,delete node.path,delete node.className,
delete node.$depth,model.setRoot(node),toggleRootFS()}function isFavoritePath(path){return lut[path]}
function isFavoriteNode(node){return lut[node.path]==node}function getFavoritePaths(){return favRoot&&favRoot.children.map(function(n){
return n.path})||[]}function addFavorite(path,name,init){var node,favNode
return lut[path.path||path]?lut[path.path||path]:("string"==typeof path?(node=fsCache.findNode(path),
favNode={path:path,labelPath:name,isFavorite:!0,isRootContext:!0,isFolder:!node||node.isFolder,offset:node?node.$depth:path.split("/").length-1
},favNode.isFolder&&(favNode.status="pending",favNode.map=node?node.map:{},favNode.isOpen=node&&node.isOpen)):(favNode=path,
path=favNode.path,favNode.status="pending",favNode.map={},path=favNode.path),lut[path]=favNode,favRoot.children.push(favNode),
updateRegExp(),"~"==path&&(favRoot.map["~"]=favNode),changed=!0,settings.save(),enabled||wrap(),fsCache.refresh(node),
fsCache.refresh(favRoot),watcher.watch("~"==path?path:dirname(path)),emit("favoriteAdd",{path:path,init:init
}),favNode)}function removeFavorite(path){var node=lut[path]
if(node){favRoot.children.splice(favRoot.children.indexOf(node),1),delete lut[path],updateRegExp(),changed=!0,
settings.save(),"~"==path&&(delete favRoot.map["~"],delete model.root.map["~"]),favRoot.children.length||unwrap()


var realNode=fsCache.findNode(path)
realNode&&fsCache.refresh(realNode),fsCache.refresh(favRoot),emit("favoriteRemove",{path:path,node:node
})}}function updateRegExp(){var paths=Object.keys(lut).map(function(p){return util.escapeRegExp(p.replace(/^~/,c9.home))

})
reFavs=paths.length?new RegExp("^("+paths.join("|")+")/"):""}function toggleRootFS(force){var showFS="boolean"==typeof force?force:settings.getBool("state/projecttree/@showfs")


showFS||enabled?!showFS&&enabled?(altRoot.children.splice(1,1),model.showAllNodes()):showFS&&!enabled?model.showAllNodes():showFS&&enabled&&(1==altRoot.children.length&&altRoot.children.push(model.realRoot),
model.showAllNodes()):model.hideAllNodes(),force&&settings.set("state/projecttree/@showfs",force)}var changed,altRoot,favRoot,stored,hasScoping,Plugin=imports.Plugin,ui=imports.ui,c9=imports.c9,tree=imports.tree,util=imports.util,find=imports.find,settings=imports.settings,commands=imports.commands,navigate=imports.navigate,watcher=imports.watcher,prefs=imports.preferences,fsCache=imports["fs.cache"],basename=require("path").basename,dirname=require("path").dirname,escapeHTML=require("ace/lib/lang").escapeHTML,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),lut={},model=fsCache.model,enabled=!1,startEmpty=options.startEmpty,realRoot=options.realRoot,alwaysScope=options.alwaysScope,home=options.home,reFavs="",loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){unwrap(),loaded=!1}),plugin.freezePublicAPI({get favorites(){return getFavoritePaths()

},_events:["favoriteAdd","favoriteRemove"],isFavoritePath:isFavoritePath,isFavoriteNode:isFavoriteNode,
addFavorite:addFavorite,removeFavorite:removeFavorite,getFavoritePaths:getFavoritePaths}),register(null,{
"tree.favorites":plugin})}return main.consumes=["Plugin","ui","fs.cache","tree","settings","util","commands","navigate","find","preferences","c9","watcher"],
main.provides=["tree.favorites"],main})


define("ace_tree/tooltip",[],function(require,exports,module){"use strict"
function Tooltip(tree){this.tree=tree,this.tree.on("mousemove",this.onMouseMove.bind(this)),this.tree.on("mousewheel",this.onMouseMove.bind(this,null)),
this.tree.renderer.scroller.addEventListener("mouseout",this.onMouseOut.bind(this)),this.setUp(),this.update=this.update.bind(this),
this.tree.renderer.on("afterRender",this.updateNodeClass.bind(this)),this.clearDelayed=lang.delayedCall(this.onMouseMove.bind(this),50)

}var dom=require("ace/lib/dom"),lang=require("ace/lib/lang")
require("./mouse/mouse_event").MouseEvent
dom.importCssString(".no-events * {pointer-events:none!important}"),function(){this.setUp=function(){
var container=this.tree.container
this.root=document.createElement("div"),this.root.className=container.className+" no-events",this.root.style.cssText="border: 0px;margin: 0px;position: absolute; bottom: initial; right: initial; width: auto; height: auto;overflow: visible;z-index: 190000; white-space: pre;pointer-events: none",
this.root.style.backgroundColor="rgb(48, 49, 48)",document.body.appendChild(this.root)},this.updateNode=function(treeDomNode){
this.node&&(this.node.parentNode.removeChild(this.node),this.node=null),this.treeDomNode=treeDomNode
var rect=treeDomNode&&treeDomNode.getBoundingClientRect(),maxW=this.tree.renderer.layerConfig.width
return!rect||treeDomNode.lastChild.getBoundingClientRect().right<=maxW?void(this.root.style.display="none"):(this.root.className=this.tree.container.className+" no-events",
this.root.style.display="",this.node=treeDomNode.cloneNode(!0),this.node.style.margin="0px",this.root.appendChild(this.node),
this.root.style.top=rect.top+"px",void(this.root.style.left=rect.left+"px"))},this.updateNodeClass=function(){
this.node&&this.treeDomNode&&(this.treeDomNode.parentNode==this.tree.renderer.$cellLayer.element?(this.node.className=this.treeDomNode.className,
this.root.className=this.tree.container.className+" no-events"):this.updateNode(null))},this.dettach=function(){},
this.attach=function(){},this.onMouseMove=function(ev){var node=ev&&ev.getNode&&ev.getNode()
node!=this.treeNode&&(this.treeNode=node,node&&this.clearDelayed.cancel(),this.tree.renderer.on("afterRender",this.update))

},this.update=function(){var renderer=this.tree.renderer
renderer.off("afterRender",this.update)
var i=renderer.layerConfig.vRange.indexOf(this.treeNode),domNode=renderer.$cellLayer.getDomNodeAtIndex(i+renderer.layerConfig.firstRow)


this.updateNode(domNode,this.treeNode)},this.onMouseOut=function(e){this.onMouseMove()},this.onMouseOver=function(ev){
this.clearDelayed.schedule()}}.call(Tooltip.prototype),module.exports=Tooltip})


define("ace/mouse/multi_select_handler",[],function(require,exports,module){function isSamePoint(p1,p2){
return p1.row==p2.row&&p1.column==p2.column}function onMouseDown(e){var ev=e.domEvent,alt=ev.altKey,shift=ev.shiftKey,ctrl=ev.ctrlKey,accel=e.getAccelKey(),button=e.getButton()


if(ctrl&&useragent.isMac&&(button=ev.button),e.editor.inMultiSelectMode&&2==button)return void e.editor.textInput.onContextMenu(e.domEvent)


if(!ctrl&&!alt&&!accel)return void(0===button&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode())


if(0===button){var selectionMode,editor=e.editor,selection=editor.selection,isMultiSelect=editor.inMultiSelectMode,pos=e.getDocumentPosition(),cursor=selection.getCursor(),inSelection=e.inSelection()||selection.isEmpty()&&isSamePoint(pos,cursor),mouseX=e.x,mouseY=e.y,onMouseSelection=function(e){
mouseX=e.clientX,mouseY=e.clientY},session=editor.session,screenAnchor=editor.renderer.pixelToScreenCoordinates(mouseX,mouseY),screenCursor=screenAnchor


if(editor.$mouseHandler.$enableJumpToDef)ctrl&&alt||accel&&alt?selectionMode=shift?"block":"add":alt&&editor.$blockSelectEnabled&&(selectionMode="block")
else if(accel&&!alt){if(selectionMode="add",!isMultiSelect&&shift)return}else alt&&editor.$blockSelectEnabled&&(selectionMode="block")


if(selectionMode&&useragent.isMac&&ev.ctrlKey&&editor.$mouseHandler.cancelContextMenu(),"add"==selectionMode){
if(!isMultiSelect&&inSelection)return
if(!isMultiSelect){var range=selection.toOrientedRange()
editor.addSelectionMarker(range)}var oldRange=selection.rangeList.rangeAtPoint(pos)
editor.inVirtualSelectionMode=!0,shift&&(oldRange=null,range=selection.ranges[0]||range,editor.removeSelectionMarker(range)),
editor.once("mouseup",function(){var tmpSel=selection.toOrientedRange()
oldRange&&tmpSel.isEmpty()&&isSamePoint(oldRange.cursor,tmpSel.cursor)?selection.substractPoint(tmpSel.cursor):(shift?selection.substractPoint(range.cursor):range&&(editor.removeSelectionMarker(range),
selection.addRange(range)),selection.addRange(tmpSel)),editor.inVirtualSelectionMode=!1})}else if("block"==selectionMode){
e.stop(),editor.inVirtualSelectionMode=!0
var initialRange,rectSel=[],blockSelect=function(){var newCursor=editor.renderer.pixelToScreenCoordinates(mouseX,mouseY),cursor=session.screenToDocumentPosition(newCursor.row,newCursor.column)


isSamePoint(screenCursor,newCursor)&&isSamePoint(cursor,selection.lead)||(screenCursor=newCursor,editor.selection.moveToPosition(cursor),
editor.renderer.scrollCursorIntoView(),editor.removeSelectionMarkers(rectSel),rectSel=selection.rectangularRangeBlock(screenCursor,screenAnchor),
editor.$mouseHandler.$clickSelection&&1==rectSel.length&&rectSel[0].isEmpty()&&(rectSel[0]=editor.$mouseHandler.$clickSelection.clone()),
rectSel.forEach(editor.addSelectionMarker,editor),editor.updateSelectionMarkers())}
isMultiSelect&&!accel?selection.toSingleRange():!isMultiSelect&&accel&&(initialRange=selection.toOrientedRange(),
editor.addSelectionMarker(initialRange)),shift?screenAnchor=session.documentToScreenPosition(selection.lead):selection.moveToPosition(pos),
screenCursor={row:-1,column:-1}
var onMouseSelectionEnd=function(e){clearInterval(timerId),editor.removeSelectionMarkers(rectSel),rectSel.length||(rectSel=[selection.toOrientedRange()]),
initialRange&&(editor.removeSelectionMarker(initialRange),selection.toSingleRange(initialRange))
for(var i=0;i<rectSel.length;i++)selection.addRange(rectSel[i])
editor.inVirtualSelectionMode=!1,editor.$mouseHandler.$clickSelection=null},onSelectionInterval=blockSelect


event.capture(editor.container,onMouseSelection,onMouseSelectionEnd)
var timerId=setInterval(function(){onSelectionInterval()},20)
return e.preventDefault()}}}var event=require("../lib/event"),useragent=require("../lib/useragent")
exports.onMouseDown=onMouseDown})


define("ace/commands/multi_select_commands",[],function(require,exports,module){exports.defaultCommands=[{
name:"addCursorAbove",exec:function(editor){editor.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"
},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",exec:function(editor){editor.selectMoreLines(1)

},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",
exec:function(editor){editor.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"
},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",exec:function(editor){editor.selectMoreLines(1,!0)

},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{
name:"selectMoreBefore",exec:function(editor){editor.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"
},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",exec:function(editor){editor.selectMore(1)

},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",
exec:function(editor){editor.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"
},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",exec:function(editor){editor.selectMore(1,!0)

},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0
},{name:"splitIntoLines",exec:function(editor){editor.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",
mac:"Ctrl-Alt-L"},readOnly:!0},{name:"alignCursors",exec:function(editor){editor.alignCursors()},bindKey:{
win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",exec:function(editor){editor.findAll()

},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],exports.multiSelectCommands=[{
name:"singleSelection",bindKey:"esc",exec:function(editor){editor.exitMultiSelectMode()},scrollIntoView:"cursor",
readOnly:!0,isAvailable:function(editor){return editor&&editor.inMultiSelectMode}}]
var HashHandler=require("../keyboard/hash_handler").HashHandler
exports.keyboardHandler=new HashHandler(exports.multiSelectCommands)})


define("ace/multi_select",[],function(require,exports,module){function find(session,needle,dir){return search.$options.wrap=!0,
search.$options.needle=needle,search.$options.backwards=dir==-1,search.find(session)}function isSamePoint(p1,p2){
return p1.row==p2.row&&p1.column==p2.column}function MultiSelect(editor){editor.$multiselectOnSessionChange||(editor.$onAddRange=editor.$onAddRange.bind(editor),
editor.$onRemoveRange=editor.$onRemoveRange.bind(editor),editor.$onMultiSelect=editor.$onMultiSelect.bind(editor),
editor.$onSingleSelect=editor.$onSingleSelect.bind(editor),editor.$multiselectOnSessionChange=exports.onSessionChange.bind(editor),
editor.$checkMultiselectChange=editor.$checkMultiselectChange.bind(editor),editor.$multiselectOnSessionChange(editor),
editor.on("changeSession",editor.$multiselectOnSessionChange),editor.on("mousedown",onMouseDown),editor.commands.addCommands(commands.defaultCommands),
addAltCursorListeners(editor))}function addAltCursorListeners(editor){function reset(e){altCursor&&(editor.renderer.setMouseCursor(""),
altCursor=!1)}var el=editor.textInput.getElement(),altCursor=!1
event.addListener(el,"keydown",function(e){var altDown=18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey)


editor.$blockSelectEnabled&&altDown?altCursor||(editor.renderer.setMouseCursor("crosshair"),altCursor=!0):altCursor&&reset()

}),event.addListener(el,"keyup",reset),event.addListener(el,"blur",reset)}var RangeList=require("./range_list").RangeList,Range=require("./range").Range,Selection=require("./selection").Selection,onMouseDown=require("./mouse/multi_select_handler").onMouseDown,event=require("./lib/event"),lang=require("./lib/lang"),commands=require("./commands/multi_select_commands")


exports.commands=commands.defaultCommands.concat(commands.multiSelectCommands)
var Search=require("./search").Search,search=new Search,EditSession=require("./edit_session").EditSession

;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(EditSession.prototype),
function(){this.ranges=null,this.rangeList=null,this.addRange=function(range,$blockChangeEvents){if(range){
if(!this.inMultiSelectMode&&0===this.rangeCount){var oldRange=this.toOrientedRange()
if(this.rangeList.add(oldRange),this.rangeList.add(range),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),
$blockChangeEvents||this.fromOrientedRange(range)
this.rangeList.removeAll(),this.rangeList.add(oldRange),this.$onAddRange(oldRange)}range.cursor||(range.cursor=range.end)


var removed=this.rangeList.add(range)
return this.$onAddRange(range),removed.length&&this.$onRemoveRange(removed),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),
this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),$blockChangeEvents||this.fromOrientedRange(range)

}},this.toSingleRange=function(range){range=range||this.ranges[0]
var removed=this.rangeList.removeAll()
removed.length&&this.$onRemoveRange(removed),range&&this.fromOrientedRange(range)},this.substractPoint=function(pos){
var removed=this.rangeList.substractPoint(pos)
if(removed)return this.$onRemoveRange(removed),removed[0]},this.mergeOverlappingRanges=function(){var removed=this.rangeList.merge()


removed.length?this.$onRemoveRange(removed):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(range){
this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(range),this._signal("addRange",{range:range
})},this.$onRemoveRange=function(removed){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){
var lastRange=this.rangeList.ranges.pop()
removed.push(lastRange),this.rangeCount=0}for(var i=removed.length;i--;){var index=this.ranges.indexOf(removed[i])


this.ranges.splice(index,1)}this._signal("removeRange",{ranges:removed}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,
this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),lastRange=lastRange||this.ranges[0],
lastRange&&!lastRange.isEqual(this.getRange())&&this.fromOrientedRange(lastRange)},this.$initRangeList=function(){
this.rangeList||(this.rangeList=new RangeList,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){
return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){
if(this.rangeCount>1){var ranges=this.rangeList.ranges,lastRange=ranges[ranges.length-1],range=Range.fromPoints(ranges[0].start,lastRange.end)


this.toSingleRange(),this.setSelectionRange(range,lastRange.cursor==lastRange.start)}else{var range=this.getRange(),isBackwards=this.isBackwards(),startRow=range.start.row,endRow=range.end.row


if(startRow==endRow){if(isBackwards)var start=range.end,end=range.start
else var start=range.start,end=range.end
return this.addRange(Range.fromPoints(end,end)),void this.addRange(Range.fromPoints(start,start))}var rectSel=[],r=this.getLineRange(startRow,!0)


r.start.column=range.start.column,rectSel.push(r)
for(var i=startRow+1;i<endRow;i++)rectSel.push(this.getLineRange(i,!0))
r=this.getLineRange(endRow,!0),r.end.column=range.end.column,rectSel.push(r),rectSel.forEach(this.addRange,this)

}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var ranges=this.rangeList.ranges,lastRange=ranges[ranges.length-1],range=Range.fromPoints(ranges[0].start,lastRange.end)


this.toSingleRange(),this.setSelectionRange(range,lastRange.cursor==lastRange.start)}else{var cursor=this.session.documentToScreenPosition(this.selectionLead),anchor=this.session.documentToScreenPosition(this.selectionAnchor),rectSel=this.rectangularRangeBlock(cursor,anchor)


rectSel.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(screenCursor,screenAnchor,includeEmptyLines){
var rectSel=[],xBackwards=screenCursor.column<screenAnchor.column
if(xBackwards)var startColumn=screenCursor.column,endColumn=screenAnchor.column
else var startColumn=screenAnchor.column,endColumn=screenCursor.column
var yBackwards=screenCursor.row<screenAnchor.row
if(yBackwards)var startRow=screenCursor.row,endRow=screenAnchor.row
else var startRow=screenAnchor.row,endRow=screenCursor.row
startColumn<0&&(startColumn=0),startRow<0&&(startRow=0),startRow==endRow&&(includeEmptyLines=!0)
for(var row=startRow;row<=endRow;row++){var range=Range.fromPoints(this.session.screenToDocumentPosition(row,startColumn),this.session.screenToDocumentPosition(row,endColumn))


if(range.isEmpty()){if(docEnd&&isSamePoint(range.end,docEnd))break
var docEnd=range.end}range.cursor=xBackwards?range.start:range.end,rectSel.push(range)}if(yBackwards&&rectSel.reverse(),
!includeEmptyLines){for(var end=rectSel.length-1;rectSel[end].isEmpty()&&end>0;)end--
if(end>0)for(var start=0;rectSel[start].isEmpty();)start++
for(var i=end;i>=start;i--)rectSel[i].isEmpty()&&rectSel.splice(i,1)}return rectSel}}.call(Selection.prototype)


var Editor=require("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),
this.renderer.updateBackMarkers()},this.addSelectionMarker=function(orientedRange){orientedRange.cursor||(orientedRange.cursor=orientedRange.end)


var style=this.getSelectionStyle()
return orientedRange.marker=this.session.addMarker(orientedRange,"ace_selection",style),this.session.$selectionMarkers.push(orientedRange),
this.session.selectionMarkerCount=this.session.$selectionMarkers.length,orientedRange},this.removeSelectionMarker=function(range){
if(range.marker){this.session.removeMarker(range.marker)
var index=this.session.$selectionMarkers.indexOf(range)
index!=-1&&this.session.$selectionMarkers.splice(index,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length

}},this.removeSelectionMarkers=function(ranges){for(var markerList=this.session.$selectionMarkers,i=ranges.length;i--;){
var range=ranges[i]
if(range.marker){this.session.removeMarker(range.marker)
var index=markerList.indexOf(range)
index!=-1&&markerList.splice(index,1)}}this.session.selectionMarkerCount=markerList.length},this.$onAddRange=function(e){
this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){
this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},
this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),
this.keyBinding.addKeyboardHandler(commands.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),
this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,
this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(commands.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),
this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){
var command=e.command,editor=e.editor
if(editor.multiSelect){if(command.multiSelectAction)"forEach"==command.multiSelectAction?result=editor.forEachSelection(command,e.args):"forEachLine"==command.multiSelectAction?result=editor.forEachSelection(command,e.args,!0):"single"==command.multiSelectAction?(editor.exitMultiSelectMode(),
result=command.exec(editor,e.args||{})):result=command.multiSelectAction(editor,e.args||{})
else{var result=command.exec(editor,e.args||{})
editor.multiSelect.addRange(editor.multiSelect.toOrientedRange()),editor.multiSelect.mergeOverlappingRanges()

}return result}},this.forEachSelection=function(cmd,args,options){if(!this.inVirtualSelectionMode){var result,keepOrder=options&&options.keepOrder,$byLines=1==options||options&&options.$byLines,session=this.session,selection=this.selection,rangeList=selection.rangeList,ranges=(keepOrder?selection:rangeList).ranges


if(!ranges.length)return cmd.exec?cmd.exec(this,args||{}):cmd(this,args||{})
var reg=selection._eventRegistry
selection._eventRegistry={}
var tmpSel=new Selection(session)
this.inVirtualSelectionMode=!0
for(var i=ranges.length;i--;){if($byLines)for(;i>0&&ranges[i].start.row==ranges[i-1].end.row;)i--
tmpSel.fromOrientedRange(ranges[i]),tmpSel.index=i,this.selection=session.selection=tmpSel
var cmdResult=cmd.exec?cmd.exec(this,args||{}):cmd(this,args||{})
result||void 0===cmdResult||(result=cmdResult),tmpSel.toOrientedRange(ranges[i])}tmpSel.detach(),this.selection=session.selection=selection,
this.inVirtualSelectionMode=!1,selection._eventRegistry=reg,selection.mergeOverlappingRanges()
var anim=this.renderer.$scrollAnimation
return this.onCursorChange(),this.onSelectionChange(),anim&&anim.from==anim.to&&this.renderer.animateScrolling(anim.from),
result}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()

},this.getSelectedText=function(){var text=""
if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var ranges=this.multiSelect.rangeList.ranges,buf=[],i=0;i<ranges.length;i++)buf.push(this.session.getTextRange(ranges[i]))


var nl=this.session.getDocument().getNewLineCharacter()
text=buf.join(nl),text.length==(buf.length-1)*nl.length&&(text="")}else this.selection.isEmpty()||(text=this.session.getTextRange(this.getSelectionRange()))


return text},this.$checkMultiselectChange=function(e,anchor){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){
var range=this.multiSelect.ranges[0]
if(this.multiSelect.isEmpty()&&anchor==this.multiSelect.anchor)return
var pos=anchor==this.multiSelect.anchor?range.cursor==range.start?range.end:range.start:range.cursor
pos.row==anchor.row&&this.session.$clipPositionToDocument(pos.row,pos.column).column==anchor.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())

}},this.findAll=function(needle,options,additive){if(options=options||{},options.needle=needle||options.needle,
void 0==options.needle){var range=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange()


options.needle=this.session.getTextRange(range)}this.$search.set(options)
var ranges=this.$search.findAll(this.session)
if(!ranges.length)return 0
var selection=this.multiSelect
additive||selection.toSingleRange(ranges[0])
for(var i=ranges.length;i--;)selection.addRange(ranges[i],!0)
return range&&selection.rangeList.rangeAtPoint(range.start)&&selection.addRange(range,!0),ranges.length

},this.selectMoreLines=function(dir,skip){var range=this.selection.toOrientedRange(),isBackwards=range.cursor==range.end,screenLead=this.session.documentToScreenPosition(range.cursor)


this.selection.$desiredColumn&&(screenLead.column=this.selection.$desiredColumn)
var lead=this.session.screenToDocumentPosition(screenLead.row+dir,screenLead.column)
if(range.isEmpty())var anchor=lead
else var screenAnchor=this.session.documentToScreenPosition(isBackwards?range.end:range.start),anchor=this.session.screenToDocumentPosition(screenAnchor.row+dir,screenAnchor.column)


if(isBackwards){var newRange=Range.fromPoints(lead,anchor)
newRange.cursor=newRange.start}else{var newRange=Range.fromPoints(anchor,lead)
newRange.cursor=newRange.end}if(newRange.desiredColumn=screenLead.column,this.selection.inMultiSelectMode){
if(skip)var toRemove=range.cursor}else this.selection.addRange(range)
this.selection.addRange(newRange),toRemove&&this.selection.substractPoint(toRemove)},this.transposeSelections=function(dir){
for(var session=this.session,sel=session.multiSelect,all=sel.ranges,i=all.length;i--;){var range=all[i]


if(range.isEmpty()){var tmp=session.getWordRange(range.start.row,range.start.column)
range.start.row=tmp.start.row,range.start.column=tmp.start.column,range.end.row=tmp.end.row,range.end.column=tmp.end.column

}}sel.mergeOverlappingRanges()
for(var words=[],i=all.length;i--;){var range=all[i]
words.unshift(session.getTextRange(range))}dir<0?words.unshift(words.pop()):words.push(words.shift())


for(var i=all.length;i--;){var range=all[i],tmp=range.clone()
session.replace(range,words[i]),range.start.row=tmp.start.row,range.start.column=tmp.start.column}},this.selectMore=function(dir,skip,stopAtFirst){
var session=this.session,sel=session.multiSelect,range=sel.toOrientedRange()
if(!range.isEmpty()||(range=session.getWordRange(range.start.row,range.start.column),range.cursor=dir==-1?range.start:range.end,
this.multiSelect.addRange(range),!stopAtFirst)){var needle=session.getTextRange(range),newRange=find(session,needle,dir)


newRange&&(newRange.cursor=dir==-1?newRange.start:newRange.end,this.session.unfold(newRange),this.multiSelect.addRange(newRange),
this.renderer.scrollCursorIntoView(null,.5)),skip&&this.multiSelect.substractPoint(range.cursor)}},this.alignCursors=function(){
var session=this.session,sel=session.multiSelect,ranges=sel.ranges,row=-1,sameRowRanges=ranges.filter(function(r){
return r.cursor.row==row||void(row=r.cursor.row)})
if(ranges.length&&sameRowRanges.length!=ranges.length-1){sameRowRanges.forEach(function(r){sel.substractPoint(r.cursor)

})
var maxCol=0,minSpace=1/0,spaceOffsets=ranges.map(function(r){var p=r.cursor,line=session.getLine(p.row),spaceOffset=line.substr(p.column).search(/\S/g)


return spaceOffset==-1&&(spaceOffset=0),p.column>maxCol&&(maxCol=p.column),spaceOffset<minSpace&&(minSpace=spaceOffset),
spaceOffset})
ranges.forEach(function(r,i){var p=r.cursor,l=maxCol-p.column,d=spaceOffsets[i]-minSpace
l>d?session.insert(p,lang.stringRepeat(" ",l-d)):session.remove(new Range(p.row,p.column,p.row,p.column-l+d)),
r.start.column=r.end.column=maxCol,r.start.row=r.end.row=p.row,r.cursor=r.end}),sel.fromOrientedRange(ranges[0]),
this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var range=this.selection.getRange(),fr=range.start.row,lr=range.end.row,guessRange=fr==lr


if(guessRange){var line,max=this.session.getLength()
do line=this.session.getLine(lr)
while(/[=:]/.test(line)&&++lr<max)
do line=this.session.getLine(fr)
while(/[=:]/.test(line)&&--fr>0)
fr<0&&(fr=0),lr>=max&&(lr=max-1)}var lines=this.session.removeFullLines(fr,lr)
lines=this.$reAlignText(lines,guessRange),this.session.insert({row:fr,column:0},lines.join("\n")+"\n"),
guessRange||(range.start.column=0,range.end.column=lines[lines.length-1].length),this.selection.setRange(range)

}},this.$reAlignText=function(lines,forceLeft){function spaces(n){return lang.stringRepeat(" ",n)}function alignLeft(m){
return m[2]?spaces(startW)+m[2]+spaces(textW-m[2].length+endW)+m[4].replace(/^([=:])\s+/,"$1 "):m[0]}
function alignRight(m){return m[2]?spaces(startW+textW-m[2].length)+m[2]+spaces(endW," ")+m[4].replace(/^([=:])\s+/,"$1 "):m[0]

}function unAlign(m){return m[2]?spaces(startW)+m[2]+spaces(endW)+m[4].replace(/^([=:])\s+/,"$1 "):m[0]

}var startW,textW,endW,isLeftAligned=!0,isRightAligned=!0
return lines.map(function(line){var m=line.match(/(\s*)(.*?)(\s*)([=:].*)/)
return m?null==startW?(startW=m[1].length,textW=m[2].length,endW=m[3].length,m):(startW+textW+endW!=m[1].length+m[2].length+m[3].length&&(isRightAligned=!1),
startW!=m[1].length&&(isLeftAligned=!1),startW>m[1].length&&(startW=m[1].length),textW<m[2].length&&(textW=m[2].length),
endW>m[3].length&&(endW=m[3].length),m):[line]}).map(forceLeft?alignLeft:isLeftAligned?isRightAligned?alignRight:alignLeft:unAlign)

}}).call(Editor.prototype),exports.onSessionChange=function(e){var session=e.session
session&&!session.multiSelect&&(session.$selectionMarkers=[],session.selection.$initRangeList(),session.multiSelect=session.selection),
this.multiSelect=session&&session.multiSelect
var oldSession=e.oldSession
oldSession&&(oldSession.multiSelect.off("addRange",this.$onAddRange),oldSession.multiSelect.off("removeRange",this.$onRemoveRange),
oldSession.multiSelect.off("multiSelect",this.$onMultiSelect),oldSession.multiSelect.off("singleSelect",this.$onSingleSelect),
oldSession.multiSelect.lead.off("change",this.$checkMultiselectChange),oldSession.multiSelect.anchor.off("change",this.$checkMultiselectChange)),
session&&(session.multiSelect.on("addRange",this.$onAddRange),session.multiSelect.on("removeRange",this.$onRemoveRange),
session.multiSelect.on("multiSelect",this.$onMultiSelect),session.multiSelect.on("singleSelect",this.$onSingleSelect),
session.multiSelect.lead.on("change",this.$checkMultiselectChange),session.multiSelect.anchor.on("change",this.$checkMultiselectChange)),
session&&this.inMultiSelectMode!=session.selection.inMultiSelectMode&&(session.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())

},exports.MultiSelect=MultiSelect,require("./config").defineOptions(Editor.prototype,"editor",{enableMultiselect:{
set:function(val){MultiSelect(this),val?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",onMouseDown)):(this.off("changeSession",this.$multiselectOnSessionChange),
this.off("mousedown",onMouseDown))},value:!0},enableBlockSelect:{set:function(val){this.$blockSelectEnabled=val

},value:!0}})})


define("ace_tree/edit",[],function(require,exports,module){"use strict"
var Range=require("ace/range").Range,UndoManager=require("ace/undomanager").UndoManager,Renderer=require("ace/virtual_renderer").VirtualRenderer,Editor=require("ace/editor").Editor,FontMetrics=require("ace/layer/font_metrics").FontMetrics


require("ace/multi_select")
var EditableTree=function(tree){this.tree=tree,this.tree.on("click",this.onClick=this.onClick.bind(this)),
this.tree.on("blur",this.onTreeBlur=this.onTreeBlur.bind(this)),this.tree.on("focus",this.onTreeFocus=this.waitForRename.bind(this)),
this.tree.on("mousedown",this.onMouseDown=this.onMouseDown.bind(this)),this.tree.on("dblclick",this.onDoubleClick=this.onDoubleClick.bind(this)),
this.tree.on("startDrag",this.onTreeBlur),this.timer=null};(function(){this.RENAME_DELAY=400,this.onTreeBlur=function(e){
this.cancel()},this.onDoubleClick=function(e){var node=e.getNode()
if(this.tree.provider.columns){if(2==e.domEvent.detail&&node){var columnData=this.tree.renderer.$headingLayer.findColumn(e.getDocumentPosition().x),column=columnData&&columnData.column


column.editor&&(this.startRename(node,column),e.stop())}}else;},this.onMouseDown=function(e){if(this.cancel(),
!(e.domEvent.detail>1||0!==e.getButton())){var sel=this.tree.selection.getSelectedNodes()
1==sel.length&&e.editor.isFocused()&&!this.afterRename&&(this.lastNode=sel[0])}},this.cancel=function(){
this.timer&&clearTimeout(this.timer),this.lastNode=null},this.waitForRename=function(){this.afterRename=setTimeout(function(){
this.afterRename=null}.bind(this),10)},this.onClick=function(e){var node=e.getNode()
if(!this.tree.provider.columns){var lastNode=this.lastNode
this.cancel()
var sel=this.tree.selection.getSelectedNodes()
1==sel.length&&node&&lastNode&&node==sel[0]&&node==lastNode&&(this.timer=setTimeout(function(){this.cancel()


var sel=this.tree.selection.getSelectedNodes()
lastNode===sel[0]&&1==sel.length&&this.startRename(lastNode)}.bind(this),this.RENAME_DELAY))}},this.createEditor=function(el){
var renderer=new Renderer(el),wrapper=document.createElement("div")
wrapper.className="ace_wrapper",wrapper.appendChild(renderer.container),wrapper.style.position="absolute",
renderer.screenToTextCoordinates=function(x,y){var pos=this.pixelToScreenCoordinates(x,y)
return this.session.screenToDocumentPosition(Math.min(this.session.getScreenLength()-1,Math.max(pos.row,0)),Math.max(pos.column,0))

},renderer.setStyle("ace_one-line"),renderer.setStyle("ace_tree-editor")
var editor=new Editor(renderer)
editor.session.setUndoManager(new UndoManager),editor.wrapper=wrapper,editor.setHighlightActiveLine(!1),
editor.setShowPrintMargin(!1),editor.renderer.setShowGutter(!1),editor.renderer.setHighlightGutterLine(!1),
editor.$mouseHandler.$focusWaitTimout=0,editor.renderer.setPadding(2),editor.container.style.font="inherit",
editor.renderer.$markerBack.element.style.marginTop=editor.renderer.$cursorLayer.element.style.marginTop="1px",
this.column&&(editor.renderer.scroller.style.paddingTop="1px")
var tree=this.tree
return tree.renderer.fontMetrics||(tree.renderer.fontMetrics=new FontMetrics(tree.renderer.container)),
tree.renderer.fontMetrics.checkForSizeChanges(),editor.session.$setFontMetrics(tree.renderer.fontMetrics),
editor},this._initEditor=function(){this.ace=this.createEditor(),this.ace.treeEditor=this,this.ace.commands.bindKeys({
Esc:function(ace){ace.treeEditor.endRename(!0)},Enter:function(ace){ace.treeEditor.endRename()},"ctrl-s|cmd-s":function(ace){
ace.treeEditor.endRename()},Tab:function(ace){ace.treeEditor.editNext(1)},"Shift-Tab":function(ace){ace.treeEditor.editNext(-1)

}}),this.tree.container.appendChild(this.ace.wrapper),setTimeout(function(){this.ace&&(this.ace.focus(),
this.ace.on("blur",this._onBlur=this._onBlur.bind(this)))}.bind(this),20),this.tree.renderer.on("afterRender",this._onAfterRender=this._onAfterRender.bind(this)),
this.ace.renderer.on("afterRender",this._onAfterRender),this.ace.on("execCommand",function(){this.tree.reveal(this.renaming,!1)

}.bind(this)),this.ace.focus(),this._onAfterRender(),this.tree._emit("createEditor",{ace:this.ace})},
this._onBlur=function(){this.ace&&this.ace.textInput&&this.renaming&&(this.ace.$mouseHandler.isMousePressed||this.endRename())

},this._onAfterRender=function(){var i=this.tree.provider.getIndexForNode(this.renaming),domNode=this.tree.renderer.$cellLayer.getDomNodeAtIndex(i),style=this.ace.wrapper.style


if(!domNode||!domNode.lastChild)return style.top="-100px"
var renameNode=this.column?domNode.children[this.column.index]:domNode.lastChild
renameNode.textContent||(renameNode.textContent="\xa0"),this.column&&this.renaming.fullWidth&&(renameNode=renameNode.parentNode)


var rect=renameNode.getBoundingClientRect(),treeRect=this.tree.container.getBoundingClientRect()
if(this.column){var child=renameNode.lastChild,left=rect.left,offset="tree"!==this.column.type||this.renaming.fullWidth?0:(1==child.nodeType?child.getBoundingClientRect():rect).left-left-2


style.top=rect.top-treeRect.top+"px",style.left=rect.left-treeRect.left+offset+"px",style.width=rect.width-offset+"px",
style.height=rect.height+"px"}else{var nodeRect=domNode.getBoundingClientRect(),maxWidth=Math.max(nodeRect.right-rect.left,10),chars=this.ace.session.$getStringScreenWidth(this.ace.session.getLine(0))[0],minWidth=Math.max(chars*this.tree.renderer.fontMetrics.$characterSize.width+6,15)


style.top=rect.top-treeRect.top+2+"px",style.left=rect.left-treeRect.left-2+"px",style.width=Math.min(minWidth,maxWidth)+"px",
style.height=rect.height-4+"px",domNode.style.color="transparent",this.ace.renderer.onResize(!this.lastDomNode,0,Math.min(minWidth,maxWidth),this.ace.renderer.$size.height),
this.lastDomNode=domNode}},this._destroyEditor=function(){this.lastDomNode&&(this.lastDomNode.style.color="",
this.lastDomNode),this.ace.off("blur",this._onBlur),this.tree.renderer.off("afterRender",this._onAfterRender)


var ace=this.ace
this.ace=null,this.$lastAce=ace,ace.renderer.freeze(),setTimeout(function(){var wasFocused=ace.isFocused()


ace.destroy(),ace.wrapper.parentNode&&ace.wrapper.parentNode.removeChild(ace.wrapper),wasFocused&&this.tree.focus(),
this.$lastAce=null}.bind(this))},this.findNextEditPoint=function(dir,node,col,keepColumn){null==col&&(col=this.column?this.column.index:0),
null==node&&(node=this.renaming)
var provider=this.tree.provider,columns=provider.columns
if(columns&&!keepColumn){var i=col+dir
if(columns[i])return{node:node,column:i}
col=dir<0?columns.length-1:0}var nodeIndex=provider.getIndexForNode(node),newNode=provider.getNodeAtIndex(nodeIndex+dir)


return newNode&&{node:newNode,column:col}},this.editNext=function(dir,keepColumn){var p=this.findNextEditPoint(dir,this.renaming,null,keepColumn)


if(p){if(this.renaming){var node=this.renaming
p.node==node&&p.column==(this.column&&this.column.index)+dir&&(p=null),this.stopRename()
var model=this.tree.provider
model.updateNodeAfterChange&&(node=model.updateNodeAfterChange(node),p&&(p.node=model.updateNodeAfterChange(p.node))),
p=p||this.findNextEditPoint(dir,node)}p&&p.node&&this.startRename(p.node,p.column)}},this.startRename=function(node,column){
var model=this.tree.provider
if(node=node||this.tree.selection.getCursor(),!node)return!1
if("number"==typeof column&&model.columns&&(column=model.columns[column]),model.columns&&node.fullWidth&&(column=model.columns[0]),
this.renaming===node&&this.column==column||node.noSelect)return!1
if(this.renaming&&this.endRename(!0),model.isEditable&&!model.isEditable(node)||node.isEditable===!1)return!1


this.column=column
var val=(column||model).getText(node),e={node:node,column:column,value:val}
if(this.tree._emit("beforeRename",e),!e.defaultPrevented&&e.node){this.renaming=e.node,this._initEditor(),
this.tree._emit("renameStart",e),e.node!=node&&e.value==val&&(e.value=(column||model).getText(node)),
this.tree.renderer.scrollCaretIntoView(this.renaming),this.tree.renderer.visualizeFocus()
var endCol=-1
this.renaming.isNew?val="":(val=e.value,column||node.isFolder||(endCol=val.lastIndexOf("."))),endCol<0&&(endCol=val.length),
this.origVal=val,this.ace.setValue(val),this.ace.selection.setRange(endCol?new Range(0,0,0,endCol):new Range(0,1,0,val.length))

}},this.stopRename=this.endRename=function(cancel){var node=this.renaming
if(this.renaming=null,this.cancel(),this.waitForRename(),this.tree.isFocused()||this.tree.renderer.visualizeBlur(),
node){var val=this.ace.getValue()
this._destroyEditor(),cancel||this.origVal===val||(this.tree._emit("rename",{node:node,value:val,oldValue:this.origVal,
column:this.column}),this.tree.provider._signal("change"))}}}).call(EditableTree.prototype),module.exports=EditableTree

})


define("text!plugins/c9.ide.tree/tree.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:button id="btnTreeSettings"\n      skin="header-btn"\n      class="panel-settings" />\n    <a:menu id="mnuFilesSettings" />\n    <a:menu id="mnuCtxTree" />\n    \n    <a:bar id="winOpenfiles" class="openfiles" height="10" visible="false" />\n    <a:bar id="container" class="filetree real" focussable="true" contextmenu="mnuCtxTree" />\n</a:application>')


define("text!plugins/c9.ide.tree/style.css",[],"")


define("plugins/c9.ide.tree/tree",[],function(require,exports,module){function main(options,imports,register){
function $hookIntoApfFocus(ace,amlNode){amlNode.$isTextInput=function(e){return!0},ace.on("focus",function(){
amlNode.focus()}),ace.on("blur",function(){}),amlNode.$focus=function(e,fromContextMenu){fromContextMenu?ace.renderer.visualizeFocus():ace.textInput.focus()

},amlNode.$blur=function(e){ace.isFocused()?ace.textInput.blur():ace.renderer.visualizeBlur()}}function load(){
if(loaded)return!1
loaded=!0,plugin.setCommand({name:"toggletree",hint:"show the workspace files panel",bindKey:{mac:"Command-U",
win:"Ctrl-I"}}),panels.on("afterAnimate",function(e){panels.isActive("tree")&&tree&&tree.resize()}),commands.addCommand({
name:"focusTree",bindKey:{mac:"Shift-Esc",win:"Shift-Esc"},exec:function(){panels.activate("tree"),plugin.focus()

}},plugin),c9.once("ready",function(){tree&&tree.resize()}),settings.on("read",function(e){if(settings.setDefaults("user/general",[["preview-tree","false"],["treestyle","default"]]),
settings.setDefaults("user/projecttree",[["hiddenFilePattern","*.pyc, __pycache__, .*"]]),fsCache.hiddenFilePattern=settings.get("user/projecttree/@hiddenFilePattern"),
fsCache.showHidden=settings.getBool("user/projecttree/@showhidden"),scrollPos=settings.getNumber("state/projecttree/@scrollpos"),
expandedList={},settings.exist("state/projecttree/expanded")){var paths=settings.getJson("state/projecttree/expanded")||["/"]


paths.forEach(function(path){expandedList[path]=!0}),loadedSettings=1,refreshing=!0,container&&ready()

}else loadedSettings=2,container&&ready()},plugin),settings.on("write",function(e){changed&&(settings.setJson("state/projecttree/expanded",Object.keys(expandedList)),
changed=!1)},plugin),prefs.add({General:{"Tree & Navigate":{position:25,"Enable Preview on Tree Selection":{
type:"checkbox",position:3e3,path:"user/general/@preview-tree"},"Hidden File Pattern":{type:"textbox",
path:"user/projecttree/@hiddenFilePattern",position:4e3}},"User Interface":{"Workspace Files Icon and Selection Style":{
type:"dropdown",position:3e3,path:"user/general/@treestyle",items:[{value:"default",caption:"Default"
},{value:"alternative",caption:"Alternative"}]}}}},plugin),settings.on("user/projecttree/@hiddenFilePattern",function(){
var str=settings.get("user/projecttree/@hiddenFilePattern")
fsCache.hiddenFilePattern!=str&&(fsCache.hiddenFilePattern=str,clearTimeout(refreshTimer),refreshTimer=setTimeout(function(){
refreshing||refresh(function(err){})},200))})
var css=require("text!./style.css")
ui.insertCss(css,staticPrefix,plugin),ui.insertCss(util.getFileIconCss(staticPrefix),!1,plugin),layout.on("eachTheme",function(e){
var height=parseInt(ui.getStyleRule(".filetree .tree-row","height"),10)||22
fsCache.model.rowHeightInner=height,fsCache.model.rowHeight=height,e.changed&&tree&&tree.resize(!0)})

}function draw(options){function updateScrollBarSize(){var scrollBarV=tree.renderer.scrollBarV,w=scrollBarV.isVisible?scrollBarV.getWidth():0


btnTreeSettings.$ext.style.marginRight=Math.max(w-2,0)+"px"}function updateSingleDirectoryChain(isExpand,node){
if(node.children&&1===node.children.length){var child=node.children[0]
if(child&&child.isFolder&&!(child.$depth>255)&&!fsCache.isFileHidden(child.path))return isExpand&&!child.isOpen?(expandNode(child),
!0):!isExpand&&child.isOpen?(updateSingleDirectoryChain(!1,child),delete expandedList[child.path],!0):void 0

}}function updateTreeMenuItems(e){if(e.value){var node=tree.selection.getCursor(),type=node&&node.isFolder?node===tree.provider.projectDir?"project":"folder":"file",hasNetwork=c9.has(c9.NETWORK)


this.childNodes.forEach(function(item){var match=item.match,disabled=!1
hasNetwork||item.enableOffline?item.write&&c9.readonly?disabled=!0:"clipboard"==match?disabled=!isClipboardAvailable({
type:item.command}):match&&(disabled=match.indexOf(type)===-1):disabled=!0,item.setAttribute("disabled",disabled)

}),emit("menuUpdate",{node:node,menu:this})}}function isClipboardAvailable(e){if(!tree.edit.renaming){
var cursor=tree.selection.getCursor()
if("cut"==e.type)return cursor&&"/"!=cursor.path
var nodes=clipboard.clipboardData.getData("c9/tree-nodes")
return"clearcut"==e.type?nodes&&nodes.isCut:"paste"!=e.type||nodes&&getSelectedFolder()}}function clearcut(){
var nodes=clipboard.clipboardData.getData("c9/tree-nodes")
return!!nodes&&(nodes.forEach(function(node){node.isCut=!1}),void tree.provider.setAttribute(nodes,"isCut",!1))

}if(!drawn){drawn=!0,ui.insertMarkup(options.aml,markup,plugin),container=plugin.getElement("container"),
winFilesViewer=options.aml,tree=new Tree(container.$int),$hookIntoApfFocus(tree,container),tree.renderer.setScrollMargin(10,10),
tree.renderer.setTheme({cssClass:"filetree"}),tree.setDataProvider(fsCache.model),tree.setOption("enableDragDrop",!0),
fsCache.model.$indentSize=12,fsCache.model.getIconHTML=function(node){var icon=node.isFolder?"folder":util.getFileIcon(node.label)


return"loading"===node.status&&(icon="loading"),"<span class='filetree-icon "+icon+"'></span>"},fsCache.model.getTooltipText=function(node){
var size=node.size
return(node.label||node.path)+(node.link?" => "+node.link+"\n":"")+(void 0==size||node.isFolder?"":" | "+(size<1024?size+" bytes":size<1048576?(size/1024).toFixed(2)+"KB":(size/1048576).toFixed(2)+"MB"))

},"alternative"==settings.get("user/general/@treestyle")&&ui.setStyleClass(container.$int,"alternative"),
settings.on("user/general",function(){"alternative"==settings.get("user/general/@treestyle")?ui.setStyleClass(container.$int,"alternative"):ui.setStyleClass(container.$int,"",["alternative"])

}),tree.edit=new TreeEditor(tree),layout.on("resize",function(){tree.resize()},plugin)
var btnTreeSettings=plugin.getElement("btnTreeSettings"),mnuFilesSettings=plugin.getElement("mnuFilesSettings")


btnTreeSettings.setAttribute("submenu",mnuFilesSettings),tree.renderer.on("scrollbarVisibilityChanged",updateScrollBarSize),
tree.renderer.on("resize",updateScrollBarSize),tree.renderer.scrollBarV.$minWidth=10,tree.on("drop",function(e){
e.target&&e.selectedNodes&&(e.isCopy?copy:move)(e.selectedNodes,e.target)}),plugin.panel=winFilesViewer,
c9.on("stateChange",function(e){mnuCtxTree.setAttribute("disabled",!(e.state&c9.STORAGE)),e.state&c9.NETWORK?ui.setStyleRule(".filetree.ace_tree","opacity",""):ui.setStyleRule(".filetree.ace_tree","opacity","0.5")

},plugin),ui.insertByIndex(mnuFilesSettings,new ui.item({caption:"Refresh File Tree",onclick:function(){
refresh(!0,function(){})}}),100,plugin),ui.insertByIndex(mnuFilesSettings,new ui.item({caption:"Collapse All Folders",
onclick:function(){collapseAll(),expand("/",function(){}),select("/")},enableOffline:!0}),120,plugin),
ui.insertByIndex(mnuFilesSettings,new ui.divider,200,plugin),ui.insertByIndex(mnuFilesSettings,new ui.item({
id:"mnuitemHiddenFiles",type:"check",caption:"Show Hidden Files",checked:"user/projecttree/@showhidden",
onclick:function(e){setTimeout(function(){changed=!0,settings.save(),fsCache.showHidden=e.currentTarget.checked,
refresh(function(err){})})}}),300,plugin),tree.on("changeSelection",function(e){if(!refreshing){var nodes=tree.selection.getSelectedNodes(),paths=nodes.map(function(node){
return node.path})
settings.setJson("state/tree_selection",paths),emit("select",{paths:paths,nodes:nodes})}},plugin)
var adhocPreview
tree.on("userSelect",function(e){var selected=tree.selection.getCursor();(adhocPreview||settings.getBool("user/general/@preview-tree"))&&selected&&!selected.isFolder&&tabs.preview({
path:selected.path},function(){})}),tree.commands.bindKey("Space",function(e){var selected=tree.selection.getCursor()


if(selected&&!selected.isFolder){var tab=tabs.findTab(selected.path)
adhocPreview=!(tab&&tab.document.meta.preview),adhocPreview?tabs.preview({path:selected.path},function(){}):tabs.preview({
cancel:!0},function(){})}tree.once("blur",function(){adhocPreview=!1})}),tree.commands.bindKey("Shift-Enter",function(e){
openSelection({focusNewTab:"soft"})}),tree.on("afterChoose",openSelection),tree.on("delete",function(){
remove()}),tree.provider.on("changeScrollTop",scrollHandler),tree.provider.on("expand",function(e){if(e){
var node=e,id=node.path
if((void 0!==id||node!==tree.provider.root)&&(expandedList[id]=node,emit("expand",{path:id}),!refreshing||loadedSettings!=-1)){
if(!node.isRoot){var refresh=!refreshing&&"loaded"==node.status&&Date.now()-node.$lastReadT>500
watcher.watch(id,refresh)
var substr="/"!==id[id.length-1]?id+"/":id
Object.keys(expandedList).forEach(function(path){path.startsWith(substr)&&path.indexOf("/",substr.length)==-1&&watcher.watch(path,refresh)

})}updateSingleDirectoryChain(!0,node)||(changed=!0,settings.save())}}},plugin),tree.provider.on("collapse",function(e){
if(e){var node=e,id=node.path
delete expandedList[id],emit("collapse",{path:id}),node.isRoot||(watcher.unwatch(id),"/"!==id[id.length-1]&&(id+="/"),
Object.keys(expandedList).forEach(function(path){0===path.lastIndexOf(id,0)&&watcher.unwatch(path)})),
updateSingleDirectoryChain(!1,node)||(changed=!0,settings.save())}},plugin),tree.on("beforeRename",function(e){
emit("beforeRename",e)===!1&&e.preventDefault()}),tree.on("rename",function(e){function doRename(){fs.rename(path,newpath,{},function(err,success){
if(err){var message=err.message
return"EEXIST"==err.code&&(message="File "+newpath+" already exists."),showError(message)}dirname(newpath)!=dirname(path)&&expandAndSelect(newpath)

}),emit("rename",{path:newpath,oldpath:path})}if(!c9.has(c9.STORAGE))return!1
if("/"==e.path)return alert("Cannot rename project folder","Unable to rename the project folder","The project folder name is related to the url of your project and cannot be renamed here."),
!1
var node=e.node,name=e.value.trim(),path=node.path,newpath=join(path,"..",name)
if(path!=newpath){var m=/([\0\\\n\r])/.exec(name)||"win32"==c9.platform&&/([\\:*?"<>|])/.exec(name)
if(m)return showError("Invalid character '"+m[0]+"' in '"+name+"'"),!1
fsCache.isFileHidden(newpath)&&!settings.getBool("user/projecttree/@showhidden")&&(settings.set("user/projecttree/@showhidden",!0),
changed=!0,fsCache.showHidden=!0,refresh(!0,function(){})),dirname(newpath)!=dirname(path)?(tree.edit.$lastAce&&tree.edit.$lastAce.blur(),
question("Confirm move to a new folder","move '"+e.oldValue+"' to \n'"+dirname(newpath)+"'?","",doRename)):doRename()

}},plugin)
var mnuCtxTree=plugin.getElement("mnuCtxTree")
menus.decorate(mnuCtxTree),plugin.addElement(mnuCtxTree),menus.addItemByPath("context/tree/",mnuCtxTree,0,plugin),
menus.addItemToMenu(mnuCtxTree,new ui.item({match:"file","class":"strong",caption:"Open",onclick:openSelection
}),100,plugin),menus.addItemToMenu(mnuCtxTree,new ui.divider,200,plugin),menus.addItemToMenu(mnuCtxTree,new ui.item({
caption:"Refresh",onclick:function(){refresh(tree.selection.getSelectedNodes(),function(){})}}),210,plugin),
menus.addItemToMenu(mnuCtxTree,new ui.item({match:"file|folder",write:!0,caption:"Rename",onclick:function(){
tree.edit.startRename()}}),300,plugin),menus.addItemToMenu(mnuCtxTree,new ui.item({match:"file|folder",
write:!0,caption:"Delete",onclick:function(){remove()}}),310,plugin),menus.addItemToMenu(mnuCtxTree,new ui.divider({}),700,plugin),
menus.addItemToMenu(mnuCtxTree,new ui.item({match:"file|folder",write:!0,command:"cut",caption:"Cut"}),710,plugin),
menus.addItemToMenu(mnuCtxTree,new ui.item({match:"file|folder",write:!0,command:"copy",caption:"Copy"
}),720,plugin),menus.addItemToMenu(mnuCtxTree,new ui.item({match:"clipboard",write:!0,command:"paste",
caption:"Paste"}),730,plugin),menus.addItemToMenu(mnuCtxTree,new ui.item({match:"file|folder",write:!0,
caption:"Duplicate",onclick:function(){var nodes=tree.selection.getSelectedNodes()
copy(nodes)}}),740,plugin),menus.addItemToMenu(mnuCtxTree,new ui.divider({}),800,plugin),menus.addItemToMenu(mnuCtxTree,new ui.item({
id:"itemCtxTreeNewFile",match:"file|folder|project",write:!0,caption:"New File",onclick:function(){createFile(null,!1,function(){})

}}),1520,plugin),menus.addItemToMenu(mnuCtxTree,new ui.item({match:"file|folder|project",write:!0,caption:"New Folder",
onclick:function(){createFolder("New Folder",!1,function(){})}}),1540,plugin),container.setAttribute("contextmenu",mnuCtxTree),
mnuCtxTree.addEventListener("prop.visible",updateTreeMenuItems),mnuFilesSettings.addEventListener("prop.visible",updateTreeMenuItems),
clipboard.registerHandler(container,{isClipboardAvailable:isClipboardAvailable,cut:function(e){if(isClipboardAvailable({
type:"cut"})){clearcut()
var nodes=tree.selection.getSelectedNodes()
nodes.forEach(function(node){node.isCut=!0}),tree.provider.setAttribute(nodes,"isCut",!0),clipboard.clipboardData.setData("c9/tree-nodes",nodes)

}},copy:function(e){isClipboardAvailable({type:"copy"})&&(clearcut(),clipboard.clipboardData.setData("c9/tree-nodes",tree.selection.getSelectedNodes()))

},paste:function(e){if(isClipboardAvailable({type:"paste"})){var nodes=clipboard.clipboardData.getData("c9/tree-nodes"),target=getSelectedFolder()


nodes.isCut?(clearcut(),move(nodes,target)):(nodes.some(function(node){if(node.path==target.path)return!0

})&&(target=target.parent),copy(nodes,target))}},clearcut:function(e){return!!isClipboardAvailable({type:"clearcut"
})&&void clearcut()}}),loadedSettings>0&&ready()}}function remove(selection){return!!c9.has(c9.STORAGE)&&(selection||(selection=tree.selection.getSelectedNodes()),
selection.indexOf(fsCache.model.projectDir)>-1?(alert("Cannot remove project folder","Unable to remove the project folder","The project folder can not be deleted. To delete this project go to the dashboard."),
!1):emit("delete",{selection:selection})!==!1&&confirmRemove(selection,function(file){file.isFolder?fs.rmdir(file.path,{
recursive:!0},function(){}):fs.rmfile(file.path,function(){})}))}function move(files,to,options,cb){function done(){
if(toOverwrite.length&&!overwrite){var item=toOverwrite[0]
confirmRename("File already exists","File already exists",'"'+item.path+'" already exists, do you want to replace it? Replacing it will overwrite its current contents.',function(all){
var files=toOverwrite.splice(0,all?toOverwrite.length:1)
move(files,to,{overwrite:!0}),done()},function(all){toOverwrite.splice(0,all?toOverwrite.length:1),done()

},{all:toOverwrite.length>1})}else errors.length?(alert("cannot move files","cannot move files"+errors.join("\n"),""),
cb&&cb(errors),errors=[]):cb&&cb()}if(!c9.has(c9.STORAGE))return!1
var overwrite=options&&options.overwrite,paths=[],errors=[],toOverwrite=[],counter=0
return files.forEach(function(item){var path=item.path,name=item.label,parent=to.path,newpath=(parent+"/"+name).replace("//","/")


path!==newpath&&(paths.push(newpath),fs.rename(path,newpath,{overwrite:overwrite},function(err,result){
if(err){var shouldOverwrite="EEXIST"==err.code&&!overwrite
shouldOverwrite?toOverwrite.push(item):errors.push(path)}return++counter==paths.length&&done(),!shouldOverwrite

}))}),expandNode(findNode(to.path)),selectList(paths),scrollToSelection(),!1}function copy(files,to,cb){
if(!c9.has(c9.STORAGE))return!1
var prevent,paths=[],parentPaths=[],count=0,total=files.length
return files.forEach(function(item){var path=item.path,name=item.label,parent=to?to.path:item.parent.path,newpath=(parent+"/"+name).replace("//","/")


parentPaths.indexOf(parent)==-1&&parentPaths.push(parent),fs.copy(path,newpath,{overwrite:!1,recursive:!0
},function(err,data){!err&&data&&(path=data.to),paths.indexOf(path)==-1&&paths.push(path),++count!=total||prevent||(selectList(paths),
scrollToSelection(),cb&&cb(err,paths))}),fsCache.findNode(newpath)&&paths.push(newpath)}),paths.length&&(selectList(paths),
scrollToSelection(),paths=[]),parentPaths.forEach(function(p){expandNode(findNode(p))}),tree.on("changeSelection",function listen(){
prevent=!0,container.off("changeSelection",listen)}),!1}function focus(){tree&&tree.focus()}function scrollToSelection(){
tree.renderer.scrollCaretIntoView(null,.5)}function scrollHandler(){showHideScrollPos=tree.provider.getScrollTop(),
scrollPos=-1,scrollTimer||(scrollTimer=setTimeout(function(){tree&&settings.set("state/projecttree/@scrollpos",tree.provider.getScrollTop()),
scrollTimer=null},1e3))}function ready(){if(tree.setDataProvider(fsCache.model),1===loadedSettings){var done=function(){
loadedSettings=-1,emit.sticky("ready")}
c9.connected?setTimeout(function(){loadProjectTree(null,done)},200):loadProjectTree(null,done)}else if(options.defaultExpanded){
for(var nodes=tree.provider.getChildren(tree.provider.root),i=0;i<nodes.length;i++)expand(nodes[i],function(){})


emit.sticky("ready")}else emit.sticky("ready")}function loadProjectTree(animateScrollOnFinish,callback){
function increment(){++foldersLoaded==count&&finish()}function finish(){function end(){callback&&callback(),
settings.save()}if(refreshing){refreshing=!1
var selection=settings.getJson("state/tree_selection")
selection&&selection.length?selectList(selection):tree.selection.selectNode(tree.getFirstNode()),scrollPos&&scrollPos>-1&&(tree.provider.setScrollTop(scrollPos),
animateScrollOnFinish&&tree.renderer.animateScrolling(0)),end()}}var foldersLoaded=0,expandedNodes=Object.keys(expandedList),count=expandedNodes.length


return count?(refreshing=!0,expandedNodes.sort(),fsCache.on("orphan-append",function(e){expandedNodes.indexOf(e.path)>-1&&expandNode(fsCache.findNode(e.path))

}),void expandedNodes.forEach(function(path){var node=fsCache.findNode(path,"refresh")
return node===!1||"!"==path.charAt(0)?increment():/^[!~\/]/.test(path)?node&&"loaded"==node.status?(expandNode(node),
increment()):void fs.readdir(path,function(err,data){if(err)delete expandedList[path],changed=!0,settings.save()
else{var node=fsCache.findNode(path)
node&&expandNode(node)}increment()}):(console.error("invalid path",path),delete expandedList[path],increment())

})):(refreshing=!1,callback&&callback("Nothing to do"))}function refresh(fsNodes,callback){return(!refreshing||fsNodes===!0)&&(emit("refresh"),
tabs.checkAllTabs(),"function"==typeof fsNodes&&(callback=fsNodes,fsNodes=null),fsNodes&&fsNodes!==!0||(fsNodes=Object.keys(expandedList)),
tree.provider.off("changeScrollTop",scrollHandler),scrollPos=tree.provider.getScrollTop(),fsNodes.forEach(function(node){
"string"==typeof node&&(node=fsCache.findNode(node,"refresh")),node&&!node.isFolder&&(node=node.parent),
node&&"loaded"===node.status&&(tree.provider.setAttribute(node,"status","pending"),node.children=null)

}),void loadProjectTree(!1,function(err){var expandedNodes=Object.keys(expandedList)
expandedList={},expandedNodes.forEach(function(path){var node=fsCache.findNode(path,"refresh")
if(node){var id=node.path
expandedList[id]=node}}),callback&&callback(err),tree.provider.on("changeScrollTop",scrollHandler),emit("refreshComplete")

}))}function openSelection(opts){if(c9.has(c9.STORAGE)){var focus=opts&&opts.focusNewTab||!0,sel=tree.selection.getSelectedNodes(),main=tree.selection.getCursor()


sel.forEach(function(node){if(node&&!node.isFolder){var pane=tabs.focussedTab&&tabs.focussedTab.pane
tabs.getPanes(tabs.container).indexOf(pane)==-1&&(pane=null),tabs.open({path:node.path,pane:pane,noanim:sel.length>1,
active:node===main,focus:node===main&&focus},function(){})}})}}function expandAndSelect(path_or_node){
var node=findNode(path_or_node)
expand(node,function(){refreshing=!1,tree.select(node),scrollToSelection()})}function expandNode(node){
fsCache.model.expand(node)}function expand(node,callback){function recur(node,path,next){if(path==-1)return next()


var ppath,pnode
"~"==path?(ppath=-1,pnode=null):node&&(node.isRootContext||emit("isRootContext",node))?(pnode=node,ppath=-1):(ppath=dirname(path),
pnode=fsCache.findNode(ppath,"expand"),path==ppath&&(ppath=-1)),recur(pnode,ppath,function(){return node||(node=fsCache.findNode(path,"expand")),
node?void("pending"===node.status?fs.readdir(path,function(err,files){expandNode(node),next()}):"loading"===node.status?fs.on("afterReaddir",function listener(e){
e.path==node.path&&(fs.off("afterReaddir",listener),expandNode(node),next())}):(expandNode(node),next())):callback(new Error("Missing Node"))

})}var path
if("string"==typeof node&&(path=node,node=fsCache.findNode(path,"expand")),callback||(callback=function(){}),
node)recur(node,node.path,callback)
else{if(!path)return callback(new Error("Missing Node"))
fs.exists(path,function(exists){return exists?void(!fsCache.showHidden&&path.split("/").some(fsCache.isFileHidden)?(fsCache.showHidden=!0,
settings.set("user/projecttree/@showhidden",!0),refresh(function(){recur(node,path,callback)})):recur(node,path,callback)):callback(new Error("File Not Found"))

})}}function findNode(path_or_node,type){return"string"==typeof path_or_node?fsCache.findNode(path_or_node,type):path_or_node

}function collapse(path_or_node){fsCache.model.collapse(findNode(path_or_node,"collapse"))}function collapseAll(){
Object.keys(expandedList).sort().reverse().forEach(function(path){collapse(path)}),expandedList={}}function getAllExpanded(){
return Object.keys(expandedList)}function resize(){tree&&tree.resize()}function select(path_or_node){
refreshing=!1,tree.select(findNode(path_or_node))}function selectList(list){refreshing=!1,tree.selection.setSelection(list.map(function(n){
return findNode(n)}))}function _nextName(path){return path.replace(/(?:\.([\d+]))?(\.[^\.\/\\]*)?$/,function(m,d,e){
return"."+(parseInt(d,10)+1||1)+(e?e:"")})}function createFolder(dirname,noRename,callback,otherTree){
otherTree||(otherTree=tree)
var node=getSelectedFolder(otherTree)
if(!node)return callback(new Error("Tree has no nodes"))
var path=(node.path+"/"+(dirname||"New Folder")).replace("//","/"),count=0
!function tryPath(path){fs.exists(path,function(exists){if(exists)return path=_nextName(path),tryPath(path)


var newpath=path+(count?"."+count:"")
fs.mkdir(newpath,function(err,data){return err?callback(err):(otherTree==tree&&expandAndSelect(newpath),
noRename||otherTree.edit.startRename(findNode(newpath)),void callback(err,newpath))})})}(path)}function createFile(filename,noRename,callback){
function tryPath(path){fs.exists(path,function(exists){if(exists)return path=_nextName(path),tryPath(path)


var newpath=path
fs.writeFile(newpath,null,function(err,data){if(err)return callback(err)
var node=fsCache.findNode(newpath,"expand")
expandAndSelect(node),noRename||tree.edit.startRename(node),callback(err,data)})
var node=fsCache.findNode(newpath,"expand")
node&&expandAndSelect(node)})}var node=getSelectedFolder()
if(!node)return callback(new Error("Tree has no nodes"))
var path=(node.path+"/"+(filename||"Untitled"+defaultExtension)).replace(/\/\//g,"/")
expand(dirname(path),function(){tryPath(path)})}function getSelectedNode(otherTree){return otherTree||(otherTree=tree),
otherTree&&(otherTree.selection.getCursor()||otherTree.getFirstNode())||fsCache.findNode("/")}function getSelectedFolder(otherTree){
var node=getSelectedNode(otherTree)
if(node)return node.isFolder||(node=node.parent),node}var container,winFilesViewer,showHideScrollPos,scrollTimer,tree,refreshTimer,c9=imports.c9,util=imports.util,Panel=imports.Panel,panels=imports.panels,settings=imports.settings,fs=imports.fs,ui=imports.ui,tabs=imports.tabManager,menus=imports.menus,layout=imports.layout,clipboard=imports.clipboard,commands=imports.commands,watcher=imports.watcher,prefs=imports.preferences,alert=imports["dialog.alert"].show,question=imports["dialog.question"].show,fsCache=imports["fs.cache"],confirmRemove=imports["dialog.fileremove"].show,confirmRename=imports["dialog.fileoverwrite"].show,showError=imports["dialog.error"].show,Tree=require("ace_tree/tree"),TreeEditor=(require("ace_tree/tooltip"),
require("ace_tree/edit")),markup=require("text!./tree.xml"),join=require("path").join,dirname=require("path").dirname,staticPrefix=options.staticPrefix,defaultExtension="",plugin=new Panel("Ajax.org",main.consumes,{
index:options.index||100,caption:"Workspace",panelCSSClass:"workspace_files",buttonCSSClass:"workspace",
minWidth:130,where:options.where||"left"}),emit=plugin.getEmitter(),expandedList={},scrollPos=-1,loadedSettings=0,refreshing=!1,changed=!1,loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("unload",function(){tree&&tree.destroy(),loaded=!1,drawn=!1,
container=null,winFilesViewer=null,showHideScrollPos=null,scrollTimer=null,tree=null,expandedList={},
scrollPos=-1,loadedSettings=0,refreshing=!1,changed=!1}),plugin.freezePublicAPI({get tree(){return tree

},get selection(){return tree.selection.getSelectedNodes().map(function(node){return node.path})},get selected(){
var node=tree&&(tree.selection.getCursor()||tree.getFirstNode())
return!!node&&node.path},get selectedNodes(){return tree&&tree.selection.getSelectedNodes()||[]},get selectedNode(){
return tree&&(tree.selection.getCursor()||tree.getFirstNode())||null},_events:["refresh","select","expand","collapse","beforeRename","delete","findNode","refreshComplete","menuUpdate"],
getSelectedNode:getSelectedNode,focus:focus,scrollToSelection:scrollToSelection,refresh:refresh,resize:resize,
openSelection:openSelection,getAllExpanded:getAllExpanded,expand:expand,expandAndSelect:expandAndSelect,
collapse:collapse,collapseAll:collapseAll,select:select,selectList:selectList,createFolder:createFolder,
createFile:createFile,remove:remove,copy:copy,move:move,getSelectedFolder:getSelectedFolder,set defaultExtension(extension){
defaultExtension=extension?"."+extension:""}}),register(null,{tree:plugin})}return main.consumes=["Panel","c9","util","fs","settings","ui","menus","panels","commands","tabManager","fs.cache","watcher","preferences","clipboard","dialog.alert","dialog.fileremove","dialog.fileoverwrite","dialog.error","layout","dialog.question"],
main.provides=["tree"],main})


define("plugins/c9.ide.layout.classic/preload",[],function(require,exports,module){function main(options,imports,register){
function preload(callback){if(settings.setDefaults("user/general",[["skin",options.defaultTheme||"flat-dark"]]),
!packed||options.loadTheme)return callback()
try{var theme=settings.get("user/general/@skin")
return getTheme(theme,callback)}catch(e){}async.forEach(Object.keys(themes),getTheme,callback)}function getTheme(name,callback){
if(themes[name])callback(null,themes[name])
else if(options.loadTheme)options.loadTheme(name,function(err,data){themes[name]=data,callback(err,data)

})
else{var url=themePrefix+"/"+name+".css"
require(["text!"+url],function(data){data+="\n/*# sourceURL="+url+" */",themes[name]=data,callback(null,data)

},function(err){callback(err)})}}var settings=imports.settings,Plugin=imports.Plugin,ui=imports.ui,async=require("async"),plugin=new Plugin("Ajax.org",main.consumes),themePrefix=options.themePrefix,packed=ui.packedThemes,themes={
dark:"","dark-gray":"","light-gray":"",light:"","flat-light":"","flat-dark":""}
plugin.freezePublicAPI({getTheme:getTheme,packed:packed}),preload(function(err){}),register(null,{"layout.preload":plugin
})}return main.consumes=["Plugin","ui","settings"],main.provides=["layout.preload"],main})


define("plugins/c9.ide.theme.flat/flat-dark",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0
var update=function(e){var fromFlat=/^flat-/.test(e.oldTheme),toFlat=/^flat-/.test(e.theme)
if("flat-dark"!=e.theme||fromFlat){if("flat-dark"==e.oldTheme&&!toFlat){var oldHeight=window.process?27:31


menus.height=oldHeight,layout.getElement("logobar").setHeight(oldHeight),menus.minimizedHeight=oldMinimizedHeight,
tabinteraction.plusMargin=oldTabInteraction,apf.tabRightDelta=oldTabDelta,settings.set("user/ace/@cursorStyle","ace")

}}else oldHeight=menus.height,layout.getElement("logobar").setHeight(40),oldMinimizedHeight=menus.minimizedHeight,
oldTabInteraction=tabinteraction.plusMargin,oldTabDelta=apf.tabRightDelta,menus.height=40,menus.minimizedHeight=8,
tabinteraction.plusMargin=14,apf.tabRightDelta=25,settings.set("user/ace/@cursorStyle","smooth slim")

}
if(layout.on("themeChange",update),"flat-dark"==layout.theme)update({theme:layout.theme})
else if(!settings.getBool("user/theme/@ask-flat-dark"),!1){var hideThemeSwitch=notify("<div class='c9-theme-switch'>The <a href='#' target='_blank'>Flat Dark Theme</a> is now available. Click here to switch.</div>",!0)


document.querySelector(".c9-theme-switch").addEventListener("click",function(){hideThemeSwitch(),settings.set("user/general/@skin","flat-dark"),
layout.updateTheme()},!1),settings.set("user/theme/@ask-flat-dark",!0)}}var oldMinimizedHeight,oldTabInteraction,oldTabDelta,Plugin=imports.Plugin,menus=imports.menus,settings=imports.settings,layout=imports.layout,tabinteraction=imports.tabinteraction,notify=imports["dialog.notification"].show,plugin=new Plugin("Ajax.org",main.consumes),loaded=(plugin.getEmitter(),
!1),drawn=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({}),register(null,{"theme.flat-dark":plugin
})}return main.consumes=["Plugin","layout","menus","tabinteraction","settings","dialog.notification"],
main.provides=["theme.flat-dark"],main})


define("plugins/c9.ide.theme.flat/flat-light",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0
var update=function(e){var fromFlat=/^flat-/.test(e.oldTheme),toFlat=/^flat-/.test(e.theme)
if("flat-light"!=e.theme||fromFlat){if("flat-light"==e.oldTheme&&!toFlat){var oldHeight=window.process?27:31


menus.height=oldHeight,layout.getElement("logobar").setHeight(oldHeight),menus.minimizedHeight=oldMinimizedHeight,
tabinteraction.plusMargin=oldTabInteraction,apf.tabRightDelta=oldTabDelta,settings.set("user/ace/@cursorStyle","ace")

}}else oldHeight=menus.height,layout.getElement("logobar").setHeight(40),oldMinimizedHeight=menus.minimizedHeight,
oldTabInteraction=tabinteraction.plusMargin,oldTabDelta=apf.tabRightDelta,menus.height=40,menus.minimizedHeight=8,
tabinteraction.plusMargin=14,apf.tabRightDelta=25,settings.set("user/ace/@cursorStyle","smooth slim")

}
if(layout.on("themeChange",update),"flat-light"==layout.theme)update({theme:layout.theme})
else if(!settings.getBool("user/theme/@ask-flat-light"),!1){var hideThemeSwitch=notify("<div class='c9-theme-switch'>The <a href='#' target='_blank'>Flat Light Theme</a> is now available. Click here to switch.</div>",!0)


document.querySelector(".c9-theme-switch").addEventListener("click",function(){hideThemeSwitch(),settings.set("user/general/@skin","flat-light"),
layout.updateTheme()},!1),settings.set("user/theme/@ask-flat-light",!0)}}var oldMinimizedHeight,oldTabInteraction,oldTabDelta,Plugin=imports.Plugin,menus=imports.menus,settings=imports.settings,layout=imports.layout,tabinteraction=imports.tabinteraction,notify=imports["dialog.notification"].show,plugin=new Plugin("Ajax.org",main.consumes),loaded=(plugin.getEmitter(),
!1),drawn=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({}),register(null,{"theme.flat-light":plugin
})}return main.consumes=["Plugin","layout","menus","tabinteraction","settings","dialog.notification"],
main.provides=["theme.flat-light"],main})


define("text!plugins/c9.ide.layout.classic/layout.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:vsplitbox id="root" anchors="0 0 0 0">\n        <a:bar id="barQuestion" height="0" visible="false">\n        </a:bar>\n        \n        <a:vsplitbox id="vbMain">\n            <a:bar skin="c9-menu-bar" id="logobar" height="31"> <!-- 40 -->\n                <a:bar class="fakehbox aligncenter padding3 bartools" id="barTools" height="25" style="padding-top:1px">\n                    <a:divider skin="c9-divider-double" class="menudivider" />\n                </a:bar>\n                <a:bar style="float:right;margin-right:-11px;" class="fakehbox aligncenter" id="barExtras">\n                    \n                </a:bar>\n            </a:bar>\n    \n            <a:hsplitbox id="hboxMain" splitter="true">\n                <a:bar id="colLeft" width="1" visible="false" />\n                <a:hsplitbox splitter="true">\n                    <a:vsplitbox id="consoleRow" splitter="true" class="colMain">\n                        <a:vsplitbox id="searchRow">\n                            <a:hsplitbox>\n                                <a:vsplitbox id="colMiddle" padding="3" />\n                            </a:hsplitbox>\n                        </a:vsplitbox>\n                    </a:vsplitbox>\n                    <a:bar id="colRight" width="1" zindex="100" visible="false" />\n                </a:hsplitbox>\n            </a:hsplitbox>\n        </a:vsplitbox>\n    </a:vsplitbox>\n</a:application>')


define("text!plugins/c9.ide.layout.classic/themes/default-dark.less",[],"")


define("text!plugins/c9.ide.layout.classic/themes/default-dark-gray.less",[],"")


define("text!plugins/c9.ide.layout.classic/themes/default-light-gray.less",[],"")


define("text!plugins/c9.ide.layout.classic/themes/default-light.less",[],"")


define("text!plugins/c9.ide.layout.classic/themes/default-flat-light.less",[],"")


define("text!plugins/c9.ide.layout.classic/themes/default-flat-dark.less",[],"")


define("text!plugins/c9.ide.layout.classic/less/lesshat.less",[],"")


define("text!plugins/c9.ide.layout.classic/keyframes.css",[],"")


define("text!plugins/c9.ide.layout.classic/less/main.less",[],"")


define("text!plugins/c9.ide.layout.classic/skins.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n<a:frame  name="frame">\n    \n\n    <a:presentation>\n        <a:main container="div[2]" caption="div[1]/span" buttons="div[1]/div">\n            <div class="frame">\n                <div class="title"><div class="buttons"/><span>-</span></div>\n                <div class="body"></div>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n    </a:presentation>\n</a:frame>\n<a:checkbox  name="cboffline">\n    \n\n    <a:presentation>\n        <a:main>\n            <div class="cboffline">\n\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:bar  name="toolbar-top">\n    \n\n    <a:presentation>\n        <a:main container=".">\n            <div class="toolbar-top">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="bar">\n    \n\n    <a:presentation>\n        <a:main container=".">\n            <div class="basic">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar  name="panel-bar">\n    \n\n    <a:presentation>\n        <a:main container=".">\n            <div class="panel-bar">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar  name="c9-menu-bar">\n    \n\n    <a:presentation>\n        <a:main container="div/div/div[1]">\n            <div class="c9-menu-bar">\n                <div class="c9-mbar-logo">\n                    <div class="c9-mbar-bcont">\n                        <div class="c9-mbar-cont"> </div>\n\n                        <div class="c9-mbar-round">\n                            <a id="backToC9" href="http://c9.io/" class="mainlogo backToC9" target="_blank" title="Go to c9.io">c9.io</a>\n                            <div class="c9-activity" id="saveStatus"><div class="light"> </div></div>\n                            <!--div id="offlineInfoDiv" class="c9-offlineInfo menu-bk upward moveleft menu-bkFocus">Keep working without<br />internet. When you\'re back online, Cloud9 syncs your files for you!<div class="offlineInfoWarn">Some features are disabled.</div></div-->\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:button  name="button">\n    \n    \n    \n    <a:presentation>\n        <a:main caption="div[3]/text()" label="div[3]/text()" background="." icon="div[3]/span" minwidth="30">\n            <div class="btn">\n                <div class="left"> </div>\n                <div class="right"> </div>\n                <div class="lbl">-\n                    <span/>\n                    <div class="btnArrow"> </div>\n                </div>\n\n             </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button  name="btn_icon_only">\n    \n    <a:presentation>\n        <a:main caption="." label="." background="." icon=".">\n            <div class="btn_icon_only"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button  name="c9-menu-btn">\n    \n\n    <a:presentation>\n        <a:main caption="text()" background="." icon="div[2]" minwidth="26">\n            <div class="c9-menu-btn">\n                -\n                <div class="c9-fix"/>\n                <div class="icon"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button  name="c9-toolbarbutton-light">\n    \n\n    <a:presentation>\n        <a:main caption="div[2]/text()" background="." icon="div[1]">\n            <div class="c9-toolbarbutton-light">\n                <div class="c9-icon"/>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button  name="c9-toolbarbutton">\n    \n\n    <a:presentation>\n        <a:main caption="div[2]/text()" background="." icon="div[1]">\n            <div class="c9-toolbarbutton">\n                <div class="c9-icon"/>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button  name="c9-toolbarbutton-glossy">\n    \n\n    <a:presentation>\n        <a:main caption="div[2]/text()" background="." icon="div[1]">\n            <div class="c9-toolbarbutton-glossy">\n                <div class="c9-icon"> </div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button  name="header-btn">\n    \n\n    <a:presentation>\n        <a:main caption="text()" background="." icon=".">\n            <div class="header-btn"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button  name="browser-btn">\n    \n\n    <a:presentation>\n        <a:main caption="text()" background="." icon="span">\n            <div class="browser-btn"><span> </span></div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button  name="btn-default-css3">\n    \n\n    <a:presentation>\n        <a:main caption="div[1]/text()" background="." icon=".">\n            <div class="btn-default-css3">\n                <div class="caption"> </div>\n                <div class="border"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:checkbox  name="checkbox">\n    \n    \n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class="cbcontainer cbbasic">\n                <div class="checkbox"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox  name="checkbox_black">\n    \n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class="cbcontainer cbblack">\n                <div class="checkbox"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox  name="checkbox_grey">\n    \n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class="cbcontainer cbgrey">\n                <div class="checkbox"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:datagrid  name="datagrid">\n    \n    \n    \n    \n    \n\n\n    <a:presentation>\n        <a:main head="div[1]" container="div[3]" pointer="div[2]" widthdiff="1" iframe2="true">\n            <div class="datagrid">\n                <div class="headings">\n\n                </div>\n                <div class="pointer"> </div>\n                <div class="records"> </div>\n            </div>\n        </a:main>\n\n        <a:headitem class="." caption="u/text()">\n            <div><u>-<span/></u></div>\n        </a:headitem>\n\n        <a:rowheaditem class="." caption="text()">\n            <span>-</span>\n        </a:rowheaditem>\n\n        <a:item class="." container="following-sibling::blockquote">\n            <div class="row"/>\n            <blockquote> </blockquote>\n        </a:item>\n\n        <a:dragindicator>\n            <div class="dragdg"> </div>\n        </a:dragindicator>\n\n        <a:cell caption="u"><span><u>-</u></span></a:cell>\n\n        <a:treecell caption="u" openclose="strong" editoroffset="0"><span class="treecell"><strong> </strong><u>-</u></span></a:treecell>\n\n        <a:container container=".">\n            <div class="dginfo">-</div>\n        </a:container>\n\n        <a:loading>\n            <div class="message"/>\n        </a:loading>\n\n        <a:empty caption=".">\n            <div class="empty"> </div>\n        </a:empty>\n    </a:presentation>\n</a:datagrid>\n<a:divider  name="divider">\n    \n\n    <a:presentation>\n        <a:main container="." caption="span" minheight="2" minwidth="2">\n            <div class="divider"><span> </span> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider  name="divider_console">\n    \n\n    <a:presentation>\n        <a:main container="." caption="." minheight="2" minwidth="0">\n            <div class="divider_console"> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider  name="c9-divider-hor">\n    \n\n    <a:presentation>\n        <a:main caption="span">\n            <div class="c9-divider-hor"><span> </span></div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider  name="c9-divider-double">\n    \n\n    <a:presentation>\n        <a:main>\n            <div class="c9-divider-double">\n                <div/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:dropdown  name="black_dropdown">\n    \n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1" item-height="21" minheight="21" maxheight="21">\n            <div class="black_dropdown">\n                <div class="lbl">-</div>\n                <div class="button"> </div>\n            </div>\n        </a:main>\n        <a:container contents=".">\n            <div class="c9-optionList">\n            </div>\n        </a:container>\n        <a:item class="." caption="text()" select="." inherit="true">\n            <div class="c9-dd-item">-</div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n<a:dropdown  name="dropdown-dark-glossy">\n    \n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1" item-height="20">\n            <div class="dropdown-dark-glossy">\n                <div class="label">-</div>\n                <div class="button"> </div>\n            </div>\n        </a:main>\n        <a:container contents=".">\n            <div class="dropdown-dark-glossy-options">\n            </div>\n        </a:container>\n        <a:item class="." caption="text()" select="." inherit="true">\n            <div class="c9-dd-item">-</div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n<a:dropdown  name="dropdown">\n    \n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1" item-height="20" minheight="20" maxheight="20">\n            <div class="dropdown">\n                <div class="dropdownlabel">-</div>\n                <div class="dropdownArrow">\n                    <span/>\n                    <div> </div>\n                </div>\n            </div>\n        </a:main>\n        <a:container contents=".">\n            <div class="optionList">\n            </div>\n        </a:container>\n        <a:item class="." caption="text()" select="." inherit="true">\n            <span class="dditem">\n                -<span/>\n            </span>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n<a:label  name="label">\n    \n\n    <a:presentation>\n        <a:main caption="." for="@for" minheight="17">\n            <div class="label"> </div>\n        </a:main>\n    </a:presentation>\n</a:label>\n<a:list  name="list">\n    \n\n    <a:presentation>\n        <a:main container=".">\n            <div class="list">\n            </div>\n        </a:main>\n        <a:item class="." caption="span/u" icon="span" select="span">\n            <div><span><u>-</u></span></div>\n        </a:item>\n        <a:dragindicator>\n            <div class="draglist"><span><u>-</u></span></div>\n        </a:dragindicator>\n        <a:loading>\n            <div class="loading">Loading...</div>\n        </a:loading>\n        <a:empty caption=".">\n            <div class="message">-</div>\n        </a:empty>\n    </a:presentation>\n</a:list>\n<a:menu  name="menu">\n    \n    <a:presentation>\n        <a:main container="." overlay="strong">\n            <blockquote class="c9menu">\n\n            </blockquote>\n        </a:main>\n        <a:item caption="text()" icon="u" hotkey="span" inherit="true">\n            <div class="menu_item"><span> </span><u> </u>-</div>\n        </a:item>\n        <a:divider inherit="true">\n            <div class="menu_divider"> </div>\n        </a:divider>\n    </a:presentation>\n</a:menu>\n<a:modalwindow  name="bk-window">\n    \n\n    <a:presentation>\n        <a:main collapsed-height="26" minheight="50" minwidth="50" container="div[3]" drag="div[1]" title="div[1]/text()" icon="div[1]/div[1]" buttons="div[1]/div[2]">\n            <div class="bk-window">\n                <div class="bk-header">\n                    -\n                    <div class="icon"/>\n                    <div class="buttons"/>\n                </div>\n                <div class="bk-content"/>\n                <div class="bk-container" />\n                <div class="bk-win-footer"/>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n        <a:cover>\n            <div class="bk-window-cover" opacity="1">\n                <div class="header"> </div>\n                <div class="c9-mbar-round"> <a href="/dashboard.html" class="mainlogo" target="_blank" title="back to dashboard">Dashboard</a>\n                </div>\n            </div>\n        </a:cover>\n    </a:presentation>\n</a:modalwindow>\n<a:modalwindow  name="bk-window2">\n    <a:presentation>\n        <a:main collapsed-height="26" minheight="50" minwidth="50" container="div[3]" drag="div[1]" title="div[1]/text()" icon="div[1]/div[1]" buttons="div[1]/div[2]">\n            <div class="bk-window">\n                <div class="bk-header">\n                    -\n                    <div class="icon"/>\n                    <div class="buttons"/>\n                </div>\n                <div class="bk-content" />\n                <div class="bk-container" />\n                <div class="bk-win-footer" />\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n    </a:presentation>\n</a:modalwindow>\n<a:radiobutton  name="radiobutton">\n    \n\n    <a:presentation>\n        <a:main label="div">\n            <div class="rbcontainer">\n                <div>\n\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n<a:spinner  name="spinner">\n    \n    \n    <a:presentation>\n        <a:main container="." input="div[2]/input" buttonplus="div/div[1]" buttonminus="div/div[2]" minwidth="35">\n            <div class="spinner">\n                <div class="buttons">\n                    <div class="plus">+</div>\n                    <div class="minus">-</div>\n                </div>\n                <div class="divfix">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:spinner>\n<a:splitter  name="splitter">\n    \n    <a:presentation>\n        <a:main handle=".">\n            <div class="splitter">\n                <div> </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:splitter>\n<a:textbox  name="tbsimple">\n    \n\n    <a:presentation>\n        <a:main input=".">\n            <input type="text" class="tbsimple"/>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:password  name="password">\n    \n\n    <a:presentation>\n        <a:main input="div/input">\n            <div class="tb_textbox searchbox searchTxt tb_console password">\n                <div class="sbtb_middle">\n                    <input type="password" class="input"/>\n                </div>\n                <div class="btnclose"> </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:password>\n<a:textbox  name="colorbox">\n    \n\n    <a:presentation>\n        <a:main input=".">\n            <input type="color" class="tbcolor"/>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox  name="textbox">\n    <a:alias>input</a:alias>\n    <a:alias>secret</a:alias>\n    \n\n    <a:presentation>\n        <a:main input="div/input">\n            <div class="tb_textbox">\n                <div class="sbtb_middle">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox  name="textarea">\n    \n\n    <a:presentation>\n        <a:main input=".">\n            <textarea type="text" class="ta"/>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:toolbar  name="toolbar">\n    <a:presentation>\n        <a:main container=".">\n            <div class="toolbar"> </div>\n        </a:main>\n        <a:bar container="." inherit="true" minheight="28">\n            <div class="subbar"> </div>\n        </a:bar>\n        <a:menubar container="." inherit="true">\n            <div class="menubar">\n            </div>\n        </a:menubar>\n        <a:button link="toolbarbutton" inherit="true"/>\n        <a:divider inherit="true">\n            <div class="divider"> </div>\n        </a:divider>\n    </a:presentation>\n</a:toolbar> \n<a:img  name="img">\n        \n\n        <a:presentation>\n            <a:main image="img/@src">\n                <div class="img">\n                    <img src=""/>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:img>\n<a:img  name="simpleimg">\n        \n\n        <a:presentation>\n            <a:main image="@src">\n                <img src=""/>\n            </a:main>\n        </a:presentation>\n    </a:img>\n<a:button  name="blackbutton">\n        \n        <a:presentation>\n            <a:main caption=".">\n                <div class="blackbutton"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n<a:textbox  name="searchbox">\n        \n\n        <a:presentation>\n            <a:main input="div[1]/div" button="div[2]">\n                <div class="tb_textbox searchbox searchTxt tb_console">\n                    <div class="sbtb_middle">\n                        <div class="input"></div>\n                    </div>\n                    <div class="btnclose"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:textbox>\n<a:textbox  name="forminput">\n        \n\n        <a:presentation>\n            <a:main input="div[1]/input" button="div[2]">\n                <div class="tb_textbox searchbox searchTxt tb_console">\n                    <div class="sbtb_middle">\n                        <input class="input" />\n                    </div>\n                    <div class="btnclose"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:textbox>\n<a:codebox  name="codebox">\n        \n\n        <a:presentation>\n            <a:main input="div[1]/div" button="div[2]">\n                <div class="ace_searchbox tb_textbox searchbox searchTxt tb_console">\n                    <div class="sbtb_middle">\n                        <div class="input"/>\n                    </div>\n                    <div class="btnclose"/>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:codebox>\n<a:codebox  name="simplebox">\n        \n\n        <a:presentation>\n            <a:main input=".">\n                <div class="simplebox">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:codebox>\n<a:tab name="editor_tab">\n\n<a:presentation>\n    <a:main pages="." buttons="div[1]/div">\n        <div class="editor_tab empty">\n            <div class="btnsesssioncontainer">\n                <div class="inside">\n                    \n                </div>\n            </div>\n        </div>\n    </a:main>\n    <a:button\n      caption   = "div[2]/div[1]/text()"\n      container = "div[2]">\n        <div class="session_btn">\n            <div class="tab_shadow"></div>\n            <div class="tab_middle">\n                <div class="sessiontab_title">-</div>\n            </div>\n        </div>\n    </a:button>\n    <a:btnclose>\n        <strong> </strong>\n    </a:btnclose>\n    <a:page container=".">\n        <div class="session_page"> </div>\n    </a:page>\n</a:presentation>\n</a:tab>\n<a:button name="c9-simple-btn">\n    <a:presentation>\n        <a:main\n          caption    = "."\n          background = "."\n          icon       = ".">\n            <div class="c9-simple-btn">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:bar name="toolbar-bottom">\n    <a:presentation>\n        <a:main container=".">\n            <div class="toolbar-top bottom">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:divider name="c9-divider">\n    <a:presentation>\n        <a:main>\n            <div class="c9-divider"> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:label name="tooltipLabel">\n    <a:presentation>\n        <a:main caption=".">\n            <div class="tooltipLabel"> </div>\n        </a:main>\n    </a:presentation>\n</a:label>\n<a:checkbox skin="grouped_checkbox">\n    <a:presentation>\n        <a:main label="div/span/text()" minheight="18">\n            <div class=\'grouped_checkbox_holder\'>\n                <div class=\'checkbox\'><span class=\'label\'>-</span></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:button name="btn_console_open">\n    <a:presentation>\n        <a:main caption="span" label="span" background="." icon="." minwidth="18">\n            <div class="btn_console_open"> \n                <span> </span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="btn_console">\n    <a:presentation>\n        <a:main caption="div" label="div" background="." icon=".">\n            <div class="btn_console"> \n                <div> </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="btn-switcher">\n    <a:presentation>\n        <a:main\n          caption    = "text()"\n          background = "."\n          icon       = ".">\n            <div class="btn-switcher">\n                -<span> </span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n</a:skin>')


define("plugins/c9.ide.layout.classic/layout",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
if(loaded=!0,settings.on("read",function(){updateTheme(!0),userLayout=settings.get("user/general/@layout"),
settings.on("user/general",function(){var newlayout=settings.get("user/general/@layout")
newlayout!=userLayout&&(userLayout=newlayout,setBaseLayout(userLayout))})},plugin),settings.on("user/general/@skin",function(){
!ignoreTheme&&updateTheme()},plugin),plugin.on("newListener",function(type,listener){"eachTheme"==type&&plugin.hasTheme&&listener({})

},plugin),!ui.packedThemes){var theme=settings.get("user/general/@skin")
ui.defineLessLibrary(require("text!./themes/default-"+theme+".less"),plugin),ui.defineLessLibrary(require("text!./less/lesshat.less"),plugin),
ui.insertCss(require("text!./keyframes.css").replace(/@\{image-path\}/g,options.staticPrefix+"/images"),!1,plugin),
ui.insertCss(require("text!./less/main.less"),options.staticPrefix,plugin)}draw()}function draw(){if(!drawn){
drawn=!0,ui.insertSkin({data:require("text!./skins.xml"),"media-path":options.staticPrefix+"/images/",
"icon-path":options.staticPrefix+"/icons/"},plugin),ui.insertMarkup(null,markup,plugin)
var hboxMain=plugin.getElement("hboxMain"),colRight=plugin.getElement("colRight")
if(hboxMain.$handle.setAttribute("id","splitterPanelLeft"),colRight.parentNode.$handle.setAttribute("id","splitterPanelRight"),
plugin.addElement(hboxMain.$handle),plugin.addElement(colRight.parentNode.$handle),logobar=plugin.getElement("logobar"),
c9.hosted){var mainlogo=logobar.$ext.getElementsByClassName("mainlogo")
mainlogo&&(mainlogo=mainlogo[0])&&(mainlogo.title="back to dashboard",mainlogo.href=dashboardUrl,mainlogo.innerHTML="Dashboard")

}["noconnection.png","close_tab_btn.png"].forEach(function(p){var img=new Image
img.src=options.staticPrefix+"/images/"+p}),window.addEventListener("resize",resize,!1),window.addEventListener("focus",resize,!1),
plugin.addOther(function(){window.removeEventListener("resize",resize,!1),window.removeEventListener("focus",resize,!1)

}),emit("draw")}}function updateTheme(noquestion,type){function changeTheme(){emit("eachTheme",{changed:!0
}),setGeckoMask()
var auto=emit("themeChange",{theme:theme,oldTheme:oldTheme,type:type})!==!1
if(oldTheme&&!noquestion)return auto?emit("themeDefaults",{theme:theme,type:type}):void question.show("Set default colors?","Would you like to reset colors to their default value?","Plugins like the terminal, the output window and others have default colors based on the main theme. Click Yes to reset the colors to the default colors for this theme.",function(){
emit("themeDefaults",{theme:theme,type:type})},function(){})}var sTheme=settings.get("user/general/@skin")


allowedThemes[sTheme]||(sTheme="dark"),void 0===noquestion&&(noquestion=!theme)
var oldTheme=theme
sTheme!==theme&&(theme=sTheme,ui.packedThemes?preload.getTheme(theme,function(err,theme){if(!err){removeTheme&&removeTheme()


var url=options.staticPrefix.replace(/c9.ide.layout.classic\/?$/,"")
theme=theme.replace(/(url\(["']?)\/static\/plugins\//g,function(_,x){return x+url}),ui.insertCss(theme,!1,{
addOther:function(remove){removeTheme=remove}}),changeTheme()}}):changeTheme())}function proposeLayoutChange(kind,force,type){
!force&&settings.getBool("user/general/@propose")||question.show("Change the Main Cloud9 Theme","Would you like to change the main theme to a "+kind+" theme?","Click Yes to change the theme or No to keep the current theme.",function(){
ignoreTheme=!0
var theme={dark:"flat-dark",light:"flat-light"}[kind]
settings.set("user/general/@skin",theme),updateTheme(!1,type),ignoreTheme=!1,settings.set("user/general/@propose",question.dontAsk)

},function(){settings.set("user/general/@propose",question.dontAsk)},{showDontAsk:!0})}function setGeckoMask(){
if(apf.isGecko){svg&&svg.parentNode.removeChild(svg)
var isFlatTheme=theme.indexOf("flat")>-1,img=options.staticPrefix+"/images/"+(isFlatTheme?"gecko_mask_flat_light.png":"gecko_mask.png"),width=isFlatTheme?76:46,height=isFlatTheme?26:24,x1=1,x2=isFlatTheme?-40:-28


document.body.insertAdjacentHTML("beforeend",'<svg xmlns="http://www.w3.org/2000/svg"><defs><mask id="tab-mask-left" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse"><image width="'+width+'px" height="'+height+'px" xlink:href="'+img+'" x="'+x1+'px"></image></mask><mask id="tab-mask-right" maskUnits="userSpaceOnUse" maskContentUnits="userSpaceOnUse"><image width="'+width+'px" height="'+height+'px" xlink:href="'+img+'" x="'+x2+'px"></image></mask></defs></svg>'),
svg=document.body.lastChild}}function findParent(obj,where){if("menus"==obj.name)return menus=obj,plugin.getElement("logobar")


if("save"==obj.name)return plugin.getElement("barTools")
if("run.gui"==obj.name)return plugin.getElement("barTools")
if("console"==obj.name)return c9console=obj,plugin.getElement("consoleRow")
if("panels"==obj.name)panels=obj
else{if("tabManager"==obj.name)return tabManager=obj,plugin.getElement("colMiddle")
if("area-left"==obj.name)return plugin.getElement("colLeft")
if("area-right"==obj.name)return plugin.getElement("colRight")
if("preview"==obj.name)return plugin.getElement("barTools")
if("runpanel"==obj.name)return plugin.getElement("barTools")
if("vim.cli"==obj.name)return plugin.getElement("searchRow")
if("findinfiles"==obj.name)return plugin.getElement("searchRow")
if("findreplace"==obj.name)return plugin.getElement("searchRow")
if("help"==obj.name)return plugin.getElement("barExtras")
if("preferences"==obj.name)return plugin.getElement("barExtras")
if("login"==obj.name)return plugin.getElement("barExtras")
if("dragdrop"==obj.name)return plugin.getElement("colMiddle")
if("dialog.notification"==obj.name)return notify=obj.show,plugin.getElement("barQuestion")}}function initMenus(menus){
menus.setRootMenu("Cloud9",50,plugin),menus.setRootMenu("File",100,plugin),menus.setRootMenu("Edit",200,plugin),
menus.setRootMenu("Find",300,plugin),menus.setRootMenu("View",400,plugin),menus.setRootMenu("Goto",500,plugin),
menus.setRootMenu("Tools",700,plugin),menus.setRootMenu("Window",800,plugin)
var amlNode=menus.get("Cloud9").item
amlNode&&amlNode.$ext&&(amlNode.$ext.className+=" c9btn"),menus.addItemByPath("File/~",new apf.divider,1e6,plugin),
menus.addItemByPath("View/~",new apf.divider,9999,plugin),menus.addItemByPath("Window/Presets",null,10200,plugin),
menus.addItemByPath("Window/Presets/Full IDE",new ui.item({onclick:function(){setBaseLayout("default")

}}),100,plugin),menus.addItemByPath("Window/Presets/Minimal Editor",new ui.item({onclick:function(){setBaseLayout("minimal")

}}),200,plugin),menus.addItemByPath("Window/Presets/Sublime Mode",new ui.item({onclick:function(){setBaseLayout("sublime")

}}),300,plugin)}function resetTheme(theme,type){ignoreTheme=!0,settings.set("user/general/@skin",theme),
updateTheme(!0),emit("themeDefaults",{theme:theme,type:type}),ignoreTheme=!1}function resize(){if(c9console&&tabManager){
var tRect=tabManager.container.$ext.getBoundingClientRect(),cRect=c9console.container.$ext.getBoundingClientRect()


cRect.top-tRect.top<30&&c9console.container.setAttribute("height",Math.max(60,window.innerHeight-tRect.top-30))

}emit("resize")}function setBaseLayout(type){"sublime"==type?(Object.keys(panels.panels).forEach(function(name){
panels.disablePanel(name,null,"tree"==name)}),c9console&&c9console.hide(),menus.minimize(),settings.set("user/ace/@cursorStyle","smooth slim"),
settings.set("user/ace/@theme","ace/theme/monokai"),settings.set("user/ace/@keyboardmode","sublime"),
settings.set("user/general/@preview-tree",!0),settings.set("user/general/@preview-navigate",!0),settings.set("user/ace/@wrapBehavioursEnabled",!0),
settings.set("user/language/@overrideMultiselectShortcuts",!1),settings.set("user/openfiles/@show",!0)):(settings.set("user/ace/@cursorStyle","ace"),
settings.set("user/ace/@theme","ace/theme/cloud9_night"),settings.set("user/ace/@keyboardmode","default"),
settings.set("user/general/@preview-tree",!1),settings.set("user/general/@preview-navigate",!1),settings.set("user/ace/@wrapBehavioursEnabled",!1),
settings.set("user/language/@overrideMultiselectShortcuts",!0),settings.set("user/openfiles/@show",c9.local),
"default"==type?(Object.keys(panels.panels).forEach(function(name){panels.enablePanel(name,!0)}),commands.exec("toggleconsole",null,{
show:!0}),menus.restore(),panels.activate("tree")):"minimal"==type&&(Object.keys(panels.panels).forEach(function(name){
panels.disablePanel(name,null,"tree"==name)}),c9console&&c9console.hide(),menus.minimize()))}function setFindArea(amlNode,options,callback){
function show(amlNode,callback){return amlNode?void anims.animateSplitBoxNode(amlNode,{height:amlNode.$ext.scrollHeight+"px",
duration:.2,timingFunction:"cubic-bezier(.10, .10, .25, .90)"},function(){amlNode.$ext.style.height="",
ui.layout.forceResize(null,!0),callback&&callback()}):callback()}function hide(amlNode,callback){return amlNode?(amlNode.visible=!1,
amlNode.$ext.style.height=amlNode.$ext.offsetHeight+"px",void(animate?anims.animateSplitBoxNode(amlNode,{
height:"0px",duration:.2,timingFunction:"ease-in-out"},function(){amlNode.visible=!0,amlNode.hide(),amlNode.parentNode&&amlNode.parentNode.removeChild(amlNode),
callback&&callback()}):(amlNode.visible=!0,amlNode.setHeight(0),amlNode.hide(),amlNode.parentNode.removeChild(amlNode),
callback&&callback()))):callback()}var animate=options.animate
void 0==animate&&(animate=settings.getBool("user/general/@animateui"))
var toHide=activeFindArea||defaultFindArea
options.isDefault&&(defaultFindArea=amlNode)
var toShow=amlNode||defaultFindArea
if(activeFindArea=amlNode,toShow!=toHide){var searchRow=plugin.getElement("searchRow")
activating=!0,toShow&&(searchRow.appendChild(toShow),toShow.show(),toShow.$ext.style.overflow="hidden",
toShow.$ext.style.height=toShow.$ext.offsetHeight+"px"),hide(toHide,function(){show(toShow,function(){
activating=!1,callback&&callback()})})}}function flagUpdate(callback){hideFlagUpdate||(hideFlagUpdate=notify("<div class='c9-update'>A new version of Cloud9 is available. Click this bar to update to the new version (requires a restart).</div>",!0),
document.querySelector(".c9-update").addEventListener("click",function(){hideFlagUpdate(),hideFlagUpdate=null,
callback()},!1))}var c9=imports.c9,Plugin=imports.Plugin,settings=imports.settings,commands=imports.commands,question=(imports["dialog.alert"].show,
imports["dialog.question"]),preload=imports["layout.preload"],anims=imports.anims,ui=imports.ui,markup=require("text!./layout.xml")


require("text!./themes/default-dark.less"),require("text!./themes/default-dark-gray.less"),require("text!./themes/default-light-gray.less"),
require("text!./themes/default-light.less"),require("text!./themes/default-flat-light.less"),require("text!./themes/default-flat-dark.less")


var logobar,removeTheme,theme,c9console,menus,tabManager,panels,userLayout,ignoreTheme,notify,svg,activeFindArea,defaultFindArea,activating,hideFlagUpdate,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),dashboardUrl=options.dashboardUrl||"/dashboard.html",loaded=!1,drawn=!1,allowedThemes={
dark:1,"dark-gray":1,"light-gray":1,light:1,"flat-light":1,"flat-dark":1}
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,window.removeEventListener("resize",resize),removeTheme&&removeTheme(),
logobar=null,removeTheme=null,theme=null,c9console=null,menus=null,tabManager=null,panels=null,userLayout=null,
ignoreTheme=null,notify=null,hideFlagUpdate=null,activeFindArea=null,defaultFindArea=null,activating=null,
svg&&svg.parentNode&&svg.parentNode.removeChild(svg),svg=null}),plugin.freezePublicAPI({get maxConsoleHeight(){
var tRect=tabManager.container.$ext.getBoundingClientRect()
return window.innerHeight-tRect.top-30},get theme(){return theme},get hasTheme(){return!ui.packedThemes||!!removeTheme

},findParent:findParent,initMenus:initMenus,resetTheme:resetTheme,setBaseLayout:setBaseLayout,setFindArea:setFindArea,
proposeLayoutChange:proposeLayoutChange,flagUpdate:flagUpdate}),register(null,{layout:plugin})}return main.consumes=["Plugin","layout.preload","c9","ui","dialog.alert","settings","commands","dialog.question","anims"],
main.provides=["layout"],main})


define("text!plugins/c9.ide.console/style.css",[],"")


define("text!plugins/c9.ide.console/console.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:hbox id="consoleButtons" pack="end" top="0" right="3" height="24" align="center" padding="0" zindex="1000">\n        <a:button id="btnConsoleMax" skin="btn_console" class="maximize" command="maximizeconsole" state="true" margin="2 2 0 0" focussable="false" />\n        <a:divider skin="divider_console" margin="3 0 0 3"></a:divider>\n        <a:button\n          id="btnClose"\n          skin="btn_icon_only"\n          class="dim22-22  console_close_btn btn_icon_onlyIcon"\n          command="toggleconsole"\n          focussable="false"\n          margin="1 0 0 1" />\n    </a:hbox>\n</a:application>')


define("plugins/c9.ide.console/console",[],function(require,module,exports){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,commands.addCommand({name:"toggleconsole",group:"Panels",bindKey:{
mac:"Ctrl-Esc",win:"F6"},exec:function(editor,args){hidden||args.show?(show(),focusConsole()):hide()}
},plugin),commands.addCommand({name:"maximizeconsole",group:"Panels",exec:function(editor,args){maximized?restoreConsoleHeight():maximizeConsoleHeight()

}},plugin),menus.addItemByPath("View/Console",new apf.item({type:"check",command:"toggleconsole",checked:"state/console/@expanded"
}),700,plugin),settings.on("read",function(e){settings.setDefaults("state/console",[["expanded","true"],["maximized","false"],["height","153"]]),
height=Math.max(minHeight,Math.min(layout.maxConsoleHeight,settings.getNumber("state/console/@height")||0)),
setTimeout(function(){settings.getBool("state/console/@expanded")&&show(!0),settings.getBool("state/console/@maximized")&&maximizeConsoleHeight()

},0),changed=!1},plugin),settings.on("write",function(e){if(container&&drawn){var state=getState(!0)
settings.setJson("state/console",state)}},plugin),tabs.on("focus",function(e){drawn&&ui.isChildOf(container,e.tab.aml)&&show()

}),void(apf.isGecko&&ui.setStyleRule(".console .btnsesssioncontainer .inside","padding-right","30px")))

}function draw(){if(!drawn){drawn=!0,ui.insertCss(cssString,options.staticPrefix,plugin),consoleRow=layout.findParent(plugin),
container=consoleRow.appendChild(new ui.bar({zindex:99,height:height,"class":"console codeditorHolder"
})),plugin.addElement(container),tabs.containers.push(container),settings.getBool("user/tabs/@asterisk")&&ui.setStyleClass(container,"asterisk"),
ui.insertMarkup(container,markup,plugin)
var splitter=consoleRow.$handle
splitter&&splitter.on("dragdrop",function(e){height=Math.max(minHeight,container.height),height&&settings.set("state/console/@height",height),
emit("resize")})
var state=settings.getJson("state/console")
state||(state=options.defaultState||{type:"pane",nodes:[{type:"tab",editorType:"terminal",active:"true"
},{type:"tab",editorType:"immediate",document:{title:"Immediate"}}]}),2!=options.testing&&(setState(state,!0,function(){}),
emit.sticky("ready")),tabs.on("paneCreate",function(e){hidden&&container&&ui.isChildOf(container,e.pane.aml)&&(e.pane._visible=!1)

}),emit("draw")}}function getState(filter){var state=tabs.getState(container.lastChild,filter),tab=tabs.focus&&tabs.findTab(state.focus)


return tab&&ui.isChildOf(container,tab.pane.aml)||delete state.focus,state}function setState(state,init,callback){
return state.container=container,tabs.setState(state,init,callback)}function getTabs(){return tabs.getTabs(container)

}function getPanes(){return tabs.getPanes(container)}function clear(){for(var tabNodes=tabs.getPanes(container),i=tabNodes.length-1;i>=0;i--){
var pane=tabNodes[i],nodes=pane.getTabs()
if(ui.isChildOf(container,pane.aml)){for(var j=nodes.length-1;j>=0;j--){var tab=nodes[j]
tab.unload()}pane.unload()}}}function maximizeConsoleHeight(){if(!maximized){show(!0),maximized=!0,apf.document.documentElement.appendChild(container)


var top=layout.getElement("root").getTop()+1
container.setAttribute("anchors",top+" 0 0 0"),lastZIndex=container.$ext.style.zIndex,container.removeAttribute("height"),
container.$ext.style.maxHeight="10000px",container.$ext.style.zIndex=1e5,settings.set("state/console/@maximized",!0),
plugin.getElement("btnConsoleMax").setValue(!0),focusConsole(),setTimeout(function(){getPanes().forEach(function(pane){
var tab=pane.activeTab
tab&&tab.editor.resize()})}),emit("resize")}}function restoreConsoleHeight(){maximized&&(maximized=!1,
layout.findParent(plugin).appendChild(container),container.removeAttribute("anchors"),maxHeight=window.innerHeight-70,
container.setAttribute("height",maxHeight&&height>maxHeight?maxHeight:height),container.$ext.style.zIndex=lastZIndex,
settings.set("state/console/@maximized",!1),plugin.getElement("btnConsoleMax").setValue(!1),focusConsole(),
getPanes().forEach(function(pane){var tab=pane.activeTab
tab&&tab.editor.resize()}),emit("resize"))}function focusConsole(){var oldFocus=tabs.focussedTab
return oldFocus&&getPanes().indexOf(oldFocus.pane)!=-1?tabs.focusTab(oldFocus):void focusActiveTabInContainer(container)

}function focusActiveTabInContainer(containerEl){var pane=tabs.findPane(containerEl.$activePaneName),tab=pane&&pane.activeTab


return tab||tabs.getPanes(containerEl).every(function(pane){return tab=pane.activeTab,!tab}),tabs.focusTab(tab),
tab}function hide(immediate){show(immediate,!0)}function show(immediate,shouldHide){if(shouldHide||draw(),
hidden!=shouldHide&&!animating){hidden=shouldHide,animating=!0,maxHeight=window.innerHeight-70,getPanes().forEach(function(pane){
pane._visible=!shouldHide}),shouldHide?tabs.focussedTab&&getPanes().indexOf(tabs.focussedTab.pane)>-1&&focusActiveTabInContainer(tabs.container):tabs.focussedTab||focusConsole()


var toHeight,finish=function(){onFinishTimer&&clearTimeout(onFinishTimer),onFinishTimer=setTimeout(function(){
shouldHide?container.hide():(container.$ext.style.minHeight=minHeight+"px",container.minheight=minHeight,
maxHeight=window.innerHeight-70),container.height=height+1,container.setAttribute("height",height),container.$ext.style[apf.CSSPREFIX+"TransitionDuration"]="",
animating=!1,settings.set("state/console/@expanded",!shouldHide),apf.layout.forceResize(),emit("resize")

},100)},animOn=settings.getBool("user/general/@animateui")
shouldHide?(toHeight=collapsedHeight,container.parentNode!=consoleRow&&restoreConsoleHeight(),container.$ext.style.minHeight=0,
container.$ext.style.maxHeight="10000px",anims.animateSplitBoxNode(container,{height:toHeight+"px",immediate:immediate||!animOn,
duration:.2,timingFunction:"ease-in-out"},finish)):(toHeight=Math.max(minHeight,Math.min(maxHeight,height)),
container.$ext.style.minHeight=0,container.setHeight(collapsedHeight),container.show(),anims.animateSplitBoxNode(container,{
height:toHeight+"px",immediate:immediate||!animOn,duration:.2,timingFunction:"cubic-bezier(.30, .08, 0, 1)"
},finish))}}function openFile(path,active,callback){"function"==typeof active&&(callback=active,active=!1),
open({path:path,active:active},callback)}function openEditor(type,active,callback){"function"==typeof active&&(callback=active,
active=!1),open({editorType:type,active:active},callback)}function open(options,callback){return options.pane||(draw(),
options.pane=container.getElementsByTagNameNS(apf.ns.aml,"tab")[0].cloud9pane),tabs.open(options,callback)

}var onFinishTimer,consoleRow,animating,container,changed,maximized,maxHeight,lastZIndex,height,Plugin=imports.Plugin,ui=imports.ui,tabs=imports.tabManager,settings=imports.settings,menus=imports.menus,anims=imports.anims,commands=imports.commands,layout=imports.layout,cssString=require("text!./style.css"),markup=require("text!./console.xml"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),hidden=!0,minHeight=60,collapsedHeight=0,loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){tabs.containers.remove(container),clear(),loaded=!1}),plugin.freezePublicAPI({
get container(){return container},_events:["draw","resize","ready"],getTabs:getTabs,getPanes:getPanes,
getState:getState,setState:setState,clear:clear,show:show,hide:hide,open:open,openFile:openFile,openEditor:openEditor
}),register(null,{console:plugin})}return main.consumes=["Plugin","tabManager","menus","settings","layout","ui","commands","anims"],
main.provides=["console"],main})


define("text!plugins/c9.ide.run/output.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <div class="toolbar">\n        <a:button\n            id       = "btnRun"\n            skin     = "c9-toolbarbutton-glossy"\n            caption  = "Run"\n            width    = "54"\n            icon     = "run.png"\n            class    = "runbtn stopped"\n            visible  = "true"\n            style    = "min-width:54px;" />\n        <a:button\n            id       = "btnRestart"\n            skin     = "c9-toolbarbutton-glossy"\n            width    = "22"\n            icon     = "restart-icon.png"\n            tooltip  = "Restart"\n            class    = "light restart"\n            style    = "min-width:22px" />\n        <!--<a:button skin="c9-toolbarbutton-glossy" id="btnConsoleClear" class="clear" icon="console_clear.png" />-->\n        <a:textbox skin="tbsimple" id="tbName" initial-message="Run Config Name" style="min-width:40px"/>\n        <a:divider skin="c9-divider" />\n        <a:label style="min-width:64px">Command:</a:label>\n        <a:textbox skin="tbsimple" id="tbCommand" minwidth="150" initial-message="Example: ./server.js --help" \n            style="flex:2;margin-right:20px !important;" />\n        <a:button\n            id       = "btnDebug"\n            skin     = "c9-toolbarbutton-glossy"\n            icon     = "bug.png"\n            state    = "true"\n            class    = "bug"\n            tooltip  = "Run in Debug Mode"\n            style    = "min-width:23px;"/>\n        <a:button skin="c9-toolbarbutton-glossy" id="btnRunner" caption="Runner: Auto" style="min-width:30px"/>\n        <a:button\n            id       = "btnCwd"\n            class    = "cwd"\n            skin     = "c9-toolbarbutton-glossy"\n            caption  = "CWD"\n            tooltip  = "Set current working directory"\n            style    = "min-width:45px"/>\n        <a:button skin="c9-toolbarbutton-glossy" id="btnEnv" caption="ENV" style="min-width:30px" class="env"/>\n    </div>\n</a:application>')


define("text!plugins/c9.ide.run/style.css",[],"")


define("plugins/c9.ide.run/output",[],function(require,exports,module){function main(options,imports,register){
function search(id,cmd,argv){id||(id="output")
for(var tablist=tabs.getTabs(),i=0;i<tablist.length;i++)if("output"==tablist[i].editorType){var state=tablist[i].document.getState(),session=tablist[i].document.getSession()


if(session){var config=state.output&&state.output.config||session.config,command=config.command||"",isSameCommand=command==cmd||command.startsWith(cmd)&&/\s/.test(command[cmd.length])


if(session.id==id||cmd&&isSameCommand)return tabs.activateTab(tablist[i]),argv&&argv.run&&tablist[i].editor.run(session,argv.callback),
!0}}}function getOutputId(){return"output"+Math.round(1e5*Math.random())+counter++}function Output(){
function runNow(session,callback){function done(){var refresh=tabs.getTabs().some(function(tab){return tab.path&&/\.run$/.test(tab.path)

})
run.getRunner(runner.caption,refresh,function(err,result){err||(runner=session.runner=result),runner["debugger"]?null==cfg.debug&&(cfg.debug=0!=runner.$debugDefaultState):cfg.debug=void 0,
cfg.debug?debug.checkAttached(start):start()})}function start(){runner||(runner="auto")
var cwd=session.config.cwd||""
"/"==cwd.charAt(0)&&(cwd=join(basePath,cwd)),session.process=debug.run(runner,{path:path,cwd:cwd,env:session.config.env||{},
args:args,debug:cfg.debug},session.id,function(err,pid){return session.connect(),filter&&(session.filter=filter),
err?(transformButton(session),session.process=null,showError(err)):(session.updateTitle(),void(!session.process||session.process.running<session.process.STARTING||(session.process.meta.debug=cfg.debug)))

}),decorateProcess(session),updateToolbar(session),callback&&callback(session.process,session.tab)}session||(session=currentSession)


var runner=session.runner
if(!runner)return void(session.runOnRunner={callback:callback})
if(session.terminal){var term=session.terminal.aceSession.term
term.$resetScreenOnStateChange=!1,settings.getBool("user/output/@keepOutput")?term.clearScreen(2):term.reset()

}var filter=session.filter
session.filter=function(){return""}
var path=session.config.command,cfg=session.config,args=splitPathArgs(path)
path=args.shift(),session.process&&session.process.running?stop(done):done(),runGui.lastRun=[runner,path]

}function splitPathArgs(pathArgs){if(!pathArgs)return[]
for(var results=[],lastStart=0,i=0;i<pathArgs.length;i++){var c=pathArgs[i]
"\\"!==c?" "===c&&(lastStart<i&&results.push(pathArgs.substring(lastStart,i)),lastStart=i+1):pathArgs=pathArgs.substr(0,i)+pathArgs.substr(i+1)

}var lastPart=pathArgs.substring(lastStart,i)
return lastPart.length&&results.push(lastPart),results}function decorateProcess(session){session.process.on("away",function(){
session==currentSession&&(btnRun.disable(),btnRestart.disable())}),session.process.on("back",function(){
session==currentSession&&(btnRun.enable(),session.process&&session.process.running==session.process.STOPPED||btnRestart.enable())

}),session.process.on("started",function(){session==currentSession&&(btnRun.enable(),btnRestart.enable(),
transformButton(session)),session.updateTitle()},plugin),session.process.on("stopping",function(){session==currentSession&&(btnRun.disable(),
btnRestart.disable()),session.updateTitle()},plugin),session.process.on("stopped",function(){session==currentSession&&(btnRun.enable(),
btnRestart.enable(),transformButton(session)),session.updateTitle()},plugin)}function transformButton(session){
if(session==currentSession){if(btnRun.setAttribute("disabled",!c9.has(c9.NETWORK)),!(session&&session.process&&session.process.running)){
var path=(tbCommand.value||"").split(" ",1)[0]
return btnRun.setAttribute("caption","Run"),btnRun.setAttribute("class","runbtn stopped"),btnRestart.disable(),
path}btnRun.setAttribute("caption","Stop"),btnRun.setAttribute("tooltip",""),btnRun.setAttribute("class","runbtn running"),
btnRun.enable(),btnRestart.show(),btnRestart.enable()}}function stop(callback){var session=currentSession


if(session){var process=session.process
process&&process.stop(function(err){err?showError(err.message||err):debug.stop(),session==currentSession&&transformButton(session),
callback(err)})}}function saveConfig(){if(currentSession&&currentSession.config.name){var json=settings.getJson("project/run/configs")||{}


json[currentSession.config.name]=currentSession.config,settings.setJson("project/run/configs",json),currentSession.updateTitle(),
handleEmit("runConfigSaved",currentSession.config)}}function removeConfig(){if(currentSession&&currentSession.config.name){
var json=settings.getJson("project/run/configs")||{}
delete json[currentSession.config.name],settings.setJson("project/run/configs",json),currentSession.updateTitle()

}}function drawEnv(){if(!model){model=new TreeData,model.emptyMessage="Type a new environment variable here...",
layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".blackdg .row","height"),10)||24


model.rowHeight=height,e.changed&&datagrid.resize(!0)}),model.$sorted=!1,model.columns=[{caption:"Name",
value:"name",width:"40%",editor:"textbox"},{caption:"Value",value:"value",width:"60%",editor:"textbox"
}],model.updateNodeAfterChange=function(node){return findNode(node.name)},mnuEnv.$setStyleClass(mnuEnv.$ext,"envcontainer")


var div=mnuEnv.$ext.appendChild(document.createElement("div"))
datagrid=new Tree(div),datagrid.renderer.setTheme({cssClass:"blackdg"}),datagrid.setDataProvider(model),
datagrid.edit=new TreeEditor(datagrid)
var justEdited=!1
datagrid.textInput.getElement().addEventListener("keydown",function(e){var cursor=datagrid.selection.getCursor(),key=keys[e.keyCode]||""

;(1==key.length||"num"==key.substr(0,3)&&cursor&&!justEdited)&&datagrid.edit.startRename(cursor,0)},!0),
datagrid.textInput.getElement().addEventListener("keyup",function(e){var cursor=datagrid.selection.getCursor()


13==e.keyCode&&cursor&&!justEdited&&datagrid.edit.startRename(cursor,0)},!0),datagrid.on("delete",function(e){
datagrid.selection.getSelectedNodes().forEach(function(n){delete model.session.config.env[n.name],model._signal("remove",n)

}),reloadModel(),saveConfig(),mnuEnv.resize()}),datagrid.on("createEditor",function(e){e.ace.commands.bindKeys({
Up:function(ace){ace.treeEditor.editNext(-1,!0)},Down:function(ace){ace.treeEditor.editNext(1,!0)}})}),
datagrid.on("rename",function(e){if(e.column){var name,value,node=e.node,config=model.session.config
if("name"==e.column.value||node.isNew?(name=e.value,value=node.value||""):(name=node.name,value=e.value),
name!==node.name||value!==node.value){if(node.isNew&&name||delete config.env[node.name],name){config.env[name]=value


var envVariable={}
envVariable[name]=value,handleEmit("envSet",name,config.env)}reloadModel(),saveConfig(),node.isNew&&findNode(name)?datagrid.edit.startRename(findNode(name),1):model.selection.setSelection(findNode(name)),
mnuEnv.resize()}}}),datagrid.on("rename",function(e){justEdited=!0,setTimeout(function(){justEdited=!1

},500)}),mnuEnv.resize=function(){mnuEnv.visible&&setTimeout(function(){mnuEnv.opener&&(mnuEnv.reopen=!0,
mnuEnv.display(null,null,!0,mnuEnv.opener),mnuEnv.reopen=!1)},10)}}}function findNode(name){var f
return model.root.children.some(function(n){return n.name==name&&(f=n)}),f}function reloadModel(){var env=[],cfg=model.session.config,sel=model.selection.getCursor()


for(var name in cfg.env)env.push({name:name,value:cfg.env[name]})
env.sort(function(a,b){return TreeData.alphanumCompare(a.name,b.name)}),model.newEnvNode=model.newEnvNode||{
name:model.emptyMessage,className:"newenv",fullWidth:!0,isNew:!0},model.setRoot({items:[].concat(env,model.newEnvNode),
$sorted:!0}),sel&&sel.name&&model.selection.setSelection(findNode(sel.name))}function updateConfig(session){
var configs=settings.getJson("project/run/configs"),cfg=configs[session.config.name]||session.config
session.config=cfg,updateRunner(session),updateToolbar(session)}function updateRunner(session){session.runner=null


var runner=session.config.runner
if(runner&&"auto"!=runner)run.getRunner(session.config.runner,function(err,result){session.setRunner(err?null:result)

})
else{var path=/([^\\ ]|\\.)*/.exec(session.config.command||"")[0]
if(!path)return
run.detectRunner({path:path},function(err,runner){session.setRunner(err?null:runner)})}}function updateToolbar(session){
if(session==currentSession){transformButton(session)
var cfg=session.config
btnDebug.setAttribute("visible",!(session.runner&&!session.runner["debugger"])),null!=cfg.debug&&btnDebug.setAttribute("value",cfg.debug),
btnRunner.setAttribute("caption","Runner: "+(cfg.runner||"Auto")),tbCommand.setAttribute("value",cfg.command),
tbName.setAttribute("value",cfg.name),btnCwd.$ext.title=cfg.cwd||"Current working directory (unset)",
btnRun.setAttribute("disabled",!c9.has(c9.NETWORK)),session.config.toolbar===!1?htmlNode.classList.add("hidetoolbar"):htmlNode.classList.remove("hidetoolbar")

}}var htmlNode,btnRun,currentSession,btnRunner,btnDebug,btnRestart,tbName,tbCommand,btnEnv,btnCwd,model,datagrid,mnuEnv,plugin=new Terminal((!0))


return plugin.on("draw",function(e){ui.insertMarkup(e.tab,markup,plugin),htmlNode=e.htmlNode,e.htmlNode.className+=" output",
btnRun=plugin.getElement("btnRun"),btnRestart=plugin.getElement("btnRestart"),btnDebug=plugin.getElement("btnDebug"),
btnRunner=plugin.getElement("btnRunner"),tbCommand=plugin.getElement("tbCommand"),tbName=plugin.getElement("tbName"),
btnEnv=plugin.getElement("btnEnv"),btnCwd=plugin.getElement("btnCwd"),btnRun.on("click",function(){var session=currentSession


session&&(session.process&&session.process.running?stop(function(){}):runNow(session))}),btnRestart.on("click",function(){
var session=currentSession
session&&session.process&&session.process.running>0&&stop(function(){runNow(session)})}),btnDebug.on("prop.value",function(e){
currentSession&&(currentSession.config.debug=e.value,saveConfig())}),tbCommand.on("afterchange",function(e){
currentSession&&currentSession.changeCommand(e.value)}),tbCommand.$ext.addEventListener("keydown",function(e){
13===e.keyCode&&currentSession&&runNow(currentSession)}),tbName.on("afterchange",function(e){currentSession&&currentSession.changeName(e.value)

}),btnRunner.setAttribute("submenu",runGui.getElement("mnuRunAs")),btnRunner.onitemclick=function(value){
run.getRunner(value,function(err,result){return err?showError("Cannot use "+value+": "+err):void currentSession.setRunner(result)

}),btnRunner.setAttribute("caption","Runner: "+value)},btnCwd.on("click",function selectCwd(e,cwd){cwd=cwd||currentSession.config&&currentSession.config.cwd||currentSession.runner&&currentSession.runner.working_dir||"/",
showSave("Select current working directory",cwd,function(directory,stat,hide){return stat?(currentSession.config.cwd=directory,
updateToolbar(currentSession),handleEmit("cwdSet",directory),void hide()):(hide(),showAlert("Select current working directory","Directory does not exist",directory,selectCwd.bind(null,e,directory)))

},function(){},{chooseCaption:"Select",hideFileInput:!0})}),mnuEnv=new ui.menu({htmlNode:document.body,
width:250}),btnEnv.setAttribute("submenu",mnuEnv),mnuEnv.on("prop.visible",function(e){if(e.value&&!mnuEnv.reopen){
drawEnv(),model.session=currentSession,model.session.config.env||(model.session.config.env={}),reloadModel()


var rect=mnuEnv.opener.$ext.getBoundingClientRect(),top=rect.top,bottom=window.innerHeight-rect.bottom,maxRows=Math.floor(Math.max(top,bottom)/datagrid.model.rowHeight)-2


datagrid.setOption("maxLines",maxRows),datagrid.resize(),mnuEnv.resize()
var node=datagrid.getFirstNode(),isNew="newenv"==node.className
isNew&&datagrid.select(node),isNew&&setTimeout(function(){datagrid.edit.startRename(node)},30)}}),c9.on("stateChange",function(){
updateToolbar(currentSession)},plugin)}),plugin.on("documentLoad",function(e){function setTabColor(){
var bg=settings.get("user/output/@backgroundColor"),shade=util.shadeColor(bg,.75),skinName=settings.get("user/general/@skin"),isLight=~skinName.indexOf("flat")||shade.isLight


doc.tab.backgroundColor=isLight?bg:shade.color,isLight?~skinName.indexOf("flat")&&!shade.isLight?(doc.tab.classList.add("dark"),
plugin.container.className="c9terminalcontainer flat-dark"):(doc.tab.classList.remove("dark"),plugin.container.className="c9terminalcontainer"):(doc.tab.classList.add("dark"),
plugin.container.className="c9terminalcontainer dark")}var doc=e.doc,tab=e.doc.tab,session=doc.getSession()


session.config||(session.config={env:{}}),session.tab=tab,session.run=function(){runNow(session)},session.setRunner=function(runner){
return runner?(session.runner=runner,session.config.runner=runner.caption,session.runOnRunner&&(runNow(session,session.runOnRunner.callback),
delete session.runOnRunner),saveConfig(),void(session==currentSession&&(btnRunner.setAttribute("caption","Runner: "+(runner?runner.caption:"Auto")),
updateToolbar(session)))):void run.getRunner("Shell command",function(err,runner){err||session.setRunner(runner)

})},session.filter=function(data,recur){if(!/output:0:.*\[dead\] - /.test(data))return/\[exited\]\r/.test(data)||/Set option: remain-on-exit \-\> on/.test(data)?(session.stopped=!1,
session.terminal.showCursor(),session.process||plugin.setState(session.doc,{running:{runner:session.runner,
debug:session.config.debug,name:session.id,pid:-1},cwd:session.cwd,id:session.id}),session.process&&session.process.checkState()):(data.indexOf("Pane is dead")>-1&&(data=0===data.lastIndexOf("[1mPane is dead[H")?"":"\r[1mPane is dead[m[K"===data?"":data.replace(/\s*Pane is dead([\s\S]*)13H/g,"").replace(/\s*Pane is dead/g,""),
data=data.replace(/\s+$/,""),session.terminal.hideCursor(),tab.classList.remove(session.process&&session.process.running>0?"running":"loading"),
session.process&&session.process.running>1&&session.process.checkState(),!recur&&session.terminal.lines.length<2*session.terminal.rows&&setTimeout(session.$reloadHistory)),
data)},session.$reloadHistory=function(){session.getOutputHistory&&session.getOutputHistory({id:session.id,
start:-1e3,end:1e3},function(e,output){if(!e&&output){session.filter&&(output=session.filter(output,!0)),
session.terminal.reset()
var convertEol=session.terminal.convertEol
session.terminal.convertEol=!0,session.terminal.write(output),session.terminal.convertEol=convertEol}
})},session.updateTitle=function(){var process=session.process
doc.tooltip=doc.title=(session.config.name||session.config.command||"[New]")+" - "+(process?process.running?"Running":"Stopped":"Idle"),
process&&process.running?tab.classList.add("running"):tab.classList.remove("running"),tab.classList.remove("loading")

},session.changeCommand=function(value){currentSession.config.command=value,saveConfig(),currentSession.runner||updateRunner(currentSession)

},session.changeName=function(value){!value&&session.config.name?question.show("Remove this configuration?","You have cleared the name of this configuration.","Would you like to remove this configuration from your project settings?",function(){
removeConfig(),session.config.name="",session.updateTitle(),handleEmit("runnerNameChanged","")},function(){
tbName.setAttribute("value",session.config.name)}):(removeConfig(),session.config.name=value,saveConfig(),
handleEmit("runnerNameChanged",value))},session.show=function(v){},session.hide=function(v){},tab.on("beforeClose",function(){
if(!settings.getBool("user/output/nosavequestion")&&!session.config.name&&session.config.command&&!tab.meta.$ignore)return question.show("Unsaved changes","Are you sure you want to close this run configuration without saving it?","You can keep these settings in a run configuration for easy access later. If you would like to do this, choose No and fill in the name of the run configuration prior to closing this tab.",function(){
tab.meta.$ignore=!0,tab.close(),question.dontAsk&&settings.set("user/output/nosavequestion","true")},function(){
question.dontAsk&&settings.set("user/output/nosavequestion","true")},{showDontAsk:!0,yes:"Close",no:"Cancel"
}),!1},session),tab.on("beforeUnload",function(){session.process&&session.process.running&&(session.process.stop(function(){}),
tab.classList.remove("running"))}),(e.state.hidden||e.state.run)&&session.hide(),setTabColor(),handle.on("settingsUpdate",setTabColor,doc)

}),plugin.on("documentActivate",function(e){currentSession&&currentSession.loaded&&(tbCommand.getValue()!=currentSession.config.command&&currentSession.changeCommand(tbCommand.getValue()),
tbName.getValue()!=currentSession.config.name&&currentSession.changeName(tbName.getValue())),currentSession=e.doc.getSession(),
updateToolbar(currentSession)}),plugin.on("documentUnload",function(e){}),plugin.on("getState",function(e){
var session=e.doc.getSession()
if(session.id){var state=e.state
state.config=session.config,session.process&&session.process.running&&(state.running=session.process.getState(),
state.running.debug=session.process.meta.debug)}}),plugin.on("setState",function(e){var session=e.doc.getSession(),state=e.state


state.config&&(session.config=state.config,updateConfig(session)),state.running&&!session.process&&(session.process=run.restoreProcess(state.running),
decorateProcess(session),transformButton(session),state.running.debug&&session.process.running>0&&(session.process.meta.debug=!0,
session.process.once("back",function(){debug.debug(session.process,!0,function(err){})}))),state.run?runNow(session,state.callback):session.connect(),
session.updateTitle()}),plugin.on("unload",function(){currentSession=null}),plugin.freezePublicAPI({run:runNow,
isClipboardAvailable:function(e){return!e.fromKeyboard},get relatedPath(){if(currentSession){var path=currentSession&&currentSession.config.command


return path&&"~"!=path[0]&&"/"!=path[0]&&(path="/"+path),path&&splitPathArgs(path)[0]}}}),plugin}var editors=imports.editors,ui=imports.ui,c9=imports.c9,commands=imports.commands,console=imports.console,layout=imports.layout,tabs=imports.tabManager,util=imports.util,run=imports.run,prefs=imports.preferences,runGui=imports["run.gui"],question=imports["dialog.question"],showError=imports["dialog.error"].show,showAlert=imports["dialog.alert"].show,showSave=imports["dialog.file"].show,Terminal=imports.terminal.Terminal,debug=imports["debugger"],settings=imports.settings,join=require("path").join,markup=require("text!./output.xml"),keys=require("ace/lib/keys"),Tree=require("ace_tree/tree"),TreeData=require("ace_tree/data_provider"),TreeEditor=require("ace_tree/edit"),basePath=options.basePath,handle=editors.register("output","Output",Output,[]),handleEmit=handle.getEmitter(),defaults={
"flat-light":["#e0e5e7","#333333","#aebabf",!1],"flat-dark":["#003a58","#FFFFFF","#225477",!0],light:["#eef7ff","#333333","#89c1ff",!1],
"light-gray":["#eef7ff","#333333","#89c1ff",!1],dark:["#003a58","#FFFFFF","#225477",!0],"dark-gray":["#003a58","#FFFFFF","#225477",!0]
}
handle.on("load",function(){function setSettings(){var cname=".output .c9terminal .c9terminalcontainer .terminal",sname=".output .c9terminal .c9terminalcontainer",fcolor=settings.get("user/output/@foregroundColor"),bcolor=settings.get("user/output/@backgroundColor"),scolor=settings.get("user/output/@selectionColor")

;[[cname,"color",fcolor||"rgb(255,255,255)"],[sname,"backgroundColor",bcolor||"rgb(25, 34, 39)"],[cname+" .ace_selection","backgroundColor",scolor||"rgb(81, 93, 119)"]].forEach(function(i){
ui.setStyleRule(i[0],i[1],i[2])}),handleEmit("settingsUpdate")}ui.insertCss(require("text!./style.css"),options.staticPrefix,handle),
commands.addCommand({name:"showoutput",group:"Panels",exec:function(editor,argv){argv||(argv=!1)
var id=argv.id,cmd=argv.config&&argv.config.command
if(void 0===id&&(id=getOutputId()),!search(id,cmd,argv)&&(console.show(),!search(id,cmd,argv))){var config=argv.config||{}


void 0===config.debug&&"disconnected"!=debug.state&&(config.debug=!1),void 0===config.toolbar&&(config.toolbar=!0),
tabs.open({editorType:"output",active:!0,pane:argv.pane||console.getPanes()[0],document:{title:"Output",
output:{id:id||"output",config:config,runner:argv.runner||config.runner,run:argv.run,callback:argv.callback
}}},function(){})}}},handle),settings.on("read",function(e){var skin=settings.get("user/general/@skin"),colors=defaults[skin]||defaults.dark


settings.setDefaults("user/output",[["backgroundColor",colors[0]],["foregroundColor",colors[1]],["selectionColor",colors[2]],["nosavequestion","false"],["keepOutput","false"]]),
setSettings()},handle),settings.on("user/output",setSettings),layout.on("themeChange",function(e){var colors=defaults[e.oldTheme]


if(colors)return settings.get("user/output/@backgroundColor")==colors[0]&&settings.get("user/output/@foregroundColor")==colors[1]&&settings.get("user/output/@selectionColor")==colors[2]&&void 0

}),layout.on("themeDefaults",function(e){var colors=defaults[e.theme]
colors&&(settings.set("user/output/@backgroundColor",colors[0]),settings.set("user/output/@foregroundColor",colors[1]),
settings.set("user/output/@selectionColor",colors[2]))},handle),prefs.add({Editors:{Output:{position:130,
"Text Color":{type:"colorbox",path:"user/output/@foregroundColor",position:10100},"Background Color":{
type:"colorbox",path:"user/output/@backgroundColor",position:10200},"Selection Color":{type:"colorbox",
path:"user/output/@selectionColor",position:10250},"Warn Before Closing Unnamed Configuration":{type:"checkbox",
path:"user/output/@nosavequestion",position:10300},"Preserve log between runs":{type:"checkbox",path:"user/output/@keepOutput",
position:10300}}}},handle)}),handle.search=search
var counter=0
register(null,{output:handle})}return main.consumes=["Editor","editors","util","commands","terminal","settings","ui","proc","tabManager","run","console","run.gui","layout","debugger","settings","dialog.question","c9","preferences","dialog.error","dialog.file","dialog.alert"],
main.provides=["output"],main})


define("plugins/c9.ide.terminal/opentermhere",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,commands.addCommand({name:"opentermhere",hint:"Open a terminal in the folder of the selected item of the tree",
group:"General",bindKey:{mac:"Command-Option-L",win:"Alt-L"},exec:openTerminalHere},plugin),void tree.getElement("mnuCtxTree",function(mnuCtxTree){
ui.insertByIndex(mnuCtxTree,new ui.item({match:"",caption:"Open Terminal Here",command:"opentermhere"
}),1020,plugin)}))}function openTerminalHere(){var node=tree.selectedNode
if(node){var path=node.isFolder?node.path:node.parent.path
tabManager.open({focus:!0,editorType:"terminal",document:{terminal:{cwd:util.normalizePath(path)}}})}
}var Plugin=imports.Plugin,ui=imports.ui,tree=imports.tree,util=imports.util,tabManager=imports.tabManager,commands=imports.commands,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({openTerminalHere:openTerminalHere}),
register(null,{opentermhere:plugin})}return main.consumes=["Plugin","ui","tree","tabManager","commands","util"],
main.provides=["opentermhere"],main})


define("text!plugins/c9.ide.terminal.monitor/message_view.css",[],"")


define("text!plugins/c9.ide.terminal.monitor/message_view.html",[],'<div class="terminal_monitor_message" tabindex="1">\n    <div class="message"></div>\n    <div class="cmd btn-default-css3">\n        <div class="caption"></div>\n        <div class="border"></div>\n    </div>\n    <i class="close"></i>\n</div>\n')


define("plugins/c9.ide.terminal.monitor/message_view",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,ui.insertCss(css,options.staticPrefix,plugin),tabManager.on("tabAfterActivateSync",function(){
toggleMessages()}),void tabManager.on("tabAfterClose",function(e){messageStack=messageStack.filter(function(msg){
return e.tab!==msg.tab||(hide(msg,!0),!1)})}))}function handleClick(e){switch(e.target.getAttribute("data-type")){
case"preview":handlePreview(e)
default:messageStack.some(function(msg){msg.domNode.contains(e.target)&&hide(msg)})}}function handlePreview(e){
e.preventDefault(),tabManager.open({editorType:"preview",active:!0,document:{preview:{path:e.target.innerText
}}},function(err,tab){})}function isAlreadyShowingMessage(messages,text){return messages.some(function(message){
return message.text==text})}function toggleMessages(){messageStack.forEach(function(message){message.tab.active?message.domNode.style.display="table":message.domNode.style.display="none"

})}function showMessage(message){var messageNode=message.domNode,referenceNode=message.tab.editor.container,messageContainer=createMessageContainer(referenceNode)


messageContainer.insertBefore(messageNode,messageContainer.firstChild),message.timeStamp=Date.now(),messageNode.style.display=message.tab.active?"table":"none",
setTimeout(function(){messageNode.style.opacity=1})}function createMessageContainer(referenceNode){var messageContainer=referenceNode.querySelector(".ace_editor>.terminal_monitor_messageContainer")


if(messageContainer)return messageContainer
messageContainer=document.createElement("div"),messageContainer.className="terminal_monitor_messageContainer"


var aceContainer=referenceNode.querySelector(".ace_editor")
return aceContainer.addEventListener("keydown",function onKeydown(e){for(var lastMessage,i=messageStack.length;i--;){
var message=messageStack[i]
if(message.domNode.parentNode==messageContainer&&message.tab.active){lastMessage=message
break}}lastMessage&&((27==e.keyCode||e.timeStamp-lastMessage.timeStamp>3e4)&&(hide(lastMessage),messageStack=messageStack.filter(function(msg){
return msg.domNode.parentNode})),messageContainer.children.length||(aceContainer.removeEventListener("keydown",onKeydown,!0),
messageContainer.parentNode.removeChild(messageContainer)))},!0),aceContainer.appendChild(messageContainer),
messageContainer}function createMessageNode(text){var messageNode=ui.insertHtml(null,html,plugin)[0],contentNode=messageNode.querySelector(".message")


return contentNode.innerHTML=text,contentNode.onclick=handleClick,messageNode}function setupMessageAction(message,action){
if(action){var actionNode=message.domNode.querySelector(".cmd"),caption=message.domNode.querySelector(".caption")


caption.innerHTML=action.label,actionNode.style.display="table",actionNode.onclick=function(){caption.innerHTML="Please wait...",
handleEmit("action",action.cmd,message)}}}function setupCloseHandler(message){var closeNode=message.domNode.querySelector(".close")


closeNode.onclick=function(){hide(message)}}function repositionMessages(tab){var messages=messageStack.filter(function(message){
return message.tab==tab})
messages.forEach(function(message){showMessage(message)})}function show(text,action,tab){if(tab){var messages=messageStack.filter(function(message){
return message.tab==tab})
if(!isAlreadyShowingMessage(messages,text)){var message={tab:tab,domNode:createMessageNode(text),action:action,
text:text}
setupMessageAction(message,action),setupCloseHandler(message),showMessage(message),messageStack.push(message)

}}}function hide(message,batch){var domNode=message.domNode
domNode.parentNode&&domNode.parentNode.removeChild(domNode),batch||(messageStack=messageStack.filter(function(msg){
return msg.domNode!=message.domNode}))}var ui=imports.ui,Plugin=imports.Plugin,tabManager=imports.tabManager,plugin=new Plugin("Ajax.org",main.consumes),handleEmit=plugin.getEmitter(),css=require("text!./message_view.css"),html=require("text!./message_view.html"),messageStack=[],loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({show:show,hide:hide,repositionMessages:repositionMessages
}),register(null,{"terminal.monitor.message_view":plugin})}return main.consumes=["Plugin","ui","tabManager"],
main.provides=["terminal.monitor.message_view"],main})


define("plugins/c9.ide.terminal.monitor/message_matchers",[],function(require,exports,module){"use strict"


module.exports=function(c9){var prefix="<strong>Cloud9 Help</strong> ",wrongPortIP="You may be using the wrong PORT & IP for your server application.",messages={
generic:{wrongPortIP:prefix+wrongPortIP+"Try passing $PORT and $IP to properly launch your application. You can find more information <a href='https://docs.c9.io/running_and_debugging_code.html' target='_blank'>in our docs</a>.",
appRunning:prefix+"Your code is running at <a href='https://"+c9.hostname+"' target='_blank'>https://"+c9.hostname+"</a>",
appRunningOpenInPreview:prefix+"Your code is running at <a href='javascript://' data-type='preview'>https://"+c9.hostname+"</a>",
bindToInternalIP:prefix+wrongPortIP+"Only binding to the internal IP configured in $IP is supported.",
noLiveReload:prefix+"We currently only support listening on one port. Opening up a second port for live-reloading is currently not possible.",
addressInUse:prefix+"There are issues starting your app. Please make sure you are using the correct $IP and $PORT, run as the correct user or kill any processes which might be conflicting. You can find more information <a href='https://docs.c9.io/common_errors.html' target='_blank'>in our docs</a>.",
debuggerPortInUse:prefix+"A process is listening on the port specified. Please try and kill that process and restart the app. You can find more information <a href='https://docs.c9.io/common_errors.html' target='_blank'>in our docs</a>"
},rails:{wrongPortIP:prefix+wrongPortIP+"For rails, use: 'rails s -p $PORT -b $IP'. For Sinatra, use: ruby app.rb -p $PORT -o $IP'."
},node:{wrongPortIP:prefix+wrongPortIP+" Use 'process.env.PORT' as the port and 'process.env.IP' as the host in your scripts or <a href='https://docs.c9.io/running_and_debugging_code.html' target='_blank'>refer to the documentation for more information</a>."
},django:{wrongPortIP:prefix+wrongPortIP+" Use './manage.py runserver $IP:$PORT' to run your Django application."
},google:{wrongPortIP:prefix+wrongPortIP+" Use 'mvn gcloud:run -Dgcloud.host=$IP:$PORT' to run your application.",
appDeployed:prefix+"Your app has been deployed to <a href='javascript://' data-type='preview'>{1}</a>"
}},matchers=[{pattern:/^(?!reload )server(?: is | )(?:listening|running) (?:at|on)((?!0\.0\.0\.0:8080).)*$/i,
message:messages.generic.wrongPortIP},{pattern:/^(?!reload )server(?: is | )(?:listening|running) (?:at|on).*?(?=0\.0\.0\.0:8080)/i,
message:messages.generic.appRunning},{pattern:/Server is running on port (?!8080)/i,message:messages.generic.wrongPortIP
},{pattern:/Server is running on port 8080/i,message:messages.generic.appRunning},{pattern:/^Proxying http:\/\/(?!0\.0\.0\.0:8080)/i,
message:messages.generic.wrongPortIP},{pattern:/^Proxying http:\/\/(?=0\.0\.0\.0:8080)/i,message:messages.generic.appRunning
},{pattern:/^reload server running at http:\/\/.*?:\d{4,5}/i,message:messages.generic.noLiveReload},{
pattern:/(App running at:)((?!0\.0\.0\.0:8080).)*$/,message:messages.generic.wrongPortIP},{pattern:/(App running at:).*?(?=0\.0\.0\.0:8080)/,
message:messages.generic.appRunning},{pattern:/(Running dev server:)((?!\d+\.\d+\.\d+\.\d+:8080).)*$/,
message:messages.generic.wrongPortIP},{pattern:/(Running dev server:).*?(?=\d+\.\d+\.\d+\.\d+:8080)/,
message:messages.generic.appRunning},{pattern:/INFO\ \ WEBrick::HTTPServer#start: pid=\d+ port=8080/,
message:messages.generic.appRunning},{pattern:/INFO\ \ WEBrick::HTTPServer#start: pid=\d+ port=(?!8080)/,
message:messages.rails.wrongPortIP},{pattern:/WARN {1,2}TCPServer Error: (?:Address already in use|Permission denied) - bind\(2\)/,
message:messages.rails.wrongPortIP},{pattern:/Error: listen (?:EACCES|EADDRNOTAVAIL)/,message:messages.generic.addressInUse
},{pattern:/Error: listen EADDRINUSE/,message:messages.generic.addressInUse,action:{cmd:"kill -9 $(lsof -i:$PORT -t)",
label:"Kill processes"}},{pattern:/Starting development server at.*?(?=0\.0\.0\.0:8080)/i,message:messages.generic.appRunning
},{pattern:/Error: You don't have permission to access that port./,message:messages.django.wrongPortIP
},{pattern:/Failed to open socket on port 15454/,message:messages.generic.debuggerPortInUse,action:{cmd:"kill -9 $(lsof -i:15454 -t)",
label:"Kill processes"}},{pattern:/Failed to listen on 0.0.0.0:8080 \(reason: Address already in use\)/,
message:messages.generic.debuggerPortInUse,action:{cmd:"kill -9 $(lsof -i:8080 -t)",label:"Kill processes"
}},{pattern:/Error: That port is already in use/,message:messages.generic.addressInUse,action:{cmd:"kill -9 $(lsof -i:$PORT -t)",
label:"Kill processes"}},{pattern:/Server address: http:\/\/(?=0\.0\.0\.0:8080)/,message:messages.generic.appRunning
},{pattern:/Server address: http:\/\/(?!0\.0\.0\.0:8080)/,message:messages.generic.wrongPortIP},{pattern:/Tomcat started on port\(s\): 8080/,
message:messages.generic.appRunning},{pattern:/::\s+Spring Boot\s+::\s+\(v\d.\d.\d.RELEASE\)/,message:messages.generic.appRunning
},{pattern:/Starting module "\w+" running at: http:\/\/(?=0\.0\.0\.0:8080)/,message:messages.generic.appRunningOpenInPreview
},{pattern:/Starting module "\w+" running at: http:\/\/(?!0\.0\.0\.0:8080)/,message:messages.google.wrongPortIP
},{pattern:/New instance for module "default" serving on:/i,onMatch:"reloadPreview"},{pattern:/Deployed module \[\w+\] to \[(https:\/\/[a-z0-9\-]+\.appspot\.com)\]/,
message:messages.google.appDeployed},{pattern:/^http:\/\/0\.0\.0\.0:8080/i,message:messages.generic.appRunning
},{pattern:/Server homepage.* is UP/,message:messages.generic.appRunning}]
return{matchers:matchers,messages:messages}}})


define("plugins/c9.ide.terminal.monitor/monitor",[],function(require,exports,module){function main(options,imports,register){
function load(){function onDocumentLoad(e){var session=e.doc.getSession()
session.once("terminalReady",setupTerminalMessageHandler)}return!loaded&&(loaded=!0,messageView.on("action",function(cmd,message){
proc.execFile(BASHBIN,{args:["--login","-c",cmd]},function(){messageView.hide(message)})},plugin),void editors.on("create",function(e){
!e.editor||"terminal"!==e.editor.type&&"output"!==e.editor.type||e.editor.on("documentLoad",onDocumentLoad)

},plugin))}function setupTerminalMessageHandler(session){function checkNewText(){if(timer=null,hasResizeCompleted){
var lines=terminal.lines
lastNewLine>=lines.length&&(lastNewLine=lines.length-1)
for(var lineContents="",i=Math.min(seenUpTo,lastNewLine);i<=lastNewLine;i++){var line=lines[i]
line&&(lineContents+=lineToString(line),line.wrapped||(seenUpTo=i+1,handleMessage(lineContents,session.tab),
lineContents=""))}}}var terminal=session.terminal,seenUpTo=0,lastNewLine=0,hasResizeCompleted=!1,timer=null


terminal.on("discardOldScrollback",function(e){seenUpTo=Math.max(seenUpTo-e,0),lastNewLine&&(lastNewLine-=e)

}),terminal.on("newline",function(e){lastNewLine=e.y+e.ybase-1,timer||(timer=setTimeout(checkNewText))

})
var resizeTimeout
terminal.on("resizeStart",function(){hasResizeCompleted=!1,resizeTimeout&&clearTimeout(resizeTimeout),
messageView.repositionMessages(session.tab),resizeTimeout=setTimeout(function(){resizeTimeout=null,hasResizeCompleted=!0

},1e3)})}function lineToString(line){return line.map(function(character){return character&&character[1]

}).join("")}function handleMessage(data,tab){messageMatchers.forEach(function(trigger){var matches=trigger.pattern.exec(data)


if(null!==matches){var message=trigger.message
message=message&&message.replace(/{(\d)}/g,function(_,num){return matches[num]||_}),trigger.onMatch?"function"==typeof trigger.onMatch?trigger.onMatch(matches,tab):"reloadPreview"==trigger.onMatch&&reloadPreview():messageView.show(message,trigger.action,tab)

}})}function reloadPreview(){commands.exec("reloadpreview")}function addMessageMatcher(matcher){messageMatchers.pushUnique(matcher)

}function removeMessageMatcher(matcher){messageMatchers.remove(matcher)}var BASHBIN=options.bashBin||"/bin/bash",c9=imports.c9,Plugin=imports.Plugin,editors=imports.editors,messageView=imports["terminal.monitor.message_view"],commands=(imports.tabManager,
imports.commands),proc=imports.proc,messageMatchers=require("./message_matchers")(c9).matchers,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({
addMessageMatcher:addMessageMatcher,removeMessageMatcher:removeMessageMatcher,get messageMatchers(){return messageMatchers

},handleMessage:handleMessage}),register(null,{"terminal.monitor":plugin})}return main.consumes=["c9","Plugin","editors","dialog.error","terminal.monitor.message_view","tabManager","proc","commands"],
main.provides=["terminal.monitor"],main})


define("plugins/c9.ide.terminal/aceterm/hover_link",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),event=require("ace/lib/event"),Range=require("ace/range").Range,EventEmitter=require("ace/lib/event_emitter").EventEmitter,HoverLink=function(editor){
editor.hoverLink||(editor.hoverLink=this,this.editor=editor,this.update=this.update.bind(this),this.onMouseMove=this.onMouseMove.bind(this),
this.onMouseOut=this.onMouseOut.bind(this),this.onClick=this.onClick.bind(this),this.onContextMenu=this.onContextMenu.bind(this),
event.addListener(editor.renderer.scroller,"mousemove",this.onMouseMove),event.addListener(editor.renderer.content,"mouseout",this.onMouseOut),
event.addListener(editor.renderer.content,"click",this.onClick),event.addListener(editor.renderer.container,"contextmenu",this.onContextMenu))

};(function(){oop.implement(this,EventEmitter),this.token={},this.range=new Range,this.update=function(){
this.$timer=null
var editor=this.editor,renderer=editor.renderer,canvasPos=renderer.scroller.getBoundingClientRect(),offset=(this.x+renderer.scrollLeft-canvasPos.left-renderer.$padding)/renderer.characterWidth,row=Math.floor((this.y+renderer.scrollTop-canvasPos.top)/renderer.lineHeight),col=Math.round(offset),screenPos={
row:row,column:col,side:offset-col>0?1:-1},session=editor.session,docPos=session.screenToDocumentPosition(screenPos.row,screenPos.column),selectionRange=editor.selection.getRange()


if(!selectionRange.isEmpty()&&selectionRange.start.row<=row&&selectionRange.end.row>=row)return this.clear()


var line=editor.session.getLine(docPos.row)
if(docPos.column==line.length){var clippedPos=editor.session.documentToScreenPosition(docPos.row,docPos.column)


if(clippedPos.column!=screenPos.column)return this.clear()}var token=this.findLink(docPos.row,docPos.column)


return this.link=token,token?(this.isOpen||(this.isOpen=!0),editor.renderer.setCursorStyle("pointer"),
session.removeMarker(this.marker),this.range=this.getRange(token),void(this.marker=session.addMarker(this.range,"ace_link_marker","text",!0))):this.clear()

},this.clear=function(){this.isOpen&&(this.editor.session.removeMarker(this.marker),this.editor.renderer.setCursorStyle(""),
this.isOpen=!1)},this.getMatchAround=function(regExp,string,col){var match
return regExp.lastIndex=0,string.replace(regExp,function(str){var offset=arguments[arguments.length-2],length=str.length


offset<=col&&offset+length>=col&&(match={start:offset,value:str})}),match},this.onClick=function(e){this.editor.isFocused()&&1==e.detail&&this.link&&this.isOpen&&(this.editor.selection.isEmpty()&&(this.editor.selection.setSelectionRange(this.range),
this.lastRange=this.range),this.link.editor=this.editor,this.link.x=e.clientX,this.link.y=e.clientY,this.link.metaKey=e.metaKey,
this.link.ctrlKey=e.ctrlKey,this._signal("open",this.link))},this.onContextMenu=function(e){var range=this.editor.selection.getRange()


range.isEmpty()||this.lastRange&&range.isEqual(this.lastRange)&&(this.editor.selection.clearSelection(),
this.update()),this.link&&this.isOpen&&this.editor.selection.isEmpty()&&(this.editor.selection.setSelectionRange(this.range),
this.lastRange=this.range)},this.getRange=function(token){for(var session=this.editor.session,startCol=token.start,row=token.row,line=session.getLine(row);line&&line.length<startCol;)startCol-=line.length,
row++,line=session.getLine(row)
for(var startRow=row,endCol=startCol+token.value.length;line&&line.length<endCol;)endCol-=line.length,
row++,line=session.getLine(row)
var endRow=row
return new Range(startRow,startCol,endRow,endCol)},this.findLink=function(row,column){for(var editor=this.editor,session=editor.session,lineData=session.getLineData(row),prevLineData=session.getLineData(row-1),line=session.getLine(row),i=1;lineData&&lineData.wrapped;i++)line+=session.getLine(row+i),
lineData=session.getLineData(row+i)
for(;prevLineData&&prevLineData.wrapped;){row--
var prevLine=session.getLine(row)
column+=prevLine.length,line=prevLine+line,prevLineData=session.getLineData(row-1)}lineData=session.getLineData(row)


var match=this.getMatchAround(/https?:\/\/[^\s"']+|[~\/\w.]([:.~\/\w-_]|\\.)+/g,line,column)
if(match){match.row=row
var value=match.value
if(/^https?:|\bc9.io\b|(\d{1,3}\b.?){4}|localhost/.test(value)){match.type="link"
var m=/((https?:\/\/)?(\d{1,3}\b.?){4}(:\d+[^\d\/]|[^:\d\/]))/.exec(value)
return m&&(value=m[0].slice(0,-1)),value=value.replace(/[>)}\].,;:]+$/,""),match.value=value,match}var prompt=this.findPrompt(row)


if(prompt){if(lineData.prompt&&match.start<=prompt.index)return match.value=value=value.substr(prompt.index-match.start),
match.start=prompt.index,void(match.start>column||!value)
if(match.command=prompt.command,match.args=prompt.args,match.basePath=prompt.path,"ls"===prompt.command){
if(match.type="path",lineData.prompt)return
if(prompt.args&&(match.basePath=this.findBasePath(prompt.args,prompt.path)),prompt.args&&/( |^)(--help|-h)\b/.test(prompt.args))return


var longStyle=/(^|\s)[ld\-][\-rwx]+\s/.test(line)
if(!longStyle){var before=line.substring(0,match.start).match(/[^\s\\\/@"']+ $/),after=line.substr(match.start+value.length).match(/^ [^\s\\\/@"']+/)


return before&&!/\d+/.test(before[0])&&(value=before[0]+value,match.start-=before[0].length),after&&(value+=after[0]),
match.value=value,match}if(/[*@|=>]$/.test(line)&&(line=line.slice(0,-1)),match.start+value.length<line.length){
var isLink="l"==line[0]&&" -> "==line.substr(match.start+value.length,4)
if(!isLink)return}}else if("find"===prompt.command){if(0!==match.start||match.length<line.length)return


prompt.args&&(match.basePath=this.findBasePath(prompt.args,prompt.path)),match.type="path"}else if("grep"===prompt.command){
if(0!==match.start)return
match.type="path",match.value=value.replace(/:[^\d][^:]*$/,"")}else if("ack"===prompt.command||"ag"===prompt.command||"ack-grep"===prompt.command){
match.type="path"
var fontColor=lineData[column]&&lineData[column][0]
if(0!==match.start){if(fontColor==session.term.defAttr)return
for(var col=column;lineData[col]&&lineData[col][0]==fontColor;)col--
for(match.start=col+1,col=column;lineData[col]&&lineData[col][0]==fontColor;)col++
match.value=line.substring(match.start,col)}var jumpLine=line.match(/^(\d*:)?/)[0],jumpColumn=Math.max(match.start-jumpLine.length,0)


0==match.start&&jumpLine&&(match.value=jumpLine)
for(var pathLine=line;/^\d+/.test(pathLine)&&row>prompt.row;)lineData=session.getLineData(row),lineData.wrapped||(pathLine=session.getLine(row)),
row--
match.path=pathLine,jumpLine&&(match.path+=":"+jumpLine+jumpColumn),0==match.start&&jumpLine&&(match.action="open")

}else if(/^(~|\.\.?)?[\/\\]/.test(value)||/\w:[\\]/.test(value))match.type="path",match.value=value.replace(/['">)}\].,;:]+$/,"")
else if(/^[ab]?\//.test(value)&&/^([+\-]{3}|diff)/.test(line))match.type="path",match.basePath="",match.start++,
match.value=value.substr(2)
else{if("git"!==prompt.command)return
var prefix=line.substr(0,match.start)
if(match.start+value.length==line.length&&/^(#|[ MDRU?A]{2})\s+([\w\s]+:\s+)?$/.test(prefix))match.type="path"
else{if(value=value.replace(/[.:]$/,""),!value.match(/[\/][^\/]*\.\w+[.:]$/)&&!prefix.match(/( in |merging )$/))return


match.type="path",match.value=value}}return match}if(/^(\/|~|\/?\w:[\\/])/.test(value))return match.type="path",
match.value=value.replace(/["'>)}\].,;:]+$/,""),match}},this.findBasePath=function(args,basePath){var argList=args.split(" ").filter(function(x){
return"-"!=x[0]}),pathArg=argList[argList.length-1]
return pathArg?"~"===pathArg[0]||"/"===pathArg[0]?pathArg:basePath+"/"+pathArg:basePath},this.findPrompt=function(row){
var prompt,args,command,promptRow,promptRe=/([~\/](?:[^\\\s'"\(<]|\\.)*)[^$]*?\$/,editor=this.editor,session=editor.session


do{var lineData=session.getLineData(row)
if(lineData.prompt)return lineData.prompt
var line=session.getLine(row),m=promptRe.exec(line)
if(m){line=line.substr(m.index+m[0].length)
var m2=/^\s*([\w\-]+)/.exec(line)
if(m2&&(command=m2[1],args=line.substr(m2[0].length)),prompt&&!lineData.isUserInput||(prompt={path:m[1],
command:command,index:m.index,args:args,lineData:lineData,row:row}),lineData.isUserInput)break}}while(row-- >0)


return prompt&&promptRow<session.term.ybase&&(prompt.lineData.prompt=prompt),prompt},this.onMouseMove=function(e){
return e.shiftKey||e.ctrlKey||e.metaKey||!this.editor.isFocused()?this.clear():this.editor.$mouseHandler.isMousePressed?void(this.editor.selection.isEmpty()||this.clear()):void(this.x==e.clientX&&this.y==e.clientY||(this.x=e.clientX,
this.y=e.clientY,this.isOpen&&(this.lastT=e.timeStamp),this.update()))},this.onMouseOut=function(e){this.clear(),
this.$timer=clearTimeout(this.$timer)},this.destroy=function(){this.onMouseOut(),event.removeListener(this.editor.renderer.scroller,"mousemove",this.onMouseMove),
event.removeListener(this.editor.renderer.content,"mouseout",this.onMouseOut),delete this.editor.hoverLink

}}).call(HoverLink.prototype),exports.HoverLink=HoverLink})


define("plugins/c9.ide.terminal/link_handler",[],function(require,exports,module){function main(options,imports,register){
function createMenu(){if(!menuPath){var submenu=new Menu({items:[new MenuItem({value:"path",caption:"Copy Path"
}),new MenuItem({value:"directory",caption:"Copy Directory"}),new MenuItem({value:"name",caption:"Copy Name"
}),new MenuItem({value:"preview",caption:"Copy Preview URL"})],onitemclick:function(e){var info=buildPath(lastLink)


info.path=info.path.split(":")[0],"path"==e.value?commands.exec("copy",null,{data:abs(info)}):"directory"==e.value?commands.exec("copy",null,{
data:dirname(abs(info))}):"name"==e.value?commands.exec("copy",null,{data:basename(info.path)}):"preview"==e.value&&commands.exec("copy",null,{
data:info.abs?"Unable to access via preview":BASEPATH+info.path})}},plugin),menuItems=[new MenuItem({
value:"gitadd",caption:"git add"}),new MenuItem({value:"gitcheckout",caption:"git checkout"}),new MenuItem({
value:"gitdiff",caption:"git diff"}),new MenuItem({value:"gitrm",caption:"git rm"}),new MenuItem({value:"gitreset",
caption:"git reset"}),new Divider,new MenuItem({value:"open",caption:"Open"}),new MenuItem({value:"copy",
caption:"Copy"}),new MenuItem({value:"paste",caption:"Paste In This Terminal"}),new Divider,new MenuItem({
caption:"Copy Special",submenu:submenu}),new Divider,new MenuItem({value:"reveal",caption:"Reveal in File Tree"
})]
menuPath=new Menu({items:menuItems,onitemclick:function(e){var info=buildPath(lastLink)
"open"==e.value?open(lastLink):"copy"==e.value?commands.exec("copy",null,{data:abs(info)}):"paste"==e.value?lastLink.editor.onPaste(abs(info).split(":")[0]):"reveal"==e.value?tabbehavior.revealtab({
path:info.path.split(":")[0]}):"gitadd"===e.value?lastLink.editor.onPaste("git add "+lastLink.value+"\n"):"gitcheckout"===e.value?lastLink.editor.onPaste("git checkout -- "+lastLink.value):"gitdiff"===e.value?lastLink.editor.onPaste("git diff "+lastLink.value+"\n"):"gitrm"===e.value?lastLink.editor.onPaste("git rm "+lastLink.value+"\n"):"gitreset"===e.value&&lastLink.editor.onPaste("git reset "+lastLink.value+"\n")

}},plugin)}}function createLinkMenu(){menuLink=new Menu({items:[new MenuItem({value:"open",caption:"Open"
}),new MenuItem({value:"open-in-preview",caption:"Open In Preview"}),new MenuItem({value:"copy",caption:"Copy"
})],onitemclick:function(e){"open"==e.value&&openLink(lastLink.value),"open-in-preview"==e.value?openLink(lastLink.value,!0):"copy"==e.value&&commands.exec("copy",null,{
data:lastLink.value})}},plugin)}function showMenu(e){if("open"==e.action)return open(e)
lastLink=e
var menu
if("link"==e.type&&(tabManager.focussedTab||0).editorType)createLinkMenu(),menu=menuLink
else{createMenu(),menuPath.once("show",function(){for(var isGit=e&&"git"===e.command,items=menuPath.items,i=0;i<6;i++)items[i].aml.visible=-1,
items[i][isGit?"show":"hide"]()})
var ace=e.editor
menuPath.once("hide",function(){ace.selection.clearSelection()}),menu=menuPath}menu.show(e.x,e.y,"context")

}function openLink(href,inPreview){/^(https?|ftp|file):/.test(href)||(href="http://"+href),href=href.replace(/(^https?:\/\/)(0.0.0.0|localhost)(?=:|\/|$)/,function(_,protocol,host){
return host=c9.hostname||window.location.host,protocol+host.replace(/:\d+/,"")}),inPreview?commands.exec("preview",null,{
path:href}):util.openNewWindow(href)}function open(e){if("link"==e.type)return openLink(e.value)
var info=buildPath(e),path=info.path,m=/:(\d*)(?::(\d*))?$/.exec(path),jump={}
m&&(m[1]&&(jump.row=parseInt(m[1],10)-1),m[2]&&(jump.column=parseInt(m[2],10)),path=path.slice(0,m.index)),
path=util.normalizePath(path),fs.stat(path,function(err,stat){return err?commands.exec("navigate",null,{
keyword:path}):(stat.linkStat&&(stat=stat.linkStat),/directory/.test(stat.mime)?tabbehavior.revealtab({
path:path}):void tabManager.open({path:path,focus:!0,document:{ace:{jump:jump}}},function(){}))})}function buildPath(e){
var path=e.path||e.value,abs=!1
return"win32"==c9.platform&&(path=path.replace(/\\/g,"/"),VFSROOT=VFSROOT.replace(/\\/g,"/"),/^\/cygdrive^\//.test(path)&&(path=path.replace(/^\/cygdrive/,"")),
"/"==VFSROOT&&(path=path.replace(/^\/(\w)\//,"/$1:/")),/\w:\//.test(path)&&(abs=!0)),!e.basePath||/^[~\/]/.test(path)||abs||(path=join(e.basePath,path),
abs=!0),path=normalize(path),"~"==path[0]&&"/"==path[1]&&(path=c9.home+path.substr(1),abs=!0),0===path.toLowerCase().lastIndexOf(VFSROOT.toLowerCase(),0)?(path=path.substr(VFSROOT.length),
abs=!1):0===path.toLowerCase().lastIndexOf(c9.home.toLowerCase(),0)?(path=c9.home+"/"+path.substr(c9.home.length),
abs=!0):abs=!0,"/"==path[0]||abs||(path="/"+path),{path:path,abs:abs}}function abs(info){return info.abs?info.path:join(VFSROOT,info.path)

}var menuPath,lastLink,c9=imports.c9,Plugin=imports.Plugin,terminal=imports.terminal,commands=imports.commands,tabbehavior=imports.tabbehavior,fs=imports.fs,util=imports.util,tabManager=imports.tabManager,Menu=imports.Menu,MenuItem=imports.MenuItem,Divider=imports.Divider,HoverLink=require("./aceterm/hover_link").HoverLink,normalize=require("path").normalize,join=require("path").join,basename=require("path").basename,dirname=require("path").dirname,VFSROOT=terminal.VFSROOT,BASEPATH=options.previewUrl,plugin=new Plugin("Ajax.org",main.consumes)


new RegExp("^"+util.escapeRegExp(c9.home))
terminal.on("create",function(e){var ace=e.editor.ace
ace&&(ace.hoverLink=new HoverLink(ace),ace.hoverLink.on("open",showMenu))},plugin)
var menuLink
plugin.freezePublicAPI({open:open}),register(null,{openPath:plugin})}return main.consumes=["terminal","menus","fs","tabbehavior","commands","c9","tabManager","dialog.error","Plugin","Menu","MenuItem","Divider","util"],
main.provides=["openPath"],main})


define("plugins/c9.ide.terminal/aceterm/wc",[],function(require,exports,module){"use strict"
var wc={}
wc.nulWidth=0,wc.controlWidth=0,wc.regardCjkAmbiguous=!1,wc.cjkAmbiguousWidth=2,wc.combining=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],
wc.ambiguous=[[161,161],[164,164],[167,168],[170,170],[174,174],[176,180],[182,186],[188,191],[198,198],[208,208],[215,216],[222,225],[230,230],[232,234],[236,237],[240,240],[242,243],[247,250],[252,252],[254,254],[257,257],[273,273],[275,275],[283,283],[294,295],[299,299],[305,307],[312,312],[319,322],[324,324],[328,331],[333,333],[338,339],[358,359],[363,363],[462,462],[464,464],[466,466],[468,468],[470,470],[472,472],[474,474],[476,476],[593,593],[609,609],[708,708],[711,711],[713,715],[717,717],[720,720],[728,731],[733,733],[735,735],[913,929],[931,937],[945,961],[963,969],[1025,1025],[1040,1103],[1105,1105],[8208,8208],[8211,8214],[8216,8217],[8220,8221],[8224,8226],[8228,8231],[8240,8240],[8242,8243],[8245,8245],[8251,8251],[8254,8254],[8308,8308],[8319,8319],[8321,8324],[8364,8364],[8451,8451],[8453,8453],[8457,8457],[8467,8467],[8470,8470],[8481,8482],[8486,8486],[8491,8491],[8531,8532],[8539,8542],[8544,8555],[8560,8569],[8592,8601],[8632,8633],[8658,8658],[8660,8660],[8679,8679],[8704,8704],[8706,8707],[8711,8712],[8715,8715],[8719,8719],[8721,8721],[8725,8725],[8730,8730],[8733,8736],[8739,8739],[8741,8741],[8743,8748],[8750,8750],[8756,8759],[8764,8765],[8776,8776],[8780,8780],[8786,8786],[8800,8801],[8804,8807],[8810,8811],[8814,8815],[8834,8835],[8838,8839],[8853,8853],[8857,8857],[8869,8869],[8895,8895],[8978,8978],[9312,9449],[9451,9547],[9552,9587],[9600,9615],[9618,9621],[9632,9633],[9635,9641],[9650,9651],[9654,9655],[9660,9661],[9664,9665],[9670,9672],[9675,9675],[9678,9681],[9698,9701],[9711,9711],[9733,9734],[9737,9737],[9742,9743],[9748,9749],[9756,9756],[9758,9758],[9792,9792],[9794,9794],[9824,9825],[9827,9829],[9831,9834],[9836,9837],[9839,9839],[10045,10045],[10102,10111],[57344,63743],[65533,65533],[983040,1048573],[1048576,1114109]],
wc.isSpace=function(ucs){var mid,min=0,max=wc.combining.length-1
if(ucs<wc.combining[0][0]||ucs>wc.combining[max][1])return!1
for(;max>=min;)if(mid=Math.floor((min+max)/2),ucs>wc.combining[mid][1])min=mid+1
else{if(!(ucs<wc.combining[mid][0]))return!0
max=mid-1}return!1},wc.isCjkAmbiguous=function(ucs){var mid,min=0,max=wc.ambiguous.length-1
if(ucs<wc.ambiguous[0][0]||ucs>wc.ambiguous[max][1])return!1
for(;max>=min;)if(mid=Math.floor((min+max)/2),ucs>wc.ambiguous[mid][1])min=mid+1
else{if(!(ucs<wc.ambiguous[mid][0]))return!0
max=mid-1}return!1},wc.charWidth=function(ucs){return wc.regardCjkAmbiguous?wc.charWidthRegardAmbiguous(ucs):wc.charWidthDisregardAmbiguous(ucs)

},wc.charWidth=function(ucs){return 0===ucs?wc.nulWidth:ucs<32||ucs>=127&&ucs<160?wc.controlWidth:ucs<127?1:wc.isSpace(ucs)?0:1+(ucs>=4352&&(ucs<=4447||9001==ucs||9002==ucs||ucs>=11904&&ucs<=42191&&12351!=ucs||ucs>=44032&&ucs<=55203||ucs>=63744&&ucs<=64255||ucs>=65040&&ucs<=65049||ucs>=65072&&ucs<=65135||ucs>=65280&&ucs<=65376||ucs>=65504&&ucs<=65510||ucs>=131072&&ucs<=196605||ucs>=196608&&ucs<=262141))

},wc.charWidthRegardAmbiguous=function(ucs){return wc.isCjkAmbiguous(ucs)?wc.cjkAmbiguousWidth:wc.charWidthDisregardAmbiguous(ucs)

},wc.strWidth=function(str){for(var width,rv=0,i=0;i<str.length;i++){if(width=wc.charWidth(str.charCodeAt(i)),
width<0)return-1
rv+=width}return rv},wc.substr=function(str,start,opt_width){var startIndex,endIndex,width
for(startIndex=0,width=0;startIndex<str.length&&(width+=wc.charWidth(str.charCodeAt(startIndex)),!(width>start));startIndex++);
if(void 0!=opt_width){for(endIndex=startIndex,width=0;endIndex<str.length&&width<opt_width;width+=wc.charWidth(str.charCodeAt(endIndex)),
endIndex++);return width>opt_width&&endIndex--,str.substring(startIndex,endIndex)}return str.substr(startIndex)

},wc.substring=function(str,start,end){return wc.substr(str,start,end-start)},module.exports=wc})


define("plugins/c9.ide.terminal/aceterm/term_colors",[],function(require,exports,module){module.exports=function(fg,bg,colors){
function hex(c){return c=c.toString(16),c.length<2?"0"+c:c}function parseColor(color){return"#"==color[0]?color.match(/^#(..)(..)(..)/).slice(1).map(function(c){
return parseInt(c,16)}):color.match(/\(([^,]+),([^,]+),([^,]+)/).slice(1).map(function(c){return parseInt(c,10)

})}function out(r,g,b){isVisible(r,g,b),colors.push("#"+hex(r)+hex(g)+hex(b))}function luma(r,g,b){r/=255,
g/=255,b/=255
var R=r<=.03928?r/12.92:(r+.055)/1.055^2.4,G=g<=.03928?g/12.92:(g+.055)/1.055^2.4,B=b<=.03928?b/12.92:(b+.055)/1.055^2.4


return.2126*R+.7152*G+.0722*B}function isVisible(r,g,b){var ratio=(bgLuma+.05)/(luma(r,g,b)+.05)
return ratio>2||ratio<.5}bg=bg||"#000000",fg=fg||"#f0f0f0",colors||(colors=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"])


for(var bgLuma=luma.apply(null,parseColor(bg)),overridenColors=Object.create(null),r=[0,95,135,175,215,255],i=0;i<216;i++)out(r[i/36%6|0],r[i/6%6|0],r[i%6])


for(i=0;i<24;i++)r=8+10*i,out(r,r,r)
this.defaultColors={bg:bg,fg:fg},colors[256]=this.defaultColors.bg,colors[257]=this.defaultColors.fg,
this.colors=colors,this.overridenColors=overridenColors}})


define("plugins/c9.ide.terminal/aceterm/libterm",[],function(require,exports,module){function Terminal(cols,rows,handler){
this.cols=cols||Terminal.geometry[0],this.rows=rows||Terminal.geometry[1],handler&&this.on("input",handler),
this.ybase=0,this.ydisp=0,this.x=0,this.y=0,this.cursorState=0,this.cursorHidden=!1,this.convertEol=!1,
this.state=0,this.scrollTop=0,this.scrollBottom=this.rows-1,this.applicationKeypad=!1,this.originMode=!1,
this.insertMode=!1,this.wraparoundMode=!1,this.normal=null,this.charset=null,this.gcharset=null,this.glevel=0,
this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,
this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.sizeChanges,this.refreshStart,
this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.readable=!0,this.writable=!0,this.defAttr=131840,
this.curAttr=this.defAttr,this.ch=[this.defAttr,""],this.params=[],this.currentParam=0,this.prefix="",
this.postfix="",this.lines=[]
for(var i=this.rows;i--;)this.lines.push(this.blankLine())
this.tabs,this.setupStops(),this.refreshSync=this.refreshSync.bind(this),this.refreshEnd=this.refreshStart=0,
this.$resetScreenOnStateChange,this.showCursor()}function getCSIRegexp(argument){if(CSIRegexp)return CSIRegexp


var classes={C0:"\\x00-\\x1F",SPACE:"\\x20\\xA0",G0:"\\x21-\\x7E",Intermediate:"\\x20-\\x2F",Parameters:"\\x30-\\x3F",
Uppercase:"\\x40-\\x5F",Lowercase:"\\x60-\\x7E",Alphabetic:"\\x40-\\x7E",Delete:"\\x7F",C1:"\\x80-\\x9F",
G1:"\\xA1-\\xFE",Special:"\\xA0\\xFF",ESC:"\\x1b",Ignore:"\\x7F\\x00-\\x1F\\x80-\\x9F"},g=/:ESC:(\[:Parameters:*:Intermediate:?:Alphabetic:?|:Intermediate:+:Parameters:|:Parameters:|:Lowercase:|)|[:Ignore:]/,inBrackets=!1,source=g.source.replace(/(\\.)|([\[\]])|:(\w*):/g,function(_,esc,b,cls){
if(esc)return esc
if(b)return inBrackets="["==b,b
if(!cls)return":"
var r=classes[cls]
return/ESC|Delete|C0|C1/.test(cls)||(r+=classes.Ignore),inBrackets||"ESC"==cls||(r="["+r+"]"),r})
return CSIRegexp=new RegExp(source,"g")}function log(str){for(var m,r=getCSIRegexp(),tokens=[],last=0;m=r.exec(str);){
var l=m.index
l>last&&tokens.push({type:"black",val:str.substring(last,l)})
var val=m[0]
tokens.push({type:/^\x1b\[.*m$/.test(val)?"gray":"\r"==val?"darkgray":"red",val:JSON.stringify(val).slice(1,-1).replace(/\\u001b/g,"").replace(/\\n/g,"\n")
}),last=r.lastIndex}last<str.length&&tokens.push({type:"text",val:str.substr(last)})
var args=[""]
return tokens.forEach(function(t){t.val&&(args[0]+="%c"+t.val,args.push("color:"+t.type+";border-right: 0px solid gray; padding-right: 0.7em"))

}),console.log.apply(console,args),tokens}var EventEmitter=require("events").EventEmitter,wc=require("./wc"),normal=0,escaped=1,csi=2,osc=3,charset=4,dcs=5,ignore=6


Terminal.prototype=new EventEmitter,Terminal.colors=[],Terminal.setColors=require("./term_colors"),Terminal.setColors(),
Terminal.termName="xterm",Terminal.geometry=[80,30],Terminal.cursorBlink=!0,Terminal.visualBell=!1,Terminal.popOnBell=!1,
Terminal.scrollback=1e3,Terminal.screenKeys=!1,Terminal.programFeatures=!1,Terminal.debug=!1,Terminal.prototype.getCharAt=function(row,column){
return this.lines[this.ybase+row]&&this.lines[this.ybase+row][column]},Terminal.prototype.$debugCharsAt=function(row){
return(this.lines[this.ybase+row]||[]).map(function(b){return b&&b[1]})},Terminal.prototype.focus=function(){
Terminal.focus!==this&&(Terminal.focus&&(Terminal.focus.cursorState=0,Terminal.focus.sendFocus&&Terminal.focus.send("[O")),
this.sendFocus&&this.send("[I"))},Terminal.prototype.open=function(){},Terminal.prototype.destroy=function(){
this.readable=!1,this.writable=!1,this._events={},this.handler=function(){},this.write=function(){}},
Terminal.prototype.setOutputHistory=function(data,trim){var tmp=new Terminal(this.cols,this.rows)
if(tmp.convertEol=!0,trim){var lines=data.split("\n").map(function(l){return l.trimRight()})
lines[lines.length-1]||lines.pop(),data=lines.join("\n")}tmp.write(data),tmp.resize(),this.lines=tmp.lines.slice(0,tmp.ybase).concat(this.lines.slice(this.ybase)),
this.ybase=tmp.ybase},Terminal.prototype.refresh=function(start,end){this.refreshStart=Math.min(this.refreshStart,start)||0,
this.refreshEnd=Math.max(this.refreshEnd,end)||0
var d=this.refreshEnd-this.refreshStart
if(!this.refreshTimer)if(!d||this.isRenderPending())this.refreshSync()
else{var timeout=d<2?10:60
this.refreshTimer=setTimeout(this.refreshSync,timeout)}},Terminal.prototype.refreshSync=function(){this.refreshView(this.refreshStart,this.refreshEnd),
this.refreshStart=this.refreshEnd=this.y,this.refreshTimer=null},Terminal.prototype.refreshView=function(start,end){},
Terminal.prototype.isRenderPending=function(){},Terminal.prototype.cursorBlink=function(){Terminal.focus===this&&Terminal.cursorBlink&&!Terminal.mousePressed&&(this.cursorState^=1)

},Terminal.prototype.hideCursor=function(){this.cursorState=0},Terminal.prototype.showCursor=function(){
this.cursorState||(this.cursorState=1)},Terminal.prototype.startBlink=function(){if(Terminal.cursorBlink){
var self=this
this._blinker=function(){self.cursorBlink()},this._blink=setInterval(this._blinker,500)}},Terminal.prototype.refreshBlink=function(){
Terminal.cursorBlink&&(clearInterval(this._blink),this._blink=setInterval(this._blinker,500))},Terminal.prototype.clear=function(){
for(this.lines.splice(0,this.ybase+this.y),this.lines.splice(1,this.lines.length-1);this.lines.length<this.rows;)this.lines.push(this.blankLine())


this.y=0,this.ybase=0,this.ydisp=0,this.refresh(0,this.rows-1),this.emit("clear")},Terminal.prototype.clearScreen=function(padding){
for(var i=this.scrollBottom-this.scrollTop;i>0&&this.isLineEmpty(this.lines[i+this.ybase]);)i--
for(i+=0|padding;i-- >0;)this.scroll()
this.emit("input")},Terminal.prototype.scroll=function(){var row
if(++this.ybase===Terminal.scrollback){var lineCount=this.ybase/2|0
this.emit("discardOldScrollback",lineCount),this.ybase-=lineCount,this.lines=this.lines.slice(lineCount)

}this.ydisp=this.ybase,row=this.ybase+this.rows-1,row-=this.rows-1-this.scrollBottom,row===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(row,0,this.blankLine()),
0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.ydisp=this.ybase),this.lines.splice(this.ybase+this.scrollTop,1)),
this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},Terminal.prototype.write=function(data){
var transformed=this.emit("beforeWrite",data)
"string"==typeof transformed&&(data=transformed),this.writeInternal(data),this.emit("afterWrite",data)

},Terminal.prototype.writeInternal=function(data){var ch,l=data.length,i=0
for(this.ybase!==this.ydisp&&(this.ydisp=this.ybase,this.maxRange());i<l;i++)switch(ch=data[i],this.state){
case normal:switch(ch){case"":this.bell()
break
case"\n":case"\x0B":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,
this.scroll()),this.emit("newline",{y:this.y,lines:this.lines,ybase:this.ybase,rows:this.rows})
break
case"\r":this.x=0
break
case"\b":this.x>0&&this.x--
break
case"\t":this.x=this.nextStop()
break
case"":this.glevel=1,this.charset=this.charsets[1]
break
case"":this.glevel=0,this.charset=this.charsets[0]
break
case"":this.state=escaped
break
default:if(ch>=" "){this.charset&&this.charset[ch]&&(ch=this.charset[ch])
var lines=this.lines,line=lines[this.y+this.ybase]
this.x>=this.cols?(line&&(line.wrapped=!0),this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll())):line&&"wait"===line.wrapped&&(line.wrapped=!1)


var insertY=this.y+this.ybase
lines[insertY]||(lines.length||(lines[0]=this.blankLine()),insertY=lines.length-1)
var width=ch>""?wc.charWidth(ch.charCodeAt(0)):1
line=lines[insertY]
for(var x=this.x;line[x]&&!line[x][1]&&x>0;)line[x]=[line[x][0]," "],x--
switch(width){case 1:this.insertMode?line.splice(this.x,0,[this.curAttr,ch]):line[this.x]=[this.curAttr,ch]


break
case 0:this.x>0&&this.x--,line[this.x]=[this.curAttr,line[this.x][1]+ch]
break
case 2:this.insertMode?line.splice(this.x,0,[this.curAttr,ch],[this.curAttr,""]):(line[this.x]=[this.curAttr,ch],
line[this.x+1]=[this.curAttr,"\0"]),this.x++}this.x++,this.updateRange(this.y)}}break
case escaped:switch(ch){case"[":this.params=[],this.currentParam=0,this.state=csi
break
case"]":this.params=[],this.currentParam=0,this.state=osc
break
case"P":this.params=[],this.currentParam=0,this.state=dcs
break
case"_":this.state=ignore
break
case"^":this.state=ignore
break
case"c":this.reset()
break
case"E":this.x=0
case"D":this.index()
break
case"M":this.reverseIndex()
break
case"%":this.charset=null,this.state=normal,i++
break
case"(":case")":case"*":case"+":case"-":case".":switch(ch){case"(":this.gcharset=0
break
case")":this.gcharset=1
break
case"*":this.gcharset=2
break
case"+":this.gcharset=3
break
case"-":this.gcharset=1
break
case".":this.gcharset=2}this.state=charset
break
case"/":this.gcharset=3,this.charsets[this.gcharset]=null,this.glevel===this.gcharset&&(this.charset=null),
this.gcharset=null,this.state=normal,i++
break
case"7":this.saveCursor(),this.state=normal
break
case"8":this.restoreCursor(),this.state=normal
break
case"#":this.state=normal,i++
break
case"H":this.tabSet()
break
case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.state=normal


break
case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.state=normal
break
default:this.state=normal,this.error("Unknown ESC control: %s.",ch)}break
case charset:switch(ch){case"0":this.charsets[this.gcharset]=Terminal.charsets.SCLD,this.gcharset===this.glevel&&(this.charset=Terminal.charsets.SCLD),
this.gcharset=null
break
case"B":default:this.charsets[this.gcharset]=null,this.gcharset===this.glevel&&(this.charset=null),this.gcharset=null

}this.state=normal
break
case osc:if(""===ch||""===ch){switch(""===ch&&i++,this.params.push(this.currentParam),this.params[0]){
case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title))
break
case 3:break
case 4:case 5:break
case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:break
case 46:break
case 50:var args=this.params[1].match(/CursorShape=(.)/i);["BLOCK","BEAM","UNDERLINE"][parseInt(args&&args[1])||0]


break
case 51:break
case 52:break
case 104:case 105:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:}this.params=[],
this.currentParam=0,this.state=normal}else this.params.length?this.currentParam+=ch:ch>="0"&&ch<="9"?this.currentParam=10*this.currentParam+ch.charCodeAt(0)-48:";"===ch&&(this.params.push(this.currentParam),
this.currentParam="")
break
case csi:if("?"===ch||">"===ch||"!"===ch){this.prefix=ch
break}if(ch>="0"&&ch<="9"){this.currentParam=10*this.currentParam+ch.charCodeAt(0)-48
break}if("$"===ch||'"'===ch||" "===ch||"'"===ch){this.postfix=ch
break}if(this.params.push(this.currentParam),this.currentParam=0,";"===ch)break
switch(this.state=normal,ch){case"A":this.cursorUp(this.params)
break
case"B":this.cursorDown(this.params)
break
case"C":this.cursorForward(this.params)
break
case"D":this.cursorBackward(this.params)
break
case"H":var oldCursor=[this.y+1,this.x+1]
this.cursorPos(this.params),i=this.checkCursorReset(data,i,oldCursor)
break
case"J":this.eraseInDisplay(this.params)
break
case"K":this.eraseInLine(this.params)
break
case"m":if(">"==this.prefix)break
this.charAttributes(this.params)
break
case"n":if(">"==this.prefix)break
this.deviceStatus(this.params)
break
case"@":this.insertChars(this.params)
break
case"E":this.cursorNextLine(this.params)
break
case"F":this.cursorPrecedingLine(this.params)
break
case"G":this.cursorCharAbsolute(this.params)
break
case"L":this.insertLines(this.params)
break
case"M":this.deleteLines(this.params)
break
case"P":this.deleteChars(this.params)
break
case"X":this.eraseChars(this.params)
break
case"`":this.charPosAbsolute(this.params)
break
case"a":this.HPositionRelative(this.params)
break
case"c":this.sendDeviceAttributes(this.params)
break
case"d":this.linePosAbsolute(this.params)
break
case"e":this.VPositionRelative(this.params)
break
case"f":this.HVPosition(this.params)
break
case"h":this.setMode(this.params)
break
case"l":this.resetMode(this.params)
break
case"r":this.setScrollRegion(this.params)
break
case"s":this.saveCursor(this.params)
break
case"u":this.restoreCursor(this.params)
break
case"I":this.cursorForwardTab(this.params)
break
case"S":this.scrollUp(this.params)
break
case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params)
break
case"Z":this.cursorBackwardTab(this.params)
break
case"b":this.repeatPrecedingCharacter(this.params)
break
case"g":this.tabClear(this.params)
break
case"p":switch(this.prefix){case"!":this.softReset(this.params)}break
case"q":if(" "===this.postfix){this.setCursorStyle(this.params)
break}if('"'===this.postfix){this.setCharProtectionAttr(this.params)
break}this.loadLEDs(this.params)
break
default:this.error("Unknown CSI code: %s.",ch)}this.prefix="",this.postfix=""
break
case dcs:if(""===ch||""===ch){switch(""===ch&&i++,this.prefix){case"":break
case"$q":var pt=this.currentParam,valid=!1
switch(pt){case'"q':pt='0"q'
break
case'"p':pt='61"p'
break
case"r":pt=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r"
break
case"m":pt="0m"
break
default:this.error("Unknown DCS Pt: %s.",pt),pt=""}this.send("P"+ +valid+"$r"+pt+"\\")
break
case"+p":break
case"+q":var pt=this.currentParam,valid=!1
this.send("P"+ +valid+"+r"+pt+"\\")
break
default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0,this.prefix="",this.state=normal

}else this.currentParam?this.currentParam+=ch:this.prefix||"$"===ch||"+"===ch?2===this.prefix.length?this.currentParam=ch:this.prefix+=ch:this.currentParam=ch


break
case ignore:""!==ch&&""!==ch||(""===ch&&i++,this.state=normal)}this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd)

},Terminal.prototype.writeln=function(data){this.write(data+"\r\n")},Terminal.prototype.setgLevel=function(g){
this.glevel=g,this.charset=this.charsets[g]},Terminal.prototype.setgCharset=function(g,charset){this.charsets[g]=charset,
this.glevel===g&&(this.charset=charset)},Terminal.prototype.send=function(data){this.handler(data)},Terminal.prototype.bell=function(){
if(Terminal.visualBell){var self=this
this.element.style.borderColor="white",setTimeout(function(){self.element.style.borderColor=""},10),Terminal.popOnBell&&this.focus()

}},Terminal.prototype.log=function(){if(Terminal.debug&&window.console&&window.console.log){var args=Array.prototype.slice.call(arguments)


window.console.log.apply(window.console,args)}},Terminal.prototype.error=function(){if(Terminal.debug&&window.console&&window.console.error){
var args=Array.prototype.slice.call(arguments)
window.console.error.apply(window.console,args)}},Terminal.prototype.isLineEmpty=function(line){return!line||!line.some(function(x){
return x[1]})},Terminal.prototype.isSmallScreen=function(){function isEmpty(x){return"\xb7"===x[1]||"\u2500"===x[1]

}for(var col=this.cols-1,row=Math.min(this.rows,this.lines.length)-1,line=this.lines[row],i=0;i<=col&&(line[i]&&isEmpty(line[i]));i++);
if(i==col+1)return!0
for(var i=0;i<=row;i++){var x=this.lines[this.ybase+i]
if(!x||!x[col]||!isEmpty(x[col]))return!1}return!0},Terminal.prototype.noScrollBack=function(){return this.applicationKeypad||this.mouseEvents||this.tmuxDotCover

},Terminal.prototype.setSize=function(x,y,local){this.checkResizeTimer&&clearTimeout(this.checkResizeTimer),
this.checkResizeTimer=setTimeout(function(){this.checkResizeTimer=null}.bind(this),1e3)},Terminal.prototype.checkCursorReset=function(data,i,oldCursor){
if(this.noScrollBack()||!this.checkResizeTimer)return i
this.afterScreenRedraw=!0
var m=data.substr(i+1,10).match(/^\x1b\[(\d);(\d+)r/)
if(m){var region={top:parseInt(m[1]),bottom:parseInt(m[2])}
return 1==region.top&&region.bottom!=this.rows&&this.waitFullRedraw(data.substr(i+m[0].length),region)?(this.y=oldCursor[0]-1,
this.x=oldCursor[1]-1,data.length):i}return i},Terminal.prototype.waitFullRedraw=function(data){if(!this.tmpScreen){
this.tmpScreen=new Terminal(this.cols,this.rows)
var buffer=data,_self=this
return this.on("beforeWrite",function wait(data){buffer+=data
var m=buffer.match(/\x1b\[[\d;]+H\x1b\[[\d;]+r/)
return m?(_self.off("beforeWrite",wait),_self.tmpScreen=null,buffer.substr(m.index)):""}),!0}},Terminal.prototype.trimLine=function(line){
for(;line.length;){var data=line[line.length-1]
if(data&&data[1])break
line.pop()}},Terminal.prototype.padRight=function(line,x){for(;line.length<x;)line.push(this.ch)
return line},Terminal.prototype.rewrapLines=function(lines,x,y,xOld,yOld,noScrollBack){var line,next,ybase=this.ybase,cursorRow=this.y+this.ybase,cursorColumn=this.x,addedRows=0


if(xOld<x)for(var row=0;row<lines.length;row++){if(line=lines[row]||[],!noScrollBack)for(;line.wrapped&&line.length<x&&(next=lines[row+1]);){
for(this.trimLine(line);line.length<x&&next.length;)line.push(next.shift())
cursorRow==row+1&&(cursorColumn<x-xOld?(cursorRow--,cursorColumn=xOld+cursorColumn):cursorColumn-=x-xOld),
next.length&&!this.isLineEmpty(next)||(line.wrapped=next.wrapped,lines.splice(row+1,1),addedRows--,cursorRow>row&&cursorRow--)

}this.padRight(line,x)}else if(xOld>x)for(var row=0;row<cursorRow;row++){line=lines[row]||[]
var diff=xOld-x,newLine=line.splice(x,diff)
if(!noScrollBack){for(;line.wrapped&&!this.isLineEmpty(newLine)&&(line=lines[row+1],row++,line);)line.splice.apply(line,[0,0].concat(newLine)),
cursorRow==row-1?this.x>=x?(cursorRow++,cursorColumn-=x):cursorColumn=(cursorColumn+newLine.length)%x:cursorRow==row&&(cursorColumn+=newLine.length,
cursorColumn>x&&(cursorRow++,cursorColumn-=x)),newLine=line.splice(x,line.length-x)
for(;newLine.length&&!this.isLineEmpty(newLine);)line.wrapped=!0,line=newLine.splice(0,x),this.padRight(line,x),
cursorRow>row?cursorRow++:cursorRow==row&&cursorColumn>x&&(cursorRow++,cursorColumn-=x),row++,lines.splice(row,0,line),
addedRows++}}for(this.x=cursorColumn,cursorRow>=this.y&&(ybase=cursorRow-this.y);ybase+yOld>lines.length;)lines.push(this.padRight([],x))


if(this.ybase=ybase,yOld<y){var toInsert=y-yOld,scrollBackLength=noScrollBack?0:Math.max(lines.length-y,0),fromScrollBack=Math.min(this.ybase,toInsert,scrollBackLength)


if(this.ybase-=fromScrollBack,this.y+=fromScrollBack,toInsert>fromScrollBack)for(var j=toInsert-fromScrollBack;j--;)lines.push(this.blankLine())

}else if(yOld>y){for(var toRemove=yOld-y;toRemove-- >0;){if(line=lines[lines.length-1],!(yOld-this.y>toRemove+1&&(noScrollBack||this.isLineEmpty(line)))){
toRemove++
break}lines.pop()}toRemove>0&&(this.ybase+=toRemove,this.y-=toRemove)}for(var max=lines.length-y;max>0&&(line=lines[0],
line&&this.isLineEmpty(line));)lines.shift(),max--,this.ybase>0&&this.ybase--
return 0},Terminal.prototype.resize=function(x,y){this.emit("resizeStart"),x<5&&(x=5),y<1&&(y=1)
var noScrollBack=this.noScrollBack(),dy=this.rewrapLines(this.lines,x,y,this.cols,this.rows,noScrollBack)


this.setupStops(x),this.cols=x,this.rows=y,this.y+=dy,this.ybase+=dy,this.y>=y&&(this.y=y-1),this.x>=x&&(this.x=x-1),
this.scrollTop=0,this.scrollBottom=y-1,this.refresh(0,this.rows-1),this.normal=null,this.emit("resize",{
x:x,y:y})},Terminal.prototype.updateRange=function(y){y<this.refreshStart&&(this.refreshStart=y),y>this.refreshEnd&&(this.refreshEnd=y)

},Terminal.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},Terminal.prototype.setupStops=function(i){
for(null!=i?this.tabs[i]||(i=this.prevStop(i)):(this.tabs={},i=0);i<this.cols;i+=8)this.tabs[i]=!0},Terminal.prototype.prevStop=function(x){
for(null==x&&(x=this.x);!this.tabs[--x]&&x>0;);return x>=this.cols?this.cols-1:x<0?0:x},Terminal.prototype.nextStop=function(x){
for(null==x&&(x=this.x);!this.tabs[++x]&&x<this.cols;);return x>=this.cols?this.cols-1:x<0?0:x},Terminal.prototype.eraseRight=function(x,y){
var line=this.lines[this.ybase+y],ch=[this.curAttr,""]
if(line){for(line.wrapped&&(line.wrapped="wait");x<this.cols;x++)line[x]=ch
this.updateRange(y)}},Terminal.prototype.eraseLeft=function(x,y){var line=this.lines[this.ybase+y],ch=[this.curAttr,""]


for(x++;x--;)line[x]=ch
this.updateRange(y)},Terminal.prototype.eraseLine=function(y){this.eraseRight(0,y)},Terminal.prototype.blankLine=function(cur){
for(var attr=cur?this.curAttr:this.defAttr,ch=[attr,""],line=[],i=0;i<this.cols;i++)line[i]=ch
return line},Terminal.prototype.ch=function(cur){return cur?[this.curAttr,""]:[this.defAttr,""]},Terminal.prototype.is=function(term){
var name=this.termName||Terminal.termName
return 0===(name+"").indexOf(term)},Terminal.prototype.handler=function(data){this.emit("input",data)

},Terminal.prototype.handleTitle=function(title){this.emit("title",title)},Terminal.prototype.index=function(){
this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=normal},Terminal.prototype.reverseIndex=function(){
var j
this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),j=this.rows-1-this.scrollBottom,
this.lines.splice(this.rows-1+this.ybase-j+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),
this.state=normal},Terminal.prototype.reset=function(){Terminal.call(this,this.cols,this.rows),this.refresh(0,this.rows-1)

},Terminal.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=normal},Terminal.prototype.cursorUp=function(params){
var param=params[0]
param<1&&(param=1),this.y-=param,this.y<0&&(this.y=0)},Terminal.prototype.cursorDown=function(params){
var param=params[0]
param<1&&(param=1),this.y+=param,this.y>=this.rows&&(this.y=this.rows-1)},Terminal.prototype.cursorForward=function(params){
var param=params[0]
param<1&&(param=1),this.x+=param,this.x>=this.cols&&(this.x=this.cols-1)},Terminal.prototype.cursorBackward=function(params){
var param=params[0]
param<1&&(param=1),this.x-=param,this.x<0&&(this.x=0)},Terminal.prototype.cursorPos=function(params){
var row,col
row=params[0]-1,col=params.length>=2?params[1]-1:0,row<0?row=0:row>=this.rows&&(row=this.rows-1),col<0?col=0:col>=this.cols&&(col=this.cols-1),
this.x=col,this.y=row},Terminal.prototype.eraseInDisplay=function(params){var j
switch(params[0]){case 0:for(this.eraseRight(this.x,this.y),j=this.y+1;j<this.rows;j++)this.eraseLine(j)


break
case 1:for(this.eraseLeft(this.x,this.y),j=this.y;j--;)this.eraseLine(j)
break
case 2:for(j=this.rows;j--;)this.eraseLine(j)
break
case 3:}},Terminal.prototype.eraseInLine=function(params){switch(params[0]){case 0:this.eraseRight(this.x,this.y)


break
case 1:this.eraseLeft(this.x,this.y)
break
case 2:this.eraseLine(this.y)}},Terminal.prototype.charAttributes=function(params){for(var bg,fg,p,l=params.length,i=0;i<l;i++)if(p=params[i],
p>=30&&p<=37)this.curAttr=this.curAttr&-261633|p-30<<9
else if(p>=40&&p<=47)this.curAttr=this.curAttr&-512|p-40
else if(p>=90&&p<=97)p+=8,this.curAttr=this.curAttr&-261633|p-90<<9
else if(p>=100&&p<=107)p+=8,this.curAttr=this.curAttr&-512|p-100
else if(0===p)this.curAttr=this.defAttr
else if(1===p)this.curAttr=this.curAttr|1<<18
else if(4===p)this.curAttr=this.curAttr|2<<18
else if(7===p||27===p){if(7===p){if(this.curAttr>>18&4)continue
this.curAttr=this.curAttr|4<<18}else if(27===p){if(4&~(this.curAttr>>18))continue
this.curAttr=this.curAttr&-1048577}bg=511&this.curAttr,fg=this.curAttr>>9&511,this.curAttr=this.curAttr&-262144|(bg<<9|fg)

}else if(22===p)this.curAttr=this.curAttr&-262145
else if(24===p)this.curAttr=this.curAttr&-524289
else if(39===p)this.curAttr=this.curAttr&-261633,this.curAttr=this.curAttr|(this.defAttr>>9&511)<<9
else if(49===p)this.curAttr=this.curAttr&-512,this.curAttr=this.curAttr|511&this.defAttr
else if(38===p){if(5!==params[i+1])continue
i+=2,p=255&params[i],this.curAttr=this.curAttr&-261633|p<<9}else if(48===p){if(5!==params[i+1])continue


i+=2,p=255&params[i],this.curAttr=this.curAttr&-512|p}},Terminal.prototype.deviceStatus=function(params){
if(this.prefix){if("?"===this.prefix)switch(params[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R")


break
case 15:break
case 25:break
case 26:break
case 53:}}else switch(params[0]){case 5:this.send("[0n")
break
case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},Terminal.prototype.insertChars=function(params){
var param,row,j,ch
for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,j=this.x,ch=[this.curAttr,""];param--&&j<this.cols;)this.lines[row].splice(j++,0,ch),
this.lines[row].pop()},Terminal.prototype.cursorNextLine=function(params){var param=params[0]
param<1&&(param=1),this.y+=param,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},Terminal.prototype.cursorPrecedingLine=function(params){
var param=params[0]
param<1&&(param=1),this.y-=param,this.y<0&&(this.y=0),this.x=0},Terminal.prototype.cursorCharAbsolute=function(params){
var param=params[0]
param<1&&(param=1),this.x=param-1},Terminal.prototype.insertLines=function(params){var param,row,j
for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,j=this.rows-1-this.scrollBottom,j=this.rows-1+this.ybase-j+1;param--;)this.lines.splice(row,0,this.blankLine(!0)),
this.lines.splice(j,1)
this.updateRange(this.y),this.updateRange(this.scrollBottom)},Terminal.prototype.deleteLines=function(params){
var param,row,j
for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,j=this.rows-1-this.scrollBottom,j=this.rows-1+this.ybase-j;param--;)this.lines.splice(j+1,0,this.blankLine(!0)),
this.lines.splice(row,1)
this.updateRange(this.y),this.updateRange(this.scrollBottom)},Terminal.prototype.deleteChars=function(params){
var param,row,ch
for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,ch=[this.curAttr,""];param--;)this.lines[row].splice(this.x,1),
this.lines[row].push(ch)},Terminal.prototype.eraseChars=function(params){var param,row,j,ch
for(param=params[0],param<1&&(param=1),row=this.y+this.ybase,j=this.x,ch=[this.curAttr,""];param--&&j<this.cols;)this.lines[row][j++]=ch

},Terminal.prototype.charPosAbsolute=function(params){var param=params[0]
param<1&&(param=1),this.x=param-1,this.x>=this.cols&&(this.x=this.cols-1)},Terminal.prototype.HPositionRelative=function(params){
var param=params[0]
param<1&&(param=1),this.x+=param,this.x>=this.cols&&(this.x=this.cols-1)},Terminal.prototype.sendDeviceAttributes=function(params){
params[0]>0||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(params[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))

},Terminal.prototype.linePosAbsolute=function(params){var param=params[0]
param<1&&(param=1),this.y=param-1,this.y>=this.rows&&(this.y=this.rows-1)},Terminal.prototype.VPositionRelative=function(params){
var param=params[0]
param<1&&(param=1),this.y+=param,this.y>=this.rows&&(this.y=this.rows-1)},Terminal.prototype.HVPosition=function(params){
params[0]<1&&(params[0]=1),params[1]<1&&(params[1]=1),this.y=params[0]-1,this.y>=this.rows&&(this.y=this.rows-1),
this.x=params[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},Terminal.prototype.setMode=function(params){
if("object"!=typeof params)if(this.prefix){if("?"===this.prefix)switch(params){case 1:this.applicationKeypad=!0


break
case 3:this.savedCols=this.cols,this.resize(132,this.rows)
break
case 6:this.originMode=!0
break
case 7:this.wraparoundMode=!0
break
case 12:break
case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===params,this.vt200Mouse=1e3===params,this.normalMouse=params>1e3,
this.mouseEvents=!0,this.log("Binding to mouse events.")
break
case 1004:this.sendFocus=!0
break
case 1005:this.utfMouse=!0
break
case 1006:this.sgrMouse=!0
break
case 1015:this.urxvtMouse=!0
break
case 25:this.cursorHidden=!1
break
case 1049:case 47:case 1047:var shouldReset=null==this.$resetScreenOnStateChange?!this.normal:"always"==this.$resetScreenOnStateChange


if(this.emit("changeMode")===!1&&(shouldReset=!1),shouldReset){var normal={lines:this.lines,ybase:this.ybase,
ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs
},isNotEmty=this.lines.some(function(l){return l.some(function(ch){return ch[1]})})
this.reset(),this.normal=isNotEmty&&normal}this.showCursor()}}else switch(params){case 4:this.insertMode=!0


break
case 20:}else for(var l=params.length,i=0;i<l;i++)this.setMode(params[i])},Terminal.prototype.resetMode=function(params){
if("object"!=typeof params)if(this.prefix){if("?"===this.prefix)switch(params){case 1:this.applicationKeypad=!1


break
case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols
break
case 6:this.originMode=!1
break
case 7:this.wraparoundMode=!1
break
case 12:break
case 9:case 1e3:case 1002:case 1003:this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1


break
case 1004:this.sendFocus=!1
break
case 1005:this.utfMouse=!1
break
case 1006:this.sgrMouse=!1
break
case 1015:this.urxvtMouse=!1
break
case 25:this.cursorHidden=!0
break
case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,
this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,
this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}else switch(params){
case 4:this.insertMode=!1
break
case 20:}else for(var l=params.length,i=0;i<l;i++)this.resetMode(params[i])},Terminal.prototype.setScrollRegion=function(params){
this.prefix||(this.scrollTop=(params[0]||1)-1,this.scrollBottom=(params[1]||this.rows)-1,this.x=0,this.y=0,
this.emit("setScrollRegion"))},Terminal.prototype.saveCursor=function(params){this.savedX=this.x,this.savedY=this.y

},Terminal.prototype.restoreCursor=function(params){this.x=this.savedX||0,this.y=this.savedY||0},Terminal.prototype.cursorForwardTab=function(params){
for(var param=params[0]||1;param--;)this.x=this.nextStop()},Terminal.prototype.scrollUp=function(params){
for(var param=params[0]||1;param--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine())


this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},Terminal.prototype.scrollDown=function(params){
for(var param=params[0]||1;param--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine())


this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},Terminal.prototype.initMouseTracking=function(params){},
Terminal.prototype.resetTitleModes=function(params){},Terminal.prototype.cursorBackwardTab=function(params){
for(var param=params[0]||1;param--;)this.x=this.prevStop()},Terminal.prototype.repeatPrecedingCharacter=function(params){
for(var param=params[0]||1,line=this.lines[this.ybase+this.y],ch=line[this.x-1]||[this.defAttr,""];param--;)line[this.x++]=ch

},Terminal.prototype.tabClear=function(params){var param=params[0]
param<=0?delete this.tabs[this.x]:3===param&&(this.tabs={})},Terminal.prototype.mediaCopy=function(params){},
Terminal.prototype.setResources=function(params){},Terminal.prototype.disableModifiers=function(params){},
Terminal.prototype.setPointerMode=function(params){},Terminal.prototype.softReset=function(params){this.cursorHidden=!1,
this.insertMode=!1,this.originMode=!1,this.wraparoundMode=!1,this.applicationKeypad=!1,this.scrollTop=0,
this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.charsets=[null]

},Terminal.prototype.requestAnsiMode=function(params){},Terminal.prototype.requestPrivateMode=function(params){},
Terminal.prototype.setConformanceLevel=function(params){},Terminal.prototype.loadLEDs=function(params){},
Terminal.prototype.setCursorStyle=function(params){console.log("setCursorStyle",params)},Terminal.prototype.setCharProtectionAttr=function(params){},
Terminal.prototype.restorePrivateValues=function(params){},Terminal.prototype.setAttrInRectangle=function(params){
for(var line,i,t=params[0],l=params[1],b=params[2],r=params[3],attr=params[4];t<b+1;t++)for(line=this.lines[this.ybase+t],
i=l;i<r;i++)line[i]=[attr,line[i][1]]
this.updateRange(params[0]),this.updateRange(params[2])},Terminal.prototype.savePrivateValues=function(params){},
Terminal.prototype.manipulateWindow=function(params){},Terminal.prototype.reverseAttrInRectangle=function(params){},
Terminal.prototype.setTitleModeFeature=function(params){},Terminal.prototype.setWarningBellVolume=function(params){},
Terminal.prototype.setMarginBellVolume=function(params){},Terminal.prototype.copyRectangle=function(params){},
Terminal.prototype.enableFilterRectangle=function(params){},Terminal.prototype.requestParameters=function(params){},
Terminal.prototype.selectChangeExtent=function(params){},Terminal.prototype.fillRectangle=function(params){
for(var line,i,ch=params[0],t=params[1],l=params[2],b=params[3],r=params[4];t<b+1;t++)for(line=this.lines[this.ybase+t],
i=l;i<r;i++)line[i]=[line[i][0],String.fromCharCode(ch)]
this.updateRange(params[1]),this.updateRange(params[3])},Terminal.prototype.enableLocatorReporting=function(params){
params[0]>0},Terminal.prototype.eraseRectangle=function(params){var line,i,ch,t=params[0],l=params[1],b=params[2],r=params[3]


for(ch=[this.curAttr,""];t<b+1;t++)for(line=this.lines[this.ybase+t],i=l;i<r;i++)line[i]=ch
this.updateRange(params[0]),this.updateRange(params[2])},Terminal.prototype.setLocatorEvents=function(params){},
Terminal.prototype.selectiveEraseRectangle=function(params){},Terminal.prototype.requestLocatorPosition=function(params){},
Terminal.prototype.insertColumns=function(params){for(var i,param=params[0],l=this.ybase+this.rows,ch=[this.curAttr,""];param--;)for(i=this.ybase;i<l;i++)this.lines[i].splice(this.x+1,0,ch),
this.lines[i].pop()
this.maxRange()},Terminal.prototype.deleteColumns=function(params){for(var i,param=params[0],l=this.ybase+this.rows,ch=[this.curAttr,""];param--;)for(i=this.ybase;i<l;i++)this.lines[i].splice(this.x,1),
this.lines[i].push(ch)
this.maxRange()},Terminal.charsets={},Terminal.charsets.SCLD={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",
f:"\xb0",g:"\xb1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",
w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\xa3","~":"\xb7"},Terminal.charsets.UK=null,Terminal.charsets.US=null,
Terminal.charsets.Dutch=null,Terminal.charsets.Finnish=null,Terminal.charsets.French=null,Terminal.charsets.FrenchCanadian=null,
Terminal.charsets.German=null,Terminal.charsets.Italian=null,Terminal.charsets.NorwegianDanish=null,Terminal.charsets.Spanish=null,
Terminal.charsets.Swedish=null,Terminal.charsets.Swiss=null,Terminal.charsets.ISOLatin=null,module.exports=Terminal


var CSIRegexp
Terminal.log=log,Terminal.prototype.logLine=function(line){"number"==typeof line&&(line=this.lines[line])


for(var fgColor,bgColor,flags,text="",style="",tokens=[text],defAttr=this.defAttr,attr=defAttr,i=0;i<line.length;i++){
var data=line[i][0],ch=line[i][1]
data!==attr&&(attr!==defAttr&&(tokens.push(style),text+="%c"),data===defAttr||data===-1||(style="",bgColor=511&data,
fgColor=data>>9&511,flags=data>>18,1&flags&&(this.allowBoldFonts&&(style+="font-weight:bold;"),fgColor<8&&(fgColor+=8)),
2&flags&&(style+="text-decoration:underline;"),256===bgColor?257!==fgColor&&(style+="color:"+(Terminal.overridenColors[fgColor]||Terminal.colors[fgColor])+";"):(style+="background-color:"+Terminal.colors[bgColor]+";",
257!==fgColor&&(style+="color:"+Terminal.colors[fgColor]+";"),style+='display:inline-block" class="aceterm-line-bg" l="'+i))),
text+="%"==ch?"%%":ch,attr=data}return tokens[0]=text,console.log.apply(console,tokens),tokens}})


define("plugins/c9.ide.terminal/predict_echo",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,void editors.on("create",function(e){
if(e.editor&&"terminal"===e.editor.type){var terminal=e.editor
terminal.on("documentLoad",function(e){var session=e.doc.getSession(),predictor=new Predictor(terminal,session)


session.$predictor=predictor},plugin),terminal.on("beforeWrite",function(e){return e.session.$predictor.onBeforeWrite(e)

},plugin),terminal.on("afterWrite",function(e){return e.session.$predictor.onAfterWrite(e)},plugin),terminal.on("input",function(e){
return DEBUG&&console.log(">",e.data.replace("\r","\\r").replace("","\\bs")),e.session.$predictor.onInput(e)

},plugin)}},plugin))}function Predictor(terminal,session){function onInput(e){function addCommand(command){
if(predictions.push(command),pendingPings.unshift(Date.now()),command.before={predict:predictLine,predictIndex:predictIndex
},command["do"](),command.after={predict:predictLine,predictIndex:predictIndex},command.sent=Date.now(),
DEBUG){var alreadyEchoed=predictions[0].before.predict
console.log("!"+debugPromptSuffix()+predictLine.substr(0,alreadyEchoed.length)+"%c"+predictLine.substr(alreadyEchoed.length),"color: lightblue")

}command.timeout=setTimeout(function panic(){return c9.has(c9.NETWORK)&&c9.connected?isPossibleConnectionGone()?void vfsPing.ping(function(err,result){
pong(),panic()}):void(predictions.indexOf(command)>-1&&undoPredictions()):(state=STATE_WAIT_FOR_PROMPT_OR_ECHO,
void c9.once("connect",function(){command.timeout=setTimeout(panic,MIN_PREDICTION_WAIT)}))},Math.max(MIN_PREDICTION_WAIT,3*getAveragePing()+PING_DEVIATION))

}if(!c9.has(c9.NETWORK)||!c9.connected)return void(DEBUG&&console.log("!","nopredict: not connected"))


if(lastInput=1===e.data.length&&INSERTABLE_CHARS.test(e.data)?e.data:null,1!==session.terminal.cursorState||state!==STATE_PREDICT)return void(DEBUG&&console.log("!","nopredict: state =",state))


if(isPossibleConnectionGone())return DEBUG&&console.log("!","nopredict: connection gone?"),void(state=STATE_WAIT_FOR_PROMPT_OR_ECHO)


var prediction=InsertCommand.tryCreate(e.data)||CursorLeftCommand.tryCreate(e.data)||CursorRightCommand.tryCreate(e.data)||BackspaceCommand.tryCreate(e.data)||DeleteCommand.tryCreate(e.data)||HomeCommand.tryCreate(e.data)


return prediction?Array.isArray(prediction)?prediction.forEach(addCommand):void addCommand(prediction):(DEBUG&&console.log("!","nopredict:",e.data.replace(/\r/g,"\\r")),
void(state=STATE_WAIT_FOR_PROMPT))}function debugPromptSuffix(){return nonPredictTerminal.$debugCharsAt(nonPredictTerminal.y).slice(0,predictStartX).slice(-3).map(function(c){
return c||" "}).join("")}function isPossibleConnectionGone(){if(pendingPings.length){var avgPing=getAveragePing(),nextPing=Date.now()-pendingPings[0]


return nextPing>3*avgPing+PING_DEVIATION||void 0}}function onBeforeWrite(e){return e.$startX||(e.$startY=nonPredictTerminal.y,
e.$startX=nonPredictTerminal.x,nonPredictTerminal.write(e.data)),DEBUG&&console.log("<"+(state==STATE_PREDICT?debugPromptSuffix()+nonPredictTerminal.$debugCharsAt(e.$startY).slice(predictStartX).join(""):"")+"%c < "+e.data,"color: lightblue"),
predictions.length?(pong(),chopPredictions(e,predictions,function(err,results,line){!err&&results||(DEBUG&&console.log("[predict_echo] mispredict?",e.data.replace(/\r/g,"\\r")+"\n!="+session.terminal.$debugCharsAt(predictStartY-session.terminal.ybase).join("")+"\n<="+nonPredictTerminal.$debugCharsAt(e.$startY).join("")),
emit("mispredict",{data:e.data,line:charsOf(line),predictions:predictions,session:session}),undoPredictions())

}),writePredictData(e.data,e.$startX),!0):(state==STATE_PREDICT&&nonPredictStartY!==nonPredictTerminal.ybase+nonPredictTerminal.y&&(DEBUG&&console.log("  ^ disabled predictions: (row changed)"),
state=STATE_WAIT_FOR_PROMPT_OR_ECHO),tryEnablePrediction(e.data),void emit("nopredict",{data:e.data,session:session
}))}function writePredictData(data,startX){var predictTerminal=session.terminal,predictX=predictTerminal.x,predictY=predictTerminal.ybase+predictTerminal.y,predictChars=predictTerminal.lines[predictY].slice()


predictTerminal.x=startX,copyTerminalLineTo(predictTerminal),session.terminal.write(data)
for(var x=predictStartX;predictChars[x];x++)predictTerminal.lines[predictY][x]=predictChars[x]
predictTerminal.x=predictX}function pong(){pendingPings[0]&&(pendingPings[0]=Date.now())}function undoPredictions(){
DEBUG&&console.log("Prediction undo"),DEBUG&&chopPredictions({},predictions.slice(),function(){console.log("chop result: ",arguments)

}),DEBUG&&console.log("Restoring nonpredict line; from",session.terminal.$debugCharsAt(predictStartY-session.terminal.ybase).join(""),"to",nonPredictTerminal.$debugCharsAt(nonPredictStartY-nonPredictTerminal.ybase).join("")),
pendingPings=[],predictions=[],state=STATE_WAIT_FOR_PROMPT_OR_ECHO,copyTerminalLineTo(terminal),session.terminal.x=nonPredictTerminal.x,
lastInput=null}function copyTerminalLineTo(target){var predictTerminal=session.terminal,predictChars=predictTerminal.lines[predictStartY],nonPredictChars=nonPredictTerminal.lines[nonPredictStartY],fromChars=target===nonPredictTerminal?predictChars:nonPredictChars,toChars=target===nonPredictTerminal?nonPredictChars:predictChars


if(!predictChars)return void(state=STATE_WAIT_FOR_PROMPT)
if(!fromChars||!toChars)return state=STATE_WAIT_FOR_PROMPT,void errorHandler.reportError(new Error("Warning: can't copy terminal line: "),{
fromChars:fromChars,toChars:toChars})
for(var i=predictStartX;i<toChars.length;i++)toChars[i]=fromChars[i]||toChars[i]
predictTerminal.updateRange(predictStartY-predictTerminal.ybase)}function checkTextBeforePrediction(){
var predictTerminal=session.terminal,predictLine=predictTerminal.lines[predictStartY],line=nonPredictTerminal.lines[nonPredictStartY]


if(!predictLine||!line)return!1
for(var i=0;i<predictStartX;i++)if(assert(2===predictLine[i].length),predictLine[i][0]!==line[i][0]||predictLine[i][1]!==line[i][1])return!1


return!0}function chopPredictions(e,predictions,callback){function done(err,result){result&&emit("predict",{
data:e.data,session:session,predictions:predict}),callback(err,result,line)}function matchPrediction(prediction){
var predict=prediction.after.predict,oneOff=!1
if(nonPredictTerminal.x!==predictStartX+prediction.after.predictIndex&&!rowChanged)return!1
for(var i=predictStartX;i<line.length;i++)if(i<predictStartX+predict.length){if(line[i][1]!==predict[i-predictStartX]){
if(" "===line[i][1]&&!oneOff){oneOff=!0
continue}return!1}}else if(""!==line[i][1]&&" "!==line[i][1])return!1
return!oneOff||(matchedOneOff=!0,!1)}function getDuplicateIndex(prediction,predictions){for(var j=0;j<i;j++)if(predictions[j].after.predict===prediction.after.predict&&predictions[j].after.predictIndex===prediction.after.predictIndex)return j


return-1}var line=nonPredictTerminal.lines[nonPredictStartY],rowChanged=nonPredictStartY!==nonPredictTerminal.y+nonPredictTerminal.ybase


if(!checkTextBeforePrediction())return done(null,!1)
for(var matchedOneOff=!1,i=predictions.length-1;i>=0&&(!rowChanged||i===predictions.length-1);i--){var prediction=predictions[i]


if(matchPrediction(prediction)){DEBUG&&console.log("  ^ confirmed:",prediction.after.predict+" (saved "+(Date.now()-prediction.sent)+"ms)"),
lastPings.push(Date.now()-prediction.sent),lastPings.shift()
for(var j=0;j<=i;j++)clearTimeout(predictions[j].timeout),pendingPings.pop()
var predict,duplicate=getDuplicateIndex(prediction,predictions)
if(duplicate!==-1){for(var j=duplicate+1;j<=i;j++)predictions[j].optional=!0
predict=predictions.splice(0,duplicate+1)}else predict=predictions.splice(0,i+1)
return done(null,predict)}}return matchedOneOff?done(null,[]):isOptionalOnly(predictions)?done(null,[]):matchPrediction(NoopCommand.tryCreate())?done(null,[]):done(null,!1)

}function isOptionalOnly(predictions){return predictions.reduce(function(prev,p){return prev&&p.optional

},!0)}function tryEnablePrediction(data){if(state!==STATE_PREDICT&&(!predictions.length||isOptionalOnly(predictions)))return state!=STATE_WAIT_FOR_PROMPT&&state!==STATE_WAIT_FOR_PROMPT_OR_ECHO||!data.match(/[$#] $/)?!lastInput||state!==STATE_WAIT_FOR_PROMPT_OR_ECHO||lastInput!==data.substr(data.length-lastInput.length)||BASH_ONLY&&!isBashActive()?lastInput&&state==STATE_WAIT_FOR_PROMPT&&lastInput===data.substr(data.length-lastInput.length)&&isBashActive()?(DEBUG&&console.log("  ^ re-enabled predictions:",lastInput),
startPredict()):void 0:(DEBUG&&console.log("  ^ re-enabled predictions:",lastInput),startPredict()):(DEBUG&&console.log("  ^ re-enabled predictions: (prompt)"),
startPredict())}function startPredict(){predictIndex=0,predictLine="",predictStartX=nonPredictTerminal.x,
nonPredictStartY=nonPredictTerminal.y+nonPredictTerminal.ybase,predictStartY=session.terminal.y+session.terminal.ybase,
state=STATE_INITING}function onAfterWrite(e){state===STATE_INITING&&(predictStartY=session.terminal.y+session.terminal.ybase,
state=STATE_PREDICT,checkTextBeforePrediction()||(console.log("[predict_echo] Unable to init predictions; will try again later"),
state=STATE_WAIT_FOR_PROMPT))}function isBashActive(){for(var x=nonPredictTerminal.x-1,y=nonPredictTerminal.y;y>=0;y--){
var line=nonPredictTerminal.lines[y+nonPredictTerminal.ybase]
if(!line)return errorHandler.reportError(new Error("Warning: predict echo line is missing "),{lines:nonPredictTerminal.lines.length,
ybase:nonPredictTerminal.ybase,startY:nonPredictTerminal.y,y:y}),!1
for(;x>=0;){var char=line[x]&&line[x][1]
if(("$"===char||"#"===char)&&line[x+1]&&" "===line[x+1][1])return!0
x--}x=nonPredictTerminal.cols-1
var prevLineEnd=nonPredictTerminal.getCharAt(y-1,x-1)
if(!prevLineEnd||!prevLineEnd[1])return!1}return!1}function peek(offset){offset=offset||0
var char=session.terminal.getCharAt(session.terminal.y,session.terminal.x+offset)
return char&&char[1]}function peekAttr(offset){offset=offset||0
var char=session.terminal.getCharAt(session.terminal.y,session.terminal.x+offset)
return char&&char[0]}function peekSuffix(offset){offset=offset||0
for(var result="",x=session.terminal.x+offset;x<session.terminal.cols;x++){var char=session.terminal.getCharAt(session.terminal.y,x)


result+=char&&char[1]||""}return result}function echo(data){session.terminal.write(data)}function InsertCommand(inputText){
return{$outputText:inputText,"do":function(){var after=predictLine.substr(predictIndex),outputText=inputText+(after?after+getCursorLeft(after.length):"")


predictLine=predictLine.substr(0,predictIndex)+inputText+after,predictIndex+=inputText.length,echo(outputText)

}}}function BackspaceCommand(){var after=predictLine.substr(predictIndex),outputText=OUTPUTS_BACKSPACE_CHAR[0]


return{$outputText:outputText,"do":function(){predictLine=predictLine.substr(0,predictIndex-1)+after,
predictIndex--,echo(outputText)}}}function DeleteCommand(){var after=predictLine.substr(predictIndex+1)


return{$outputText:OUTPUTS_DELETE_CHAR[0],"do":function(){predictLine=predictLine.substr(0,predictIndex)+after,
echo(OUTPUTS_DELETE_CHAR[0])}}}function CursorLeftCommand(){return{$outputText:OUTPUTS_LEFT[0],"do":function(){
return 0===predictIndex?void clearTimeout(this.timeout):(echo(OUTPUTS_LEFT[0]),void predictIndex--)}}

}function CursorRightCommand(){return{$outputText:OUTPUTS_RIGHT[0],"do":function(){echo(OUTPUTS_RIGHT[0]),
predictIndex++}}}function HomeCommand(){var outputText=predictIndex?getCursorLeft(predictIndex):""
return{$outputText:outputText,"do":function(){echo(outputText),predictIndex=0}}}function NoopCommand(){
var outputText=predictIndex?getCursorLeft(predictIndex):""
return{$outputText:outputText,"do":function(){echo(outputText),predictIndex=0}}}var predictions=[],predictLine="",predictIndex=0,predictStartX=0,predictStartY=0,nonPredictStartY=0,state=STATE_WAIT_FOR_PROMPT_OR_ECHO,lastInput=null,nonPredictTerminal=new BaseTerminal(terminal.rows,terminal.cols)


return nonPredictTerminal.scrollback=1,session.terminal.on("resize",function(e){nonPredictTerminal.resize(e.x,e.y)

}),session.terminal.on("clear",function(){nonPredictTerminal.clear()}),InsertCommand.tryCreate=function(inputText){
var afterLength=predictLine.length-predictIndex
if(INSERTABLE_CHARS.test(inputText)&&(""===peek(afterLength)||" "===peek(afterLength)&&peekSuffix(afterLength).match(/^[ \u2502\xb7]*$/))&&session.terminal.x+inputText.length<session.terminal.cols&&peekAttr()===session.terminal.curAttr)return inputText.split("").map(function(i){
return new InsertCommand(i)})},BackspaceCommand.tryCreate=function(inputText){if(inputText===INPUT_BACKSPACE&&predictIndex>0&&INSERTABLE_CHARS.test(peek(-1)))return new BackspaceCommand

},DeleteCommand.tryCreate=function(inputText){if(inputText===INPUT_DELETE&&predictIndex<predictLine.length)return new DeleteCommand

},CursorLeftCommand.tryCreate=function(inputText){if(inputText===INPUT_LEFT)return new CursorLeftCommand

},CursorRightCommand.tryCreate=function(inputText){if(inputText===INPUT_RIGHT&&predictIndex<predictLine.length)return new CursorRightCommand

},HomeCommand.tryCreate=function(inputText){if(INPUTS_HOME.indexOf(inputText)>-1&&("$"===peek(-predictIndex-1)||"$"===peek(-predictIndex-2)))return new HomeCommand

},NoopCommand.tryCreate=function(){var result=new NoopCommand
return result.before={predict:predictLine,predictIndex:predictIndex},result.after={predict:predictLine,
predictIndex:predictIndex},result},{get state(){return state},set state(value){value===STATE_PREDICT&&state!==STATE_PREDICT&&(startPredict(),
state=STATE_PREDICT),state=value},get predictions(){return predictions},undoPredictions:undoPredictions,
onInput:onInput,onBeforeWrite:onBeforeWrite,onAfterWrite:onAfterWrite}}function charsOf(line){return line.map(function(c){
return c[1]}).join("")}function getCursorLeft(n){return ESC+"["+n+"D"}function getAveragePing(){return(lastPings[0]+lastPings[1]+lastPings[2])/3

}var Plugin=imports.Plugin,editors=imports.editors,c9=imports.c9,BaseTerminal=require("./aceterm/libterm"),assert=require("assert"),vfsPing=imports["vfs.ping"],errorHandler=imports.error_handler,BASH_ONLY=!0,DEBUG=!1,MIN_PREDICTION_WAIT=500,PING_DEVIATION=500,INSERTABLE_CHARS=/^[A-Za-z0-9!"#$%&'()*+,-\.\/\\:;<=>?!@[\] ^_`{|}~]+$/,INPUT_BACKSPACE="",ESC="",OUTPUTS_BACKSPACE_CHAR=["\b"+ESC+"[P","\b"+ESC+"[1P"],OUTPUTS_DELETE_CHAR=[ESC+"[P",ESC+"[1P"],INPUT_LEFT=ESC+"[D",INPUT_DELETE=ESC+"[3~",OUTPUTS_LEFT=["\b",ESC+"[D",ESC+"[1D"],INPUTS_HOME=[ESC+"[1~",ESC+"[~",""],INPUT_RIGHT=ESC+"[C",OUTPUTS_RIGHT=[ESC+"[C",ESC+"[1C"],STATE_PREDICT=0,STATE_WAIT_FOR_PROMPT_OR_ECHO=1,STATE_WAIT_FOR_PROMPT=2,STATE_INITING=3,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),lastPings=[MIN_PREDICTION_WAIT,MIN_PREDICTION_WAIT,MIN_PREDICTION_WAIT],pendingPings=[],loaded=!1


plugin.on("load",function(){load()}),plugin.on("unload",function(){lastPings=[MIN_PREDICTION_WAIT,MIN_PREDICTION_WAIT,MIN_PREDICTION_WAIT],
pendingPings=[],loaded=!1}),plugin.freezePublicAPI({$setTestTimeouts:function(){PING_DEVIATION=3e4,MIN_PREDICTION_WAIT=1e4

},set DEBUG(value){DEBUG=value},get DEBUG(){return DEBUG},_events:["predict","mispredict","nopredict"]
}),register(null,{"terminal.predict_echo":plugin})}return main.consumes=["Plugin","editors","c9","vfs.ping","util","error_handler"],
main.provides=["terminal.predict_echo"],main})


define("text!plugins/c9.ide.terminal/terminal.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="barTerminal" \n      style       ="position:absolute;top:0;right:0;left:0;bottom:0" \n      class       = "c9terminal">\n        <div class="c9terminalcontainer">\n            \n        </div>\n    </a:bar>\n</a:application>')


define("plugins/c9.ide.terminal/aceterm/input",[],function(require,exports,module){require("ace/lib/useragent").isWindows


module.exports=function(ace){function defaultHandler(ev){var key=null,keyCode=ev.keyCode,isControl=ev.ctrlKey,isMeta="mac"==specialKeys.platform?ev.metaKey:ev.altKey


return isControl?keyCode>=65&&keyCode<=90?key=String.fromCharCode(keyCode-64):32===keyCode||192==keyCode?key=String.fromCharCode(0):keyCode>=51&&keyCode<=55?key=String.fromCharCode(keyCode-51+27):56===keyCode?key=String.fromCharCode(127):219===keyCode?key=String.fromCharCode(27):221===keyCode?key=String.fromCharCode(29):189===keyCode||173===keyCode?key=String.fromCharCode(31):220===keyCode&&(key=String.fromCharCode(28)):isMeta&&(keyCode>=65&&keyCode<=90?key=""+String.fromCharCode(keyCode+32):192===keyCode?key="`":keyCode>=48&&keyCode<=57&&(key=""+(keyCode-48))),
key}var HashHandler=require("ace/keyboard/hash_handler").HashHandler,KEY_MODS=require("ace/lib/keys").KEY_MODS,TERM_MODS={
"shift-":2,"alt-":3,"alt-shift-":4,"ctrl-":5,"ctrl-shift-":6,"ctrl-alt-":7,"ctrl-alt-shift-":8},specialKeys=new HashHandler


specialKeys.bindKeys({"Shift-PageUp":{command:"pageup"},"Shift-PageDown":{command:"pagedown"},"Ctrl-Up":{
command:"scrollup"},"Ctrl-Down":{command:"scrolldown"},Backspace:"","Shift-Backspace":"\b","Alt-Backspace":"",
Tab:"\t","Shift-Tab":"[Z",Return:"\r",Escape:"",Left:"[D",Right:"[C",Up:"[A",Down:"[B",Delete:"[3~",
Insert:"[2~",Home:"[1~",End:"[4~",PageUp:"[5~",PageDown:"[6~",F1:"OP",F2:"OQ",F3:"OR",F4:"OS",
F5:"[15~",F6:"[17~",F7:"[18~",F8:"[19~",F9:"[20~",F10:"[21~",F11:"[23~",F12:"[24~"})
var aliases=[{bindKey:{win:"Ctrl-left",mac:"Option-left"},name:"b"},{bindKey:{win:"Ctrl-right",mac:"Option-right"
},name:"f"},{bindKey:{win:"Ctrl-Delete",mac:"Option-Delete"},name:"d"},{bindKey:{win:"Ctrl-Backspace",
mac:"Option-Backspace"},name:""},{bindKey:{win:"Ctrl-Delete",mac:"Option-Delete"},name:"d"},{bindKey:{
win:"Alt-Backspace",mac:"Ctrl-Backspace"},name:""},{bindKey:{win:"Alt-Delete",mac:"Ctrl-Delete"},name:"\x0B"
},{bindKey:{win:"Ctrl-z",mac:"Cmd-z"},name:""},{bindKey:{win:null,mac:"Cmd-Left"},name:"[1~"},{bindKey:{
win:null,mac:"Cmd-Right"},name:"[4~"}]
specialKeys.addCommands(aliases)
var applicationKeys={left:"OD",right:"OC",up:"OA",down:"OB",home:"OH",end:"OF"}
this.handleKeyboard=function(data,hashId,keyString,keyCode,ev){var term=data.editor.session.term
if(hashId==-1)return this.send(keyString),{command:"null"}
if(term.applicationKeypad&&applicationKeys[keyString]){var mod=TERM_MODS[KEY_MODS[hashId]],str=applicationKeys[keyString]


return mod&&(str="[1;"+mod+str.slice(-1)),this.send(str),{command:"null"}}var key=specialKeys.findKeyCommand(hashId,keyString)


if("string"==typeof key)return this.send(key),{command:"null"}
if(key&&key.command)return key
if(key&&key.exec){if(!key.isAvailable||key.isAvailable(ace))return{command:key}}else if(key&&key.name)return this.send(key.name),
{command:"null"}
return key=defaultHandler(ev),key&&this.send(key),{command:"null",passEvent:!hashId||hashId===KEY_MODS.shift||"mac"===specialKeys.platform&&!(hashId&(KEY_MODS.ctrl|KEY_MODS.cmd))||"win"===specialKeys.platform&&hashId==KEY_MODS.cmd&&(32==keyCode||keyCode==-1)
}}
var isCopyAvailable=function(ed){return ed&&!ed.getCopyText&&(ed=ed.ace||ed.$editor),ed&&!!ed.getCopyText()

},noop=function(){}
return specialKeys.addCommands([{name:"copy",bindKey:{mac:"Cmd-c",win:"Ctrl-c"},exec:noop,isAvailable:isCopyAvailable,
passEvent:!0},{name:"cut",bindKey:{mac:"Cmd-x",win:"Ctrl-x"},exec:noop,isAvailable:isCopyAvailable,passEvent:!0
},{name:"paste",bindKey:{mac:"Cmd-v",win:"Ctrl-v"},exec:noop,isAvailable:function(ed){return!0},passEvent:!0
},{name:"clear",bindKey:{mac:"Cmd-K",win:"Ctrl-K"},exec:function(ed){var term=ed.ace.session.term
term.clear(),term.send("\f")},isAvailable:function(editor){return!0}}]),ace.onPaste=function(text){this.send(text.replace(/\r\n?|\n/g,this.session.term.convertEol?"\n":"\r"))

},ace.setKeyboardHandler(this),ace.keyBinding.addKeyboardHandler(ace.commands),ace.commands.commandKeyBinding={},
this.send=ace.send=function(text){ace.session.send&&ace.session.send(text)},specialKeys}})


define("plugins/c9.ide.terminal/aceterm/mouse",[],function(require,exports,module){var lang=require("ace/lib/lang")


module.exports=function(ace){function sendButton(ev){var button=(ace.session.term,getButton(ev)),pos=getCoords(ev)


if(pos)switch(sendEvent(button,pos),ev.type){case"mousedown":pressed=button
break
case"mouseup":pressed=32
break
case wheelEvent:}}function sendMove(ev){var button=(ace.session.term,pressed),pos=getCoords(ev)
pos&&(button+=32,sendEvent(button,pos))}function encode(data,ch){var term=ace.session.term
if(term.utfMouse){if(2047===ch)return data.push(0)
ch<127?data.push(ch):(ch>2047&&(ch=2047),data.push(192|ch>>6),data.push(128|63&ch))}else{if(255===ch)return data.push(0)


ch>127&&(ch=127),data.push(ch)}}function sendEvent(button,pos){var term=ace.session.term
if(term.vt300Mouse){button&=3,pos.x-=32,pos.y-=32
var data="[24"
if(0===button)data+="1"
else if(1===button)data+="3"
else if(2===button)data+="5"
else{if(3===button)return
data+="0"}return data+="~["+pos.x+","+pos.y+"]\r",void term.send(data)}if(term.decLocator)return button&=3,
pos.x-=32,pos.y-=32,0===button?button=2:1===button?button=4:2===button?button=6:3===button&&(button=3),
void term.send("["+button+";"+(3===button?4:0)+";"+pos.y+";"+pos.x+";"+(pos.tab||0)+"&w")
if(term.urxvtMouse)return pos.x-=32,pos.y-=32,pos.x++,pos.y++,void term.send("["+button+";"+pos.x+";"+pos.y+"M")


if(term.sgrMouse)return pos.x-=32,pos.y-=32,void term.send("[<"+(3===(3&button)?button&-4:button)+";"+pos.x+";"+pos.y+(3===(3&button)?"m":"M"))


var data=[]
encode(data,button),encode(data,pos.x),encode(data,pos.y),term.send("[M"+String.fromCharCode.apply(String,data))

}function getButton(ev){var button,shift,meta,ctrl,mod,term=ace.session.term
switch(ev.type){case"mousedown":button=ev.button||0
break
case"mouseup":button=3
break
case"mousewheel":button=ev.wheelY<0?64:65}return shift=ev.shiftKey?4:0,meta=ev.metaKey?8:0,ctrl=ev.ctrlKey?16:0,
mod=shift|meta|ctrl,term.vt200Mouse?mod&=ctrl:term.normalMouse||(mod=0),button=32+(mod<<2)+button}function getCoords(ev){
var term=ace.session.term,pos=ace.renderer.pixelToScreenCoordinates(ev.clientX,ev.clientY),x=pos.column,y=pos.row


return x<0&&(x=0),x>term.cols&&(x=term.cols),y<0&&(y=0),y>term.rows&&(y=term.rows),x+=32,y+=32,{x:x,y:y,
down:"mousedown"===ev.type,up:"mouseup"===ev.type,wheel:ev.type===wheelEvent,move:"mousemove"===ev.type
}}function altOnly(e){return e.altKey&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey}var pressed=32,wheelEvent="mousewheel"


ace.on("mousedown",function(ev){var term=ace.session.term
if(term&&term.mouseEvents&&(!term.copyMode||altOnly(ev.domEvent)))return ace.focus(),sendButton(ev),term.vt200Mouse?(sendButton({
__proto__:ev,type:"mouseup"}),ev.stop()):(term.normalMouse&&ace.on("mousemove",sendMove),term.x10Mouse||ace.on("mouseup",function up(ev){
return sendButton(ev),term.normalMouse&&ace.off("mousemove",sendMove),ace.off("mouseup",up),ev.stop(ev)

}),ev.stop(ev))},!0),ace.on("mousewheel",function(ev){var term=ace.session.term
if(term.mouseEvents&&!(term.x10Mouse||term.vt300Mouse||term.decLocator))return ev.type="mousewheel",ev.shiftKey=ev.domEvent.shiftKey,
ev.metaKey=ev.domEvent.metaKey,ev.ctrlKey=ev.domEvent.ctrlKey,sendButton(ev),ev.stop()},!0),ace.on("mousewheel",function(ev){
var term=ace.session.term
if(!term.mouseEvents)return term.applicationKeypad?(term.send(ev.wheelY<0?"OAOAOA":"OBOBOB"),ev.stop(ev)):void 0

}),ace.on("click",function(e){var term=ace.session.term
if(!term.mouseEvents){var pos=e.getDocumentPosition()
if(e.domEvent.altKey&&ace.session.selection.isEmpty()){for(var row=pos.row,wrappedLen=0,cursorRow=term.ybase+term.y;row<cursorRow;){
var lineData=ace.session.getLineData(row)
if(!lineData||!lineData.wrapped)break
wrappedLen-=ace.session.getLine(row).length,row++}for(;row>cursorRow;){var lineData=ace.session.getLineData(row-1)


if(!lineData||!lineData.wrapped)break
wrappedLen+=ace.session.getLine(row-1).length,row--}if(row==cursorRow){var dx=pos.column+wrappedLen-term.x


if(dx<0)var str=lang.stringRepeat("[D",-dx)
else var str=lang.stringRepeat("[C",dx)
term.send(str)}}}})}})


define("plugins/c9.ide.terminal/aceterm/scroll_buffer",[],function(require,exports,module){var ScrollBuffer=module.exports=function(){
this.lines=[],this.ybase=0};(function(){this.toBufferLine=function(screenLine){for(var attr,line=[],token="",i=0;i<screenLine.length;i++){
var data=screenLine[i]
data[0]===attr?token+=data[1]:(token&&line.push(attr,token),attr=data[0],token=data[1])}return token&&line.push(attr,token),
line.wrapped=screenLine.wrapped,line},this.toScreenLine=function(line){for(var attr,screenLine=[],token="",i=0;i<line.length;i+=2){
token=line[i+1],attr=line[i]
for(var j=0;j<token.length;j++)screenLine.push([attr,token[j]])}return screenLine.wrapped=line.wrapped,
screenLine},this.scroll=function(){},this.clear=function(){},this.resize=function(){}}).call(ScrollBuffer.prototype)

})


define("plugins/c9.ide.terminal/aceterm/aceterm",[],function(require,exports,module){function updateScrollMargin(terminal,renderer,heightDiff){
for(var sm=renderer.scrollMargin,cursorRow=Math.max(terminal.y,0),l=terminal.ybase+terminal.rows-1,lastEmpty=l;lastEmpty>cursorRow&&terminal.isLineEmpty(terminal.lines[lastEmpty]);)lastEmpty--


var noScrollbar=terminal.noScrollBack(),margin=0,marginTop=0,marginBottom=0,oldMargin=sm.bottom||0,lineHeight=renderer.layerConfig.lineHeight,height=renderer.$size.height-1


margin=height%lineHeight,sm.preffered=margin
var preferTop=lastEmpty<l,prevState=sm.snapToTop||[0,0,0,0],snapToTop=[lastEmpty,terminal.ybase,l,sm.preffered,terminal.y,preferTop]


sm.snapToTop=snapToTop
var allowSnap=snapToTop[1]>prevState[1]&&(0===snapToTop[4]||!preferTop&&!prevState[5])
if(noScrollbar)marginTop=Math.ceil(sm.preffered/2),marginBottom=sm.preffered-marginTop
else if(heightDiff)marginBottom=Math.min(margin,oldMargin)
else{if(!allowSnap)return
preferTop?(marginBottom=sm.preffered,marginTop=0):marginBottom=marginTop=0}renderer.setScrollMargin(1+marginTop,marginBottom)

}function initCursor(){this.cursorClass="reverse-video",this.getCursorNode=function(){return this.textLayer.$cur||(this.textLayer.$cur=this.textLayer.element.querySelector(".reverse-video")),
this.textLayer.$cur||{}},this.hideCursor=function(){this.isVisible=!1,dom.addCssClass(this.element,"ace_hidden-cursors"),
this.restartTimer()},this.showCursor=function(){this.isVisible=!0,dom.removeCssClass(this.element,"ace_hidden-cursors"),
this.restartTimer()},this.restartTimer=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId),
this.getCursorNode().className=this.cursorClass,this.blinkInterval&&this.isVisible&&Terminal.cursorBlink&&(this.intervalId=setInterval(function(){
if(!this.renderer.$loop.changes){var node=this.getCursorNode()
node.className=node.className?"":this.cursorClass}}.bind(this),500))},this.update=function(config){this.config=config


var pixelPos=this.getPixelPosition(null,!0)
this.restartTimer(),this.$pixelPos=pixelPos,this.restartTimer()}}function initView(ace){initCursor.call(ace.renderer.$cursorLayer),
ace.renderer.$cursorLayer.renderer=ace.renderer,ace.renderer.$cursorLayer.textLayer=ace.renderer.$textLayer,
ace.renderer.content.style.overflow="visible",ace.renderer.$textLayer.element.style.overflow="visible",
ace.renderer.$textLayer.$renderLine=Aceterm.renderLine,ace.renderer.$textLayer.$renderLineInner=Aceterm.renderLineInner,
ace.setOption("showPrintMargin",!1),ace.setOption("highlightActiveLine",!1)}var InputHandler=require("./input"),MouseHandler=require("./mouse"),Terminal=require("./libterm"),dom=(require("./scroll_buffer"),
require("ace/lib/dom")),Range=require("ace/range").Range,AceEditor=require("ace/editor").Editor,EditSession=require("ace/edit_session").EditSession,VirtualRenderer=require("ace/virtual_renderer").VirtualRenderer,Aceterm=function(w,h,writeCb){
var terminal=new Terminal(w,h,writeCb)
return terminal.aceSession=Aceterm.createSession(terminal),terminal.monitor=Aceterm.createMonitor(terminal.aceSession),
terminal}
Aceterm.createEditor=function(container,theme){var ace=new AceEditor(new VirtualRenderer(container,theme))


ace.setStyle("terminal")
var scroller=ace.renderer.scroller
return scroller.style.color="inherit",scroller.style.background="inherit",ace.setOptions({showPrintMargin:!1,
showGutter:!1,scrollPastEnd:0}),ace.renderer.setScrollMargin(1,0),ace.renderer.on("resize",function(oldSize,renderer){
var session=renderer.session
if(session&&session.term){var size=renderer.$size,dh=size.scrollerHeight-oldSize.scrollerHeight
if(dh<0){var oldMaxScrollTop=renderer.layerConfig.maxHeight-oldSize.scrollerHeight+renderer.scrollMargin.v,scrollTop=session.getScrollTop()


scrollTop>oldMaxScrollTop-renderer.layerConfig.lineHeight&&session.setScrollTop(scrollTop-dh)}var h=ace.renderer.layerConfig.lineHeight


h&&(session.resize&&session.resize(),updateScrollMargin(session.term,ace.renderer,dh),0===session.getScrollTop()&&session.setScrollTop(-1))

}}),ace.renderer.on("beforeRender",function(){ace.session&&ace.session.term&&ace.session.term.refreshTimer&&ace.session.term.refreshSync()

}),ace.onCopy=function(){},ace.renderer.scrollBarH.setVisible(!1),ace.renderer.scrollBarH.setVisible=function(){},
ace.renderer.setOption("vScrollBarAlwaysVisible",!0),ace.renderer.scrollBarV.element.style.overflowY="auto",
initView(ace),ace.termInputHandler=new InputHandler(ace),ace.termMouseHandler=new MouseHandler(ace),ace

},Aceterm.createSession=function(term){var session=new EditSession("")
session.setScrollTop(-1),session.term=term,term.copyMode=!0,session.doc.getLength=function(){return term.noScrollBack()?term.rows:term.rows+term.ybase

},session.doc.getLine=function(row,newLineChar){term.noScrollBack()&&(row+=term.ybase)
for(var line=term.lines[row]||[],str="",l=Math.min(line.length,term.cols);l--&&!line[l][1];);for(var i=0;i<=l;i++){
var ch=line[i][1]
"\0"!=ch&&(str+=line[i][1]||" ")}return newLineChar&&!line.wrapped&&(str+=newLineChar),str},session.getLineData=function(row){
return term.noScrollBack()&&(row+=term.ybase),term.lines[row]||[]},session.doc.getLines=function(start,end){
for(var lines=[],i=start;i<end;i++)lines.push(this.getLine(i))
return lines},session.doc.$lines=null,session.doc.getTextRange=function(range){var start=range.start.row,end=range.end.row


if(start===end)return this.getLine(start).substring(range.start.column,range.end.column)
for(var newLineChar=this.getNewLineCharacter(),str=this.getLine(start++,newLineChar).substring(range.start.column);start<end;)str+=this.getLine(start++,newLineChar)


return str+=this.getLine(end,newLineChar).substring(0,range.end.column)},session.doc.getValue=function(){
return this.getTextRange(new Range(0,0,this.getLength(),Number.MAX_VALUE))},session.$computeWidth=session.getScreenWidth=function(){
return this.term.cols},session.doc.insert=function(pos,str){return session.send(str),pos},session.doc.remove=function(pos){
return pos}
var range=session.selection.getRange()
range.cursor=range.start=range.end
var dummyDelta={action:"insertText",start:range.clone().start,end:range.clone().end,lines:[""]}
return session.on("changeEditor",function(e,session){e.oldEditor&&session.ace==e.oldEditor&&(session.ace=null),
e.editor&&(session.ace&&console.warn("aceterm session isn't detached"),session.ace=e.editor),session.selectionRange?session.term&&session.term.refreshView(0,0):(session.selectionRange=range,
session.ace.addSelectionMarker(range))}),session.term.refreshView=function(start,end){var ace=session.ace


if(ace){var term=session.term,renderer=ace.renderer,cursorRow=Math.max(term.y,0)
range.cursor.row=cursorRow
var scrollTop=0,h=ace.renderer.layerConfig.lineHeight
if(!term.noScrollBack()){range.cursor.row+=term.ybase,start+=term.ybase,end+=term.ybase,scrollTop=term.ybase*h+renderer.scrollMargin.bottom


var maxScrollTop=Math.min(session.maxScrollTop,scrollTop)
session.getScrollTop()<(maxScrollTop||0)-2*h&&(scrollTop=null)}ace.$mouseHandler.isMousePressed&&(scrollTop=null),
null!==scrollTop?(updateScrollMargin(term,renderer,0),session.setScrollTop(scrollTop||-1),session.maxScrollTop=scrollTop):renderer.$loop.schedule(renderer.CHANGE_SCROLL),
renderer.updateLines(start,end),range.cursor.column=term.x,null!==scrollTop&&session.selection.setSelectionRange(range),
session.doc._signal("change",dummyDelta)}},session.term.isRenderPending=function(){var ace=session.ace


if(ace)return ace.renderer.$loop.pending},session.bgTokenizer.$worker=function(){},session.term.on("input",function(){
session.maxScrollTop&&(session.maxScrollTop=0,session.setScrollTop(Number.MAX_VALUE))}),session.setScrollLeft=function(scrollLeft){
scrollLeft&&(this.$scrollLeft=0,this._signal("changeScrollLeft",0))},session.send=function(str){this.term.send(str)

},session},Aceterm.createMonitor=function(session){session.term.on("input",function(str){monitor.$lastInput=str


var term=session.term
if("\r"===str){var row=term.y+term.ybase,command=monitor.getCommand(row)
command&&(term.once("newline",function(){monitor.$command=monitor.getCommand(monitor.lastCommandRow).trim()

}),term.lines[row].isUserInput=!0,monitor.lastCommandRow=row,monitor.$command=monitor.getCommand(monitor.lastCommandRow).trim())

}("\r"===str&&"clear"===monitor.$command||"\f"===str)&&(term.noScrollBack()||term.once("beforeWrite",function fixClear(data){
if("\r\n"==data)return term.once("beforeWrite",fixClear),""
var m=/^\u001b\[H\u001b\[K\r\n((?:\u001b\[K\u001b\[1B)+)\u001b\[K\u001b\[H(.*)$/.exec(data)
if(m)return data=Array(term.rows+1).join("\r\n")+"[H"+m[2]}))})
var monitor={lastCommandRow:-1,getLastCommand:function(){return this.$command},getCommand:function(row){
var line=session.getLine(row),i=line.indexOf("$"),command=i==-1?"":line.substr(i+1)
return command},getLastKey:function(){return monitor.$lastInput},wasQuitSent:function(){return"exit"===this.$command||"logout"===this.$command||""===this.$lastInput

}}
return monitor},module.exports=Aceterm,Aceterm.renderLine=function(stringBuilder,row,onlyContents,foldLine){
onlyContents||stringBuilder.push("<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),
this.$renderLineInner(stringBuilder,row),onlyContents||stringBuilder.push("</div>")},Aceterm.renderLineInner=function(stringBuilder,row){
var term=this.session.term
if(term){var fgColor,bgColor,flags,width=term.cols,cursorY=term.y
term.noScrollBack()&&(row+=term.ybase),cursorY+=term.ybase
for(var line=term.lines[row]||[],out="",x=row===cursorY&&term.cursorState&&!term.cursorHidden?term.x:-1,defAttr=term.defAttr,attr=defAttr,i=0;i<width;i++){
var token=line[i]||term.ch,data=token[0],ch=token[1]
i===x&&(data=-1),data!==attr&&(attr!==defAttr&&(out+="</span>"),data===defAttr||(data===-1?(out+='<span class="reverse-video">',
this.$cur=null):(out+='<span style="',bgColor=511&data,fgColor=data>>9&511,flags=data>>18,1&flags&&(this.$fontMetrics.allowBoldFonts&&(out+="font-weight:bold;"),
fgColor<8&&(fgColor+=8)),2&flags&&(out+="text-decoration:underline;"),256===bgColor?257!==fgColor&&(out+="color:"+(Terminal.overridenColors[fgColor]||Terminal.colors[fgColor])+";"):(out+="background-color:"+Terminal.colors[bgColor]+";",
257!==fgColor&&(out+="color:"+Terminal.colors[fgColor]+";"),out+='display:inline-block" class="aceterm-line-bg" l="'+i),
out+='">'))),out+=ch<=" "?"\0"==ch?"":"\xa0":"&"==ch?"&#38;":"<"==ch?"&#60;":ch,attr=data}attr!==defAttr&&(out+="</span>"),
stringBuilder.push(out)}}})


define("plugins/c9.ide.terminal/tmux_connection",[],function(require,exports,module){module.exports=function(c9,proc,installPath,shell){
function reconnectTimed(session,force){return session.killed?void console.warn("Reconnecting while session has been killed"):void setTimeout(function(){
reconnect(session,force)},0===session.reconnecting?0:session.reconnecting<10?100:1e3)}function reconnect(session,force){
return c9.has(c9.PROCESS)?!session.connecting&&!session.connected||force?(session.reconnecting||(session.reconnecting=0),
session.reconnecting++,session.disregard&&session.disregard(!0),void getTMUX(session,function(err){err&&(console.error("Error creating TMUX session: ",err.message),
"EACCESS"!=err.code?reconnectTimed(session,!0):console.warn("Terminal EACCESS error"))})):(console.error("Reconnecting while already connected/connecting. Abort."),
!1):void console.warn("Reconnecting while not online")}function getOutputHistory(options,cb){options.id=options.id||this.id,
options.retries=(options.retries||0)+1
var start="number"==typeof options.start?options.start:-32768,end="number"==typeof options.end?options.end:1e3,paneId=(options.id||this.id)+":0.0"


"win32"!=c9.platform&&proc.tmux("",{capturePane:{start:start,end:end,pane:paneId.trim(),joinLines:options.joinLines
}},function(err,_1,_2,meta){if(err||!meta.process)return cb(err)
var buffer="",errBuffer=""
meta.process.stdout.on("data",function(data){buffer+=data.toString()}),meta.process.stderr.on("data",function(data){
errBuffer+=data.toString()}),meta.process.on("close",function(){if(!buffer&&!errBuffer&&options.retries<4)return setTimeout(function(){
getOutputHistory(options,cb)},100*options.retries+300)
if(buffer){var i=buffer.search(/\x1b\[1mPane is dead\x1b\[0m\s*$/)
i!=-1&&(buffer=buffer.slice(0,i).replace(/\s*$/,"\n"))}cb(errBuffer,buffer)})})}function getStatus(options,cb){
null==options.id&&(options.id=this.id),proc.tmux("",{getStatus:options},function(err,_1,_2,meta){cb(err,meta.status)

})}function sendTmuxCommand(command,exec,terminal){"win32"!=c9.platform&&(terminal&&terminal.send||(terminal=this.terminal),
terminal.send(":"+command+(exec?1==exec?"\r":"":"\r")))}function clearHistory(){sendTmuxCommand("send-keys -R ; clear-history",1,this.terminal)

}function changeMode(){return!1}function getTMUX(session,callback){var disregarded
session.getOutputHistory=getOutputHistory,session.getStatus=getStatus,session.sendTmuxCommand=sendTmuxCommand,
session.clearHistory=clearHistory
var cwd=session.cwd||"";/^~(\/|$)/.test(cwd)||(cwd=session.root+cwd)
var command="",options={cwd:cwd,cols:session.cols||80,rows:session.rows||24,name:"xterm-color",base:installPath&&installPath.replace(/^~/,c9.home||"~")
}
session.output?(options.idle=!0,options.session=session.id,options.attach=!0,options.output=!0,options.detachOthers=!session.hasConnected):(command=shell||"",
session.id?options.attach=!0:(session.id=c9.workspaceId.split("/",2).join("@")+"_"+Math.round(1e3*Math.random()),
options.attach=!1),options.session=session.id,options.output=!1,options.terminal=!0,options.detachOthers=!session.hasConnected,
options.defaultEditor=session.defaultEditor),session.connecting=!0,session.connected=!1,session.setState("connecting"),
session.reconnect=reconnect.bind(null,session),proc.tmux(command,options,function(err,pty){return session.pty&&session.pty!=pty&&(console.warn("trying to set pty twice",session.pty),
session.pty._events={}),session.connecting?err?(console.warn("Error connecting to the terminal: ",err),
session.connecting=!1,session.setState("error"),callback(err)):(session.pty=pty,session.reconnecting=0,
session.disregard=function(keepId){keepId||session.output||delete session.id,console.warn("Disregard terminal: ",session.id),
disregarded=!0,pty.kill(),delete session.pty},session.pty.on("exit",function(){disregarded||(session.connected=!1,
session.connecting=!1,session.terminal.off("changeMode",changeMode),session.monitor.wasQuitSent()?(session.tab.meta.$ignore=!0,
session.tab.close()):session.tab.isActive()&&session.tab.pane.visible&&document.hasFocus()&&reconnect(session))

}),session.pty.on("data",function(data){if(!disregarded){if("object"==typeof data)return data.started?void 0:data.code?void("exception"==data.type?(session.disregard(),
console.error("Error creating TMUX session: ",err.message),session.setState("error")):session.warn(data)):session.setSize(data)


session.filter&&(data=session.filter(data)),data&&session.write(data)}}),session.terminal.once("changeMode",changeMode),
session.connecting=!1,session.connected=!0,session.hasConnected=!0,session.setState("connected"),session.updatePtySize(),
callback(),void session.getEmitter()("connected")):(err||session.connected||(session.pty=pty,session.kill(),
console.error("Got into weird terminal state.")),callback(new Error("Session was not connecting")))})

}return{init:function(session,cb){getTMUX(session,function(err){err&&(console.error("Error opening Terminal: "+err.message),
session.setState("error"),"EACCESS"!=err.code?reconnectTimed(session,!0):console.warn("Terminal EACCESS error")),
c9.on("stateChange",function(e){e.state&c9.PROCESS&&!session.connected&&(console.warn("Terminal reconnect due to connection regain"),
reconnect(session))},session),cb&&cb(err,session)})},kill:function(session){console.warn("KILLING SESSION:",session.id),
session.id&&proc.tmux("",{session:session.id,kill:!0},function(err){if(err)return console.error(err)}),
console.warn("Killed tmux session: ",session.id),session&&session.disregard&&session.disregard(),delete session.id,
session.killed=!0,session.connecting=!1,session.connected=!1,session.setState("killed")}}}})


define("text!plugins/c9.ide.terminal/style.css",[],"")


define("plugins/c9.ide.terminal/terminal",[],function(require,exports,module){function main(options,imports,register){
function Terminal(isOutputTerminal){function write(data){if(currentSession)if(currentSession.connected)currentSession.pty.write(data)
else{var session=currentSession
plugin.on("connect",function wait(e){e.tab==session.tab&&(currentSession.pty.write(data),plugin.off("connect",wait))

})}}function focus(){aceterm&&aceterm.focus()}function blur(){barTerminal.setAttribute("class","c9terminal"),
aceterm&&aceterm.blur()}function resize(e){var renderer=aceterm&&aceterm.renderer
if(renderer&&currentDocument)if("anim"==e.type){var htmlNode=aceterm.container
if(!htmlNode)return
if(e.vertical){var size=0===e.current?Math.abs(e.delta)-5-currentDocument.tab.pane.aml.$buttons.offsetHeight:htmlNode.offsetHeight+e.delta


renderer.onResize(!1,null,null,size)}else renderer.onResize(!1,null,htmlNode.offsetWidth+e.delta)
afterAnim=!0}else"afteranim"==e.type&&afterAnim?afterAnim=!1:(afterAnim=!1,renderer.$updateSizeAsync())

}function updateCover(aceSession,add){if(!aceSession.updatingStatus){if(!add){if(!aceSession.term.tmuxDotCover)return


var x=aceSession.term.tmuxDotCover.width,y=aceSession.term.tmuxDotCover.height
if(isEmpty(aceSession.term,x,y))return}aceSession.updatingStatus=!0,aceSession.c9session.getStatus({clients:!0
},function(e,s){if(aceSession.updatingStatus=!1,e)return console.warn(e)
var term=aceSession.term
add=term.rows>s.height||term.cols>s.width,setCover(aceSession,add),aceSession.term.tmuxDotCover&&(aceSession.term.tmuxDotCover.width=s.width,
aceSession.term.tmuxDotCover.height=s.height,aceSession._signal("changeFrontMarker"))})}}function showTmuxDotsHelp(e){
if(!settings.getBool("user/terminal/@collab")&&!shownDotsHelp){var aceSession=e&&e.editor&&e.editor.session.term


aceSession&&!aceSession.tmuxDotCover||(shownDotsHelp=!0,alert.show("Collaborative Terminal","Your Terminal is in Collaborative mode","When you Share your workspace with others, they can use your Terminal as well.\n\nSome side-effects are that the terminal view will only be as large as the smallest view of all collaborators. The rest of the space is unavailable. Also, you can\u2019t scroll back the history. \n\n(note that this can also happen when the workspace is open in another window; to resolve this, right click on the terminal and choose \u2018detach other clients\u2019)",function(){
settings.set("user/terminal/@collab",alert.dontShow)},{showDontShow:!0}))}}function isEmpty(term,x,y){
if(x>=term.cols||y>=term.rows)return!1
for(var lines=term.lines,i=term.ybase;i<lines.length;i++)if(lines[i])for(var j=term.ybase;j<lines.length;j++)if(lines[i][j]&&lines[i][j][1])return!1


return!0}function setCover(aceSession,add){if(Boolean(aceSession.term.tmuxDotCover)!==Boolean(add)){if(aceSession.setScrollTop(Number.MAX_VALUE),
aceSession.term.tmuxDotCover)return aceSession.removeMarker(aceSession.term.tmuxDotCover.id),void(aceSession.term.tmuxDotCover=null)


var marker={}
marker.update=function(html,markerLayer,session,config){if(this.width&&this.height&&session.term){var rows=session.term.rows,cols=session.term.cols,coverHeight=config.lineHeight*(rows-this.height),screenBottom=config.height-coverHeight+config.offset+2,screenRight=(cols-this.width)*config.characterWidth


html.push("<div style='height:",coverHeight,"px;","left:0; right: ",screenRight,"px; top:",screenBottom,"px;' ","class='c9terminalcontainer cover bottom'></div>","<div style='width:",screenRight,"px; height: ",screenBottom,"px; top:0; right:0;' ","class='c9terminalcontainer cover right'></div>","<div style='width:",screenRight,"px; bottom:0; top:",screenBottom,"px; right:0;' ","class='c9terminalcontainer cover'></div>")

}},aceSession.addDynamicMarker(marker,!0),aceSession.term.tmuxDotCover=marker,aceSession.ace&&aceSession.ace.on("click",showTmuxDotsHelp)

}}function isTmuxBorderChar(x){return!x||x[1]&&"\xb7\u2500\u2502\u2518".indexOf(x[1])!=-1}function clearTmuxBorders(terminal){
for(var trimmed=!1,lines=terminal.lines,i=Math.max(0,terminal.ybase-4);i<lines.length;i++){var line=terminal.lines[i]


if(line)for(var col=Math.min(line.length,terminal.cols)-1;col>=0&&isTmuxBorderChar(line[col]);)line[col]&&(line[col][1]=""),
col--,trimmed=!0}updateCover(terminal.aceSession,trimmed)}function loadHistory(session){session.terminal.tmuxDotCover||session.getOutputHistory({},function(e,data){
!e&&data&&(session.terminal.setOutputHistory(data,!0),session.getStatus({clients:!0},function(e,status){
if(!e&&status&&status.clients&&status.clients.length>0){var terminal=session.terminal,rows=terminal.rows,cols=terminal.cols


for(session.terminal.resize(status.width,status.height),updateCover(session.terminal.aceSession),terminal.cols=cols;terminal.rows<rows;)terminal.lines.push(terminal.blankLine()),
terminal.rows++
terminal.rows=rows}}))})}function createTerminal(session,state){function send(data){return c9.status&c9.NETWORK?(emit("input",{
data:data,session:session}),queue+=data,void(timer||(timer=setTimeout(function(){return timer=null,session.connected?(session.pty.write(queue),
void(queue="")):initialConnect||warnConnection()},1)))):warnConnection()}function warnConnection(){if(!warned){
warned=!0
var error=showError("Terminal was disconnected. Trying to reconnect")
!session.connecting&&session.reconnect&&session.reconnect(),session.once("connected",function(){hideError(error),
warned=!1})}}var queue="",warned=!1,timer=null,initialConnect=!0,terminal=new Aceterm(0,0,send)
session.terminal=terminal,session.monitor=terminal.monitor,session.aceSession=terminal.aceSession,session.aceSession.c9session=session,
session.send=send,session.write=function(data){var handled=emit("beforeWrite",{data:data,session:session
})
handled||session.terminal.write(data),emit("afterWrite",{data:data,session:session})},session.attach(),
terminal.on("title",function(title){emit("title",{title:title}),session.output||(session.doc.title=session.doc.tooltip=title.replace(/^.+?:\d+:/,""))

}),session.aceSession.resize=session.resize.bind(session),aceterm.renderer.once("afterRender",function start(){
return session.resize()===!1?aceterm.renderer.once("afterRender",start):void tmuxConnection.init(session,function(err,session){
err?emit("connectError",{error:err}):(emit("connect",{id:session.id,tab:session.tab}),loadHistory(session),
initialConnect=!1,queue&&(session.pty.write(queue),queue=""))})}),terminal.on("afterWrite",function(){
clearTmuxBorders(terminal)}),session.getEmitter().sticky("terminalReady",session)}var container,barTerminal,currentSession,currentDocument,aceterm,plugin=new Editor("Ajax.org",main.consumes,extensions),emit=plugin.getEmitter()


plugin.on("draw",function(e){ui.insertMarkup(e.tab,markup,plugin),barTerminal=plugin.getElement("barTerminal"),
handle.draw(),barTerminal.setAttribute("contextmenu",mnuTerminal),container=barTerminal.firstChild.$ext,
aceterm=Aceterm.createEditor(null,"ace/theme/idle_fingers"),aceterm.container.style.position="absolute",
aceterm.container.style.left="0px",aceterm.container.style.right="0px",aceterm.container.style.top="0px",
aceterm.container.style.bottom="0px",container.appendChild(aceterm.container),aceterm.on("focus",function(){
barTerminal.setAttribute("class","c9terminal c9terminalFocus")}),aceterm.on("blur",function(){barTerminal.setAttribute("class","c9terminal")

}),handle.on("settingsUpdate",function(){aceterm.renderer.updateFull()},plugin)
var cm=commands
aceterm.commands.addCommands(cm.getExceptionList()),cm.on("update",function(){aceterm.commands.addCommands(cm.getExceptionList())

},plugin),aceterm.commands.exec=function(command){return cm.exec(command)},plugin.on("unload",function(){
aceterm.destroy(),container.innerHTML="",aceterm=null,container=null}),aceterm.on("focus",function(){
currentSession&&!currentSession.connected&&currentSession.reconnect&&currentSession.reconnect()}),handleEmit.sticky("create",{
editor:plugin},plugin)})
var afterAnim
return plugin.on("documentLoad",function(e){function setTabColor(){var bg=settings.get("user/terminal/@backgroundColor"),shade=util.shadeColor(bg,.75),skinName=settings.get("user/general/@skin"),isLight=~skinName.indexOf("flat")||shade.isLight


doc.tab.backgroundColor=isLight?bg:shade.color,isLight?~skinName.indexOf("flat")&&!shade.isLight?(doc.tab.classList.add("dark"),
container.className="c9terminalcontainer flat-dark"):(doc.tab.classList.remove("dark"),container.className="c9terminalcontainer"):(doc.tab.classList.add("dark"),
container.className="c9terminalcontainer dark")}var doc=e.doc,session=doc.getSession()
session.__defineGetter__("tab",function(){return doc.tab}),session.__defineGetter__("doc",function(){
return doc}),session.__defineGetter__("defaultEditor",function(){return settings.getBool("user/terminal/@defaultEnvEditor")

}),session.attach=function(){session.aceSession&&aceterm?(aceterm.setSession(session.aceSession),aceterm.container.style.display="block"):aceterm.container.style.display="none"

},session.detach=function(){},session.kill=function(){tmuxConnection.kill(this)},session.warn=function(err){
"EINSTALL"!=err.code||installPrompted||(installPrompted=!0,question.show("Wrong version of dependencies installed",err.message,"Cloud9 detected you have unsupported version of a dependency installed. Would you like to open the installer to update to the latest version?",function(){
installer.reinstall("Cloud9 IDE")},function(){},{yes:"Update",no:"Not now"}))},session.setState=function(state){
if(plugin.loaded){if(session==currentSession){var el=container.querySelector(".ace_content")
el.style.opacity="connected"==state?"":"0.5"}"connecting"==state?session.tab.classList.add("connecting"):"error"==state||"killed"==state?doc.tab.classList.add("error"):(doc.tab.classList.remove("error"),
session.tab.classList.remove("connecting"))}}
var sizeChanged=null,waitForServer=null
if(session.setSize=function(size){if(size){clearTimeout(waitForServer),waitForServer=null
var term=this.terminal
term.setSize(size.cols,size.rows),term.$resizeMessageT=Date.now(),term.$resizeDelay=term.$resizeMessageT-term.$resizeMessageSentT||0,
sizeChanged&&(sizeChanged=!1,this.updatePtySize())}},session.updatePtySize=function(){this.pty&&this.cols>1&&this.rows>1&&!waitForServer?(this.terminal.$resizeMessageSentT=Date.now(),
this.pty.resize(this.cols,this.rows),clearTimeout(waitForServer),waitForServer=setTimeout(function(){
waitForServer=null},1e3)):sizeChanged=!0},session.resize=function(force){if(this.aceSession){var terminal=this.terminal,ace=this.aceSession.ace


if(terminal&&ace){var size=ace.renderer.$size,config=ace.renderer.layerConfig,h=size.scrollerHeight,w=size.scrollerWidth-2*config.padding


if(!h||config.lineHeight<=1)return!1
var rows=Math.floor((h-1)/config.lineHeight)
rows<=2&&!ace.renderer.scrollBarV.isVisible&&(w-=ace.renderer.scrollBarV.width)
var cols=Math.floor(w/config.characterWidth)
if(cols&&rows&&(force||cols!=terminal.cols||rows!=terminal.rows)){if(rows=Math.max(rows,2),cols=Math.max(cols,2),
cols>1e3||rows>1e3)return void console.error("invalid terminal size")
terminal.resize(cols,rows),session.cols=cols,session.rows=rows,this.updatePtySize()}}}},isOutputTerminal||setTabColor(),
session.terminal)return void(session.connecting&&session.tab.classList.add("connecting"))
if(session.id=e.state&&e.state.id||session.id||isOutputTerminal&&"output",session.root=VFSROOT,session.cwd=e.state.cwd||handleEmit("setTerminalCwd")||"",
session.output=isOutputTerminal,doc.on("unload",function(){options.testing||session.kill(),session.terminal&&session.terminal.destroy()

},doc),doc.on("setTitle",function(e){session.mnuItem&&session.mnuItem.setAttribute("caption",e.title)

},doc),isOutputTerminal)return void(session.connect=function(){session.connect=function(){},createTerminal(session,e.state),
session.resize()})
var tab=doc.tab
tab.on("beforeClose",function(){if(!settings.getBool("user/terminal/noclosequestion")&&!tab.meta.$ignore&&!options.testing)return question.show("Close Terminal?","Are you sure you want to close this terminal?","Closing this terminal will stop any processes that it hosts.",function(){
tab.meta.$ignore=!0,tab.close(),question.dontAsk&&settings.set("user/terminal/noclosequestion","true")

},function(){question.dontAsk&&settings.set("user/terminal/noclosequestion","true")},{showDontAsk:!0,
yes:"Close",no:"Cancel"}),!1},session),handle.on("settingsUpdate",setTabColor,doc),doc.title||(doc.title="Terminal"),
createTerminal(session,e.state)}),plugin.on("documentActivate",function(e){currentSession&&currentSession.detach(),
currentDocument=e.doc,currentSession=e.doc.getSession(),currentSession.attach(),currentSession.resize()


var el=container.querySelector(".ace_content")
el.style.transition="opacity 150ms",el.style.transitionDelay="50ms",el.style.opacity=currentSession.connected?"":"0.5"

}),plugin.on("documentUnload",function(e){var session=e.doc.getSession()
session.detach(),currentSession==session&&(currentSession=null,currentDocument=null,aceterm&&aceterm.setSession(dummySession))

}),plugin.on("getState",function(e){var session=e.doc.getSession()
if(session.id&&(e.state.id=session.id,e.state.cwd=session.cwd,e.state.width=barTerminal.lastWidth||barTerminal.getWidth(),
e.state.height=barTerminal.lastHeight||barTerminal.getHeight(),!e.filter&&session.aceSession)){var aceSession=session.aceSession


e.state.scrollTop=aceSession.getScrollTop(),(!aceSession.selection.isEmpty()||aceSession.selection.rangeCount>1)&&(e.state.selection=aceSession.selection.toJSON())

}}),plugin.on("setState",function(e){var session=e.doc.getSession()
session.id=e.state.id,session.cwd=e.state.cwd
var aceSession=session.aceSession
aceSession&&(e.state.scrollTop&&aceSession.setScrollTop(e.state.scrollTop),e.state.selection&&aceSession.selection.fromJSON(e.state.selection))

}),plugin.on("clear",function(){if(currentSession){var t=currentSession.terminal
t&&t.clear()}}),plugin.on("copy",function(e){if(!e["native"]){var data=aceterm.getCopyText()
e.clipboardData.setData("text/plain",data)}}),plugin.on("paste",function(e){if(!e["native"]){var data=e.clipboardData.getData("text/plain")


data!==!1&&aceterm.onPaste(data)}}),plugin.on("focus",function(e){e.lost?blur():focus()}),tabs.on("focus",function(e){
"terminal"===e.tab.editorType&&(lastTerminal=e.tab),"ace"===e.tab.editorType&&(lastEditor=e.tab)}),tabs.on("tabAfterClose",function(e){
e.tab===lastTerminal&&(lastTerminal=null),e.tab===lastEditor&&(lastEditor=null)}),plugin.on("blur",function(){
blur()}),plugin.on("resize",function(e){resize(e)}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){}),isOutputTerminal&&plugin.freezePublicAPI.baseclass(),plugin.freezePublicAPI({
get ace(){return aceterm},get container(){return container},_events:["connectError","connect"],isClipboardAvailable:function(e){
return!e.fromKeyboard},write:write,getPathAsync:function(callback){return currentSession&&currentSession.getStatus?void currentSession.getStatus({},function(err,result){
callback(err,result&&util.normalizePath(result.path))}):callback("not ready")},Aceterm:Aceterm}),plugin.load((isOutputTerminal?"output":"terminal")+counter++),
plugin}var c9=imports.c9,Editor=imports.Editor,editors=imports.editors,layout=imports.layout,proc=imports.proc,util=imports.util,ui=imports.ui,commands=imports.commands,prefs=imports.preferences,menus=imports.menus,tabs=imports.tabManager,settings=imports.settings,installer=imports.installer,question=imports["dialog.question"],showError=imports["dialog.error"].show,hideError=imports["dialog.error"].hide,alert=imports["dialog.alert"],markup=require("text!./terminal.xml"),Aceterm=require("./aceterm/aceterm"),libterm=require("./aceterm/libterm"),EditSession=require("ace/edit_session").EditSession,dummySession=new EditSession(""),extensions=[],handle=editors.register("terminal","Terminal",Terminal,extensions),handleEmit=handle.getEmitter()


handleEmit.setMaxListeners(1e3)
var mnuTerminal,lastEditor,lastTerminal,shownDotsHelp,installPrompted,themeName,VFSROOT=(options.tmux||"~/.c9/bin/tmux",
options.root||"~"),tmuxConnection=(options.tmpdir,require("./tmux_connection")(c9,proc,options.installPath,options.shell)),defaults={
"flat-light":["#eaf0f7","#000000","#bed1e3",!1],"flat-dark":["#153649","#FFFFFF","#515D77",!0],light:["rgb(248, 248, 231)","#000000","rgb(137, 193, 253)",!1],
"light-gray":["rgb(248, 248, 231)","#000000","rgb(137, 193, 253)",!1],dark:["#153649","#FFFFFF","#515D77",!0],
"dark-gray":["#153649","#FFFFFF","#515D77",!0]}
if(options.defaults)for(themeName in options.defaults)defaults[themeName]=options.defaults[themeName]


ui.insertCss(require("text!./style.css"),options.staticPrefix,handle),handle.on("load",function(){function setSettings(){
libterm.cursorBlink=settings.getBool("user/terminal/@blinking"),libterm.scrollback=settings.getNumber("user/terminal/@scrollback")||1e3


var cname=".c9terminal .c9terminalcontainer .terminal",sname=".c9terminal .c9terminalcontainer",fsize=settings.getNumber("user/terminal/@fontsize"),fstyle=settings.getBool("user/terminal/@antialiasedfonts"),fcolor=settings.get("user/terminal/@foregroundColor"),bcolor=settings.get("user/terminal/@backgroundColor"),scolor=settings.get("user/terminal/@selectionColor")

;[[cname,"fontFamily",settings.get("user/terminal/@fontfamily")||"Ubuntu Mono, Menlo, Consolas, monospace"],[cname,"fontSize",fsize?fsize+"px":"10px"],[cname,"WebkitFontSmoothing",fstyle?"antialiased":"auto"],[cname,"MozOSXFontSmoothing",fstyle?"grayscale":"auto"],[cname,"color",fcolor||"rgb(255,255,255)"],[sname,"backgroundColor",bcolor||"rgb(25, 34, 39)"],[cname+" .ace_selection","backgroundColor",scolor||"rgb(81, 93, 119)"]].forEach(function(i){
ui.setStyleRule(i[0],i[1],i[2])})
var colors
"#eaf0f7"==bcolor&&(colors=["#eaf0f7","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#579818","#C3A613","#5183B8","#ad7fa8","#20C7C7","#BBBBBB"]),
libterm.setColors(fcolor,bcolor,colors),handleEmit("settingsUpdate")}commands.addCommand({name:"openterminal",
group:"Terminal",hint:"Opens a new terminal window",msg:"opening terminal.",bindKey:{mac:"Option-T",win:"Alt-T"
},exec:function(editor){var pane=tabs.focussedTab&&tabs.focussedTab.pane
0===tabs.getTabs(tabs.container).length&&(pane=null),tabs.open({editorType:"terminal",focus:!0,pane:pane
},function(){})}},handle),commands.addCommand({name:"switchterminal",group:"Terminal",hint:"Switch between Editor and Terminal",
msg:"switching.",bindKey:{mac:"Option-S",win:"Alt-S"},isAvailable:function(){return tabs.focussedTab},
exec:function(editor){tabs.focussedTab&&("terminal"!==tabs.focussedTab.editorType?lastTerminal&&tabs.focusTab(lastTerminal):lastEditor&&tabs.focusTab(lastEditor))

}},handle),commands.addCommand({name:"clearterm",group:"Terminal",hint:"Clears the terminal buffer",isAvailable:function(editor){
return editor&&editor.ace&&editor.ace.session&&editor.ace.session.term},exec:function(editor){tabs.focussedTab.editor.clear()

}},handle);[["term_help","?","?"],["term_restart","",":kill-server\r"],["term_detach","",":detach -a\r"],["toggle_term_status","",":set-option status on\r"]].forEach(function(iter){
commands.addCommand({name:iter[0],group:"Terminal",bindKey:{mac:"",win:""},isAvailable:function(editor,e){
var type=editor&&editor.type
return("terminal"==type||"output"==type)&&"click"==e.source},exec:function(editor){if("toggle_term_status"==iter[0]){
var session=editor.activeDocument.getSession()
session.status=!session.status,editor.write(String.fromCharCode(2)+iter[2].replace(/on\r/,session.status?"on\r":"off\r"))

}else editor.write(String.fromCharCode(2)+iter[2])}},handle)})
var menu=tabs.getElement("mnuEditors"),ctxItem=menus.addItemToMenu(menu,new ui.item({caption:"New Terminal",
hotkey:"commands.openterminal",onclick:function(e){tabs.open({focus:!0,pane:this.parentNode.pane,editorType:"terminal"
},function(){})}}),200,handle)
menus.addItemByPath("Window/New Terminal",new ui.item({command:"openterminal"}),30,handle),menus.addItemByPath("Window/Navigation/~",new ui.divider,1500,handle),
menus.addItemByPath("Window/Navigation/Switch Between Editor and Terminal",new ui.item({command:"switchterminal"
}),1550,handle),settings.on("read",function(e){var skin=settings.get("user/general/@skin"),colors=defaults[skin]||defaults.dark


settings.setDefaults("user/terminal",[["backgroundColor",colors[0]],["foregroundColor",colors[1]],["selectionColor",colors[2]],["antialiasedfonts",colors[3]],["fontfamily","Ubuntu Mono, Menlo, Consolas, monospace"],["fontsize","12"],["blinking","false"],["scrollback",1e3]]),
setSettings()},handle),settings.on("user/terminal",setSettings),layout.on("themeChange",function(e){setSettings()


var colors=defaults[e.oldTheme]
if(colors)return settings.get("user/terminal/@backgroundColor")==colors[0]&&settings.get("user/terminal/@foregroundColor")==colors[1]&&settings.get("user/terminal/@selectionColor")==colors[2]&&settings.get("user/terminal/@antialiasedfonts")==colors[3]&&void 0

}),layout.on("themeDefaults",function(e){var colors=defaults[e.theme]
colors&&(settings.set("user/terminal/@backgroundColor",colors[0]),settings.set("user/terminal/@foregroundColor",colors[1]),
settings.set("user/terminal/@selectionColor",colors[2]),settings.set("user/terminal/@antialiasedfonts",colors[3]))

},handle),prefs.add({Editors:{Terminal:{position:100,"Text Color":{type:"colorbox",path:"user/terminal/@foregroundColor",
position:10100},"Background Color":{type:"colorbox",path:"user/terminal/@backgroundColor",position:10200
},"Selection Color":{type:"colorbox",path:"user/terminal/@selectionColor",position:10250},"Font Family":{
type:"textbox",path:"user/terminal/@fontfamily",position:10300},"Font Size":{type:"spinner",path:"user/terminal/@fontsize",
min:"1",max:"72",position:11e3},"Antialiased Fonts":{type:"checkbox",path:"user/terminal/@antialiasedfonts",
position:12e3},"Blinking Cursor":{type:"checkbox",path:"user/terminal/@blinking",position:12e3},Scrollback:{
type:"spinner",path:"user/terminal/@scrollback",min:"1",max:"100000",position:13e3}}}},handle),c9.on("stateChange",function(e){
e.state&c9.NETWORK?(ctxItem&&ctxItem.enable(),ui.setStyleRule(".terminal .ace_content","opacity","")):(ctxItem&&ctxItem.disable(),
ui.setStyleRule(".terminal .ace_content","opacity","0.5"))})}),handle.on("unload",function(){mnuTerminal=null,
lastEditor=null,lastTerminal=null,shownDotsHelp=null,installPrompted=null}),handle.draw=function(){menus.addItemByPath("context/terminal/",new ui.menu,handle)


var c=100
if(menus.addItemByPath("context/terminal/New Terminal Tab",new ui.item({command:"openterminal"}),c+=100,handle),
menus.addItemByPath("context/terminal/~",new ui.divider({}),c+=100,handle),menus.addItemByPath("context/terminal/Copy",new ui.item({
command:"copy"}),c+=100,handle),menus.addItemByPath("context/terminal/Paste",new ui.item({command:"paste"
}),c+=100,handle),menus.addItemByPath("context/terminal/Select All",new ui.item({command:"selectall"}),c+=100,handle),
menus.addItemByPath("context/terminal/Clear Buffer",new ui.item({command:"clearterm"}),c+=100,handle),
menus.addItemByPath("context/terminal/~",new ui.divider({}),c+=100,handle),"win32"!=c9.platform){menus.addItemByPath("context/terminal/Tmux/",new ui.menu,c+=100,handle),
menus.addItemByPath("context/terminal/~",new ui.divider({}),c+=100,handle),menus.addItemByPath("context/terminal/Detach Other Clients",new ui.item({
command:"term_detach"}),c+=100,handle),menus.addItemByPath("context/terminal/Hint: Use Alt To Toggle Mouse Mode",new ui.item({
disabled:"true"}),c+=100,handle)
var c1=0,SESSIONS_MENU="context/terminal/Tmux/Other sessions/"
menus.addItemByPath(SESSIONS_MENU,new ui.menu({"onprop.visible":function(e){if(e.value){var currentName=tabs.focussedTab.document.getSession().id


proc.tmux("",{listSessions:!0},function(err,pty,pid,meta){return menus.remove(SESSIONS_MENU),err||!meta.sessions?menus.addItemByPath(SESSIONS_MENU+"Error loading session list:(",new ui.item({
disabled:!0}),handle):void meta.sessions.forEach(function(x){if(!/output/.test(x.name)){var label=x.name+"\t("+x.width+"x"+x.height+")\t"+x.clientCount+" connected clients"


menus.addItemByPath(SESSIONS_MENU+menus.escape(label),new ui.item({value:x,"class":x.name==currentName?"strong":""
}),handle)}})})}},onitemclick:function(e){var options=e.relatedNode.value
if(options){var id=options.name
tabs.getTabs().some(function(tab){if(("terminal"==tab.editorType||"output"==tab.editorType)&&tab.document.getSession()&&tab.document.getSession().id==id)return tabs.focusTab(tab),
!0})||tabs.open({editorType:/output/.test(id)?"output":"terminal",document:{terminal:{id:id}},focus:!0,
pane:tabs.focussedTab.pane})}}}),c1+=100,handle),menus.addItemByPath(SESSIONS_MENU+"Loading...",new ui.item({
disabled:"true"}),0,handle),menus.addItemByPath("context/terminal/Tmux/~",new ui.divider({}),c1+=100,handle),
menus.addItemByPath("context/terminal/Tmux/Toggle Status Bar",new ui.item({command:"toggle_term_status"
}),c1+=100,handle),menus.addItemByPath("context/terminal/Tmux/~",new ui.divider({}),c1+=100,handle),menus.addItemByPath("context/terminal/Tmux/Restart All Terminal Sessions",new ui.item({
command:"term_restart"}),c1+=100,handle),menus.addItemByPath("context/terminal/Tmux/Show More Terminal Commands...",new ui.item({
command:"term_help"}),c1+=100,handle)}menus.addItemByPath("context/terminal/Hint: Use Alt To Toggle Mouse Mode",new ui.item({
disabled:"true"}),c+=100,handle),mnuTerminal=menus.get("context/terminal").menu,handle.draw=function(){}

},handle.Terminal=Terminal,handle.VFSROOT=VFSROOT
var counter=0
register(null,{terminal:handle})}return main.consumes=["Editor","editors","commands","menus","layout","util","settings","ui","proc","c9","preferences","tabManager","dialog.error","dialog.question","dialog.alert","installer"],
main.provides=["terminal"],main})


define("plugins/c9.ide.run.debug.ikpdb/lib/MessageReader",[],function(require,exports,module){"use strict"


var MessageReader=module.exports=function(socket,callback){this.IKPDB_MAGIC_CODE="LLADpcdtbdpac",this.IKPDB_LENGTH_PREFIX="length=",
this.C9_MAGIC_CODE="\r\n\r\n",this.C9_LENGTH_PREFIX="Content-Length:",this.C9_PING_MESSAGE=this.C9_LENGTH_PREFIX+"0"+this.C9_MAGIC_CODE,
this._socket=socket,this._callback=callback,this._receivedData="",this._boundOnReceive=this._onReceive.bind(this),
socket.on("data",this._boundOnReceive)};(function(){this._onReceive=function(data){this._receivedData+=data


for(var fullResponse=null;fullResponse=this._checkForWholeMessage();)fullResponse!=this.C9_PING_MESSAGE?this._callback(fullResponse):console.log('Received "ping" message from Cloud9 ('+this.C9_PING_MESSAGE+")")

},this._tryToDetectProtocol=function(receivedData){var lengthPrefixIdx=null,magicCodeIdx=null
if((magicCodeIdx=receivedData.indexOf(this.IKPDB_MAGIC_CODE))!=-1){if((lengthPrefixIdx=receivedData.indexOf(this.IKPDB_LENGTH_PREFIX))!=-1)return["IKPdb",lengthPrefixIdx,magicCodeIdx]

}else if((magicCodeIdx=receivedData.indexOf(this.C9_MAGIC_CODE))!=-1&&(lengthPrefixIdx=receivedData.indexOf(this.C9_LENGTH_PREFIX))!=-1)return["C9",lengthPrefixIdx,magicCodeIdx]


return null},this._checkForWholeMessage=function(){var messageLength,responseLength,MAGIC_CODE,LENGTH_PREFIX,fullResponse=!1,lengthPrefixIdx=0,magicCodeIdx=0,protocol=null,received=this._receivedData


return protocol=this._tryToDetectProtocol(received),protocol&&(lengthPrefixIdx=protocol[1],magicCodeIdx=protocol[2],
MAGIC_CODE="IKPdb"==protocol[0]?this.IKPDB_MAGIC_CODE:this.C9_MAGIC_CODE,LENGTH_PREFIX="IKPdb"==protocol[0]?this.IKPDB_LENGTH_PREFIX:this.C9_LENGTH_PREFIX,
messageLength=received.substring(lengthPrefixIdx+LENGTH_PREFIX.length),messageLength=messageLength.substring(0,messageLength.indexOf(MAGIC_CODE)),
responseLength=magicCodeIdx+MAGIC_CODE.length+parseInt(messageLength,10),responseLength<=received.length?(fullResponse=received.substring(0,responseLength),
this._receivedData=received.substring(responseLength),this._socket.setMinReceiveSize(0)):this._socket.setMinReceiveSize(responseLength-received.length)),
fullResponse},this.destroy=function(){this._socket&&this._socket.removeListener("data",this._boundOnReceive),
delete this._socket,delete this._callback,this._received=""}}).call(MessageReader.prototype)})


define("plugins/c9.ide.run.debug.ikpdb/lib/IKPdbService",[],function(require,exports,module){"use strict"


var MessageReader=require("./MessageReader"),IKPdbService=module.exports=function(socket,breakHandler){
this.MAGIC_CODE="LLADpcdtbdpac",this._socket=socket,this._breakHandler=breakHandler,this._attached=!1,
this._pending=[],this._connected=!1,this._commandId=0,this._callbacks=[],this._commandsQueue={}};(function(){
this.attach=function(callback){if(this._connected)throw new Error("IKPdbService already attached!")
var self=this
this._reader=new MessageReader(this._socket,function(){self._reader.destroy(),self._reader=new MessageReader(self._socket,self._receiveMessage.bind(self)),
callback()}),this._socket.on("connect",function(){this._connected=!0}),this._socket.on("end",function(){
for(var id in self._callbacks)self._callbacks[id]&&self._callbacks[id](new Error("IKPdb debug session ended."))

}),this._socket.connect()},this.detach=function(callback){this._socket&&this._socket.close(),this._socket=null,
this._connected=!1,this._commands={},this._callbacks=[],this._breakHandler=function(){},callback&&callback()

},this._jsonSend=function(args){args=JSON.stringify(args)
var msg=["length=",args.length,this.MAGIC_CODE,args].join("")
this._socket.send(msg)},this.sendCommand=function(command,args,callback){var obj={}
"undefined"==typeof args&&(args={}),obj.command=command,obj._id=++this._commandId,obj.args=args,"undefined"!=typeof callback&&(this._callbacks[this._commandId]=callback),
this._commandsQueue[this._commandId]=obj,this._jsonSend(obj)},this._receiveMessage=function(message){
var responseParts=message.split(this.MAGIC_CODE)
try{var content=JSON.parse(responseParts[1])}catch(ex){return void console.error("Debugger can't parse JSON from IKPdb proxy",responseParts[1])

}if(null!==content&&"object"==typeof content){if("programEnd"==content.command)return this._breakHandler(content)


if("programBreak"==content.command)return this._breakHandler(content)
if("undefined"!=typeof content._id){var callback=null
"function"==typeof this._callbacks[content._id]&&(callback=this._callbacks[content._id])
var err=null
if("error"==content.commandExecStatus){var str=""
content.error_messages.length?str+=content.error_messages.join(" "):(str+="Command '"+this._commandsQueue[content._id].command+"'' failed.",
content.error_messages=[str]),err=new Error(str)}delete this._callbacks[content._id],delete this._commandsQueue[content._id],
callback&&callback(err,content)}}}}).call(IKPdbService.prototype)})


define("text!plugins/c9.ide.run.debug.ikpdb/netproxy.js",[],'\nvar net = require("net");\nvar debuggedProcessHost = "{DEBUGGED_PROCESS_HOST}";\nvar debuggedProcessPort = parseInt("{DEBUGGED_PROCESS_PORT}", 10);\n\nvar debugBuffer = [];\nvar browserBuffer = [];\nvar browserClient, \n    debugClient;\n\nvar MAX_RETRIES = 100;\nvar RETRY_INTERVAL = 300;\n\nvar log = console.log;\n\nconsole.warn = console.log = function() {\n    return console.error.apply(console, arguments);\n};\nfunction send() {\n    log.apply(console, arguments);\n}\n\nvar server = net.createServer(function(client) {\n    if (browserClient)\n        browserClient.destroy(); // Client is probably unloaded because a new client is connecting\n    \n    browserClient = client;\n    debugBuffer = [];\n    \n    browserClient.on("end", function() {\n        browserClient = null;\n    });\n    \n    browserClient.on("data", function(data) {\n        console.error("data = " + data);\n        if (debugClient) {\n            debugClient.write(data);\n        } else {\n            debugBuffer.push(data);\n        }\n    });\n    \n    if (browserBuffer.length) {\n        browserBuffer.forEach(function(data) {\n            browserClient.write(data);\n        });\n        browserBuffer = [];\n    }\n});\nserver.listen(debuggedProcessPort + 1, "127.0.0.1", function() {\n    start();\n});\nserver.on("error", function() { process.exit(0); });\n\nfunction tryConnect(retries, callback) {\n    if (!retries)\n        return callback(new Error("Cannot connect to port " + debuggedProcessPort));\n        \n    var connection = net.connect(debuggedProcessPort, debuggedProcessHost);\n    \n    connection.on("connect", function() {\n        connection.removeListener("error", onError);\n        callback(null, connection);\n    });\n    \n    connection.addListener("error", onError);\n    function onError(e) {\n        if (e.code !== "ECONNREFUSED")\n            return callback(e);\n        \n        setTimeout(function() {\n            tryConnect(retries - 1, callback);\n        }, RETRY_INTERVAL);\n    }\n}\n\ntryConnect(MAX_RETRIES, function(err, connection) {\n    if (err)\n        return errHandler(err);\n        \n    debugClient = connection;\n    browserBuffer = [];\n    \n    debugClient.on("data", function(data) {\n        if (browserClient) {\n            browserClient.write(data);\n        } else {\n            browserBuffer.push(data);\n        }\n    });\n    \n    function errHandler(e) {\n        console.log(e);\n        process.exit(0);\n    }\n    \n    debugClient.on("error", errHandler);\n    \n    debugClient.on("end", function(data) {\n        server.close();\n    });\n    \n    start();\n    \n    if (debugBuffer.length) {\n        console.error("sending buffer to debugger...");\n        console.error("debugBuffer  = " + debugBuffer);\n        debugBuffer.forEach(function(data) {\n            debugClient.write(data);\n        });\n        debugBuffer = [];\n    }\n});\n\n\nvar I = 0;\nfunction start() {\n    if (++I == 2)\n        send("\xdf");\n}')


define("plugins/c9.ide.run.debug.ikpdb/ikpdb",[],function(require,exports,module){function main(options,imports,register){
function sendCommand(command,args,callback){ikpdbs.sendCommand(command,args,function(err,reply){if(reply&&(reply.info_messages.forEach(function(iMessage){
console.log(iMessage)}),reply.warning_messages.forEach(function(wMessage){bubble.popup(wMessage,!1)})),
err){var errMessage
return reply&&(errMessage=reply.error_messages.join(" "),showError(errMessage,1e4)),callback&&callback(err)

}reply.result.executionStatus&&setState(reply.result.executionStatus),callback&&callback(err,reply)})

}function runScript(callback){sendCommand("runScript",{},callback)}function stepOver(callback){sendCommand("stepOver",{},callback)

}function stepInto(callback){sendCommand("stepInto",{},callback)}function stepOut(callback){sendCommand("stepOut",{},callback)

}function resume(callback){sendCommand("resume",{},callback)}function suspend(callback){sendCommand("suspend",{},callback)

}function buildVariable(variable,scope){if(null!=variable)return new Variable({ref:variable.id,name:variable.name,
value:variable.value,type:variable.type,children:variable.children_count,properties:null,scope:scope})

}function buildScopeVariables(frame_vars,scope_index,frame_index,vars){for(var scope=new Scope({index:scope_index,
type:SCOPES[scope_index],frameIndex:frame_index}),i=0,j=vars.length;i<j;i++)frame_vars.push(buildVariable(vars[i],scope))

}function buildFrame(thread_id,frame,i){var variables=[]
return"undefined"!=typeof frame.f_locals&&buildScopeVariables(variables,1,i,frame.f_locals),new Frame({
index:i,name:frame.name,column:0,id:frame.id,line:parseInt(frame.line_number,10)-1,path:util.normalizePath("/"+frame.file_path),
sourceId:frame.file_path,thread:thread_id,istop:0===i,variables:variables})}function programBreak(message){
if("programEnd"===message.command)return detach()
stack=[]
for(var frames=message.frames,i=0,j=frames.length;i<j;i++)stack.push(buildFrame(frames[i].thread,frames[i],i))


if(setState("stopped"),emit("frameActivate",{frame:stack[0]}),message.info_messages.forEach(function(iMessage){
console.log(iMessage)}),message.warning_messages.forEach(function(wMessage){bubble.popup(wMessage,!1)

}),message.error_messages.forEach(function(eMessage){showError(eMessage,1e4)}),message.exception){showError('IKpdb has detected an unmanaged exception "'+message.exception.type+'":'+message.exception.info+". Execution has stopped!",1e4)


var exception=new Variable({ref:null,name:message.exception.type,value:message.exception.info,type:"Exception",
children:!1,properties:null,scope:"Locals"})
emit("exception",{frame:stack[0],frames:stack,exception:exception}),debug.getElement("btnSuspend").setAttribute("disabled",!0),
debug.getElement("btnStepOut").setAttribute("disabled",!0),debug.getElement("btnStepInto").setAttribute("disabled",!0),
debug.getElement("btnStepOver").setAttribute("disabled",!0)}else emit("break",{frame:stack[0],frames:stack
}),1==stack.length&&debug.getElement("btnStepOut").setAttribute("disabled",!0)}function setState(_state){
state!==_state&&(state=_state,emit("stateChange",{state:state}))}function breakpointManagementWarning(commandSpecificMessage){
return}function setBreakpoint(bp,callback){breakpointManagementWarning("Breakpoint creation request will be send to debugger at next programm break !."),
bp.data.file_name=bp.data.path.substring(1),bp.data.line_number=bp.data.line+1,sendCommand("setBreakpoint",bp.data,function(err,reply){
return err?callback&&callback(err):"error"==reply.commandExecStatus?callback&&callback(new Error("Can't set breakpoint")):(bp.id=reply.result.breakpoint_number,
void(callback&&callback(null,bp,{})))})}function changeBreakpoint(bp,callback){breakpointManagementWarning("Breakpoint modification request will be send to debugger at next programm break !."),
bp.data||console.error("Missing bp.data in changeBreakpoint(",bp,") "),bp.data.breakpoint_number=bp.id,
sendCommand("changeBreakpointState",bp.data,function(err){callback&&callback(err,bp)})}function clearBreakpoint(bp,callback){
breakpointManagementWarning("Breakpoint removal request will be send to debugger at next programm break !."),
bp.data.breakpoint_number=bp.id,sendCommand("clearBreakpoint",bp.data,function(err){callback&&callback(err,bp)

})}function manyBreakpoints(breakpoints,command,callback){function _setBPs(breakpoints,failed,callback,i){
return i==breakpoints.length?void callback(breakpoints,failed):void command(breakpoints[i],function(err,bp){
err?(failed.push(breakpoints.splice(i,1)),_setBPs(breakpoints,failed,callback,i)):(breakpoints[i].id=bp.id,
_setBPs(breakpoints,failed,callback,i+1))})}_setBPs(breakpoints,[],callback,0)}function sync(begin,callback){
var localBkpts=emit("getBreakpoints")
listBreakpoints(function(err,remoteBkpts){if(err)return callback(err)
for(var to_add=[],synced=[],i=0,j=localBkpts.length;i<j;i++){for(var bp=localBkpts[i],missing=!0,x=0,y=remoteBkpts.length;x<y;x++){
var rbp=remoteBkpts[x]
if(bp.path==rbp.path&&bp.line==rbp.line&&bp.condition==rbp.condition){bp.id=rbp.id,remoteBkpts.splice(x,1),
missing=!1
break}}missing?to_add.push(bp):synced.push(bp)}manyBreakpoints(to_add,setBreakpoint,function(added,fail){
synced=synced.concat(added),manyBreakpoints(remoteBkpts,clearBreakpoint,function(cleared,clrfail){synced=synced.concat(clrfail),
attached=!0,emit("attach",{breakpoints:synced}),begin?runScript(callback):sendCommand("getStatus",{},callback)

})})})}function evaluate(expression,frame,global,disableBreak,callback){var args={expression:expression,
frame:frame&&frame.id||null,thread:frame&&frame.thread||null,global:global,disableBreak:disableBreak}


sendCommand("evaluate",args,function(err,reply){return err?callback(new Error("No value")):void callback(null,new Variable({
name:expression,value:reply.result.value,type:reply.result.type,children:!1}))})}function setVariable(variable,parents,value,frame,callback){
var args={frame:frame.id,name:variable.name,value:value}
sendCommand("setVariable",args,function(err,reply){return err?callback&&callback(err):void(callback&&callback(null,variable))

})}function reconnectSync(callback){callback||(callback=function(){}),sendCommand("reconnect",{},function(err,reply){
var restart=!err&&"running"==reply.executionStatus
sync(restart,callback)})}function attach(_socket,reconnect,callback){debugger_socket=_socket,debugger_socket.on("back",function(){
reconnectSync()},plugin),debugger_socket.on("error",function(err){console.error("IKPb debugger socket error !",err),
emit("error",err)},plugin),ikpdbs=new IKPdbService(debugger_socket,programBreak),ikpdbs.attach(function(){
emit("connect"),reconnect?reconnectSync(callback):sync(!0,callback)}),emit("frameActivate",{frame:null
})}function detach(){ikpdbs&&ikpdbs.detach(),emit("frameActivate",{frame:null}),setState(null),debugger_socket=null,
attached=!1,ikpdbs=null,emit("detach")}function getProxySource(process){return PROXY.replace(/\/\/.*/g,"").replace(/[\n\r]/g,"").replace(/\{DEBUGGED_PROCESS_PORT\}/,(process.runner[0]||process.runner).debugport).replace(/\{DEBUGGED_PROCESS_HOST\}/,(process.runner[0]||process.runner).debughost||"127.0.0.1")

}function getProperties(variable,callback){var args={id:variable.ref,name:variable.name}
sendCommand("getProperties",args,function(err,reply){if(err)return callback&&callback(err)
if(0===reply.result.properties.length)return callback&&callback(new Error("No children"))
var children=[]
reply.result.properties.forEach(function(child){children.push(buildVariable(child,variable.scope))}),
variable.properties=children,callback&&callback(null,children,variable)})}function listBreakpoints(callback){
sendCommand("getBreakpoints",{},function(err,reply){if(err)return console.error("getBreakpoints() error with response=",reply),
callback&&callback(err,reply)
reply.result.forEach(function(bp){bp.line=bp.line_number-1,bp.id=bp.breakpoint_number,bp.path=util.normalizePath(bp.file_name)

})
var breakpointList=reply.result
callback(null,breakpointList)})}var Plugin=imports.Plugin,util=imports.util,debug=imports["debugger"],showError=imports["dialog.error"].show,bubble=imports["notification.bubble"],Frame=(imports.panels,
imports.settings,debug.Frame),Variable=(debug.Source,debug.Breakpoint,debug.Variable),Scope=debug.Scope,IKPdbService=require("./lib/IKPdbService"),TYPE="pythondebug",PROXY=require("text!./netproxy.js"),plugin=new Plugin("Cyril Morisse,Audaxis",main.consumes),emit=plugin.getEmitter(),attached=!1,state=null,stack=null,ikpdbs=null,debugger_socket=null,SCOPES=["Parameters","Locals"]


plugin.on("load",function(){debug.registerDebugger(TYPE,plugin)}),plugin.on("unload",function(){debug.unregisterDebugger(TYPE,plugin),
attached=!1,stack=null,ikpdbs=null,state=null,debugger_socket=null}),plugin.freezePublicAPI({features:{
scripts:!1,conditionalBreakpoints:!0,liveUpdate:!1,updateWatchedVariables:!1,updateScopeVariables:!0,
setBreakBehavior:!1,executeCode:!0},type:TYPE,get state(){return state},get attached(){return attached

},get breakOnExceptions(){return!1},get breakOnUncaughtExceptions(){return!0},_events:["attach","detach","getBreakpoints"],
attach:attach,detach:detach,resume:resume,suspend:suspend,stepOver:stepOver,getProperties:getProperties,
stepInto:stepInto,stepOut:stepOut,getProxySource:getProxySource,setBreakpoint:setBreakpoint,clearBreakpoint:clearBreakpoint,
evaluate:evaluate,setBreakBehavior:function(){},changeBreakpoint:changeBreakpoint,listBreakpoints:listBreakpoints,
setVariable:setVariable}),register(null,{ikpdb:plugin})}return main.consumes=["Plugin","c9","util","debugger","dialog.error","notification.bubble"],
main.provides=["ikpdb"],main})


define("plugins/c9.ide.run.debug/debuggers/gdb/lib/MessageReader",[],function(require,exports,module){
"use strict"
var MessageReader=module.exports=function(socket,callback){this.$socket=socket,this.$callback=callback,
this.$received="",this.$cbReceive=this.$onreceive.bind(this),socket.on("data",this.$cbReceive)};(function(){
this.$onreceive=function(data){this.$received+=data
for(var fullResponse;fullResponse=this.$checkForWholeMessage();)this.$callback(fullResponse)},this.$checkForWholeMessage=function(){
var i,c,l,responseLength,fullResponse=!1,received=this.$received
return(i=received.indexOf("\r\n\r\n"))!=-1&&(c=received.indexOf("Content-Length:"))!=-1&&(l=received.substring(c+15),
l=l.substring(0,l.indexOf("\r\n")),responseLength=i+4+parseInt(l,10),responseLength<=received.length?(fullResponse=received.substring(0,responseLength),
this.$received=received.substring(responseLength),this.$socket.setMinReceiveSize(0)):this.$socket.setMinReceiveSize(responseLength-received.length)),
fullResponse},this.destroy=function(){this.$socket&&this.$socket.removeListener("data",this.$cbReceive),
delete this.$socket,delete this.$callback,this.$received=""}}).call(MessageReader.prototype)})


define("plugins/c9.ide.run.debug/debuggers/gdb/lib/GDBProxyService",[],function(require,exports,module){
"use strict"
var MessageReader=require("./MessageReader"),GDBProxyService=module.exports=function(socket,haltHandler){
this.$socket=socket,this.$haltHandler=haltHandler,this.$connected=!1,this.$sequence_id=0,this.$commands={},
this.$callbacks=[]};(function(){this.attach=function(callback){if(this.$connected)throw new Error("already attached!")


var self=this
this.$reader=new MessageReader(this.$socket,function(){self.$reader.destroy(),self.$reader=new MessageReader(self.$socket,self.$receiveMessage.bind(self)),
callback()}),this.$socket.on("end",function(){for(var id in self.$callbacks)self.$callbacks.hasOwnProperty(id)&&self.$callbacks[id]&&self.$callbacks[id](new Error("Debug session ended"))

}),this.$socket.on("connect",function(){self.$connected=!0}),this.$socket.on("beforeBack",function(){
self.$commands.length&&self.$commands.forEach(function(cmd){self.$send(cmd)})}),this.$socket.connect()

},this.detach=function(callback){this.$connected&&this.sendCommand("detach"),this.$socket&&this.$socket.close(),
this.$socket=null,this.$connected=!1,this.$commands={},this.$callbacks=[],this.$haltHandler=function(){},
this.$reader&&this.$reader.destroy(),callback&&callback()},this.$send=function(args){args=JSON.stringify(args)


var msg=["Content-Length:",args.length,"\r\n\r\n",args].join("")
this.$socket&&this.$socket.send(msg)},this.sendCommand=function(command,args,callback){"undefined"==typeof args&&(args={}),
args.command=command,args._id=++this.$sequence_id,"undefined"!=typeof callback&&(this.$callbacks[this.$sequence_id]=callback),
this.$commands[this.$sequence_id]=args,this.$send(args)},this.$receiveMessage=function(message){var responseParts=message.split("\r\n\r\n")


try{var content=JSON.parse(responseParts[1])}catch(ex){return void console.log("Debugger can't parse JSON from GDB proxy")

}if(null!==content&&"object"==typeof content){if("killed"===content.err||"corrupt"===content.err)return this.$haltHandler(content)


if("frames"in content)return this.$haltHandler(content)
if("undefined"!=typeof content._id){var callback=null
"function"==typeof this.$callbacks[content._id]&&(callback=this.$callbacks[content._id])
var err=null
if(!content.hasOwnProperty("state")||"error"==content.state){var str="Command "+this.$commands[content._id]+" failed"


content.hasOwnProperty("msg")&&(str+=content.msg),err=new Error(str)}delete this.$callbacks[content._id],
delete this.$commands[content._id],callback&&callback(err,content)}}}}).call(GDBProxyService.prototype)

})


define("text!plugins/c9.ide.run.debug/debuggers/gdb/shim.js",[],'\nvar net = require(\'net\');\nvar fs = require(\'fs\');\nvar spawn = require(\'child_process\').spawn;\nfunction printUsage() {\n    var p = [process.argv[0], process.argv[1]].join(" ");\n    var msg = [\n        "Cloud9 GDB Debugger shim",\n        "Usage: " + p + " [-b=bp] [-d=depth] [-g=gdb] [-p=proxy] BIN [args]\\n",\n        "  bp: warn when BPs are sent but none are set (default true)",\n        "  depth: maximum stack depth computed (default 50)",\n        "  gdb: port that GDB client and server communicate (default 15470)",\n        "  proxy: port or socket that this shim listens for connections (default ~/.c9/gdbdebugger.socket)",\n        "  BIN: the binary to debug with GDB",\n        "  args: optional arguments for BIN\\n"\n    ];\n    console.error(msg.join("\\n"));\n    process.exit(1);\n}\n\nvar argc = process.argv.length;\nif (argc < 3) printUsage();\nvar PROXY = { sock: process.env.HOME + "/.c9/gdbdebugger.socket" };\nvar GDB_PORT = 15470;\nvar MAX_STACK_DEPTH = 50;\nvar DEBUG = 0;\nvar BIN = "";\nvar BP_WARN = true;\nfunction parseArg(str, allowNonInt) {\n    if (str == null || str === "") printUsage();\n    var val = parseInt(str, 10);\n    if (!allowNonInt && isNaN(val)) printUsage();\n    return val;\n}\nvar i = 0;\nfor (i = 2; i < argc && BIN === ""; i++) {\n    var arg = process.argv[i];\n    var a = arg.split("=");    \n    var key = a[0];\n    var val = (a.length == 2) ? a[1] : null;\n\n    switch (key) {\n        case "-b":\n        case "--bp":\n            BP_WARN = (val === "true");\n            break;\n        case "-d":\n        case "--depth":\n            MAX_STACK_DEPTH = parseArg(val);\n            break;\n        case "-g":\n        case "--gdb":\n            GDB_PORT = parseArg(val);\n            break;\n        case "-p":\n        case "--proxy":\n            var portNum = parseArg(val, true);\n\n            if (isNaN(portNum))\n                PROXY = { sock: val };\n            else\n                PROXY = { host: "127.0.0.1", port: portNum };\n            break;\n        case "--debug":\n            DEBUG = parseInt(val) || 0;\n            break;\n        default:\n            BIN = arg;\n    }\n}\nvar ARGS = process.argv.slice(i);\n\nvar STACK_RANGE = "0 " + MAX_STACK_DEPTH;\nvar client = null;\nvar gdb = null;\nvar executable = null;\nvar exit = null;\n\nvar log = function() {};\n\nif (DEBUG) {\n    var log_file = fs.createWriteStream(process.env.HOME + "/.c9/gdb_proxy.log", { flags: "a" });\n    log_file.write("\\n\\n" + new Date());\n    log = function(str) {\n        var args = Array.prototype.slice.call(arguments);\n        log_file.write(args.join(" ") + "\\n");\n        if (DEBUG > 1)\n            console.log(str);\n    };\n}\nfunction Client(c) {\n    this.connection = c;\n    this.buffer = [];\n\n    this.reconnect = function(c) {\n        this.cleanup();\n        this.connection = c;\n    };\n\n    this.connect = function(callback) {\n        var parser = this._parse();\n\n        this.connection.on("data", function(data) {\n            log("PLUGIN: " + data.toString());\n            var commands = parser(data);\n\n            if (commands.length > 0) {\n                gdb.command_queue = gdb.command_queue.concat(commands);\n                gdb.handleCommands();\n            }\n        });\n\n        this.connection.on("error", function (e) {\n            log(e);\n            process.exit(0);\n        });\n\n        this.connection.on("end", function() {\n            this.connection = null;\n        });\n\n        callback();\n    };\n    this.flush = function() {\n        if (!this.connection) return;\n        if (this.buffer.length == 0) return;\n\n        this.buffer.forEach(function(msg) {\n            this.connection.write(msg);\n        });\n        this.buffer = [];\n    };\n\n    this.cleanup = function() {\n        if (this.connection)\n            this.connection.end();\n    };\n\n    this._parse = function() {\n        var data_buffer = "";\n        var data_length = false;\n        var json_objects = [];\n        function parser(data) {\n            data = data_buffer + data.toString();\n\n            function abort() {\n                var ret = json_objects;\n                json_objects = [];\n                return ret;\n            }\n\n            if (data_length === false) {\n                var idx = data.indexOf("\\r\\n\\r\\n");\n                if (idx === -1) {\n                    data_buffer = data;\n                    return abort();\n                }\n\n                data_length = parseInt(data.substr(15, idx), 10);\n                data = data.slice(idx + 4);\n            }\n            if (data.length < data_length) {\n                return abort();\n            }\n\n            data_buffer = data.slice(data_length);\n            data = data.substr(0, data_length);\n\n            try {\n                data = JSON.parse(data);\n            }\n            catch (ex) {\n                console.log("There was an error parsing data from the plugin.");\n                log("JSON (Parse error): " + data);\n                return abort();\n            }\n\n            json_objects.push(data);\n\n            data_length = false;\n            return parser("");\n        }\n        return parser;\n    };\n\n    this.send = function(args) {\n        args = JSON.stringify(args);\n        var msg = ["Content-Length:", args.length, "\\r\\n\\r\\n", args].join("");\n        log("SENDING: " + msg);\n        if (this.connection)\n            this.connection.write(msg);\n        else\n            this.buffer.push(msg);\n    };\n}\nfunction Executable() {\n    this.proc = null;\n    this.running = false;\n    this.spawn = function(callback) {\n        var args = ["--once", ":" + GDB_PORT, BIN].concat(ARGS);\n        this.proc = spawn("gdbserver", args, {\n            cwd: process.cwd(),\n            stdio: [\'pipe\', process.stdout, \'pipe\'],\n        });\n\n        var errqueue = [];\n        this.proc.on("exit", function(code, signal) {\n            log("GDB server terminated with code " + code + " and signal " + signal);\n            client && client.send({ err: "killed", code: code, signal: signal });\n            exit = { proc: "GDB server", code: code, signal: signal };\n            if (errqueue === null)\n                process.exit(code);\n        }.bind(this));\n        \n        this.proc.on("error", function(e) {\n            console.error("ERROR while launching the debugger:");\n            if (e.code == "ENOENT") {\n                console.log("\\t\\"gdbserver\\" is not installed");\n            } else {\n                console.error(e);\n            }\n            process.exit(1);\n        });\n \n        this.proc.stderr.on("end", function() {\n            if (errqueue !== null) {\n                log(errqueue.join(""));\n                errqueue = null;\n            }\n            if (exit !== null)\n                process.exit(exit.code);\n        });\n        function handleStderr(data) {\n            if (this.running)\n                return log(data.toString());\n            var str = data.toString();\n            errqueue.push(str);\n\n            if (str.indexOf("Listening") > -1) {\n                callback();\n            }\n            if (str.indexOf("127.0.0.1") > -1) {\n                errqueue = null;\n                this.running = true;\n            }\n        }\n        this.proc.stderr.on("data", handleStderr.bind(this));\n        process.stdin.pipe(this.proc.stdin);\n    };\n    this.cleanup = function() {\n        if (this.proc) {\n            this.proc.kill("SIGHUP");\n            this.proc = null;\n        }\n    };\n}\nfunction GDB() {\n    this.sequence_id = 0;\n    this.bp_set = null;\n    this.callbacks = {};\n    this.state = {};\n    this.framecache = {};\n    this.varcache = {};\n    this.running = false;\n    this.started = false;\n    this.clientReconnect = false;\n    this.memoized_files = [];\n    this.command_queue = [];\n    this.proc = null;\n    function buffers() {\n        var last_buffer = "";\n\n        return function(data, callback) {\n            var full_output = last_buffer + data;\n            var lines = full_output.split("\\n");\n            last_buffer = (full_output.slice(-1) == "\\n") ? "" : lines.pop;\n\n            for (var i = 0; i < lines.length; i++) {\n                if (lines[i].length === 0) continue;\n                callback(lines[i]);\n            }\n        };\n    }\n    this.spawn = function() {\n        this.proc = spawn(\'gdb\', [\'-q\', \'--interpreter=mi2\', BIN], {\n            detached: false,\n            cwd: process.cwd()\n        });\n        \n        this.proc.on("error", function(e) {\n            console.error("ERROR while launching the debugger:");\n            if (e.code == "ENOENT") {\n                console.log("\\t\\"gdbserver\\" is not installed");\n            } else {\n                console.error(e);\n            }\n        });\n\n        var self = this;\n        var stdout_buff = buffers();\n        this.proc.stdout.on("data", function(stdout_data) {\n            stdout_buff(stdout_data, self._handleLine.bind(self));\n        });\n        var stderr_buff = buffers();\n        this.proc.stderr.on("data", function(stderr_data) {\n            stderr_buff(stderr_data, function(line) {\n                log("GDB STDERR: " + line);\n            });\n        });\n\n        this.proc.on("exit", function(code, signal) {\n            log("GDB terminated with code " + code + " and signal " + signal);\n            client && client.send({ err: "killed", code: code, signal: signal });\n            exit = { proc: "GDB", code: code, signal: signal };\n            process.exit(code);\n        });\n    };\n\n    this.connect = function(callback) {\n        this.issue("-target-select", "remote localhost:" + GDB_PORT, function(reply) {\n            if (reply.state != "connected")\n                return callback(reply, "Cannot connect to gdbserver");\n            this.issue("set breakpoint", "condition-evaluation host", callback);\n\n        }.bind(this));\n    };\n    this.suspend = function() {\n        this.proc.kill(\'SIGINT\');\n    };\n\n    this.cleanup = function() {\n        if (this.proc) {\n            this.proc.kill("SIGHUP");\n            this.proc = null;\n        }\n    };\n    this.issue = function(cmd, args, callback) {\n        var seq = "";\n        if (!args) args = "";\n\n        if (typeof callback === "function") {\n            seq = ++this.sequence_id;\n            this.callbacks[seq] = callback;\n        }\n\n        var msg = [seq, cmd, " ", args, "\\n"].join("");\n        log(msg);\n        this.proc.stdin.write(msg);\n    };\n\n    this.post = function(client_seq, command, args) {\n        this.issue(command, args, function(output) {\n            output._id = client_seq;\n            client.send(output);\n        });\n    };\n    String.prototype.setCharAt = function(idx, chr) {\n        if (idx > this.length - 1) {\n            return this.toString();\n        }\n        else {\n            return this.substr(0, idx) + chr + this.substr(idx + 1);\n        }\n    };\n\n    this._removeArrayLabels = function(args) {\n\n        var t_in_array = [];\n        var in_array = 0;\n        for (var i = 0; i < args.length; i++) {\n            if (args[i] == "[")\n                t_in_array.push(1);\n\n            if (args[i] == "{")\n                t_in_array.push(0);\n\n            if (args[i] == "]" || args[i] == "}")\n                t_in_array.pop();\n            in_array = t_in_array[t_in_array.length - 1];\n            if (in_array\n                && (args[i] == "," || args[i] == "[")\n                && args[i + 1] == "\\"") {\n                var k = i;\n                while ((k < args.length)\n                       && (args[k] != ":")\n                       && (args[k] != "=")\n                       && (args[k] != "]")) {\n                    k++;\n                }\n                if (args[k] == ":" || args[k] == "=") {\n                    for (var l = (i + 1); l <= k; l++) {\n                        args = args.setCharAt(l, \' \');\n                    }\n                }\n            }\n        }\n        return args;\n    };\n\n    this._parseStateArgs = function(args) {\n        args = args.replace(/\\\\n\\s*$/, "");\n        args = args.replace(/=(?=["|{|\\[])/g, \'!:\');\n        args = args.replace(/([a-zA-Z0-9-_]*)!:/g, "\\"$1\\":");\n        args = this._removeArrayLabels(args);\n        args = "{" + args + "}";\n\n        var ret = {};\n\n        try {\n            ret = JSON.parse(args);\n        }\n        catch (e) {\n            log("JSON ERROR: " + e + "\\nJSON: " + args);\n        }\n\n        return ret;\n    };\n\n    this._getState = function(line) {\n        var m = line.match("^([a-z-]*),");\n\n        if (m && m.length == 2)\n            return m[1].trim();\n        m = line.match("^([a-z-]*)$");\n\n        if (m && m.length == 2)\n            return m[1].trim();\n\n        return undefined;\n    };\n\n    this._parseState = function(line) {\n        line = line.trim();\n\n        var gdb_state = {};\n        var state = this._getState(line);\n\n        if (state)\n            gdb_state.state = state;\n        var m = line.match("^[a-z-]*,(.*)");\n        if (m && m.length == 2)\n            gdb_state.status = this._parseStateArgs(m[1]);\n\n        return gdb_state;\n    };\n    this._cachedFrame = function(frame, frameNum, create) {\n        var depth = this.state.frames.length - 1 - frameNum;\n        var key = frame.file + frame.line + frame.func + depth;\n        if (!this.framecache.hasOwnProperty(key)) {\n            if (create)\n                this.framecache[key] = create;\n            else\n                return false;\n        }\n        return this.framecache[key];\n    };\n    this._updateState = function(signal, thread) {\n        if (this.clientReconnect) return;\n\n        if (signal) {\n            this.state.err = "signal";\n            this.state.signal = signal;\n        }\n        this.state.thread = (thread) ? thread : null;\n\n        if (signal && signal.name === "SIGSEGV")\n            this._flushVarCache();\n        else\n            this._updateThreadId();\n    };\n    this._flushVarCache = function() {\n        var keys = [];\n        for (var key in this.varcache) {\n            if (this.varcache.hasOwnProperty(key))\n                keys.push(key);\n        }\n        this.varcache = {};\n\n        function __flush(varobjs) {\n            if (varobjs.length == 0)\n                return this._updateThreadId();\n            var v = varobjs.pop();\n            this.issue("-var-delete", v, __flush.bind(this, varobjs));\n        }\n        __flush.call(this, keys);\n    };\n    this._updateThreadId = function() {\n        if (this.state.thread !== null)\n            return this._updateStack();\n\n        this.issue("-thread-info", null, function(state) {\n            this.state.thread = state.status["current-thread-id"];\n            this._updateStack();\n        }.bind(this));\n    };\n    this._updateStack = function() {\n        this.issue("-stack-list-frames", STACK_RANGE, function(state) {\n            this.state.frames = state.status.stack;\n            for (var i = 0, j = this.state.frames.length; i < j; i++) {\n                if (this.state.frames[i].func == "??" ||\n                    !this.state.frames[i].hasOwnProperty("fullname"))\n                {\n                    this.state.frames[i].exists = false;\n                    continue;\n                }\n\n                var file = this.state.frames[i].fullname;\n\n                if (!file) {\n                    continue;\n                }\n                if (!(file in this.memoized_files)) {\n                    this.memoized_files[file] = {\n                        exists: fs.existsSync(file)\n                    };\n                }\n                if (!this.memoized_files[file] || !this.memoized_files[file].exists && !this.state.err) {\n                    if (i != 0) continue;\n                    this.state = {};\n                    this.issue("-exec-finish");\n                    return;\n                }\n                this.state.frames[i].exists = this.memoized_files[file].exists;\n            }\n            this._updateStackArgs();\n        }.bind(this));\n    };\n    this._updateStackArgs = function() {\n        this.issue("-stack-list-arguments", "--simple-values " + STACK_RANGE,\n        function(state) {\n            var args = state.status[\'stack-args\'];\n            for (var i = 0; i < args.length; i++) {\n                if (this.state.frames[i])\n                    this.state.frames[i].args = args[i].args;\n            }\n            this._updateLocals();\n        }.bind(this));\n    };\n    this._updateLocals = function() {\n        function requestLocals(frame) {\n            if (this._cachedFrame(this.state.frames[frame], frame))\n                return frameLocals.call(this, frame, null, true);\n\n            var args = [\n                "--thread",\n                this.state.thread,\n                "--frame",\n                frame,\n                "--simple-values"\n            ].join(" ");\n            this.issue("-stack-list-locals", args, frameLocals.bind(this, frame));\n        }\n        function frameLocals(i, state, cache) {\n            var f = this.state.frames[i];\n            if (cache)\n                f.locals = this._cachedFrame(f, i).locals;\n            else\n                f.locals = state.status.locals;\n\n            if (--i >= 0)\n                requestLocals.call(this, i);\n            else\n                this._updateCachedVars();\n        }\n        requestLocals.call(this, this.state.frames.length - 1);\n    };\n    this._updateCachedVars = function() {\n        this.issue("-var-update", "--all-values *", function(reply) {\n            for (var i = 0; i < reply.status.changelist.length; i++) {\n                var obj = reply.status.changelist[i];\n                if (obj.in_scope != "true") {\n                    if (obj.in_scope == "invalid")\n                        this.issue("-var-delete", obj.name);\n                    continue;\n                }\n\n                if (!this.varcache[obj.name]) {\n                    console.log("FATAL: varcache miss for varobj " + obj.name);\n                    process.exit(1);\n                }\n\n                this.varcache[obj.name].value = obj.value;\n\n                if (obj.type_changed == "true")\n                    this.varcache[obj.name].type = obj.new_type;\n            }\n            for (var i = 0; i < this.state.frames.length; i++) {\n                var frame = this.state.frames[i];\n                var cache = this._cachedFrame(frame, i);\n                if (cache === false) continue;\n                frame.args = [];\n                for (var j = 0; j < cache.args.length; j++)\n                    frame.args.push(this.varcache[cache.args[j]]);\n\n                frame.locals = [];\n                for (var j = 0; j < cache.locals.length; j++)\n                    frame.locals.push(this.varcache[cache.locals[j]]);\n            }\n\n            this._fetchVars();\n        }.bind(this));\n    };\n    this._fetchVars = function() {\n        var newvars = [];\n\n        function __iterVars(vars, varstack, f) {\n            if (!vars) return;\n            for (var i = 0; i < vars.length; i++) {\n                var vari = vars[i];\n                if (!vari.type)\n                    continue; // TODO how to properly display this?\n                if (vari.type.slice(-1) === \'*\') {\n                    vari.address = parseInt(vari.value, 16);\n\n                    if (!vari.address) {\n                        vari.address = 0;\n                        vari.value = "NULL";\n                        continue;\n                    }\n                }\n                varstack.push({ frame: f, item: vari });\n            }\n        }\n\n        function __createVars(varstack) {\n            if (varstack.length == 0) {\n                this.issue("-stack-select-frame", "0");\n                client.send(this.state);\n                this.state = {};\n                return;\n            }\n\n            var obj = varstack.pop();\n\n            var item = obj.item;\n            var frame = obj.frame;\n            if (item.objname)\n                return __createVars.call(this, varstack);\n            var args = ["-", "*", item.name].join(" ");\n            this.issue("-var-create", args, function(item, state) {\n                item.objname = state.status.name;\n                item.numchild = state.status.numchild;\n                this.varcache[item.objname] = item;\n                frame.push(item.objname);\n\n                __createVars.call(this, varstack);\n            }.bind(this, item));\n        }\n        for (var i = 0; i < this.state.frames.length; i++) {\n            var frame = this.state.frames[i];\n            if (this._cachedFrame(frame, i) !== false) continue;\n\n            var cache = this._cachedFrame(frame, i, { args: [], locals: []});\n            __iterVars(frame.args, newvars, cache.args);\n            __iterVars(frame.locals, newvars, cache.locals);\n        }\n        __createVars.call(this, newvars);\n    };\n    this._handleRecordsResult = function(state) {\n        if (typeof state._seq === "undefined")\n            return;\n        if (this.callbacks[state._seq]) {\n            this.callbacks[state._seq](state);\n            delete this.callbacks[state._seq];\n        }\n        this.handleCommands();\n    };\n    this._handleRecordsAsync = function(state) {\n        if (typeof state.status === "undefined")\n            return;\n\n        if (state.state === "stopped")\n            this.running = false;\n\n        var cause = state.status.reason;\n        var thread = state.status[\'thread-id\'];\n\n        if (cause == "signal-received") {\n            var signal = {\n                name: state.status[\'signal-name\'],\n                text: state.status[\'signal-meaning\']\n            };\n            this._updateState(signal, thread);\n        }\n        else if (cause === "breakpoint-hit" || cause === "end-stepping-range" ||\n                 cause === "function-finished")\n            this._updateState(false, thread);\n        else if (cause === "exited-normally")\n            process.exit();\n    };\n    this._handleLine = function(line) {\n        if (line.trim() === "(gdb)")\n            return;\n        var line_split = line.match(/^([0-9]*)\\^(.*)$/);\n\n        var state = null;\n        var token = "^";\n        if (line_split) {\n            state = this._parseState(line_split[2]);\n            if (line_split[1])\n                state._seq = line_split[1];\n        }\n        else {\n            token = line[0];\n            state = this._parseState(line.slice(1));\n        }\n\n        log("GDB: " + line);\n        switch (token) {\n            case \'^\': this._handleRecordsResult(state);\n                      break;\n            case \'*\': this._handleRecordsAsync(state);\n                      break;\n            case \'+\': break; // Ongoing status information about slow operation\n            case \'=\': break; // Notify async output\n            case \'&\': break; // Log stream; gdb internal debug messages\n            case \'~\': break; // Console output stream\n            case \'@\': break; // Remote target output stream\n            default:\n        }\n    };\n    this.handleCommands = function() {\n        if (this.command_queue.length < 1)\n            return;\n        var command = this.command_queue.shift();\n\n        if (typeof command.command === "undefined") {\n            log("ERROR: Received an empty request, ignoring.");\n        }\n\n        if (typeof command._id !== "number")\n            command._id = "";\n\n        var id = command._id;\n        if (command.condition)\n            command.condition = command.condition.replace(/=(["|{|\\[])/g, "= $1");\n\n        switch (command.command) {\n            case \'run\':\n            case \'continue\':\n            case \'step\':\n            case \'next\':\n            case \'finish\':\n                if (this.started === false) {\n                    this.started = true;\n                    if (this.bp_set === false && BP_WARN)\n                        console.error("\\nWARNING: Could not set any",\n                            "breakpoints. Try deleting", BIN, "and",\n                            "re-compiling\\nyour code. Be sure to compile with",\n                            "-ggdb3.\\n");\n                }\n                this.clientReconnect = false;\n                this.running = true;\n                this.post(id, "-exec-" + command.command);\n                break;\n\n            case "var-set":\n                this.post(id, "-var-assign", command.name + " " + command.val);\n                break;\n\n            case "var-children":\n                var largs = ["--simple-values", command.name].join(" ");\n                this.issue("-var-list-children", largs, function(state) {\n                    var children = [];\n                    if (parseInt(state.status.numchild, 10) > 0)\n                        state.status.children.forEach(function(child) {\n                            child.objname = child.name;\n                            this.varcache[child.name] = child;\n                            children.push(child);\n                        }.bind(this));\n                    client.send({ _id: id, children: children, state: "done" });\n                }.bind(this));\n                break;\n\n            case "bp-change":\n                if (command.enabled === false)\n                    this.post(id, "-break-disable", command.id);\n                else if (command.condition)\n                    this.post(id, "-break-condition", command.id + " " + command.condition);\n                else\n                    this.post(id, "-break-enable", command.id);\n                break;\n\n            case "bp-clear":\n                this.post(id, "-break-delete", command.id);\n                break;\n\n            case "bp-set":\n                var args = [];\n                if (command.enabled === false)\n                    args.push("-d");\n\n                if (command.condition) {\n                    command.condition = command.condition.replace(/"/g, \'\\\\"\');\n                    args.push("-c");\n                    args.push(\'"\' + command.condition + \'"\');\n                }\n\n                args.push(\'"\' + command.fullpath + \':\' + (command.line + 1) + \'"\');\n\n                this.issue("-break-insert", args.join(" "), function(output) {\n                    this.bp_set = this.bp_set || (output.state === "done");\n\n                    output._id = id;\n                    client.send(output);\n                }.bind(this));\n                break;\n\n            case "bp-list":\n                this.post(id, "-break-list");\n                break;\n\n            case "eval":\n                var eargs = ["--thread", command.t, "--frame", command.f];\n                eargs.push(\'"\' + command.exp.replace(/"/g, \'\\\\"\') + \'"\');\n                this.post(id, "-data-evaluate-expression", eargs.join(" "));\n                break;\n\n            case "reconnect":\n                if (this.running) {\n                    this.clientReconnect = true;\n                    this.suspend();\n                    client.send({ _id: id, state: "running" });\n                }\n                else\n                    client.send({ _id: id, state: "stopped" });\n                break;\n\n            case "suspend":\n                this.suspend();\n                client.send({ _id: id, state: "stopped" });\n                break;\n\n            case "status":\n                if (this.running) {\n                    client.send({ _id: id, state: "running" });\n                }\n                else {\n                    client.send({ _id: id, state: "stopped" });\n                    this._updateState();\n                }\n                break;\n\n            case "detach":\n                client.cleanup();\n                this.issue("monitor", "exit", function() {\n                    log("shutdown requested");\n                    process.exit();\n                });\n                break;\n\n            default:\n                log("PROXY: received unknown request: " + command.command);\n        }\n    };\n}\ngdb = new GDB();\nexecutable = new Executable(); \nprocess.on("SIGINT", function() {\n    log("SIGINT");\n    if (!gdb || !gdb.running)\n        process.exit();\n});\n\nprocess.on("SIGHUP", function() {\n    log("Received SIGHUP");\n    process.exit();\n});\n\nprocess.on("exit", function() {\n    log("quitting!");\n    if (exit) {\n        if (exit.code !== null && exit.code > 0)\n           console.error(exit.proc, "terminated with code", exit.code);\n        else if (exit.signal !== null)\n            console.error(exit.proc, "killed with signal", exit.signal);\n    }\n    if (gdb) gdb.cleanup();\n    if (client) client.cleanup();\n    if (executable) executable.cleanup();\n    if (server && server.listening) server.close();\n    if (DEBUG) log_file.end();\n});\n\nprocess.on("uncaughtException", function(e) {\n    log("uncaught exception (" + e + ")" + "\\n" + e.stack);\n    process.exit(1);\n});\nvar server = net.createServer(function(c) {\n    if (client)\n        client.reconnect(c);\n    else\n        client = new Client(c);\n\n    client.connect(function(err) {\n        if (err) {\n            log("PROXY: Could not connect to client; " + err);\n        }\n        else {\n            log("PROXY: server connected");\n            client.send("connect");\n            client.flush();\n        }\n    });\n\n});\nserver.on("error", function(err) {\n    if (err.errno == "EADDRINUSE") {\n        console.log("It looks like the debugger is already in use!");\n        console.log("Try stopping the existing instance first.");\n    }\n    else {\n        console.log("server error");\n        console.log(err);\n    }\n    process.exit(1);\n});\nexecutable.spawn(function() {\n    gdb.spawn();\n    gdb.connect(function (reply, err) {\n        if (err) {\n            log(err);\n            process.exit();\n        }\n        if (PROXY.sock) {\n            fs.unlink(PROXY.sock, function(err) {\n                if (err && err.code != "ENOENT") console.error(err);\n                server.listen(PROXY.sock);\n            });\n        }\n        else\n            server.listen(PROXY.port, PROXY.host);\n    });\n});\n')


define("plugins/c9.ide.run.debug/debuggers/gdb/gdbdebugger",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0,settings.on("read",function(){settings.setDefaults("user/debug",[["autoshow","true"]])}),debug.registerDebugger(TYPE,plugin)


var shimPath="~/.c9/bin/c9gdbshim.js",shim=require("text!./shim.js")
fs.exists(shimPath,function(exists){exists||fs.writeFile(shimPath,shim,"utf8",function(err){if(err)return debug.unregisterDebugger(TYPE,plugin),
console.log("Error writing gdb shim: "+err)})})}function buildVariable(variable,scope){if(null!=variable)return new Variable({
ref:variable.objname?variable.objname:variable.name,name:variable.exp?variable.exp:variable.name,value:variable.value,
type:variable.type,children:variable.numchild&&variable.numchild>0,properties:null,scope:scope})}function buildScopeVariables(frame_vars,scope_index,frame_index,vars){
for(var scope=new Scope({index:scope_index,type:SCOPES[scope_index],frameIndex:frame_index}),i=0,j=vars.length;i<j;i++)frame_vars.push(buildVariable(vars[i],scope))

}function buildFrame(thread,topIndex,frame,i){var variables=[]
buildScopeVariables(variables,0,i,frame.args),"undefined"!=typeof frame.locals&&buildScopeVariables(variables,1,i,frame.locals)


var fullpath=frame.fullname?frame.fullname:frame.from?frame.from:c9.workspaceDir+"/?",file=Path.basename(fullpath),relative="/"+(0==fullpath.indexOf(c9.workspaceDir)?Path.relative(c9.workspaceDir,fullpath):fullpath),line=parseInt(frame.line,10)


return line=isNaN(line)?0:line-1,new Frame({index:i,name:frame.func,column:0,id:file+":"+frame.func+i+line,
line:line,script:file,path:relative,sourceId:file,thread:thread,istop:i===topIndex,variables:variables
})}function processHalt(content){if("killed"===content.err)return detach()
if("corrupt"===content.err)return showError("GDB has detected a corrupt execution environment and has shut down!"),
detach()
var frames=content.frames,topIndex=Math.max(0,frames.findIndex(function(frame){return frame.exists}))


stack=frames.map(buildFrame.bind(this,content.thread,topIndex))
var topFrame=stack[topIndex]
setState("stopped"),emit("frameActivate",{frame:topFrame})
var frameObj={frame:topFrame,frames:stack}
if("signal"===content.err&&"SIGINT"!==content.signal.name){var e="Process received "+content.signal.name+": "+content.signal.text


showError(e),emit("exception",frameObj,new Error(content.signal.name))}else emit("break",frameObj)
1==stack.length&&btnStepOut.setAttribute("disabled",!0)}function sendExecutionCommand(command,callback){
proxy.sendCommand(command,{},function(err,reply){return err?callback&&callback(err):(setState(reply.state),
void(callback&&callback()))})}function setState(_state){state!==_state&&(state=_state,emit("stateChange",{
state:state}))}function getProxySource(process){var socketpath=Path.join(c9.home,"/.c9/gdbdebugger.socket")


return{source:null,socketpath:process.runner[0].socketpath||socketpath,retryInverval:process.runner[0].retryInterval||300,
retries:process.runner[0].retryCount||1e3}}function attach(s,reconnect,callback){proxy&&proxy.detach(),
socket=s,socket.on("back",function(){reconnectSync()},plugin),socket.on("error",function(err){console.log("gdbdebugger err: ",err),
emit("error",err)},plugin),proxy=new GDBProxyService(socket,processHalt),proxy.attach(function(){emit("connect"),
reconnect?reconnectSync(callback):sync(!0,callback)}),settings.getBool("user/debug/@autoshow")&&panels.activate("debugger"),
btnResume=debug.getElement("btnResume"),btnStepOver=debug.getElement("btnStepOver"),btnStepInto=debug.getElement("btnStepInto"),
btnStepOut=debug.getElement("btnStepOut"),btnSuspend=debug.getElement("btnSuspend")}function detach(){
proxy&&proxy.detach(),emit("frameActivate",{frame:null}),setState(null),socket=null,attached=!1,proxy=null,
btnResume.$ext.style.display="inline-block",btnSuspend.$ext.style.display="none",btnSuspend.setAttribute("disabled",!1),
btnStepOut.setAttribute("disabled",!1),btnStepInto.setAttribute("disabled",!1),btnStepOver.setAttribute("disabled",!1),
emit("detach")}function sync(begin,callback){var localBkpts=emit("getBreakpoints")
listBreakpoints(function(err,remoteBkpts){if(err)return callback(err)
for(var to_add=[],synced=[],i=0,j=localBkpts.length;i<j;i++){for(var bp=localBkpts[i],missing=!0,x=0,y=remoteBkpts.length;x<y;x++){
var rbp=remoteBkpts[x]
if(bp.text==rbp.text&&bp.line==rbp.line&&bp.condition==rbp.condition){bp.id=rbp.id,remoteBkpts.splice(x,1),
missing=!1
break}}missing?to_add.push(bp):synced.push(bp)}manyBreakpoints(to_add,setBreakpoint,function(added,fail){
synced=synced.concat(added),manyBreakpoints(remoteBkpts,clearBreakpoint,function(cleared,clrfail){synced=synced.concat(clrfail),
attached=!0,emit("attach",{breakpoints:synced}),begin?resume(callback):sendExecutionCommand("status",callback)

})})})}function getSources(callback){var sources=[new Source]
callback(null,sources),emit("sources",{sources:sources})}function getSource(source,callback){callback(null,new Source)

}function getFrames(callback,silent){emit("getFrames",{frames:stack}),callback(null,stack)}function getScope(frame,scope,callback){
callback(null,scope.variables,scope,frame)}function getProperties(variable,callback){var args={name:variable.ref
}
proxy.sendCommand("var-children",args,function(err,reply){if(err)return callback&&callback(err)
if("undefined"==typeof reply.children)return callback&&callback(new Error("No children"))
var children=[]
reply.children.forEach(function(child){children.push(buildVariable(child,variable.scope))}),variable.properties=children,
callback&&callback(null,children,variable)})}function stepInto(callback){sendExecutionCommand("step",callback)

}function stepOver(callback){sendExecutionCommand("next",callback)}function stepOut(callback){stack.length>1&&sendExecutionCommand("finish",callback)

}function resume(callback){sendExecutionCommand("continue",callback)}function suspend(callback){proxy.sendCommand("suspend",{},function(err){
return err?callback&&callback(err):(emit("suspend"),void(callback&&callback()))})}function reconnectSync(callback){
callback||(callback=function(){}),proxy.sendCommand("reconnect",{},function(err,reply){var restart=!err&&"running"==reply.state


sync(restart,callback)})}function evaluate(expression,frame,global,disableBreak,callback){var args={exp:expression,
f:frame&&null!=frame.index?frame.index:0,t:frame&&null!=frame.thread?frame.thread:1}
proxy.sendCommand("eval",args,function(err,reply){return err?callback(new Error("No value")):"undefined"==typeof reply.status?callback(new Error(reply.status.msg)):void callback(null,new Variable({
name:expression,value:reply.status.value,type:void 0,children:!1}))})}function setVariable(variable,parents,value,frame,callback){
var args={name:variable.ref,val:value}
proxy.sendCommand("var-set",args,function(err,reply){return err?callback&&callback(err):void(callback&&callback(null,variable))

})}function setBreakpoint(bp,callback){bp.data.fullpath=Path.join(c9.workspaceDir,bp.data.path),proxy.sendCommand("bp-set",bp.data,function(err,reply){
return err?callback&&callback(err):reply.status&&reply.status.bkpt?(bp.id=reply.status.bkpt.number,void(callback&&callback(null,bp,{}))):callback&&callback(new Error("Can't set breakpoint"))

})}function manyBreakpoints(breakpoints,command,callback){function _setBPs(breakpoints,failed,callback,i){
return i==breakpoints.length?void callback(breakpoints,failed):void command(breakpoints[i],function(err,bp){
err?(failed.push(breakpoints.splice(i,1)),_setBPs(breakpoints,failed,callback,i)):(breakpoints[i].id=bp.id,
_setBPs(breakpoints,failed,callback,i+1))})}_setBPs(breakpoints,[],callback,0)}function changeBreakpoint(bp,callback){
proxy.sendCommand("bp-change",bp.data,function(err){callback&&callback(err,bp)})}function clearBreakpoint(bp,callback){
proxy.sendCommand("bp-clear",bp.data,function(err){callback&&callback(err,bp)})}function listBreakpoints(callback){
proxy.sendCommand("bp-list",{},function(err,reply){if(err)return callback&&callback(err)
var bps=reply.status.BreakpointTable.body.map(function(bp){return new Breakpoint({id:bp.number,path:bp.fullname,
line:parseInt(bp.line,10)-1,ignoreCount:bp.hasOwnProperty("ignore")?bp.ignore:void 0,condition:bp.hasOwnProperty("cond")?bp.cond:void 0,
enabled:"y"==bp.enabled,text:bp.file})})
callback(null,bps)})}function serializeVariable(variable,callback){callback(variable.value)}var Plugin=imports.Plugin,c9=imports.c9,debug=imports["debugger"],fs=imports.fs,panels=imports.panels,settings=imports.settings,showError=imports["dialog.error"].show,Frame=debug.Frame,Source=debug.Source,Breakpoint=debug.Breakpoint,Variable=debug.Variable,Scope=debug.Scope,Path=require("path"),GDBProxyService=require("./lib/GDBProxyService"),plugin=new Plugin("CS50",main.consumes),emit=plugin.getEmitter()


emit.setMaxListeners(1e3)
var state,socket,stack,btnResume,btnSuspend,btnStepOver,btnStepInto,btnStepOut,TYPE="gdb",attached=!1,proxy=null,SCOPES=["Arguments","Locals"],loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){debug.unregisterDebugger(TYPE,plugin),state=null,socket=null,reader=null,
stack=null,proxy=null,btnResume=btnSuspend=btnStepOver=btnStepInto=btnStepOut=null,loaded=!1,attached=!1

}),plugin.freezePublicAPI({features:{scripts:!1,conditionalBreakpoints:!0,liveUpdate:!1,updateWatchedVariables:!0,
updateScopeVariables:!0,setBreakBehavior:!1,executeCode:!0},type:TYPE,get state(){return state},get attached(){
return attached},get breakOnExceptions(){return!1},get breakOnUncaughtExceptions(){return!1},_events:["break","stateChange","exception","frameActivate","getFrames","sources","sourcesCompile"],
attach:attach,detach:detach,getSources:getSources,getSource:getSource,getFrames:getFrames,getScope:getScope,
getProperties:getProperties,stepInto:stepInto,stepOver:stepOver,stepOut:stepOut,resume:resume,suspend:suspend,
evaluate:evaluate,setScriptSource:function(){},setBreakpoint:setBreakpoint,changeBreakpoint:changeBreakpoint,
clearBreakpoint:clearBreakpoint,listBreakpoints:listBreakpoints,setVariable:setVariable,restartFrame:function(){},
serializeVariable:serializeVariable,setBreakBehavior:function(){},getProxySource:getProxySource}),register(null,{
gdbdebugger:plugin})}return main.consumes=["Plugin","c9","debugger","dialog.error","fs","panels","settings"],
main.provides=["gdbdebugger"],main})


define("stream",[],function(require,exports,module){function Stream(){}var events=require("events")
exports.Stream=Stream,Stream.prototype=Object.create(events.EventEmitter.prototype,{constructor:{value:Stream
}}),Stream.prototype.pipe=function(dest,options){function ondata(chunk){dest.writable&&!1===dest.write(chunk)&&source.pause&&source.pause()

}function ondrain(){source.readable&&source.resume&&source.resume()}function onend(){didOnEnd||(didOnEnd=!0,
dest._pipeCount--,cleanup(),dest._pipeCount>0||dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,
dest._pipeCount--,cleanup(),dest._pipeCount>0||dest.destroy())}function onerror(er){if(cleanup(),0===this.listeners("error").length)throw er

}function cleanup(){source.removeListener("data",ondata),dest.removeListener("drain",ondrain),source.removeListener("end",onend),
source.removeListener("close",onclose),source.removeListener("error",onerror),dest.removeListener("error",onerror),
source.removeListener("end",cleanup),source.removeListener("close",cleanup),dest.removeListener("end",cleanup),
dest.removeListener("close",cleanup)}var source=this
source.on("data",ondata),dest.on("drain",ondrain),dest._isStdio||options&&options.end===!1||(dest._pipeCount=dest._pipeCount||0,
dest._pipeCount++,source.on("end",onend),source.on("close",onclose))
var didOnEnd=!1
return source.on("error",onerror),dest.on("error",onerror),source.on("end",cleanup),source.on("close",cleanup),
dest.on("end",cleanup),dest.on("close",cleanup),dest.emit("pipe",source),dest}})


define("plugins/c9.ide.run.debug.xdebug/lib/util",[],function(require,exports,module){"use strict"
exports.parseXml=function(str){var parser=new DOMParser,xmlDoc=parser.parseFromString(str,"application/xml"),errors=xmlDoc.getElementsByTagName("parsererror"),error=errors&&errors[0]


if(error)throw new Error("Invalid XML message: "+error.innerText)
return xmlDoc},exports.xmlToObject=function xmlToObject(xml){function parseText(sValue){return/^\s*$/.test(sValue)?null:/^(?:true|false)$/i.test(sValue)?"true"===sValue.toLowerCase():isFinite(sValue)?parseFloat(sValue):sValue

}if("string"==typeof xml)xml=exports.parseXml(xml)
else if(!(xml instanceof Node))throw new TypeError("Expected xml to be string or Node")
var result={},length=0,text=""
if(xml.hasAttributes&&xml.hasAttributes())for(result={},length;length<xml.attributes.length;length++){
var attrib=xml.attributes.item(length)
result["@"+attrib.name.toLowerCase()]=parseText(attrib.value.trim())}if(xml.hasChildNodes())for(var i=0;i<xml.childNodes.length;i++){
var node=xml.childNodes.item(i)
if(4===node.nodeType)text+=node.nodeValue
else if(3===node.nodeType)text+=node.nodeValue.trim()
else if(1===node.nodeType&&!node.prefix){0===length&&(result={})
var name=node.nodeName.toLowerCase(),children=xmlToObject(node)
result.hasOwnProperty(name)?(result[name].constructor!==Array&&(result[name]=[result[name]]),result[name].push(children)):(result[name]=children,
length++)}}return text&&(length>0?result.$=parseText(text):result=parseText(text)),result},exports.base64Decode=function(str){
return str?window.atob(str):""},exports.base64Encode=function(data){return window.btoa(data)}})


define("plugins/c9.ide.run.debug.xdebug/lib/DbgpSession",[],function(require,exports,module){"use strict"


function noop(){}function toArray(value){return null==value?[]:Array.isArray(value)?value:[value]}function DbgpSession(){
Stream.call(this),this.writable=!0,this.status="starting",this.initialized=!1,this._seq=0,this._callbacks={}


var session=this
this.on("stopping",function(){session.end()})}module.exports=DbgpSession
var inherits=require("util").inherits,Stream=require("stream").Stream,base64Decode=(require("./util").xmlToObject,
require("./util").base64Decode)
inherits(DbgpSession,Stream),DbgpSession.prototype.sendCommand=function(command,args,data,callback){var seq=this._seq++


return this.emit("data",{seq:seq,command:command,args:args,data:data}),this._callbacks[""+seq]=callback,
seq},DbgpSession.prototype.write=function(xml){var type=Object.keys(xml)[0]
switch(type){case"init":return this._handleInit(xml[type])
case"response":return this._handleResponse(xml[type])
default:this.emit("error",new Error("Unhandled message type: "+type))}},DbgpSession.prototype.end=function(){
this.emit("end")},DbgpSession.prototype._handleInit=function(init){if(this.initialized)throw new Error("Cannot initialize debugger session more than once")


this.protocolVersion=init["@protocol_version"],this.appId=init["@appid"],this.ideKey=init["@idekey"],
this.sessionId=init["@session"],this.threadId=init["@thread"],this.parentAppId=init["@parent"],this.language=init["@language"],
this.fileURI=init["@fileuri"],this.engine={name:init.engine&&init.engine.$,version:init.engine&&init.engine["@version"],
info:{}}
for(var key in init)"@"!==key[0]&&"engine"!==key&&(this.engine.info[key]=init[key])
var _self=this
this.getStatus(function(err){return err?void _self.emit("error",err):void _self.emit("init")}),this.initialized=!0

},DbgpSession.prototype._handleResponse=function(response){var command=response["@command"],seq=response["@transaction_id"]


command&&this._handleCommandResponse(command,seq,response)
var status=response["@status"]
response["@reason"]
status&&this._handleStatus(status)},DbgpSession.prototype._handleCommandResponse=function(command,seq,response){
var callback=this._callbacks[seq]
if(delete this._callbacks[seq],response.error){var errorCode=response.error["@code"],errorMessage=response.error.message,err=new Error(errorMessage||"Debugger error")


return err.code=errorCode,void(callback&&callback(err,{}))}callback&&callback(null,response)},DbgpSession.prototype._handleStatus=function(status){
this.status!==status&&(this.status=status,this.emit("status",status),this.emit(status))},DbgpSession.prototype.getStatus=function(callback){
callback=callback||noop,this.sendCommand("status",null,null,callback)},DbgpSession.prototype.eval=function(script,callback){
callback=callback||noop
var _self=this,params={l:script.length}
_self.sendCommand("eval",params,script,function(err,response){callback(err,response.property)})},DbgpSession.prototype.getSource=function(fileURI,callback){
callback=callback||noop
var _self=this,params={f:fileURI}
_self.sendCommand("source",params,null,function(err,response){if(err)return callback(err)
var source=response.$
"base64"===response["@encoding"]&&(source=base64Decode(source)),callback(null,source)})},DbgpSession.prototype.run=function(callback){
this._continue("run",callback)},DbgpSession.prototype.stepInto=function(callback){this._continue("step_into",callback)

},DbgpSession.prototype.stepOver=function(callback){this._continue("step_over",callback)},DbgpSession.prototype.stepOut=function(callback){
this._continue("step_out",callback)},DbgpSession.prototype.stop=function(callback){this._continue("stop",callback)

},DbgpSession.prototype._continue=function(command,callback){callback=callback||noop,this._handleStatus("running"),
this.sendCommand(command,null,null,noop),callback()},DbgpSession.prototype.getFeature=function(feature,callback){
callback=callback||noop
var _self=this,params={n:feature}
_self.sendCommand("feature_get",params,null,function(err,response){return err?callback(err):1!==response["@supported"]?callback(new Error("No support for debugger feature: "+feature)):void callback(null,response.$)

})},DbgpSession.prototype.setFeature=function(feature,value,callback){callback=callback||noop
var _self=this,params={n:feature,v:value}
_self.sendCommand("feature_set",params,null,function(err,response){return err?callback(err):1!==response["@success"]?callback(new Error("Could not set debugger feature: "+feature)):void callback()

})},DbgpSession.prototype.getStackFrames=function(stackDepth,callback){callback=callback||noop
var _self=this,params={d:stackDepth}
_self.sendCommand("stack_get",params,null,function(err,response){callback(err,toArray(response.stack))

})},DbgpSession.prototype.getContextProperties=function(stackDepth,contextId,callback){callback=callback||noop


var _self=this,params={d:stackDepth,c:contextId}
_self.setFeature("max_depth",0,function(){_self.sendCommand("context_get",params,null,function(err,response){
callback(err,toArray(response.property))})})},DbgpSession.prototype.getProperty=function(propertyName,stackDepth,contextId,callback){
callback=callback||noop
var _self=this,params={d:stackDepth,c:contextId,n:propertyName}
_self.setFeature("max_depth",0,function(){_self.sendCommand("property_get",params,null,function(err,response){
if(err)return callback(err)
var property=response.property
_self.sendCommand("property_value",params,null,function(err,response){property.$=response.$,callback(err,property)

})})})},DbgpSession.prototype.setPropertyValue=function(propertyName,stackDepth,contextId,value,callback){
callback=callback||noop
var _self=this,params={d:stackDepth,c:contextId,n:propertyName}
_self.sendCommand("property_set",params,value,function(err,response){return err?callback(err):1!==response["@success"]?callback(new Error("Could not set property value")):void callback()

})},DbgpSession.prototype.getPropertyChildren=function(propertyName,stackDepth,contextId,callback){callback=callback||noop


var _self=this,params={d:stackDepth,c:contextId,n:propertyName}
_self.setFeature("max_depth",1,function(){_self.sendCommand("property_get",params,null,function(err,response){
callback(err,toArray(response.property.property))})})},DbgpSession.prototype.setBreakpoint=function(fileURI,options,callback){
callback=callback||noop
var _self=this,params={t:"conditional",s:options.enabled!==!1?"enabled":"disabled",f:fileURI,n:options.line,
h:options.ignoreCount},condition=options.condition||"true"
_self.sendCommand("breakpoint_set",params,condition,function(err,response){callback(err,response["@id"])

})},DbgpSession.prototype.updateBreakpoint=function(breakpointId,options,callback){callback=callback||noop


var _self=this,params={d:breakpointId}
null!=options.line&&(params.n=options.line),null!=options.enabled&&(params.s=options.enabled!==!1?"enabled":"disabled"),
null!=options.ignoreCount&&(params.h=options.ignoreCount)
var condition
null!=options.condition&&(condition=options.condition),_self.sendCommand("breakpoint_update",params,condition,function(err,response){
callback(err)})},DbgpSession.prototype.removeBreakpoint=function(breakpointId,callback){callback=callback||noop


var _self=this,params={d:breakpointId}
_self.sendCommand("breakpoint_remove",params,null,function(err,response){callback(err)})}})


define("plugins/c9.ide.run.debug.xdebug/lib/DbgpStreamReader",[],function(require,exports,module){"use strict"


function DbgpStreamReader(){Stream.call(this),this.writable=!0,this._buffer=""}var inherits=require("util").inherits,Stream=require("stream").Stream


module.exports=DbgpStreamReader,inherits(DbgpStreamReader,Stream),DbgpStreamReader.prototype.write=function(chunk){
this._buffer+=chunk
var parts=this._buffer.split(/\u0000/g)
this._buffer=parts.slice(parts.length-(parts.length-1)%2-1).join("\0"),parts=parts.slice(0,parts.length-(parts.length-1)%2-1)


for(var i=0;i<parts.length;i+=2){var len=parseInt(parts[i],10),data=parts[i+1]
if(len!==data.length){var err=new Error("Invalid chunk: data length does not match header")
return void this.emit("error",err)}this.emit("data",data)}},DbgpStreamReader.prototype.end=function(){
this.emit("end")}})


define("plugins/c9.ide.run.debug.xdebug/lib/DbgpStreamWriter",[],function(require,exports,module){"use strict"


function DbgpStreamWriter(){Stream.call(this),this.writable=!0}function escapeKey(key){if(!key.match(/^[a-z]+$/))throw new Error("Argument key invalid format")


return key}function escapeValue(value){return JSON.stringify(value)}module.exports=DbgpStreamWriter
var inherits=require("util").inherits,Stream=require("stream").Stream,base64Encode=require("./util").base64Encode


inherits(DbgpStreamWriter,Stream),DbgpStreamWriter.prototype.write=function(data){try{this.emit("data",this.format(data))

}catch(err){this.emit("error",err)}},DbgpStreamWriter.prototype.format=function(data){if("object"!=typeof data)throw new TypeError("Expected data to be an object")


if(!data.seq&&0!==data.seq)throw new TypeError("Expected data to contain seq")
if(!data.command)throw new TypeError("Expected data to contain command")
var parts=[data.command]
if(parts.push("-i"),parts.push(escapeValue(data.seq)),data.args)for(var key in data.args){var value=data.args[key]

;["",null,void 0].indexOf(value)===-1&&(parts.push("-"+escapeKey(key)),parts.push(escapeValue(value)))

}return data.data&&(parts.push("--"),parts.push(base64Encode(data.data))),parts.join(" ")+"\0"},DbgpStreamWriter.prototype.end=function(){
this.emit("end")}})


define("plugins/c9.ide.run.debug.xdebug/lib/XmlStreamReader",[],function(require,exports,module){"use strict"


function XmlStreamReader(){Stream.call(this),this.writable=!0}module.exports=XmlStreamReader
var inherits=require("util").inherits,Stream=require("stream").Stream,parseXml=require("./util").parseXml,xmlToObject=require("./util").xmlToObject


inherits(XmlStreamReader,Stream),XmlStreamReader.prototype.write=function(data){var xml
try{xml=parseXml(data)}catch(err){return void this.emit("error",err)}var obj=xmlToObject(xml)
return this.emit("data",obj),!0},XmlStreamReader.prototype.end=function(){this.emit("end")}})


define("plugins/c9.ide.run.debug.xdebug/lib/SocketStream",[],function(require,exports,module){"use strict"


function SocketStream(socket){function onData(data){data!==RECONNECT_PAYLOAD&&stream.emit("data",data)

}function onAway(){stream._away=!0}function onBack(){stream._away=!1,stream.write()}function onEnd(err){
err?stream.emit("error",err):stream.emit("end"),stream.emit("close",null!=err)}function onError(err){
stream.emit("error",err)}Stream.call(this)
var stream=this
socket.on("data",onData),socket.on("away",onAway),socket.on("back",onBack),socket.on("end",onEnd),socket.on("err",onError),
socket.on("error",onError),this._socket=socket,this._buffer="",this._away=!1,this.writable=!0}module.exports=SocketStream


var inherits=require("util").inherits,Stream=require("stream").Stream,RECONNECT_PAYLOAD="Content-Length:0\r\n\r\n"


inherits(SocketStream,Stream),SocketStream.prototype.write=function(data){return this._away||this._socket.connected!==this._socket.CONNECTED?(this._buffer+=data,
!1):(this._buffer&&(this._socket.send(this._buffer),this._buffer="",this.emit("drain")),null!==data&&this._socket.send(data),
!0)},SocketStream.prototype.connect=function(){function onConnect(){_self.emit("connect")}var _self=this


this._socket.connected?onConnect():(this._socket.once("connect",onConnect),this._socket.connect())},SocketStream.prototype.end=function(data){
data&&this._socket.send(data),this._socket.close()}})


define("plugins/c9.ide.run.debug.xdebug/lib/DbgpClient",[],function(require,exports,module){"use strict"


function DbgpClient(){EventEmitter.call(this),this.listening=!1}module.exports=DbgpClient
var inherits=require("util").inherits,EventEmitter=require("events").EventEmitter,DbgpSession=require("./DbgpSession"),DbgpStreamReader=require("./DbgpStreamReader"),DbgpStreamWriter=require("./DbgpStreamWriter"),XmlStreamReader=require("./XmlStreamReader"),SocketStream=require("./SocketStream")


inherits(DbgpClient,EventEmitter),DbgpClient.prototype.listen=function(socket){function onError(err){
client.emit("error",err)}function onConnect(){var dbgpWriter=new DbgpStreamWriter,dbgpReader=new DbgpStreamReader,xmlReader=new XmlStreamReader,session=new DbgpSession(client.ideKey)


socketStream.pipe(dbgpReader).pipe(xmlReader).pipe(session),session.pipe(dbgpWriter).pipe(socketStream),
session.on("init",function(){client.emit("session",session)}),client.listening=!0,client.emit("listening")

}function onEnd(){socketStream.end()}function onClose(){client.listening=!1,client.emit("close")}var client=this,socketStream=new SocketStream(socket)


this.socketStream=socketStream,socketStream.on("error",onError),socketStream.on("connect",onConnect),
client.removeAllListeners("end"),client.on("end",onEnd),socketStream.on("close",onClose),socketStream.connect()

},DbgpClient.prototype.close=function(){this.emit("end")}})


define("text!plugins/c9.ide.run.debug.xdebug/netproxy.js",[],'var net = require("net");\n\nvar debug = function() {};\n\nvar host = "{HOST}" || "127.0.0.1";\nvar port = parseInt("{PORT}", 10) || 9000;\n\nvar browserBuffer = [];\nvar debugBuffer = [];\nvar browserClient;\nvar debugClient;\n\nvar log = console.log;\n\nconsole.warn = console.log = function() {\n    return console.error.apply(console, arguments);\n};\nfunction send() {\n    log.apply(console, arguments);\n}\nvar browserServer = net.createServer(function(client) {\n    debug("browserClient::connect");\n\n    if (browserClient)\n        browserClient.end();\n\n    browserClient = client;\n    debugBuffer = [];\n\n    browserClient.on("end", function() {\n        debug("browserClient::end");\n        process.exit(0);\n        browserClient = null;\n    });\n\n    browserClient.on("data", function(data) {\n        debug("browserClient::data:", data.toString("utf8"));\n        if (debugClient) {\n            debugClient.write(data);\n        } else {\n            debugBuffer.push(data);\n        }\n    });\n\n    if (browserBuffer.length) {\n        browserBuffer.forEach(function(data) {\n            browserClient.write(data);\n        });\n        browserBuffer = [];\n    }\n});\n\nbrowserServer.listen(port + 1, host, function() {\n    debug("netproxy listening for browser on port " + (port + 1));\n    start();\n});\n\nbrowserServer.on("error", function(err) {\n    console.log(err);\n    process.exit(0);\n});\nvar debugServer = net.createServer(function(client) {\n    debug("debugClient::connect");\n\n    if (debugClient)\n        debugClient.end();\n\n    debugClient = client;\n\n    debugBuffer = [];\n    browserBuffer = [];\n\n    debugClient.on("end", function() {\n        debug("debugClient::end");\n        process.exit(0);\n    });\n\n    debugClient.on("data", function(data) {\n        debug("debugClient::data:", data.toString("utf8"));\n        if (browserClient) {\n            browserClient.write(data);\n        } else {\n            browserBuffer.push(data);\n        }\n    });\n\n    if (debugBuffer.length) {\n        debugBuffer.forEach(function(data) {\n            debugClient.write(data);\n        });\n        debugBuffer = [];\n    }\n});\n\ndebugServer.listen(port, host, function() {\n    debug("netproxy listening for debugger on port " + port);\n    start();\n});\n\ndebugServer.on("error", function(err) {\n    console.log(err);\n    process.exit(0);\n});\nvar I = 0;\nfunction start() {\n    if (++I == 2)\n        send("\xdf");\n}\n')


define("plugins/c9.ide.run.debug.xdebug/xdebug",[],function(require,exports,module){function main(options,imports,register){
function load(){debug.registerDebugger(TYPE,plugin)}function unload(){detach(),socket=client=session=state=null,
attached=!1,breakOnExceptions=!1,breakOnUncaughtExceptions=!1,debug.unregisterDebugger(TYPE,plugin)}function onBreak(){
plugin.getFrames(function(err,frames){emit("frameActivate",{frame:frames[0]}),emit("break",{frame:frames[0],
frames:frames}),setState("stopped")})}function onStatus(status){switch(status){case"starting":case"stopping":
case"stopped":setState(null)
break
case"running":setState("running")
break
case"break":break
default:throw new TypeError("Unknown debugger status: "+status)}}function formatType(property){return"uninitialized"===property["@type"]?null:"object"===property["@type"]&&"Closure"===property["@classname"]?"callable":property["@type"]

}function formatValue(property,value){switch("base64"===property["@encoding"]&&(value=base64Decode(value)),
property["@type"]){case"null":return property["@type"]
case"array":return"array("+property["@numchildren"]+")"
case"bool":return value?"true":"false"
case"int":return parseInt(value,10)+""
case"float":return parseFloat(value)+""
case"string":return JSON.stringify(value)
case"object":return"Closure"===property["@classname"]?"callable":property["@classname"]
default:return value}}function createVariable(property){var children=property.property
return children&&!Array.isArray(children)&&(children=[children]),new Variable({name:property["@name"],
value:formatValue(property,property.$),type:formatType(property),ref:property["@fullname"],children:!!property["@children"],
properties:children&&children.map(function(child){return createVariable(child)})})}function findScope(variable){
if(variable.scope)return variable.scope
if(variable.parent)return findScope(variable.parent)
throw new Error("Could not find scope in variable or parents")}function setState(state_){state!==state_&&(state=state_,
emit("stateChange",{state:state}))}function filesystemPath(workspacePath){return path.join(c9.workspaceDir,path.relative("/",workspacePath))

}function workspacePath(filesystemPath){return path.resolve("/",path.relative(c9.workspaceDir,filesystemPath))

}function attach(socket_,reconnect,callback){socket=socket_,client=new DbgpClient,client.on("session",function(session_){
session=session_,session.setFeature("max_depth",0),session.setFeature("max_data",1024),session.setFeature("max_children",150),
session.on("status",onStatus),session.on("break",onBreak),setBreakpoints(emit("getBreakpoints"),function(breakpoints){
attached||(attached=!0,emit("attach",{breakpoints:breakpoints})),callback(),session.run()})}),client.on("error",function(err){
emit("error",err)},plugin),client.once("listening",function(){emit("connect")},plugin),client.listen(socket),
socket.on("end",function(){setState("running")}),socket.on("connect",function(){client&&!client.listening&&client.listen(socket)

})}function detach(){session&&session.stop(),client&&client.close(),socket&&socket.close(),emit("frameActivate",{
frame:null}),setState(null),socket=null,client=null,session=null,attached=!1,emit("detach")}function getSources(callback){
callback&&callback(new Error("Not implemented"))}function getSource(source,callback){session.getSource(source.id,callback)

}function getFrames(callback,silent){session.getStackFrames(null,function(err,data){if(err)return callback(err)


var frames=data.map(function(frame){var scriptPath,scriptName,scriptURI=frame["@filename"],parts=url.parse(scriptURI)


"file:"===parts.protocol?(scriptPath=workspacePath(parts.pathname),scriptName=path.basename(scriptPath)):(scriptPath=scriptURI,
scriptName=scriptURI)
var level=frame["@level"],line=frame["@lineno"]-1
return new Frame({index:level,name:frame["@where"],line:line,column:0,id:null,script:scriptName,path:scriptPath,
sourceId:scriptURI,scopes:[new Scope({index:0,type:"Locals",frameIndex:level}),new Scope({index:1,type:"Superglobals",
frameIndex:level})],variables:[],istop:0===level})})
emit("getFrames",{frames:frames}),callback(null,frames)})}function getScope(frame,scope,callback){session.getContextProperties(frame.index,scope.index,function(err,data){
if(err)return callback(err)
var variables=data.map(function(prop){var result=createVariable(prop)
return result.scope=scope,result})
scope.variables=variables,callback(null,variables,scope,frame)})}function getProperties(variable,callback){
var scope=findScope(variable)
session.getPropertyChildren(variable.ref,scope.frameIndex,scope.index,function(err,data){if(err)return callback(err)


var properties=data.map(function(prop){var result=createVariable(prop)
return result.parent=variable,result})
variable.properties=properties,callback(null,properties,variable)})}function stepInto(callback){session.stepInto(callback)

}function stepOver(callback){session.stepOver(callback)}function stepOut(callback){session.stepOut(callback)

}function resume(callback){session.run(callback)}function suspend(callback){callback&&callback(new Error("FIXME: command 'break' is not supported by PHP Xdebug"))

}function evaluate(expression,frame,global,disableBreak,callback){return expression=expression.trim(),
"stopped"!==state?callback(null,new Variable({name:expression})):void session.eval(expression,function(err,data){
if(err)return callback(err)
var variable=createVariable(data)
variable.name=expression,variable.ref=expression,variable.scope=frame.scopes[0],callback(null,variable)

})}function setBreakpoint(bp,callback){if(bp.path){var path=filesystemPath(bp.path),options={line:bp.line+1,
enabled:bp.enabled,condition:bp.condition,ignoreCount:bp.ignoreCount}
session.setBreakpoint(path,options,function(err,breakpointId){err||(bp.id=breakpointId),callback&&callback(err,bp)

})}}function changeBreakpoint(bp,callback){var options={line:bp.line+1,enabled:bp.enabled,condition:bp.condition,
ignoreCount:bp.ignoreCount}
session.updateBreakpoint(bp.id,options,function(err){callback&&callback(err,bp)})}function clearBreakpoint(bp,callback){
session.removeBreakpoint(bp.id,function(err){callback&&callback(err,bp)})}function listBreakpoints(callback){
callback(null,emit("getBreakpoints"))}function setVariable(variable,parents,value,frame,callback){var scope=findScope(variable)


session.setPropertyValue(variable.ref,frame.index,scope.index,value,function(err){return err?callback(err):void session.getProperty(variable.ref,frame.index,scope.index,function(err,property){
return err?callback(err):(variable.type=formatType(property),variable.value=formatValue(property,property.$),
variable.children=!!property["@children"],variable.properties=void 0,variable.status="pending",void callback(null,variable))

})})}function getProxySource(process){return PROXY.replace(/\/\/.*/g,"").replace(/[\n\r]/g,"").replace(/\{HOST\}/,process.runner[0].debughost||"").replace(/\{PORT\}/,process.runner[0].debugport)

}function setBreakpoints(breakpoints,callback){function _setBPs(breakpoints,callback,i){if(i==breakpoints.length)return void callback(breakpoints)


var bp=breakpoints[i]
plugin.setBreakpoint(bp,function(){_setBPs(breakpoints,callback,i+1)})}_setBPs(breakpoints,callback,0)

}function setBreakBehavior(type,enabled,callback){breakOnExceptions=!!enabled&&"all"==type,breakOnUncaughtExceptions=!!enabled&&"uncaught"==type

}var socket,client,session,Plugin=imports.Plugin,c9=imports.c9,debug=imports["debugger"],Frame=debug.Frame,Variable=(debug.Source,
debug.Breakpoint,debug.Variable),Scope=debug.Scope,url=require("url"),path=require("path"),DbgpClient=require("./lib/DbgpClient"),base64Decode=require("./lib/util").base64Decode,TYPE="xdebug",PROXY=require("text!./netproxy.js"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),attached=!1,state=null,breakOnExceptions=!1,breakOnUncaughtExceptions=!1


plugin.on("load",load),plugin.on("unload",unload),plugin.freezePublicAPI({features:{scripts:!1,conditionalBreakpoints:!0,
liveUpdate:!1,updateWatchedVariables:!0,updateScopeVariables:!0,setBreakBehavior:!1,executeCode:!0,listeningDebugger:!0
},type:TYPE,get state(){return state},get attached(){return attached},get breakOnExceptions(){return breakOnExceptions

},get breakOnUncaughtExceptions(){return breakOnUncaughtExceptions},_events:["break","stateChange","exception","frameActivate","getFrames","sources","sourcesCompile"],
attach:attach,detach:detach,getSources:getSources,getSource:getSource,getFrames:getFrames,getScope:getScope,
getProperties:getProperties,stepInto:stepInto,stepOver:stepOver,stepOut:stepOut,resume:resume,suspend:suspend,
evaluate:evaluate,setBreakpoint:setBreakpoint,changeBreakpoint:changeBreakpoint,clearBreakpoint:clearBreakpoint,
listBreakpoints:listBreakpoints,setVariable:setVariable,setBreakBehavior:setBreakBehavior,getProxySource:getProxySource
}),register(null,{"debugger.xdebug":plugin})}return main.consumes=["Plugin","c9","debugger"],main.provides=["debugger.xdebug"],
main})


define("plugins/c9.ide.run.debug/liveinspect",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,debug.on("attach",function(e){dbg=e.implementation}),debug.on("detach",function(e){
dbg=null}),debug.on("stateChange",function(e){plugin[e.action]()}),language.once("initWorker",function(e){
worker=e.worker,worker.on("inspect",function(event){return event&&event.data?void(event.data.value&&liveWatch(event.data)):hide()

})},plugin),ace.on("create",function(e){var editor=e.editor,ace=editor.ace
ace.on("mousemove",function(e){onEditorMouseMove(e,editor.pane)}),ace.on("mousedown",onEditorClick),ace.on("changeSelection",onEditorClick),
ace.on("mousewheel",onEditorClick)},plugin),void ace.on("themeChange",function(e){theme=e.theme,theme&&drawn&&(windowHtml.className="liveinspect immediate "+(theme.isDark?"dark":""),
windowHtml.firstChild.className=theme.isDark?"ace_dark":"")},plugin))}function draw(){drawn||(drawn=!0,
windowHtml=document.body.appendChild(document.createElement("div")),windowHtml.style.position="absolute",
windowHtml.className="liveinspect immediate "+(!theme||theme.isDark?"dark":""),windowHtml.innerHTML="<div class='"+(!theme||theme.isDark?"ace_dark":"")+"'></div>",
ace.getElement("menu",function(menu){menu.on("prop.visible",function(e){isContextMenuVisible=e.value})

}),windowHtml.addEventListener("mousemove",function(){activeTimeout&&(clearTimeout(activeTimeout),activeTimeout=null)

}),apf.addListener(document,"mousemove",onDocumentMouseMove),emit("draw"))}function isCurrentFrame(pane){
var frame=callstack.activeFrame,tab=frame&&(tab=tabManager.findTab(frame.path))&&pane.activeTab==tab
return!!tab}function onEditorMouseMove(ev,pane){activeTimeout&&(clearTimeout(activeTimeout),activeTimeout=null),
dbg&&"stopped"==dbg.state&&!isContextMenuVisible&&(activeTimeout=setTimeout(function(){if(activeTimeout=null,
!isCurrentFrame(pane))return hide()
var pos=ev.getDocumentPosition(),line=ev.editor.session.getLine(pos.row)
if(pos.column==line.length||pos.column<line.search(/\S/))return hide()
if(!ev.editor.selection.isEmpty()){var range=ev.editor.getSelectionRange(),selectionVisible=range.end.row>ev.editor.getFirstVisibleRow()&&range.start.row<ev.editor.getLastVisibleRow()


if(!selectionVisible)return hide()}worker.emit("inspect",{data:{row:pos.row,column:pos.column}}),marker&&marker.range.contains(pos.row,pos.column)||hide(),
draw()},SHOW_TIMEOUT))}function onDocumentMouseMove(ev){if(activeTimeout&&currentTab){var mouseMoveAllowed=!1,eles=[currentTab.editor.ace.renderer.scroller,windowHtml]


eles.filter(function(ele){return ele.offsetWidth||ele.offsetHeight}).forEach(function(ele){var pos=ele.getBoundingClientRect(),left=pos.left,top=pos.top


ev.pageX>=left&&ev.pageX<=left+ele.offsetWidth&&ev.pageY>=top&&ev.pageY<=top+ele.offsetHeight&&(mouseMoveAllowed=!0)

}),mouseMoveAllowed||(clearTimeout(activeTimeout),activeTimeout="block"==windowHtml.style.display?setTimeout(hide,400):null)

}}function onEditorClick(){hide()}function liveWatch(data){function done(){currentExpression=expr
var tab=tabManager.findTab(data.path)
if(!tab||!tab.isActive())return hide()
currentTab=tab,addMarker(data)
var pos=data.pos,ace=tab.document.editor.ace,coords=ace.renderer.textToScreenCoordinates(pos.sl,pos.sc)


windowHtml.style.maxWidth=Math.min(800,window.innerWidth-coords.pageX-30)+"px",windowHtml.style.maxHeight=Math.min(250,window.innerHeight-coords.pageY-ace.renderer.lineHeight-10)+"px",
windowHtml.style.left=coords.pageX+"px",windowHtml.style.top=coords.pageY+ace.renderer.lineHeight+"px",
windowHtml.style.display="block"}if(dbg){var expr=data.value
if(!windowHtml||"block"!=windowHtml.style.display||expr!==currentExpression){var windows=getNumericProperties(document.querySelectorAll(".winadv")||{}).filter(function(w){
return"none"!==w.style.display&&"hidden"!==w.style.visibility})
if(!windows.length&&!data.value.match(/^function(?: |\()|^[\d\.\-\^]+$|^\".*\"$|^\[.*\]$|^\{.*\}$|^\/.*\/$/)&&(windowHtml.firstChild.innerHTML='<div class="session_btn running" style="margin:0"><strong style="left:18px"></strong></div>',
done(),marker)){dbg.on("break",updateOnBreak,plugin),marker.data=data
var evalId=++evalCounter
evaluator.evaluate(expr,{addWidget:function(state){windowHtml.firstChild.innerHTML="",windowHtml.firstChild.appendChild(state.el)

},session:{repl:{onWidgetChanged:function(){}}},setError:function(err){windowHtml.firstChild.innerHTML='<span class="error"><span>',
windowHtml.querySelector(".error").textContent=err&&err.message||"error"},setWaiting:function(show){show||done()

}},function(){marker&&evalId===evalCounter&&done()})}}}}function hide(){windowHtml&&(windowHtml.style.display="none"),
marker&&(marker.session.removeMarker(marker.id),marker=null),activeTimeout&&(activeTimeout=clearTimeout(activeTimeout)),
dbg&&dbg.off("break",updateOnBreak)}function addMarker(data){marker&&marker.session.removeMarker(marker.id)


var tab=tabManager.findTab(data.path),doc=tab&&tab.document
if(doc){var pos=data.pos,session=doc.getSession().session
pos.el!=pos.sl&&data.value.indexOf("\n")==-1&&(pos.el=pos.sl,pos.ec=session.getLine(pos.sl).length)
var range=new Range(pos.sl,pos.sc,pos.el,pos.ec)
marker={id:session.addMarker(range,"ace_bracket ace_highlight","text",!0),session:session,range:range,
data:data}}}function getNumericProperties(obj){return Object.keys(obj).filter(function(k){return!isNaN(k)

}).map(function(k){return obj[k]})}function updateOnBreak(){currentExpression=null,marker&&dbg&&(dbg.off("break",updateOnBreak),
marker.data&&liveWatch(marker.data))}var dbg,worker,theme,Plugin=imports.Plugin,ace=(imports.ui,imports.ace),language=imports.language,debug=imports["debugger"],tabManager=imports.tabManager,callstack=imports.callstack,evaluator=imports["immediate.debugnode"],Range=require("ace/range").Range,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),activeTimeout=null,windowHtml=null,currentExpression=null,currentTab=null,marker=null,evalCounter=0,SHOW_TIMEOUT=350,isContextMenuVisible=!1,loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){
hide()}),plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({}),register(null,{
liveinspect:plugin})}return main.consumes=["Plugin","ui","debugger","immediate.debugnode","language","tabManager","callstack","ace"],
main.provides=["liveinspect"],main})


define("text!plugins/c9.ide.run.debug/watches.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="datagrid"\n      border     = "0"\n      class      = "watches"\n      skinset    = "debugger">\n    </a:bar>\n</a:application>')


define("plugins/c9.ide.run.debug/data/data",[],function(require,exports,module){function Data(props,sets,singletons){
this.$props=props||[],this.$sets=sets||[],this.$single=singletons||[]
var _self=this
this.$props.concat(this.$sets).concat(this.$single).forEach(function(prop){_self.__defineGetter__(prop,function(){
return this.data[prop]}),_self.__defineSetter__(prop,function(v){this.data[prop]=v})})}Data.prototype={
get json(){return this.data},set json(v){this.data=v},toString:function(){return this.json}},module.exports=Data

})


define("plugins/c9.ide.run.debug/data/variable",[],function(require,exports,module){function Variable(options){
this.data=options||{},this.tagName=options.tagName||"variable"}var Data=require("./data")
Variable.prototype=new Data(["name","value","type","ref","scope","children","error"],["properties"],["prototype","proto","constructorFunction"]),
Variable.prototype.findVariable=function(ref,name,parents){ref&&"object"==typeof ref&&(ref=ref.getAttribute("ref"))


for(var vars=this.data.properties||[],i=0,l=vars.length;i<l;i++){if(vars[i].ref==ref||vars[i].name==name)return parents&&parents.push(this),
vars[i]
if(vars[i].properties){var result=vars[i].findVariable(ref,name,parents)
if(result)return parents&&parents.push(vars[i]),result}}return!1},Variable.prototype.equals=function(variable){
return!!variable&&this.data.id==variable.id},module.exports=Variable})


define("plugins/c9.ide.run.debug/variablesdp",[],function(require,exports,module){var oop=require("ace/lib/oop"),TreeData=require("ace_tree/data_provider"),escapeHTML=require("ace/lib/lang").escapeHTML,DataProvider=function(root){
TreeData.call(this,root),this.rowHeight=18}
return oop.inherits(DataProvider,TreeData),function(){this.getChildren=function(node){var children=node.variables||node.properties||node.items


children||void 0!==node.status||(node.status="pending")
var ch=children&&children[0]&&children[0]
if(ch){var d=node.$depth+1||0
children.forEach(function(n){n.$depth=d,n.parent=node})}return this.$sortNodes&&!node.$sorted&&children&&this.sort(children),
children},this.hasChildren=function(node){return"loaded"===node.status?(node.variables||node.properties||node.items||[]).length:node.children||"scope"==node.tagName

},this.getCaptionHTML=function(node){return escapeHTML("scope"==node.tagName?(node.name||"Scope")+"":node.name+"")

},this.sort=function(children){var compare=TreeData.alphanumCompare
return children.sort(function(a,b){var aIsSpecial="scope"==a.tagName,bIsSpecial="scope"==b.tagName
return aIsSpecial&&!bIsSpecial?1:!aIsSpecial&&bIsSpecial?-1:aIsSpecial&&bIsSpecial?a.index-b.index:compare(a.name+"",b.name+"")

})},this.updateNode=function(node){var isOpen=node.isOpen
this.close(node,null,!0),isOpen&&this.open(node,null,!0)},this.getIconHTML=function(node){return node.isNew?"":"<span class='dbgVarIcon'></span>"

},this.getClassName=function(node){return(node.className||"")+("loading"==node.status?" loading":"")+(node.error?" watcherror":"")

}}.call(DataProvider.prototype),DataProvider})


define("plugins/c9.ide.run.debug/watches",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,model=new TreeData,model.emptyMessage="Type an expression here...",
model.$sortNodes=!1,model.loadChildren=function(node,callback){return node.isNew?callback(!0):void emit("expand",{
variable:node,expand:callback})},model.columns=[{caption:"Expression",match:"name",value:"name",width:"60%",
icon:"debugger/genericvariable_obj.gif",type:"tree",editor:"textbox"},{caption:"Value",value:"value",
width:"40%",editor:"textbox"},{caption:"Type",value:"type",width:"55"}],debug.on("attach",function(e){
dbg=e.implementation,updateAll()}),debug.on("detach",function(e){dbg=null}),debug.on("stateChange",function(e){
errorWatch&&removeWatch(errorWatch),plugin[e.action](),"enable"==e.action&&updateAll()}),debug.on("framesLoad",function(e){
updateAll()}),debug.on("exception",function(e){errorWatch=e.exception,addWatch(errorWatch),model.expand(errorWatch)

}),plugin.on("expand",function(e){return e.variable.parent==model.root?e.expand&&e.expand(e.variable.error):void dbg.getProperties(e.variable,function(err,properties){
updateVariable(e.variable,properties),e.expand&&e.expand()})}),commands.addCommand({name:"addwatchfromselection",
bindKey:{mac:"Command-Shift-C",win:"Ctrl-Shift-C"},hint:"Add the selection as a watch expression",isAvailable:function(editor){
var ace=dbg&&editor&&editor.ace
return ace&&!ace.selection.isEmpty()},exec:function(editor){editor.ace.selection.isEmpty()||addWatch(editor.ace.getCopyText())

}},plugin),ace.getElement("menu",function(menu){menus.addItemToMenu(menu,new ui.item({caption:"Add As Watch Expression",
command:"addwatchfromselection"}),600,plugin)}),settings.on("read",function(e){(settings.getJson("state/watches")||[]).forEach(function(name){
watches.push(new Variable({name:name,ref:"fromsettings"+count++}))}),reloadModel(),dbg&&updateAll()}),
void settings.on("write",function(e){dirty&&(settings.setJson("state/watches",watches.filter(function(w){
return w!==errorWatch}).map(function(w){return w.name})),dirty=!1)}))}function draw(options){if(!drawn){
drawn=!0,ui.insertMarkup(options.aml,markup,plugin)
var datagridEl=plugin.getElement("datagrid")
datagrid=new Tree(datagridEl.$ext),datagrid.setTheme({cssClass:"blackdg"}),datagrid.setOption("maxLines",200),
layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".blackdg .row","height"),10)||24


model.rowHeight=height,e.changed&&datagrid.resize(!0)}),datagrid.setDataProvider(model),datagrid.edit=new TreeEditor(datagrid),
panels.on("afterAnimate",function(e){panels.isActive("debugger")&&datagrid&&datagrid.resize()}),reloadModel()


var contextMenu=new Menu({items:[new MenuItem({value:"edit1",caption:"Edit Watch Expression"}),new MenuItem({
value:"edit2",caption:"Edit Watch Value"}),new Divider,new MenuItem({value:"remove",caption:"Remove Watch Expression"
})]},plugin)
contextMenu.on("itemclick",function(e){"edit1"==e.value?datagrid.edit.startRename(null,0):"edit2"==e.value?datagrid.edit.startRename(null,1):"remove"==e.value&&datagrid.execCommand("delete")

}),contextMenu.on("show",function(e){var selected=datagrid.selection.getCursor(),isNew=selected&&selected.isNew,isProp=selected.parent!=model.root


contextMenu.items[0].disabled=!selected||isProp,contextMenu.items[1].disabled=!selected||!!isNew,contextMenu.items[3].disabled=!selected||!!isNew||isProp

}),datagridEl.setAttribute("contextmenu",contextMenu.aml),datagrid.on("delete",function(e){var nodes=datagrid.selection.getSelectedNodes()


nodes.forEach(function(node){var idx=watches.indexOf(node)
idx!=-1&&(model._signal("remove",node),watches.splice(idx,1))}),reloadModel(),dirty=!0,settings.save()

})
var justEdited=!1
datagrid.on("rename",function(e){var variable,oldValue,node=e.node,name=e.value,value=node.value,isNew=node.isNew,column=e.column,parents=[]


return name?(isNew?(variable=new Variable({name:name,value:value,ref:node.ref}),watches.push(variable)):(watches.indexOf(node)!=-1?variable=node:node.ref&&(variable=findVariable(node.ref,parents)),
"value"==column.value?(oldValue=variable.value,value=variable.value=name):(variable.name=name,isNew=!0),
variable.error&&(isNew=!0,variable.ref=null)),dirty=!0,settings.save(),reloadModel(),void setWatch(variable,value,isNew,oldValue,node,parents)):void datagrid.execCommand("delete")

}),datagrid.on("beforeRename",function(e){return"Value"==e.column.caption&&"new"==(e.node.ref+"").substr(0,3)?(datagrid.edit.startRename(null,0),
e.preventDefault()):"Expression"==e.column.caption&&e.node.parent!=model.root?(datagrid.edit.startRename(null,1),
e.preventDefault()):"Expression"!=e.column.caption&&dbg&&!dbg.features.updateWatchedVariables?e.preventDefault():void 0

}),datagrid.on("rename",function(e){justEdited=!0,setTimeout(function(){justEdited=!1},500)}),datagrid.textInput.getElement().addEventListener("keydown",function(e){
var cursor=datagrid.selection.getCursor(),key=keys[e.keyCode]||"";(1==key.length||"num"==key.substr(0,3)&&cursor&&!justEdited)&&datagrid.edit.startRename(cursor,0)

},!0),datagrid.textInput.getElement().addEventListener("keyup",function(e){var cursor=datagrid.selection.getCursor()


13==e.keyCode&&cursor&&!justEdited&&datagrid.edit.startRename(cursor,0)},!0)}}function addWatch(expression){
var variable
expression instanceof Variable?variable=expression:(variable=new Variable({name:expression,value:"",ref:""
}),setWatch(variable,null,!0,null,{},[])),watches.push(variable),reloadModel(),dirty=!0,settings.save()

}function removeWatch(variable){watches.splice(watches.indexOf(variable),1),reloadModel(),dirty=!0,settings.save()

}function setWatch(variable,value,isNew,oldValue,node,parents){dbg&&(variable.status="pending",isNew?dbg.evaluate(variable.name,debug.activeFrame,!debug.activeFrame,!0,function(err,serverVariable){
return err?(variable.json={name:variable.name,value:err.message,error:!0},void updateVariable(variable,[],node,!0)):(variable.json=serverVariable.json,
void updateVariable(variable,variable.properties||[],node))}):dbg.setVariable(variable,parents,value,debug.activeFrame,function(err){
return err?(variable.value=oldValue,void updateVariable(variable,[],node,!0)):void dbg.getProperties(variable,function(err,properties){
updateVariable(variable,properties,node)})}),emit("setWatch",{name:node.name,value:value,node:node,isNew:isNew,
variable:variable,parents:parents}))}function updateAll(){watches.forEach(function(variable){setWatch(variable,void 0,!0,null,variable,[])

})}function findVariable(ref,parents){"object"==typeof ref&&(ref=ref.getAttribute("ref"))
for(var result,i=0,l=watches.length;i<l;i++){if(watches[i].ref==ref)return watches[i]
if(result=watches[i].findVariable(ref,null,parents))return result}}function updateVariable(variable,properties,node,error){
variable.error=error,variable.parent&&variable.parent!=model.root?model.updateNode(variable):reloadModel()

}function reloadModel(){model.newWatchNode=model.newWatchNode||{name:model.emptyMessage,className:"newwatch",
fullWidth:!0,isNew:!0},model.setRoot({items:[].concat(watches,model.newWatchNode),$sorted:!0})}var dbg,model,datagrid,errorWatch,drawn,DebugPanel=imports.DebugPanel,settings=imports.settings,ui=imports.ui,debug=imports["debugger"],layout=(imports.util,
imports.layout),menus=imports.menus,commands=imports.commands,ace=imports.ace,Menu=imports.Menu,MenuItem=imports.MenuItem,Divider=imports.Divider,panels=imports.panels,keys=require("ace/lib/keys"),markup=require("text!./watches.xml"),Variable=require("./data/variable"),Tree=require("ace_tree/tree"),TreeData=require("./variablesdp"),TreeEditor=require("ace_tree/edit"),plugin=new DebugPanel("Ajax.org",main.consumes,{
caption:"Watch Expressions",index:100}),emit=plugin.getEmitter(),count=0,watches=[],dirty=!1,loaded=!1


plugin.on("load",function(){load(),plugin.once("draw",draw)}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({get watches(){return watches

},updateAll:updateAll}),register(null,{watches:plugin})}return main.consumes=["DebugPanel","settings","ui","util","debugger","ace","commands","menus","Menu","MenuItem","Divider","panels","layout"],
main.provides=["watches"],main})


define("text!plugins/c9.ide.run.debug/variables.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="datagrid"\n      border     = "0"\n      skinset    = "debugger">\n    </a:bar>\n</a:application>')


define("plugins/c9.ide.run.debug/variables",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,model=new TreeData,model.emptyMessage="No variables to display",
model.columns=[{caption:"Variable",value:"name",defaultValue:"Scope",width:"40%",icon:"debugger/genericvariable_obj.gif",
type:"tree"},{caption:"Value",value:"value",width:"60%",editor:"textbox"},{caption:"Type",value:"type",
width:"55"}],model.loadChildren=function(node,callback){emit("expand",{node:node,expand:callback})},debug.on("attach",function(e){
dbg=e.implementation}),debug.on("detach",function(e){dbg=null}),debug.on("stateChange",function(e){plugin[e.action]()

}),callstack.on("scopeUpdate",function(e){updateScope(e.scope,e.variables)}),callstack.on("framesLoad",function(e){
clearCache()}),callstack.on("frameActivate",function(e){loadFrame(e.frame)},plugin),void plugin.on("expand",function(e){
if("variable"==e.node.tagName){if(!e.node.children)return e.expand()
dbg.getProperties(e.node,function(err,properties){return err?console.error(err):void e.expand()})}else"scope"==e.node.tagName&&dbg.getScope(model.frame,e.node,function(err,vars){
return err?console.error(err):void e.expand()})},plugin))}function draw(options){if(!drawn){drawn=!0,
ui.insertMarkup(options.aml,markup,plugin)
var datagridEl=plugin.getElement("datagrid")
datagrid=new Tree(datagridEl.$ext),datagrid.setTheme({cssClass:"blackdg"}),datagrid.setOption("maxLines",200),
layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".blackdg .row","height"),10)||24


model.rowHeight=height,e.changed&&datagrid.resize(!0)}),datagrid.setDataProvider(model),datagrid.edit=new TreeEditor(datagrid),
panels.on("afterAnimate",function(e){panels.isActive("debugger")&&datagrid&&datagrid.resize()}),datagridEl.on("contextmenu",function(){
return!1}),datagrid.on("rename",function(e){function undo(){model.setAttribute(variable,"value",oldValue)

}var node=e.node,value=e.value,parents=[],variable=activeFrame.findVariable(node,null,parents),oldValue=variable.value


model.setAttribute(variable,"value",value),dbg.setVariable(variable,parents,value,debug.activeFrame,function(err){
return err?undo():(updateVariable(variable,variable.properties,node),void emit("variableEdit",{value:value,
oldValue:oldValue,node:node,variable:variable,frame:activeFrame,parents:parents}))})}),datagrid.on("beforeRename",function(e){
return plugin.enabled&&dbg.features.updateScopeVariables?"scope"==e.node.tagName?e.preventDefault():"this"==e.node.name?e.preventDefault():void 0:e.preventDefault()

})}}function loadFrame(frame){frame!=activeFrame&&(model.frame=frame,frame?cached[frame.id]?model.setRoot(cached[frame.id]):(model.setRoot([].concat(frame.variables,frame.scopes).filter(Boolean)),
cached[frame.id]=model.root):model.setRoot({}),activeFrame=frame)}function updateNode(node,variable,oldVar){
var isOpen=node.isOpen
model.close(node,null,!1),isOpen?model.open(node,null,!1):model._signal("change",node)}function updateScope(scope,variables){
updateNode(scope)}function updateVariable(variable,properties,node){updateNode(variable)}function clearCache(){
cached={}}var activeFrame,dbg,model,datagrid,drawn,DebugPanel=imports.DebugPanel,ui=imports.ui,callstack=imports.callstack,debug=imports["debugger"],layout=(imports.util,
imports.layout),panels=imports.panels,markup=require("text!./variables.xml"),Tree=require("ace_tree/tree"),TreeData=require("./variablesdp"),TreeEditor=require("ace_tree/edit"),plugin=new DebugPanel("Ajax.org",main.consumes,{
caption:"Local Variables",index:300}),emit=plugin.getEmitter(),cached={},loaded=!1
plugin.on("load",function(){load(),plugin.once("draw",draw)}),plugin.on("enable",function(){drawn&&datagrid.enable()

}),plugin.on("disable",function(){drawn&&datagrid.disable()}),plugin.on("unload",function(){loaded=!1,
drawn=!1}),plugin.freezePublicAPI({get model(){return model},loadFrame:loadFrame,clearCache:clearCache
}),register(null,{variables:plugin})}return main.consumes=["DebugPanel","ui","util","debugger","callstack","panels","layout"],
main.provides=["variables"],main})


define("plugins/c9.ide.immediate/evaluators/bash",[],function(require,exports,module){function main(options,imports,register){
function load(){}function canEvaluate(str){return!0}function evaluate(expression,cell,cb){return expression.trim()?(cell.setWaiting(!0),
cell.setValue(""),scroll(cell),void getBash({},function(err,bash){function done(err){var currentCell=bash.cell


currentCell&&currentCell.session||(currentCell=cell),bash.stdout.off("data",bash.onData),bash.stderr.off("data",bash.onErr),
bash.off("exit",bash.onExit),err&&err.message&&write(currentCell,"\n"+err.message),currentCell.setWaiting(!1),
bash.cell=null}if(err)return done(err)
bash.cell&&done(new Error("Stopped")),bash.cell=cell,cell.tokenizerState="comment",bash.stdout.on("data",bash.onData=function(data){
bash.aborted||(data.indexOf("\xdf")!=-1&&(data=data.replace(/\xdf\s*/,""),done()),write(cell,data))}),bash.stderr.on("data",bash.onErr=function(data){
bash.aborted||write(cell,data)}),bash.on("exit",bash.onExit=function(code){return bash.exited=!0,bash.aborted?done(new Error("Process aborted by user")):code?done(new Error("Process exited with code "+code)):void done()

})
var code=expression.replace(/\r\n/g,"\n")
code="fcn() {\n"+code+'\n}\nsudo(){ /usr/bin/sudo -S -p "###[sudo] password for %p: " "$@" ; }\nexit() { if [ "$1" == "0" ]; then echo \xdf; else echo "exiting with $1"; fi; command exit $1; }\nfcn "$@" \n echo \xdf\n',
bash.stdin.write(code)})):cell.remove()}function write(cell,data){var range=cell.getRange()
range&&(cell.insert(range.end,data),scroll(cell))}function abort(){bash&&!bash.exited&&(bash.aborted=!0,
bash.kill())}function scroll(cell){var editor=cell.session.repl.editor
if(editor){var renderer=editor.renderer
setTimeout(function(){renderer.scrollCursorIntoView()})}}function getBash(opts,callback){return!bash||bash.exited||bash.aborted?void proc.spawn("bash",{
args:[]},function(err,p){bash=p,callback(err,bash)}):callback(null,bash)}function getAllProperties(context,callback){
callback()}var bash,Evaluator=imports.Evaluator,proc=(imports.settings,imports.immediate,imports.proc),plugin=(imports.ui,
new Evaluator("Ajax.org",main.consumes,{caption:"Bash",id:"bash",mode:"ace/mode/sh",message:"# Welcome to the Bash REPL."
}))
plugin.on("load",function(){load()}),plugin.on("canEvaluate",function(e){return canEvaluate(e.expression)

}),plugin.on("evaluate",function(e){return evaluate(e.expression,e.cell,e.callback)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("unload",function(){bash&&(bash.aborted=!0,bash.kill())}),
plugin.freezePublicAPI({getAllProperties:getAllProperties,abort:abort}),register(null,{"immediate.bash":plugin
})}return main.consumes=["immediate","settings","Evaluator","ui","proc"],main.provides=["immediate.bash"],
main})


define("plugins/c9.ide.immediate/evaluators/debugnode",[],function(require,exports,module){function main(options,imports,register){
function load(){loaded||(loaded=!0,debug.on("attach",function(e){dbg=e.implementation,dbg.attachLog&&initLog(dbg.attachLog()),
immediate.defaultEvaluator="debugger"}),debug.on("detach",function(e){dbg=null,immediate.defaultEvaluator=null

}),debug.on("stateChange",function(e){plugin[e.action]()}))}function writeLog(){var cell,dist=1,type=arguments[arguments.length-dist]


type&&type.addWidget&&(dist++,cell=type,type=arguments[arguments.length-dist]),cell||(cell=lastCell),
cell.html||createWidget(cell)
var html=cell.html.appendChild(document.createElement("div"))
html.className=type
for(var i=0;i<arguments.length-dist;i++)renderType(arguments[i],html,"return"!=type)
insert(html,"<br />"),html.updateWidget=updateWidget.bind(cell),html.updateWidget(),scrollIntoView(cell)

}function updateWidget(){this.session.repl.onWidgetChanged(this)}function scrollIntoView(cell){if(cell.session.repl.editor){
var renderer=cell.session.repl.editor.renderer
setTimeout(function(){renderer.scrollCursorIntoView()})}}function initLog(proxy){log=proxy,log.on("log",function(e){
var args=Array.prototype.slice.apply(arguments)
args.push(e.type),writeLog.apply(log,args)},plugin)}function createWidget(cell){cell.html=document.createElement("div"),
cell.addWidget({el:cell.html,coverLine:!0,fixedWidth:!0})}function insert(div,markup,name){if(void 0!==name&&insert(div,"<span class='property'>"+name+": </span>"),
markup=markup.replace(/([a-z]\w{1,4}:\/\/[\w:_\-\?&\/\.\#]*)/gi,"<a>$1</a>"),div.insertAdjacentHTML("beforeend",markup),
div.lastChild&&1==div.lastChild.nodeType)for(var nodes=div.lastChild.querySelectorAll("a"),i=0;i<nodes.length;i++)nodes[i].addEventListener("click",function(e){
alert(this.firstChild.nodeValue),e.stopPropagation()})}function insertTree(div,caption,object,drawChildren){
var treeitem=div.appendChild(document.createElement("span")),arrow=treeitem.appendChild(document.createElement("span"))


treeitem.className="treeitem",arrow.className="arrow",treeitem.appendChild(caption)
var container
treeitem.addEventListener("click",function(e){if(!container||!ui.isChildOf(container,e.target,!0)){e.stopPropagation(),
container||(container=treeitem.appendChild(document.createElement("div")),container.className="treecontainer",
container.style.display="none",drawChildren(object,container,function(){findWidgetAndUpdate(target)}))


var collapsed="none"==container.style.display
arrow.className="arrow "+(collapsed?"expanded":""),container.style.display=collapsed?"block":"none"
var target=e.currentTarget
findWidgetAndUpdate(target)}})}function findWidgetAndUpdate(target){for(;target;){if(target.updateWidget){
target.updateWidget()
break}target=target.parentNode}}function parseChildren(object,html,callback){if("[Array]"==object.value)object.length<101&&object.forEach(function(item,i){
renderType(item,html,2,!1,i),insert(html,"<br />")})
else if(object.$arrayWalker);else if(object instanceof Error){var stack=(object.stack||"").split("\n")


stack.shift(),stack=stack.join("<br />"),insert(html,"<div class='stack'>"+stack+"</div>")}return!object.properties&&dbg?void dbg.getProperties(object,function(err,properties){
parseChildren(object,html,callback)}):((object.properties||[]).forEach(function(prop){renderType(prop,html,2,2,prop.name),
insert(html,"<br />")}),void callback())}function getOwnProperties(object){var result=[];(object.properties||[]).forEach(function(o){
"number"!=typeof o.name&&result.push(o)})}function renderType(object,html,log,short,name){var caption,type=object.type,value=object.value


if(object.name&&"string"==typeof object.name&&0===object.name.indexOf("function")&&(type="function"),
"undefined"==type||"null"==type)insert(html,"<span class='null'>"+type+"</span>",name)
else if("string"==type)if(log&&2!=log)insert(html,object,name)
else{value=JSON.parse(value).replace(/</g,"&lt;").replace(/\t/g,"    ").replace(/ /g,"&nbsp;").replace(/\n/g,"<br />")


var str="\"<span class='string'>"+value+'</span>"'
if(name&&object.length>100){var event='this.style.display = "none";                            this.nextSibling.style.display = "inline";                            event.stopPropagation()'


str="<span class='stringcollapse'><span onclick='"+event+"'>(...)</span><span>"+str+"</span></span>"}
insert(html,str,name)}else if("number"==type||"int"==type||"float"==type)insert(html,"<span class='number'>"+value+"</span>",name)
else if("function"==type)insert(html,"<span class='function'>"+(object.name+"").replace(/ /g,"&nbsp;").replace(/\n/g,"<br />")+"</span>",name)
else if("boolean"==type||"bool"==type)insert(html,"<span class='boolean'>"+value+"</span>",name)
else if(log||"regexp"!=type)if("[Array]"==value){if(short)return void insert(html,"Array ["+object.name+"]",name)


var j=0
if(log){caption=document.createElement("span"),insert(caption,"",name)
var preview=caption.appendChild(document.createElement("span"))
preview.className="preview",insert(preview,"[",name),(object.properties||[]).every(function(item,i){return"number"!=typeof item.name?(j++,
!0):(renderType(item,preview,!1,!0),i<object.properties.length-2-j&&insert(preview,", "),i-j<100)})
for(var props=getOwnProperties(object),count=Math.min(Math.min(props.length,5),Math.max(0,100-object.length)),i=0;i<count;i++)insert(preview,(0!==i?", ":"")+props[i]+": "),
renderType(props[i],preview,!1,2)
props.length>count&&insert(preview,"\u2026"),insert(preview,"]")}else{if(!((object.properties||"").length>100))return insert(html,"[",name),
(object.properties||[]).every(function(item,i){return"number"!=typeof item.name?(j++,!0):(renderType(item,html,!1,2),
i<object.properties.length-1&&insert(html,", "),!0)}),void insert(html,"]")
caption=document.createElement("span"),insert(caption,"Array ["+object.properties.length+"]",name)}insertTree(html,caption,object,parseChildren)

}else{var heading
if(object.$$error)object=object.$$error,heading=(object.stack||"").split(":")[0],heading="<span class='err'>"+object.message+"</span>",
caption=document.createElement("span"),insert(caption,heading,name),insertTree(html,caption,object,parseChildren)
else if("object"===type||object.children||object.properties&&object.properties.length>0){if(heading=(object.value||"[(anonymous function)]").replace(/^\[(.*)\]$/,"$1"),
short===!0)return insert(html,heading,name)
if(caption=document.createElement("span"),insert(caption,heading,name),preview=caption.appendChild(document.createElement("span")),
preview.className="preview",2!==short){insert(preview," {"),props=object.properties||[],count=0
for(var i=0;count<5&&i<props.length;i++){var propName=props[i].name
"string"==typeof propName&&0===propName.indexOf("function")||(insert(preview,0!==i?", ":""),insert(preview,"",propName),
renderType(props[i],preview,2,!0),count++)}props.length>count&&insert(preview,"\u2026"),insert(preview,"}")

}else insert(preview,"")
insertTree(html,caption,object,parseChildren)}else insert(html,escapeHTML(value),name)}else insert(html,"<span class='regexp'>"+object.value+"</span>",name)

}function canEvaluate(str){return!!str.trim()}function evaluate(expression,cell,cb){lastCell=cell,cell.html&&(cell.html.textContent=""),
evaluateHeadless(expression,function(result){return cell.setError&&result.$$error?cell.setError(result.$$error):(writeLog(result,"return",cell),
void cell.setWaiting(!1))})}function evaluateHeadless(expression,callback){if(callback){if(!dbg||!dbg.features.executeCode){
var err=new Error(dbg&&!dbg.features.executeCode?"Code execution is not supported by this debugger":"Debug Session is not running")


return callback({$$error:err,type:err})}dbg.evaluate(expression,callstack.activeFrame,!callstack.activeFrame,!1,function(err,variable){
return err?callback({$$error:err,type:err}):"function"==variable.type?void dbg.serializeVariable(variable,function(value){
variable.name=value,callback(variable)}):void callback(variable)})}}function addVariables(list,node){
node.variables.forEach(function(n){list.push(n.name)})}function getAllProperties(context,callback){if(context==-1){
var frame=callstack.activeFrame,vars=[],count=0
if(frame)return addVariables(vars,frame),void frame.scopes.forEach(function(scope){"loaded"==scope.status?addVariables(vars,scope):(count++,
dbg.getScope(frame,scope,function(err){err||addVariables(vars,scope),0===--count&&callback(null,vars)

}))})
context="global"}console.warn("DEBUG: (properties)",context),evaluateHeadless(context,function(variable){
function check(variable){if(variable.prototype){if(!dbg)return callback(new Error("disconnected"))
console.warn("DEBUG: (properties-properties)",variable),dbg.getProperties(variable.prototype,function(err,props){
return console.warn("DEBUG: (properties-properties-received)",variable,err),err?callback(err):(props.forEach(function(prop){
results.indexOf(prop.name)===-1&&results.push(prop.name)}),void check(variable.prototype))})}else callback(null,results)

}if(console.warn("DEBUG: (properties-received)",variable),variable.$$error)return callback(variable.$$error)


if(!variable.properties)return callback(null,[])
var results=variable.properties.map(function(m){return m.name})
check(variable)})}var dbg,log,lastCell,loaded,Evaluator=imports.Evaluator,debug=imports["debugger"],immediate=imports.immediate,callstack=imports.callstack,ui=imports.ui,escapeHTML=require("ace/lib/lang").escapeHTML,plugin=new Evaluator("Ajax.org",main.consumes,{
caption:"Debugger",id:"debugger",mode:"ace/mode/javascript",message:"Welcome to the debugger inspector. You can inspect any process that the debugger is attached to. Code \nwill be executed in the global context unless on a breakpoint, then code is executed in the current frame."
})
plugin.on("load",function(){load()}),plugin.on("canEvaluate",function(e){return canEvaluate(e.expression)

}),plugin.on("evaluate",function(e){return evaluate(e.expression,e.cell,e.callback)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({evaluateHeadless:evaluateHeadless,
getAllProperties:getAllProperties}),register(null,{"immediate.debugnode":plugin})}return main.consumes=["immediate","debugger","Evaluator","callstack","ui"],
main.provides=["immediate.debugnode"],main})


define("plugins/c9.ide.immediate/evaluators/browserjs",[],function(require,exports,module){function main(options,imports,register){
function createIframe(){iframe||(iframe=document.body.appendChild(document.createElement("iframe")),iframe.setAttribute("nwdisable","nwdisable"),
iframe.style.width="1px",iframe.style.height="1px",iframe.style.position="absolute",iframe.style.left="-100px",
iframe.style.top="-100px",win=iframe.contentWindow)}function Console(cell){this.name="output_section"+ ++counter,
this.cell=cell,this.html=document.createElement("div"),this.cell.addWidget({el:this.html,coverLine:!0,
fixedWidth:!0})}function insert(div,markup,name){if(void 0!==name&&insert(div,"<span class='property'>"+name+": </span>"),
markup=markup.replace(/([a-z]\w{1,4}:\/\/[\w:_\-\?&\/\.\#]*)/gi,"<a>$1</a>"),div.insertAdjacentHTML("beforeend",markup),
div.lastChild&&1==div.lastChild.nodeType)for(var nodes=div.lastChild.querySelectorAll("a"),i=0;i<nodes.length;i++)nodes[i].addEventListener("click",function(e){
alert(this.firstChild.nodeValue),e.stopPropagation()})}function insertTree(div,caption,object,drawChildren){
var treeitem=div.appendChild(document.createElement("span")),arrow=treeitem.appendChild(document.createElement("span"))


treeitem.className="treeitem",arrow.className="arrow",treeitem.appendChild(caption)
var container
treeitem.addEventListener("click",function(e){if(!container||!ui.isChildOf(container,e.target,!0)){e.stopPropagation(),
container||(container=treeitem.appendChild(document.createElement("div")),container.className="treecontainer",
container.style.display="none",drawChildren(object,container))
var collapsed="none"==container.style.display
arrow.className="arrow "+(collapsed?"expanded":""),container.style.display=collapsed?"block":"none"
for(var target=e.currentTarget;target;){if(target.updateWidget){target.updateWidget()
break}target=target.parentNode}}})}function parseChildren(object,html){if(object instanceof win.Array)object.length<101
else if(object.$arrayWalker);else if(object instanceof win.Error){var stack=object.stack.split("\n")
stack.shift(),stack=stack.join("<br />"),insert(html,"<div class='stack'>"+stack+"</div>")}else if(object instanceof win.Element&&!html.parentNode.textContent.match(/HTML\w*Element/)){
for(var children=object.childNodes,i=0;i<children.length;i++)renderType(children[i],html,!1,2),insert(html,"<br />")


return void insert(html,"&lt;/"+object.tagName.toLowerCase()+"&gt;")}var keys=Object.getOwnPropertyNames(object)


keys.forEach(function(name){renderType(object[name],html,2,2,name),insert(html,"<br />")})}function renderType(object,html,log,short,name){
var caption,type=typeof object
if(void 0===object||null===object)insert(html,"<span class='null'>"+object+"</span>",name)
else if("string"==type)if(log&&2!=log)insert(html,object,name)
else{var value=String(object).replace(/</g,"&lt;").replace(/\t/g,"    ").replace(/ /g,"&nbsp;").replace(/\n/g,"<br />"),str="\"<span class='string'>"+value+'</span>"'


if(name&&object.length>100){var event='this.style.display = "none";                            this.nextSibling.style.display = "inline";                            event.stopPropagation()'


str="<span class='stringcollapse'><span onclick='"+event+"'>(...)</span><span>"+str+"</span></span>"}
insert(html,str,name)}else if("number"==type)insert(html,"<span class='number'>"+object+"</span>",name)
else if("function"==type)insert(html,"<span class='function'>"+object.toString()+"</span>",name)
else if("boolean"==type)insert(html,"<span class='boolean'>"+object+"</span>",name)
else if(!log&&object instanceof win.RegExp)insert(html,"<span class='regexp'>"+object.toString()+"</span>",name)
else if(object instanceof win.Array){if(short)return void insert(html,"Array ["+object.length+"]",name)


if(log){caption=document.createElement("span"),insert(caption,"",name)
var preview=caption.appendChild(document.createElement("span"))
preview.className="preview"
var found=!1
insert(preview,"[",name),object.every(function(item,i){return renderType(item,preview,!1,!0),i<object.length-1&&insert(preview,", "),
found=!0,i<100})
for(var props=Object.getOwnPropertyNames(object).filter(function(n){return parseInt(n)!=n}),count=Math.min(Math.min(props.length,5),Math.max(0,100-object.length)),i=0;i<count;i++)insert(preview,(found||0!==i?", ":"")+props[i]+": "),
renderType(object[props[i]],preview,!1,2)
props.length>count&&insert(preview,"\u2026"),insert(preview,"]")}else{if(!(object.length>100))return insert(html,"[",name),
object.forEach(function(item,i){return renderType(item,html,!1,2),i<object.length-1&&insert(html,", "),
!0}),void insert(html,"]")
caption=document.createElement("span"),insert(caption,"Array ["+object.length+"]",name)}insertTree(html,caption,object,parseChildren)

}else if(object instanceof win.Node&&log===!1&&9!=object.nodeType){if(3==object.nodeType)insert(html,"<span class='textnode'>"+object.nodeValue.replace(/</g,"&lt;")+"</span>")
else if(4==object.nodeType)insert(html,"<span class='cdata'>&lt;![CDATA["+object.nodeValue.replace(/</g,"&lt;")+"]]&gt;</span>")
else if(11==object.nodeType)insert(html,"<span class='comment'>&lt;!--"+object.nodeValue.replace(/</g,"&lt;")+"--&gt;</span>")
else if(1==object.nodeType){for(var attr,node=["&lt;"+object.tagName.toLowerCase()],i=0,l=object.attributes.length;i<l;i++)attr=object.attributes.item(i),
node.push(attr.nodeName+'="'+attr.nodeValue.replace(/"/g,"&quot;")+'"')
node=node.join(" "),node+=object.childNodes.length?"&gt;":"&gt;&lt;/"+object.tagName.toLowerCase()+"&gt;",
caption=document.createElement("span"),insert(caption,node,name),object.childNodes.length?insertTree(html,caption,object,parseChildren):(caption.className="emptynode",
html.appendChild(caption))}}else{var heading
if(object.$$error)object=object.$$error,heading=object.stack.split(":")[0],heading="<span class='err'>"+heading+": "+(object.message||(object?object.toString():object))+"</span>",
caption=document.createElement("span"),insert(caption,heading,name)
else{if(heading=(object.constructor.toString().match(/^function\s+(\w+)/)||[0,"(anonymous function)"])[1],
short===!0)return insert(html,heading,name)
caption=document.createElement("span"),insert(caption,heading,name)
var preview=caption.appendChild(document.createElement("span"))
if(preview.className="preview",2!==short){insert(preview," {")
for(var props=Object.getOwnPropertyNames(object),count=0,i=0;count<5&&i<props.length;i++)"function"!=typeof object[props[i]]&&(insert(preview,0!==i?", ":""),
insert(preview,"",props[i]),renderType(object[props[i]],preview,2,!0),count++)
props.length>count&&insert(preview,"\u2026"),insert(preview,"}")}else insert(preview,"")}insertTree(html,caption,object,parseChildren)

}}function canEvaluate(str){return!!str.trim()}function evaluate(expression,cell,cb){iframe||createIframe()


var output=new Console(cell)
win.console=output
var result=evaluateHeadless(expression)
output.write(result,"return"),cell.setWaiting(!1),delete win.result}function evaluateHeadless(expression){
iframe||createIframe()
try{win.thrown=!1,win.result=win.eval(expression)}catch(e){win.result=e,win.thrown=!0}var result=win.result


return win.thrown&&(result={$$error:result,type:win.thrown}),result}function getAllProperties(context,callback){
var results=evaluateHeadless("("+function(obj){if(null==obj)return[]
var results=[]
do{var props=Object.getOwnPropertyNames(obj)
props.forEach(function(prop){results.indexOf(prop)===-1&&results.push(prop)}),props=Object.keys(obj),
props.forEach(function(prop){results.indexOf(prop)===-1&&results.push(prop)})}while(obj=Object.getPrototypeOf(obj))


return results}.toString()+")("+context+")")
callback(null,results)}var iframe,win,Evaluator=imports.Evaluator,ui=imports.ui,plugin=new Evaluator("Ajax.org",main.consumes,{
caption:"Javascript (browser)",id:"jsbrowser",mode:"ace/mode/javascript",message:"Welcome to the Javascript REPL. This REPL allows you to test any single or multi line code in\na browser based javascript environment (iframe). It operates similar to your browser console."
}),counter=0
Console.prototype={write:function(){var html=this.html.appendChild(document.createElement("div")),type=arguments[arguments.length-1]


html.className=type
for(var i=0;i<arguments.length-1;i++)renderType(arguments[i],html,"return"!=type)
insert(html,"<br />"),html.updateWidget=this.$update.bind(this),html.updateWidget(),this.$scrollIntoView()

},log:function(output){var args=Array.prototype.slice.apply(arguments)
return args.push("log"),this.write.apply(this,args)},error:function(output){var args=Array.prototype.slice.apply(arguments)


return args.push("error"),this.write.apply(this,args)},warn:function(output){var args=Array.prototype.slice.apply(arguments)


return args.push("warning"),this.write.apply(this,args)},$update:function(){this.cell.session.repl.onWidgetChanged(this.cell)

},$scrollIntoView:function(){var editor=this.cell.session.repl.editor
if(editor){var renderer=editor.renderer
setTimeout(function(){renderer.scrollCursorIntoView()})}}},plugin.on("load",function(){}),plugin.on("canEvaluate",function(e){
return canEvaluate(e.expression)}),plugin.on("evaluate",function(e){return evaluate(e.expression,e.cell,e.callback)

}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),plugin.on("unload",function(){iframe&&iframe.remove(),
win=iframe=null}),plugin.freezePublicAPI({evaluateHeadless:evaluateHeadless,getAllProperties:getAllProperties
}),register(null,{"immediate.browserjs":plugin})}return main.consumes=["Evaluator","ui"],main.provides=["immediate.browserjs"],
main})


define("plugins/c9.ide.immediate/evaluator",[],function(require,module,exports){function main(options,imports,register){
function Evaluator(developer,deps,options){function evaluate(expression,cell,cb){return emit("evaluate",{
expression:expression,cell:cell,callback:cb})}function canEvaluate(expression){return emit("canEvaluate",{
expression:expression})}function draw(parent){return emit("draw",{aml:parent,html:parent.$int})}var plugin=new Plugin(developer,deps),emit=plugin.getEmitter()


emit.setMaxListeners(1e3)
var caption=options.caption,id=options.id,mode=options.mode,message=options.message
return plugin.on("load",function(){immediate.addEvaluator(caption,id,plugin,plugin)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("unload",function(){immediate.removeEvaluator(id)}),plugin.freezePublicAPI.baseclass(),
plugin.freezePublicAPI({get mode(){return mode},get message(){return message},get caption(){return caption

},_events:["evaluate","canEvaluate"],evaluate:evaluate,canEvaluate:canEvaluate,draw:draw}),plugin}var Plugin=imports.Plugin,immediate=imports.immediate


register(null,{Evaluator:Evaluator})}return main.consumes=["Plugin","immediate"],main.provides=["Evaluator"],
main})


define("plugins/c9.ide.ace.repl/repl_cell",[],function(require,exports,module){"use strict"
var Range=(require("ace/anchor").Anchor,require("ace/range").Range),ReplCell=(Range.comparePoints,require("ace/lib/lang"),
function(options,session){this.session=session,this.type=options.type});(function(){this.insert=function(pos,text){
"string"==typeof pos&&(text=pos,pos=this.getRange().end),this.session.insert(pos,text)},this.setPlaceholder=function(str){
this.placeholder=str},this.setMode=function(){},this.setWaiting=function(val){this.waiting=val,this.session.repl.$updateSession()

},this.prompt="",this.promptType=null,this.setPrompt=function(str,type){this.prompt!=str&&(this.promptType=type,
this.prompt=(str||"")+"   ",this.session.maxPromptLength=Math.max(this.session.maxPromptLength||0,this.prompt.length))

},this.setValue=function(val,selection){if(this.session){if(null==val)return this.remove()
this.lineWidget&&val.trim()&&this.removeWidget(),this.$updateRange()
var pos=this.session.doc.replace(this.range,val)
this.range.setEnd(pos),1==selection?this.session.selection.setRange({start:this.range.end,end:this.range.end
}):selection==-1&&this.session.selection.setRange({start:this.range.start,end:this.range.start})}},this.getValue=function(){
return this.session?this.session.doc.getTextRange(this.range):""},this.getRange=function(){return this.$updateRange(),
this.range},this.$updateRange=function(row){var cells=this.session.replCells
for(null==row&&(row=cells.indexOf(this)),i=row;i>0&&!cells[i];i--);var cell=cells[i]
if(cell){cell.row=i
for(var i=row+1;i<this.session.getLength()&&!cells[i];i++);return cell.endRow=i-1,cell.range=new Range(cell.row,0,cell.endRow,Number.MAX_VALUE),
this.range}},this.removeWidget=function(){if(this.lineWidget){var w=this.lineWidget
this.lineWidget=null,this.session.repl.removeLineWidget(w)}},this.addWidget=function(options){this.lineWidget&&this.removeWidget(),
this.setValue(""),options.row=this.range.end.row,this.lineWidget=options,this.session.repl.addLineWidget(this.lineWidget)

},this.destroy=function(){this.removeWidget(),this.session=null},this.remove=function(){this.session&&this.session.repl.removeCell(this)

}}).call(ReplCell.prototype),exports.ReplCell=ReplCell})


define("ace/requirejs/text!plugins/c9.ide.ace.repl/repl.css",[],"")


define("plugins/c9.ide.ace.repl/repl",[],function(require,exports,module){"use strict"
function setPos(pos,newPos){pos.row=newPos.row,pos.column=newPos.column}function clipPos(pos,range){comparePoints(pos,range.start)<0?setPos(pos,range.start):comparePoints(pos,range.end)>0&&setPos(pos,range.end)

}function setClipToRange(anchor,range){return anchor.$clip_default=Anchor.prototype.$clipPositionToDocument,
range?void(anchor.$clipPositionToDocument=function(row,column){var pos=this.$clip_default(row,column)


return clipPos(pos,range),pos}):void(anchor.$clipPositionToDocument=anchor.$clip_default)}var dom=require("ace/lib/dom"),Anchor=require("ace/anchor").Anchor,HashHandler=require("ace/keyboard/hash_handler").HashHandler,Range=require("ace/range").Range,comparePoints=Range.comparePoints,ReplCell=require("./repl_cell").ReplCell,css=require("ace/requirejs/text!./repl.css")


dom.importCssString(css,"ace_repl")
var replCommands=new HashHandler([{name:"newLine",bindKey:{win:"Shift-Return|Alt-Enter",mac:"Shift-Return|Alt-Enter"
},exec:function(editor){editor.insert("\n")},scrollIntoView:"cursor"},{name:"eval",bindKey:"Ctrl-Return|Cmd-Return",
exec:function(editor){return editor.repl.eval(!0)},scrollIntoView:"cursor"},{name:"evalOrNewLine",bindKey:"Return",
exec:function(editor){return editor.repl.eval()},scrollIntoView:"cursor"},{name:"down",bindKey:"down",
exec:function(editor){return editor.repl.navigateHistory(1)},scrollIntoView:"center-animate"},{name:"up",
bindKey:"up",exec:function(editor){return editor.repl.navigateHistory(-1)},scrollIntoView:"center-animate"
},{name:"prevCell",bindKey:{mac:"cmd-up",win:"ctrl-up"},exec:function(editor){return editor.repl.moveByCells(-1,null,"input")

},scrollIntoView:"center-animate"},{name:"nextCell",bindKey:{mac:"cmd-down",win:"ctrl-down"},exec:function(editor){
return editor.repl.moveByCells(1,null,"input")},scrollIntoView:"center-animate"},{name:"firstCell",bindKey:{
mac:"alt-up|ctrl-home",win:"ctrl-home"},exec:function(editor){return editor.repl.moveByCells("first",null,"input")

},scrollIntoView:"center-animate"},{name:"lastCell",bindKey:{mac:"alt-down|ctrl-end",win:"ctrl-end"},
exec:function(editor){return editor.repl.moveByCells("last",null,"input")},scrollIntoView:"center-animate"
},{name:"clear",bindKey:{mac:"cmd-k",win:"Alt-k"},exec:function(editor){return editor.repl.clear()},scrollIntoView:"center-animate"
},{name:"removeOutputCell",bindKey:{mac:"Shift-delete",win:"Shift-delete"},exec:function(editor){return editor.repl.removeOutputCell()

},scrollIntoView:"cursor"},{name:"newInputCell",bindKey:{mac:"ctrl-insert",win:"ctrl-insert"},exec:function(editor){
editor.repl.insertCell()},scrollIntoView:"center-animate"}])
for(var key in replCommands.commands)replCommands.commands[key].isRepl=!0
var Repl=function(session,options){options=options||{},this.history=new History,this.evaluator=options.evaluator||new Evaluator,
this.session=session,this._replResize=this._replResize.bind(this),this.updateCellsOnChange=this.updateCellsOnChange.bind(this),
this.updateWidgets=this.updateWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],
this.detach=this.detach.bind(this),this.session.on("change",this.updateCellsOnChange),session.repl=this,
session.replCells=[]
var pos={row:session.getLength(),column:0}
!session.getValue()&&options.message&&(pos=session.insert(pos,options.message)),session.getValue()&&this.insertCell({
row:0,column:0},{type:"start"},!0)
var last=this.insertCell(pos,{type:"input"})
this.select(last.range.end),this.session.on("changeMode",function(){session.getFoldWidget=function(row){
if(session.replCells[row]&&!session.replCells[row+1]&&row!=session.replCells.length-1&&!session.replCells[row].lineWidget)return"start"

},session.getFoldWidgetRange=function(row){return session.repl.getCellAt(row).range},session.bgTokenizer.$tokenizeRow=session.repl.$tokenizeRow,
session.bgTokenizer.session=session}),session.getRowLength=function(row){if(this.lineWidgets)var h=this.lineWidgets[row]&&this.lineWidgets[row].rowCount||0
else h=0
return this.$useWrapMode&&this.$wrapData[row]?this.$wrapData[row].length+1+h:1+h},session.$getWidgetScreenLength=function(){
var screenRows=0
return this.lineWidgets.forEach(function(w){w&&w.rowCount&&(screenRows+=w.rowCount)}),screenRows},session.gutterRenderer=this.gutterRenderer,
this.session.setMode(options.mode),this.$updateSession(),this._addCursorMonitor()};(function(){this.message="\nWelcome to ace repl!\n",
this.setEvaluator=function(evaluator){this.evaluator=evaluator},this.getEvaluator=function(){return this.evaluator

},this._replResize=function(oldSize,renderer){var session=renderer.session,size=renderer.$size,dh=size.scrollerHeight-oldSize.scrollerHeight


if(!(dh>0)){var oldMaxScrollTop=renderer.layerConfig.maxHeight-oldSize.scrollerHeight+renderer.scrollMargin.v,scrollTop=session.getScrollTop()


scrollTop>oldMaxScrollTop-renderer.layerConfig.lineHeight&&session.setScrollTop(scrollTop-dh)}},this.gutterRenderer={
getText:function(session,row){var cell=session.replCells[row]
return cell?cell.prompt||"":row+""},getWidth:function(session,lastLineNumber,config){var chars=Math.max(lastLineNumber.toString().length,session.maxPromptLength||0)


return chars*config.characterWidth}},this._addCursorMonitor=function(){this._updateCursorVisibility=this._updateCursorVisibility.bind(this),
this.$cursorChanged=!1
var markDirty=function(){this.$cursorChanged=!0}.bind(this)
this.session.selection.on("changeSelection",markDirty),this.session.selection.on("changeCursor",markDirty)

},this._updateCursorVisibility=function(e,renderer){if(this.$cursorChanged){this.$cursorChanged=!1
var cell=this.getCurrentCell(),visible=cell&&"input"===cell.type
visible!=renderer.$cursorLayer.inEditableCell&&(renderer.$cursorLayer.inEditableCell=visible,renderer.$cursorLayer.element.style.opacity=visible?"":"0")

}},this.onMouseUp=function(e){var editor=e.editor
editor.repl.$mouseTimer&&clearTimeout(editor.repl.$mouseTimer),editor.repl.$mouseTimer=setTimeout(function(){
var sel=editor.selection
if(sel.isEmpty()&&!sel.rangeCount){var cell=editor.repl.getCurrentCell()
if("input"!=cell.type){var r=cell.getRange()
r&&(sel.lead.row-r.start.row)/(r.end.row-r.start.row)<.1&&(cell=editor.repl.getSiblingCell(-1,cell,"input")),
cell||(cell=editor.repl.getSiblingCell(1,cell,"input")),cell&&editor.repl.select(cell.range.end)}}},250)

},this.beforeCommand=function(e){var editor=e.editor,command=e.command,cell=editor.repl.getCurrentCell()


if(editor.curReplOp||(editor.curReplOp={command:command,cell:cell}),!command.isRepl){if(cell&&cell.lineWidget&&(editor.repl.moveByCells(-1,cell),
e.preventDefault()),cell&&"input"!=cell.type)return void(command.readOnly||e.preventDefault())
if(cell){var op=editor.curReplOp
if(command.readOnly?(op.clipSelection="before",editor.lastReplOp&&editor.lastReplOp.command===command&&(op.clipSelection="after")):command&&(op.clipSelection="before"),
"before"==op.clipSelection){var range=cell.getRange()
editor.repl.$trackedRange=range,setClipToRange(editor.selection.lead,range),setClipToRange(editor.selection.anchor,range)

}}}},this.afterCommand=function(e){var editor=e.editor,op=editor.curReplOp
if(editor.curReplOp=null,editor.lastReplOp=op,op){var command=op.command
if("before"==op.clipSelection)setClipToRange(editor.selection.lead,!1),setClipToRange(editor.selection.anchor,!1)
else if("after"==op.clipSelection){var range=editor.selection.toOrientedRange()
op.cell&&(range.clip(op.cell.getRange()),editor.selection.fromOrientedRange(range))}editor.repl.$trackedRange=null,
command.readOnly||command.isRepl||editor.repl.ensureLastInputCell()}},this.attach=function(editor){editor.repl&&editor.repl!=this&&editor.repl.detach(),
this.editor!=editor&&(this.detach(),this.editor=editor,this.editor.on("changeSession",this.detach),editor.keyBinding.addKeyboardHandler(replCommands),
editor.commands.on("exec",this.beforeCommand),editor.commands.on("afterExec",this.afterCommand),editor.on("mouseup",this.onMouseUp),
editor.repl=this,editor.renderer.on("beforeRender",this.measureWidgets),editor.renderer.on("afterRender",this.updateWidgets),
editor.renderer.on("afterRender",this._updateCursorVisibility),editor.renderer.on("resize",this._replResize))

},this.detach=function(e){if(console.log("detach",this.session.getLength(),e),!e||e.session!=this.session){
var editor=this.editor
editor&&(editor.keyBinding.removeKeyboardHandler(replCommands),editor.commands.off("exec",this.beforeCommand),
editor.commands.off("afterExec",this.afterCommand),editor.off("mouseup",this.onMouseUp),editor.off("changeSession",this.detach),
delete editor.renderer.$gutterLayer.update,this.editor=null,editor.repl=null,editor.renderer.off("beforeRender",this.measureWidgets),
editor.renderer.off("afterRender",this.updateWidgets),this.session.lineWidgets.forEach(function(w){w&&w.el&&w.el.parentNode&&(w._inDocument=!1,
w.el.parentNode.removeChild(w.el))}),editor.renderer.off("afterRender",this._updateCursorVisibility),
editor.renderer.off("resize",this._replResize))}},this.navigateHistory=function(dir){var cell=this.getCurrentCell()


if(!cell||"input"!=cell.type)return!1
var row=this.editor.getCursorPosition().row
if(1==dir&&cell.range.end.row!=row)return!1
if(dir==-1&&cell.range.start.row!=row)return!1
var val=cell.getValue()
val=this.history.navigateList(dir==-1?"prev":"next",val),"string"==typeof val&&(dir=-dir,dir==-1&&val.indexOf("\n")==-1&&(dir=1),
cell.setValue(val,dir))},this.getCurrentCell=function(returnAdjacent){var range=this.editor.getSelectionRange(),cell=this.getCellAt(range.start)


if(returnAdjacent||cell&&cell.range.contains(range.end.row,range.end.column))return cell},this.getCellAt=function(pos){
void 0==pos?pos={row:this.session.getLength(),column:0}:"number"==typeof pos&&(pos={row:pos,column:0})


for(var cells=this.session.replCells,i=pos.row;i>0&&!cells[i];i--);var cell=cells[i]
if(cell){cell.row=i
for(var i=pos.row+1,l=this.session.getLength();i<l&&!cells[i];i++);return cell.endRow=Math.min(i-1,l-1),
cell.range=new Range(cell.row,0,cell.endRow,Number.MAX_VALUE),cell}},this.getSiblingCell=function(dir,cell,type){
if(dir==-1){var pos=cell.range.clone().start
pos.row--}else{var pos=cell.range.clone().end
pos.row++}if(cell=this.getCellAt(pos))return type&&cell.type!=type?this.getSiblingCell(dir,cell,type):cell

},this.moveByCells=function(dir,cell,type){if(cell="first"==dir?this.getFirstCell(type):"last"==dir?this.getLastCell(type):this.getSiblingCell(dir,cell||this.getCurrentCell(),type))return this.select(cell.range.end)

},this.getFirstCell=function(type){var cell=this.getCellAt(0)
return type&&cell.type!=type?this.getSiblingCell(1,cell,type):cell},this.getLastCell=function(type){var cell=this.getCellAt(null)


return type&&cell.type!=type?this.getSiblingCell(-1,cell,type):cell},this.removeOutputCell=function(cell){
cell=cell||this.getCurrentCell(),cell&&"input"==cell.type&&(cell=cell.output),cell&&this.removeCell(cell)

},this.removeCell=function(cell){var range=cell.getRange().clone()
range.start.row--,range.start.column=this.session.getLine(range.start.row).length,this.session.replace(range,"")

},this.clear=function(){this.session.setValue(""),this.ensureLastInputCell()},this.ensureLastInputCell=function(){
var end={row:this.session.getLength(),column:0},cell=this.getCellAt(end)
cell&&"input"==cell.type||this.insertCell(end,{type:"input"},!0)},this.select=function(pos){var sel=this.session.selection


"number"==typeof pos.row&&"number"==typeof pos.column&&(sel.rangeCount&&sel.toSingleRange(),sel.setRange(Range.fromPoints(pos,pos)))

},this.eval=function(force,cell){if(cell=cell||this.getCurrentCell()){force||"input"==cell.type||(cell=cell.input||this.getSiblingCell(1,cell)||this.getSiblingCell(-1,cell))


var str=cell.getValue()
if(force||this.evaluator.canEvaluate(str)){if(this.session.getUndoManager().reset(),!cell.output||!cell.output.session){
cell.output=this.insertCell(cell.range.end,{type:"output"})
var newCell=this.getSiblingCell(1,cell.output)}this.history.add(str),cell.output.waiting=!0,cell.output.input=cell


var self=this,success=this.evaluator.evaluate(str,cell.output,function(result){cell.output.waiting=!1,
void 0!==result&&cell.output.setValue(result)
var renderer=self.editor.renderer
renderer.scrollSelectionIntoView(cell.range.end,cell.range.start),renderer.scrollCursorIntoView()})
success!==!1&&newCell&&"input"!=newCell.type&&(newCell=this.insertCell(cell.output.range.end,{type:"input"
}),this.session.selection.setRange(newCell.range)),cell.output.waiting&&cell.output.setPlaceholder("...")

}else this.editor.insert("\n")
this.evaluator.afterEvaluate&&this.evaluator.afterEvaluate(cell,newCell)}},this.insertCell=function(pos,options,allowSplit){
pos=pos||this.session.selection.getCursor(),options||(options={type:"input"})
var cell=!allowSplit&&this.getCellAt(pos)
cell&&(pos=cell.range.end,pos=this.session.insert(pos,"\n"))
var newCell=new ReplCell(options,this.session)
pos.row=Math.max(0,Math.min(pos.row,this.session.getLength()-1))
var range=Range.fromPoints(pos,pos)
range.end.column=Number.MAX_VALUE,range.start.column=0,newCell.range=range,newCell.row=range.end.row
var oldCell=this.session.replCells[pos.row]
return oldCell&&oldCell.destroy(),this.session.replCells[pos.row]=newCell,this.$updateSession(),newCell

},this.$updateSession=function(){var session=this.session
session.$decorations=[]
var lastType=""
session.replCells.forEach(function(c,row){if(!c)return void(lastType&&(session.$decorations[row]=lastType))


var dec=""
"input"==c.type?(dec="repl_prompt ",lastType="repl_dots "):"output"==c.type&&(dec="repl_output ",lastType="repl_nonum "),
c&&c.waiting&&(dec+="waiting "),session.$decorations[row]=dec}),session.addGutterDecoration(0,session.$decorations[0]),
session.lineWidgets=session.replCells.map(function(c){return c&&c.lineWidget})},this.updateCellsOnChange=function(delta){
var startRow=delta.start.row,len=delta.end.row-startRow,range=this.$trackedRange,cells=this.session.replCells


if(0===len);else if("remove"==delta.action){var removed=cells.splice(startRow+1,len)
removed.forEach(function(cell){cell&&cell.destroy()}),range&&range.start.row<=startRow&&range.end.row>=startRow&&(this.$trackedRange.end.row=Math.max(this.$trackedRange.end.row-len,this.$trackedRange.start.row)),
cells.length<=1&&this.ensureLastInputCell()}else{var args=Array(len)
args.unshift(startRow+1,0),cells.splice.apply(cells,args),range&&range.start.row<=startRow&&range.end.row>=startRow&&(this.$trackedRange.end.row+=len)

}this.$updateSession(),this.session._signal("updateCells")},this.$tokenizeRow=function(row){var line=this.doc.getLine(row),state=this.states[row-1],cell=this.session.replCells[row]


cell||state||(cell=this.session.repl.getCellAt(row)),cell&&(state=cell.tokenizerState||cell.type,this.tokenizer.regExps[state]||(state="start"))


var data=this.tokenizer.getLineTokens(line,state,row)
return this.states[row]+""!=data.state+""?(this.states[row]&&this.states[row].cellData||(this.states[row]=data.state),
this.lines[row+1]=null,this.currentLine>row+1&&(this.currentLine=row+1)):this.currentLine==row&&(this.currentLine=row+1),
this.session.repl.onTokenizeRow&&(data.tokens=this.session.repl.onTokenizeRow(row,data.tokens)||data.tokens),
this.lines[row]=data.tokens},this.addLineWidget=function(w){var renderer=this.editor.renderer
return w.html&&!w.el&&(w.el=dom.createElement("div"),w.el.innerHTML=w.html),w.el&&(dom.addCssClass(w.el,"ace_lineWidgetContainer"),
renderer.container.appendChild(w.el),w._inDocument=!0),w.coverGutter||(w.el.style.zIndex=3),w.pixelHeight||(w.pixelHeight=w.el.offsetHeight),
null==w.rowCount&&(w.rowCount=w.pixelHeight/renderer.layerConfig.lineHeight),this.session._emit("changeFold",{
data:{start:{row:w.row}}}),this.$updateSession(),this.updateWidgets(null,renderer),w},this.removeLineWidget=function(w){
if(w._inDocument=!1,w.el&&w.el.parentNode&&w.el.parentNode.removeChild(w.el),w.editor&&w.editor.destroy)try{
w.editor.destroy()}catch(e){}this.session._emit("changeFold",{data:{start:{row:w.row}}}),this.$updateSession()

},this.onWidgetChanged=function(w){this.session._changedWidgets.push(w),this.editor&&this.editor.renderer.updateFull()

},this.measureWidgets=function(e,renderer){var ws=this.session._changedWidgets,config=renderer.layerConfig


if(ws&&ws.length){for(var min=1/0,i=0;i<ws.length;i++){var w=ws[i].lineWidget
w._inDocument||(w._inDocument=!0,renderer.container.appendChild(w.el)),w.h=w.el.offsetHeight,w.fixedWidth||(w.w=w.el.offsetWidth,
w.screenWidth=Math.ceil(w.w/config.characterWidth))
var rowCount=w.h/config.lineHeight
w.coverLine&&(rowCount-=this.session.getRowLineCount(w.row)),w.rowCount!=rowCount&&(w.rowCount=rowCount,
w.row<min&&(min=w.row))}min!=1/0&&(this.session._emit("changeFold",{data:{start:{row:min}}}),this.session.lineWidgetWidth=null),
this.session._changedWidgets=[]}},this.updateWidgets=function(e,renderer){var config=renderer.layerConfig,cells=this.session.replCells


if(cells){for(var first=Math.min(this.firstRow,config.firstRow),last=Math.max(this.lastRow,config.lastRow,cells.length);first>0&&!cells[first];)first--


this.firstRow=config.firstRow,this.lastRow=config.lastRow,renderer.$cursorLayer.config=config
for(var i=first;i<=last;i++){var c=cells[i],w=c&&c.lineWidget
if(w&&w.el){w._inDocument||(w._inDocument=!0,renderer.container.appendChild(w.el))
var top=renderer.$cursorLayer.getPixelPosition({row:i,column:0},!0).top
w.coverLine||(top+=config.lineHeight*this.session.getRowLineCount(w.row)),w.el.style.top=top-config.offset+"px"


var left=w.coverGutter?0:renderer.gutterWidth
w.fixedWidth||(left-=renderer.scrollLeft),w.el.style.left=left+"px",w.fixedWidth?w.el.style.right=renderer.scrollBar.getWidth()+"px":w.el.style.right=""

}}}}}).call(Repl.prototype)
var History=function(){this._data=[],this._tempData=Object.create(null),this.position=0}
History.prototype={add:function(text){return text&&this._data[0]!==text&&this._data.unshift(text),delete this._tempData[this.position],
this.position=-1,this._tempData[-1]="",this._data},navigateList:function(type,value){var lines=this._data


if(value&&lines[this.position]!=value&&(this._tempData[this.position]=value),"next"==type){if(this.position<=0)return this.position=-1,
this._tempData[this.position]||""
var next=Math.max(0,this.position-1)}else"prev"==type?next=Math.min(lines.length-1,this.position+1):"last"==type?next=Math.max(lines.length-1,0):"first"==type&&(next=0)


if(lines[next]&&next!=this.position)return this.position=next,this._tempData[next]||lines[next]}},Range.prototype.clip=function(range){
clipPos(this.start,range),clipPos(this.end,range)}
var Evaluator=function(){};(function(){this.canEvaluate=function(str){return!!str.trim()},this.evaluate=function(str,cell,cb){
cb("evaluator is missing!")}}).call(Evaluator.prototype),Repl.fromEditor=function(editor,options){var repl=new Repl(editor.session,options)


return repl.attach(editor),editor.setOption("showPrintMargin",!1),repl},exports.Repl=Repl})


define("text!plugins/c9.ide.immediate/style.css",[],"")


define("plugins/c9.ide.immediate/immediate",[],function(require,exports,module){function main(options,imports,register){
function search(cb){return!tabManager.getTabs().every(function(tab){return"immediate"!=tab.editorType||(tabManager.focusTab(tab),
cb&&cb(null,tab),!1)})}function Immediate(){function addType(caption,value,plugin){var item=menu.appendChild(new ui.item({
caption:caption,value:value,type:"radio"}))
ddType.selectedType==value&&ddType.setAttribute("caption",caption),plugin.addOther(function(){item.parentNode&&item.parentNode.removeChild(item)

})}function setActiveEvaluator(value){ddType.setType(value)}function getActiveEvaluator(){return ddType.selectedType

}function abort(){var session=currentDocument.getSession()
session.repl.evaluator.abort&&session.repl.evaluator.abort()}var ddType,btnClear,ace,menu,statusbar,Baseclass=editors.findEditor("ace"),plugin=new Baseclass((!0),[],main.consumes)


plugin.on("draw",function(e){function update(e){if(!e||e.value){var selectedItem,items=menu.childNodes,value=ddType.selectedType||items[0].getAttribute("value")


items.forEach(function(item){var selected=item.getAttribute("value")==value
selected&&(selectedItem=item),item.setAttribute("selected",selected)}),ddType.setType(value)}}function setTheme(e){
theme=e.theme,theme&&(btnClear.parentNode.$ext.className="bar-status "+(theme.isDark?"ace_dark":""))}
aceStatus.draw(),statusbar=e.tab.appendChild(new ui.bar({skin:"bar-status",skinset:"c9statusbar",zindex:1e4,
height:23,style:"position:absolute;bottom:3px;right:5px;"})),menu=new ui.menu({htmlNode:document.body,
render:"runtime","class":"mnuSbPrefs"}),plugin.addElement(menu),ddType=ui.insertByIndex(statusbar,new ui.button({
skin:"label",style:"cursor:pointer",margin:"1 7 0 0",submenudir:"up",submenu:menu}),1e3,plugin),btnClear=ui.insertByIndex(statusbar,new ui.button({
margin:"0 3 0 0",skin:"btn_console",skinset:"c9statusbar","class":"clear",submenudir:"up"}),1e5,plugin),
ace=plugin.ace,ace.setOption("printMargin",!1),ace.setOption("scrollPastEnd",0),ace.setOption("showFoldWidgets",!1),
ace.setOption("highlightActiveLine",!1),ace.setOption("highlightGutterLine",!1),ace.renderer.setScrollMargin(0,10),
commands.addCommand({bindKey:"Ctrl-C",name:"abortimmediateexpression",isAvailable:function(){var tab=tabManager.focussedTab


if(tab&&"immediate"==tab.editorType&&tab.editor&&tab.editor.ace)return tab.editor.ace.selection.isEmpty()&&tab.editor.ace.isFocused()

},exec:function(){abort()}},plugin),e.htmlNode.className+=" immediate",e.tab.textselect=!0,ddType.on("afterchange",function(){
currentDocument&&currentDocument.getSession().changeType(ddType.selectedType)}),btnClear.on("click",function(){
plugin.clear(),btnClear.blur()})
for(var type in replTypes){var t=replTypes[type]
addType(t.caption,type,t.plugin)}handle.on("addEvaluator",function(e){addType(e.caption,e.id,e.plugin)

}),menu.on("itemclick",function(e){var value=e.relatedNode.getAttribute("value")
ddType.setType(value)}),ddType.setType=function(type){if(type!=ddType.selectedType){var caption=replTypes[type]?replTypes[type].caption:type+" (Unknown)"


ddType.selectedType=type,ddType.setAttribute("caption",caption),ddType.dispatchEvent("afterchange")}},
aceHandle.on("themeChange",setTheme,plugin),setTheme({theme:aceHandle.theme}),menu.on("prop.visible",update),
update()}),plugin.on("load",function(){})
var currentDocument
return plugin.on("documentLoad",function(e){var doc=e.doc,session=doc.getSession()
doc.undoManager.on("change",function(e){doc.undoManager.isAtBookmark()||doc.undoManager.bookmark()}),
doc.tooltip=doc.title="Immediate",session.repl||(session.changeType=function(type,noMessage){session.repl&&session.repl.type==type||handle.findEvaluator(type,function(type,evaluator){
if(session.type=type,session.repl||(session.repl=new Repl(session.session,{mode:evaluator.mode,evaluator:evaluator,
message:evaluator.message}),currentDocument&&currentDocument.getSession()==session&&session.repl.attach(ace)),
session.repl.type=type,session.repl.clear(),!noMessage){var cell=session.repl.insertCell({row:0,column:0
},{type:"comment"},!0)
cell.setValue(evaluator.message+"\n")}session.repl.evaluator&&session.repl.evaluator!=evaluator&&session.repl.evaluator.cleanUp("elements"),
session.repl.ensureLastInputCell(),session.repl.setEvaluator(evaluator),session.repl.session.setMode(evaluator.mode),
evaluator.draw(statusbar),doc.tooltip=doc.title="Immediate ("+evaluator.caption+")"})},doc.value="",session.changeType(session.type||defaultEvaluator||ddType.selectedType))

}),plugin.on("documentActivate",function(e){currentDocument=e.doc
var session=e.doc.getSession()
session.type&&ddType.setType(session.type),session.repl&&session.repl.attach(ace)}),plugin.on("documentUnload",function(e){
var session=e.doc.getSession()
session.repl&&session.repl.detach()}),plugin.on("getState",function(e){var session=e.doc.getSession()


if(session.repl){e.state.type=session.type
var data=session.repl.history._data,pos=session.repl.history.position
data.length>1e3&&(data=data.slice(-500)),e.state.history=data,e.state.pos=pos}}),plugin.on("setState",function(e){
if(e.state.type){var session=e.doc.getSession()
session.type=e.state.type,session.repl.history._data=e.state.history||[],"number"==typeof e.state.pos&&(session.repl.history.position=e.state.pos),
e.doc==currentDocument&&ddType.setType(e.state.type)}}),plugin.on("clear",function(){currentDocument&&plugin.focus()

}),plugin.on("focus",function(){}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){}),plugin.freezePublicAPI({get statusbar(){return statusbar},setActiveEvaluator:setActiveEvaluator,
getActiveEvaluator:getActiveEvaluator,isClipboardAvailable:function(e){return!e.fromKeyboard}}),plugin.load(null,"immediate"),
plugin}var theme,defaultEvaluator,editors=imports.editors,tabManager=imports.tabManager,ui=imports.ui,menus=imports.menus,commands=imports.commands,c9console=imports.console,aceHandle=imports.ace,aceStatus=imports["ace.status"],Repl=require("plugins/c9.ide.ace.repl/repl").Repl,extensions=[],handle=editors.register("immediate","Immediate Window",Immediate,extensions),emit=handle.getEmitter(),replTypes={}


handle.on("load",function(){handle.addElement(tabManager.getElement("mnuEditors").appendChild(new ui.item({
caption:"New Immediate Window",onclick:function(e){tabManager.open({active:!0,pane:this.parentNode.pane,
editorType:"immediate"},function(){})}}))),menus.addItemByPath("Window/New Immediate Window",new ui.item({
onclick:function(){tabManager.open({active:!0,pane:this.parentNode.pane,editorType:"immediate"},function(){})

}}),31,handle),commands.addCommand({name:"showimmediate",group:"Panels",exec:function(editor,args){function done(err,tab){
args&&args.evaluator&&tab.editor.setActiveEvaluator(args.evaluator)}search(done)||(c9console.show(),search(done)||tabManager.open({
editorType:"immediate",active:!0,pane:c9console.getPanes()[0]},done))}},handle),ui.insertCss(require("text!./style.css"),options.staticPrefix,handle)

}),handle.freezePublicAPI({get defaultEvaluator(){return defaultEvaluator},set defaultEvaluator(value){
defaultEvaluator=value},_events:["addEvaluator","removeEvaluator"],addEvaluator:function(caption,id,evaluator,plugin){
if(replTypes[id])throw new Error("An evaluator is already registered with the id '"+id+"'")
replTypes[id]={caption:caption,id:id,evaluator:evaluator,plugin:plugin},emit("addEvaluator",replTypes[id]),
plugin.addOther(function(){handle.removeEvaluator(id)})},findEvaluator:function(id,callback){id&&replTypes[id]?callback(id,replTypes[id].evaluator):handle.on("addEvaluator",function wait(e){
id&&e.id!=id||callback(e.id,replTypes[e.id].evaluator),handle.off("addEvaluator",wait)})},removeEvaluator:function(id){
emit("removeEvaluator",replTypes[id]),delete replTypes[id]}}),register(null,{immediate:handle})}return main.consumes=["editors","ui","settings","tabManager","ace","menus","commands","console","ace.status"],
main.provides=["immediate"],main})


define("text!plugins/c9.ide.run.debug/callstack.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar\n      id         = "datagrid"\n      skinset    = "debugger"\n      border     = "0">\n    </a:bar>\n</a:application>')


define("plugins/c9.ide.run.debug/callstack",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,modelSources=new TreeData,modelSources.$sortNodes=!1,modelFrames=new TreeData,
modelFrames.emptyMessage="No call stack to display",modelFrames.$sortNodes=!1,modelFrames.$sorted=!1,
modelFrames.columns=[{caption:"Function",value:"name",width:"60%",icon:"debugger/stckframe_obj.gif"},{
caption:"File",getText:function(node){var path=node.path
return"string"!=typeof path?"":("/"===path.charAt(0)&&(path=path.substr(1)),path+" :"+(node.line+1)+":"+(node.column+1))

},width:"40%"}],debug.on("attach",function(e){dbg=e.implementation,button&&button.setAttribute("disabled",!dbg.features.scripts)

}),debug.on("detach",function(e){dbg=null}),debug.on("stateChange",function(e){!plugin.enabled&&"enable"==e.action&&activeFrame&&(debug.activeFrame=activeFrame),
plugin[e.action](),"disable"==e.action&&"away"!=e.state&&clearFrames()}),debug.on("framesLoad",function(e){
function setFrames(frames,frame,force){var top=debug.findTopFrame(frames)
!loadFrames(frames,top,!1,force)||!force&&activeFrame&&activeFrame!=frame&&activeFrame!=top||(activeFrame=top,
emit("frameActivate",{frame:activeFrame}),debug.activeFrame=activeFrame,e.frame=activeFrame,emit("framesLoad",e))

}if(e.frames)return setFrames(e.frames,e.frame,!0)
dbg.getFrames(function(err,frames){setFrames(frames,e.frame)})
var frame=debug.findTopFrame(frames)
frame&&e.frame.path==frame.path&&e.frame.sourceId==frame.sourceId?(frame.line=e.frame.line,frame.column=e.frame.column,
setFrames(frames,frame,!0)):setFrames([e.frame],e.frame,!0)}),debug.on("break",function(e){e.exception&&e.frame?lastException=e:lastException&&(e.frame&&frameId(e.frame)==frameId(lastException.frame)||(lastException=null)),
debug.showDebugFrame(activeFrame)}),debug.on("frameActivate",function(e){updateMarker(e.frame,!0)}),debug.on("sources",function(e){
loadSources(e.sources)},plugin),debug.on("sourcesCompile",function(e){addSource(e.source)},plugin),void save.on("afterSave",function(e){
if("disconnected"!=debug.state){var script=findSourceByPath(e.path)
if(script&&dbg.features.liveUpdate&&!debug.disabledFeatures.liveUpdate){var lastError,value=e.document.value


dbg.setScriptSource(script,value,!1,function(err){if(err)return void(lastError!=err.message&&(lastError=err.message,
showError(err.message)))})}}},plugin))}function draw(options){if(!drawn){drawn=!0,ui.insertMarkup(options.aml,markup,plugin)


var datagridEl=plugin.getElement("datagrid")
datagrid=new Tree(datagridEl.$ext),datagrid.renderer.setTheme({cssClass:"blackdg"}),datagrid.setOption("maxLines",200),
datagrid.setDataProvider(modelFrames),panels.on("afterAnimate",function(e){panels.isActive("debugger")&&datagrid&&datagrid.resize()

}),tabs.on("tabAfterActivateSync",function(e){updateMarker(activeFrame)},plugin),tabs.on("open",function(e){
activeFrame&&updateMarker(activeFrame)},plugin),datagrid.on("userSelect",function(e){var frame=datagrid.selection.getCursor()


setActiveFrame(frame,!0)})
var contextMenu=new Menu({items:[new MenuItem({value:"restart",caption:"Restart Frame"})]},plugin)
contextMenu.on("itemclick",function(e){"restart"==e.value&&dbg.restartFrame(activeFrame,function(){})

}),contextMenu.on("show",function(e){var selected=datagrid.selection.getCursor()
contextMenu.items[0].disabled=!selected||!dbg}),datagridEl.setAttribute("contextmenu",contextMenu.aml)


var hbox=debug.getElement("hbox")
menu=hbox.ownerDocument.documentElement.appendChild(new ui.menu({style:"top: 56px;left: 803px;width: 350px;opacity: 1;border: 0px;padding: 0px;background-color: transparent;margin: -3px 0px 0px;box-shadow: none;",
childNodes:[]})),button=hbox.appendChild(new ui.button({id:"btnScripts",tooltip:"Available internal and external scripts",
icon:"scripts.png",right:"0",top:"0","class":"scripts",skin:"c9-menu-btn",disabled:!dbg||!dbg.features.scripts
})),plugin.addElement(menu,button),menu.on("prop.visible",function(e){e.value&&!menu.reopen&&(list.resize(),
menu.resize())}),menu.resize=function(){menu.visible&&(list.renderer.setOption("maxLines",Math.floor(window.innerHeight/28*3/4)),
setTimeout(function(){menu.opener&&(menu.reopen=!0,menu.$ext.style.overflowY="",menu.display(null,null,!0,menu.opener),
menu.$ext.style.overflowY="",menu.reopen=!1)},10))}
var list=new Tree
menu.$ext.appendChild(list.container),list.setDataProvider(modelSources),list.renderer.setTheme({cssClass:"blackdg"
}),list.on("click",function(e){var selected=list.selection.getCursor()
debug.openFile({scriptId:selected.id,path:selected.path,generated:!0}),menu.hide()},plugin),list.renderer.setScrollMargin(10,10),
list.container.className="ace_tree c9menu list_dark",list.container.style.width="inherit",button.setAttribute("submenu",menu),
layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".blackdg .row","height"),10)||24


modelFrames.rowHeight=height,modelSources.rowHeight=height,e.changed&&datagrid.resize(!0)})}}function setActiveFrame(frame,fromDG){
activeFrame=frame,frames.length&&(!fromDG&&datagrid&&(frame?datagrid.select(frame):(modelFrames.setRoot({}),
frames=[])),frame&&debug.showDebugFrame(frame,function(){updateMarker(frame)}),emit("frameActivate",{
frame:activeFrame}),debug.activeFrame=activeFrame)}function addMarker(session,type,row){var marker=session.addMarker(new Range(row,0,row,1),"ace_"+type,"fullLine")


session.addGutterDecoration(row,type),session["$"+type+"Marker"]={lineMarker:marker,row:row}}function removeMarker(session,type){
var markerName="$"+type+"Marker"
session.removeMarker(session[markerName].lineMarker),session.removeGutterDecoration(session[markerName].row,type),
session[markerName]=null}function removeMarkerFromSession(session){session.$stackMarker&&removeMarker(session,"stack"),
session.$stepMarker&&removeMarker(session,"step"),session.$exceptionWidget&&session.$exceptionWidget.destroy()

}function addExceptionWidget(editor,ev){var session=editor.session
session.widgetManager||(session.widgetManager=new LineWidgets(session),session.widgetManager.attach(editor))


var oldWidget=session.$exceptionWidget
oldWidget&&oldWidget.destroy()
var row=ev.frame.line,column=ev.frame.column||0,w={row:row,fixedWidth:!0,coverGutter:!0,el:document.createElement("div"),
type:"debuggerException"},el=w.el.appendChild(document.createElement("div")),arrow=w.el.appendChild(document.createElement("div"))


arrow.className="error_widget_arrow ace_error"
var left=editor.renderer.$cursorLayer.getPixelPosition({row:row,column:column}).left
arrow.style.left=left+editor.renderer.gutterWidth-5+"px",w.el.className="error_widget_wrapper",el.className="error_widget ace_error",
el.textContent=ev.exception.value,el.appendChild(document.createElement("div")),w.destroy=function(){
session.$exceptionWidget=null,session.off("change",w.destroy),session.widgetManager.removeLineWidget(w)

},session.$exceptionWidget=w,session.on("change",w.destroy),editor.session.widgetManager.addLineWidget(w),
w.el.onmousedown=function(e){e.stopPropagation()},editor.renderer.scrollCursorIntoView(null,.5,{bottom:w.el.offsetHeight
})}function updateMarker(frame,scrollToLine){if(!frame)return void tabs.getPanes().forEach(function(pane){
var tab=pane.getTab()
if(tab&&tab.editor&&"ace"==tab.editor.type){var session=tab.document.getSession().session
removeMarkerFromSession(session)}})
var tab=frame&&tabs.findTab(frame.path),editor=tab&&tab.isActive()&&tab.editor
if(editor&&"ace"==editor.type){var session=tab.document.getSession().session
if(removeMarkerFromSession(session),frame){var path=tab.path,framePath=frame.path,row=frame.line
if(frame.istop){if((path==framePath||path=="/"+framePath)&&(row>=session.getLength()&&(row=session.getLength()-1),
addMarker(session,"step",row),scrollToLine)){var ace=tab.editor.ace,renderer=ace.renderer;(row<renderer.getFirstFullyVisibleRow()||row>renderer.getLastFullyVisibleRow())&&ace.scrollToLine(row,!0,!0)

}}else{path!=framePath&&path!="/"+framePath||addMarker(session,"stack",row)
var topFrame=debug.findTopFrame(frames)
path==topFrame.path&&addMarker(session,"step",topFrame.line)}lastException&&frameId(frame)==frameId(lastException.frame)&&addExceptionWidget(editor.ace,lastException)

}}}function findSourceByPath(path){for(var source,i=0,l=sources.length;i<l;i++)if((source=sources[i]).path==path)return source

}function frameId(frame){return[frame.path,frame.line,frame.column,frame.sourceId].join(":")}function updateFrame(frame,noRecur){
modelFrames._signal("change",frame),noRecur||(frame.variables?emit("scopeUpdate",{scope:frame,variables:frame.variables
}):dbg.getScope(activeFrame,frame,function(err,vars){return err?console.error(err):void emit("scopeUpdate",{
scope:frame,variables:vars})}),frame.scopes&&frame.scopes.forEach(function(scope){scope.variables&&emit("scopeUpdate",{
scope:scope})}))}function loadFrames(input,top,noRecur,force){frames=input,modelFrames.setRoot(frames),
setActiveFrame(activeFrame&&frames.indexOf(activeFrame)>-1?activeFrame:top)
for(var i=0,l=input.length;i<l;i++)updateFrame(input[i],noRecur)
return!0}function loadSources(input){sources=input,modelSources.setRoot(sources)}function clearFrames(){
setActiveFrame(null)}function addSource(source){sources.push(source),modelSources.setRoot(sources)}function updateAll(){
modelFrames.setRoot(frames)}var datagrid,modelSources,modelFrames,activeFrame,dbg,menu,button,lastException,DebugPanel=(imports.util,
imports.DebugPanel),ui=imports.ui,save=imports.save,layout=imports.layout,debug=imports["debugger"],tabs=imports.tabManager,panels=imports.panels,Menu=imports.Menu,MenuItem=imports.MenuItem,showError=imports["dialog.error"].show,Range=require("ace/range").Range,markup=require("text!./callstack.xml"),Tree=require("ace_tree/tree"),TreeData=require("ace_tree/data_provider"),LineWidgets=require("ace/line_widgets").LineWidgets,plugin=new DebugPanel("Ajax.org",main.consumes,{
caption:"Call Stack",index:200}),emit=plugin.getEmitter(),sources=[],frames=[],loaded=!1,drawn=!1
plugin.on("load",function(){load(),plugin.once("draw",draw)}),plugin.on("enable",function(){drawn&&(menu.enable(),
button.setAttribute("disabled",dbg&&!dbg.features.scripts),datagrid.enable())}),plugin.on("disable",function(){
drawn&&(menu.disable(),button.disable(),datagrid.disable())}),plugin.on("unload",function(){loaded=!1,
drawn=!1}),plugin.freezePublicAPI({get activeFrame(){return activeFrame},set activeFrame(frame){setActiveFrame(frame)

},get sources(){return sources},get frames(){return frames},updateAll:updateAll,updateFrame:updateFrame
}),register(null,{callstack:plugin})}return main.consumes=["DebugPanel","util","ui","tabManager","debugger","save","panels","Menu","MenuItem","dialog.error","layout"],
main.provides=["callstack"],main})


define("plugins/c9.ide.run.debug/debugpanel",[],function(require,module,exports){function main(options,imports,register){
function DebugPanel(developer,deps,options){function draw(e){amlFrame=ui.frame({htmlNode:e.html,buttons:"min",
activetitle:"min",caption:caption}),ui.insertByIndex(e.html,amlFrame.$ext,index,!1),plugin.addElement(amlFrame),
emit.sticky("draw",{aml:amlFrame,html:amlFrame.$int})}function show(){draw(),amlFrame.show()}function hide(){
amlFrame.hide()}var plugin=new Plugin(developer,deps),emit=plugin.getEmitter()
emit.setMaxListeners(1e3)
var amlFrame,caption=options.caption,index=options.index||100
return plugin.on("load",function(){debug.once("drawPanels",draw,plugin)}),plugin.freezePublicAPI.baseclass(),
plugin.freezePublicAPI({get aml(){return amlFrame},_events:["draw"],show:show,hide:hide}),plugin}var Plugin=imports.Plugin,ui=imports.ui,debug=imports["debugger"]


register(null,{DebugPanel:DebugPanel})}return main.consumes=["Plugin","ui","debugger"],main.provides=["DebugPanel"],
main})


define("plugins/c9.ide.run.debug/data/breakpoint",[],function(require,exports,module){function Breakpoint(options){
this.data=options||{},this.tagName="breakpoint"}var Data=require("./data")
Breakpoint.prototype=new Data(["id","path","text","line","column","serverOnly","actual","content","enabled","sourcemap","condition","hidden","invalid","moved"]),
Breakpoint.prototype.equals=function(breakpoint,ignoreInvalid){if(!breakpoint)return!1
if(this.data.id&&this.data.id===breakpoint.id)return!0
var matchLine=void 0!==breakpoint.line,left={}
if(left[this.data.path+":"+(matchLine?isNaN(this.data.moved)?this.data.line:this.data.moved:"")]=!0,this.data.sourcemap&&(left[this.data.sourcemap.source+":"+(matchLine?isNaN(this.data.moved)?this.data.sourcemap.line:this.data.moved:"")]=!0),
!this.data.actual||this.data.invalid&&ignoreInvalid||(left[this.data.path+":"+(matchLine?isNaN(this.data.moved)?this.data.actual.line:this.data.moved:"")]=!0),
left[breakpoint.path+":"+(matchLine?isNaN(breakpoint.moved)?breakpoint.line:breakpoint.moved:"")])return!0


var sm=breakpoint.sourcemap
if(sm&&left[sm.source+":"+(matchLine?isNaN(breakpoint.moved)?sm.line:breakpoint.moved:"")])return!0
var actual=breakpoint.actual
return!(!actual||!left[actual.path+":"+(matchLine?isNaN(breakpoint.moved)?actual.line:breakpoint.moved:"")])

},module.exports=Breakpoint})


define("text!plugins/c9.ide.run.debug/breakpoints.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:menu id="menu">\n        <a:item value="remove">Remove Breakpoint</a:item>\n        <a:item value="remove-all">Remove All Breakpoints</a:item>\n        <a:divider />\n        <a:item value="deactivate">Deactivate Breakpoints</a:item>\n        <a:divider />\n        <a:item value="enable-all">Enable All Breakpoints</a:item>\n        <a:item value="disable-all">Disable All Breakpoints</a:item>\n    </a:menu>\n    <a:bar id="list"\n      skinset      = "debugger"\n      skin         = "breakpoints"\n      border       = "0">\n    </a:bar>\n</a:application>')


define("text!plugins/c9.ide.run.debug/breakpoints.html",[],'<div class="condition_dialog">\n    <span class="arrow"></span>\n    <div class="message">The breakpoint will only stop if this is true:</div>\n    <div class="input"></div>\n</div>')


define("plugins/c9.ide.run.debug/breakpoints",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,model=new TreeData,model.$sortNodes=!1,model.renderRow=function(row,html,config){
var bp=this.visibleItems[row]
html.push('<div class="',this.getClassName(bp),'">','<span class="checkbox">&nbsp;</span>','<div class="content">',escapeHTML(bp.text||"")+":",bp.line+1,"<div>",escapeHTML(bp.content||"")+"&nbsp;","</div></div>",'<strong class="btnclose"> </strong>',"</div>")

},model.getEmptyMessage=function(){return"No breakpoints"},model.getClassName=function(node){return"bpItem "+(node.enabled?"checked ":" ")+node.className

},fs.on("afterRename",function(e){var oldPath=e.args[0],newPath=e.args[1],changed=!1
breakpoints.forEach(function(bp){if(bp.path&&0===bp.path.indexOf(oldPath)){var char=bp.path.charAt(oldPath.length)


char&&"/"!=char||(bp.path=bp.path.replace(oldPath,newPath),bp.text=basename(bp.path),changed=!0,updateBreakpointAtDebugger(bp,"add"))

}}),changed&&settings.save()}),tabs.on("tabAfterActivate",function(e){var tab=e.tab
if(tab&&tab.editor&&"ace"==tab.editor.type){var ace=tab.editor.ace
decorateAce(ace),updateDocument(tab.document),decorateDocument(tab.document)}}),aceHandle.on("create",function(e){
e.editor.on("createAce",decorateAce,plugin)},plugin),save.on("afterSave",function(e){var doc=e.document


dbg&&dbg.features.liveUpdate?dbg.on("setScriptSource",function(){updateMovedBreakpoints(doc)}):updateMovedBreakpoints(doc)

}),debug.on("attach",function(e){dbg=e.implementation,e.breakpoints.forEach(function(bp){bp.serverOnly&&setBreakpoint(bp,!0)

}),enableBreakpoints||deactivateAll(!0)}),debug.on("detach",function(e){dbg=null}),debug.on("stateChange",function(e){
plugin[e.action]()}),debug.on("getBreakpoints",function(){return breakpoints}),debug.on("breakpointUpdate",function(e){
var bp=e.breakpoint
if(!bp.hidden){if(bp.actual){var tab=tabs.findTab(bp.path)
if(tab){var session=tab.document.getSession()
if(session&&session.session){var len=session.session.getLength()
if(bp.actual.line==len)bp.actual.line=len-1
else if(bp.actual.line>len)return void clearBreakpoint(bp)}}}var loc=bp.actual||bp,bps=findBreakpoints(bp.path,loc.line)


if(bps.length>1)for(var bpi,i=0,l=bps.length;i<l;i++)bpi=bps[i],bpi!=bp&&(bpi.actual&&bpi.actual.line!=bpi.line?bpi.invalid=!0:bp.invalid=!0)
else bp.invalid=!1
redrawBreakpoint(bp)}},plugin),breakpoints.forEach(function(bp){updateBreakpointAtDebugger(bp,"add")}),
settings.on("read",function(e){settings.setDefaults("user/breakpoints",[["active","true"]])
var bps=settings.getJson("state/breakpoints")
breakpoints=(bps||[]).map(function(bp){return new Breakpoint(bp)}),model.setRoot(breakpoints),model.visibleItems=breakpoints,
tabs.focussedTab&&"ace"==tabs.focussedTab.editor.type&&updateDocument(tabs.focussedTab.document),enableBreakpoints=settings.getBool("user/breakpoints/@active"),
toggleBreakpoints(enableBreakpoints),!enableBreakpoints&&drawn&&list.renderer.setStyle("listBPDisabled")

}),settings.on("write",function(e){if(changed){var list=breakpoints.map(function(bp){return bp.json})


settings.setJson("state/breakpoints",list)}changed=!1}),void aceHandle.on("draw",function(){var menu=aceHandle.gutterContextMenu,meta=menu.meta


menu.append(new MenuItem({caption:"Continue to Here",position:100,isAvailable:function(){return dbg&&"stopped"==dbg.state&&meta.className.indexOf("breakpoint")===-1

},onclick:function(){function done(){updateBreakpointAtDebugger(breakpoint,"remove"),activateAll(!0),
debug.off("break",done),debug.off("detach",done)}var path=meta.ace.session.c9doc.tab.path
if(path){var breakpoint=new Breakpoint({path:path,line:meta.line,column:0,hidden:!0,enabled:!0})
dbg.setBreakpoint(breakpoint,function(err,bp){return err||bp.actual&&bp.actual.line!=bp.line?void updateBreakpointAtDebugger(breakpoint,"remove"):(debug.on("break",done),
debug.on("detach",done),deactivateAll(!0),void debug.resume())})}}},plugin)),menu.append(new Divider({
position:150},plugin))
var itemAdd=menu.append(new MenuItem({position:200,isAvailable:function(){return itemAdd.caption=meta.className.indexOf("breakpoint")>-1?"Remove Breakpoint":"Add Breakpoint",
!0},onclick:function(){editBreakpoint(meta.className.indexOf("breakpoint")>-1?"remove":"add",meta.ace,meta.line)

}},plugin)),itemCondition=menu.append(new MenuItem({position:300,isAvailable:function(){var name=meta.className


return itemCondition.caption=name.indexOf("condition")>-1?"Edit Condition":name.indexOf("breakpoint")>-1?"Set Condition":"Add Conditional Breakpoint",
!dbg||dbg.features.conditionalBreakpoints},onclick:function(){editBreakpoint("edit",meta.ace,meta.line)

}},plugin))}))}function draw(options){if(drawn)return!1
drawn=!0
var markup=require("text!./breakpoints.xml")
ui.insertMarkup(options.aml,markup,plugin),listEl=plugin.getElement("list"),list=new Tree(listEl.$ext),
list.setTheme({cssClass:"blackdg"}),list.setOption("maxLines",200),layout.on("eachTheme",function(e){
var height=parseInt(ui.getStyleRule(".listBP .bpItem","height"),10)||52
model.rowHeight=height,e.changed&&list.resize(!0)}),list.setDataProvider(model),list.on("click",function(e){
var bp=e.getNode()
if(bp&&!e.getButton()){var className=e.domEvent.target.className||""
className.indexOf("btnclose")!=-1?clearBreakpoint(bp):className.indexOf("checkbox")!=-1?list._signal("afterCheck",{
node:bp}):gotoBreakpoint(bp)}}),list.on("delete",function(e){var bp=findBreakpoint(e.node)
clearBreakpoint(bp)}),list.on("afterCheck",function(e){var bp=findBreakpoint(e.node)
bp.enabled?disableBreakpoint(bp):enableBreakpoint(bp)}),menu=plugin.getElement("menu"),listEl.setAttribute("contextmenu",menu),
enableBreakpoints||list.renderer.setStyle("listBPDisabled"),menu.on("prop.visible",function(){var length=model.visibleItems.length


menu.childNodes.forEach(function(item){if("divider"!=item.localName)return"deactivate"==item.value?void item.setAttribute("caption",enableBreakpoints?"Deactivate Breakpoints":"Activate Breakpoints"):void item.setAttribute("disabled",!length)

})}),menu.on("itemclick",function(e){var bp=list.selection.getCursor()
if(bp)if("remove"==e.value)clearBreakpoint(findBreakpoint(bp))
else if("remove-all"==e.value)for(var i=breakpoints.length-1;i>=0;i--)clearBreakpoint(breakpoints[i])
else"deactivate"==e.value?enableBreakpoints?deactivateAll():activateAll():"enable-all"==e.value?breakpoints.forEach(function(bp){
enableBreakpoint(bp)}):"disable-all"==e.value&&breakpoints.forEach(function(bp){disableBreakpoint(bp)

})})
var hbox1=debug.getElement("hbox"),hbox2=debug.getElement("hbox2")
btnBreakpoints=hbox1.insertBefore(new ui.button({id:"btnBreakpoints",tooltip:"Deactivate All Breakpoints",
icon:"toggle_breakpoints2.png",skinset:"default",skin:"c9-menu-btn","class":"nosize toggle_breakpoints2"
}),hbox1.selectSingleNode("a:divider").nextSibling),btnBpRemove=hbox2.insertBefore(new ui.button({id:"btnBpRemove",
tooltip:"Clear All Breakpoints",icon:"remove_breakpoints.png",skinset:"default",skin:"c9-menu-btn","class":"nosize remove_breakpoints"
}),hbox2.selectSingleNode("a:divider")),plugin.addElement(btnBreakpoints,btnBpRemove),enableBreakpoints||toggleBreakpoints(enableBreakpoints),
btnBreakpoints.on("click",function(){toggleBreakpoints()}),btnBpRemove.on("click",function(){for(var i=breakpoints.length-1;i>=0;i--)clearBreakpoint(breakpoints[i])

})}function drawCondition(){if(!drawnCondition){drawnCondition=!0
var html=require("text!./breakpoints.html")
hCondition=ui.insertHtml(null,html,plugin)[0],hInput=hCondition.querySelector(".input"),codebox=new apf.codebox({
skin:"simplebox","class":"dark",focusselect:"true",htmlNode:hInput,"initial-message":"Your Expression"
}),codebox.ace.commands.addCommands([{bindKey:"ESC",exec:function(){hCondition.style.display="none"}},{
name:"confirmCondition",bindKey:"Enter",exec:function(){setCondition(conditionBreakpoint,codebox.getValue()),
hCondition.style.display="none"}}]),apf.addEventListener("movefocus",function(e){e.toElement!=codebox&&codebox.execCommand("confirmCondition")

})}}function toggleBreakpoints(force){var enable=void 0!==force?force:!enableBreakpoints
btnBreakpoints&&(btnBreakpoints.setAttribute("class","nosize "+(enableBreakpoints?"toggle_breakpoints2":"toggle_breakpoints1")),
btnBreakpoints.setAttribute("tooltip",enableBreakpoints?"Deactivate All Breakpoints":"Activate All Breakpoints")),
enable?activateAll():deactivateAll(),tabs.getPanes().forEach(function(pane){var tab=pane.getTab()
tab&&"ace"==tab.editorType&&updateDocument(tab.document)})}function updateBreakpointAtDebugger(bp,action){
if(debug.state&&"disconnected"!=debug.state)return dbg?void("enable"==action||"disable"==action?enableBreakpoints&&dbg.changeBreakpoint(bp):"condition"==action||"ignoreCount"==action?dbg.changeBreakpoint(bp):"add"==action?dbg.setBreakpoint(bp):"remove"==action&&dbg.clearBreakpoint(bp)):setTimeout(function(){
updateBreakpointAtDebugger(bp,action)},500)}function decorateAce(editor){if(!editor.$breakpointListener){
var el=document.createElement("div")
editor.renderer.$gutter.appendChild(el),el.style.cssText="position:absolute;top:0;bottom:0;left:0;width:18px;cursor:pointer",
editor.on("guttermousedown",editor.$breakpointListener=function(e){if(!e.getButton()){var gutterRegion=editor.renderer.$gutterLayer.getRegion(e)


if("markers"==gutterRegion){e.stop()
var action,line=e.getDocumentPosition().row,bp=findBreakpoint(e.editor.session.c9doc.tab.path,line)
action=e.getAccelKey()?"edit":e.getShiftKey()?bp&&bp.enabled?"disable":"enable":bp?bp.enabled?"remove":"enable":"create",
editBreakpoint(action,editor,line)}}})}}function editBreakpoint(action,editor,line){function createBreakpoint(condition){
var caption=basename(path),lineContents=session.getLine(line)
return setBreakpoint({path:path,line:line,column:(lineContents.match(/^(\s+)/)||[0,""])[1].length,text:caption,
content:lineContents.slice(0,200),time:Date.now(),enabled:enabled,condition:condition})}var session=editor.session,path=session.c9doc.tab.path,removed=!1,enabled=!0,obp=findBreakpoint(path,line,!0).filter(function(b){
return!b.invalid||b.line==line})[0]
if("edit"==action)return enableBreakpoints||activateAll(),void showConditionDialog(editor,createBreakpoint,path,line,obp)


if("enable"==action||"disable"==action)enabled="enable"==action,removed=!1
else if("create"==action){var mode=session.syntax
"php"===mode&&analytics.track("Breakpoint Created: "+mode),enableBreakpoints||activateAll()}else removed="remove"==action,
enabled=!0
return obp?void(removed?clearBreakpoint(obp):enabled?enableBreakpoint(obp):disableBreakpoint(obp)):void createBreakpoint()

}function showConditionDialog(ace,createBreakpoint,path,line,breakpoint){breakpoint||(breakpoint=createBreakpoint()),
drawCondition(),ace.container.parentNode.appendChild(hCondition),hCondition.style.display="block",hCondition.style.left="2px"


var pos=ace.renderer.$cursorLayer.getPixelPosition({row:line+1,column:0},!0)
hCondition.style.top=pos.top+3+"px",codebox.setValue(breakpoint.condition||"")
var node=hCondition.getElementsByTagName("div")[0].firstChild
node.nodeValue=node.nodeValue.replace(/\d+/,line+1),conditionBreakpoint=breakpoint,setTimeout(function(){
codebox.focus()})}function decorateDocument(doc){var session=doc.getSession()
if(!session.hasBreakpoints){var aceSession=session.session
aceSession&&(aceSession.on("change",function(delta){var breakpoints=aceSession.$breakpoints,doc=aceSession.c9doc


if(breakpoints.length&&doc.tab.loaded&&doc.hasValue()){var bpsInDoc=findBreakpoints(doc.tab.path)
if(bpsInDoc.length&&delta.end.row!=delta.start.row){var len,firstRow
len=delta.end.row-delta.start.row,firstRow="insert"==delta.action&&delta.start.column?delta.start.row+1:delta.start.row


var i,lines=[]
if(bpsInDoc.forEach(function(bp){if(bp.moved==-1)return clearBreakpoint(bp)
var line
return!isNaN(line=bp.moved)||!isNaN(line=(bp.actual||0).line)||!isNaN(line=(bp.sourcemap||0).line)||(line=bp.line),
"number"!=typeof line&&isNaN(line)?console.warn("Could not find breakpoint, file likely has unsaved changes"):void(lines[line]=bp)

}),"i"==delta.action[0]){var args=Array(len)
for(args.unshift(firstRow,0),breakpoints.splice.apply(breakpoints,args),i=firstRow;i<lines.length;i++)lines[i]&&(changed=!0,
lines[i].moved=i+len)}else{var rem=breakpoints.splice(firstRow+1,len),max=firstRow+len+1
for(i=firstRow;i<max;i++)lines[i]&&(changed=!0,lines[i].moved=-1)
if(breakpoints[firstRow])lines[firstRow]&&(lines[firstRow].moved=firstRow)
else for(i=rem.length;i--;)if(rem[i]){if(changed=!0,!lines[firstRow+i+1]){console.warn("Could not find the breakpoint")


continue}breakpoints[firstRow]=rem[i],lines[firstRow+i+1].moved=firstRow
break}for(i=max;i<lines.length;i++)lines[i]&&(changed=!0,lines[i].moved=i-len)}changed&&settings.save()

}}}),session.hasBreakpoints=!0)}}function updateDocument(doc){if(doc.editor&&"ace"==doc.editor.type){
var session=doc.getSession(),rows=[],path=doc.tab.path
session.session&&(breakpoints.forEach(function(bp){if(!(bp.path!=path||bp.sourcemap&&bp.sourcemap.path!=path||bp.moved==-1)){
var line,loc=bp.invalid?bp:bp.actual||bp.sourcemap||bp
!isNaN(line=bp.moved)||(line=loc.line),rows[line]=" ace_breakpoint"+(bp.condition?" condition":"")+(bp.enabled&&enableBreakpoints?"":" disabled ")+(bp.invalid?" invalid":"")

}}),session.session.$breakpoints=rows,session.session._emit("changeBreakpoint",{}))}}function updateMovedBreakpoints(doc){
var bpsInDoc=findBreakpoints(doc.tab.path)
bpsInDoc.forEach(function(bp){"number"!=typeof bp.moved||isNaN(bp.moved)||(bp.moved==-1?clearBreakpoint(bp):bp.moved!=bp.line&&(clearBreakpoint(bp),
bp.line=bp.moved,bp.actual=void 0,setBreakpoint(bp)),bp.moved=void 0)})}function updateBreakpoint(breakpoint,action,force){
var tab=tabs.findTab(breakpoint.path)
tab&&updateDocument(tab.document),(force||enableBreakpoints||"enable"!=action&&"disable"!=action)&&updateBreakpointAtDebugger(breakpoint,action),
changed=!0,settings.save()}function setCondition(breakpoint,condition,ignoreXml){return breakpoint.data.condition=condition,
updateBreakpoint(breakpoint,"condition"),ignoreXml||model._signal("change"),!0}function enableBreakpoint(breakpoint,ignoreXml){
return breakpoint.data.enabled=!0,updateBreakpoint(breakpoint,"enable"),ignoreXml||model._signal("change"),
!0}function disableBreakpoint(breakpoint,ignoreXml){return breakpoint.data.enabled=!1,updateBreakpoint(breakpoint,"disable"),
ignoreXml||model._signal("change"),!0}function setBreakpoint(breakpoint,noEvent){for(var bp,i=0,l=breakpoints.length;i<l;i++)if((bp=breakpoints[i]).equals(breakpoint,!0))return


if(!breakpoint.hidden)return breakpoint instanceof Breakpoint||(breakpoint=new Breakpoint(breakpoint)),
breakpoints.push(breakpoint),model._signal("change"),noEvent||updateBreakpoint(breakpoint,"add"),breakpoint

}function clearBreakpoint(breakpoint,ignoreXml,silent){breakpoints.remove(breakpoint),silent||updateBreakpoint(breakpoint,"remove"),
ignoreXml||model._signal("change")}function redrawBreakpoint(bp){var tab=tabs.findTab(bp.path)
tab&&(updateDocument(tab.document),model._signal("change",bp))}function findBreakpoint(path,line,multi){
"object"==typeof path&&(line=path.line,path=path.path)
var match={path:path};(line||0===line)&&(match.line=line)
for(var bp,list=[],i=0,l=breakpoints.length;i<l;i++)if(bp=breakpoints[i],bp.equals(match)){if(!multi)return bp


list.push(bp)}return!!multi&&list}function findBreakpoints(path,line){return findBreakpoint(path,line,!0)

}function gotoBreakpoint(bp,line,column){var path
if(bp instanceof Breakpoint){var loc=bp.actual||bp
path=bp.path,line=loc.line-1,column=loc.column}else{if("object"==typeof bp)return gotoBreakpoint(findBreakpoint(bp))


path=bp}isNaN(line)&&(line=void 0),isNaN(column)&&(column=void 0),debug.openFile({path:path,line:line,
column:column})}function activateAll(force){enableBreakpoints&&!force||(enableBreakpoints=!0,settings.set("user/breakpoints/@active",!0),
breakpoints.forEach(function(bp){bp.enabled&&updateBreakpoint({id:bp.id,enabled:!0},"enable",force)}),
drawn&&list.renderer.unsetStyle("listBPDisabled"),toggleBreakpoints(!0))}function deactivateAll(force){
(enableBreakpoints||force)&&(settings.set("user/breakpoints/@active",!1),breakpoints.forEach(function(bp){
updateBreakpoint({id:bp.id,enabled:!1},"disable",force)}),drawn&&list.renderer.setStyle("listBPDisabled"),
enableBreakpoints=!1,toggleBreakpoints(!1))}var dbg,list,listEl,menu,model,hCondition,hInput,btnBreakpoints,btnBpRemove,codebox,conditionBreakpoint,drawn,drawnCondition,DebugPanel=imports.DebugPanel,settings=imports.settings,save=imports.save,ui=imports.ui,tabs=imports.tabManager,debug=imports["debugger"],layout=imports.layout,aceHandle=imports.ace,MenuItem=imports.MenuItem,Divider=imports.Divider,fs=imports.fs,analytics=imports["c9.analytics"],Breakpoint=require("./data/breakpoint"),basename=require("path").basename,Tree=require("ace_tree/tree"),TreeData=require("ace_tree/data_provider"),escapeHTML=require("ace/lib/lang").escapeHTML,plugin=new DebugPanel("Ajax.org",main.consumes,{
caption:"Breakpoints",index:400}),changed=!1,breakpoints=[],enableBreakpoints=!0,loaded=!1
plugin.on("load",function(){load(),plugin.once("draw",draw)}),plugin.on("enable",function(){!enableBreakpoints&&drawn&&list.renderer.setStyle("listBPDisabled")

}),plugin.on("disable",function(){}),plugin.on("unload",function(){loaded=!1,drawn=!1,drawnCondition=!1

}),plugin.freezePublicAPI({get breakpoints(){return breakpoints.slice(0)},get enableBreakpoints(){return enableBreakpoints

},set enableBreakpoints(v){enableBreakpoints=v,toggleBreakpoints(v)},setCondition:setCondition,enableBreakpoint:enableBreakpoint,
disableBreakpoint:disableBreakpoint,gotoBreakpoint:gotoBreakpoint,setBreakpoint:setBreakpoint,clearBreakpoint:clearBreakpoint
}),register(null,{breakpoints:plugin})}return main.consumes=["DebugPanel","settings","ui","tabManager","debugger","ace","MenuItem","Divider","save","layout","fs","c9.analytics"],
main.provides=["breakpoints"],main})


define("plugins/c9.ide.run.debug/debuggers/socket",[],function(require,exports,module){function main(options,imports,register){
function Socket(port,proxy,reconnect){function connect(force){if("connected"!=state&&"connecting"!=state)if(connected=CONNECTING,
state="connecting",!reconnect&&!proxy.reuseExisting||force)if(proxy.socketpath){var retries=proxy.retries||100


proxy.retryInterval=proxy.retryInterval||300,connectToSocket(retries)}else proxy.detach?proc.spawn(nodeBin,{
args:["-e",proxySource],detached:!0,stdio:"ignore"},function(err,process){return err?emit("error",err):void connectToPort()

}):proc.spawn(nodeBin,{args:["-e",proxySource]},function(err,process){return err?emit("error",err):(process.stderr.on("data",function(data){
console.log("[netproxy]",data)}),process.stdout.on("data",function(data){data.match(/\xdf/)?connectToPort():console.log("[netproxy] unexpected data",data)

}),process.on("exit",function(code){connected=DISCONNECTED,state="disconnected",emit("error",{code:code
})}),void process.unref())})
else connectToPort(function(err){if(err)return state=null,"ECONNREFUSED"!=err.code?emit("err",err):(emit("end"),
void connect(!0))})}function connectToSocket(retries){"connecting"===state&&connectToPort(function(err){
if(err)return retries<=0||"ENOENT"!==err.code&&"ECONNREFUSED"!==err.code?emit("error",err):void(timer=setTimeout(function(){
connectToSocket(--retries)},proxy.retryInterval))})}function connectToPort(callback){net.connect(proxy.socketpath||proxy.port,{},function(err,s){
return err?callback?callback(err):emit("error",err):(stream=s,stream.on("data",function(data){emit("data",data)

}),stream.on("end",function(err){console.log("end",err),emit("end",err)}),stream.on("error",function(err){
emit("error",err)}),reconnect&&emit("data","Content-Length:0\r\n\r\n"),connected=CONNECTED,state="connected",
emit("connect"),away&&emit("beforeBack")!==!1&&enable(),void(callback&&callback()))})}function close(err){
stream&&stream.end(),timer&&clearTimeout(timer),state&&(state=null,connected=DISCONNECTED,emit("end",err))

}function send(msg){stream&&stream.write(msg,"utf8")}function enable(){away=!1,state="connected",emit("back")

}var state,stream,connected,away,socket=new Plugin,emit=socket.getEmitter()
"string"==typeof proxy&&(proxy={source:proxy}),proxy.port||(proxy.port=port+1)
var proxySource=proxy.source
return socket.__defineGetter__("state",function(){return state}),c9.on("connect",function(){away&&(reconnect=!0,
connect())},socket),c9.on("away",function(){away||(away=!0,state="away",emit("away"))},socket),c9.on("back",function(){
away&&connectToPort(function(err){if(err)return void("ECONNREFUSED"==err.code?(state=null,emit("end"),
connect(!0)):emit("error",err))})},socket),c9.on("disconnect",function(){away||(away=!0,state="away",
emit("away"))},socket),socket.on("unload",function(){close()}),socket.freezePublicAPI({DISCONNECTED:DISCONNECTED,
CONNECTED:CONNECTED,CONNECTING:CONNECTING,get connected(){return connected},addEventListener:socket.on,
removeListener:socket.off,setMinReceiveSize:function(){},connect:connect,enable:enable,close:close,send:send
}),socket.load("socket"+counter++),socket}var Plugin=imports.Plugin,net=imports.net,c9=imports.c9,proc=imports.proc,nodeBin=Array.isArray(options.nodeBin)?options.nodeBin[0]:options.nodeBin||"node",DISCONNECTED=0,CONNECTED=1,CONNECTING=2,counter=0,timer=null


register("",{"debugger.socket":Socket})}return main.consumes=["Plugin","net","proc","c9"],main.provides=["debugger.socket"],
main})


define("plugins/c9.ide.run.debug/debuggers/v8/lib/util",[],function(require,exports,module){"use strict"


exports.byteLength=function(str){for(var s=str.length,i=str.length-1;i>=0;i--){var code=str.charCodeAt(i)


code>127&&code<=2047?s++:code>2047&&code<=65535&&(s+=2),code>=56320&&code<=57343&&i--}return s},exports.readBytes=function(str,start,bytes){
for(var consumed=0,i=start;i<str.length;i++){var code=str.charCodeAt(i)
if(code<127?consumed++:code>127&&code<=2047?consumed+=2:code>2047&&code<=65535&&(consumed+=3),code>=55296&&code<=56319&&i++,
consumed>=bytes){i++
break}}return{bytes:consumed,length:i-start}},exports.inherits=function(){var tempCtor=function(){}
return function(ctor,superCtor){tempCtor.prototype=superCtor.prototype,ctor.super_=superCtor.prototype,
ctor.prototype=new tempCtor,ctor.prototype.constructor=ctor}}(),exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key]

},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}
var EventEmitter={}
EventEmitter._emit=EventEmitter.emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry=this._eventRegistry||{}


var listeners=this._eventRegistry[eventName]
if(listeners&&listeners.length){e=e||{},e.type=eventName
for(var i=listeners.length-1;i>=0;i--)listeners[i](e)}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback){
this._eventRegistry=this._eventRegistry||{}
var listeners=this._eventRegistry[eventName]
listeners||(listeners=this._eventRegistry[eventName]=[]),listeners.indexOf(callback)==-1&&listeners.push(callback)

},EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{}


var listeners=this._eventRegistry[eventName]
if(listeners){var index=listeners.indexOf(callback)
index!==-1&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])

},exports.EventEmitter=EventEmitter})


define("plugins/c9.ide.run.debug/debuggers/v8/lib/V8Message",[],function(require,exports,module){"use strict"


var Util=require("./util"),V8Message=module.exports=function(type){this.seq=V8Message.$seq++,this.type=type

};(function(){this.$msgKeys=["seq","type","command","arguments","request_seq","body","running","success","message","event","runner"]


var len=this.$msgKeys.length
this.parse=function(msgString){var json=JSON.parse(msgString)
return Util.mixin(this,json),this},this.stringify=function(){for(var tmp={},i=0;i<len;i++){var name=this.$msgKeys[i]


"undefined"!=typeof this[name]&&(tmp[name]=this[name])}return tmp.arguments&&!tmp.arguments.maxStringLength&&(tmp.arguments.maxStringLength=1e4),
JSON.stringify(tmp)}}).call(V8Message.prototype),V8Message.$seq=1,V8Message.fromString=function(msgString){
return(new V8Message).parse(msgString)},V8Message.fromObject=function(obj){var msg=new V8Message
return Util.mixin(msg,obj),msg}})


define("plugins/c9.ide.run.debug/debuggers/v8/lib/V8Debugger",[],function(require,exports,module){"use strict"


var Util=require("./util"),EventEmitter=Util.EventEmitter,V8Message=require("./V8Message"),V8Debugger=module.exports=function(tabId,v8service){
this.tabId=tabId,this.$running=!0,this.$service=v8service
var pending=this.$pending={},self=this
this.$service.addEventListener("debugger_command_"+tabId,function(e){var response=V8Message.fromObject(e.data),requestSeq=response.request_seq


pending[requestSeq]?(pending[requestSeq](response.body,response.refs||null,!response.success&&{message:response.message
}||null),delete pending[requestSeq]):response.event&&self.emit(response.event,{data:response.body}),self.$updateRunning(response)

})};(function(){Util.implement(this,EventEmitter),this.$seq=0,this.$updateRunning=function(response){
if("scriptCollected"!=response.event){var running=!0
"response"==response.type?running=response.running:"event"==response.type&&("break"!=response.event&&"exception"!=response.event||(running=!1)),
running!==this.$running&&(this.$running=running,this.emit("changeRunning",{data:running}))}},this.isRunning=function(){
return this.$running},this.continueScript=function(stepaction,stepcount,callback){var msg=new V8Message("request")


msg.command="continue",stepaction&&(msg.arguments={stepcount:stepcount||1,stepaction:stepaction}),this.$send(msg,callback)

},this.lookup=function(handles,includeSource,callback){var msg=new V8Message("request")
msg.command="lookup",msg.arguments={inlineRefs:!1,handles:handles},includeSource&&(msg.arguments.includesSource=includeSource),
this.$send(msg,callback)},this.backtrace=function(fromFrame,toFrame,bottom,inlineRefs,callback){var msg=new V8Message("request")


msg.command="backtrace",msg.arguments={inlineRefs:!!inlineRefs},"number"==typeof fromFrame&&(msg.arguments.fromFrame=fromFrame),
"number"==typeof toFrame&&(msg.arguments.toFrame=toFrame),"boolean"==typeof bottom&&(msg.arguments.bottom=bottom),
this.$send(msg,callback)},this.scope=function(number,frameNumber,inlineRefs,callback){var msg=new V8Message("request")


msg.command="scope",msg.arguments={number:number,inlineRefs:!!inlineRefs},"number"==typeof frameNumber&&(msg.arguments.frameNumber=frameNumber),
this.$send(msg,callback)},this.version=function(callback){var msg=new V8Message("request")
msg.command="version",this.$send(msg,callback)},this.scripts=function(types,ids,includeSource,callback){
var msg=new V8Message("request")
msg.command="scripts",msg.arguments={types:types||V8Debugger.NORMAL_SCRIPTS,includeSource:!!includeSource
},ids&&(msg.arguments.ids=ids),this.$send(msg,function(scripts,refs,err){callback(scripts||[],refs,err)

})},this.evaluate=function(expression,frame,global,disableBreak,callback){var msg=new V8Message("request")


msg.command="evaluate",msg.arguments={expression:expression},"number"==typeof frame&&(msg.arguments.frame=frame),
global&&(msg.arguments.global=global),disableBreak&&(msg.arguments.disable_break=disableBreak),this.$send(msg,callback)

},this.simpleevaluate=function(expression,frame,global,additionalContext,callback){var msg=new V8Message("request")


msg.command="evaluate",msg.arguments={expression:expression},"number"==typeof frame&&(msg.arguments.frame=frame),
global&&(msg.arguments.global=global),msg.arguments.disable_break=!0,additionalContext&&(msg.arguments.additional_context=additionalContext),
this.$send(msg,callback)},this.setexceptionbreak=function(type,enabled,callback){var msg=new V8Message("request")


msg.command="setexceptionbreak",msg.arguments={type:type,enabled:enabled},this.$send(msg,callback)},this.setvariablevalue=function(name,value,scopeNumber,frameIndex,callback){
var msg=new V8Message("request")
msg.command="setVariableValue",msg.arguments={name:name,scope:{number:scopeNumber,frameNumber:frameIndex
},newValue:value},this.$send(msg,callback)},this.setbreakpoint=function(type,target,line,column,enabled,condition,ignoreCount,callback){
var msg=new V8Message("request")
msg.command="setbreakpoint",msg.arguments={type:type,target:target,line:line,enabled:enabled===!0},column&&(msg.arguments.column=column),
condition&&(msg.arguments.condition=condition),ignoreCount&&(msg.arguments.ignoreCount=ignoreCount),this.$send(msg,callback)

},this.changebreakpoint=function(breakpoint,enabled,condition,ignoreCount,callback){var msg=new V8Message("request")


msg.command="changebreakpoint",msg.arguments={enabled:enabled===!0,breakpoint:breakpoint},condition&&(msg.arguments.condition=condition),
ignoreCount&&(msg.arguments.ignoreCount=ignoreCount),this.$send(msg,callback)},this.clearbreakpoint=function(breakpoint,callback){
var msg=new V8Message("request")
msg.command="clearbreakpoint",msg.arguments={breakpoint:breakpoint},this.$send(msg,callback)},this.listbreakpoints=function(callback){
var msg=new V8Message("request")
msg.command="listbreakpoints",this.$send(msg,callback)},this.suspend=function(callback){var msg=new V8Message("request")


msg.command="suspend",this.$send(msg,callback)},this.changelive=function(scriptId,newSource,previewOnly,callback){
var msg=new V8Message("request")
msg.command="changelive",msg.arguments={script_id:scriptId,new_source:newSource,preview_only:!!previewOnly
},this.$send(msg,callback)},this.restartframe=function(frameId,callback){var msg=new V8Message("request")


msg.command="restartframe",msg.arguments={frame:frameId},this.$send(msg,callback)},this.$send=function(msg,callback){
callback&&(this.$pending[msg.seq]=callback),this.$service.debuggerCommand(this.tabId,msg)}}).call(V8Debugger.prototype),
V8Debugger.NATIVE_SCRIPTS=1,V8Debugger.EXTENSION_SCRIPTS=2,V8Debugger.NORMAL_SCRIPTS=4})


define("plugins/c9.ide.run.debug/debuggers/v8/lib/MessageReader",[],function(require,exports,module){
"use strict"
var Util=require("./util"),readBytes=Util.readBytes,MessageReader=module.exports=function(socket,callback){
this.$socket=socket,this.$callback=callback,this.$received="",this.$expectedBytes=0,this.$offset=0,this.$cbReceive=this.$onreceive.bind(this),
socket.on("data",this.$cbReceive)};(function(){this.$onreceive=function(data){this.$received+=data
for(var fullResponse;fullResponse=this.$checkForWholeMessage();)this.$callback(fullResponse)},this.$checkForWholeMessage=function(){
var fullResponse=!1,received=this.$received
if(!this.$expectedBytes){var i=received.indexOf("\r\n\r\n")
if(i!==-1){var c=received.lastIndexOf("Content-Length:",i)
if(c!=-1){var l=received.indexOf("\r\n",c),len=parseInt(received.substring(c+15,l),10)
this.$expectedBytes=len}this.$offset=i+4}}if(this.$expectedBytes){var result=readBytes(received,this.$offset,this.$expectedBytes)


this.$expectedBytes-=result.bytes,this.$offset+=result.length}return this.$offset&&this.$expectedBytes<=0&&(fullResponse=received.substring(0,this.$offset),
this.$received=received.substr(this.$offset),this.$offset=this.$expectedBytes=0),fullResponse},this.destroy=function(){
this.$socket&&this.$socket.removeListener("data",this.$cbReceive),delete this.$socket,delete this.$callback,
this.$received=""}}).call(MessageReader.prototype)})


define("plugins/c9.ide.run.debug/debuggers/v8/lib/DevToolsMessage",[],function(require,exports,module){
"use strict"
var DevToolsMessage=module.exports=function(headers,content){this.$headers={},this.$content="",headers&&(this.$headers=headers),
content&&this.setContent(content)};(function(){this.setContent=function(content){this.$content=content.toString()

},this.getContent=function(){return this.$content},this.setHeader=function(name,value){this.$headers[name]=value

},this.parse=function(msgString){var headers=this.$headers={},responseParts=msgString.split("\r\n\r\n"),headerText=responseParts[0]


this.$content=responseParts[1]
var re=/([\w\-\d]+)\s*:\s*([^\r\n]*)(\r|$)/g
return headerText.replace(re,function(str,key,value){headers[key]=value}),this},this.stringify=function(){
var headers=this.getHeaders(),str=[]
for(var name in headers)str.push(name,":",headers[name],"\r\n")
return this.$content&&str.push("\r\n",this.$content),str.join("")},this.getHeaders=function(){return this.$headers["Content-Length"]=this.$content.length,
this.$headers.Tool=this.$headers.Tool||"DevToolsService",this.$headers}}).call(DevToolsMessage.prototype),
DevToolsMessage.fromString=function(msgString){return(new DevToolsMessage).parse(msgString)}})


define("plugins/c9.ide.run.debug/debuggers/v8/lib/StandaloneV8DebuggerService",[],function(require,exports,module){
"use strict"
var Util=require("./util"),EventEmitter=Util.EventEmitter,MessageReader=require("./MessageReader"),DevToolsMessage=require("./DevToolsMessage"),byteLength=Util.byteLength,StandaloneV8DebuggerService=module.exports=function(socket){
this.$socket=socket,this.$attached=!1,this.$pending=[],this.$connected=!1};(function(){Util.implement(this,EventEmitter),
this.attach=function(tabId,callback){if(this.$attached)throw new Error("already attached!")
var self=this
this.$reader=new MessageReader(this.$socket,this.$onMessage.bind(this)),this.on("connect",function(e){
callback(null,e)}),this.$socket.connect(),this.$socket.on("end",function(){self.$pending.forEach(function(item){
self.emit("debugger_command_0",{data:{request_seq:item[1].seq,success:!1,message:"Debug Session Ended"
}})})}),this.$socket.on("beforeBack",function(){self.$pending.length&&self.$pending.forEach(function(item){
self.debuggerCommand(item[0],item[1],!0)})})},this.detach=function(tabId,callback){this.$socket.close(),
this.$attached=!1,this.$connected=!1,this.$reader&&this.$reader.destroy(),callback&&callback()},this.$onMessage=function(messageText){
var response=new DevToolsMessage.fromString(messageText),contentText=response.getContent()
if(!contentText)return void("connect"!=response.$headers.Type&&this.$connected||(this.emit("connect",{
type:response.$headers.Type}),this.$connected=!0))
var content
try{content=JSON.parse(contentText)}catch(ex){return setTimeout(function(){var e=new Error("Debugger recieved invalid message")


throw e.data=contentText,e})}for(var i=0;i<this.$pending.length;i++)if(this.$pending[i][1].seq==content.request_seq){
this.$pending.splice(i,1)
break}this.emit("debugger_command_0",{data:content})},this.debuggerCommand=function(tabId,v8Command,noPending){
noPending||"scripts"==v8Command.command||this.$pending.push([tabId,v8Command]),"string"!=typeof v8Command&&(v8Command=v8Command.stringify()),
this.$send(v8Command)},this.$send=function(text){var msg=["Content-Length:",byteLength(text),"\r\n\r\n",text].join("")


this.$socket.send(msg)}}).call(StandaloneV8DebuggerService.prototype)})


define("plugins/c9.ide.run.debug/debuggers/v8/v8debugger",[],function(require,exports,module){function main(options,imports,register){
function sync(breakpoints,reconnect,callback){return v8dbg?void getSources(function(err,sources){return err?callback(err):void getFrames(function(err,frames){
return err?callback(err):void updateBreakpoints(breakpoints,reconnect,function(err,breakpoints){return err?callback(err):void handleDebugBreak(breakpoints,reconnect,frames[0],function(canAttach){
attached=canAttach,emit("attach",{breakpoints:breakpoints})},function(isResumed){activeFrame&&(onChangeFrame(activeFrame),
emit("break",{frame:activeFrame,frames:frames})),onChangeRunning(null,isResumed),callback()})})},!0)}):console.error("Sync called without v8dbg")

}function updateBreakpoints(breakpoints,reconnect,callback){function find(bp){for(var i=0,l=breakpoints.length;i<l;i++)if(breakpoints[i].equals(bp))return breakpoints[i]

}var list=breakpoints.slice(0),retries=0
listBreakpoints(function handleBps(err,remoteBreakpoints){function done(){notfound.forEach(function(bp){
bp.serverOnly=!0,list.push(bp)}),list.sort(function(a,b){return a.id||b.id?!a.id&&b.id?1:a.id&&!b.id?-1:a.id-b.id:0

}),callback(null,list)}if(err)return callback(err)
if(!reconnect&&!remoteBreakpoints.length&&++retries<10)return void setTimeout(function(){v8dbg&&listBreakpoints(handleBps)

},100)
var found=[],notfound=[]
remoteBreakpoints.forEach(function(rbp){var bp;(bp=find(rbp))?rbp.enabled==bp.enabled&&found.push(bp):notfound.push(rbp)

}),async.each(list,function(bp,next){found.indexOf(bp)==-1?setBreakpoint(bp,next):next()},done)})}function handleDebugBreak(breakpoints,reconnect,frame,attach,callback){
function wait(){function checkEval(err,variable){err||isTruthy(variable)?(onChangeFrame(null),attach(!0),
resume(callback.bind(this,!0))):(onChangeFrame(frame),attach(!0),callback(!1))}if(frame)for(var bpi,test={
path:frame.path,line:frame.line},i=0,l=breakpoints.length;i<l;i++)if((bpi=breakpoints[i]).equals(test)){
if(!bpi.enabled)break
return void(bpi.condition?evaluate(bpi.condition,frame,!1,!0,checkEval):(onChangeFrame(frame),attach(!0),
callback(!1)))}reconnect?(onChangeFrame(frame),attach(!0),callback(!1)):(onChangeFrame(null),attach(!0),
resume(callback.bind(this,!0)))}if(!v8dbg)return console.error("No debugger is set"),attach(),callback()


var bp=breakpoints[0]
return bp?void(1===bp.id&&bp.serverOnly?(reconnect=!1,v8dbg.clearbreakpoint(1,wait),breakpoints.remove(bp)):(wait(),
reconnect=!0)):(attach(reconnect||0),void(reconnect?(onChangeFrame(frame),callback()):resume(callback.bind(this,!0))))

}function strip(str){return str?(str=c9.toInternalPath(str),str=applyPathMap(str,"toInternal"),str&&0===str.lastIndexOf(stripPrefix,0)?util.normalizePath(str.slice(stripPrefix.length)):util.normalizePath(str||"")):""

}function getFrameId(frame){return frame.func.name+":"+frame.func.inferredName+":"+frame.func.scriptId+":"+(frame.received&&frame.received.ref||"")+frame.arguments.map(function(a){
return a.value.ref}).join("-")}function formatType(value){switch(value.type){case"undefined":case"null":
return value.type
case"error":return value.value||"[Error]"
case"regexp":return value.text
case"boolean":case"number":return value.value+""
case"string":return JSON.stringify(value.value)
case"object":var name=value.className||(value.text?value.text.replace(/#<(.*)>/,"$1"):"Object")
return"["+name+"]"
case"function":return"function "+value.inferredName+"()"
default:return value.type}}function isTruthy(variable){return!("undefined|null".indexOf(variable.type)>-1)&&!('false|NaN|""'.indexOf(variable.value)>-1)

}function frameToString(frame){var str=[],args=frame.arguments,argsStr=[]
str.push(frame.func.name||frame.func.inferredName||"anonymous","(")
for(var i=0,l=args.length;i<l;i++){var arg=args[i]
arg.name&&argsStr.push(arg.name)}return str.push(argsStr.join(", "),")"),str.join("")}function getPathFromScriptId(scriptId){
for(var i=0;i<sources.length;i++)if(sources[i].id==scriptId)return sources[i].path}function getLocalScriptPath(script){
var scriptName=script.name||"-anonymous-"+script.id
return scriptName=c9.toExternalPath(scriptName),scriptName=strip(scriptName)}function createFrame(options,script){
var frame=new Frame({index:options.index,name:frameToString(options),column:options.column,id:getFrameId(options),
line:options.line,script:strip(script.name),path:getLocalScriptPath(script),sourceId:options.func.scriptId
}),vars=[]
return options.arguments.forEach(function(arg){vars.push(createVariable(arg,null,"arguments"))}),options.locals.forEach(function(local){
".arguments"!==local.name&&vars.push(createVariable(local,null,"locals"))}),vars.push(createVariable({
name:"this",value:options.receiver,kind:"this"})),frame.variables=vars,frame.scopes=options.scopes.filter(function(scope){
return 1!=scope.type}).reverse().map(function(scope){return new Scope({index:scope.index,type:scopeTypes[scope.type],
frameIndex:frame.index})}),frame}function createVariable(options,name,scope,variable){var value=options.value||options


return variable?(variable.value=formatType(options),variable.type=options.type):variable=new Variable({
name:name||options.name,scope:scope,value:formatType(value),type:value.type,ref:"number"==typeof value.ref?value.ref:value.handle,
children:options.children!==!1&&!!hasChildren[value.type]}),value.prototypeObject&&(variable.prototype=new Variable({
tagName:"prototype",name:"prototype",type:"object",ref:value.prototypeObject.ref})),value.protoObject&&(variable.proto=new Variable({
tagName:"proto",name:"proto",type:"object",ref:value.protoObject.ref})),value.constructorFunction&&(variable.constructorFunction=new Variable({
tagName:"constructor",name:"constructor",type:"function",ref:value.constructorFunction.ref})),variable

}function updateVariable(variable,body){return createVariable(body,null,null,variable)}function createSource(options){
var path=getLocalScriptPath(options)
return new Source({id:options.id,name:options.name||"anonymous",path:path,text:strip(options.text||"anonymous"),
debug:!("/"==path.charAt(0)&&!path.match(/ \(old\)$/)),lineOffset:options.lineOffset,customSyntax:"javascript"
})}function createBreakpoint(options,serverOnly){return new Breakpoint({id:options.number,path:getPathFromScriptId(options.script_id),
line:options.line,column:options.column,condition:options.condition,enabled:options.active,ignoreCount:options.ignoreCount,
serverOnly:serverOnly||!1})}function onChangeRunning(e,isResumed){state=v8dbg?v8dbg.isRunning()||isResumed?"running":"stopped":null,
emit("stateChange",{state:state}),"stopped"!=state&&onChangeFrame(null)}function createFrameFromBreak(data){
return new Frame({index:0,name:data.invocationText,column:data.sourceColumn,id:String(data.line)+":"+String(data.sourceColumn),
line:data.sourceLine,script:strip(data.script.name),path:getLocalScriptPath(data.script),sourceId:data.script.id,
istop:!0})}function onBreak(e){if(!attached)return void(0===attached&&(attached=!0))
var frame=createFrameFromBreak(e.data)
onChangeFrame(frame),emit("break",{frame:frame})}function onException(e){var frame=createFrameFromBreak(e.data),options=e.data.exception


options.text.match(/^(\w+):(.*)$/)
var name=RegExp.$1||options.className,value=RegExp.$2||options.text
options.name=name,options.value={value:value,type:"error",handle:options.handle},options.children=!0
var variable=createVariable(options)
variable.error=!0,lookup(options.properties,!1,function(err,properties){variable.properties=properties,
emit("exception",{frame:frame,exception:variable})})}function onAfterCompile(e){var queue=breakpointQueue


breakpointQueue=[],queue.forEach(function(i){setBreakpoint(i[0])}),emit("sourcesCompile",{source:createSource(e.data.script)
})}function onChangeFrame(frame,silent){activeFrame=frame,silent||emit("frameActivate",{frame:frame})

}function getProxySource(process){return debug.proxySource.replace(/\/\/.*/g,"").replace(/[\n\r]/g,"").replace(/\{PORT\}/,(process.runner[0]||process.runner).debugport)

}function attach(s,reconnect,callback){v8ds&&v8ds.detach(),socket=s,socket.on("back",function(err){sync(emit("getBreakpoints"),!0,callback)

},plugin),socket.on("error",function(err){emit("error",err)},plugin),v8ds=new V8DebuggerService(socket),
v8ds.attach(0,function(err,msg){return err?callback(err):(v8dbg=new V8Debugger(0,v8ds),v8dbg.addEventListener("changeRunning",onChangeRunning),
v8dbg.addEventListener("break",onBreak),v8dbg.addEventListener("exception",onException),v8dbg.addEventListener("afterCompile",onAfterCompile),
onChangeFrame(null),msg&&"connect"==msg.type&&(reconnect=!1),void setTimeout(function(){sync(emit("getBreakpoints"),reconnect,callback)

}))})}function detach(){v8ds&&(v8ds.detach(),onChangeFrame(null),onChangeRunning(),v8dbg&&(v8dbg.removeEventListener("changeRunning",onChangeRunning),
v8dbg.removeEventListener("break",onBreak),v8dbg.removeEventListener("exception",onException),v8dbg.removeEventListener("afterCompile",onAfterCompile)),
socket=null,v8ds=null,v8dbg=null,attached=!1,emit("detach"))}function getSources(callback){v8dbg.scripts(4,null,!1,function(scripts){
sources=[]
for(var i=0,l=scripts.length;i<l;i++){var script=scripts[i]
0!==(script.name||"").indexOf("chrome-extension://")&&sources.push(createSource(script))}callback(null,sources),
emit("sources",{sources:sources})})}function getSource(source,callback){v8dbg.scripts(4,[source.id],!0,function(scripts){
if(!scripts.length)return callback(new Error("File not found : "+source.path))
var source=scripts[0].source.replace(RE_NODE_PREFIX,"").replace(RE_NODE_POSTFIX,"")
callback(null,source)})}function getFrames(callback,silent){v8dbg.backtrace(0,1e3,null,!0,function(body,refs){
function ref(id){for(var i=0;i<refs.length;i++)if(refs[i].handle==id)return refs[i]
return{}}var frames=[]
if(body&&body.totalFrames>0){body&&body.frames.map(function(frame){var script=ref(frame.script.ref)
script.name&&!/^native /.test(script.name)&&frames.push(createFrame(frame,script))})
var topFrame=frames[0]
topFrame&&(topFrame.istop=!0)}emit("getFrames",{frames:frames}),callback(null,frames)})}function getScope(frame,scope,callback){
v8dbg.scope(scope.index,frame.index,!0,function(body,refs,error){if(error)return callback(error)
var variables=body.object.properties.map(function(prop){return createVariable(prop)})
scope.variables=variables,callback(null,variables,scope,frame)})}function getProperties(variable,callback){
v8dbg.lookup([variable.ref],!1,function(body,refs,err){if(err)return callback(err)
var data=body[variable.ref]
data&&updateVariable(variable,data)
var props=data.properties||[]
return props.length>5e3?(props=[createVariable({name:"Too many properties",value:{type:"error",value:"Found more than 5000 properties"
},children:!1})],variable.properties=props,void callback(null,props,variable)):void lookup(props,!1,function(err,properties){
variable.properties=properties,callback(err,properties,variable)})})}function stepInto(callback){v8dbg.continueScript("in",null,callback)

}function stepOver(callback){v8dbg.continueScript("next",null,callback)}function stepOut(callback){v8dbg.continueScript("out",null,callback)

}function resume(callback){v8dbg.continueScript(null,null,callback)}function suspend(callback){v8dbg.suspend(function(){
emit("suspend"),callback&&callback()})}function lookup(props,includeSource,callback){return props&&props.length?void v8dbg.lookup(props.map(function(p){
return p.ref}),includeSource,function(body){if(!body)return callback(new Error("No body received"))
var properties=props.map(function(prop){return prop.value=body[prop.ref],createVariable(prop)})
callback(null,properties)}):callback(null,[])}function setScriptSource(script,newSource,previewOnly,callback){
newSource=NODE_PREFIX+newSource+NODE_POSTFIX,v8dbg.changelive(script.id,newSource,previewOnly,function(e){
function cb(){emit("setScriptSource",data),callback(null,data)}var data=e
e?e.stepin_recommended?stepInto(cb):e.result.stack_modified===!1?(getFrames(function(err,frames){activeFrame&&frames.length&&(onChangeFrame(frames[0]),
emit("break",{frame:activeFrame,frames:frames}))}),cb()):cb():callback(new Error("Debugger could not update source of saved file."))

})}function restartFrame(frame,callback){var frameIndex=frame&&"object"==typeof frame?frame.index:frame


v8dbg.restartframe(frameIndex,function(body){body.result&&body.result.stack_update_needs_step_in?stepInto(callback.bind(this,body)):callback.apply(this,arguments)

})}function evaluate(expression,frame,global,disableBreak,callback){var frameIndex=frame&&"object"==typeof frame?frame.index:frame


v8dbg.evaluate(expression,frameIndex,global,disableBreak,function(body,refs,error){var name=expression.trim()


if(error){var err=new Error(error.message)
return err.name=name,err.stack=error.stack,callback(err)}var variable=createVariable({name:name,value:body
})
variable.children?lookup(body.properties,!1,function(err,properties){variable.properties=properties,callback(null,variable)

}):callback(null,variable)})}function setBreakpoint(bp,callback){var sm=bp.sourcemap||{},path=sm.source||bp.path,line=sm.line||bp.line,column=sm.column||bp.column


return path?(path=applyPathMap(path,"toExternal"),"/"==path[0]?path=stripPrefix+path:"~"==path[0]&&(path=c9.home+path.substr(1)),
path=c9.toExternalPath(path),v8dbg.setbreakpoint("script",path,line,column,bp.enabled,bp.condition,bp.ignoreCount,function(info){
return info?(bp.id=info.breakpoint,info.actual_locations&&(bp.actual=info.actual_locations[0],emit("breakpointUpdate",{
breakpoint:bp})),void(callback&&callback(null,bp,info))):callback&&callback(new Error)}),!0):(callback&&callback(new Error("Ignoring breakpoint with invalid path.")),
!1)}function changeBreakpoint(bp,callback){breakpointQueue.some(function(i){return i[0]===bp})||v8dbg.changebreakpoint(bp.id,bp.enabled,bp.condition,bp.ignoreCount,function(info){
callback&&callback(null,bp,info)})}function clearBreakpoint(bp,callback){breakpointQueue.some(function(i,index){
if(i[0]===bp)return breakpointQueue.splice(index,1),!0})||v8dbg.clearbreakpoint(bp.id,callback)}function listBreakpoints(callback){
v8dbg.listbreakpoints(function(data){return data?(breakOnExceptions=data.breakOnExceptions,breakOnUncaughtExceptions=data.breakOnUncaughtExceptions,
void callback(null,data.breakpoints.map(function(bp){return createBreakpoint(bp)}))):callback(new Error("Not Connected"))

})}function setVariable(variable,parents,value,frame,callback){function handler(err,body){return err?callback(err):(variable.value=formatType(body),
variable.type=body.type,variable.ref=body.handle,variable.properties=body.properties||[],variable.children=!!(body.properties||"").length,
void(variable.children?lookup(body.properties,!1,function(err,properties){variable.properties=properties,
callback(null,variable)}):callback(null,variable)))}var scopeNumber,names=[],frameIndex=frame.index
parents.reverse().forEach(function(p){"variable"==p.tagName?names.push(p.name.replace(/"/g,'\\"')):"scope"==p.tagName&&(scopeNumber=p.index)

}),names.push(variable.name),parents.length==("number"==typeof scopeNumber?1:0)?setLocalVariable(variable,value,scopeNumber||0,frameIndex,handler):setAnyVariable(variable,parents[0],value,handler)

}function setLocalVariable(variable,value,scopeNumber,frameIndex,callback){v8dbg.simpleevaluate(value,null,!0,[],function(body,refs,error){
if(error){var err=new Error(error.message)
return err.name=error.name,err.stack=error.stack,callback(err)}v8dbg.setvariablevalue(variable.name,body,scopeNumber,frameIndex,function(body,refs,error){
if(error){var err=new Error(error.message)
return err.name=error.name,err.stack=error.stack,callback(err)}callback(null,body.newValue)})})}function setAnyVariable(variable,parent,value,callback){
var expression='(function(a, b) { this[a] = b; }).call(__cloud9_debugger_self__, "'+variable.name+'", '+value+")"


v8dbg.simpleevaluate(expression,null,!0,[{name:"__cloud9_debugger_self__",handle:parent.ref}],function(body,refs,error){
if(error){var err=new Error(error.message)
return err.name=error.name,err.stack=error.stack,callback(err)}callback(null,body)})}function serializeVariable(variable,callback){
var expr="(function(fn){ return fn.toString() })(__cloud9_debugger_self__)"
v8dbg.simpleevaluate(expr,null,!0,[{name:"__cloud9_debugger_self__",handle:variable.ref}],function(body,refs,error){
callback(body.value)})}function setBreakBehavior(type,enabled,callback){breakOnExceptions=!!enabled&&"all"==type,
breakOnUncaughtExceptions=!!enabled&&"uncaught"==type,v8dbg.setexceptionbreak(enabled?type:"all",enabled,callback)

}function setPathMap(v){Array.isArray(v)||(v=null),pathMap=v&&v.map(function(x){if(x.toInternal&&x.toExternal){
var map={toInternal:{},toExternal:{}}
return"string"==typeof x.toInternal.regex&&(map.toInternal.regex=new RegExp(x.toInternal.regex,"g")),
map.toInternal.replacement=x.toInternal.replacement,"string"==typeof x.toExternal.regex&&(map.toExternal.regex=new RegExp(x.toExternal.regex,"g")),
map.toExternal.replacement=x.toExternal.replacement,map}}).filter(Boolean)}function applyPathMap(path,dir){
return pathMap?(pathMap.forEach(function(record){var mapping=record[dir]
path=path.replace(mapping.regex,mapping.replacement)}),path):path}var Plugin=imports.Plugin,util=imports.util,debug=imports["debugger"],c9=imports.c9,async=require("async"),Frame=debug.Frame,Source=debug.Source,Breakpoint=debug.Breakpoint,Variable=debug.Variable,Scope=debug.Scope,V8Debugger=require("./lib/V8Debugger"),V8DebuggerService=require("./lib/StandaloneV8DebuggerService"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


emit.setMaxListeners(1e3)
var v8dbg,v8ds,state,activeFrame,sources,socket,pathMap,stripPrefix=c9.toInternalPath((options.basePath||"").replace(/[\/\\]$/,"")),breakOnExceptions=!1,breakOnUncaughtExceptions=!1,breakpointQueue=[],NODE_PREFIX="(function (exports, require, module, __filename, __dirname) { ",NODE_POSTFIX="\n});",RE_NODE_PREFIX=new RegExp("^"+util.escapeRegExp(NODE_PREFIX)),RE_NODE_POSTFIX=new RegExp(util.escapeRegExp(NODE_POSTFIX)+"$"),TYPE="v8",attached=!1,scopeTypes={
0:"global",1:"local",2:"with",3:"function",4:"catch"},hasChildren={regexp:32,error:16,object:8,"function":4
}
plugin.on("load",function(){debug.registerDebugger(TYPE,plugin)}),plugin.on("unload",function(){debug.unregisterDebugger(TYPE,plugin),
breakOnExceptions=null,breakOnUncaughtExceptions=null,breakpointQueue=null,attached=!1,v8dbg=null,v8ds=null,
state=null,activeFrame=null,sources=null,socket=null,pathMap=null}),plugin.freezePublicAPI({features:{
scripts:!0,conditionalBreakpoints:!0,liveUpdate:!0,updateWatchedVariables:!0,updateScopeVariables:!0,
setBreakBehavior:!0,executeCode:!0},type:TYPE,get state(){return state},get attached(){return attached

},get breakOnExceptions(){return breakOnExceptions},get breakOnUncaughtExceptions(){return breakOnUncaughtExceptions

},_events:["attach","detach","suspend","setScriptSource","error","getBreakpoints","breakpointUpdate","break","stateChange","exception","frameActivate","getFrames","sources","sourcesCompile"],
attach:attach,detach:detach,getSources:getSources,getSource:getSource,getFrames:getFrames,getScope:getScope,
getProperties:getProperties,stepInto:stepInto,stepOver:stepOver,stepOut:stepOut,resume:resume,suspend:suspend,
evaluate:evaluate,setScriptSource:setScriptSource,setBreakpoint:setBreakpoint,changeBreakpoint:changeBreakpoint,
clearBreakpoint:clearBreakpoint,listBreakpoints:listBreakpoints,setVariable:setVariable,restartFrame:restartFrame,
serializeVariable:serializeVariable,setBreakBehavior:setBreakBehavior,getProxySource:getProxySource,setPathMap:setPathMap
}),register(null,{v8debugger:plugin})}return main.consumes=["Plugin","debugger","util","c9"],main.provides=["v8debugger"],
main})


define("plugins/c9.ide.run.debug/data/scope",[],function(require,exports,module){function Scope(options){
this.data=options||{},this.tagName="scope"}var Data=require("./data")
Scope.prototype=new Data(["index","frameIndex","type"],["variables"]),Scope.prototype.findVariable=function(ref,name,parents){
ref&&"object"==typeof ref&&(ref=ref.ref)
for(var vars=this.data.variables||[],i=0,l=vars.length;i<l;i++){if(vars[i].ref==ref||vars[i].name==name)return parents&&parents.push("frame"==this.tagName?new Scope({
index:0,frameIndex:this.index}):this),vars[i]
if(vars[i].properties){var result=vars[i].findVariable(ref,name,parents)
if(result)return parents&&parents.push(vars[i]),result}}return!1},Scope.prototype.equals=function(scope){
return!!scope&&(this.data.index==scope.index&&this.data.frameIndex==scope.frameIndex)},module.exports=Scope

})


define("plugins/c9.ide.run.debug/data/frame",[],function(require,exports,module){function Frame(options){
this.data=options||{},this.tagName="frame"}var Data=require("./data"),Scope=require("./scope")
Frame.prototype=new Data(["id","index","name","column","ref","line","path","sourceId","sourcemap","thread","istop"],["variables","scopes"]),
Frame.prototype.findScope=function(index){"object"==typeof index&&(index=index.getAttribute("index"))


for(var scopes=this.data.scopes||[],i=0,l=scopes.length;i<l;i++)if(scopes[i].index==index)return scopes[i]


return!1},Frame.prototype.findVariable=function(ref,name,parents){var result=Scope.prototype.findVariable.apply(this,arguments)


if(result)return result
for(var scopes=this.scopes,i=0,l=scopes.length;i<l;i++)if(scopes[i].variables&&(result=scopes[i].findVariable(ref,name,parents)))return parents&&parents.push(scopes[i]),
result
return!1},Frame.prototype.equals=function(frame){return!!frame&&this.data.id==frame.id},module.exports=Frame

})


define("plugins/c9.ide.run.debug/data/source",[],function(require,exports,module){function Source(options){
this.data=options||{},this.tagName="source"}var Data=require("./data")
Source.prototype=new Data(["id","name","path","text","lineOffset","debug","customSyntax"]),Source.prototype.equals=function(source){
return!!source&&this.data.ref==source.ref},module.exports=Source})


define("text!plugins/c9.ide.run.debug/debuggers/debugger.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="hbox" skin="toolbar-top" class="fakehbox aligncenter debugger_buttons basic">\n        <a:button id="btnResume"\n          tooltip  = "Resume"\n          icon     = "play.png"\n          command  = "resume"\n          skin     = "c9-menu-btn"\n          class    = "nosize play"\n          visible  = "false" />\n        <a:button id="btnSuspend"\n          tooltip  = "Suspend"\n          skin     = "c9-menu-btn"\n          class    = "nosize pause"\n          icon     = "pause.png"\n          command  = "suspend"\n          disabled = "true" />\n        <a:button id="btnStepOver"\n          tooltip  = "Step Over"\n          icon     = "step.png"\n          skin     = "c9-menu-btn"\n          class    = "nosize step"\n          command  = "stepover"\n          disabled = "true" />\n        <a:button id="btnStepInto"\n          tooltip  = "Step Into"\n          icon     = "stepinto.png"\n          skin     = "c9-menu-btn"\n          class    = "nosize stepinto"\n          command  = "stepinto"\n          disabled = "true" />\n        <a:button id="btnStepOut"\n          tooltip  = "Step Out"\n          icon     = "stepback.png"\n          skin     = "c9-menu-btn"\n          class    = "nosize stepback"\n          command  = "stepout"\n          disabled = "true" />\n        <a:divider  skin="c9-divider" style="margin:0 3px 0 3px" />\n        <a:button id="btnPause"\n          tooltip  = "Don\'t pause on exceptions"\n          icon     = "exception_break.png"\n          class    = "pause0 nosize exception_break"\n          skinset  = "default"\n          skin     = "c9-menu-btn" />\n    </a:bar>\n    <a:bar id="hbox2"\n      class   = "fakehbox aligncenter debugger_buttons bottombuttons basic"\n      skin    = "toolbar-bottom"\n      skinset = "debugger"\n      bottom  = "0"\n      right   = "0"\n      left    = "0">\n        <a:divider  skin="c9-divider" />\n        <a:button id="btnOutput"\n          caption  = "Output"\n          skinset  = "default"\n          skin     = "c9-menu-btn" />\n        <a:button id="btnImmediate"\n          caption  = "Immediate"\n          skinset  = "default"\n          skin     = "c9-menu-btn" />\n    </a:bar>\n</a:application>')


define("text!plugins/c9.ide.run.debug/debuggers/debugger.css",[],"")


define("text!plugins/c9.ide.run.debug/debuggers/skin.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:datagrid name="datagrid">\n        <a:style><![CDATA[]]></a:style>\n    \n        <a:presentation>\n            <a:main head="div[1]" container="div[3]" pointer="div[2]" widthdiff="1" iframe2="true">\n                <div class="blackdg">\n                    <div class="headings">\n    \n                    </div>\n                    <div class="pointer"> </div>\n                    <div class="records"> </div>\n                </div>\n            </a:main>\n    \n            <a:headitem class="." caption="u/text()">\n                <div><u>-<span/></u></div>\n            </a:headitem>\n    \n            <a:rowheaditem class="." caption="text()">\n                <span>-</span>\n            </a:rowheaditem>\n    \n            <a:item class="." container="following-sibling::blockquote">\n                <div class="row"/>\n                <blockquote> </blockquote>\n            </a:item>\n    \n            <a:dragindicator>\n                <div class="dragdg"> </div>\n            </a:dragindicator>\n    \n            <a:cell caption="u"><span><u>-</u></span></a:cell>\n    \n            <a:treecell caption="u" openclose="strong" editoroffset="0"><span class="treecell"><strong> </strong><u>-</u></span></a:treecell>\n    \n            <a:container container=".">\n                <div class="dginfo">-</div>\n            </a:container>\n    \n            <a:loading>\n                <div class="message"></div>\n            </a:loading>\n    \n            <a:empty caption=".">\n                <div class="empty"> </div>\n            </a:empty>\n        </a:presentation>\n    </a:datagrid>\n    <a:list name="breakpoints">\n        <a:style><![CDATA[]]></a:style>\n    \n        <a:presentation>\n            <a:main container=".">\n                <div class="listBP">\n                </div>\n            </a:main>\n            <a:item class="." caption="div" icon="div" select="." check="span">\n                <div class="bpItem">\n                    <span class="checkbox"> </span>\n                    <div class="content"> </div>\n                    <strong class="btnclose"> </strong>\n                </div>\n            </a:item>\n            <a:empty caption=".">\n                <div class="message">-</div>\n            </a:empty>\n        </a:presentation>\n    </a:list>\n</a:skin>')


define("text!plugins/c9.ide.run.debug/debuggers/netproxy.js",[],'var net = require("net");\nvar port = parseInt("{PORT}", 10);\n\nvar debugBuffer = [];\nvar browserBuffer = [];\nvar browserClient, debugClient;\n\nvar MAX_RETRIES = 100;\nvar RETRY_INTERVAL = 300;\n\nvar log = console.log;\n\nconsole.warn = console.log = function() {\n    return console.error.apply(console, arguments);\n};\nfunction send() {\n    log.apply(console, arguments);\n}\n\nvar server = net.createServer(function(client) {\n    if (browserClient)\n        browserClient.destroy(); // Client is probably unloaded because a new client is connecting\n    \n    browserClient = client;\n    debugBuffer = [];\n    \n    browserClient.on("end", function() {\n        browserClient = null;\n    });\n    \n    browserClient.on("data", function(data) {\n        if (debugClient) {\n            debugClient.write(data);\n        } else {\n            debugBuffer.push(data);\n        }\n    });\n    \n    if (browserBuffer.length) {\n        browserBuffer.forEach(function(data) {\n            browserClient.write(data);\n        });\n        browserBuffer = [];\n    }\n});\n\nvar host = "127.0.0.1";\nserver.listen(port + 1, host, function() {\n    start();\n});\nserver.on("error", function() { process.exit(0); });\n\nfunction tryConnect(retries, callback) {\n    if (!retries)\n        return callback(new Error("Cannot connect to port " + port));\n        \n    var connection = net.connect(port, host);\n    \n    connection.on("connect", function() {\n        connection.removeListener("error", onError);\n        callback(null, connection);\n    });\n    \n    connection.addListener("error", onError);\n    function onError(e) {\n        if (e.code !== "ECONNREFUSED")\n            return callback(e);\n        \n        setTimeout(function() {\n            tryConnect(retries - 1, callback);\n        }, RETRY_INTERVAL);\n    }\n}\n\ntryConnect(MAX_RETRIES, function(err, connection) {\n    if (err)\n        return errHandler(err);\n        \n    debugClient = connection;\n    browserBuffer = [];\n    \n    debugClient.on("data", function(data) {\n        if (browserClient) {\n            browserClient.write(data);\n        } else {\n            browserBuffer.push(data);\n        }\n    });\n    \n    function errHandler(e) {\n        console.log(e);\n        process.exit(0);\n    }\n    \n    debugClient.on("error", errHandler);\n    \n    debugClient.on("end", function(data) {\n        server.close();\n    });\n    \n    start();\n    \n    if (debugBuffer.length) {\n        debugBuffer.forEach(function(data) {\n            debugClient.write(data);\n        });\n        debugBuffer = [];\n    }\n});\n\n\nvar I = 0;\nfunction start() {\n    if (++I == 2)\n        send("\xdf");\n}')


define("plugins/c9.ide.run.debug/debuggers/debugger",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,settings.on("read",function(){settings.setDefaults("user/debug",[["pause","0"],["autoshow","true"]]),
pauseOnBreaks=settings.getNumber("user/debug/@pause"),togglePause(pauseOnBreaks)}),plugin.setCommand({
name:"toggledebugger",hint:"show the debugger panel"}),commands.addCommand({name:"resume",group:"Run & Debug",
hint:"resume the current paused process",bindKey:{mac:"F8|Command-\\",win:"F8"},exec:function(){dbg&&dbg.resume()

}},plugin),commands.addCommand({name:"suspend",group:"Run & Debug",hint:"suspend the current running process",
exec:function(){dbg&&dbg.suspend()}},plugin),commands.addCommand({name:"stepinto",group:"Run & Debug",
hint:"step into the function that is next on the execution stack",bindKey:{mac:"F11|Command-;",win:"F11"
},exec:function(){dbg&&dbg.stepInto()}},plugin),commands.addCommand({name:"stepover",group:"Run & Debug",
hint:"step over the current expression on the execution stack",bindKey:{mac:"F10|Command-'",win:"F10"
},exec:function(){dbg&&dbg.stepOver()}},plugin),commands.addCommand({name:"stepout",group:"Run & Debug",
hint:"step out of the current function scope",bindKey:{mac:"Shift-F11|Command-Shift-'",win:"Shift-F11"
},exec:function(){dbg&&dbg.stepOut()}},plugin),void ui.insertCss(css,plugin))}function draw(opts){if(!drawn){
drawn=!0,ui.insertSkin({name:"debugger",data:require("text!./skin.xml"),"media-path":options.staticPrefix+"/images/",
"icon-path":options.staticPrefix+"/icons/"},plugin)
var bar=opts.aml,scroller=bar.$ext.appendChild(document.createElement("div"))
scroller.className="scroller"
var parent=bar
ui.insertMarkup(parent,markup,plugin),container=plugin.getElement("hbox"),btnResume=plugin.getElement("btnResume"),
btnStepOver=plugin.getElement("btnStepOver"),btnStepInto=plugin.getElement("btnStepInto"),btnStepOut=plugin.getElement("btnStepOut"),
btnSuspend=plugin.getElement("btnSuspend"),btnPause=plugin.getElement("btnPause"),btnOutput=plugin.getElement("btnOutput"),
btnImmediate=plugin.getElement("btnImmediate"),togglePause(pauseOnBreaks),btnPause.on("click",function(){
togglePause()}),btnOutput.on("click",function(){commands.exec("showoutput",null,{id:name})}),btnImmediate.on("click",function(){
commands.exec("showimmediate",null,{evaluator:"debugger"})}),plugin.on("stateChange",function(e){state=e.state,
updateButtonState(state)}),updateButtonState(state),emit.sticky("drawPanels",{html:scroller,aml:bar})

}}function updateButtonState(state){if(drawn){var notConnected="disconnected"==state||"away"==state
btnResume.$ext.style.display="stopped"==state?"inline-block":"none",btnSuspend.$ext.style.display=notConnected||"stopped"!=state?"inline-block":"none",
btnSuspend.setAttribute("disabled",notConnected),btnStepOver.setAttribute("disabled",notConnected||"stopped"!=state),
btnStepInto.setAttribute("disabled",notConnected||"stopped"!=state),btnStepOut.setAttribute("disabled",notConnected||"stopped"!=state),
btnOutput.setAttribute("disabled",notConnected),dbg&&(btnStepOver.$ext.style.display=btnStepInto.$ext.style.display=btnStepOut.$ext.style.display=dbg.features.snapshotDebugger?"none":"",
dbg.features.snapshotDebugger?(btnResume.$ext.style.display=btnSuspend.$ext.style.display="none",updateSnapshotList(),
btnSnapshots.$ext.style.display=""):btnSnapshots&&(btnSnapshots.$ext.style.display="none"),btnPause.$ext.style.display=dbg.features.setBreakBehavior?"":"none",
btnImmediate.$ext.style.display=dbg.features.executeCode?"":"none")}}function updateSnapshotList(snapshots){
if(btnSnapshots||(btnSnapshots=ui.dropdown({skin:"black_dropdown","empty-message":"Waiting for snapshot..."
}),btnResume.parentNode.insertBefore(btnSnapshots,btnResume.parentNode.firstChild),plugin.addElement(btnSnapshots),
btnSnapshots.on("afterchange",function(e){dbg.features.snapshotDebugger&&(dbg.selectSnapshot(e.value&&e.value.data),
dbg.getFrames(function(err,frames){!err&&frames.length&&emit("framesLoad",{frames:frames,frame:findTopFrame(frames)
})}))})),snapshots){for(;btnSnapshots.lastChild;)btnSnapshots.removeChild(btnSnapshots.lastChild)
snapshots.forEach(function(x){var item=ui.item({caption:x.caption,value:x})
btnSnapshots.appendChild(item)}),btnSnapshots.select(btnSnapshots.firstChild)}}function initializeDebugger(){
function startDebugging(e){settings.getBool("user/debug/@autoshow")&&panels.activate("debugger"),emit("framesLoad",e),
e.exception&&emit("exception",e),emit("break",e)}var stateTimer
dbg.on("stateChange",function(e){var action="running"==e.state?"disable":"enable"
clearTimeout(stateTimer),"disable"==action?stateTimer=setTimeout(function(){updatePanels(action,e.state)

},500):updatePanels(action,e.state)},plugin),dbg.on("attach",function(e){e.implementation=dbg,togglePause(pauseOnBreaks),
emit("attach",e),updateButtonState()},plugin),dbg.on("detach",function(e){updateButtonState("detached"),
emit("detach",e)},plugin),dbg.on("error",function(err){process&&process.checkState&&process.checkState(function(){
"ECONNREFUSED"==err.code||"ECONNRESET"==err.code?process.running>=process.STARTING&&showError("Could not connect debugger to the debugger proxy"):err.code&&showError(err.message||"Debugger connection error "+err.code),
process.running>=process.STARTING&&socket.connect()})}),dbg.on("getBreakpoints",function(){return emit("getBreakpoints")

}),dbg.on("break",startDebugging,plugin),dbg.on("exception",startDebugging,plugin),dbg.on("suspend",function(){
dbg.getFrames(function(err,frames){frames.length&&startDebugging({frames:frames,frame:findTopFrame(frames)
})})},plugin),dbg.on("frameActivate",function(e){activeFrame=e.frame,emit("frameActivate",e)},plugin),
dbg.on("sources",function(e){sources=e.sources.slice(),emit("sources",e)},plugin),dbg.on("sourcesCompile",function(e){
sources.push(e.source),emit("sourcesCompile",e)},plugin),dbg.on("breakpointUpdate",function(e){emit("breakpointUpdate",{
breakpoint:e.breakpoint})},plugin),dbg.features.snapshotDebugger&&dbg.on("snapshotUpdate",function(e){
settings.getBool("user/debug/@autoshow")&&panels.activate("debugger"),updateSnapshotList(e.snapshots),
updatePanels("enable",dbg.state)},plugin)}function updatePanels(action,runstate){state=running!=run.STOPPED&&dbg&&dbg.attached?runstate:"disconnected",
emit("stateChange",{state:state,action:action})}function togglePause(force){pauseOnBreaks=void 0!==force?force:pauseOnBreaks>1?0:pauseOnBreaks+1,
btnPause&&(btnPause.setAttribute("class","pause"+pauseOnBreaks+" nosize exception_break"),btnPause.setAttribute("tooltip",0===pauseOnBreaks?"Don't pause on exceptions":1==pauseOnBreaks?"Pause on all exceptions":"Pause on uncaught exceptions")),
("disconnected"!==state||force&&dbg)&&dbg.setBreakBehavior(1===pauseOnBreaks?"all":"uncaught",0!==pauseOnBreaks),
pauseOnBreaks=pauseOnBreaks,settings.set("user/debug/@pause",pauseOnBreaks)}function registerDebugger(type,debug){
debuggers[type]=debug}function unregisterDebugger(type,debug){debuggers[type]==debug&&delete debuggers[type]

}function findTopFrame(frames){var top=frames.find(function(frame){return frame.istop})
return top?top:frames[0]}function showDebugFrame(frame,callback){openFile({scriptId:frame.sourceId,line:frame.line-1,
column:frame.column,text:frame.name,path:frame.path},callback)}function showDebugFile(script,row,column,callback){
openFile({scriptId:script.id,line:row,column:column},callback)}function openFile(options,callback){var source,row=options.line+1,column=options.column,path=options.path,scriptId=options.script?options.script.id:options.scriptId


options.source&&(source=options.source),sources.every(function(src){return scriptId&&src.id==scriptId?(path=src.path,
source=src,!1):!path||src.path!=path||(scriptId=src.scriptId,source=src,!1)}),source||(source={id:scriptId
})
var state={path:path,active:!0,value:source.debug?-1:void 0,document:{title:path.substr(path.lastIndexOf("/")+1),
meta:{ignoreState:source.debug?1:0},ace:{scriptId:scriptId,lineoffset:0,customSyntax:source.customSyntax
}}}
"number"!=typeof row||isNaN(row)||(state.document.ace.jump={row:row,column:column}),emit("beforeOpen",{
source:source,state:state,generated:options.generated,callback:callback||function(){}})!==!1&&tabs.open(state,function(err,tab,done){
return err?console.error(err):(tabs.focusTab(tab),void(done&&(dbg.getSource(source,function(err,value){
if(!err){tab.document.value=value
var jump=state.document.ace.jump
tab.isActive()&&jump&&tab.document.editor.scrollTo(jump.row,jump.column,jump.select),done(),callback&&callback(null,tab)

}}),tab.document.getSession().readOnly=!0)))})}function switchDebugger(runner){var debuggerId=runner["debugger"]


if(!dbg||dbg!=debuggers[debuggerId]){if(dbg&&(dbg.detach(),socket.unload(),plugin.cleanUp("events",dbg)),
dbg=debuggers[debuggerId],!dbg){var err=new Error(debuggerId?"Unable to find a debugger with type "+debuggerId:"No debugger type specified in runner")


return err.code="EDEBUGGERNOTFOUND",err}initializeDebugger()}}function doRun(runner,options,name,callback){
options.debug&&switchDebugger(runner),options.deferred=!0
var process=run.run(runner,options,name,function(err,pid){if(err)return callback(err)
if(process&&!(process.running<process.STARTING)){var hasListeningDebugger=options.debug&&dbg&&dbg.features.listeningDebugger


hasListeningDebugger?dbg.once("connect",function(){process.run(callback)},plugin):process.run(callback),
options.debug&&debug(process,function(err){if(err)return void window.console.warn(err)})}})
return process}function debug(p,reconnect,callback){if(!(reconnect&&process==p&&dbg&&dbg.connected)){
process=p,"function"==typeof reconnect&&(callback=reconnect,reconnect=null)
var runner=process.runner
runner instanceof Array&&(runner=runner[runner.length-1])
var err=switchDebugger(runner)
if(err)return callback(err)
process.running==process.STARTED?running=process.STARTED:process.on("started",function(){running=run.STARTED

},plugin),process.meta.$debugger||(process.on("away",function(){updatePanels("disable","away")}),process.on("back",function(){
updatePanels("enable",dbg.state)}),process.on("stopped",function(){stop()},plugin),process.meta.$debugger=!0),
name=process.name,emit("beforeAttach",{process:process,reconnect:reconnect,runner:runner,callback:callback
})!==!1&&(disabledFeatures=runner.disabled||{},socket=new Socket(runner.debugport,dbg.getProxySource(process),reconnect),
dbg.setPathMap&&dbg.setPathMap(runner.pathMap),dbg.attach(socket,reconnect,callback))}}function stop(){
dbg&&(running=run.STOPPED,dbg&&dbg.detach(),socket.unload(),updatePanels("disable","disconnected"),settings.getBool("user/debug/@autoshow")&&panels.deactivate("debugger"))

}function checkAttached(callback,callbackCancel){void 0==callbackCancel&&(callbackCancel=function(){}),
"disconnected"!=state?confirm("Debugger","The debugger is already connected to another process.","Would you like to stop the current debugger process?",function(){
process.stop(function(){callback()})},callbackCancel,{yes:"Stop current process",no:"Cancel"}):callback()

}var running,activeFrame,dbg,name,process,socket,disabledFeatures,container,btnResume,btnStepOver,btnStepInto,btnStepOut,btnSuspend,btnPause,btnOutput,btnImmediate,btnSnapshots,drawn,Panel=imports.Panel,Socket=imports["debugger.socket"],settings=imports.settings,ui=imports.ui,tabs=imports.tabManager,panels=imports.panels,commands=imports.commands,run=imports.run,showError=imports["dialog.error"].show,confirm=imports["dialog.confirm"].show,Frame=require("../data/frame"),Source=require("../data/source"),Breakpoint=require("../data/breakpoint"),Variable=require("../data/variable"),Scope=require("../data/scope"),Data=require("../data/data"),markup=require("text!./debugger.xml"),css=require("text!./debugger.css"),plugin=new Panel("Ajax.org",main.consumes,{
index:options.index||100,caption:"Debugger",buttonCSSClass:"debugger",panelCSSClass:"debugcontainer",
minWidth:165,width:300,where:options.where||"right"}),emit=plugin.getEmitter(),debuggers={},pauseOnBreaks=0,state="disconnected",sources=[],loaded=!1


plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("unload",function(){loaded=!1,drawn=!1,pauseOnBreaks=null,
state=null,sources=null,running=null,activeFrame=null,dbg=null,name=null,process=null,socket=null,disabledFeatures=null,
container=null,btnResume=null,btnStepOver=null,btnStepInto=null,btnStepOut=null,btnSuspend=null,btnPause=null,
btnOutput=null,btnImmediate=null,btnSnapshots=null}),plugin.freezePublicAPI({Frame:Frame,Source:Source,
Breakpoint:Breakpoint,Variable:Variable,Scope:Scope,Data:Data,proxySource:require("text!./netproxy.js"),
get activeFrame(){return activeFrame},set activeFrame(frame){activeFrame=frame,emit("frameActivate",{
frame:frame})},get disabledFeatures(){return disabledFeatures||{}},get state(){return state},get sources(){
return sources},get breakOnExceptions(){return dbg.breakOnExceptions},get breakOnUncaughtExceptions(){
return dbg.breakOnUncaughtExceptions},_events:["beforeAttach","attach","detach","framesLoad","break","beforeOpen","open","drawPanels","stateChange","frameActivate","sources","sourcesCompile","breakpointUpdate","getBreakpoints"],
run:doRun,debug:debug,stop:stop,registerDebugger:registerDebugger,unregisterDebugger:unregisterDebugger,
resume:function(){dbg.resume()},suspend:function(){dbg.suspend()},stepInto:function(){dbg.stepInto()},
stepOut:function(){dbg.stepOut()},stepOver:function(){dbg.stepOver()},getSource:function(source,callback){
dbg.getSource(source,callback)},setBreakBehavior:function(type,enabled,callback){togglePause(enabled?"uncaught"==type?1:2:0)

},evaluate:function(expression,frame,global,disableBreak,callback){dbg.evaluate(expression,frame,global,disableBreak,callback)

},checkAttached:checkAttached,findTopFrame:findTopFrame,showDebugFrame:showDebugFrame,showDebugFile:showDebugFile,
openFile:openFile}),register(null,{"debugger":plugin})}return main.consumes=["Panel","settings","ui","immediate","run","panels","tabManager","commands","dialog.confirm","dialog.error","debugger.socket"],
main.provides=["debugger"],main})


define("plugins/c9.ide.run.build/gui",[],function(require,module,exports){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0,commands.addCommand({name:"build",group:"Run & Debug",hint:"builds the current file (focussed document)",
bindKey:{mac:"Command-B",win:"Ctrl-B"},isAvailable:function(){return!!getFocusTab()},exec:function(){
buildFocusTab()}},plugin),commands.addCommand({name:"stopbuild",group:"Run & Debug",hint:"stop a running build",
bindKey:{mac:"Ctrl-Shift-C",win:"Ctrl-Shift-C"},isAvailable:function(){return process&&process.running

},exec:function(){process&&process.stop()}},plugin),settings.on("read",function(){settings.setDefaults("project/build",[["saveall","true"],["builder","auto"]]),
settings.setDefaults("user/build",[["autobuild","false"]])
var name=settings.get("project/build/@builder")
setCurrentBuilder(name,function(){})})
var c=1e4
menus.addItemByPath("Run/~",new ui.divider,c+=100,plugin)
var mnuBuildSystem=new ui.menu({"onprop.visible":function(e){e.value&&build.listBuilders(function(err,names){
for(var nodes=mnuBuildSystem.childNodes,i=nodes.length-3;i>=2;i--)mnuBuildSystem.removeChild(nodes[i])


var builder=settings.get("project/build/@builder")
"auto"==builder&&nodes[0].select()
var c=300
names.sort().forEach(function(name){menus.addItemToMenu(mnuBuildSystem,new ui.item({type:"radio",caption:uCaseFirst(name),
value:name,selected:builder==name}),c++,plugin)})})},onitemclick:function(e){return"new-build-system"==e.value?void tabs.open({
path:settings.get("project/build/@path")+"/My Builder.build",active:!0,value:'// Create a custom Cloud9 build system - similar to the Sublime build system\n// For more information see https://docs.c9.io/custom_runners.html\n{\n    "cmd" : ["ls", "$file", "$args"],\n    "env" : {},\n    "info" : "Building $project_path/$file_name",\n    "selector": "source.ext"\n}',
document:{meta:{newfile:!0},ace:{customSyntax:"javascript"}}},function(){}):(setCurrentBuilder(e.value,function(){}),
void settings.set("project/build/@builder",e.value))}})
menus.addItemByPath("Run/Build",new ui.item({command:"build"}),c+=100,plugin),menus.addItemByPath("Run/Cancel Build",new ui.item({
command:"stopbuild"}),c+=100,plugin),menus.addItemByPath("Run/Build System/",mnuBuildSystem,c+=100,plugin),
menus.addItemByPath("Run/Show Build Result",new ui.item({onclick:function(){commands.exec("showoutput",null,{
id:"build"})}}),c+=100,plugin),menus.addItemByPath("Run/~",new ui.divider,c+=100,plugin),menus.addItemByPath("Run/Automatically Build Supported Files",new ui.item({
type:"check",checked:"user/build/@autobuild"}),c+=100,plugin),menus.addItemByPath("Run/Save All on Build",new ui.item({
type:"check",checked:"project/build/@saveall"}),c+=100,plugin),c=0,menus.addItemByPath("Run/Build System/Automatic",new ui.item({
type:"radio",value:"auto"}),c+=100,plugin),menus.addItemByPath("Run/Build System/~",new ui.divider,c+=100,plugin),
menus.addItemByPath("Run/Build System/~",new ui.divider,c+=1e3,plugin),menus.addItemByPath("Run/Build System/New Build System",new ui.item({
value:"new-build-system"}),c+=100,plugin),save.on("afterSave",function(e){if(settings.getBool("user/build/@autobuild")){
var ext=fs.getExtension(e.path)
if(ext){if("auto"==currentBuilder){if(Object.keys(build.builders).every(function(name){return build.builders[name].selector!="source."+ext

}))return}else if(currentBuilder.selector!="source."+ext)return
buildFocusTab(!0,e.path)}}})}function setCurrentBuilder(name,callback){currentBuilder=name,"auto"!=currentBuilder&&build.getBuilder(currentBuilder,!0,function(err,builder){
currentBuilder=err?"auto":builder,callback(err,builder)})}function getFocusTab(){var tab=tabs.focussedTab


if(!tab)return!1
if(tab.path)return tab
if("output"!=tab.editor.type)return!1
var splits=tab.pane.aml.parentNode.parentNode.getElementsByTagName("tab")
if(splits.length>1){var idx=splits[0].cloud9pane==tab.pane?1:0
return tab=splits[idx].cloud9pane.getTab()}return!1}function buildFocusTab(onlyBuild,path){function done(){
process=build.build(currentBuilder,{path:path.substr(1)},"build",function(err,pid){if(err&&"EBUILDERNOTFOUND"!=err.code)return showError(err)

})}if(!path){var tab=getFocusTab()
if(!tab)return
path=tab.path}onlyBuild||commands.exec("showoutput",null,{id:"build"}),settings.get("project/build/@saveall")?save.saveAll(done):done()

}var process,currentBuilder,Plugin=imports.Plugin,settings=imports.settings,commands=imports.commands,menus=imports.menus,save=imports.save,build=imports.build,fs=imports.fs,ui=imports.ui,tabs=imports.tabManager,showError=imports["dialog.error"].show,uCaseFirst=require("c9/string").uCaseFirst,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({}),register(null,{"build.gui":plugin
})}return main.consumes=["Plugin","build","settings","commands","fs","save","menus","tabManager","ui","dialog.error"],
main.provides=["build.gui"],main})


define("plugins/c9.ide.run.build/build",[],function(require,module,exports){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,settings.on("read",function(e){settings.setDefaults("project/build",[["path",builderPath]]),
listBuilders(function(err,files){files.forEach(function(file){builders[file]||getBuilder(file,!1,function(err,builder){
err||(builders[file]=builder)})})})},plugin),settings.on("write",function(e){},plugin),prefs.add({Project:{
Build:{position:400,"Builder Path in Workspace":{type:"textbox",path:"project/build/@path",position:1e3
}}}},plugin),prefs.add({Run:{position:600,Build:{position:400,"Automatically Build Supported Files":{
type:"checkbox",path:"user/build/@autobuild",position:100}}}},plugin),void c9.on("stateChange",function(e){},plugin))

}function addBuilder(name,builder,plugin){builders[name]=builder,plugin.addOther(function(){delete builders[name]

})}function listBuilders(callback){var _builders=Object.keys(builders||{})
fs.exists(settings.get("project/build/@path"),function(exists){return exists?void fs.readdir(settings.get("project/build/@path"),function(err,files){
files&&files.forEach(function(file){var name=file.name.match(/(.*)\.build$/)
if(!name){if(file.name.match(/\.\w+$/))return console.warn("Builder ignored, doesn't have .build extension: "+file.name)


name=[0,file.name]}_builders.indexOf(name[1])<0&&_builders.push(name[1])}),callback(null,_builders)}):callback(null,_builders)

})}function detectBuilder(options,callback){function done(){for(var name in builders){var builder=builders[name]


if(run.matchSelector(builder.selector,options.path))return callback(null,builder)}var err=new Error("Could not find Builder")


err.code="EBUILDERNOTFOUND",callback(err)}listBuilders(function(err,names){if(err)return callback(err)


var count=0
names.forEach(function(name){builders[name]||(count++,getBuilder(name,!1,function(){0===--count&&done()

}))}),0===count&&done()})}function getBuilder(name,refresh,callback){var path=settings.get("project/build/@path")+"/"+name+".build"


fs.exists(path,function test(exists){if(exists)!builders[name]||refresh||exists&&options.builders[name]!==builders[name]?fs.readFile(path,"utf8",function(err,data){
if(err)return callback(err)
var builder=util.safeParseJson(data,callback)
builder&&(builder.caption=name.replace(/\.build$/,""),builders[builder.caption]=builder,callback(null,builder))

}):callback(null,builders[name])
else{if(options.builders[name])return callback(null,options.builders[name])
if(/\.build$/.test(path))return path=settings.get("project/build/@path")+"/"+name,fs.exists(path,test)


callback("Builder does not exist")}})}function build(builder,options,name,callback){if(options.builder=!0,
"auto"==builder)return detectBuilder(options,function(err,detected){return err?callback(err):void build(detected,options,name,callback)

})
var proc=run.run(builder,options,name,callback)
processes.push(proc)
var event={process:proc}
return proc.on("starting",function(){emit("starting",event)}),proc.on("started",function(){emit("started",event)

}),proc.on("stopping",function(){emit("stopping",event)}),proc.on("stopped",function(){emit("stopped",event),
processes.remove(proc)}),proc}var Plugin=imports.Plugin,settings=imports.settings,prefs=imports.preferences,run=imports.run,fs=imports.fs,c9=imports.c9,util=imports.util,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),builders=util.cloneObject(options.builders),processes=[],base=options.base,builderPath=options.builderPath||"/.c9/builders",loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({STOPPING:run.STOPPING,STOPPED:run.STOPPED,
STARTING:run.STARTING,STARTED:run.STARTED,get processes(){return processes},get builders(){return builders

},get base(){return base},_events:["stopping","stopped","starting","started"],listBuilders:listBuilders,
getBuilder:getBuilder,addBuilder:addBuilder,build:build}),register(null,{build:plugin})}return main.consumes=["Plugin","settings","fs","c9","preferences","run","util"],
main.provides=["build"],main})


define("plugins/c9.ide.run/runcfgdp",[],function(require,exports,module){var oop=require("ace/lib/oop"),TreeData=require("ace_tree/data_provider"),DataProvider=function(root){
TreeData.call(this,root),this.rowHeight=18}
return oop.inherits(DataProvider,TreeData),function(){this.getChildren=function(node){return node.children

},this.hasChildren=function(node){return!1}}.call(DataProvider.prototype),DataProvider})


define("plugins/c9.ide.run/gui",[],function(require,module,exports){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0,commands.addCommand({name:"run",group:"Run & Debug",hint:"run or debug an application",bindKey:{
mac:"Option-F5",win:"Alt-F5"},exec:function(editor,args){runNow(null,null,null,args.callback)}},plugin),
commands.addCommand({name:"stop",group:"Run & Debug",hint:"stop a running node program on the server",
bindKey:{mac:"Shift-F5",win:"Shift-F5"},exec:function(){stop(function(){})}},plugin),commands.addCommand({
name:"runlast",group:"Run & Debug",hint:"run or debug the last run file",bindKey:{mac:"F5",win:"F5"},
exec:function(){runLastFile()},isAvailable:function(){return!!lastRun}},plugin)
var itemCtxTreeRunFile=new ui.item({match:"file",enabled:!c9.readonly,caption:"Run",isAvailable:function(){
return tree.selectedNode&&!tree.selectedNode.isFolder},onclick:function(){runNow("auto",tree.selected.replace(/^\//,""))

}})
tree.getElement("mnuCtxTree",function(mnuCtxTree){menus.addItemToMenu(mnuCtxTree,itemCtxTreeRunFile,150,plugin)

}),c9.on("stateChange",function(e){itemCtxTreeRunFile&&!c9.readonly&&itemCtxTreeRunFile.setAttribute("disabled",!(e.state&c9.PROCESS))

},plugin),run.on("started",function(){settings.getBool("user/preview/@running_app")&&commands.exec("preview",null,{
server:!0,nocheck:!0,pane:tabs.getPanes(tabs.container)[0]})})
var c=1e3
menus.setRootMenu("Run",600,plugin)
var itmRun=new ui.item({isAvailable:function(){var tab=tabs.focussedTab,path=tab&&tab.path
if(process&&process.running)return itmRun.setAttribute("caption","Stop"),itmRun.setAttribute("command","stop"),
!0
var runner=path&&getRunner(path)
return runner?(itmRun.setAttribute("command","run"),itmRun.setAttribute("caption","Run "+basename(path)+" with "+runner.caption),
!0):(itmRun.setAttribute("command","run"),itmRun.setAttribute("caption","Run"),!1)}})
menus.addItemByPath("Run/Run",itmRun,c+=100,plugin)
var itmRunLast=new ui.item({command:"runlast",isAvailable:function(){if(process&&process.running||!lastRun)return itmRunLast.setAttribute("caption","Run Last"),
!1
var runner="auto"==lastRun[0]?getRunner(lastRun[1]):lastRun[0]
return itmRunLast.setAttribute("caption","Run Last ("+basename(lastRun[1])+", "+(runner.caption||"auto")+")"),
!0}})
menus.addItemByPath("Run/Run Last",itmRunLast,c+=100,plugin),menus.addItemByPath("Run/~",new ui.divider,c+=100,plugin)


var lastOpener,preventLoop,mnuRunAs=new ui.menu({id:"mnuRunAs","onprop.visible":function(e){if(e.value&&!preventLoop){
run.listRunners(function(err,names){for(var nodes=mnuRunAs.childNodes,i=nodes.length-4;i>=0;i--)mnuRunAs.removeChild(nodes[i])


var c=300
names.sort().forEach(function(name){menus.addItemToMenu(mnuRunAs,new ui.item({caption:uCaseFirst(name),
value:name}),c++,plugin)}),mnuRunAs.visible&&mnuRunAs.opener&&"button"==mnuRunAs.opener.localName&&(preventLoop=!0,
mnuRunAs.display(null,null,!0,mnuRunAs.opener),preventLoop=!1)}),lastOpener=this.opener
var editMenu=mnuRunAs.childNodes[mnuRunAs.childNodes.length-1]
this.opener&&"Run With"!==this.opener.getAttribute("caption")?(editMenu.setAttribute("visible",!0),assert(this.opener.getAttribute("caption").match(/Runner: .*/))):editMenu.setAttribute("visible",!1)

}},onitemclick:function(e){if("new-run-system"==e.value)return void tabs.open({path:settings.get("project/run/@path")+"/My Runner.run",
active:!0,value:'// Create a custom Cloud9 runner - similar to the Sublime build system\n// For more information see https://docs.c9.io/custom_runners.html\n{\n    "cmd" : ["ls", "$file", "$args"],\n    "info" : "Started $project_path$file_name",\n    "env" : {},\n    "selector" : "source.ext"\n}',
document:{meta:{newfile:!0},ace:{customSyntax:"javascript"}}},function(){})
if("edit-run-system"===e.value){var runnerName=lastOpener.getAttribute("caption").match(/Runner: (.*)/)[1],path=settings.get("project/run/@path")+"/"+runnerName+".run"


return void run.getRunner(runnerName,function(err,runner){err&&showError(err),runner&&(delete runner.caption,
delete runner.$builtin),fs.exists(path,function(exists){tabs.open({path:path,active:!0,value:exists?void 0:"// This file overrides the built-in "+runnerName+" runner\n// For more information see http://docs.c9.io:8080/#!/api/run-method-run\n"+JSON.stringify(runner,null,2),
document:!exists&&{meta:{newfile:!0},ace:{customSyntax:"javascript"}}},function(){})})})}return lastOpener&&lastOpener.onitemclick?lastOpener.onitemclick(e.value):(run.getRunner(e.value,function(err,runner){
return err?showError(err):void runNow(runner)}),void settings.set("project/run/@runner",e.value))}})
mnuRunCfg=new ui.menu({id:"mnuRunCfg","onprop.visible":function(e){if(e.value){for(var nodes=mnuRunCfg.childNodes,i=nodes.length-4;i>=0;i--)mnuRunCfg.removeChild(nodes[i])


var configs=settings.getJson("project/run/configs")||{}
for(var name in configs){var c=0
menus.addItemToMenu(mnuRunCfg,new ui.item({caption:name,value:configs[name]}),c++,plugin)}}},onitemclick:function(e){
return"new-run-config"==e.value?void commands.exec("showoutput",null,{}):"manage"==e.value?void commands.exec("openpreferences",null,{
panel:"preferences.project",section:"Run Configuration"}):void commands.exec("showoutput",null,{run:!0,
config:e.value})}}),plugin.addElement(mnuRunAs,mnuRunCfg),menus.addItemByPath("Run/Run With/",mnuRunAs,c+=100,plugin),
menus.addItemByPath("Run/Run History/",new ui.item({isAvailable:function(){return!1}}),c+=100,plugin),
menus.addItemByPath("Run/Run Configurations/",mnuRunCfg,c+=100,plugin),menus.addItemByPath("Run/~",new ui.divider,c+=1e3,plugin),
menus.addItemByPath("Run/Show Debugger at Break",new ui.item({type:"check",checked:"user/debug/@autoshow"
}),c+=100,plugin),c=0,menus.addItemByPath("Run/Run Configurations/~",new ui.divider,c+=1e3,plugin),menus.addItemByPath("Run/Run Configurations/New Run Configuration",new ui.item({
value:"new-run-config"}),c+=100,plugin),menus.addItemByPath("Run/Run Configurations/Manage...",new ui.item({
value:"manage"}),c+=100,plugin),c=0,menus.addItemByPath("Run/Run With/~",new ui.divider,c+=1e3,plugin),
menus.addItemByPath("Run/Run With/New Runner",new ui.item({value:"new-run-system"}),c+=100,plugin),menus.addItemByPath("Run/Run With/Edit Runner",new ui.item({
value:"edit-run-system"}),c+=100,plugin),menus.addItemToMenu(tabs.getElement("mnuEditors"),new ui.item({
caption:"New Run Configuration",hotkey:"commands.showoutput",onclick:function(e){commands.exec("showoutput",null,{
pane:this.parentNode.pane})}}),250,plugin)
var mnuContext=tabbehavior.contextMenu
menus.addItemByPath("Run This File",new ui.item({onclick:function(){var tab=mnuContext.$tab
tab&&tab.path&&runNow("auto",tab.path.replace(/^\//,""))},isAvailable:function(){var tab=mnuContext.$tab


return tab&&tab.path&&(!process||!process.running)}}),150,mnuContext,plugin),draw(),prefs.add({Run:{position:600,
"Run & Debug":{position:100,"Save All Unsaved Tabs Before Running":{type:"checkbox",path:"user/runconfig/@saveallbeforerun",
position:100}}}},plugin),prefs.add({Project:{"Run & Debug":{position:300,"Runner Path in Workspace":{
type:"textbox",path:"project/run/@path",position:1e3}},"Run Configurations":{position:200,"Run Configurations":{
type:"custom",name:"runcfg",title:"Run Configurations",position:120,node:new ui.bar({style:"padding:10px"
})}}}},plugin),plugin.getElement("runcfg",function(hbox){model=new TreeData,model.emptyMessage="No run configurations",
model.columns=[{caption:"Name",value:"name",width:"15%"},{caption:"Command",value:"command",width:"30%"
},{caption:"CWD",value:"cwd",width:"15%"},{caption:"Debug",value:"debug",width:"10%"},{caption:"Runner",
value:"runner",width:"20%"},{caption:"Default",value:"default",width:"10%"}],layout.on("eachTheme",function(e){
var height=parseInt(ui.getStyleRule(".bar-preferences .blackdg .tree-row","height"),10)||24
model.rowHeightInner=height,model.rowHeight=height,e.changed&&datagrid.resize(!0)})
var container=hbox.$ext.appendChild(document.createElement("div"))
container.style.width="600px",container.style.marginBottom="30px",datagrid=new Tree(container),datagrid.setTheme({
cssClass:"blackdg"}),datagrid.setOption("maxLines",200),datagrid.setDataProvider(model),datagrid.on("afterChoose",function(){
var nodes=datagrid.selection.getSelectedNodes(),cfgs=settings.getJson("project/run/configs")
nodes.forEach(function(node){commands.exec("showoutput",null,{config:cfgs[node.name]})})}),datagrid.on("delete",function(e){
var nodes=datagrid.selection.getSelectedNodes()
nodes.forEach(function(node){removeConfig(node.name),datagrid.provider._signal("remove",node)})}),new ui.hbox({
htmlNode:container.parentNode,style:"position:absolute;left:10px;bottom:10px",childNodes:[new ui.button({
caption:"Remove Selected Configs",skin:"c9-toolbarbutton-glossy",onclick:function(){datagrid.execCommand("delete")

}}),new ui.button({caption:"Add New Config",skin:"c9-toolbarbutton-glossy",onclick:function(){commands.exec("showoutput",null,{})

}}),new ui.button({caption:"Set As Default",skin:"c9-toolbarbutton-glossy",onclick:function(){var node=datagrid.selection.getSelectedNodes()[0]


if(node){var json=settings.getJson("project/run/configs")||{},wasDefault=json[node.name]["default"]
for(var name in json)delete json[name]["default"]
json[node.name]["default"]=!wasDefault,settings.setJson("project/run/configs",json),defConfig=wasDefault?null:node.name,
reloadModel(),transformButton()}}})]}),reloadModel()},plugin),settings.on("read",function(e){settings.setDefaults("user/runconfig",[["saveallbeforerun","true"],["debug","true"],["showruncfglist","false"]]),
settings.getBool("project/run/configs/@inited")||(settings.setJson("project/run/configs",defaultConfigs),
settings.set("project/run/configs/@inited","true"))
var json=settings.getJson("project/run/configs")||{}
for(var name in json)if(json[name]["default"]){defConfig=name
break}transformButton()
var state=settings.get("state/run/process")
state&&run.on("create",function wait(e){e.process.name==state&&(process=e.process,decorateProcess(),transformButton("stop"),
run.off("create",wait))})},plugin),settings.on("project/run/configs",function(){reloadModel()},plugin),
tabs.on("focus",function(e){process&&process.running||transformButton()},plugin),tabs.on("tabDestroy",function(e){
!e.last||defConfig||tabs.focussedTab||(btnRun.disable(),btnRun.setAttribute("tooltip",""))},plugin)
var activateOutput=function(plugin){plugin.getTabs().forEach(function(tab){if("output"==tab.editorType&&!tab.document.getSession()){
var state=tab.document.getState();(state.output.running||!1).debug&&tab.pane.createEditor(tab.editorType,function(err,editor){
editor.loadDocument(tab.document)})}})}
tabs.once("ready",activateOutput.bind(this,tabs)),c9console.once("ready",activateOutput.bind(this,c9console)),
ace.getElement("menu",function(menu){menus.addItemToMenu(menu,new ui.item({caption:"Run This File",command:"run"
}),800,plugin),menus.addItemToMenu(menu,new ui.divider,900,plugin)})}function draw(){drawn||(drawn=!0,
btnRun=ui.insertByIndex(layout.findParent(plugin),new ui.button({id:"btnRun",skin:"c9-toolbarbutton-glossy",
command:"run",caption:"Run",disabled:!0,"class":"runbtn stopped",icon:"run.png"}),100,plugin),btnRun.on("contextmenu",function(e){
return mnuRunCfg.display(e.x,e.y),!1}),emit("draw"))}function removeConfig(name){var cfgs=settings.getJson("project/run/configs")


cfgs&&(delete cfgs[name],settings.setJson("project/run/configs",cfgs))}function reloadModel(){if(model){
var cfgs=settings.getJson("project/run/configs")||{},nodes=Object.keys(cfgs).map(function(name){return cfgs[name]

}).sort()
model.setRoot({children:nodes}),defConfig=null
for(var name in cfgs)if(cfgs[name]["default"]){defConfig=name
break}transformButton()}}function getRunner(path){var ext=path&&fs.getExtension(path)
for(var name in run.runners)if(run.runners[name].selector=="source."+ext)return run.runners[name]
return!1}function runNow(runner,path,isEscapedPath,callback){function start(){process&&process.running?stop(done):done()

}function done(){runner||(runner="auto")
var config
if(defConfig&&!path){var configs=settings.getJson("project/run/configs")||{}
config=configs[defConfig]}else config={runner:runner.caption||runner,command:isEscapedPath?path:util.escapeShell(path)
}
var id
defConfig&&config.name==defConfig&&(id="output-default",config.name&&(id+=config.name.replace(/[^\w]/g,function(i){
return"-"+i.charCodeAt(0).toString(36)}))),commands.exec("showoutput",null,{runner:runner,run:!0,config:config,
id:id,callback:function(proc,tab){defConfig&&(process=proc,decorateProcess(),transformButton("stop"),
settings.set("state/run/process",process.name)),callback&&callback(proc,tab)}})}path||defConfig||(path=findTabToRun()||""),
settings.getBool("user/runconfig/@saveallbeforerun")?save.saveAll({skipNewFiles:!0},start):start(),lastRun=[runner,path]

}function decorateProcess(){process.on("away",function(){btnRun.disable()},plugin),process.on("back",function(){
btnRun.enable()},plugin),process.on("stopping",function(){btnRun.disable()},plugin),process.on("stopped",function(){
btnRun.enable()
var path=transformButton()
path||lastRun||defConfig?btnRun.enable():btnRun.disable(),settings.set("state/run/process","")},plugin)

}function findTabToRun(){var path=tabs.focussedTab&&tabs.focussedTab.path
if(path)return path.replace(/^\//,"")
var foundActive
return!(!tabs.getPanes().every(function(pane){var tab=pane.activeTab
if(tab&&tab.path){if(foundActive)return!1
foundActive=tab}return!0})||!foundActive)&&foundActive.path.replace(/^\//,"")}function transformButton(to){
if("stop"==to)return btnRun.setAttribute("command","stop"),btnRun.setAttribute("caption","Stop"),btnRun.setAttribute("tooltip",""),
btnRun.setAttribute("class","runbtn running"),btnRun.enable(),btnRun
btnRun.setAttribute("class","runbtn stopped")
var path=findTabToRun()
if(!path||emit("updateRunButton",{path:/[~\/]/.test(path.charAt(0))?path:"/"+path,button:btnRun})!==!1)if(defConfig)btnRun.setAttribute("caption","Run Project"),
btnRun.setAttribute("tooltip",""),btnRun.setAttribute("command","run"),btnRun.setAttribute("disabled","false")
else if(path)btnRun.enable(),btnRun.setAttribute("command","run"),btnRun.setAttribute("caption","Run"),
btnRun.setAttribute("tooltip","Run "+basename(path))
else if(lastRun){var runner="auto"==lastRun[0]?getRunner(lastRun[1]):lastRun[0]
btnRun.enable(),btnRun.setAttribute("command","runlast"),btnRun.setAttribute("caption","Run Last"),btnRun.setAttribute("tooltip","Run Last ("+basename(lastRun[1])+", "+(runner&&runner.caption||"auto")+")")

}else btnRun.disable(),btnRun.setAttribute("caption","Run"),btnRun.setAttribute("tooltip","")}function stop(callback){
process&&process.stop(function(err){err&&(showError(err.message||err),transformButton()),debug.stop(),
callback(err)})}function runLastFile(){lastRun&&runNow(lastRun[0],lastRun[1],!0)}var btnRun,lastRun,process,mnuRunCfg,model,datagrid,defConfig,Plugin=imports.Plugin,settings=imports.settings,menus=imports.menus,commands=imports.commands,run=imports.run,util=imports.util,c9=imports.c9,ui=imports.ui,fs=imports.fs,layout=imports.layout,tree=imports.tree,tabs=imports.tabManager,tabbehavior=imports.tabbehavior,debug=imports["debugger"],prefs=imports.preferences,c9console=imports.console,ace=imports.ace,save=imports.save,showError=imports["dialog.error"].show,assert=require("c9/assert"),Tree=require("ace_tree/tree"),TreeData=require("./runcfgdp"),basename=require("path").basename,uCaseFirst=require("c9/string").uCaseFirst,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),defaultConfigs=options.defaultConfigs,loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({get lastRun(){return lastRun

},set lastRun(lr){lastRun=lr},transformButton:transformButton}),register(null,{"run.gui":plugin})}return main.consumes=["c9","Plugin","run","settings","menus","tabbehavior","ace","commands","layout","tabManager","preferences","ui","fs","layout","debugger","tree","dialog.error","util","console","save"],
main.provides=["run.gui"],main})


define("plugins/c9.ide.run/run",[],function(require,module,exports){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,void settings.on("read",function(e){settings.setDefaults("project/run",[["path",runnerPath]])

},handle))}function addRunner(name,runner,plugin){runners[name]=runner,plugin.addOther(function(){delete runners[name]

})}function listRunners(callback){var _runners=Object.keys(runners||{})
fs.exists(settings.get("project/run/@path"),function(exists){return exists?void fs.readdir(settings.get("project/run/@path"),function(err,files){
files&&files.forEach(function(file){var name=file.name.match(/(.*)\.run$/)
if(!name){if(file.name.match(/\.\w+$/))return console.warn("Runner ignored, doesn't have .run extension: "+file.name)


name=[0,file.name]}_runners.indexOf(name[1])<0&&_runners.push(name[1])}),callback(null,_runners)}):callback(null,_runners)

})}function detectRunner(options,callback){function done(){for(var name in runners){var runner=runners[name]


if((!runner.python_version||runner.python_version===settings.get("project/python/@version"))&&matchSelector(runner.selector,options.path))return callback(null,runner)

}var err=new Error("Could not find Runner")
err.code="ERUNNERNOTFOUND",callback(err)}listRunners(function(err,names){if(err)return callback(err)
var count=0
names.forEach(function(name){runners[name]||(count++,getRunner(name,!1,function(){0===--count&&done()

}))}),0===count&&done()})}function matchSelector(selector,path){if("string"==typeof selector){if(0===selector.indexOf("source."))return selector=="source."+fs.getExtension(path)


var re=new RegExp(selector),file=basename(path)
return re.test(file)}return selector instanceof Array&&selector.some(function(n){return matchSelector(n,path)

})}function getRunner(name,refresh,callback){function done(runner){callback(null,runner)}if("function"==typeof refresh&&(callback=refresh,
refresh=!1),"Python 2.7"===name&&(name="Python 2"),"Python 3.4"===name&&(name="Python 3"),runners[name]&&refresh===!1)return done(runners[name])


var path=settings.get("project/run/@path")+"/"+name+".run"
fs.exists(path,function test(exists){if(exists)fs.readFile(path,"utf8",function(err,data){if(err)return callback(err)


var runner=util.safeParseJson(data,callback)
runner&&(runner.caption=runner.caption||name.replace(/\.run$/,""),runners[runner.caption]=runner,done(runner))

})
else{if(/\.run$/.test(path))return path=settings.get("project/run/@path")+"/"+name,fs.exists(path,test)


callback("Runner does not exist")}})}function restoreProcess(state){var process=new Process(state)
return handleEmit("create",{process:process}),process}function makeAbsolutePath(path){return path?"~"===path.charAt(0)?join(c9.home,path.substr(1)):/^([a-zA-Z]:)?\//.test(path)?path:join(base,path):path

}function run(runner,options,name,callback){"function"==typeof name&&(callback=name,name=null),name||(name="output"),
(options instanceof Array?options:[options]).forEach(function(a){a.relPath=a.path,a.path=makeAbsolutePath(a.path),
a.path=c9.toExternalPath(a.path,"/"),a.cwd=makeAbsolutePath(a.cwd)})
var proc=new Process(name,runner,options,callback)
processes.push(proc)
var event={process:proc,runner:runner}
return proc.on("starting",function(){handleEmit("starting",event)}),proc.on("started",function(){handleEmit("started",event)

}),proc.on("stopping",function(){handleEmit("stopping",event)}),proc.on("stopped",function(){handleEmit("stopped",event),
processes.remove(proc)}),handleEmit("create",event),proc}function stopAll(){processes.forEach(function(proc){
proc.stop()})}function Process(procName,runner,options,callback){function run(srunner,options,callback){
if(running&&(!options||!options.force))return callback(new Error("Already running"))
if(running=STARTING,"auto"==srunner)return detectRunner(options,function(err,runner){return err?callback(err):(options.force=!0,
void run(runner,options,callback))})
if(runner=srunner,emit("starting"),runner instanceof Array||(runner=[runner]),options instanceof Array||(options=[options]),
deferred)return setTimeout(callback)
cmd=runner.map(function(runner,idx){var cmd=""
runner.info&&(cmd+="printf '\\033[1m"+runner.info.replace(/%/g,"%%")+"\\033[m\n' ; "),runner.path&&(cmd+="export PATH="+runner.path+" ; ")


var env=util.extend({},options[idx].env,runner.env)
for(var name in env){var value=/^["'].*["']$/.test(env[name])?env[name]:env[name].replace(/'/g,"'\\''")


cmd+="export "+name+"='"+value+"'; "}if(runner.script){cmd=insertVariables(cmd,options[idx]),cmd+="string"==typeof runner.script?runner.script:runner.script.join("\n")


var matches=cmd.match(/\$[\w\-]+/g)||[],seen={}
cmd=matches.map(function(key){if(seen[key])return""
seen[key]=1
var val=getVariable(key.slice(1),options[idx])
return val==key?"":key.slice(1)+"="+bashQuote([val])+";"}).join("")+"\n"+cmd}else cmd+=bashQuote(options[idx].debug&&runner["cmd-debug"]||runner.cmd),
cmd=insertVariables(cmd,options[idx])
return cmd}).join("; "),options=options[0]
var cwd=options.cwd||runner[0].working_dir||options.path&&dirname(c9.toInternalPath(options.path))||"/"


cwd=insertVariables(cwd,options),console.log(cmd),proc.tmux(cmd,{session:procName,detach:options.detach!==!1,
base:installPath.replace(/^~/,c9.home||"~"),kill:!0,output:!0,cols:100,rows:5,cwd:cwd,validatePath:!0,
testing:testing},function(err,pty,processId){return err?callback(err):(process=pty,pid=processId,running=STARTED,
emit("started",{pty:pty,options:options}),void(options.detach===!1?(pty.on("data",function(data){emit("data",data)

}),pty.on("exit",function(){emit("detach")})):pid==-1?(callback(null,-1),cleanup()):callback(null,pid)))

})}function getVariable(name,options){var fnme,idx,port,path=options.path,args=options.args
return"command"==name?options.relPath||"":"file"==name?path||"":"file_path"==name?dirname(path||""):"file_name"==name?basename(path||""):"file_extension"==name?path?(fnme=basename(path),
idx=fnme.lastIndexOf("."),idx==-1?"":fnme.substr(idx+1)):"":"args"===name?bashQuote(args,!0):"file_base_name"==name?path?(fnme=basename(path),
idx=fnme.lastIndexOf("."),idx==-1?fnme:fnme.substr(0,idx)):"":"packages"==name?installPath+"/packages":"project_path"==name?base:"project_id"==name?workspace.id:"project_name"==name?workspace.name:"project_contents"==name?workspace.contents:"hostname"==name?c9.hostname||"localhost":"hostname_path"==name?(port=options.local?":"+(c9.port||"8080"):"",
("https://"+c9.hostname||"http://localhost")+port+"/"+(options.relPath||"")):"url"==name?(port=options.local?":"+(c9.port||"8080"):"",
(c9.hostname?"https://"+c9.hostname:"http://localhost")+port):"port"==name?c9.port||"8080":"ip"==name?"0.0.0.0":"home"==name?c9.home:"python"==name?settings.get("project/python/@version"):"python_path"==name?settings.get("project/python/@path"):"debug"==name?options.debug+"":"$"+name

}function reverse(str){return str.split("").reverse().join("")}function insertVariables(cmd,options){
var oldCmd
do oldCmd=cmd,cmd=cmd.replace(/(^|[^\\])(?:\$([\w_]+)|\$\{([^}]+)\})([^\\]|)/g,function(m,startChar,name,nameBrackets,endChar){
return name||!nameBrackets?startChar+getVariable(name,options)+endChar:startChar?nameBrackets.match(/^([\w_]+)\:(.*)$/)?startChar+(getVariable(RegExp.$1,options)||RegExp.$2)+endChar:nameBrackets.match(/^([\w_]+)\?`(.*)`$/)?options[RegExp.$1]?"`"+RegExp.$2+"`":"":nameBrackets.match(/^([\w_]+)\?(.*)$/)?options[RegExp.$1]?startChar+RegExp.$2+endChar:startChar.trim().charAt(0).match(/['"]/)?"":startChar+endChar:nameBrackets.match(/^([\w_]+)\/(.*)$/)?startChar+reverse(nameBrackets).replace(/^\/?(.*)\/(?!\\)(.*)\/(?!\\)([\w_]+)$/,function(m,replace,find,name){
var data=getVariable(reverse(name),options),re=new RegExp(reverse(find),"g")
return data.replace(re,reverse(replace))})+endChar:startChar+getVariable(nameBrackets,options)+endChar:void 0

})
while(cmd!==oldCmd)
return cmd}function cleanup(callback){function finish(){return pid=0,runner=null,running=STOPPED,emit("stopped"),
callback&&callback(),!1}return running==CLEANING||running==STOPPING||running==STOPPED?0!==running?finish():callback&&callback():(running>0&&(running=STOPPING,
emit("stopping")),void checkState())}function stop(callback){if(callback=callback||function(){},!running)return callback()


if(pid)running=STOPPING,emit("stopping"),killOldProcess(callback)
else if(running===STARTING){var timer=setTimeout(function(){cleanup(function(){callback(new Error("Could not get PID from process. The process seemed to not be running anymore."))

})},2e3)
plugin.on("started",function(e){clearTimeout(timer),e.pid>0?stop(callback):callback()})}else cleanup(function(){
callback(new Error("Could not get PID from running process. Process might still be running in the background."))

})}function killOldProcess(callback){function done(err,e){err&&"EDISCONNECT"!==err.code&&(err=null),cleanup(function(){
callback(err,e)})}if("win32"===c9.platform)return proc.execFile("kill",{args:[pid]},done)
var runCfg=runner&&runner[0]
return runCfg&&runCfg.cmdStop?proc.execFile("bash",{args:["-c",bashQuote(runCfg.cmdStop)]},done):void proc.killtree(pid,{
graceful:!0},function(){if(runCfg&&runCfg.cmdCleanup)proc.execFile("bash",{args:["-c",bashQuote(runCfg.cmdCleanup)]
},done)
else if(meta.debug&&runner&&runner[0].debugport){var kill="kill -9 $(lsof -i:"+runner[0].debugport+" -t);if sudo -n true; then sudo kill -9 $(sudo lsof -i:"+runner[0].debugport+" -t); fi"


proc.execFile("sh",{args:["-c",kill]},done)}else done()})}function checkState(cb){return checking?checking.push(cb):(checking=[cb],
void proc.tmux("",{session:procName,fetchpid:!0},function(err,pty,newPid){var callbacks=checking||[]
checking=!1,err||newPid==-1||!newPid?cleanup():(pid=newPid,running||(running=STARTED,emit("started",{
pty:pty,options:options})),emit("back")),callbacks.forEach(function(cb){cb&&cb()})}))}function getState(){
return{pid:pid,name:procName,running:running>=0?running:0,runner:runner}}function detach(callback){process&&process.write(String.fromCharCode(2)+"d")

}var plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()
emit.setMaxListeners(100)
var pid,process,cmd,running=STOPPED,deferred=options&&options.deferred,meta={}
"object"==typeof procName&&(pid=procName.pid,runner=procName.runner,running=procName.running,procName=procName.name),
c9.on("stateChange",function(e){e.state&c9.PROCESS?running!=STARTED&&running!=STARTING||checkState():running!=STARTED&&running!=STARTING||emit("away")

},plugin)
var checking
return plugin.freezePublicAPI({CLEANING:CLEANING,STOPPING:STOPPING,STOPPED:STOPPED,STARTING:STARTING,
STARTED:STARTED,get running(){return running},get runner(){return runner},get pid(){return pid},get name(){
return procName},get meta(){return meta},get command(){return cmd},_events:["stopping","stopped","starting","started"],
getState:getState,checkState:checkState,detach:detach,stop:stop,run:function(callback){return deferred?(deferred=!1,
options.force=!0,void run(runner,options,callback||function(){})):callback(new Error("Cannot call run() on non-deferred process"))

},insertVariables:function(str){return insertVariables(str,options)}}),pid?checkState():run(runner,options,callback||function(){}),
plugin}function bashQuote(commandArgs,alsoQuoteArgs){return commandArgs?commandArgs.map(function(part){
return"$args"!==part||alsoQuoteArgs?part.match(/^`.*`$/)?part:'"'+part.replace(/'/g,"'\"'")+'"':part}).join(" "):""

}var Plugin=imports.Plugin,settings=imports.settings,proc=imports.proc,util=imports.util,fs=imports.fs,c9=imports.c9,info=imports.info,basename=require("path").basename,dirname=require("path").dirname,join=require("path").join,handle=new Plugin("Ajax.org",main.consumes),handleEmit=handle.getEmitter(),CLEANING=-2,STOPPING=-1,STOPPED=0,STARTING=1,STARTED=2,installPath=(options.staticPrefix,
options.installPath||"~/.c9"),runners=(options.tmux||installPath+"/bin/tmux",util.cloneObject(options.runners)),testing=options.testing,runnerPath=options.runnerPath||"/.c9/runners",base=(options.base||"").replace(/\/?$/,"/"),workspace=info.getWorkspace(),processes=[],loaded=!1


handle.on("load",function(){load()}),handle.on("enable",function(){}),handle.on("disable",function(){}),
handle.on("unload",function(){loaded=!1}),handle.freezePublicAPI({CLEANING:CLEANING,STOPPING:STOPPING,
STOPPED:STOPPED,STARTING:STARTING,STARTED:STARTED,get processes(){return processes},get runners(){return runners

},_events:["stopping","stopped","starting","started","create"],listRunners:listRunners,detectRunner:detectRunner,
getRunner:getRunner,addRunner:addRunner,stopAll:stopAll,matchSelector:matchSelector,restoreProcess:restoreProcess,
run:run}),register(null,{run:handle})}return main.consumes=["Plugin","proc","settings","fs","c9","util","http","info"],
main.provides=["run"],main})


define("text!plugins/c9.ide.language.jsonalyzer/server/invoke_helper.js",[],'define(function(require, exports, module) {\n\nvar PluginBase = require("plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_base_handler");\nvar paths = require("path");\nvar fs = require("fs");\nvar crypto = require("crypto");\nvar pathSep = require("path").sep;\nvar TEMPDIR = process.env.TMP || process.env.TMPDIR || process.env.TEMP || \'/tmp\';\n\nvar handler = module.exports = Object.create(PluginBase);\nvar workspaceDir;\nvar homeDir;\n \nhandler.extensions = [];\n\nhandler.languages = [];\n\nhandler.maxCallInterval = handler.CALL_INTERVAL_MIN;\n\nhandler.init = function(options, callback) {\n    workspaceDir = options.workspaceDir;\n    homeDir = options.homeDir;\n    callback();\n};\n\nhandler.invoke = function(path, doc, ast, options, callback) {\n    options.mode = options.mode || "stdin";\n    if (options.overrideLine != null) {\n        var lines = doc.toString().split(/\\r\\n|\\n|\\r/);\n        if (lines[options.overrideLineRow] !== options.overrideLine) {\n            lines[options.overrideLineRow] = options.overrideLine;\n            doc = lines.join("\\n");\n        }\n    }\n    if (options.cwd)\n        options.cwd = makeAbsolute(options.cwd);\n    path = makeAbsolute(path);\n    \n    if (options.mode === "stdin")\n        return this.$doInvoke(path, doc, options, callback);\n\n    var tempdir = options.mode === "tempfile"\n        ? TEMPDIR\n        : options.cwd || workspaceDir;\n    var tempFile = getTempFile(tempdir) + paths.extname(path);\n    var that = this;\n    fs.writeFile(tempFile, doc, "utf8", function(err) {\n        if (err) {\n            err.code = "EFATAL";\n            return done(err);\n        }\n        that.$doInvoke(tempFile, doc, options, done);\n        \n        function done(err, stdout, stderr, meta) {\n            callback(err, stdout, stderr, meta);\n            \n            fs.unlink(tempFile, function(err2) {\n                if (err2) console.error("Error during cleanup:", err2);\n            });\n        }\n    });\n};\n\nhandler.$doInvoke = function(path, doc, options, callback) {\n    var start = Date.now();\n    this.$lint(\n        options.command,\n        (options.args || []).map(function(arg) {\n            return String(arg).replace(/\\$FILE\\b/, path);\n        }),\n        options.mode === "stdin" && doc,\n        options,\n        function(err, stdout, stderr, originalErr) {\n            callback(err || originalErr, stdout, stderr, Date.now() - start);\n        }\n    );\n};\n        \nfunction getTempFile(path) {\n    return path + pathSep + ".~c9_invoke_" + crypto\n        .randomBytes(6)\n        .toString("base64")\n        .slice(0, 6)\n        .replace(/[+\\/]+/g, "");\n}\n\nfunction makeAbsolute(path) {\n    if (path[0] === "~")\n        return homeDir + path.substr(1);\n    if (path[0] === "/")\n        return path;\n    return workspaceDir + "/" + path;\n}\n\n});\n')


define("text!plugins/c9.ide.language.jsonalyzer/server/handlers/jsonalyzer_sh_server.js",[],'define(function(require, exports, module) {\n\nvar PluginBase = require("plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_base_handler");\nvar child_process = require("child_process");\n\nvar handler = module.exports = Object.create(PluginBase);\nvar bashBin;\n\nhandler.extensions = ["sh"];\n\nhandler.languages = ["sh"];\n\nhandler.maxCallInterval = handler.CALL_INTERVAL_BASIC;\n\nhandler.init = function(options, callback) {\n    bashBin = options.bashBin || "bash";\n    callback();\n};\n\nhandler.analyzeCurrent = function(path, doc, ast, options, callback) {\n    var child;\n    try {\n        child = child_process.execFile(\n            bashBin,\n            doc ? ["-n"] : ["-n", path],\n            function(err, stdout, stderr) {\n                if (err && err.code !== 2) return callback(err);\n    \n                var markers = [];\n                var lastMarker;\n                \n                stderr.split("\\n").forEach(function(line) {\n                    var match = line.match(/^([^:]+):\\s*(?:line\\s*)?([^:]+):\\s*(.*)/);\n                    if (!match)\n                        return;\n                    var row = match[2];\n                    var message = match[3];\n                    if (message.match(/^`(.*)\'$/)) {\n                        return tryAddColumn(lastMarker, RegExp.$1);\n                    }\n                    \n                    markers.push(lastMarker = {\n                        pos: { sl: parseInt(row, 10) - 1 },\n                        message: message,\n                        level: message.match(/error/) ? "error" : "warning"\n                    });\n                });\n                \n                callback(null, null, markers);\n            }\n        );\n    }\n    catch (err) {\n        err.code = "EFATAL";\n        return callback(err);\n    }\n    \n    child.stdin.on("error", function(e) {\n    });\n    \n    if (doc)\n        child.stdin.end(doc);\n};\n\nfunction tryAddColumn(marker, line) {\n    if (!marker || !marker.message.match(/token `(.)\'/))\n        return;\n    var token = RegExp.$1;\n    var tokenIndex = line.indexOf(token);\n    if (tokenIndex === -1 || tokenIndex !== line.lastIndexOf(token))\n        return;\n    marker.pos.sc = tokenIndex;\n    marker.pos.ec = tokenIndex + 1;\n}\n\n});')


define("text!plugins/c9.ide.language.jsonalyzer/server/handlers/jsonalyzer_php_server.js",[],'define(function(require, exports, module) {\n\nvar PluginBase = require("plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_base_handler");\n\nvar handler = module.exports = Object.create(PluginBase);\n\nhandler.extensions = ["php", "php3", "php4", "php5"];\n\nhandler.languages = ["php"];\n\nhandler.maxCallInterval = handler.CALL_INTERVAL_BASIC;\n\nhandler.init = function(options, callback) {\n    callback();\n};\n\nhandler.analyzeCurrent = function(path, doc, ast, options, callback) {\n    var args = [\n        "-l",\n        "-d", "display_errors=On",\n        "-d", "log_errors=Off"\n    ];\n    \n    if (!doc)\n        args.push(path);\n    \n    this.$lint(\n        "php",\n        args,\n        doc,\n        function(err, stdout, stderr) {\n            if (err) return callback(err);\n            \n            var markers = [];\n            \n            (stdout + stderr).split("\\n").forEach(function(line) {\n                var match = line.match(/(?:Parse|Fatal)(?: error: )(.*?) in (?:.*?) on line (\\d+)/);\n                if (!match)\n                    return;\n                var message = match[1];\n                var row = match[2];\n                markers.push({\n                    pos: { sl: parseInt(row, 10) - 1 },\n                    message: message,\n                    level: message.match(/error/) ? "error" : "warning"\n                });\n            });\n            \n            callback(null, null, markers);\n        }\n    );\n};\n\n});')


define("text!plugins/c9.ide.language.jsonalyzer/server/handlers/jsonalyzer_rb_server.js",[],'define(function(require, exports, module) {\n\nvar PluginBase = require("plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_base_handler");\n\nvar handler = module.exports = Object.create(PluginBase);\n\nhandler.extensions = ["rb"];\n\nhandler.languages = ["ruby"];\n\nhandler.maxCallInterval = handler.CALL_INTERVAL_BASIC;\n\nhandler.init = function(options, callback) {\n    callback();\n};\n\nhandler.analyzeCurrent = function(path, doc, ast, options, callback) {\n    this.$lint(\n        "ruby",\n        doc ? ["-wc", "-Ku"] : ["-wc", path],\n        doc,\n        function(err, stdout, stderr) {\n            if (err) return callback(err);\n\n            var markers = [];\n            \n            stderr.split("\\n").forEach(function(line) {\n                var match = line.match(/^(.*?):(\\d+): (.*)/);\n                if (!match)\n                    return;\n                var row = match[2];\n                var message = match[3];\n                markers.push({\n                    pos: { sl: parseInt(row, 10) - 1 },\n                    message: message,\n                    level: message.match(/warning/) ? "warning" : "error"\n                });\n            });\n            \n            callback(null, null, markers);\n        }\n    );\n};\n\n});')


define("text!plugins/c9.ide.language.jsonalyzer/server/handlers/jsonalyzer_go_server.js",[],'define(function(require, exports, module) {\n\nvar PluginBase = require("plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_base_handler");\n\nvar handler = module.exports = Object.create(PluginBase);\n\nhandler.extensions = ["go"];\n\nhandler.languages = ["golang"];\n\nhandler.maxCallInterval = handler.CALL_INTERVAL_BASIC;\n\nhandler.init = function(options, callback) {\n    callback();\n};\n\nhandler.analyzeCurrent = function(path, doc, ast, options, callback) {\n    this.$lint(\n        "gofmt",\n        doc ? ["-e"] : ["-e", path],\n        doc,\n        { env: { PATH: process.env.PATH + ":/opt/go/bin" }},\n        function(err, stdout, stderr) {\n            if (err) return callback(err);\n            \n            var markers = [];\n            \n            stderr.split("\\n").forEach(function(line) {\n                var match = line.match(/^[^:]*:([^:]*):([^:]*): (.*)/);\n                if (!match)\n                    return;\n                var row = match[1];\n                var column = match[2]; // unused, might go stale too soon\n                var message = match[3];\n                markers.push({\n                    pos: { sl: row - 1 },\n                    message: message,\n                    level: "error"\n                });\n            });\n            \n            callback(null, null, markers);\n        }\n    );\n};\n\n});')


define("text!plugins/c9.ide.language.jsonalyzer/server/mock_language_worker.js",[],'module.exports.asyncForEach = function(array, fn, callback) {\n    array = array.slice(); // copy before use\n    function processOne() {\n        var item = array.shift();\n        fn(item, function processNext(result, err) {\n            if (array.length > 0) {\n                processOne();\n            }\n            else if (callback) {\n                callback(err, result);\n            }\n        });\n    }\n    if (array.length > 0) {\n        processOne();\n    }\n    else if (callback) {\n        callback();\n    }\n};\n["$lastWorker", "sender"].forEach(function(p) {\n    Object.defineProperty(module.exports, p, {\n        get: function() {\n            throw new Error(\'Unavailable in server context: worker.\' + p);\n        }\n    });\n});')


define("text!plugins/c9.ide.language.jsonalyzer/server/mock_jsonalyzer_worker.js",[],'module.exports.getMaxFileSizeSupported = function() {\n    return 10000 * 80; // from base_handler\n};\n[\n    "getHandlerFor",\n    "getAllHandlers",\n    "handlesLanguage",\n    "registerPlugin"\n].forEach(function(p) {\n    Object.defineProperty(module.exports, p, {\n        get: function() {\n            throw new Error(\'Unavailable in server context: worker.\' + p);\n        }\n    });\n});')


define("text!plugins/c9.ide.language/complete_util.js",[],'define(function(require, exports, module) {\n\nvar ID_REGEX = /[a-zA-Z_0-9\\$]/;\nvar REQUIRE_ID_REGEX = /(?!["\'])./;\nvar staticPrefix = "";\n\nfunction retrievePrecedingIdentifier(line, offset, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = offset - 1; i >= 0 && line; i--) {\n        if (regex.test(line[i]))\n            buf.push(line[i]);\n        else\n            break;\n    }\n    return buf.reverse().join("");\n}\n\nfunction retrieveFollowingIdentifier(line, offset, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = offset; line && i < line.length; i++) {\n        if (regex.test(line[i]))\n            buf.push(line[i]);\n        else\n            break;\n    }\n    return buf.join("");\n}\n\nfunction prefixBinarySearch(items, prefix) {\n    var startIndex = 0;\n    var stopIndex = items.length - 1;\n    var middle = Math.floor((stopIndex + startIndex) / 2);\n    \n    while (stopIndex > startIndex && middle >= 0 && items[middle].indexOf(prefix) !== 0) {\n        if (prefix < items[middle]) {\n            stopIndex = middle - 1;\n        }\n        else if (prefix > items[middle]) {\n            startIndex = middle + 1;\n        }\n        middle = Math.floor((stopIndex + startIndex) / 2);\n    }\n    while (middle > 0 && items[middle - 1].indexOf(prefix) === 0)\n        middle--;\n    return middle >= 0 ? middle : 0; // ensure we\'re not returning a negative index\n}\n\nfunction findCompletions(prefix, allIdentifiers) {\n    allIdentifiers.sort();\n    var startIdx = prefixBinarySearch(allIdentifiers, prefix);\n    var matches = [];\n    for (var i = startIdx; i < allIdentifiers.length && allIdentifiers[i].indexOf(prefix) === 0; i++)\n        matches.push(allIdentifiers[i]);\n    return matches;\n}\n\nfunction fetchTextSync(path) {\n    var xhr = new XMLHttpRequest();\n    xhr.open(\'GET\', staticPrefix + "/" + path, false);\n    try {\n        xhr.send();\n    }\n    catch (e) {\n        return false;\n    }\n    if (xhr.status === 200 || xhr.responseText) // when loading from file:// status is always 0\n        return xhr.responseText;\n    else\n        return false;\n}\n\nfunction fetchText(path, callback) {\n    var xhr = new XMLHttpRequest();\n    try {\n        xhr.open(\'GET\', staticPrefix + "/" + path, true);\n    } catch (e) {\n        return done(e);\n    }\n    xhr.onload = function (e) {\n        if (xhr.readyState !== 4)\n            return;\n        if (xhr.status !== 200 && xhr.status !== 0)\n            return done(new Error(xhr.statusText));\n        done(null, xhr.responseText);\n    };\n    xhr.onerror = done;\n    xhr.send(null);\n    \n    function done(err, result) {\n        callback && callback(err, result);\n        callback = null;\n        if (err) {\n            err.data = { path: path };\n            setTimeout(function() { throw err; });\n        }\n    }\n}\n\nfunction setStaticPrefix(url) {\n    staticPrefix = url;\n}\nfunction canCompleteForChangedLine(oldLine, newLine, oldPos, newPos, identifierRegex) {\n    if (newLine.indexOf(oldLine.substr(0, oldPos.column)) !== 0)\n        return false;\n    \n    for (var i = oldPos.column; i < newPos.column; i++) {\n        if (!identifierRegex.test(newLine[i]))\n            return false;\n    }\n    return true;\n}\n\nfunction precededByIdentifier(line, column, postfix, ace) {\n    var id = retrievePrecedingIdentifier(line, column);\n    if (postfix) id += postfix;\n    return id !== "" && !(id[0] >= \'0\' && id[0] <= \'9\') \n        && (inCompletableCodeContext(line, column, id, ace) \n        || isRequireJSCall(line, column, id, ace));\n}\n\nfunction isRequireJSCall(line, column, identifier, ace, noQuote) {\n    if (["javascript", "jsx"].indexOf(ace.getSession().syntax) === -1)\n        return false;\n    var id = identifier == null ? retrievePrecedingIdentifier(line, column, REQUIRE_ID_REGEX) : identifier;\n    var LENGTH = \'require("\'.length - (noQuote ? 1 : 0);\n    var start = column - id.length - LENGTH;\n    var substr = line.substr(start, LENGTH) + (noQuote ? \'"\' : \'\');\n\n    return start >= 0 && substr.match(/require\\(["\']/)\n        || line.substr(start + 1, LENGTH).match(/require\\(["\']/);\n}\nfunction inCompletableCodeContext(line, column, id, ace) {\n    if (["javascript", "jsx"].indexOf(ace.getSession().syntax) === -1)\n        return true;\n    var isJavaScript = true;\n    var inMode = null;\n    for (var i = 0; i < column; i++) {\n        if (line[i] === \'"\' && !inMode)\n            inMode = \'"\';\n        else if (line[i] === \'"\' && inMode === \'"\' && line[i - 1] !== "\\\\")\n            inMode = null;\n        else if (line[i] === "\'" && !inMode)\n            inMode = "\'";\n        else if (line[i] === "\'" && inMode === "\'" && line[i - 1] !== "\\\\")\n            inMode = null;\n        else if (line[i] === "/" && line[i + 1] === "/") {\n            inMode = \'//\';\n            i++;\n        }\n        else if (line[i] === "/" && line[i + 1] === "*" && !inMode) {\n            if (line.substr(i + 2, 6) === "global")\n                continue;\n            inMode = \'/*\';\n            i++;\n        }\n        else if (line[i] === "*" && line[i + 1] === "/" && inMode === "/*") {\n            inMode = null;\n            i++;\n        }\n        else if (line[i] === "/" && !inMode && isJavaScript)\n            inMode = "/";\n        else if (line[i] === "/" && inMode === "/" && line[i - 1] !== "\\\\")\n            inMode = null;\n    }\n    return inMode != "/";\n}\nexports.precededByIdentifier = precededByIdentifier;\nexports.isRequireJSCall = isRequireJSCall;\nexports.retrievePrecedingIdentifier = retrievePrecedingIdentifier;\nexports.retrieveFollowingIdentifier = retrieveFollowingIdentifier;\nexports.findCompletions = findCompletions;\nexports.fetchText = fetchText;\nexports.fetchTextSync = fetchTextSync;\nexports.setStaticPrefix = setStaticPrefix;\nexports.DEFAULT_ID_REGEX = ID_REGEX;\nexports.canCompleteForChangedLine = canCompleteForChangedLine;\n});')


define("text!plugins/c9.ide.language/worker_util.js",[],'define(function(require, exports, module) {\n\nvar worker = require("plugins/c9.ide.language.core/worker");\nvar completeUtil = require("./complete_util");\n\nvar MAX_MEMO_DICT_SIZE = 3000;\nvar msgId = 0;\nvar docCache = { row: null, entries: {}};\n\nmodule.exports = {\n    isFeatureEnabled: function(name) {\n        return !disabledFeatures[name];\n    },\n    getIdentifierRegex: function(offset) {\n        return worker.$lastWorker.getIdentifierRegex(offset);\n    },\n    completeUpdate: function(pos, line) {\n        return worker.$lastWorker.completeUpdate(pos, line);\n    },\n    execFile: function(path, options, callback) {\n        if (typeof options === "function")\n            return this.execFile(path, {}, arguments[1]);\n        \n        var id = msgId++;\n        worker.sender.emit("execFile", { path: path, options: options, id: id });\n        worker.sender.on("execFileResult", function onExecFileResult(event) {\n            if (event.data.id !== id)\n                return;\n            worker.sender.off("execFileResult", onExecFileResult);\n            callback && callback(event.data.err, event.data.stdout, event.data.stderr);\n        });\n    },\n    spawn: function(path, options, callback) {\n        if (typeof options === "function")\n            return this.execFile(path, {}, arguments[1]);\n        \n        var id = msgId++;\n        worker.sender.emit("spawn", { path: path, options: options, id: id });\n        worker.sender.on("spawnResult", function onSpawnResult(event) {\n            if (event.data.id !== id)\n                return;\n            worker.sender.off("spawnResult", onSpawnResult);\n            callback && callback(event.data.err, {\n                stdout: { on: listen.bind(null, "stdout") },\n                stderr: { on: listen.bind(null, "stderr") },\n                on: listen.bind(null, "child"),\n                kill: function(signal) {\n                    worker.sender.emit("spawn_kill$" + id, { signal: signal });\n                }\n            });\n            \n            function listen(sourceName, event, listener) {\n                worker.sender.on("spawnEvent$" + id + sourceName + event, function(e) {\n                    listener(e.data);\n                });\n                worker.sender.on("spawnEvent$" + id + "childexit", function gc() {\n                    setTimeout(function() {\n                        worker.sender.off("spawnEvent$" + id + sourceName + event, listener);\n                        worker.sender.off("spawnEvent$" + id + "childexit", gc);\n                    });\n                });\n            }\n        });\n    },\n    execAnalysis: function(command, options, callback) {\n        if (typeof options === "function")\n            return this.execAnalysis(command, {}, arguments[1]);\n        \n        var myWorker = worker.$lastWorker;\n        options.command = command;\n        options.path = options.path || (myWorker.$path && myWorker.$path[0] === "/" ? myWorker.$path.substr(1) : myWorker.$path);\n        options.cwd = options.cwd || getRelativeDirname(options.path);\n        options.maxBuffer = options.maxBuffer || 200 * 1024;\n        var maxCallInterval = options.maxCallInterval || 50;\n        if (myWorker.$overrideLine) {\n            maxCallInterval = 0;\n            options.overrideLineRow = myWorker.$lastCompleteRow;\n            options.overrideLine = options.overrideLine || myWorker.$overrideLine;\n        }\n        else {\n            options.overrideLineRow = myWorker.$lastCompleteRow;\n            options.overrideLine = options.overrideLine || myWorker.doc.getLine(options.overrideLineRow);\n        }\n        if (options.path && options.path[0] === "/")\n            return callback(new Error("Only workspace-relative paths are supported"));\n        var id = msgId++;\n        worker.sender.emit("jsonalyzerCallServer", {\n            id: id,\n            handlerPath: "plugins/c9.ide.language.jsonalyzer/server/invoke_helper",\n            method: "invoke",\n            filePath: options.path && (options.path[0] === "~" ? options.path : "/" + options.path),\n            maxCallInterval: maxCallInterval,\n            timeout: options.timeout || 30000,\n            semaphore: "semaphore" in options\n                ? options.semaphore\n                : command + "|" + myWorker.$language,\n            args: [options.path, null, null, options]\n        });\n        worker.sender.on("jsonalyzerCallServerResult", function onResult(event) {\n            if (event.data.id !== id)\n                return;\n            worker.sender.off("jsonalyzerCallServerResult", onResult);\n            var stdout = tryParseJSON(event.data.result[1]);\n            var stderr = tryParseJSON(event.data.result[2]);\n            callback(event.data.result[0], stdout, stderr, {\n                serverTime: event.data.result[3],\n            });\n        });\n        \n        function getRelativeDirname(file) {\n            return file && file.replace(/([\\/\\\\]|^)[^\\/\\\\]+$/, "").replace(/^\\//, "");\n        }\n        \n        function tryParseJSON(string) {\n            try {\n                return options.json ? JSON.parse(string) : string;\n            }\n            catch (e) {\n                return string;\n            }\n        }\n    },\n    readFile: function(path, options, callback) {\n        if (!callback) { // fix arguments\n            callback = options;\n            options = null;\n        }\n        \n        if (worker.$lastWorker.$path === path) {\n            callback && setTimeout(callback.bind(null, null, worker.$lastWorker.doc.getValue()), 0);\n            return;\n        }\n        \n        if (path.match(/\\/$/) || path === ".") { // fail fast\n            var err = new Error("File is a directory");\n            err.code = "EISDIR";\n            return callback(err);\n        }\n        \n        var id = msgId++;\n        worker.sender.on("readFileResult", function onReadFileResult(event) {\n            if (event.data.id !== id)\n                return;\n            worker.sender.off("readFileResult", onReadFileResult);\n            callback && callback(event.data.err && JSON.parse(event.data.err), event.data.data);\n        });\n        worker.sender.emit("readFile", { path: path, options: options, id: id });\n    },\n   stat: function(path, callback) {\n        var id = msgId++;\n        worker.sender.on("statResult", function onReadFileResult(event) {\n            if (event.data.id !== id)\n                return;\n            worker.sender.off("statResult", onReadFileResult);\n            callback && callback(event.data.err && JSON.parse(event.data.err), event.data.data);\n        });\n        worker.sender.emit("stat", { path: path, id: id });\n    },\n    filterDocumentation: function(doc) {\n        if (docCache.entries["_" + doc])\n            return docCache.entries["_" + doc];\n        var lastRow = worker.$lastWorker.$lastCompleteRow;\n        if (docCache.row !== lastRow)\n            docCache.entries = {};\n        docCache.row = lastRow;\n        \n        var result = escapeHtml(doc)\n            .replace(/(\\n|^)[ \\t]*\\*+[ \\t]*/g, "\\n")\n            .trim()\n            .replace(/@(param|public|private|platform|event|method|function|class|constructor|fires?|throws?|returns?|internal|ignore)/, "<br/>@$1")\n            .replace(/\\n\\n(?!@)/g, "<br/><br/>")\n            .replace(/@(param|public|private|platform|event|method|function|class|constructor|fires?|throws?|returns?|internal|ignore) ({[\\w\\.]+} )?(\\[?[\\w\\.]+\\]?)/g, "<br><b>@$1</b> <i>$2$3</i>&nbsp;")\n            .replace(/\\n@(\\w+)/g, "<br/>\\n<b>@$1</b>")\n            .replace(/&lt;(\\/?)code&gt;/g, "<$1tt>")\n            .replace(/&lt;(\\/?)(b|i|em|br|a) ?\\/?&gt;/g, "<$1$2>")\n            .replace(/&lt;(a\\s+(target=(\'|&quot;)[^"\'&]*(\'|&quot;)\\s+)?href=(\'|&quot;)(https?:\\/\\/|#)[^"\'&]*(\'|&quot;)\\s*(target=(\'|&quot;)[^"\'&]*(\'|&quot;)\\s*)?)&gt;/g, \'<$1 target="_docs">\');\n        docCache.entries["_" + doc] = result;\n        return result;\n\n        function escapeHtml(str) {\n            return str\n                .replace(/&/g, "&amp;")\n                .replace(/</g, "&lt;")\n                .replace(/>/g, "&gt;")\n                .replace(/"/g, "&quot;");\n        }\n    },\n    showError: function(message, timeout, info) {\n        if (message.stack) {\n            console.error(message.stack);\n            message = message.message;\n        }\n        var id = msgId++;\n        var token;\n        worker.sender.once("showErrorResult", function onResult(e) {\n            token = e.token;\n        });\n        worker.sender.emit("showError", { message: message, timeout: timeout, id: id, info: info });\n        return {\n            hide: function hide() {\n                if (token)\n                    return worker.sender.emit("showError", { token: token });\n                setTimeout(hide, 50);\n            }\n        };\n    },\n    showInfo: function(message, timeout) {\n        return this.showError(message, timeout, true);\n    },\n    asyncForEach: function(array, fn, callback) {\n        worker.asyncForEach(array, fn, callback);\n    },\n    getOpenFiles: function() {\n        var results = [];\n        var set = worker.$lastWorker.$openDocuments;\n        Object.keys(set).forEach(function(e) {\n            results.push(set[e]);\n        });\n        return results;\n    },\n    refreshAllMarkers: function() {\n        worker.sender.emit("refreshAllMarkers");\n    },\n    getPrecedingIdentifier: function(line, offset, regex) {\n        regex = regex || this.getIdentifierRegex(offset);\n        return completeUtil.retrievePrecedingIdentifier(line, offset, regex);\n    },\n    getFollowingIdentifier: function(line, offset, regex) {\n        regex = regex || this.getIdentifierRegex(offset);\n        return completeUtil.retrieveFollowingIdentifier(line, offset, regex);\n    },\n    getIdentifier: function(line, offset, regex) {\n        regex = regex || this.getIdentifierRegex(offset);\n        return this.getPrecedingIdentifier(line, offset, regex)\n            + this.getFollowingIdentifier(line, offset, regex);\n    },\n    getTokens: function(doc, identifiers, callback) {\n        var id = msgId++;\n        worker.sender.emit("getTokens", {\n            path: worker.$lastWorker.$path,\n            identifiers: identifiers,\n            id: id,\n            region: doc.region\n        });\n        worker.sender.on("getTokensResult", function onResult(event) {\n            if (event.data.id !== id)\n                return;\n            worker.sender.off("getTokensResult", onResult);\n            callback(event.data.err, event.data.results);\n        });\n    },\n    \n    getQuickfixKey: function() {\n        return worker.$lastWorker.$keys.quickfix;\n    },\n    $watchDir: function(path, plugin) {\n        worker.sender.emit("watchDir", { path: path });\n    },\n    $unwatchDir: function(path, plugin) {\n        worker.sender.emit("watchDir", { path: path });\n    },\n    $onWatchDirChange: function(listener) {\n        worker.sender.on("watchDirResult", listener);\n    },\n    $offWatchDirChange: function(listener) {\n        worker.sender.off("watchDirResult", listener);\n    }\n};\n\n});')


define("text!plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_base_handler.js",[],'define(function(require, exports, module) {\n\nvar asyncForEach = require("plugins/c9.ide.language.core/worker").asyncForEach;\nvar workerUtil = require("plugins/c9.ide.language/worker_util");\nvar child_process = typeof process === "undefined" || !process.version\n    ? null\n    : arguments[0]("child_process");\nmodule.exports = {\n    languages: [],\n    extensions: [],\n    maxCallInterval: 2000,\n    CALL_INTERVAL_MIN: 500,\n    \n    CALL_INTERVAL_BASIC: 1200,\n    init: function(options, callback) {\n        callback();\n    },\n    findImports: function(path, value, ast, options, callback) {\n        callback();\n    },\n    analyzeCurrent: function(path, value, ast, options, callback) {\n        callback();\n    },\n    analyzeOthers: function(paths, options, callback) {\n        callback();\n    },\n    analyzeWorkspaceRoot: function(callback) {\n        callback();\n    },\n    analyzeCurrentAll: function(paths, options, callback) {\n        var errs = [];\n        var results = [];\n        var _self = this;\n        asyncForEach(\n            paths,\n            function(path, next) {\n                workerUtil.readFile(path, { unsaved: true }, function(err, doc) {\n                    if (err) {\n                        errs.push(err);\n                        results.push(null);\n                        return next();\n                    }\n                    \n                    _self.analyzeCurrent(path, doc, null, options, function(err, result) {\n                        errs.push(err);\n                        results.push(result);\n                        next();\n                    });\n                });\n            },\n            function() {\n                callback(errs, results);\n            }\n        );\n    },\n    $lint: function(linter, args, stdin, options, callback) {\n        var a = arguments;\n        callback = a[4] || a[3] || a[2];\n        options = typeof a[3] == "object" && a[3]\n            || typeof a[2] == "object" && !(a[2] instanceof Buffer) && a[2];\n        stdin = (typeof a[2] == "string" || a[2] instanceof Buffer) && a[2];\n\n        if (!child_process)\n            return callback(new Error("Only implemented for server-side plugins"));\n        \n        options = options || {};\n        options.maxBuffer = options.maxBuffer || 200 * 1024;\n        options.env = options.env || {};\n        var PATH = options.env.PATH || this.defaultEnv && this.defaultEnv.PATH || process.env.PATH;\n        options.env.PATH = process.platform === "linux"\n            ? "/mnt/shared/bin:" + PATH\n            : PATH;\n        for (var key in process.env) {\n            options.env[key] = options.env[key] != null ? options.env[key] : process.env[key];\n        }\n        \n        try {\n            var child = child_process.execFile(\n                linter, args, options,\n                function(err, stdout, stderr) {\n                    if (err && ["ENOENT", "EACCES"].indexOf(err.code) > -1) {\n                        err = new Error(err.code + ": No " + (linter === "bash" ? "linter" : linter) + " installation found");\n                        err.code = "EFATAL";\n                        return callback(err, stdout, stderr);\n                    }\n                    \n                    callback(null, stdout, stderr, err);\n                }\n            );\n\n            child.stdin.on("error", function(e) {\n            });\n    \n            if (stdin)\n                child.stdin.end(stdin);\n        }\n        catch (err) {\n            err.code = "EFATAL";\n            callback(err);\n        }\n    }\n};\n\n});')


define("text!plugins/c9.ide.language.jsonalyzer/worker/ctags/ctags_util.js",[],'define(function(require, exports, module) {\n\nvar assert = require("c9/assert");\nvar workerUtil = require("plugins/c9.ide.language/worker_util");\nvar jsonalyzer;\n\nvar MAX_DOCHEAD_LENGTH = 80;\nvar EXTENSION_GROUPS;\n\nmodule.exports.MAX_DOCHEAD_LENGTH = MAX_DOCHEAD_LENGTH;\n\nmodule.exports.EXTENSION_GROUPS = EXTENSION_GROUPS;\n\nmodule.exports.init = function(ctags, _jsonalyzer) {\n    if (typeof _jsonalyzer === "function") {\n        return _jsonalyzer();\n    }\n    \n    jsonalyzer = _jsonalyzer || jsonalyzer;\n    EXTENSION_GROUPS = ctags.LANGUAGES.map(function(l) { return l.extensions; });\n};\n\nmodule.exports.extractDocumentationAtRow = function(lines, row) {\n    var prevRow = row > 0 ? row - 1 : 0;\n    var line = lines[prevRow];\n    if (line && line.match(/^\\s*#/)) {\n        line = line.match(/^\\s*#\\s*(.*)/)[1];\n        var results = [line];\n        for (var start = prevRow - 1; start >= 0; start--) {\n            line = lines[start];\n            if (!line.match(/^\\s*#/))\n                break;\n            results.push(line.match(/^\\s*#\\s*(.*)/)[1]);\n        }\n        return workerUtil.filterDocumentation(results.join("\\n"));\n    }\n    if (lines[row + 1] && lines[row + 1].match(/^\\s*"""/)) {\n        var result = "";\n        for (var cur = row + 1; lines[cur]; cur++) {\n            result += lines[cur].replace(/^\\s*|\\s*"""\\s*/g, "") + "\\n";\n            if (lines[cur].match(/[^\\s"]+\\s*"""/))\n                break;\n        }\n        return result;\n    }\n    var end = null;\n    for (var cur = prevRow; cur >= 0; cur--) {\n        line = lines[cur];\n        for (var col = line.length - 2; col >= 0; col--) {\n            if (!end) {\n                if (line.substr(col, 2) === "*/") {\n                    end = { sl: cur, sc: col };\n                    col--;\n                } else if (!line[col].match(/[\\s\\/]/)) {\n                    return;\n                }\n            } else if (line.substr(col, 2) === "/*") {\n                var rows = ["", line.substr(col + 3)];\n                for (var r = cur + 1; r < end.sl; r++)\n                    rows.push(lines[r]);\n                rows.push(lines[end.sl].substr(0, end.sc));\n                if (end.sl === cur)\n                    rows = ["", line.substring(col + 3, end.sc)];\n                return workerUtil.filterDocumentation(rows.join("\\n"));\n            }\n        }\n    }\n};\nmodule.exports.findMatchingTags = function(path, docValue, tag, guessFargs, extractDocumentation, results) {\n    assert(tag.regex.global, "Regex must use /g flag: " + tag.regex);\n    var _self = this;\n    var lines = path === jsonalyzer.path && jsonalyzer.doc\n        ? jsonalyzer.doc.getAllLines()\n        : docValue.split(/\\n/);\n    \n    docValue.replace(tag.regex, function(fullMatch, name, offset) {\n        assert(typeof offset === "number", "Regex must have exactly one capture group: " + tag.regex);\n        \n        var addedOffset = fullMatch.indexOf(name);\n        var row = getOffsetRow(docValue, offset + (addedOffset === -1 ? 0 : addedOffset));\n        var line = lines[row];\n        \n        var doc, docHead;\n        if (extractDocumentation && line) {\n            docHead = line.length > MAX_DOCHEAD_LENGTH\n                ? line.substr(line.length - MAX_DOCHEAD_LENGTH) + "..."\n                : line;\n            doc = _self.extractDocumentationAtRow(lines, row);\n        }\n        \n        results["_" + name] = results["_" + name] || [];\n        \n        if (tag.docOnly) { // HACK: tag that only contributes documentation\n            if (!doc)\n                return;\n            if (results["_" + name][0]) {\n                results["_" + name][0].doc = doc;\n                return;\n            }\n        }\n        \n        results["_" + name].push({\n            row: row,\n            docHead: docHead,\n            guessFargs: guessFargs,\n            doc: doc,\n            kind: tag.kind,\n            indent: tag.indent,\n        });\n        return fullMatch;\n    });\n    \n    return results;\n};\nmodule.exports.findMatchingOpenFiles = function(path) {\n    var openFiles = workerUtil.getOpenFiles();\n    var extension = getExtension(path);\n    var supported = getCompatibleExtensions(extension);\n    var imports = openFiles.filter(function(path) {\n        return supported.indexOf(getExtension(path)) > -1;\n    });\n    return imports;\n};\n\nmodule.exports.guessFargs = function(line, name) {\n    if (!line)\n        return "";\n    var guess = /\\([A-Za-z0-9$_,\\s]*(\\))?/;\n    guess.lastIndex = line.indexOf(name) + name.length;\n    var match = guess.exec(line);\n    return match && match[0] + (match[1] ? "" : "...") || "";\n};\n\nfunction getExtension(path) {\n    return path.match(/[^\\.\\\\\\/]*$/)[0];\n}\nfunction getCompatibleExtensions(extension) {\n    for (var i = 0; i < EXTENSION_GROUPS.length; i++) {\n        if (EXTENSION_GROUPS[i].indexOf(extension) > -1)\n            return EXTENSION_GROUPS[i];\n    }\n    return [extension];\n}\n\nvar getOffsetRow = module.exports.getOffsetRow = function(contents, offset) {\n    var result = 0;\n    var lastIndex = offset + 1;\n    for (;;) {\n        lastIndex = lastIndex === 0\n            ? -1\n            : contents.lastIndexOf("\\n", lastIndex - 1);\n        if (lastIndex < 0)\n            return result;\n        result++;\n    }\n};\nmodule.exports.filterDocumentation = workerUtil.filterDocumentation;\n\nmodule.exports.getParameterDocs = function(doc) {\n    var result = {};\n    doc && doc.replace(\n        /@param (?:\\{[^}]*\\} )?([^ ]*)\\s+([^@]*)/g,\n        function(input, name, description) {\n            result["_" + name] = workerUtil.filterDocumentation(description);\n            return input;\n        }\n    );\n    return result;\n};\n\n});')


define("text!plugins/c9.ide.language.javascript.infer/path.js",[],"define(function(require, exports, module) {\n\nfunction getBasePath(file, workspaceDir) {\n    if (file.substr(0, workspaceDir.length) === workspaceDir)\n        file = file.substr(workspaceDir.length + 1);\n    return file.replace(/\\/?[^\\/]*$/, \"\");\n}\n\nfunction canonicalizePath(path, basePath) {\n    if (basePath && isRelativePath(path))\n        path = basePath + \"/\" + path;\n    return normalizePath(path).replace(/^\\.\\//, \"\");\n}\n\nfunction isRelativePath(path) {\n    return !!path.match(/^\\.\\.\\/|^\\.\\//);\n}\n\nfunction isAbsolutePath(path) {\n    return !!path.match(/^\\//);\n}\n\nfunction uncanonicalizePath(path, basePath) {\n    if (basePath === \"\")\n        return \"./\" + path;\n    var pathParts = path.split(\"/\");\n    var basePathParts = basePath.split(\"/\");\n    for (var common = 0; common < basePathParts.length; common++)\n        if (basePathParts[common] !== pathParts[common])\n            break;\n    var dirsUp = pathParts.length - 1 - common;\n    var resultParts = [];\n    for (var i = 0; i < dirsUp; i++)\n        resultParts.push(\"..\");\n    if (!dirsUp)\n        resultParts.push(\".\");\n    for (var j = common; j < pathParts.length; j++)\n        resultParts.push(pathParts[j]);\n    return resultParts.join(\"/\");\n}\n\nfunction normalizePath(path) {\n    var isAbsolute = path.charAt(0) === '/',\n        trailingSlash = path.substr(-1) === '/';\n\n    path = normalizePathArray(path.split('/').filter(function(p) {\n        return !!p;\n    }), !isAbsolute).join('/');\n\n    if (!path && !isAbsolute) {\n        path = '.';\n    }\n    if (path && trailingSlash) {\n        path += '/';\n    }\n\n    return (isAbsolute ? '/' : '') + path;\n}\n\nfunction normalizePathArray(parts, allowAboveRoot) {\n    var up = 0;\n    for (var i = parts.length - 1; i >= 0; i--) {\n        var last = parts[i];\n        if (last === '.') {\n            parts.splice(i, 1);\n        }\n        else if (last === '..') {\n            parts.splice(i, 1);\n            up++;\n        }\n        else if (up) {\n            parts.splice(i, 1);\n            up--;\n        }\n    }\n    if (allowAboveRoot) {\n        for (; up--; up) {\n            parts.unshift('..');\n        }\n    }\n\n    return parts;\n}\n\nexports.canonicalizePath = canonicalizePath;\nexports.uncanonicalizePath = uncanonicalizePath;\nexports.getBasePath = getBasePath;\nexports.isRelativePath = isRelativePath;\nexports.isAbsolutePath = isAbsolutePath;\nexports.normalizePath = normalizePath;\n\n});\n")


define("text!lib/jsonm/build/packer.js",[],'(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.packer = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module \'"+o+"\'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar TYPE_ARRAY = 0;\nvar TYPE_VALUE = 1;\nvar TYPE_STRING = 2;\nvar MIN_DICT_INDEX = 3;\n\nexports.Packer = function(json) {\n    \n    var dict = [];\n    var dictMap = {};\n    var dictIndex = MIN_DICT_INDEX;\n    var sequenceId = -1;\n    var maxDictSize = 2000;\n    \n    return {\n        pack: pack,\n        packString: packString,\n        setMaxDictSize: function(value) {\n            maxDictSize = value;\n        },\n        $getDict: function() {\n            return dict;\n        }\n    };\n    \n    function packString(string, options) {\n        if (typeof string !== "string")\n            return pack(string, options);\n        var json;\n        try {\n            json = JSON.parse(string);\n        }\n        catch (e) {}\n        if (!json) {\n            var result = pack(string.split("\\n"), options);\n            result[0] = TYPE_STRING;\n            return result;\n        }\n        return pack(json, options);\n    }\n    \n    function pack(object, options) {\n        if (object == null)\n            return object;\n        var packStringDepth = options && options.packStringDepth;\n        \n        var result = packObjectOrValue(object, packStringDepth);\n        if (options && options.noSequenceId)\n            return result;\n        return Array.isArray(result)\n            ? result.concat([++sequenceId])\n            : [TYPE_VALUE, result, ++sequenceId];\n\n        function packObjectOrValue(object, packStringDepth) {\n            if (Array.isArray(object))\n                return [TYPE_ARRAY].concat(object.map(function(o) {\n                    return packObjectOrValue(o, packStringDepth - 1);\n                }));\n            if (typeof object === "string" && packStringDepth >= 0)\n                return packString(object, { noSequenceId: true});\n            if (typeof object !== "object" || object == null)\n                return packValue(object);\n                \n            var results = [];\n            for (var key in object) {\n                if (!object.hasOwnProperty(key)) continue;\n                \n                results.push(packValue(key));\n            }\n            \n            var isError = packErrorKeys(object, results);\n            for (var key in object) {\n                if (!object.hasOwnProperty(key)) continue;\n                \n                var value = object[key];\n                if (typeof value === "object") {\n                    results.push(packObjectOrValue(value, packStringDepth - 1));\n                }\n                else if (typeof value === "string") {\n                    results.push(packStringDepth > 0\n                        ? packString(value, { noSequenceId: true})\n                        : packValue(value));\n                }\n                else {\n                    results.push(packValue(value));\n                }\n            }\n            if (isError)\n                results.push(packObjectOrValue(object.message), packObjectOrValue(object.stack));\n            \n            return results;\n        }\n        \n        function packErrorKeys(object, results) {\n            if (object instanceof Error) {\n                results.push(packValue("message"), packValue("stack"));\n                return true;\n            }\n        }\n                \n        function packValue(value) {\n            var mapKey = typeof value === "string" ? "_" + value : value;\n            var result = dictMap[mapKey];\n            if (result == null) {\n                addToDict(mapKey, value);\n                \n                if (typeof value === "number")\n                    return String(value);\n                if (/^[0-9\\.]|^~/.test(value))\n                    return "~" + value;\n                return value;\n            }\n            return result;\n        }\n        \n        function addToDict(mapKey, value) {\n            if (dict[dictIndex] != null) {\n                var deleteKey = typeof dict[dictIndex] === "string" ? "_" + dict[dictIndex] : dict[dictIndex];\n                delete dictMap[deleteKey];\n            }\n            dictMap[mapKey] = dictIndex;\n            dict[dictIndex] = value;\n            \n            dictIndex++;\n            if (dictIndex >= maxDictSize + MIN_DICT_INDEX)\n                dictIndex = MIN_DICT_INDEX;\n        }\n    }\n};\n},{}]},{},[1])(1)\n});')


define("plugins/c9.ide.language.jsonalyzer/default_plugins",[],function(require,exports,module){module.exports={
handlersWorker:["plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_js","plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_md","plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_php","plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_sh","plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_rb","plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_ctags","plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_go","plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_make","plugins/c9.ide.language.jsonalyzer/worker/handlers/jsonalyzer_html"],
helpersWorker:[],handlersServer:[{path:"plugins/c9.ide.language.jsonalyzer/server/invoke_helper",contents:require("text!./server/invoke_helper.js")
},{path:"plugins/c9.ide.language.jsonalyzer/server/handlers/jsonalyzer_sh_server",contents:require("text!./server/handlers/jsonalyzer_sh_server.js")
},{path:"plugins/c9.ide.language.jsonalyzer/server/handlers/jsonalyzer_php_server",contents:require("text!./server/handlers/jsonalyzer_php_server.js")
},{path:"plugins/c9.ide.language.jsonalyzer/server/handlers/jsonalyzer_rb_server",contents:require("text!./server/handlers/jsonalyzer_rb_server.js")
},{path:"plugins/c9.ide.language.jsonalyzer/server/handlers/jsonalyzer_go_server",contents:require("text!./server/handlers/jsonalyzer_go_server.js")
}],helpersServer:[{path:"plugins/c9.ide.language.core/worker",contents:require("text!./server/mock_language_worker.js")
},{path:"plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_worker",contents:require("text!./server/mock_jsonalyzer_worker.js")
},{path:"plugins/c9.ide.language/complete_util",contents:require("text!../c9.ide.language/complete_util.js")
},{path:"plugins/c9.ide.language/worker_util",contents:require("text!../c9.ide.language/worker_util.js")
},{path:"plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_base_handler",contents:require("text!./worker/jsonalyzer_base_handler.js")
},{path:"plugins/c9.ide.language.jsonalyzer/worker/ctags/ctags_util",contents:require("text!./worker/ctags/ctags_util.js")
},{path:"plugins/c9.ide.language.javascript.infer/path",contents:require("text!../c9.ide.language.javascript.infer/path.js")
},{path:"jsonm/build/packer",contents:require("text!lib/jsonm/build/packer.js")}]}})


define("lib/jsonm/build/unpacker",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f()
else if("function"==typeof define&&define.amd)define([],f)
else{var g
g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,
g.unpacker=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require


if(!u&&a)return a(o,!0)
if(i)return i(o,!0)
var f=new Error("Cannot find module '"+o+"'")
throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}}
t[o][0].call(l.exports,function(e){var n=t[o][1][e]
return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o])


return s}({1:[function(require,module,exports){var OLD_MESSAGE=-1,TYPE_ARRAY=0,TYPE_VALUE=1,TYPE_STRING=2,MIN_DICT_INDEX=3


exports.Unpacker=function(){function unpack(packed,callback){if("string"==typeof packed)return unpack(JSON.parse(packed))


if(!packed)return callback?callback(null,packed):packed
var remoteSequenceId=packed.pop()
if(0===remoteSequenceId)dictIndex=MIN_DICT_INDEX
else if(remoteSequenceId!==sequenceId+1){if(callback&&remoteSequenceId>sequenceId+1)return packed.push(remoteSequenceId),
pendingUnpacks.push(unpack.bind(null,packed,callback))
var error=new Error("Message unpacked out of sequence")
if(error.code="EOLD",!callback)throw error
return callback(error)}sequenceId=remoteSequenceId
var result=unpackObject(packed)
if(packed.push(OLD_MESSAGE),callback&&callback(null,result),pendingUnpacks.length){var pending=pendingUnpacks.slice()


pendingUnpacks=[],pending.forEach(function(f){f()})}return callback?void 0:result}function unpackString(packed){
return packed[0]===TYPE_STRING?unpack(packed):JSON.stringify(unpack(packed))}function unpackObject(object){
if("object"!=typeof object||null==object)return unpackValue(object)
if(!object)return object
switch(object[0]){case TYPE_ARRAY:return object.shift(),object.map(unpackObject)
case TYPE_STRING:return object.shift(),object.map(unpackObject).join("\n")
case TYPE_VALUE:return unpackValue(object[1])}for(var result={},i=0;i<object.length;i++)object[i]="object"==typeof object[i]?unpackObject(object[i]):unpackValue(object[i])


for(var keys=object.length/2,i=0;i<keys;i++)result[object[i]]=object[i+keys]
return result}function unpackValue(value){if("number"==typeof value)return dict[value]
if("string"==typeof value&&/^[0-9\.]/.test(value)){var parsed=parseFloat(value)
if(!isNaN(parsed))return addToDict(parsed),parsed}return value&&"~"===value[0]&&(value=value.substr(1)),
addToDict(value),value}function addToDict(value){dict[dictIndex]=value,dictIndex++,dictIndex>=maxDictSize+MIN_DICT_INDEX&&(dictIndex=MIN_DICT_INDEX)

}var dict=[],dictIndex=MIN_DICT_INDEX,maxDictSize=2e3,sequenceId=-1,pendingUnpacks=[]
return{unpack:unpack,unpackString:unpackString,$getDict:function(){return dict},setMaxDictSize:function(value){
maxDictSize=value}}}},{}]},{},[1])(1)})})


define("text!plugins/c9.ide.language.jsonalyzer/server/jsonalyzer_server.js",[],'var vm = require("vm");\nvar Module = require("module");\nvar dirname = require("path").dirname;\nvar assert = require("assert");\nvar collabServer;\n\nvar plugins = {\n    "c9/assert": assert\n};\nvar vfs;\nvar workspaceDir;\nvar homeDir;\nvar server;\nvar packer;\nvar handlers = {};\n\nmodule.exports = function(_vfs, options, register) {\n    vfs = _vfs;\n    \n    server = {\n        init: init,\n        \n        registerHandler: registerHandler,\n        \n        registerHandlers: registerHandlers,\n        \n        callHandler: callHandler,\n        \n        getHandlerList: getHandlerList\n    };\n    register(null, server);\n};\n\nfunction init(options, callback) {\n    if (!options.useCollab)\n        return callback();\n    \n    workspaceDir = options.workspaceDir;\n    homeDir = options.homeDir;\n\n    vfs.use("collab", {}, function(err, collab) {\n        if (err)\n            return callback(err);\n        collabServer = collab.api;\n        callback();\n    });\n}\n\nfunction getClientDoc(path, options, callback) {\n    if (options.value)\n        return done(null, { contents: options.value });\n    \n    if (!collabServer)\n        return done(new Error("No collab server found and cannot use local value"));\n\n    var timeout = setTimeout(function() {\n        var timeoutError = new Error("Collab server failed to provide document contents in time");\n        timeoutError.code = "ECOLLAB";\n        timeoutError.customData = {\n            path: path,\n            revNum: options.revNum\n        };\n        done(timeoutError);\n    }, 15000);\n\n    var docId = path.replace(/^\\//, "");\n    collabServer.getDocument(\n        docId,\n        function(err, result) {\n            if (err) return done(err);\n            \n            if (!result) {\n                var noResultError = new Error("Unable to open document or document not found");\n                noResultError.customData = {\n                    path: path,\n                    revNum: options.revNum\n                };\n                return done(noResultError);\n            }\n            \n            if (options.revNum <= result.revNum) {\n                if (!result.contents)\n                    return done(new Error("Collab server failed to provide document contents"));\n                return done(null, result);\n            }\n            \n            collabServer.emitter.on("afterEditUpdate", function wait(e) {\n                if (e.docId !== docId || e.doc.revNum < options.revNum)\n                    return;\n                collabServer.emitter.removeListener("afterEditUpdate", wait);\n                done(null, e.doc);\n            });\n        }\n    );\n    \n    function done(err, doc) {\n        clearTimeout(timeout);\n        callback(err, doc);\n    }\n}\n\nfunction registerHandlers(list, options, callback) {\n    var results = [];\n    async.forEachSeries(\n        list,\n        function(plugin, next) {\n            registerHandler(\n                plugin.path,\n                plugin.contents,\n                plugin.options || options,\n                function(err, result) {\n                    results.push(result);\n                    next(err);\n                }\n            );\n        },\n        function(err) {\n            return callback(err, { summaries: results });\n        }\n    );\n}\n\nfunction registerHandler(handlerPath, contents, options, callback) {\n    options = options || {};\n    options.server = server;\n    options.vfs = vfs;\n    options.workspaceDir = workspaceDir || vfs.fsOptions.projectDir;\n    options.homeDir = homeDir;\n    options.defaultEnv = vfs.fsOptions.defaultEnv || {};\n\n    loadPlugin(handlerPath, contents, function(err, result) {\n        if (err) return callback(err);\n        \n        handlers[handlerPath] = result;\n        result.defaultEnv = options.defaultEnv;\n        if (handlerPath === "jsonm/build/packer")\n            packer = new result.Packer();\n\n        if (!result.init)\n            return done();\n        \n        result.init(options, done);\n        \n        function done(err) {\n            if (err) return callback(err);\n            \n            callback(null, getHandlerSummary(handlerPath, result));\n        }\n    });\n}\n\nfunction getHandlerSummary(path, handler) {\n    var properties = {};\n    var functions = {};\n    for (var p in handler) {\n        if (!handler.hasOwnProperty(p))\n            continue;\n        if (typeof handler[p] === "function")\n            functions[p] = true;\n        else\n            properties[p] = handler[p];\n    }\n    \n    return {\n        path: path,\n        properties: properties,\n        functions: functions\n    };\n}\n\nfunction getHandlerList(callback) {\n    callback(null, { handlers: Object.keys(handlers) });\n}\n\nfunction callHandler(handlerPath, method, args, options, callback) {\n    var handler = handlers[handlerPath];\n    if (!handler)\n        return callback(new Error("No such handler: " + handlerPath));\n    if (!handler[method])\n        return callback(new Error("No such method on " + handlerPath + ": " + method));\n\n    var revNum;\n    var isDone;\n    try {\n        setupCall();\n    } catch (e) {\n        if (isDone)\n            throw e;\n        done(e);\n    }\n    \n    function setupCall() {\n        switch (method) {\n            case "analyzeCurrent":\n            case "findImports":\n            case "invoke":\n                var clientPath = args[0];\n                var osPath = options.filePath;\n                \n                getClientDoc(clientPath, options, function(err, doc) {\n                    if (err) return done(err);\n                    if (!doc) {\n                        revNum = -1;\n                        return doCall();\n                    }\n                    \n                    args[0] = osPath;\n                    args[1] = doc.contents;\n                    args[3] = args[3] || {}; // options\n                    args[3].clientPath = clientPath;\n                    revNum = doc.revNum;\n                    doCall();\n                });\n                break;\n            default:\n                doCall();\n        }\n    }\n    \n    function doCall() {\n        try {\n            handler[method].apply(handler, args.concat(done));\n        } catch (e) {\n            if (isDone)\n                throw e;\n            done(e);\n        }\n    }\n    \n    function done(err/*, arg... */) {\n        isDone = true;\n        \n        var args = [].slice.apply(arguments);\n        callback(\n            err,\n            {\n                result: packer.pack(args, { packStringDepth: 1 }),\n                revNum: revNum\n            }\n        );\n    }\n}\n\nfunction loadPlugin(path, contents, callback) {\n    if (!path || path.match(/^\\.|\\.js$/))\n        return callback(new Error("Illegal module name: " + path));\n    if (!contents)\n        return callback(new Error("No contents provided: " + path));\n\n    \n    var exports = {};\n    var module = { exports: exports };\n    var require = createRequire(path, plugins);\n\n    try {\n        var pathJS = path.replace(/(\\.js)?$/, ".js");\n        var script = "(function(require, exports, module) {"\n            + "var define = function(def) { def(require, exports, module) };"\n            + contents.replace(/^\\#\\!.*/, \'\')\n            + "})";\n        vm.runInThisContext(script, pathJS)(require, exports, module);\n    } catch (e) {\n        console.error("Error loading " + path + ":", e.stack);\n        e.message = ("Error loading " + path + ": " + e.message);\n        return callback(e);\n    }\n\n    plugins[path] = module.exports;\n    callback(null, module.exports);\n}\n\nfunction createRequire(path, localDefs) {\n    var parentModule = new Module(path);\n    parentModule.path = path;\n    parentModule.paths = Module._nodeModulePaths(dirname(path));\n\n    function createRequire(file) {\n        var normalized = normalizeModule(path, file);\n        if (normalized in localDefs)\n            return localDefs[normalized];\n        try {\n            var exports = Module._load(file, parentModule);\n            return exports;\n        } catch (e) {\n            e.message = path + ": " + e.message;\n            throw e;\n        }\n    }\n\n    createRequire.resolve = function(request) {\n        var resolved = Module._resolveFilename(request, parentModule);\n        return (resolved instanceof Array) ? resolved[1] : resolved;\n    };\n\n    createRequire.main = process.mainModule;\n    createRequire.extensions = require.extensions;\n    createRequire.cache = require.cache;\n\n    return createRequire;\n}\n\nfunction normalizeModule(parentId, moduleName) {\n    if (moduleName.indexOf("!") !== -1) {\n        var chunks = moduleName.split("!");\n        return normalizeModule(parentId, chunks[0]) + "!" + normalizeModule(parentId, chunks[1]);\n    }\n    if (moduleName.charAt(0) == ".") {\n        var base = parentId.split("/").slice(0, -1).join("/");\n        moduleName = (base || parentId) + "/" + moduleName;\n\n        while (moduleName.indexOf(".") !== -1 && previous != moduleName) {\n            var previous = moduleName;\n            moduleName = moduleName.replace(/\\/\\.\\//, "/").replace(/[^\\/]+\\/\\.\\.\\//, "");\n        }\n    }\n\n    return moduleName;\n}\n\nvar async = {\n    forEachSeries: function(arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function () {\n            iterator(arr[completed], function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed === arr.length) {\n                        callback(null);\n                    }\n                    else {\n                        iterate();\n                    }\n                }\n            });\n        };\n        iterate();\n    }\n};\n')


define("plugins/c9.ide.language.jsonalyzer/jsonalyzer",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
if(loaded=!0,c9.readOnly)return!1
var loadedWorker,warning
return emit.setMaxListeners(50),language.registerLanguageHandler("plugins/c9.ide.language.jsonalyzer/worker/jsonalyzer_worker",function(err1,handler){
language.getWorker(function(err2,langWorker){return err1||err2?(errorHandler.reportError(err1||err2),
showError("Could not load language worker: "+(err1.message||err1||err2.message||err2))):(loadedWorker=!0,
worker=langWorker,watcher.on("change",onFileChange),watcher.on("directory",onDirChange),save.on("afterSave",onFileSave),
c9.on("connect",onOnlineChange),c9.on("disconnect",onOnlineChange),worker.on("jsonalyzerCallServer",callServer),
worker.emit("onlinechange",{data:{isOnline:c9.connected}}),emit.sticky("initWorker"),void(warning&&hideError(warning)))

})}),setTimeout(function(){setTimeout(function(){useCollab&&!installer.isInstalled("c9.ide.collab")||loadedWorker||(warning=showError("Language worker could not be loaded; some language features have been disabled"))

},50)},6e4),plugins.handlersWorker.forEach(function(plugin){registerWorkerHandler(plugin)}),useSend||useCollab?void loadServer(function(err){
if(err)return showError("Language server could not be loaded; some language features have been disabled"),
console.error(err.stack||err)}):(console.warn("jsonalyzer disabled"),void(serverLoading=!0))}function loadServer(callback){
function tryConnect(){var loadedHandlers=[],handlersForWorker=[]
async.series([function(next){ext.loadRemotePlugin("jsonalyzer_server",{code:require("text!./server/jsonalyzer_server.js"),
redefine:!server},function(err,_server){err&&"EEXIST"===err.code&&(err=null),server=_server,unpacker=new jsonm.Unpacker,
next(err)})},function(next){server.init(serverOptions,next)},function(next){server.getHandlerList(function(err,result){
loadedHandlers=result&&result.handlers,next(err)})},function(next){var helpers=plugins.helpersServer.filter(function(p){
return loadedHandlers.indexOf(p.path)===-1})
return helpers.length?void server.registerHandlers(helpers,serverOptions,next):next()},function(next){
var handlers=plugins.handlersServer.filter(function(p){return loadedHandlers.indexOf(p.path)===-1})
return handlers.length?void server.registerHandlers(handlers,serverOptions,function(err,result){return err?next(err):(handlersForWorker=result.summaries,
void next(err))}):next()},function(next){if(!useCollab)return next()
var wait=setTimeout(function(){done(new Error("Collab never gets to available state"))},2e4)
collabConnect.once("available",function(){clearTimeout(wait),next()})},function(next){plugin.once("initWorker",function(){
handlersForWorker.forEach(function(meta){loadedHandlers.indexOf(meta.path)>-1||worker.emit("jsonalyzerRegisterServer",{
data:meta})}),next()})}],done)}function done(err){return err&&"EDISCONNECT"===err.code||!err&&!c9.connected?tryConnect():err?callback(err):(serverLoading=!1,
emit.sticky("initServer"),void callback())}serverLoading&&plugin.once("initServer",callback),tryConnect()

}function onFileChange(event){worker&&worker.emit("filechange",{data:{path:event.path}})}function onFileSave(event){
event.silentsave||worker.emit("filechange",{data:{path:event.path,value:event.document&&event.document.value,
isSave:!0}})}function onDirChange(event){worker&&worker.emit("dirchange",{data:event})}function onOnlineChange(event){
return plugin.once("initWorker",function(err){err&&console.error(err),worker.emit("onlinechange",{data:{
isOnline:c9.connected}})}),c9.connected?(console.log("[jsonalyzer] connecting"),void loadServer(function(err){
return err?console.error("Could not reload language server",err):void console.log("[jsonalyzer] connected")

})):void emit.unsticky("initServer")}function callServer(event){function setupCall(){function start(){
pendingServerCall=doCall,plugin.once("initServer",pendingServerCall)}var waitTime=lastServerCall[handlerPath]+maxCallInterval-Date.now()


if(waitTime>0)return setTimeout(setupCall,waitTime)
if(lastServerCall[handlerPath]=Date.now(),useCollab){var collabDoc=collab.getDocument(filePath)
return collabDoc&&(revNum=collabDoc.latestRevNum+(collabDoc.pendingUpdates?1:0),collabDoc.sendNow()),
start()}return useSend?readTabOrFile(filePath,{allowUnsaved:!0,encoding:"utf-8"},function(err,result){
return err?done(err):(value=result,void start())}):console.warn("Can't enable server-side analysis without collab in this configuration")

}function doCall(abort){if(abort||pendingServerCall!==doCall){var err=new Error("Superseded by later call, aborted")


return err.code="ESUPERSEDED",done(err)}if(semaphore&&queuedCalls[semaphore]){var queued=queuedCalls[semaphore].queued


return delete queuedCalls[semaphore],queued&&queued(!0),void(queuedCalls[semaphore]={queued:doCall})}
queuedCalls[semaphore]={},timeoutWatcher=setTimeout(function watch(){if(!c9.connected)return plugin.once("initServer",function(){
setTimeout(watch,2e3)})
console.warn("Did not receive a response from handler call to "+handlerPath+":"+method)
var err=new Error("Timeout")
err.code="ETIMEDOUT",done(err),done=function(){console.log("Late reply from server:",arguments)}},timeout),
server.callHandler(handlerPath,method,args,{filePath:toOSPath(filePath),value:value,revNum:revNum},function(err,response){
done(err,response)})}function done(err,response){if(err&&"EDISCONNECT"==err.code)return setTimeout(retryConnect,50)


if(err&&"ECOLLAB"==err.code&&errorHandler.reportError(err),!isDone){if(clearTimeout(timeoutWatcher),isDone=!0,
queuedCalls[semaphore]){var queued=queuedCalls[semaphore].queued
delete queuedCalls[semaphore],queued&&queued()}unpacker.unpack(response&&response.result,function(err2,resultArgs){
resultArgs=resultArgs||[],err=err||err2||resultArgs[0],resultArgs[0]=err&&{message:err.message,stack:err.stack,
code:err.code},plugin.once("initWorker",function(){worker.emit("jsonalyzerCallServerResult",{data:{handlerPath:handlerPath,
result:resultArgs,id:event.data.id}})})})}}function retryConnect(){tries.push(Date.now())
var trySeriesStart=tries[tries.length-1-maxTrySeriesLength]
if(!trySeriesStart||trySeriesStart<Date.now()-maxTrySeriesTime)return setupCall()
var err=new Error("Too many disconnects. Server crashing?")
err.code="EFATAL",errorHandler.reportError(err),done(err)}var timeoutWatcher,value,revNum,filePath=event.data.filePath,handlerPath=event.data.handlerPath,method=event.data.method,args=event.data.args,maxCallInterval=null!=event.data.maxCallInterval?event.data.maxCallInterval:2e3,semaphore=event.data.semaphore,timeout=event.data.timeout||15e3,tries=[]


setupCall()
var isDone}function toOSPath(path){return path.replace(/^\//,workspaceDir+"/").replace(/^~\//,homeDir+"/")

}function registerServerHandler(path,contents,options,callback){return"string"!=typeof contents?require(["text!"+path+".js"],function(value){
registerServerHandler(path,value,contents,options)}):"function"==typeof options?registerServerHandler(path,contents,{},options):void plugin.once("initServer",function(){
server.registerHandler(path,contents,options,function(err,meta){return err&&"EDISCONNECT"===err.code?setTimeout(registerServerHandler.bind(null,path,contents,options,callback),500):err?(console.error("Failed to load "+path,err),
callback&&callback(err)):(plugins.handlersServer.push({path:path,contents:contents,options:options||{}
}),void plugin.once("initWorker",function(){worker.emit("jsonalyzerRegisterServer",{data:meta}),callback&&callback()

}))})})}function registerServerHelper(path,contents,options,callback){return"string"!=typeof contents?require(["text!"+path+".js"],function(value){
registerServerHelper(path,value,contents,options)}):"function"==typeof options?registerServerHelper(path,contents,{},options):void plugin.once("initServer",function(){
server.registerHandler(path,contents,options,function(err){err&&(console.error("Failed to load "+path,err),
callback&&callback(err)),plugins.handlersServer.push({path:path,contents:contents,options:options||{}
}),callback&&callback()})})}function registerWorkerHandler(path,contents,options,callback){return contents&&"string"!=typeof contents?registerWorkerHandler(path,null,arguments[1],arguments[2]):"function"==typeof options?registerWorkerHandler(path,contents,{},options):void plugin.once("initWorker",function(){
worker.emit("jsonalyzerRegister",{data:{modulePath:path,contents:contents,options:options}}),worker.on("jsonalyzerRegistered",function listen(e){
e.data.modulePath===path&&(worker.off(listen),callback&&callback(e.err))})})}function unregisterWorkerHandler(path,callback){
plugin.once("initWorker",function(){worker.emit("jsonalyzerUnregister",{data:{modulePath:path}}),worker.on("jsonalyzerUnregistered",function listen(e){
e.data.modulePath===path&&(worker.off(listen),callback&&callback(e.err))})})}function unregisterServerHandler(path,callback){
plugin.once("initServer",function(){worker.emit("jsonalyzerUnregisterServer",{data:{modulePath:path}}),
worker.on("jsonalyzerUnregisteredServer",function listen(e){e.data.modulePath===path&&(worker.off(listen),
callback&&callback(e.err))})})}var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),c9=imports.c9,language=imports.language,watcher=imports.watcher,save=imports.save,showError=imports["dialog.error"].show,hideError=imports["dialog.error"].hide,errorHandler=imports.error_handler,ext=imports.ext,plugins=require("./default_plugins"),async=require("async"),collab=imports.collab,collabConnect=imports["collab.connect"],installer=imports.installer,readTabOrFile=imports["language.worker_util_helper"].readTabOrFile,jsonm=require("lib/jsonm/build/unpacker"),useCollab=options.useCollab,useSend=!options.useCollab&&options.useSend,maxTrySeriesLength=options.maxTrySeriesLength||3,maxTrySeriesTime=options.maxTrySeriesTime||1e4,homeDir=options.homeDir.replace(/\/$/,""),workspaceDir=options.workspaceDir.replace(/\/$/,""),serverOptions={
workspaceDir:c9.workspaceDir,homeDir:c9.home}
for(var o in options)"function"!=typeof options[o]&&options.hasOwnProperty(o)&&(serverOptions[o]=options[o])


var worker,server,pendingServerCall,unpacker,queuedCalls={},lastServerCall={},serverLoading=!1,loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({registerWorkerHandler:registerWorkerHandler,
unregisterWorkerHandler:unregisterWorkerHandler,registerServerHandler:registerServerHandler,unregisterServerHandler:unregisterServerHandler,
registerServerHelper:registerServerHelper}),register(null,{jsonalyzer:plugin})}return main.consumes=["Plugin","commands","language","c9","watcher","save","language.complete","dialog.error","ext","collab","collab.connect","language.worker_util_helper","error_handler","installer"],
main.provides=["jsonalyzer"],main})


define("plugins/c9.ide.language.go/go",[],function(require,exports,module){function main(options,imports,register){
function setupHandler(handler){settings.on("project/golang",sendSettings.bind(null,handler),plugin),sendSettings(handler)

}function sendSettings(handler){handler.emit("set_go_config",{enabled:settings.get("project/golang/@completion")
})}var Plugin=imports.Plugin,language=imports.language,jsonalyzer=imports.jsonalyzer,preferences=imports.preferences,settings=imports.settings,plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){preferences.add({Project:{"Go Support":{position:1400,"Enable Go code completion":{
position:510,type:"checkbox",path:"project/golang/@completion"},"Format Code on Save":{position:520,type:"checkbox",
path:"project/golang/@formatOnSave"},"Custom Code Formatter":{position:530,type:"textbox",path:"project/golang/@formatter"
}}}},plugin),settings.on("read",function(e){settings.setDefaults("project/golang",[["completion",!0],["formatOnSave",!0],["formatter",'gofmt -w "$file"']])

},plugin),language.registerLanguageHandler("plugins/c9.ide.language.go/worker/go_completer",function(err,handler){
return err?console.error(err):void setupHandler(handler)})}),plugin.on("unload",function(){jsonalyzer.unregisterWorkerHandler("plugins/c9.ide.language.go/worker/go_completer")

}),register(null,{"language.go":plugin})}return main.consumes=["Plugin","language","jsonalyzer","settings","preferences","preferences.experimental"],
main.provides=["language.go"],main})


define("text!plugins/c9.ide.language.python/server/jedi_server.py",[],'import argparse\nimport jedi\nimport json\nimport sys\nimport os\ntry: # python 2\n    import urlparse\n    from BaseHTTPServer import BaseHTTPRequestHandler, HTTPServer\nexcept: # python 3\n    import urllib.parse as urlparse\n    from http.server import BaseHTTPRequestHandler, HTTPServer\n\ndef main(args):\n    if args.mode != "daemon":\n        print(run(sys.stdin.read(), args.__dict__))\n        return\n\n    jedi.preload_module("os", "sys", "math")\n    try:\n        server = HTTPServer(("localhost", int(args.port)), Daemon)\n    except:\n        sys.stderr.write("Daemon unable to listen at :%s\\n" % args.port)\n        sys.exit(98)\n    sys.stderr.write("Daemon " + "listening at :%s\\n" % args.port) # concat strings to avoid matching this string in the client\n    server.serve_forever()\n\ndef run(source, args):\n    script = jedi.Script(source, int(args.get("row")), int(args.get("column")), args.get("path"))\n    try:\n        result = getattr(script, args.get("mode"))()\n    except:\n        result = []\n    return json.dumps(result, default=to_json(args.get("mode"), args.get("nodoc")))\n\nclass Daemon(BaseHTTPRequestHandler):\n    def do_POST(self):\n        query = urlparse.urlparse(self.path).query\n        args = urlparse.parse_qsl(query)\n\n        length = int(self.headers.get("content-length", 0))\n        source = self.rfile.read(length)\n\n        self.send_response(200)\n        self.end_headers()\n        self.wfile.write(run(source, dict(args)).encode("utf8"))\n\n    def log_message(self, format, *args):\n        return # log silently\n\ndef to_json(mode, nodoc):\n    include_pos = mode == "goto_definitions"\n    def to_json(c):\n        if c.type == "function":\n            try:\n                paramList = { p.description for p in c.params }\n                params = ", ".join([p for p in paramList if p != None and p != "self"])\n            except:\n                params = ""\n        return remove_nulls({\n            "name": c.name + ("(" + params + ")" if c.type == "function" else ""),\n            "replaceText": c.name + "(^^)" if c.type == "function" else None,\n            "row": c.line if c.line and include_pos else None,\n            "column": c.column if c.column and include_pos else None,\n            "path": "/" + c.module_path if c.module_path and include_pos else None,\n            "doc": abbrev(c.docstring()) if c.type != "module" # module docs dont work\n                                         and c.name[-2:] != "__" # skim on bandwidth\n                                         and not nodoc\n                                         else None,\n            "icon": {\n                "function": "method",\n                "module": "package",\n                "class": "property",\n            }.get(c.type, None),\n        })\n    return to_json\n\ndef remove_nulls(d):\n    # iterate over list copy to avoid size change in Python 3\n    # http://stackoverflow.com/a/11941855/1797347\n    for key, value in list(d.items()):\n        if value is None:\n            del d[key]\n        elif isinstance(value, dict):\n            remove_nulls(value)\n    return d\n\ndef abbrev(s):\n    return s if len(s) < 2500 else s[:2500] + "..."\n\nif __name__ == "__main__":\n    parser = argparse.ArgumentParser(description="Run jedi functions as a daemon or via stdin")\n    parser.add_argument("mode", help="Mode of operation", choices=["daemon", "completions", "goto_definitions", "goto_assignments"])\n    parser.add_argument("--row", type=int, help="The row to read from")\n    parser.add_argument("--column", type=int, help="The column to read from")\n    parser.add_argument("--path", help="The path of the script")\n    parser.add_argument("--port", type=int, help="The port for the daemon to listen on")\n    parser.add_argument("--nodoc", help="Don\'t include docstrings in output")\n    args = parser.parse_args()\n    main(args)\n')


define("text!plugins/c9.ide.language.python/server/launch_command.sh",[],'#!/usr/bin/env bash\n# Helper script to launch jedi/pylint in a python2/3 virtualenv\nset -e\n\nPYTHON=$1\nCOMMAND=$2\n\nSHAREDENV="/mnt/shared/lib/$PYTHON"\nFALLBACKENV="$HOME/.c9/$PYTHON"\n\nif [[ -d $SHAREDENV ]]; then\n    ENV=$SHAREDENV\n    source $ENV/bin/activate\n    PYTHON="$ENV/bin/$PYTHON"\nelif which virtualenv &>/dev/null; then\n    ENV=$FALLBACKENV\n    if ! [[ -d $ENV ]]; then\n        VERSION=\n        if [ "$PYTHON" = "python3" ]; then\n            VERSION=--python=python3\n        fi\n        virtualenv $VERSION $ENV\n    fi\n\n    source $ENV/bin/activate\n\n    if ! python -c \'import jedi\' &>/dev/null; then\n        echo "Installing python support dependencies" >&2\n        pip install --upgrade jedi pylint pylint-flask pylint-django >&2\n    fi\n\n    PYTHON=$ENV/bin/$PYTHON\nelse\n    echo "Python support fatal error: virtualenv not installed" >&2\n    echo "try \'pip install virtualenv\' or \'sudo pip install virtualenv\'" >&2\n    exit 1\nfi\n\nCOMMAND=${COMMAND/\\$PYTHON/$PYTHON}\nCOMMAND=${COMMAND/\\$ENV/$ENV}\neval "$COMMAND"')


define("plugins/c9.ide.language.python/python",[],function(require,exports,module){function main(options,imports,register){
function setupHandler(handler){handler.emit("set_python_scripts",{jediServer:jediServer,launchCommand:launchCommand,
hosted:!options.testing&&c9.hosted}),settings.on("project/python",sendSettings.bind(null,handler),plugin),
sendSettings(handler)}function sendSettings(handler){handler.emit("set_python_config",{pythonVersion:settings.get("project/python/@version"),
pythonPath:settings.get("project/python/@path"),pylintFlags:settings.get("project/python/@pylintFlags"),
completion:settings.get("project/python/@completion")})}var Plugin=imports.Plugin,language=imports.language,jsonalyzer=imports.jsonalyzer,prefs=imports.preferences,settings=imports.settings,c9=imports.c9,plugin=new Plugin("Ajax.org",main.consumes),jediServer=require("text!./server/jedi_server.py").replace(/ {4}/g," ").replace(/'/g,"'\\''"),launchCommand=require("text!./server/launch_command.sh").replace(/ {2,}/g," ")


plugin.on("load",function(){jsonalyzer.registerWorkerHandler("plugins/c9.ide.language.python/worker/python_jsonalyzer"),
prefs.add({Project:{"Python Support":{position:1300,"Enable Python code completion":{position:310,type:"checkbox",
path:"project/python/@completion"},"Python Version":{position:320,type:"dropdown",path:"project/python/@version",
items:[{caption:"Python 2",value:"python2"},{caption:"Python 3",value:"python3"}]},"Pylint command-line options":{
position:330,type:"textbox",width:300,message:"-d all -e E -e F",path:"project/python/@pylintFlags"},
PYTHONPATH:{position:340,type:"textbox",width:300,path:"project/python/@path"},"Format Code on Save":{
position:350,type:"checkbox",path:"project/python/@formatOnSave"},"Custom Code Formatter":{position:360,
type:"textbox",path:"project/python/@formatter"}}}},plugin),settings.on("read",function(e){settings.setDefaults("project/python",[["version","python2"],["completion",!0],["path",options.pythonPath||"/usr/local/lib/python2.7/dist-packages:/usr/local/lib/python3.4/dist-packages"]])

},plugin),language.registerLanguageHandler("plugins/c9.ide.language.python/worker/python_linter",function(err,handler){
return err?console.error(err):void setupHandler(handler)}),language.registerLanguageHandler("plugins/c9.ide.language.python/worker/python_completer",function(err,handler){
return err?console.error(err):void setupHandler(handler)})}),plugin.on("unload",function(){jsonalyzer.unregisterWorkerHandler("plugins/c9.ide.language.python/worker/python_jsonalyzer"),
language.unregisterLanguageHandler("plugins/c9.ide.language.python/worker/python_completer"),language.unregisterLanguageHandler("plugins/c9.ide.language.python/worker/python_linter")

}),register(null,{"language.python":plugin})}return main.consumes=["Plugin","language","jsonalyzer","settings","preferences","c9"],
main.provides=["language.python"],main})


define("plugins/c9.ide.language.javascript.eslint/eslint",[],function(require,exports,module){function main(options,imports,register){
var language=imports.language
language.registerLanguageHandler("plugins/c9.ide.language.javascript.eslint/worker/eslint_worker"),register(null,{})

}return main.consumes=["language"],main.provides=[],main})


define("plugins/c9.ide.language.javascript.tern/architect_resolver",[],function(require,exports,module){
"use strict"
function main(options,imports,register){function load(){if(loaded)return!1
loaded=!0,assert(window.plugins&&window.plugins.length>10,"Architect plugins must be in window.plugins")


var knownPlugins={}
window.plugins.forEach(function(plugin){plugin&&plugin.provides&&plugin.provides.forEach(function(provide){
knownPlugins["_"+provide]=plugin.packagePath})}),language.getWorker(function(err,worker){return err?console.error(err):void worker.on("architectPlugins",function(){
worker.emit("architectPluginsResult",{data:knownPlugins})})}),language.registerLanguageHandler("plugins/c9.ide.language.javascript.tern/worker/architect_resolver_worker")

}var Plugin=imports.Plugin,language=imports.language,assert=require("c9/assert"),plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({}),register(null,{"language.tern.architect_resolver":plugin
})}return main.consumes=["Plugin","language"],main.provides=["language.tern.architect_resolver"],main

})


define("plugins/c9.ide.language.javascript.tern/ui",[],function(require,exports,module){function main(options,imports,register){
function load(){loaded||(loaded=!0,prefs.add({Project:{"JavaScript Support":{position:1100,"Tern Completions":{
position:220,type:"custom",name:"ternCompletions",node:new ui.bar({style:"padding:10px"})}}}},plugin),
plugin.getElement("ternCompletions",initPreferences))}function initPreferences(elem){var container=elem.$ext.appendChild(document.createElement("div"))


datagrid=new Datagrid({container:container,enableCheckboxes:!0,emptyMessage:"Loading...",minLines:3,maxLines:10,
sort:function(array){return array.sort(function(a,b){return"Main"===a.label?-1:a.label.toLowerCase()>b.label.toLowerCase()?1:-1

})},columns:[{caption:"JavaScript Library Code Completion",value:"name",width:"100%",type:"tree"}]},plugin)


var getCheckboxHTML=datagrid.getCheckboxHTML
datagrid.getCheckboxHTML=function(node){return["Main","Experimental"].indexOf(node.label)>-1?"":getCheckboxHTML(node)

},datagrid.once("draw",function(){tern.once("ready",function(){function toCheckbox(def){return{label:def,
description:'<a href="'+defs[def].url+'">'+defs[def].url+"</a>",isChecked:config[def]&&config[def].enabled
}}var config=settings.getJson("project/language/tern_defs")
defs=tern.getDefs(),datagrid.on("check",onChange.bind(null,!0)),datagrid.on("uncheck",onChange.bind(null,!1)),
datagrid.setRoot([{label:"Main",description:"",items:Object.keys(defs).filter(function(d){return!defs[d].hidden&&!defs[d].experimental

}).map(toCheckbox)},{label:"Experimental",description:"",items:Object.keys(defs).filter(function(d){return!defs[d].hidden&&defs[d].experimental

}).map(toCheckbox)}]),datagrid.open(datagrid.root[0])})})}function onChange(value,nodes){var config=settings.getJson("project/language/tern_defs")


nodes.forEach(function(n){tern.setDefEnabled(n.label,n.isChecked),n.isChecked?config[n.label]={enabled:!0
}:config[n.label]={enabled:!1}}),settings.setJson("project/language/tern_defs",config)}var datagrid,defs,Plugin=imports.Plugin,prefs=imports.preferences,ui=imports.ui,settings=imports.settings,Datagrid=imports.Datagrid,tern=imports["language.tern"],plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",load),plugin.on("unload",function(){loaded=!1,datagrid=null,defs=null}),plugin.freezePublicAPI({}),
register(null,{"language.tern.ui":plugin})}return main.consumes=["Plugin","preferences","ui","Datagrid","settings","preferences.experimental","language.tern"],
main.provides=["language.tern.ui"],main})


define("text!lib/tern_from_ts/defs/__list.json",[],'{"defs":{\n"DataStream.js": {"main": "DataStream.js.json"},"Finch": {"main": "Finch.json"},"Headroom": {"main": "Headroom.json"},"JSONStream": {"main": "JSONStream.json","url": "http://github.com/dominictarr/JSONStream"},"LICENSE": {"main": "LICENSE"},"PayPal-Cordova-Plugin": {"main": "PayPal-Cordova-Plugin.json"},"acc-wizard": {"main": "acc-wizard.json"},"accounting": {"main": "accounting.json","url": "http://josscrowcroft.github.io/accounting.js/"},"ace": {"main": "ace.json","url": "http://ace.ajax.org/"},"add2home": {"main": "add2home.json","url": "http://cubiq.org/add-to-home-screen"},"alertify": {"main": "alertify.json","url": "http://fabien-d.github.io/alertify.js/"},"amcharts": {"main": "amcharts.json"},"amqp-rpc": {"main": "amqp-rpc.json"},"angular-agility": {"main": "angular-agility.json"},"angular-httpi": {"main": "angular-httpi.json"},"angular-protractor": {"main": "angular-protractor.json"},"angular-scenario": {"main": "angular-scenario.json","url": "http://angularjs.org"},"angular-scroll": {"main": "angular-scroll.json"},"angular-signalr-hub": {"main": "angular-signalr-hub.json"},"angular-spinner": {"main": "angular-spinner.json"},"angular-toasty": {"main": "angular-toasty.json"},"angular-ui-tree": {"main": "angular-ui-tree.json"},"angular.throttle": {"main": "angular.throttle.json"},"angularfire": {"main": "angularfire.json","url": "http://angularfire.com"},"angularjs-toaster": {"main": "angularjs-toaster.json"},"animation-frame": {"main": "animation-frame.json"},"ansi-styles": {"main": "ansi-styles.json"},"appframework": {"main": "appframework.json","url": "http://app-framework-software.intel.com/"},"appletvjs": {"main": "appletvjs.json"},"applicationinsights": {"main": "applicationinsights.json"},"arbiter": {"main": "arbiter.json"},"argparse": {"main": "argparse.json"},"asciify": {"main": "asciify.json"},"aspnet-identity-pw": {"main": "aspnet-identity-pw.json"},"assert": {"main": "assert.json"},"assertsharp": {"main": "assertsharp.json"},"atmosphere": {"main": "atmosphere.json"},"atom": {"main": "atom.json"},"atpl": {"main": "atpl.json"},"auth0": {"main": "auth0.json","url": "http://auth0.com"},"auth0.lock": {"main": "auth0.lock.json","url": "http://auth0.com"},"auth0.widget": {"main": "auth0.widget.json","url": "http://auth0.com"},"auto-launch": {"main": "auto-launch.json"},"axios": {"main": "axios.json"},"backbone-relational": {"main": "backbone-relational.json","url": "http://backbonerelational.org/"},"backbone.layoutmanager": {"main": "backbone.layoutmanager.json","url": "http://layoutmanager.org/"},"backbone.radio": {"main": "backbone.radio.json"},"backgrid": {"main": "backgrid.json","url": "http://backgridjs.com/"},"bardjs": {"main": "bardjs.json"},"bcrypt": {"main": "bcrypt.json"},"bcryptjs": {"main": "bcryptjs.json"},"better-curry": {"main": "better-curry.json"},"bgiframe": {"main": "bgiframe.json"},"big-integer": {"main": "big-integer.json"},"big.js": {"main": "big.js.json"},"bigint": {"main": "bigint.json"},"bigscreen": {"main": "bigscreen.json","url": "http://brad.is/coding/BigScreen/"},"blob-stream": {"main": "blob-stream.json"},"blocks": {"main": "blocks.json","url": "http://jsblocks.com/"},"boom": {"main": "boom.json","url": "http://github.com/hapijs/boom"},"bootbox": {"main": "bootbox.json"},"bootstrap-notify": {"main": "bootstrap-notify.json","url": "http://bootstrap-notify.remabledesigns.com/"},"bootstrap-slider": {"main": "bootstrap-slider.json"},"bootstrap-switch": {"main": "bootstrap-switch.json","url": "http://www.bootstrap-switch.org/"},"bootstrap-touchspin": {"main": "bootstrap-touchspin.json","url": "http://www.virtuosoft.eu/code/bootstrap-touchspin/"},"bootstrap.datepicker": {"main": "bootstrap.datepicker.json"},"bootstrap": {"main": "bootstrap.json","url": "http://twitter.github.com/bootstrap/"},"bootstrap.paginator": {"main": "bootstrap.paginator.json"},"bootstrap.timepicker": {"main": "bootstrap.timepicker.json"},"bootstrap.v3.datetimepicker": {"main": "bootstrap.v3.datetimepicker.json","url": "http://eonasdan.github.io/bootstrap-datetimepicker"},"bowser": {"main": "bowser.json"},"bucks": {"main": "bucks.json"},"business-rules-engine": {"main": "business-rules-engine.json","extra": {"_business-rules-engine_Utils": "_business-rules-engine_Utils.json","_business-rules-engine_Validation": "_business-rules-engine_Validation.json","_business-rules-engine_business-rules-engine": "_business-rules-engine_business-rules-engine.json"}},"bytebuffer": {"main": "bytebuffer.json"},"cal-heatmap": {"main": "cal-heatmap.json"},"calq": {"main": "calq.json"},"camljs": {"main": "camljs.json","url": "http://camljs.codeplex.com"},"canvasjs": {"main": "canvasjs.json","url": "http://canvasjs.com/"},"casperjs": {"main": "casperjs.json","url": "http://casperjs.org/"},"chai-datetime": {"main": "chai-datetime.json"},"chai-fuzzy": {"main": "chai-fuzzy.json","url": "http://chaijs.com/plugins/chai-fuzzy"},"chai-http": {"main": "chai-http.json"},"chai-jquery": {"main": "chai-jquery.json"},"chai-subset": {"main": "chai-subset.json"},"chai-things": {"main": "chai-things.json"},"chai": {"main": "chai.json","url": "http://chaijs.com/","extra": {"_chai_chai-3.2.0": "_chai_chai-3.2.0.json","_chai_chai": "_chai_chai.json"}},"chalk": {"main": "chalk.json"},"change-case": {"main": "change-case.json"},"chartist": {"main": "chartist.json"},"chartjs": {"main": "chartjs.json"},"chosen": {"main": "chosen.json"},"chroma-js": {"main": "chroma-js.json"},"chui": {"main": "chui.json"},"codemirror": {"main": "codemirror.json","extra": {"_codemirror_codemirror-showhint": "_codemirror_codemirror-showhint.json","_codemirror_searchcursor": "_codemirror_searchcursor.json"}},"colors": {"main": "colors.json"},"cometd": {"main": "cometd.json","url": "http://cometd.org"},"complex": {"main": "complex.json"},"config": {"main": "config.json"},"configstore": {"main": "configstore.json"},"consolidate": {"main": "consolidate.json"},"content-type": {"main": "content-type.json"},"convert-source-map": {"main": "convert-source-map.json"},"cookie": {"main": "cookie.json"},"cookiejs": {"main": "cookiejs.json"},"cordova-plugin-app-version": {"main": "cordova-plugin-app-version.json"},"cordova-plugin-email-composer": {"main": "cordova-plugin-email-composer.json"},"cordova-plugin-ibeacon": {"main": "cordova-plugin-ibeacon.json"},"cordova-plugin-mapsforge": {"main": "cordova-plugin-mapsforge.json"},"cordova-plugin-spinner": {"main": "cordova-plugin-spinner.json"},"cordova": {"main": "cordova.json","url": "http://cordova.apache.org"},"cordovarduino": {"main": "cordovarduino.json"},"couchbase": {"main": "couchbase.json"},"createjs-lib": {"main": "createjs-lib.json","url": "http://www.createjs.com/"},"cron": {"main": "cron.json"},"crossfilter": {"main": "crossfilter.json"},"crossroads": {"main": "crossroads.json","url": "http://millermedeiros.github.io/crossroads.js/"},"cryptojs": {"main": "cryptojs.json"},"cson": {"main": "cson.json"},"dagre-d3": {"main": "dagre-d3.json"},"dagre": {"main": "dagre.json"},"dat-gui": {"main": "dat-gui.json"},"date.format.js": {"main": "date.format.js.json"},"datejs": {"main": "datejs.json","url": "http://www.datejs.com/","extra": {"_datejs_sugarpak": "_datejs_sugarpak.json"}},"dcjs": {"main": "dcjs.json"},"decimal.js": {"main": "decimal.js.json","url": "http://mikemcl.github.io/decimal.js"},"deep-diff": {"main": "deep-diff.json"},"deployJava": {"main": "deployJava.json"},"dexie": {"main": "dexie.json"},"dhtmlxgantt": {"main": "dhtmlxgantt.json","url": "http://dhtmlx.com/docs/products/dhtmlxGantt"},"dhtmlxscheduler": {"main": "dhtmlxscheduler.json","url": "http://dhtmlx.com/docs/products/dhtmlxScheduler"},"di-lite": {"main": "di-lite.json"},"diff": {"main": "diff.json"},"docCookies": {"main": "docCookies.json"},"dock-spawn": {"main": "dock-spawn.json","url": "http://dockspawn.com"},"documentdb-server": {"main": "documentdb-server.json","url": "http://dl.windowsazure.com/documentDB/jsserverdocs"},"documentdb": {"main": "documentdb.json"},"dojo": {"main": "dojo.json","url": "http://dojotoolkit.org","extra": {"_dojo_doh": "_dojo_doh.json","_dojo_dojox.NodeList": "_dojo_dojox.NodeList.json","_dojo_dojox.analytics": "_dojo_dojox.analytics.json","_dojo_dojox.app": "_dojo_dojox.app.json","_dojo_dojox.atom": "_dojo_dojox.atom.json","_dojo_dojox.av": "_dojo_dojox.av.json","_dojo_dojox.calc": "_dojo_dojox.calc.json","_dojo_dojox.calendar": "_dojo_dojox.calendar.json","_dojo_dojox.charting": "_dojo_dojox.charting.json","_dojo_dojox.collections": "_dojo_dojox.collections.json","_dojo_dojox.color": "_dojo_dojox.color.json","_dojo_dojox.css3": "_dojo_dojox.css3.json","_dojo_dojox.data": "_dojo_dojox.data.json","_dojo_dojox.date": "_dojo_dojox.date.json","_dojo_dojox.dgauges": "_dojo_dojox.dgauges.json","_dojo_dojox.dnd": "_dojo_dojox.dnd.json","_dojo_dojox.drawing": "_dojo_dojox.drawing.json","_dojo_dojox.dtl": "_dojo_dojox.dtl.json","_dojo_dojox.editor": "_dojo_dojox.editor.json","_dojo_dojox.embed": "_dojo_dojox.embed.json","_dojo_dojox.encoding": "_dojo_dojox.encoding.json","_dojo_dojox.flash": "_dojo_dojox.flash.json","_dojo_dojox.form": "_dojo_dojox.form.json","_dojo_dojox.fx": "_dojo_dojox.fx.json","_dojo_dojox.gantt": "_dojo_dojox.gantt.json","_dojo_dojox.gauges": "_dojo_dojox.gauges.json","_dojo_dojox.geo": "_dojo_dojox.geo.json","_dojo_dojox.gesture": "_dojo_dojox.gesture.json","_dojo_dojox.gfx": "_dojo_dojox.gfx.json","_dojo_dojox.gfx3d": "_dojo_dojox.gfx3d.json","_dojo_dojox.grid": "_dojo_dojox.grid.json","_dojo_dojox.help": "_dojo_dojox.help.json","_dojo_dojox.highlight": "_dojo_dojox.highlight.json","_dojo_dojox.html": "_dojo_dojox.html.json","_dojo_dojox.image": "_dojo_dojox.image.json","_dojo_dojox.io": "_dojo_dojox.io.json","_dojo_dojox.jq": "_dojo_dojox.jq.json","_dojo_dojox.json": "_dojo_dojox.json.json","_dojo_dojox.jsonPath": "_dojo_dojox.jsonPath.json","_dojo_dojox.lang": "_dojo_dojox.lang.json","_dojo_dojox.layout": "_dojo_dojox.layout.json","_dojo_dojox.main": "_dojo_dojox.main.json","_dojo_dojox.math": "_dojo_dojox.math.json","_dojo_dojox.mdnd": "_dojo_dojox.mdnd.json","_dojo_dojox.mobile": "_dojo_dojox.mobile.json","_dojo_dojox.mvc": "_dojo_dojox.mvc.json","_dojo_dojox.rails": "_dojo_dojox.rails.json","_dojo_dojox.robot": "_dojo_dojox.robot.json","_dojo_dojox.rpc": "_dojo_dojox.rpc.json","_dojo_dojox.secure": "_dojo_dojox.secure.json","_dojo_dojox.sketch": "_dojo_dojox.sketch.json","_dojo_dojox.socket": "_dojo_dojox.socket.json","_dojo_dojox.sql": "_dojo_dojox.sql.json","_dojo_dojox.storage": "_dojo_dojox.storage.json","_dojo_dojox.string": "_dojo_dojox.string.json","_dojo_dojox.testing": "_dojo_dojox.testing.json","_dojo_dojox.timing": "_dojo_dojox.timing.json","_dojo_dojox.treemap": "_dojo_dojox.treemap.json","_dojo_dojox.uuid": "_dojo_dojox.uuid.json","_dojo_dojox.validate": "_dojo_dojox.validate.json","_dojo_dojox.widget": "_dojo_dojox.widget.json","_dojo_dojox.xml": "_dojo_dojox.xml.json"}},"domo": {"main": "domo.json","url": "http://domo-js.com/"},"dompurify": {"main": "dompurify.json"},"donna": {"main": "donna.json"},"dot": {"main": "dot.json"},"dotdotdot": {"main": "dotdotdot.json","url": "http://dotdotdot.frebsite.nl/"},"doublearray": {"main": "doublearray.json"},"dragula": {"main": "dragula.json","url": "http://bevacqua.github.io/dragula/"},"dropboxjs": {"main": "dropboxjs.json"},"dropzone": {"main": "dropzone.json","url": "http://www.dropzonejs.com/"},"dsv": {"main": "dsv.json"},"dts-bundle": {"main": "dts-bundle.json"},"durandal": {"main": "durandal.json","url": "http://durandaljs.com"},"dustjs-linkedin": {"main": "dustjs-linkedin.json"},"dw-bxslider-4": {"main": "dw-bxslider-4.json"},"each": {"main": "each.json","url": "http://www.adaltas.com/projects/node-each/"},"easeljs": {"main": "easeljs.json","url": "http://www.createjs.com/#!/EaselJS"},"easy-jsend": {"main": "easy-jsend.json"},"easystarjs": {"main": "easystarjs.json","url": "http://easystarjs.com/"},"egg.js": {"main": "egg.js.json"},"elm": {"main": "elm.json","url": "http://elm-lang.org"},"email-addresses": {"main": "email-addresses.json"},"email-templates": {"main": "email-templates.json"},"ember": {"main": "ember.json","url": "http://emberjs.com/"},"emissary": {"main": "emissary.json"},"empower": {"main": "empower.json"},"emscripten": {"main": "emscripten.json","url": "http://kripken.github.io/emscripten-site/index.html"},"epiceditor": {"main": "epiceditor.json","url": "http://epiceditor.com/"},"event-kit": {"main": "event-kit.json"},"eventemitter2": {"main": "eventemitter2.json"},"expect.js": {"main": "expect.js.json"},"expectations": {"main": "expectations.json"},"express-handlebars": {"main": "express-handlebars.json"},"fabricjs": {"main": "fabricjs.json","url": "http://fabricjs.com/"},"fancybox": {"main": "fancybox.json"},"fast-stats": {"main": "fast-stats.json"},"fastclick": {"main": "fastclick.json"},"favico.js": {"main": "favico.js.json","url": "http://lab.ejci.net/favico.js/"},"featherlight": {"main": "featherlight.json"},"filesystem": {"main": "filesystem.json","url": "http://www.w3.org/TR/file-system-api/"},"filewriter": {"main": "filewriter.json","url": "http://www.w3.org/TR/file-writer-api/"},"fingerprintjs": {"main": "fingerprintjs.json"},"firebase-client": {"main": "firebase-client.json"},"firebase": {"main": "firebase.json","extra": {"_firebase_firebase": "_firebase_firebase.json"}},"firefox": {"main": "firefox.json"},"fixed-data-table": {"main": "fixed-data-table.json"},"flat": {"main": "flat.json"},"flexSlider": {"main": "flexSlider.json"},"flight": {"main": "flight.json","url": "http://flightjs.github.com/flight/"},"flipsnap": {"main": "flipsnap.json","url": "http://pxgrid.github.io/js-flipsnap/"},"flowjs": {"main": "flowjs.json"},"flux-standard-action": {"main": "flux-standard-action.json"},"fluxxor": {"main": "fluxxor.json"},"form-data": {"main": "form-data.json"},"form-serializer": {"main": "form-serializer.json"},"foundation-sites": {"main": "foundation-sites.json"},"foundation": {"main": "foundation.json","url": "http://foundation.zurb.com/"},"fpsmeter": {"main": "fpsmeter.json"},"ftdomdelegate": {"main": "ftdomdelegate.json"},"fuse": {"main": "fuse.json"},"gamepad": {"main": "gamepad.json","url": "http://www.w3.org/TR/gamepad/"},"gamequery": {"main": "gamequery.json","url": "http://gamequeryjs.com/"},"geojson": {"main": "geojson.json","url": "http://geojson.org/"},"geometry-dom": {"main": "geometry-dom.json","url": "http://www.w3.org/TR/geometry-1/"},"giraffe": {"main": "giraffe.json"},"gl-matrix": {"main": "gl-matrix.json"},"gldatepicker": {"main": "gldatepicker.json","url": "http://glad.github.com/glDatePicker/"},"glidejs": {"main": "glidejs.json","url": "http://glide.jedrzejchalubek.com/"},"globalize": {"main": "globalize.json"},"google-apps-script": {"main": "google-apps-script.json","extra": {"_google-apps-script_google-apps-script.cache": "_google-apps-script_google-apps-script.cache.json","_google-apps-script_google-apps-script.calendar": "_google-apps-script_google-apps-script.calendar.json","_google-apps-script_google-apps-script.charts": "_google-apps-script_google-apps-script.charts.json","_google-apps-script_google-apps-script.contacts": "_google-apps-script_google-apps-script.contacts.json","_google-apps-script_google-apps-script.content": "_google-apps-script_google-apps-script.content.json","_google-apps-script_google-apps-script.document": "_google-apps-script_google-apps-script.document.json","_google-apps-script_google-apps-script.drive": "_google-apps-script_google-apps-script.drive.json","_google-apps-script_google-apps-script.forms": "_google-apps-script_google-apps-script.forms.json","_google-apps-script_google-apps-script.gmail": "_google-apps-script_google-apps-script.gmail.json","_google-apps-script_google-apps-script.groups": "_google-apps-script_google-apps-script.groups.json","_google-apps-script_google-apps-script.html": "_google-apps-script_google-apps-script.html.json","_google-apps-script_google-apps-script.jdbc": "_google-apps-script_google-apps-script.jdbc.json","_google-apps-script_google-apps-script.language": "_google-apps-script_google-apps-script.language.json","_google-apps-script_google-apps-script.lock": "_google-apps-script_google-apps-script.lock.json","_google-apps-script_google-apps-script.mail": "_google-apps-script_google-apps-script.mail.json","_google-apps-script_google-apps-script.maps": "_google-apps-script_google-apps-script.maps.json","_google-apps-script_google-apps-script.optimization": "_google-apps-script_google-apps-script.optimization.json","_google-apps-script_google-apps-script.properties": "_google-apps-script_google-apps-script.properties.json","_google-apps-script_google-apps-script.script": "_google-apps-script_google-apps-script.script.json","_google-apps-script_google-apps-script.sites": "_google-apps-script_google-apps-script.sites.json","_google-apps-script_google-apps-script.spreadsheet": "_google-apps-script_google-apps-script.spreadsheet.json","_google-apps-script_google-apps-script.ui": "_google-apps-script_google-apps-script.ui.json","_google-apps-script_google-apps-script.url-fetch": "_google-apps-script_google-apps-script.url-fetch.json","_google-apps-script_google-apps-script.utilities": "_google-apps-script_google-apps-script.utilities.json","_google-apps-script_google-apps-script.xml-service": "_google-apps-script_google-apps-script.xml-service.json"}},"google.analytics": {"main": "google.analytics.json"},"google.geolocation": {"main": "google.geolocation.json"},"google.picker": {"main": "google.picker.json"},"google.visualization": {"main": "google.visualization.json"},"graphviz": {"main": "graphviz.json"},"greasemonkey": {"main": "greasemonkey.json","url": "http://www.greasespot.net/"},"grecaptcha": {"main": "grecaptcha.json"},"gruntjs": {"main": "gruntjs.json","url": "http://gruntjs.com"},"gsap": {"main": "gsap.json","extra": {"_gsap_Ease": "_gsap_Ease.json","_gsap_TweenLite": "_gsap_TweenLite.json"}},"gulp-sourcemaps": {"main": "gulp-sourcemaps.json"},"hammerjs": {"main": "hammerjs.json","url": "http://hammerjs.github.io/","extra": {"_hammerjs_hammerjs": "_hammerjs_hammerjs.json"}},"handlebars": {"main": "handlebars.json","url": "http://handlebarsjs.com/","extra": {"_handlebars_handlebars": "_handlebars_handlebars.json"}},"hasher": {"main": "hasher.json"},"hashids": {"main": "hashids.json"},"hashmap": {"main": "hashmap.json","extra": {"_hashmap_hashmap": "_hashmap_hashmap.json"}},"hashset": {"main": "hashset.json","url": "http://www.timdown.co.uk/jshashtable/jshashset.html"},"hashtable": {"main": "hashtable.json","url": "http://www.timdown.co.uk/jshashtable/"},"he": {"main": "he.json"},"heap": {"main": "heap.json"},"heatmap.js": {"main": "heatmap.js.json"},"hellojs": {"main": "hellojs.json","url": "http://adodson.com/hello.js/"},"highland": {"main": "highland.json","url": "http://highlandjs.org/"},"history": {"main": "history.json"},"howlerjs": {"main": "howlerjs.json"},"html-to-text": {"main": "html-to-text.json"},"html2canvas": {"main": "html2canvas.json"},"htmlparser2": {"main": "htmlparser2.json"},"http-status": {"main": "http-status.json"},"http-string-parser": {"main": "http-string-parser.json"},"humane": {"main": "humane.json","url": "http://wavded.github.com/humane-js/"},"hypertext-application-language": {"main": "hypertext-application-language.json"},"i18n-node": {"main": "i18n-node.json"},"i18next": {"main": "i18next.json","url": "http://i18next.com"},"iban": {"main": "iban.json"},"icheck": {"main": "icheck.json","url": "http://damirfoy.com/iCheck/"},"imgur-rest-api": {"main": "imgur-rest-api.json"},"impress": {"main": "impress.json"},"incremental-dom": {"main": "incremental-dom.json"},"inflection": {"main": "inflection.json"},"ini": {"main": "ini.json"},"iniparser": {"main": "iniparser.json"},"interactjs": {"main": "interactjs.json"},"intercomjs": {"main": "intercomjs.json"},"intro.js": {"main": "intro.js.json"},"inversify": {"main": "inversify.json"},"ion.rangeSlider": {"main": "ion.rangeSlider.json","extra": {"_ion.rangeSlider_ion.rangeSlider": "_ion.rangeSlider_ion.rangeSlider.json"}},"ionic": {"main": "ionic.json","url": "http://ionicframework.com"},"ip": {"main": "ip.json"},"is_js": {"main": "is_js.json","url": "http://arasatasaygin.github.io/is.js/"},"iscroll": {"main": "iscroll.json","url": "http://cubiq.org/iscroll-4","extra": {"_iscroll_iscroll-5": "_iscroll_iscroll-5.json","_iscroll_iscroll-lite": "_iscroll_iscroll-lite.json","_iscroll_iscroll": "_iscroll_iscroll.json"}},"ix.js": {"main": "ix.js.json","extra": {"_ix.js_l2o": "_ix.js_l2o.json"}},"jake": {"main": "jake.json"},"jasmine-ajax": {"main": "jasmine-ajax.json"},"jasmine-es6-promise-matchers": {"main": "jasmine-es6-promise-matchers.json"},"jasmine-expect": {"main": "jasmine-expect.json"},"jasmine-fixture": {"main": "jasmine-fixture.json"},"jasmine-jquery": {"main": "jasmine-jquery.json"},"jasmine-matchers": {"main": "jasmine-matchers.json"},"jasmine-promise-matchers": {"main": "jasmine-promise-matchers.json"},"jasmine": {"main": "jasmine.json","url": "http://jasmine.github.io/"},"java-applet": {"main": "java-applet.json"},"java": {"main": "java.json"},"jbinary": {"main": "jbinary.json"},"jdataview": {"main": "jdataview.json"},"jee-jsf": {"main": "jee-jsf.json"},"jest": {"main": "jest.json","url": "http://facebook.github.io/jest/"},"joData": {"main": "joData.json"},"johnny-five": {"main": "johnny-five.json"},"joi": {"main": "joi.json"},"jointjs": {"main": "jointjs.json","url": "http://www.jointjs.com/"},"jqgrid": {"main": "jqgrid.json"},"jqrangeslider": {"main": "jqrangeslider.json","url": "http://ghusse.github.com/jQRangeSlider"},"jquery-ajax-chain": {"main": "jquery-ajax-chain.json"},"jquery-fullscreen": {"main": "jquery-fullscreen.json"},"jquery-galleria": {"main": "jquery-galleria.json"},"jquery-handsontable": {"main": "jquery-handsontable.json","url": "http://handsontable.com"},"jquery-jsonrpcclient": {"main": "jquery-jsonrpcclient.json"},"jquery-knob": {"main": "jquery-knob.json","url": "http://anthonyterrien.com/knob/"},"jquery-timeentry": {"main": "jquery-timeentry.json"},"jquery.address": {"main": "jquery.address.json"},"jquery.are-you-sure": {"main": "jquery.are-you-sure.json"},"jquery.autosize": {"main": "jquery.autosize.json","url": "http://www.jacklmoore.com/autosize/"},"jquery.base64": {"main": "jquery.base64.json"},"jquery.bbq": {"main": "jquery.bbq.json","url": "http://benalman.com/projects/jquery-bbq-plugin/"},"jquery.blockUI": {"main": "jquery.blockUI.json","url": "http://malsup.com/jquery/block/"},"jquery.bootstrap.wizard": {"main": "jquery.bootstrap.wizard.json"},"jquery.cleditor": {"main": "jquery.cleditor.json","url": "http://premiumsoftware.net/CLEditor"},"jquery.clientSideLogging": {"main": "jquery.clientSideLogging.json"},"jquery.color": {"main": "jquery.color.json"},"jquery.colorbox": {"main": "jquery.colorbox.json","url": "http://www.jacklmoore.com/colorbox/"},"jquery.contextMenu": {"main": "jquery.contextMenu.json","url": "http://medialize.github.com/jQuery-contextMenu/"},"jquery.cookie": {"main": "jquery.cookie.json"},"jquery.customSelect": {"main": "jquery.customSelect.json","url": "http://adam.co/lab/jquery/customselect//"},"jquery.cycle": {"main": "jquery.cycle.json","url": "http://jquery.malsup.com/cycle/"},"jquery.cycle2": {"main": "jquery.cycle2.json","url": "http://jquery.malsup.com/cycle2/"},"jquery.dataTables": {"main": "jquery.dataTables.json","url": "http://www.datatables.net"},"jquery.dropotron": {"main": "jquery.dropotron.json"},"jquery.dynatree": {"main": "jquery.dynatree.json","url": "http://code.google.com/p/dynatree/"},"jquery.elang": {"main": "jquery.elang.json"},"jquery.fancytree": {"main": "jquery.fancytree.json"},"jquery.fileupload": {"main": "jquery.fileupload.json"},"jquery.finger": {"main": "jquery.finger.json","url": "http://ngryman.sh/jquery.finger/"},"jquery.form": {"main": "jquery.form.json","url": "http://malsup.com/jquery/form/"},"jquery.fullscreen": {"main": "jquery.fullscreen.json"},"jquery.gridster": {"main": "jquery.gridster.json"},"jquery.jnotify": {"main": "jquery.jnotify.json","url": "http://jnotify.codeplex.com"},"jquery.joyride": {"main": "jquery.joyride.json"},"jquery": {"main": "jquery.json","url": "http://jquery.com/"},"jquery.leanModal": {"main": "jquery.leanModal.json","url": "http://leanmodal.finelysliced.com.au/"},"jquery.livestampjs": {"main": "jquery.livestampjs.json","url": "http://mattbradley.github.com/livestampjs/"},"jquery.menuaim": {"main": "jquery.menuaim.json"},"jquery.mmenu": {"main": "jquery.mmenu.json","url": "http://mmenu.frebsite.nl/"},"jquery.notifyBar": {"main": "jquery.notifyBar.json","url": "http://www.whoop.ee/posts/2013-04-05-the-resurrection-of-jquery-notify-bar/"},"jquery.noty": {"main": "jquery.noty.json","url": "http://needim.github.io/noty/"},"jquery.payment": {"main": "jquery.payment.json"},"jquery.pjax.falsandtru": {"main": "jquery.pjax.falsandtru.json"},"jquery.pnotify": {"main": "jquery.pnotify.json"},"jquery.postMessage": {"main": "jquery.postMessage.json","url": "http://benalman.com/projects/jquery-postmessage-plugin/"},"jquery.prettyphoto": {"main": "jquery.prettyphoto.json"},"jquery.rowGrid": {"main": "jquery.rowGrid.json"},"jquery.scrollTo": {"main": "jquery.scrollTo.json"},"jquery.simplePagination": {"main": "jquery.simplePagination.json"},"jquery.simplemodal": {"main": "jquery.simplemodal.json","url": "http://www.ericmmartin.com/projects/simplemodal/"},"jquery.slimScroll": {"main": "jquery.slimScroll.json"},"jquery.soap": {"main": "jquery.soap.json"},"jquery.tagsmanager": {"main": "jquery.tagsmanager.json","url": "http://welldonethings.com/tags/manager"},"jquery.timeago": {"main": "jquery.timeago.json","url": "http://timeago.yarp.com/"},"jquery.timer": {"main": "jquery.timer.json"},"jquery.tinycarousel": {"main": "jquery.tinycarousel.json","url": "http://baijs.nl/tinycarousel/"},"jquery.tinyscrollbar": {"main": "jquery.tinyscrollbar.json","url": "http://baijs.nl/tinyscrollbar/"},"jquery.tipsy": {"main": "jquery.tipsy.json","url": "http://onehackoranother.com/projects/jquery/tipsy/"},"jquery.tooltipster": {"main": "jquery.tooltipster.json"},"jquery.total-storage": {"main": "jquery.total-storage.json"},"jquery.transit": {"main": "jquery.transit.json","url": "http://ricostacruz.com/jquery.transit/"},"jquery.ui.datetimepicker": {"main": "jquery.ui.datetimepicker.json","url": "http://trentrichardson.com/examples/timepicker/"},"jquery.ui.layout": {"main": "jquery.ui.layout.json","url": "http://layout.jquery-dev.net/"},"jquery.uniform": {"main": "jquery.uniform.json"},"jquery.watermark": {"main": "jquery.watermark.json","url": "http://jquery-watermark.googlecode.com"},"jquery.window": {"main": "jquery.window.json","url": "http://fstoke.me/jquery/window/"},"jquerymobile": {"main": "jquerymobile.json","url": "http://jquerymobile.com/"},"js-cookie": {"main": "js-cookie.json"},"js-data-angular": {"main": "js-data-angular.json"},"js-fixtures": {"main": "js-fixtures.json"},"js-git": {"main": "js-git.json"},"js-md5": {"main": "js-md5.json"},"js-signals": {"main": "js-signals.json","url": "http://millermedeiros.github.io/js-signals/"},"js-yaml": {"main": "js-yaml.json"},"jsbn": {"main": "jsbn.json","url": "http://www-cs-students.stanford.edu/%7Etjw/jsbn/"},"jscrollpane": {"main": "jscrollpane.json","url": "http://jscrollpane.kelvinluck.com/"},"jsdeferred": {"main": "jsdeferred.json"},"jsfl": {"main": "jsfl.json","extra": {"_jsfl_xJSFL": "_jsfl_xJSFL.json"}},"jsnlog": {"main": "jsnlog.json"},"jsoneditoronline": {"main": "jsoneditoronline.json"},"jsonwebtoken": {"main": "jsonwebtoken.json"},"jsplumb": {"main": "jsplumb.json"},"jsrender": {"main": "jsrender.json","url": "http://www.jsviews.com/#jsrender"},"jssha": {"main": "jssha.json","extra": {"_jssha_jssha": "_jssha_jssha.json"}},"jstorage": {"main": "jstorage.json","url": "http://www.jstorage.info/"},"jstree": {"main": "jstree.json","url": "http://www.jstree.com/"},"jsts": {"main": "jsts.json"},"jszip": {"main": "jszip.json","url": "http://stuk.github.com/jszip/"},"jwplayer": {"main": "jwplayer.json","url": "http://developer.longtailvideo.com/trac/"},"jwt-decode": {"main": "jwt-decode.json"},"jwt-simple": {"main": "jwt-simple.json"},"kafka-node": {"main": "kafka-node.json"},"katex": {"main": "katex.json","url": "http://khan.github.io/KaTeX/"},"keyboardjs": {"main": "keyboardjs.json"},"keymaster": {"main": "keymaster.json"},"keypress": {"main": "keypress.json"},"keytar": {"main": "keytar.json","url": "http://atom.github.io/node-keytar/"},"kineticjs": {"main": "kineticjs.json","url": "http://kineticjs.com/"},"knockback": {"main": "knockback.json","url": "http://kmalakoff.github.io/knockback/"},"knockout-paging": {"main": "knockout-paging.json"},"knockout-pre-rendered": {"main": "knockout-pre-rendered.json"},"knockout-secure-binding": {"main": "knockout-secure-binding.json"},"knockout-transformations": {"main": "knockout-transformations.json"},"knockout.amd.helpers": {"main": "knockout.amd.helpers.json"},"knockout.deferred.updates": {"main": "knockout.deferred.updates.json"},"knockout.editables": {"main": "knockout.editables.json"},"knockout.es5": {"main": "knockout.es5.json"},"knockout.kogrid": {"main": "knockout.kogrid.json"},"knockout.mapper": {"main": "knockout.mapper.json"},"knockout.mapping": {"main": "knockout.mapping.json"},"knockout.postbox": {"main": "knockout.postbox.json"},"knockout.projections": {"main": "knockout.projections.json"},"knockout.punches": {"main": "knockout.punches.json"},"knockout.rx": {"main": "knockout.rx.json"},"knockout.validation": {"main": "knockout.validation.json"},"knockout.viewmodel": {"main": "knockout.viewmodel.json","url": "http://coderenaissance.github.com/knockout.viewmodel/"},"knockstrap": {"main": "knockstrap.json","url": "http://faulknercs.github.io/Knockstrap/"},"ko.plus": {"main": "ko.plus.json"},"kolite": {"main": "kolite.json"},"kuromoji": {"main": "kuromoji.json"},"ladda": {"main": "ladda.json"},"later": {"main": "later.json","url": "http://bunkat.github.io/later/"},"lazy.js": {"main": "lazy.js.json"},"leaflet-editable": {"main": "leaflet-editable.json"},"leaflet-label": {"main": "leaflet-label.json"},"leapmotionTS": {"main": "leapmotionTS.json"},"level-sublevel": {"main": "level-sublevel.json"},"levelup": {"main": "levelup.json"},"line-reader": {"main": "line-reader.json"},"linq": {"main": "linq.json","url": "http://linqjs.codeplex.com/","extra": {"_linq_linq.jquery": "_linq_linq.jquery.json","_linq_linq": "_linq_linq.json"}},"lockfile": {"main": "lockfile.json"},"logg": {"main": "logg.json"},"loggly": {"main": "loggly.json"},"lolex": {"main": "lolex.json"},"long": {"main": "long.json"},"lory.js": {"main": "lory.js.json"},"lscache": {"main": "lscache.json"},"lunr": {"main": "lunr.json"},"lz-string": {"main": "lz-string.json"},"mCustomScrollbar": {"main": "mCustomScrollbar.json"},"magicsuggest": {"main": "magicsuggest.json","url": "http://nicolasbize.com/magicsuggest"},"mailcheck": {"main": "mailcheck.json"},"mandrill-api": {"main": "mandrill-api.json","url": "http://mandrill.com/"},"mapsjs": {"main": "mapsjs.json"},"mariasql": {"main": "mariasql.json"},"marked": {"main": "marked.json"},"markerclustererplus": {"main": "markerclustererplus.json","url": "http://github.com/mahnunchik/markerclustererplus"},"maskedinput": {"main": "maskedinput.json","url": "http://digitalbush.com/projects/masked-input-plugin"},"mathjax": {"main": "mathjax.json"},"matter-js": {"main": "matter-js.json"},"mdns": {"main": "mdns.json"},"memory-cache": {"main": "memory-cache.json","url": "http://github.com/ptarjan/node-cache"},"meshblu": {"main": "meshblu.json"},"messenger": {"main": "messenger.json"},"meteor": {"main": "meteor.json","url": "http://www.meteor.com/"},"metismenu": {"main": "metismenu.json","url": "http://github.com/onokumus/metisMenu"},"microsoft-ajax": {"main": "microsoft-ajax.json"},"milliseconds": {"main": "milliseconds.json","url": "http://npmjs.com/milliseconds"},"mime": {"main": "mime.json"},"minilog": {"main": "minilog.json"},"mixpanel": {"main": "mixpanel.json"},"mixto": {"main": "mixto.json"},"mobile-detect": {"main": "mobile-detect.json","url": "http://hgoebl.github.io/mobile-detect.js/"},"mocha-phantomjs": {"main": "mocha-phantomjs.json","url": "http://metaskills.net/mocha-phantomjs/"},"mocha": {"main": "mocha.json","url": "http://mochajs.org/","extra": {"_mocha_mocha": "_mocha_mocha.json"}},"mockery": {"main": "mockery.json"},"moment-range": {"main": "moment-range.json"},"moment-timezone": {"main": "moment-timezone.json","url": "http://momentjs.com/timezone/"},"mongodb": {"main": "mongodb.json"},"moviedb": {"main": "moviedb.json"},"msgpack": {"main": "msgpack.json"},"mu2": {"main": "mu2.json","url": "http://github.com/raycmorgan/mu"},"mustache": {"main": "mustache.json","extra": {"_mustache_mustache": "_mustache_mustache.json"}},"nconf": {"main": "nconf.json"},"ncp": {"main": "ncp.json"},"nedb": {"main": "nedb.json"},"needle": {"main": "needle.json"},"netmask": {"main": "netmask.json"},"ng-command": {"main": "ng-command.json"},"ng-cordova": {"main": "ng-cordova.json","extra": {"_ng-cordova_app-version": "_ng-cordova_app-version.json","_ng-cordova_appAvailability": "_ng-cordova_appAvailability.json","_ng-cordova_badge": "_ng-cordova_badge.json","_ng-cordova_camera": "_ng-cordova_camera.json","_ng-cordova_datepicker": "_ng-cordova_datepicker.json","_ng-cordova_device": "_ng-cordova_device.json","_ng-cordova_deviceMotion": "_ng-cordova_deviceMotion.json","_ng-cordova_deviceOrientation": "_ng-cordova_deviceOrientation.json","_ng-cordova_dialogs": "_ng-cordova_dialogs.json","_ng-cordova_emailComposer": "_ng-cordova_emailComposer.json","_ng-cordova_file": "_ng-cordova_file.json","_ng-cordova_fileTransfer": "_ng-cordova_fileTransfer.json","_ng-cordova_geolocation": "_ng-cordova_geolocation.json","_ng-cordova_network": "_ng-cordova_network.json","_ng-cordova_toast": "_ng-cordova_toast.json"}},"ng-grid": {"main": "ng-grid.json","url": "http://angular-ui.github.io/ng-grid/"},"ng-notify": {"main": "ng-notify.json"},"ng-stomp": {"main": "ng-stomp.json"},"ngbootbox": {"main": "ngbootbox.json"},"ngprogress": {"main": "ngprogress.json","url": "http://victorbjelkholm.github.io/ngProgress/"},"ngwysiwyg": {"main": "ngwysiwyg.json"},"noVNC": {"main": "noVNC.json"},"node-array-ext": {"main": "node-array-ext.json"},"node-dir": {"main": "node-dir.json"},"node-ffi": {"main": "node-ffi.json"},"node-fibers": {"main": "node-fibers.json"},"node-form": {"main": "node-form.json"},"node-gcm": {"main": "node-gcm.json"},"node-git": {"main": "node-git.json"},"node-jsfl-runner": {"main": "node-jsfl-runner.json"},"node-mysql-wrapper": {"main": "node-mysql-wrapper.json"},"node-sass": {"main": "node-sass.json"},"node-webkit": {"main": "node-webkit.json"},"node_zeromq": {"main": "node_zeromq.json"},"nodemailer": {"main": "nodemailer.json"},"nomnom": {"main": "nomnom.json"},"notify": {"main": "notify.json"},"notifyjs": {"main": "notifyjs.json"},"npm": {"main": "npm.json"},"nprogress": {"main": "nprogress.json"},"numbro": {"main": "numbro.json"},"numeraljs": {"main": "numeraljs.json"},"obelisk.js": {"main": "obelisk.js.json"},"oblo-util": {"main": "oblo-util.json"},"oboe": {"main": "oboe.json"},"offline-js": {"main": "offline-js.json"},"onsenui": {"main": "onsenui.json","url": "http://onsen.io"},"openlayers": {"main": "openlayers.json","url": "http://openlayers.org/"},"owlcarousel": {"main": "owlcarousel.json"},"p2": {"main": "p2.json"},"page": {"main": "page.json","url": "http://visionmedia.github.io/page.js/"},"pako": {"main": "pako.json"},"parallel": {"main": "parallel.json","url": "http://adambom.github.io/parallel.js/"},"pdf": {"main": "pdf.json"},"peerjs": {"main": "peerjs.json","url": "http://peerjs.com/"},"persona": {"main": "persona.json","url": "http://www.mozilla.org/en-US/persona"},"pgwmodal": {"main": "pgwmodal.json","url": "http://pgwjs.com/pgwmodal/"},"phantom": {"main": "phantom.json"},"phantomjs": {"main": "phantomjs.json"},"phonegap": {"main": "phonegap.json","url": "http://phonegap.com"},"photonui": {"main": "photonui.json"},"physijs": {"main": "physijs.json","url": "http://chandlerprall.github.io/Physijs/"},"pikaday": {"main": "pikaday.json"},"pinkyswear": {"main": "pinkyswear.json"},"platform": {"main": "platform.json"},"pleasejs": {"main": "pleasejs.json"},"pluralize": {"main": "pluralize.json"},"podcast": {"main": "podcast.json","url": "http://github.com/maxnowack/node-podcast"},"poly2tri": {"main": "poly2tri.json","url": "http://github.com/r3mi/poly2tri.js/"},"polyline": {"main": "polyline.json"},"popcorn": {"main": "popcorn.json"},"postal": {"main": "postal.json"},"pouchDB": {"main": "pouchDB.json"},"power-assert-formatter": {"main": "power-assert-formatter.json"},"precond": {"main": "precond.json"},"preloadjs": {"main": "preloadjs.json","url": "http://www.createjs.com/#!/PreloadJS"},"progressjs": {"main": "progressjs.json"},"promise-pool": {"main": "promise-pool.json"},"promises-a-plus": {"main": "promises-a-plus.json","url": "http://promisesaplus.com/"},"protobufjs": {"main": "protobufjs.json"},"protractor-http-mock": {"main": "protractor-http-mock.json"},"proxyquire": {"main": "proxyquire.json"},"pubsubjs": {"main": "pubsubjs.json"},"purl": {"main": "purl.json","extra": {"_purl_purl": "_purl_purl.json"}},"q-io": {"main": "q-io.json"},"q-retry": {"main": "q-retry.json"},"q": {"main": "q.json"},"qajax": {"main": "qajax.json"},"qs": {"main": "qs.json"},"query-string": {"main": "query-string.json"},"quixote": {"main": "quixote.json","url": "http://quixote-css.com/"},"qunit": {"main": "qunit.json","url": "http://qunitjs.com/"},"qwest": {"main": "qwest.json"},"radius": {"main": "radius.json"},"raphael": {"main": "raphael.json","url": "http://raphaeljs.com"},"rappid": {"main": "rappid.json","url": "http://jointjs.com/about-rappid"},"ravenjs": {"main": "ravenjs.json"},"raygun4js": {"main": "raygun4js.json"},"react-input-calendar": {"main": "react-input-calendar.json"},"react-swf": {"main": "react-swf.json"},"recaptcha": {"main": "recaptcha.json"},"redis": {"main": "redis.json"},"redux-action-utils": {"main": "redux-action-utils.json"},"redux-logger": {"main": "redux-logger.json"},"redux": {"main": "redux.json"},"ref": {"main": "ref.json"},"request-ip": {"main": "request-ip.json"},"requirejs": {"main": "requirejs.json"},"resemblejs": {"main": "resemblejs.json","url": "http://huddle.github.io/Resemble.js/"},"restangular": {"main": "restangular.json"},"restful.js": {"main": "restful.js.json"},"rethinkdb": {"main": "rethinkdb.json","url": "http://rethinkdb.com/"},"reveal": {"main": "reveal.json"},"revision.txt": {"main": "revision.txt"},"riotcontrol": {"main": "riotcontrol.json"},"rivets": {"main": "rivets.json","url": "http://rivetsjs.com/"},"rosie": {"main": "rosie.json"},"route-recognizer": {"main": "route-recognizer.json"},"routie": {"main": "routie.json"},"royalslider": {"main": "royalslider.json","url": "http://dimsemenov.com/plugins/royal-slider/documentation/"},"rtree": {"main": "rtree.json"},"rx-jquery": {"main": "rx-jquery.json"},"s3-uploader": {"main": "s3-uploader.json"},"sammyjs": {"main": "sammyjs.json","url": "http://sammyjs.org/"},"sanitizer": {"main": "sanitizer.json"},"screenfull": {"main": "screenfull.json"},"scroller": {"main": "scroller.json","extra": {"_scroller_scroller": "_scroller_scroller.json"}},"scrypt-async": {"main": "scrypt-async.json"},"selectize": {"main": "selectize.json"},"semver": {"main": "semver.json"},"sendgrid": {"main": "sendgrid.json"},"sharedworker": {"main": "sharedworker.json"},"shortid": {"main": "shortid.json"},"should-promised": {"main": "should-promised.json"},"should": {"main": "should.json"},"showdown": {"main": "showdown.json"},"siesta": {"main": "siesta.json","url": "http://www.bryntum.com/products/siesta/"},"sigmajs": {"main": "sigmajs.json"},"signature_pad": {"main": "signature_pad.json"},"simplebar": {"main": "simplebar.json"},"simplestorage.js": {"main": "simplestorage.js.json"},"sinon": {"main": "sinon.json","url": "http://sinonjs.org/"},"sjcl": {"main": "sjcl.json","url": "http://crypto.stanford.edu/sjcl/"},"ski": {"main": "ski.json"},"skyway": {"main": "skyway.json","url": "http://nttcom.github.io/skyway/"},"slick-carousel": {"main": "slick-carousel.json","url": "http://kenwheeler.github.io/slick/"},"slickgrid": {"main": "slickgrid.json","extra": {"_slickgrid_slick.autotooltips": "_slickgrid_slick.autotooltips.json","_slickgrid_slick.headerbuttons": "_slickgrid_slick.headerbuttons.json","_slickgrid_slick.rowselectionmodel": "_slickgrid_slick.rowselectionmodel.json"}},"smoothie": {"main": "smoothie.json"},"socket.io-client": {"main": "socket.io-client.json","url": "http://socket.io/"},"socket.io": {"main": "socket.io.json","url": "http://socket.io/"},"socketty": {"main": "socketty.json"},"sockjs": {"main": "sockjs.json"},"soundjs": {"main": "soundjs.json","url": "http://www.createjs.com/#!/SoundJS"},"source-map-support": {"main": "source-map-support.json"},"source-map": {"main": "source-map.json"},"space-pen": {"main": "space-pen.json"},"spectrum": {"main": "spectrum.json"},"spin": {"main": "spin.json","url": "http://fgnass.github.com/spin.js/"},"sprintf-js": {"main": "sprintf-js.json"},"sprintf": {"main": "sprintf.json"},"sql.js": {"main": "sql.js.json"},"stack-trace": {"main": "stack-trace.json"},"stacktrace-js": {"main": "stacktrace-js.json"},"state-machine": {"main": "state-machine.json"},"stats": {"main": "stats.json","url": "http://github.com/mrdoob/stats.js"},"status-bar": {"main": "status-bar.json"},"steam": {"main": "steam.json"},"storejs": {"main": "storejs.json"},"streamjs": {"main": "streamjs.json","url": "http://winterbe.github.io/streamjs/"},"string_score": {"main": "string_score.json"},"stripe-checkout": {"main": "stripe-checkout.json"},"stripe": {"main": "stripe.json","extra": {"_stripe_stripe": "_stripe_stripe.json"}},"stylus": {"main": "stylus.json"},"succinct": {"main": "succinct.json","url": "http://mikeking.io/succinct/"},"sugar": {"main": "sugar.json","url": "http://sugarjs.com/"},"svg-injector": {"main": "svg-injector.json"},"svg-pan-zoom": {"main": "svg-pan-zoom.json"},"svgjs.draggable": {"main": "svgjs.draggable.json","url": "http://www.svgjs.com/"},"svgjs": {"main": "svgjs.json","url": "http://www.svgjs.com/"},"swag": {"main": "swag.json"},"swfobject": {"main": "swfobject.json"},"swiftclick": {"main": "swiftclick.json"},"swig": {"main": "swig.json","url": "http://github.com/paularmstrong/swig"},"swipe": {"main": "swipe.json"},"swiper": {"main": "swiper.json"},"swipeview": {"main": "swipeview.json","url": "http://cubiq.org/swipeview"},"swiz": {"main": "swiz.json"},"systemjs": {"main": "systemjs.json"},"tabris": {"main": "tabris.json","url": "http://tabrisjs.com"},"tabtab": {"main": "tabtab.json"},"tcomb": {"main": "tcomb.json","url": "http://gcanti.github.io/tcomb/guide/index.html"},"teechart": {"main": "teechart.json","url": "http://www.steema.com"},"temp-fs": {"main": "temp-fs.json"},"tether-shepherd": {"main": "tether-shepherd.json","url": "http://github.hubspot.com/shepherd/"},"tether": {"main": "tether.json","url": "http://github.hubspot.com/tether/"},"text-buffer": {"main": "text-buffer.json"},"text-encoding": {"main": "text-encoding.json"},"threejs": {"main": "threejs.json","extra": {"_threejs_three-FirstPersonControls": "_threejs_three-FirstPersonControls.json","_threejs_three-canvasrenderer": "_threejs_three-canvasrenderer.json","_threejs_three-css3drenderer": "_threejs_three-css3drenderer.json","_threejs_three-editorcontrols": "_threejs_three-editorcontrols.json","_threejs_three-effectcomposer": "_threejs_three-effectcomposer.json","_threejs_three-maskpass": "_threejs_three-maskpass.json","_threejs_three-orbitcontrols": "_threejs_three-orbitcontrols.json","_threejs_three-projector": "_threejs_three-projector.json","_threejs_three-renderpass": "_threejs_three-renderpass.json","_threejs_three-shaderpass": "_threejs_three-shaderpass.json","_threejs_three-trackballcontrols": "_threejs_three-trackballcontrols.json","_threejs_three-transformcontrols": "_threejs_three-transformcontrols.json","_threejs_three-vrcontrols": "_threejs_three-vrcontrols.json","_threejs_three-vreffect": "_threejs_three-vreffect.json"}},"thrift": {"main": "thrift.json"},"timelinejs": {"main": "timelinejs.json"},"timezone-js": {"main": "timezone-js.json"},"tinycolor": {"main": "tinycolor.json"},"titanium": {"main": "titanium.json","url": "http://www.appcelerator.com/"},"toastr": {"main": "toastr.json"},"tooltipster": {"main": "tooltipster.json"},"traceback": {"main": "traceback.json","url": "http://github.com/iriscouch/traceback"},"traverson": {"main": "traverson.json"},"trunk8": {"main": "trunk8.json"},"tsmonad": {"main": "tsmonad.json"},"tspromise": {"main": "tspromise.json"},"tv4": {"main": "tv4.json"},"tween.js": {"main": "tween.js.json"},"tweenjs": {"main": "tweenjs.json","url": "http://www.createjs.com/#!/TweenJS"},"twig": {"main": "twig.json"},"twitter": {"main": "twitter.json"},"twix": {"main": "twix.json"},"type-check": {"main": "type-check.json"},"type-name": {"main": "type-name.json"},"typescript-deferred": {"main": "typescript-deferred.json"},"ua-parser-js": {"main": "ua-parser-js.json"},"underscore-ko": {"main": "underscore-ko.json"},"underscore": {"main": "underscore.json","url": "http://underscorejs.org/"},"underscore.string": {"main": "underscore.string.json"},"unity-webapi": {"main": "unity-webapi.json"},"universal-analytics": {"main": "universal-analytics.json"},"unorm": {"main": "unorm.json"},"urijs": {"main": "urijs.json"},"url-template": {"main": "url-template.json"},"urlsafe-base64": {"main": "urlsafe-base64.json"},"usage": {"main": "usage.json"},"uuid": {"main": "uuid.json"},"validator": {"main": "validator.json"},"vex-js": {"main": "vex-js.json"},"victor": {"main": "victor.json","url": "http://victorjs.org/"},"videojs": {"main": "videojs.json"},"viewporter": {"main": "viewporter.json"},"vimeo": {"main": "vimeo.json"},"vortex-web-client": {"main": "vortex-web-client.json","url": "http://www.prismtech.com/vortex/vortex-web"},"webaudioapi": {"main": "webaudioapi.json"},"webcl": {"main": "webcl.json"},"webcomponents.js": {"main": "webcomponents.js.json"},"webfontloader": {"main": "webfontloader.json"},"webgl-ext": {"main": "webgl-ext.json","url": "http://webgl.org/"},"webmidi": {"main": "webmidi.json","url": "http://www.w3.org/TR/webmidi/"},"webspeechapi": {"main": "webspeechapi.json"},"websql": {"main": "websql.json","url": "http://www.w3.org/TR/webdatabase/"},"winston": {"main": "winston.json"},"wnumb": {"main": "wnumb.json"},"wolfy87-eventemitter": {"main": "wolfy87-eventemitter.json"},"wrench": {"main": "wrench.json"},"x-editable": {"main": "x-editable.json","url": "http://vitalets.github.io/x-editable/index.html"},"x2js": {"main": "x2js.json"},"xdate": {"main": "xdate.json","url": "http://arshaw.com/xdate/"},"xlsx": {"main": "xlsx.json"},"xpath": {"main": "xpath.json"},"xsockets": {"main": "xsockets.json"},"xss-filters": {"main": "xss-filters.json"},"youtube": {"main": "youtube.json"},"yui": {"main": "yui.json","extra": {"_yui_yui": "_yui_yui.json"}},"z-schema": {"main": "z-schema.json"},"zepto": {"main": "zepto.json","url": "http://zeptojs.com/"},"zeroclipboard": {"main": "zeroclipboard.json"},"zip.js": {"main": "zip.js.json"},"zone.js": {"main": "zone.js.json"},"zynga-scroller": {"main": "zynga-scroller.json","url": "http://zynga.github.com/scroller/"}}}\n')


define("plugins/c9.ide.language.javascript.tern/tern",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0,language.registerLanguageHandler("plugins/c9.ide.language.javascript.tern/worker/tern_worker")


for(var def in builtinDefs)builtinsBroken.some(function(b){return b.test(def)})||registerDef(def,"lib/tern_from_ts/defs/"+builtinDefs[def].main,{
experimental:builtinTrusted.indexOf(def)==-1,url:builtinDefs[def].url})
getPlugins(function(err,plugins){return err?console.error(err):void setPlugins(plugins.concat(defaultPlugins))

}),language.getWorker(function(err,worker){if(err)return console.error(err)
var config=settings.getJson("project/language/tern_defs"),resetConfig=!config
resetConfig&&(config={}),defaultDefs.forEach(function(def){resetConfig&&def.enabled?config[def.name]={
enabled:!0}:def.enabled=config[def.name]&&config[def.name].enabled,def["default"]=!0,defs[def.name]||registerDef(def.name,def.path,def)

})
for(var key in config)config[key].enabled&&defs[key]&&!defs[key]["default"]&&setDefEnabled(key,!0)
settings.setJson("project/language/tern_defs",config),emit.sticky("ready")})}function registerDef(name,def,options){
options=options||{},options.name=name,defs[name]=def,preferenceDefs[name]=options,options.enabled&&setDefEnabled(name,!0,options)

}function setDefEnabled(name,enabled,options){if(!defs[name]&&!defaultPlugins[name])throw new Error("Definition "+name+" not found")


language.getWorker(function(err,worker){return err?console.error(err):void worker.emit("tern_set_def_enabled",{
data:{name:name,def:defs[name],enabled:enabled!==!1,options:options}})})}function setPluginEnabled(plugin,enabled){
plugin.enabled=plugin,getPlugins(function(err,plugins){return err?console.error(err):void setPlugins(plugins.filter(function(p){
return p.name!==plugin}).concat(plugin))})}function setTernServerOptions(ternServerOptions){language.getWorker(function(err,worker){
return err?console.error(err):void worker.emit("tern_set_server_options",{data:ternServerOptions})})}
function getPlugins(callback){language.getWorker(function(err,worker){return err?console.error(err):(worker.on("tern_read_plugins",function tern_read_plugins(e){
var backupPluginStatus
worker.off("tern_read_plugins",tern_read_plugins),backupPluginStatus=JSON.stringify(e.data),callback(null,e.data),
JSON.stringify(e.data)!=backupPluginStatus&&setPlugins(e.data)}),void worker.emit("tern_get_plugins",{
data:null}))})}function setPlugins(plugins){language.getWorker(function(err,worker){return err?console.error(err):void worker.emit("tern_update_plugins",{
data:plugins})})}function setTernRequestOptions(ternRequestOptions){language.getWorker(function(err,worker){
return err?console.error(err):void worker.emit("tern_set_request_options",{data:ternRequestOptions})})

}function getDefs(){return preferenceDefs}var Plugin=imports.Plugin,language=imports.language,settings=imports.settings,builtinDefs=JSON.parse(require("text!lib/tern_from_ts/defs/__list.json")).defs,builtinTrusted=["meteor"],builtinsBroken=[/mocha.*/,/jquery.*/,/[\.-]/],plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),defaultPlugins=options.plugins,defaultDefs=options.defs||[],defs={},preferenceDefs={},loaded=!1


plugin.on("load",load),plugin.on("unload",function(){loaded=!1,defs={},preferenceDefs={}}),plugin.freezePublicAPI({
registerDef:registerDef,setDefEnabled:setDefEnabled,setTernServerOptions:setTernServerOptions,getPlugins:getPlugins,
setPlugins:setPlugins,setPluginEnabled:setPluginEnabled,setTernRequestOptions:setTernRequestOptions,getDefs:getDefs
}),register(null,{"language.tern":plugin})}return main.consumes=["Plugin","language","language.tern.architect_resolver","settings"],
main.provides=["language.tern"],main})


define("plugins/c9.ide.language.javascript.infer/jsinfer",[],function(require,exports,module){function main(options,imports,register){
var language=imports.language
language.registerLanguageHandler("plugins/c9.ide.language.javascript.infer/infer_jumptodef"),language.registerLanguageHandler("plugins/c9.ide.language.javascript.infer/infer_completer"),
register(null,{})}return main.consumes=["Plugin","language","language.complete"],main.provides=[],main

})


define("plugins/c9.ide.language/complete_util",[],function(require,exports,module){function retrievePrecedingIdentifier(line,offset,regex){
regex=regex||ID_REGEX
for(var buf=[],i=offset-1;i>=0&&line&&regex.test(line[i]);i--)buf.push(line[i])
return buf.reverse().join("")}function retrieveFollowingIdentifier(line,offset,regex){regex=regex||ID_REGEX


for(var buf=[],i=offset;line&&i<line.length&&regex.test(line[i]);i++)buf.push(line[i])
return buf.join("")}function prefixBinarySearch(items,prefix){for(var startIndex=0,stopIndex=items.length-1,middle=Math.floor((stopIndex+startIndex)/2);stopIndex>startIndex&&middle>=0&&0!==items[middle].indexOf(prefix);)prefix<items[middle]?stopIndex=middle-1:prefix>items[middle]&&(startIndex=middle+1),
middle=Math.floor((stopIndex+startIndex)/2)
for(;middle>0&&0===items[middle-1].indexOf(prefix);)middle--
return middle>=0?middle:0}function findCompletions(prefix,allIdentifiers){allIdentifiers.sort()
for(var startIdx=prefixBinarySearch(allIdentifiers,prefix),matches=[],i=startIdx;i<allIdentifiers.length&&0===allIdentifiers[i].indexOf(prefix);i++)matches.push(allIdentifiers[i])


return matches}function fetchTextSync(path){var xhr=new XMLHttpRequest
xhr.open("GET",staticPrefix+"/"+path,!1)
try{xhr.send()}catch(e){return!1}return!(200!==xhr.status&&!xhr.responseText)&&xhr.responseText}function fetchText(path,callback){
function done(err,result){callback&&callback(err,result),callback=null,err&&(err.data={path:path},setTimeout(function(){
throw err}))}var xhr=new XMLHttpRequest
try{xhr.open("GET",staticPrefix+"/"+path,!0)}catch(e){return done(e)}xhr.onload=function(e){if(4===xhr.readyState)return 200!==xhr.status&&0!==xhr.status?done(new Error(xhr.statusText)):void done(null,xhr.responseText)

},xhr.onerror=done,xhr.send(null)}function setStaticPrefix(url){staticPrefix=url}function canCompleteForChangedLine(oldLine,newLine,oldPos,newPos,identifierRegex){
if(0!==newLine.indexOf(oldLine.substr(0,oldPos.column)))return!1
for(var i=oldPos.column;i<newPos.column;i++)if(!identifierRegex.test(newLine[i]))return!1
return!0}function precededByIdentifier(line,column,postfix,ace){var id=retrievePrecedingIdentifier(line,column)


return postfix&&(id+=postfix),""!==id&&!(id[0]>="0"&&id[0]<="9")&&(inCompletableCodeContext(line,column,id,ace)||isRequireJSCall(line,column,id,ace))

}function isRequireJSCall(line,column,identifier,ace,noQuote){if(["javascript","jsx"].indexOf(ace.getSession().syntax)===-1)return!1


var id=null==identifier?retrievePrecedingIdentifier(line,column,REQUIRE_ID_REGEX):identifier,LENGTH='require("'.length-(noQuote?1:0),start=column-id.length-LENGTH,substr=line.substr(start,LENGTH)+(noQuote?'"':"")


return start>=0&&substr.match(/require\(["']/)||line.substr(start+1,LENGTH).match(/require\(["']/)}function inCompletableCodeContext(line,column,id,ace){
if(["javascript","jsx"].indexOf(ace.getSession().syntax)===-1)return!0
for(var isJavaScript=!0,inMode=null,i=0;i<column;i++)if('"'!==line[i]||inMode)if('"'===line[i]&&'"'===inMode&&"\\"!==line[i-1])inMode=null
else if("'"!==line[i]||inMode)if("'"===line[i]&&"'"===inMode&&"\\"!==line[i-1])inMode=null
else if("/"===line[i]&&"/"===line[i+1])inMode="//",i++
else if("/"!==line[i]||"*"!==line[i+1]||inMode)"*"===line[i]&&"/"===line[i+1]&&"/*"===inMode?(inMode=null,
i++):"/"===line[i]&&!inMode&&isJavaScript?inMode="/":"/"===line[i]&&"/"===inMode&&"\\"!==line[i-1]&&(inMode=null)
else{if("global"===line.substr(i+2,6))continue
inMode="/*",i++}else inMode="'"
else inMode='"'
return"/"!=inMode}var ID_REGEX=/[a-zA-Z_0-9\$]/,REQUIRE_ID_REGEX=/(?!["'])./,staticPrefix=""
exports.precededByIdentifier=precededByIdentifier,exports.isRequireJSCall=isRequireJSCall,exports.retrievePrecedingIdentifier=retrievePrecedingIdentifier,
exports.retrieveFollowingIdentifier=retrieveFollowingIdentifier,exports.findCompletions=findCompletions,
exports.fetchText=fetchText,exports.fetchTextSync=fetchTextSync,exports.setStaticPrefix=setStaticPrefix,
exports.DEFAULT_ID_REGEX=ID_REGEX,exports.canCompleteForChangedLine=canCompleteForChangedLine})


define("plugins/c9.ide.language.javascript.immediate/immediate",[],function(require,exports,module){function main(options,imports,register){
function onImmediateComplete(immediateWindow,expr,callback){var tab=tabs.findTab(immediateWindow)
if(!(tab&&tab.editor&&tab.editor.ace&&tab.editor.ace.getSession()))return callback()
var context,id,ace=tab.editor.ace,evaluator=ace.getSession().repl.evaluator,isNodeJS="debugger"===tab.editor.getActiveEvaluator(),propMatch=expr.match(/(.*)\.([A-Za-z0-9*$_]*)$/)


propMatch?(context=propMatch[1],id=propMatch[2]):(context=isNodeJS?-1:"window",id=expr.match(/[A-Za-z0-9*$_]*$/)[0]||""),
evaluator.getAllProperties(context,function(err,results){return!err&&results&&results.length?(results=results.slice(),
results=completeUtil.findCompletions(id,results),void callback(results.map(function(m){return{name:m,
replaceText:m,icon:"property",meta:"",priority:m.match(/^_/)?1:2}}))):callback()})}var language=imports.language,tabs=imports.tabManager,completeUtil=require("plugins/c9.ide.language/complete_util")


language.registerLanguageHandler("plugins/c9.ide.language.javascript.immediate/immediate_complete"),language.registerLanguageHandler("plugins/c9.ide.language.javascript.immediate/immediate_complete_static"),
language.once("initWorker",function(e){var worker=e.worker
worker.on("js_immediate_complete",function(e){onImmediateComplete(e.data.immediateWindow,e.data.expr,function(results){
worker.emit("js_immediate_complete_results",{data:{results:results,id:e.data.id}})})})}),register(null,{})

}return main.consumes=["language","tabManager"],main.provides=[],main})


define("plugins/c9.ide.language.javascript/javascript",[],function(require,exports,module){function main(options,imports,register){
var language=imports.language,settings=imports.settings,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),prefs=imports.preferences


plugin.on("load",function(){prefs.add({Project:{"JavaScript Support":{position:1100,"Format Code on Save":{
position:320,type:"checkbox",path:"project/javascript/@formatOnSave"},"Custom Code Formatter":{position:340,
type:"textbox",path:"project/javascript/@formatter",realtime:!0,onchange:function(e){e.value&&settings.set("project/javascript/@use_jsbeautify",!1)

}}}}},plugin),settings.on("read",function(){settings.setDefaults("project/javascript",[["formatOnSave","false"],["formatter",'esformatter -i "$file"']])

}),language.registerLanguageHandler("plugins/c9.ide.language.javascript/parse"),language.registerLanguageHandler("plugins/c9.ide.language.javascript/scope_analyzer"),
language.registerLanguageHandler("plugins/c9.ide.language.javascript/debugger"),language.registerLanguageHandler("plugins/c9.ide.language.javascript/outline"),
language.registerLanguageHandler("plugins/c9.ide.language.javascript/jumptodef")}),plugin.on("unload",function(){}),
register(null,{"language.javascript":plugin})}return main.consumes=["Plugin","language","preferences","settings"],
main.provides=["language.javascript"],main})


define("plugins/c9.ide.language.html/html",[],function(require,exports,module){function main(options,imports,register){
var language=imports.language
language.registerLanguageHandler("plugins/c9.ide.language.html/html_completer"),register(null,{})}return main.consumes=["language"],
main.provides=[],main})


define("plugins/c9.ide.language.css/css",[],function(require,exports,module){function main(options,imports,register){
var language=imports.language
language.registerLanguageHandler("plugins/c9.ide.language.css/css_handler"),register(null,{})}return main.consumes=["language"],
main.provides=[],main})


define("ace/snippets",[],function(require,exports,module){"use strict"
var oop=require("./lib/oop"),EventEmitter=require("./lib/event_emitter").EventEmitter,lang=require("./lib/lang"),Range=require("./range").Range,Anchor=require("./anchor").Anchor,HashHandler=require("./keyboard/hash_handler").HashHandler,Tokenizer=require("./tokenizer").Tokenizer,comparePoints=Range.comparePoints,SnippetManager=function(){
this.snippetMap={},this.snippetNameMap={}};(function(){oop.implement(this,EventEmitter),this.getTokenizer=function(){
function TabstopToken(str,_,stack){return str=str.substr(1),/^\d+$/.test(str)&&!stack.inFormatString?[{
tabstopId:parseInt(str,10)}]:[{text:str}]}function escape(ch){return"(?:[^\\\\"+ch+"]|\\\\.)"}return SnippetManager.$tokenizer=new Tokenizer({
start:[{regex:/:/,onMatch:function(val,state,stack){return stack.length&&stack[0].expectIf?(stack[0].expectIf=!1,
stack[0].elseBranch=stack[0],[stack[0]]):":"}},{regex:/\\./,onMatch:function(val,state,stack){var ch=val[1]


return"}"==ch&&stack.length?val=ch:"`$\\".indexOf(ch)!=-1?val=ch:stack.inFormatString&&("n"==ch?val="\n":"t"==ch?val="\n":"ulULE".indexOf(ch)!=-1&&(val={
changeCase:ch,local:ch>"a"})),[val]}},{regex:/}/,onMatch:function(val,state,stack){return[stack.length?stack.shift():val]

}},{regex:/\$(?:\d+|\w+)/,onMatch:TabstopToken},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(str,state,stack){
var t=TabstopToken(str.substr(1),state,stack)
return stack.unshift(t[0]),t},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{
regex:"\\|"+escape("\\|")+"*\\|",onMatch:function(val,state,stack){stack[0].choices=val.slice(1,-1).split(",")

},next:"start"},{regex:"/("+escape("/")+"+)/(?:("+escape("/")+"*)/)(\\w*):?",onMatch:function(val,state,stack){
var ts=stack[0]
return ts.fmtString=val,val=this.splitRegex.exec(val),ts.guard=val[1],ts.fmt=val[2],ts.flag=val[3],""

},next:"start"},{regex:"`"+escape("`")+"*`",onMatch:function(val,state,stack){return stack[0].code=val.splice(1,-1),
""},next:"start"},{regex:"\\?",onMatch:function(val,state,stack){stack[0]&&(stack[0].expectIf=!0)},next:"start"
},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+escape("/")+"+)/",token:"regex"
},{regex:"",onMatch:function(val,state,stack){stack.inFormatString=!0},next:"start"}]}),SnippetManager.prototype.getTokenizer=function(){
return SnippetManager.$tokenizer},SnippetManager.$tokenizer},this.tokenizeTmSnippet=function(str,startState){
return this.getTokenizer().getLineTokens(str,startState).tokens.map(function(x){return x.value||x})},
this.$getDefaultValue=function(editor,name){if(/^[A-Z]\d+$/.test(name)){var i=name.substr(1)
return(this.variables[name[0]+"__"]||{})[i]}if(/^\d+$/.test(name))return(this.variables.__||{})[name]


if(name=name.replace(/^TM_/,""),editor){var s=editor.session
switch(name){case"CURRENT_WORD":var r=s.getWordRange()
case"SELECTION":case"SELECTED_TEXT":return s.getTextRange(r)
case"CURRENT_LINE":return s.getLine(editor.getCursorPosition().row)
case"PREV_LINE":return s.getLine(editor.getCursorPosition().row-1)
case"LINE_INDEX":return editor.getCursorPosition().column
case"LINE_NUMBER":return editor.getCursorPosition().row+1
case"SOFT_TABS":return s.getUseSoftTabs()?"YES":"NO"
case"TAB_SIZE":return s.getTabSize()
case"FILENAME":case"FILEPATH":return""
case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(editor,varName){return this.variables.hasOwnProperty(varName)?this.variables[varName](editor,varName)||"":this.$getDefaultValue(editor,varName)||""

},this.tmStrFormat=function(str,ch,editor){var flag=ch.flag||"",re=ch.guard
re=new RegExp(re,flag.replace(/[^gi]/,""))
var fmtTokens=this.tokenizeTmSnippet(ch.fmt,"formatString"),_self=this,formatted=str.replace(re,function(){
_self.variables.__=arguments
for(var fmtParts=_self.resolveVariables(fmtTokens,editor),gChangeCase="E",i=0;i<fmtParts.length;i++){
var ch=fmtParts[i]
if("object"==typeof ch)if(fmtParts[i]="",ch.changeCase&&ch.local){var next=fmtParts[i+1]
next&&"string"==typeof next&&("u"==ch.changeCase?fmtParts[i]=next[0].toUpperCase():fmtParts[i]=next[0].toLowerCase(),
fmtParts[i+1]=next.substr(1))}else ch.changeCase&&(gChangeCase=ch.changeCase)
else"U"==gChangeCase?fmtParts[i]=ch.toUpperCase():"L"==gChangeCase&&(fmtParts[i]=ch.toLowerCase())}return fmtParts.join("")

})
return this.variables.__=null,formatted},this.resolveVariables=function(snippet,editor){function gotoNext(ch){
var i1=snippet.indexOf(ch,i+1)
i1!=-1&&(i=i1)}for(var result=[],i=0;i<snippet.length;i++){var ch=snippet[i]
if("string"==typeof ch)result.push(ch)
else{if("object"!=typeof ch)continue
if(ch.skip)gotoNext(ch)
else{if(ch.processed<i)continue
if(ch.text){var value=this.getVariableValue(editor,ch.text)
value&&ch.fmtString&&(value=this.tmStrFormat(value,ch)),ch.processed=i,null==ch.expectIf?value&&(result.push(value),
gotoNext(ch)):value?ch.skip=ch.elseBranch:gotoNext(ch)}else null!=ch.tabstopId?result.push(ch):null!=ch.changeCase&&result.push(ch)

}}}return result},this.insertSnippetForSelection=function(editor,snippetText){function copyValue(val){
for(var copy=[],i=0;i<val.length;i++){var p=val[i]
if("object"==typeof p){if(expanding[p.tabstopId])continue
var j=val.lastIndexOf(p,i-1)
p=copy[j]||{tabstopId:p.tabstopId}}copy[i]=p}return copy}var cursor=editor.getCursorPosition(),line=editor.session.getLine(cursor.row),tabString=editor.session.getTabString(),indentString=line.match(/^\s*/)[0]


cursor.column<indentString.length&&(indentString=indentString.slice(0,cursor.column)),snippetText=snippetText.replace(/\r/g,"")


var tokens=this.tokenizeTmSnippet(snippetText)
tokens=this.resolveVariables(tokens,editor),tokens=tokens.map(function(x){return"\n"==x?x+indentString:"string"==typeof x?x.replace(/\t/g,tabString):x

})
var tabstops=[]
tokens.forEach(function(p,i){if("object"==typeof p){var id=p.tabstopId,ts=tabstops[id]
if(ts||(ts=tabstops[id]=[],ts.index=id,ts.value=""),ts.indexOf(p)===-1){ts.push(p)
var i1=tokens.indexOf(p,i+1)
if(i1!==-1){var value=tokens.slice(i+1,i1),isNested=value.some(function(t){return"object"==typeof t})


isNested&&!ts.value?ts.value=value:!value.length||ts.value&&"string"==typeof ts.value||(ts.value=value.join(""))

}}}}),tabstops.forEach(function(ts){ts.length=0})
for(var expanding={},i=0;i<tokens.length;i++){var p=tokens[i]
if("object"==typeof p){var id=p.tabstopId,i1=tokens.indexOf(p,i+1)
if(expanding[id])expanding[id]===p&&(expanding[id]=null)
else{var ts=tabstops[id],arg="string"==typeof ts.value?[ts.value]:copyValue(ts.value)
arg.unshift(i+1,Math.max(0,i1-i)),arg.push(p),expanding[id]=p,tokens.splice.apply(tokens,arg),ts.indexOf(p)===-1&&ts.push(p)

}}}var row=0,column=0,text=""
tokens.forEach(function(t){if("string"==typeof t){var lines=t.split("\n")
lines.length>1?(column=lines[lines.length-1].length,row+=lines.length-1):column+=t.length,text+=t}else t.start?t.end={
row:row,column:column}:t.start={row:row,column:column}})
var range=editor.getSelectionRange(),end=editor.session.replace(range,text),tabstopManager=new TabstopManager(editor),selectionId=editor.inVirtualSelectionMode&&editor.selection.index


tabstopManager.addTabstops(tabstops,range.start,end,selectionId)},this.insertSnippet=function(editor,snippetText){
var self=this
return editor.inVirtualSelectionMode?self.insertSnippetForSelection(editor,snippetText):(editor.forEachSelection(function(){
self.insertSnippetForSelection(editor,snippetText)},null,{keepOrder:!0}),void(editor.tabstopManager&&editor.tabstopManager.tabNext()))

},this.$getScope=function(editor){var scope=editor.session.$mode.$id||""
if(scope=scope.split("/").pop(),"html"===scope||"php"===scope){"php"!==scope||editor.session.$mode.inlinePhp||(scope="html")


var c=editor.getCursorPosition(),state=editor.session.getState(c.row)
"object"==typeof state&&(state=state[0]),state.substring&&("js-"==state.substring(0,3)?scope="javascript":"css-"==state.substring(0,4)?scope="css":"php-"==state.substring(0,4)&&(scope="php"))

}return scope},this.getActiveScopes=function(editor){var scope=this.$getScope(editor),scopes=[scope],snippetMap=this.snippetMap


return snippetMap[scope]&&snippetMap[scope].includeScopes&&scopes.push.apply(scopes,snippetMap[scope].includeScopes),
scopes.push("_"),scopes},this.expandWithTab=function(editor,options){var self=this,result=editor.forEachSelection(function(){
return self.expandSnippetForSelection(editor,options)},null,{keepOrder:!0})
return result&&editor.tabstopManager&&editor.tabstopManager.tabNext(),result},this.expandSnippetForSelection=function(editor,options){
var snippet,cursor=editor.getCursorPosition(),line=editor.session.getLine(cursor.row),before=line.substring(0,cursor.column),after=line.substr(cursor.column),snippetMap=this.snippetMap


return this.getActiveScopes(editor).some(function(scope){var snippets=snippetMap[scope]
return snippets&&(snippet=this.findMatchingSnippet(snippets,before,after)),!!snippet},this),!!snippet&&(!(!options||!options.dryRun)||(editor.session.doc.removeInLine(cursor.row,cursor.column-snippet.replaceBefore.length,cursor.column+snippet.replaceAfter.length),
this.variables.M__=snippet.matchBefore,this.variables.T__=snippet.matchAfter,this.insertSnippetForSelection(editor,snippet.content),
this.variables.M__=this.variables.T__=null,!0))},this.findMatchingSnippet=function(snippetList,before,after){
for(var i=snippetList.length;i--;){var s=snippetList[i]
if((!s.startRe||s.startRe.test(before))&&(!s.endRe||s.endRe.test(after))&&(s.startRe||s.endRe))return s.matchBefore=s.startRe?s.startRe.exec(before):[""],
s.matchAfter=s.endRe?s.endRe.exec(after):[""],s.replaceBefore=s.triggerRe?s.triggerRe.exec(before)[0]:"",
s.replaceAfter=s.endTriggerRe?s.endTriggerRe.exec(after)[0]:"",s}},this.snippetMap={},this.snippetNameMap={},
this.register=function(snippets,scope){function wrapRegexp(src){return src&&!/^\^?\(.*\)\$?$|^\\b$/.test(src)&&(src="(?:"+src+")"),
src||""}function guardedRegexp(re,guard,opening){return re=wrapRegexp(re),guard=wrapRegexp(guard),opening?(re=guard+re,
re&&"$"!=re[re.length-1]&&(re+="$")):(re+=guard,re&&"^"!=re[0]&&(re="^"+re)),new RegExp(re)}function addSnippet(s){
s.scope||(s.scope=scope||"_"),scope=s.scope,snippetMap[scope]||(snippetMap[scope]=[],snippetNameMap[scope]={})


var map=snippetNameMap[scope]
if(s.name){var old=map[s.name]
old&&self.unregister(old),map[s.name]=s}snippetMap[scope].push(s),s.tabTrigger&&!s.trigger&&(!s.guard&&/^\w/.test(s.tabTrigger)&&(s.guard="\\b"),
s.trigger=lang.escapeRegExp(s.tabTrigger)),(s.trigger||s.guard||s.endTrigger||s.endGuard)&&(s.startRe=guardedRegexp(s.trigger,s.guard,!0),
s.triggerRe=new RegExp(s.trigger,"",(!0)),s.endRe=guardedRegexp(s.endTrigger,s.endGuard,!0),s.endTriggerRe=new RegExp(s.endTrigger,"",(!0)))

}var snippetMap=this.snippetMap,snippetNameMap=this.snippetNameMap,self=this
snippets||(snippets=[]),snippets&&snippets.content?addSnippet(snippets):Array.isArray(snippets)&&snippets.forEach(addSnippet),
this._signal("registerSnippets",{scope:scope})},this.unregister=function(snippets,scope){function removeSnippet(s){
var nameMap=snippetNameMap[s.scope||scope]
if(nameMap&&nameMap[s.name]){delete nameMap[s.name]
var map=snippetMap[s.scope||scope],i=map&&map.indexOf(s)
i>=0&&map.splice(i,1)}}var snippetMap=this.snippetMap,snippetNameMap=this.snippetNameMap
snippets.content?removeSnippet(snippets):Array.isArray(snippets)&&snippets.forEach(removeSnippet)},this.parseSnippetFile=function(str){
str=str.replace(/\r/g,"")
for(var m,list=[],snippet={},re=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;m=re.exec(str);){
if(m[1])try{snippet=JSON.parse(m[1]),list.push(snippet)}catch(e){}if(m[4])snippet.content=m[4].replace(/^\t/gm,""),
list.push(snippet),snippet={}
else{var key=m[2],val=m[3]
if("regex"==key){var guardRe=/\/((?:[^\/\\]|\\.)*)|$/g
snippet.guard=guardRe.exec(val)[1],snippet.trigger=guardRe.exec(val)[1],snippet.endTrigger=guardRe.exec(val)[1],
snippet.endGuard=guardRe.exec(val)[1]}else"snippet"==key?(snippet.tabTrigger=val.match(/^\S*/)[0],snippet.name||(snippet.name=val)):snippet[key]=val

}}return list},this.getSnippetByName=function(name,editor){var snippet,snippetMap=this.snippetNameMap


return this.getActiveScopes(editor).some(function(scope){var snippets=snippetMap[scope]
return snippets&&(snippet=snippets[name]),!!snippet},this),snippet}}).call(SnippetManager.prototype)
var TabstopManager=function(editor){return editor.tabstopManager?editor.tabstopManager:(editor.tabstopManager=this,
this.$onChange=this.onChange.bind(this),this.$onChangeSelection=lang.delayedCall(this.onChangeSelection.bind(this)).schedule,
this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),void this.attach(editor))

};(function(){this.attach=function(editor){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,
this.selectedTabstop=null,this.editor=editor,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),
this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),
this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),
this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),
this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),
this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),
this.editor.tabstopManager=null,this.editor=null},this.onChange=function(delta){var isRemove="r"==delta.action[0],start=delta.start,end=delta.end,startRow=start.row,endRow=end.row,lineDif=endRow-startRow,colDiff=end.column-start.column


if(isRemove&&(lineDif=-lineDif,colDiff=-colDiff),!this.$inChange&&isRemove){var ts=this.selectedTabstop,changedOutside=ts&&!ts.some(function(r){
return comparePoints(r.start,start)<=0&&comparePoints(r.end,end)>=0})
if(changedOutside)return this.detach()}for(var ranges=this.ranges,i=0;i<ranges.length;i++){var r=ranges[i]


r.end.row<start.row||(isRemove&&comparePoints(start,r.start)<0&&comparePoints(end,r.end)>0?(this.removeRange(r),
i--):(r.start.row==startRow&&r.start.column>start.column&&(r.start.column+=colDiff),r.end.row==startRow&&r.end.column>=start.column&&(r.end.column+=colDiff),
r.start.row>=startRow&&(r.start.row+=lineDif),r.end.row>=startRow&&(r.end.row+=lineDif),comparePoints(r.start,r.end)>0&&this.removeRange(r)))

}ranges.length||this.detach()},this.updateLinkedFields=function(){var ts=this.selectedTabstop
if(ts&&ts.hasLinkedRanges){this.$inChange=!0
for(var session=this.editor.session,text=session.getTextRange(ts.firstNonLinked),i=ts.length;i--;){var range=ts[i]


if(range.linked){var fmt=exports.snippetManager.tmStrFormat(text,range.original)
session.replace(range,fmt)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()

},this.onChangeSelection=function(){if(this.editor){for(var lead=this.editor.selection.lead,anchor=this.editor.selection.anchor,isEmpty=this.editor.selection.isEmpty(),i=this.ranges.length;i--;)if(!this.ranges[i].linked){
var containsLead=this.ranges[i].contains(lead.row,lead.column),containsAnchor=isEmpty||this.ranges[i].contains(anchor.row,anchor.column)


if(containsLead&&containsAnchor)return}this.detach()}},this.onChangeSession=function(){this.detach()},
this.tabNext=function(dir){var max=this.tabstops.length,index=this.index+(dir||1)
index=Math.min(Math.max(index,1),max),index==max&&(index=0),this.selectTabstop(index),0===index&&this.detach()

},this.selectTabstop=function(index){this.$openTabstops=null
var ts=this.tabstops[this.index]
if(ts&&this.addTabstopMarkers(ts),this.index=index,ts=this.tabstops[this.index],ts&&ts.length){if(this.selectedTabstop=ts,
this.editor.inVirtualSelectionMode)this.editor.selection.setRange(ts.firstNonLinked)
else{var sel=this.editor.multiSelect
sel.toSingleRange(ts.firstNonLinked.clone())
for(var i=ts.length;i--;)ts.hasLinkedRanges&&ts[i].linked||sel.addRange(ts[i].clone(),!0)
sel.ranges[0]&&sel.addRange(sel.ranges[0].clone())}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)

}},this.addTabstops=function(tabstops,start,end){if(this.$openTabstops||(this.$openTabstops=[]),!tabstops[0]){
var p=Range.fromPoints(end,end)
moveRelative(p.start,start),moveRelative(p.end,start),tabstops[0]=[p],tabstops[0].index=0}var i=this.index,arg=[i+1,0],ranges=this.ranges


tabstops.forEach(function(ts,index){for(var dest=this.$openTabstops[index]||ts,i=ts.length;i--;){var p=ts[i],range=Range.fromPoints(p.start,p.end||p.start)


movePoint(range.start,start),movePoint(range.end,start),range.original=p,range.tabstop=dest,ranges.push(range),
dest!=ts?dest.unshift(range):dest[i]=range,p.fmtString?(range.linked=!0,dest.hasLinkedRanges=!0):dest.firstNonLinked||(dest.firstNonLinked=range)

}dest.firstNonLinked||(dest.hasLinkedRanges=!1),dest===ts&&(arg.push(dest),this.$openTabstops[index]=dest),
this.addTabstopMarkers(dest)},this),arg.length>2&&(this.tabstops.length&&arg.push(arg.splice(2,1)[0]),
this.tabstops.splice.apply(this.tabstops,arg))},this.addTabstopMarkers=function(ts){var session=this.editor.session


ts.forEach(function(range){range.markerId||(range.markerId=session.addMarker(range,"ace_snippet-marker","text"))

})},this.removeTabstopMarkers=function(ts){var session=this.editor.session
ts.forEach(function(range){session.removeMarker(range.markerId),range.markerId=null})},this.removeRange=function(range){
var i=range.tabstop.indexOf(range)
range.tabstop.splice(i,1),i=this.ranges.indexOf(range),this.ranges.splice(i,1),this.editor.session.removeMarker(range.markerId),
range.tabstop.length||(i=this.tabstops.indexOf(range.tabstop),i!=-1&&this.tabstops.splice(i,1),this.tabstops.length||this.detach())

},this.keyboardHandler=new HashHandler,this.keyboardHandler.bindKeys({Tab:function(ed){exports.snippetManager&&exports.snippetManager.expandWithTab(ed)||ed.tabstopManager.tabNext(1)

},"Shift-Tab":function(ed){ed.tabstopManager.tabNext(-1)},Esc:function(ed){ed.tabstopManager.detach()

},Return:function(ed){return!1}})}).call(TabstopManager.prototype)
var changeTracker={}
changeTracker.onChange=Anchor.prototype.onChange,changeTracker.setPosition=function(row,column){this.pos.row=row,
this.pos.column=column},changeTracker.update=function(pos,delta,$insertRight){this.$insertRight=$insertRight,
this.pos=pos,this.onChange(delta)}
var movePoint=function(point,diff){0==point.row&&(point.column+=diff.column),point.row+=diff.row},moveRelative=function(point,start){
point.row==start.row&&(point.column-=start.column),point.row-=start.row}
require("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),
exports.snippetManager=new SnippetManager
var Editor=require("./editor").Editor;(function(){this.insertSnippet=function(content,options){return exports.snippetManager.insertSnippet(this,content,options)

},this.expandSnippet=function(options){return exports.snippetManager.expandWithTab(this,options)}}).call(Editor.prototype)

})


define("plugins/c9.ide.language.generic/snippet_loader",[],function(require,exports,module){var snippetManager=require("ace/snippets").snippetManager,config=require("ace/config")


exports.init=function(worker){function loadSnippetFile(id){if(id&&!snippetManager.files[id]){var snippetFilePath=id.replace(/\/modes?\//,/snippets/)


snippetManager.files[id]={},config.loadModule(snippetFilePath,function(m){m&&(snippetManager.files[id]=m,
m.snippetText&&(m.snippets=snippetManager.parseSnippetFile(m.snippetText)),snippetManager.register(m.snippets,m.scope),
m.includeScopes&&(snippetManager.snippetMap[m.scope].includeScopes=m.includeScopes,m.includeScopes.forEach(function(x){
loadSnippetFile("ace/mode/"+x)})))})}}function sendSnippetsToWorker(e){worker.emit("loadSnippets",{data:{
language:e.scope,snippets:snippetManager.snippetNameMap[e.scope]}})}var loadSnippetsForMode=function(mode){
var id=mode.$id
snippetManager.files||(snippetManager.files={}),loadSnippetFile(id),mode.modes&&mode.modes.forEach(loadSnippetsForMode)

}
worker.on("changeMode",function(e){loadSnippetsForMode(worker.$doc.$mode)}),worker.on("terminate",function(){
snippetManager.off("registerSnippets",sendSnippetsToWorker)}),snippetManager.on("registerSnippets",sendSnippetsToWorker)

}})


define("plugins/c9.ide.language.generic/generic",[],function(require,exports,module){function main(options,imports,register){
var language=imports.language,snippets=require("./snippet_loader")
language.registerLanguageHandler("plugins/c9.ide.language.generic/local_completer"),language.registerLanguageHandler("plugins/c9.ide.language.generic/snippet_completer"),
options.mode_completer&&language.registerLanguageHandler("plugins/c9.ide.language.generic/mode_completer"),
language.registerLanguageHandler("plugins/c9.ide.language.generic/open_files_local_completer"),language.registerLanguageHandler("plugins/c9.ide.language.generic/simple/shell"),
language.registerLanguageHandler("plugins/c9.ide.language.generic/simple/make"),language.once("initWorker",function(e){
snippets.init(e.worker)}),register(null,{})}return main.consumes=["language"],main.provides=[],main})


define("plugins/c9.ide.language.core/syntax_detector",[],function(require,exports,module){function getSyntaxRegions(doc,originalSyntax){
if(!mixedLanguages[originalSyntax])return[{syntax:originalSyntax,sl:0,sc:0,el:doc.getLength()-1,ec:doc.getLine(doc.getLength()-1).length
}]
for(var starter,endLang,tempS,tempM,i,m,cut,lines=doc.getAllLines(),type=mixedLanguages[originalSyntax],defaultSyntax=type["default"]||originalSyntax,starters=Object.keys(type).filter(function(m){
return m.indexOf("-start")===m.length-6}),syntax=defaultSyntax,regions=[{syntax:syntax,sl:0,sc:0}],inLine=0,row=0;row<lines.length;row++){
var line=lines[row]
if(m=null,endLang)m=endLang.exec(line),m?(endLang=null,syntax=defaultSyntax,regions[regions.length-1].el=row,
regions[regions.length-1].ec=m.index+inLine,regions.push({syntax:syntax,sl:row,sc:m.index+inLine}),cut=m.index+m[0].length,
lines[row]=line.substring(cut),inLine+=cut,row--):inLine=0
else{for(i=0;i<starters.length;i++)tempS=starters[i],tempM=type[tempS].exec(line),tempM&&(!m||m.index>tempM.index)&&(m=tempM,
starter=tempS)
m?(syntax=starter.replace("-start",""),scriptTypeTests[syntax]&&!scriptTypeTests[syntax](m[0])&&(syntax=defaultSyntax),
endLang=type[syntax+"-end"],regions[regions.length-1].el=row,regions[regions.length-1].ec=inLine+m.index+m[0].length,
regions.push({syntax:syntax,sl:row,sc:inLine+m.index+m[0].length}),cut=m.index+m[0].length,lines[row]=line.substring(m.index+m[0].length),
row--,inLine+=cut):inLine=0}}return regions[regions.length-1].el=lines.length,regions[regions.length-1].ec=lines[lines.length-1].length,
regions}function getContextSyntaxPart(doc,pos,originalSyntax){if(!mixedLanguages[originalSyntax]){var value,result={
language:originalSyntax,region:getSyntaxRegions(doc,originalSyntax)[0],index:0,getLine:function(l){return doc.getLine(l)

},getLines:function(firstRow,lastRow){return doc.getLines(firstRow,lastRow)},getAllLines:function(){return doc.getAllLines()

},getValue:function(){return value||(value=doc.getValue()),value},getLength:function(){return doc.getLength()

}}
return result.__defineGetter__("value",function(){return console.error("part.value is deprecated: use getValue() instead"),
this.getValue()}),result}for(var regions=getSyntaxRegions(doc,originalSyntax),i=0;i<regions.length;i++){
var region=regions[i]
if(pos.row>region.sl&&pos.row<region.el||pos.row===region.sl&&pos.column>=region.sc&&pos.column<=region.ec)return regionToCodePart(doc,region,i)

}return null}function getContextSyntax(doc,pos,originalSyntax){var part=getContextSyntaxPart(doc,pos,originalSyntax)


return part&&part.language}function regionToCodePart(doc,region,index){var lines=doc.getLines(region.sl,region.el)


lines.length||(console.error("region and document state are not consistent!!!"),lines=[""])
var allLines,value,result={language:region.syntax,region:region,index:index,getLines:function(firstRow,lastRow){
return this.getAllLines().slice(firstRow,lastRow+1)},getLine:function(l){return region.sl===region.el?lines[0].substring(region.sc,region.ec):0===l?lines[0].substring(region.sc):l===lines.length-1?lines[lines.length-1].substring(0,region.ec):lines[l]

},getAllLines:function(){return allLines||(allLines=region.sl===region.el?[lines[0].substring(region.sc,region.ec)]:[lines[0].substring(region.sc)].concat(lines.slice(1,lines.length-1)).concat([lines[lines.length-1].substring(0,region.ec)])),
allLines},getValue:function(){return value||(value=this.getAllLines().join(doc.getNewLineCharacter())),
value},getLength:function(){return region.el-region.sl+1}}
return result.__defineGetter__("value",function(){return console.error("part.value is deprecated: use getValue() instead"),
this.getValue()}),result}function getCodeParts(doc,originalSyntax){var regions=getSyntaxRegions(doc,originalSyntax)


return regions.map(function(region,i){return regionToCodePart(doc,region,i)})}function posToRegion(region,pos){
return"row"in pos?{row:pos.row-region.sl,column:pos.column,path:pos.path}:{sl:pos.sl-region.sl,column:pos.sc,
el:pos.el-region.sl,ec:pos.ec,path:pos.path}}function posFromRegion(region,pos){return"row"in pos?{row:pos.row+region.sl,
column:pos.column,path:pos.path}:{sl:pos.sl+region.sl,sc:pos.sc,el:pos.el+region.sl,ec:pos.ec,path:pos.path
}}var mixedLanguages={php:{"default":"html","php-start":/<\?(?:php|\=)?/,"php-end":/\?>/,"css-start":/<style[^>]*>/,
"css-end":/<\/style>/,"javascript-start":/<script(?:\"[^\"]*\"|'[^']*'|[^'">])*>/,"javascript-end":/<\/script>/
},html:{"css-start":/<style[^>]*>/,"css-end":/<\/style>/,"javascript-start":/<script(?:\"[^\"]*\"|'[^']*'|[^'">])*>/,
"javascript-end":/<\/script>/}}
mixedLanguages.handlebars=mixedLanguages.html
var scriptTypeTests={javascript:function(v){var m=/type\s*=\s*("[^"]+"|'[^']+'|[^\s'">]+)/.exec(v)
return!(m&&!/javascript|ecmascript/i.test(m[1]))}}
exports.getContextSyntax=getContextSyntax,exports.getContextSyntaxPart=getContextSyntaxPart,exports.getSyntaxRegions=getSyntaxRegions,
exports.getCodeParts=getCodeParts,exports.posToRegion=posToRegion,exports.posFromRegion=posFromRegion

})


define("plugins/c9.ide.language/worker_util_helper",[],function(require,exports,module){function main(options,imports,register){
function load(){loaded||(loaded=!0,language.getWorker(function(err,_worker){return err?console.error(err):(worker=_worker,
worker.on("watchDir",watchDir),worker.on("unwatchDir",unwatchDir),watcher.on("unwatch",onWatchRemoved),
watcher.on("directory.all",onWatchChange),worker.on("refreshAllMarkers",language.refreshAllMarkers.bind(language)),
worker.on("execFile",function(e){e.data.options.cwd=e.data.options.cwd||c9.workspaceDir,ensureConnected(proc.execFile.bind(proc,e.data.path,e.data.options),function(err,stdout,stderr){
worker.emit("execFileResult",{data:{id:e.data.id,err:err,stdout:stdout,stderr:stderr}})})}),worker.on("spawn",function(e){
var id=e.data.id
e.data.options.cwd=e.data.options.cwd||c9.workspaceDir,ensureConnected(function(next){proc.spawn(e.data.path,e.data.options,next)

},function(err,child){function kill(e){child.kill(e.signal)}function forwardEvents(source,sourceName,events){
events.forEach(function(event){source.on(event,function(e){worker.emit("spawnEvent$"+id+sourceName+event,{
data:e})})})}return err?worker.emit("spawnResult",{data:{id:id,err:err}}):(forwardEvents(child,"child",["exit","error","close","disconnect","message"]),
forwardEvents(child.stdout,"stdout",["close","data","end","error","readable"]),forwardEvents(child.stderr,"stderr",["close","data","end","error","readable"]),
worker.on("spawn_kill$"+id,kill),child.on("exit",function(){worker.off("spawn_kill$"+id,kill)}),void worker.emit("spawnResult",{
data:{id:id,pid:child.pid}}))})}),worker.on("readFile",function tryIt(e){readTabOrFile(e.data.path,e.data.options,function(err,value){
return err&&"EDISCONNECT"===err.code?ensureConnected(tryIt.bind(null,e)):void worker.emit("readFileResult",{
data:{id:e.data.id,err:err&&JSON.stringify(err),data:value}})})}),worker.on("stat",function(e){ensureConnected(function tryIt(){
fs.stat(e.data.path,function(err,value){return err&&"EDISCONNECT"===err.code?ensureConnected(tryIt):void worker.emit("statResult",{
data:{id:e.data.id,err:err&&JSON.stringify(err),data:value}})})})}),worker.on("showError",function(e){
var token=e.data.info?showInfo(e.data.message,e.data.timeout):showError(e.data.message,e.data.timeout)


worker.emit("showErrorResult",{data:{token:token}})}),worker.on("hideError",function(e){hideError(e.data.token)

}),void worker.on("getTokens",function tryGetTokens(e){function done(err,results){worker.emit("getTokensResult",{
data:{id:e.data.id,err:err,results:results}})}var path=e.data.path,identifiers=e.data.identifiers,region=e.data.region,tab=tabs.findTab(path)


if(!tab||!tab.editor||!tab.editor.ace)return done("Tab is no longer open")
var session=tab.editor.ace.getSession()
if(session.bgTokenizer.running)return setTimeout(tryGetTokens.bind(null,e),20)
for(var results=[],i=0,len=session.getLength();i<len;i++)if(!region||region.sl<=i&&i<=region.el){var offset=0


session.getTokens(i).forEach(function(t){var myOffset=offset
if(offset+=t.value.length,!(identifiers&&identifiers.indexOf(t.value)===-1||region&&region.sl===i&&myOffset<region.sc||region&&region.el===i&&myOffset>region.ec)){
var result={row:i,column:myOffset}
region&&(result=syntaxDetector.posToRegion(region,result)),result.type=t.type,result.value=t.value,results.push(result)

}})}done(null,results)}))}))}function ensureConnected(f,callback,timeout){return timeout=timeout||200,
c9.NETWORK?void f(function(err){return err&&"EDISCONNECT"===err.code?ensureConnected(f,callback,timeout):void callback.apply(null,arguments)

}):c9.once("stateChange",function(e){setTimeout(ensureConnected.bind(null,f,callback,2*timeout),timeout)

})}function readTabOrFile(path,options,callback){function startDownload(){ensureConnected(function(next){
fs.exists(path,function(exists){if(!exists){var err=new Error("Does not exist: "+path)
return err.code="ENOENT",next(err)}fs.readFile(path,options,next)})},function(err,result){if(callback(err,result),
!readFileQueue.length)return readFileBusy=!1
var task=readFileQueue.pop()
task()})}"string"==typeof options&&(options={encoding:options})
var allowUnsaved=options.allowUnsaved
delete options.allowUnsaved
var tab=tabs.findTab(path)
if(tab)if(allowUnsaved){var unsavedValue=tab.value||tab.document&&tab.document.hasValue&&tab.document.hasValue()&&tab.document.value


if(unsavedValue)return callback(null,unsavedValue)}else{var saved="saved"===save.getSavingState(tab),value=saved?tab.value||tab.document&&tab.document.value:tab.document.meta&&"string"==typeof tab.document.meta.$savedValue&&tab.document.meta.$savedValue


if(value)return callback(null,value)}return options.encoding||(options.encoding="utf8"),readFileBusy?readFileQueue.push(startDownload):(readFileBusy=!0,
void startDownload())}function watchDir(e){var path=e.data.path
watcher.watch(path),watched[path]=!0,async.parallel([fs.stat.bind(fs,path),function(callback){fs.readdir(path,function(err,results){
callback(err,results)})}],function(err,results){worker.emit("watchDirResult",{data:{initial:!0,path:path,
err:err&&{message:err.message},stat:results[0],files:results[1]||[]}})})}function unwatchDir(e){var path=e.data.path


watched[path]=!1,tree.getAllExpanded().indexOf(path)>-1||watcher.unwatch(path)}function onWatchRemoved(e){
watched[e.path]&&watchDir({data:{path:e.path}})}function onWatchChange(e){watched[e.path]&&worker.emit("watchDirResult",{
data:e})}var worker,loaded,c9=imports.c9,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),language=imports.language,proc=imports.proc,fs=imports.fs,tabs=imports.tabManager,save=imports.save,watcher=imports.watcher,tree=imports.tree,showError=imports["dialog.error"].show,showInfo=imports["dialog.info"].show,hideError=imports["dialog.error"].hide,async=require("async"),syntaxDetector=require("plugins/c9.ide.language.core/syntax_detector"),readFileQueue=[],readFileBusy=!1,watched={}


plugin.on("load",function(){load()}),plugin.freezePublicAPI({readTabOrFile:readTabOrFile}),register(null,{
"language.worker_util_helper":plugin})}return main.consumes=["Plugin","c9","language","proc","fs","tabManager","save","watcher","tree","dialog.error","dialog.info"],
main.provides=["language.worker_util_helper"],main})


define("plugins/c9.ide.language.core/hover_link",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),event=require("ace/lib/event"),Range=require("ace/range").Range,EventEmitter=require("ace/lib/event_emitter").EventEmitter,HoverLink=function(editor){
editor.hoverLink||(editor.hoverLink=this,this.editor=editor,this.update=this.update.bind(this),this.onMouseMove=this.onMouseMove.bind(this),
this.onMouseOut=this.onMouseOut.bind(this),this.onClick=this.onClick.bind(this),this.onMouseDown=this.onMouseDown.bind(this),
event.addListener(editor.renderer.scroller,"mousemove",this.onMouseMove),event.addListener(editor.renderer.content,"mouseout",this.onMouseOut),
event.addListener(editor.renderer.content,"click",this.onClick),editor.on("mousedown",this.onMouseDown),
this.active=!0)};(function(){oop.implement(this,EventEmitter),this.attach=function(){},this.detach=function(){},
this.token={},this.range=new Range((-1),(-1),(-1),(-1)),this.update=function(){this.$timer=null
var editor=this.editor,renderer=editor.renderer,canvasPos=renderer.scroller.getBoundingClientRect(),offset=(this.x+renderer.scrollLeft-canvasPos.left-renderer.$padding)/renderer.characterWidth,row=Math.floor((this.y+renderer.scrollTop-canvasPos.top)/renderer.lineHeight),col=Math.round(offset),screenPos={
row:row,column:col,side:offset-col>0?1:-1},session=editor.session,docPos=session.screenToDocumentPosition(screenPos.row,screenPos.column),selectionRange=editor.selection.getRange()


if(!selectionRange.isEmpty()&&selectionRange.start.row<=row&&selectionRange.end.row>=row)return this.clear()


var line=editor.session.getLine(docPos.row)
if(docPos.column==line.length){var clippedPos=editor.session.documentToScreenPosition(docPos.row,docPos.column)


if(clippedPos.column!=screenPos.column)return this.clear()}if(!this.isOpen||!this.range.contains(docPos.row,docPos.column)){
var token=this.findLink(docPos.row,docPos.column)
if(this.link=token,!token)return this.clear()
this.isOpen||(this.isOpen=!0),editor.renderer.setCursorStyle("pointer"),session.removeMarker(this.marker),
this.range=this.getRange(token),this._signal("addMarker",{range:this.range}),this.addMarker()}},this.addMarker=function(){
this.marker=this.editor.session.addMarker(this.range,"ace_link_marker","text",!0)},this.removeMarker=function(){
this.editor.session.removeMarker(this.marker)},this.clear=function(){this.isOpen&&(this.removeMarker(),
this.editor.renderer.setCursorStyle(""),this.isOpen=!1)},this.getMatchAround=function(regExp,string,col){
var match
return regExp.lastIndex=0,string.replace(regExp,function(str){var offset=arguments[arguments.length-2],length=str.length


offset<=col&&offset+length>=col&&(match={start:offset,value:str})}),match},this.onClick=function(){this.link&&this.isOpen&&this._signal("open",this.link)

},this.getRange=function(token){var startCol=token.start,row=token.row,startRow=row,endCol=startCol+token.value.length,endRow=row


return new Range(startRow,startCol,endRow,endCol)},this.findLink=function(row,column){var editor=this.editor,session=editor.session,token=session.getTokenAt(row,column)


if(token){var value=token.value,startIndex=token.start
if(!/[\s()\[\]{};]/.test(value)&&!/keyword|operator|comment|string|storage|language|numeric/.test(token.type))return{
value:value,start:startIndex,row:row}}},this.onMouseMove=function(e){return this.isOpen&&this.editor.$mouseHandler.isMousePressed?void(this.editor.selection.isEmpty()||this.clear()):event.getModifierString(e)!=this.$keyModifier?this.clear():void(this.x==e.clientX&&this.y==e.clientY||(this.x=e.clientX,
this.y=e.clientY,this.update()))},this.onMouseDown=function(e){this.isOpen&&event.getModifierString(e.domEvent)==this.$keyModifier&&e.stop()

},this.onMouseOut=this.clear,this.destroy=function(){this.onMouseOut(),event.removeListener(this.editor.renderer.scroller,"mousemove",this.onMouseMove),
event.removeListener(this.editor.renderer.content,"mouseout",this.onMouseOut),delete this.editor.hoverLink

}}).call(HoverLink.prototype),exports.HoverLink=HoverLink})


define("plugins/c9.ide.language.core/jumptodef",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,language.once("initWorker",function(e){worker=e.worker,commands.addCommand({
name:"jumptodef",bindKey:{mac:"F3",win:"F3"},hint:"jump to the definition of the variable or function that is under the cursor",
exec:function(){jumptodef()}},plugin)
var mnuJumpToDef=new ui.item({id:"mnuEditorJumpToDef",caption:"Jump to Definition",command:"jumptodef"
}),mnuJumpToDef2=new ui.item({caption:"Jump to Definition",command:"jumptodef",id:"mnuEditorJumpToDef2"
})
aceHandle.getElement("menu",function(menu){menus.addItemToMenu(menu,mnuJumpToDef2,750,plugin),menu.on("prop.visible",function(e){
e.value&&(mnuJumpToDef2.disable(),checkIsJumpToDefAvailable())})}),menus.addItemByPath("Goto/Jump to Definition",mnuJumpToDef,1450,plugin),
worker.on("definition",function(e){onDefinitions(e)}),worker.on("isJumpToDefinitionAvailableResult",function(ev){
ev.data.value?mnuJumpToDef2.enable():mnuJumpToDef2.disable()
var ace=tabs.focussedTab&&tabs.focussedTab.editor&&tabs.focussedTab.editor.ace
if(ace&&ace.hoverLink&&ace.hoverLink.isOpen){var pos=ev.data.pos
ev.data.value||(ace.hoverLink.range.contains(pos.row,pos.column),ace.hoverLink.removeMarker())}})}),language.on("attachToEditor",function(ace){
var hoverLink=new HoverLink(ace)
hoverLink.on("addMarker",function(e){worker.emit("isJumpToDefinitionAvailable",{data:e.range.start})}),
hoverLink.on("open",function(e,hoverLink){if(hoverLink.isOpen){var cursor=hoverLink.editor.getCursorPosition()


hoverLink.range.contains(cursor.row,cursor.column)||hoverLink.editor.selection.setRange(hoverLink.range),
jumptodef()}})}),settings.on("read",function(){settings.setDefaults("user/language",[["overrideMultiselectShortcuts","true"]]),
updateSettings()}),prefs.add({Language:{Input:{"Use Cmd-Click for Jump to Definition":{type:"checkbox",
path:"user/language/@overrideMultiselectShortcuts",position:6e3}}}},plugin),void settings.on("user/language",updateSettings))

}function updateSettings(){var key=useragent.isMac?"cmd-":"ctrl-"
settings.getBool("user/language/@overrideMultiselectShortcuts")?(MouseHandler.prototype.$enableJumpToDef=!0,
HoverLink.prototype.$keyModifier=key):(MouseHandler.prototype.$enableJumpToDef=!1,HoverLink.prototype.$keyModifier=key+"shift-")

}function addUnknownColumn(ace,pos,name){if(pos.sc)return pos
var document=ace.document||ace.getSession().getDocument()
if(!document)return pos
var line=document.getLine(pos.sl)
if(!line)return pos
if(!name)return pos.sc=line.match(/^(\s*)/).length,pos
var index=line&&line.indexOf(name)
return index<0?pos:(pos.sc=index,pos.el=pos.el||pos.sl,pos.el===pos.sl&&(pos.ec=index+name.length),pos)

}function checkIsJumpToDefAvailable(){var ace=tabs.focussedTab.editor.ace
ace&&worker.emit("isJumpToDefinitionAvailable",{data:ace.getSelection().getCursor()})}function jumptodef(){
if(tabs.focussedTab&&tabs.focussedTab.editor&&tabs.focussedTab.editor.ace){var tab=tabs.focussedTab,ace=tab.editor.ace,sel=ace.getSelection(),pos=sel.getCursor()


if(activateSpinner(tabs.focussedTab),onJumpStart(ace),lastJump&&lastJump.ace===ace&&lastJump.row===pos.row&&lastJump.column===pos.column)return clearSpinners(tab),
void jumpToPos(lastJump.sourcePath,lastJump.sourcePos)
lastJump=null,worker.emit("jumpToDefinition",{data:pos})}}function onDefinitions(e){var tab=tabs.findTab(e.data.path)


if(tab){clearSpinners(tab)
var results=e.data.results,editor=tab.editor
if(!results.length)return onJumpFailure(e,editor.ace)
for(var lastResult,i=results.length-1;i>=0&&(lastResult=results[i],lastResult.isGeneric);i--);var path=lastResult&&lastResult.path||tab.path


jumpToPos(path,lastResult,e.data.path,e.data.pos)}}function jumpToPos(path,pos,sourcePath,sourcePos,callback){
function openTab(nonVFSValue){tabs.open({path:path,active:!0,value:nonVFSValue},function(err,tab){if(!err){
nonVFSValue&&(makeReadonly(tab),tab.document&&(tab.document.meta.closeOnError=!0))
var state=tab.document&&tab.document.getState()
state&&state.ace&&(pos=addUnknownColumn(tab.editor.ace,pos),lastJump=sourcePos&&{ace:tab.editor.ace,row:pos.row,
column:pos.column,path:path,sourcePos:sourcePos,sourcePath:sourcePath},state.ace.jump={row:pos.row,column:pos.column
}),delete state.value,tab.document.setState(state),tabs.focusTab(tab),callback&&callback()}})}if(pos.row=pos.row||0,
pos.column=pos.column||0,"//"===path.substr(0,2))if(1===path.indexOf(c9.workspaceDir+"/"))path=path.substr(c9.workspaceDir.length+1)
else{if(1!==path.indexOf(c9.homeDir+"/"))return proc.execFile("cat",{args:[path.substr(1)]},function(err,result){
return err?showError("Could not open refrenced file: "+path):void openTab(result)})
path="~"+path.substr(c9.homeDir.length+1)}"/"!==path[0]&&"~"!==path[0]&&(path="/"+path),openTab()}function makeReadonly(tab){
tab.editor.ace.setReadOnly(!0),tab.editor.ace.session.on("changeEditor",function(e){e.oldEditor&&e.oldEditor.setReadOnly(!1),
e.editor&&e.editor.setReadOnly(!0)})}function onJumpFailure(event,ace){setTimeout(function(){var cursor=ace.getSelection().getCursor(),oldPos=event.data.pos


if(oldPos.row===cursor.row&&oldPos.column===cursor.column){var line=ace.getSession().getLine(oldPos.row)


if(line){var preceding=util.retrievePrecedingIdentifier(line,cursor.column),column=cursor.column-preceding.length


column===oldPos.column&&(column=line.match(/^(\s*)/).length)
var newPos={row:cursor.row,column:column}
ace.getSelection().setSelectionRange({start:newPos,end:newPos})}}},300)}function onJumpStart(ace){var cursor=ace.getSelection().getCursor(),line=ace.getSession().getDocument().getLine(cursor.row)


if(line){var preceding=util.retrievePrecedingIdentifier(line,cursor.column),column=cursor.column-preceding.length,following=util.retrieveFollowingIdentifier(line,column),startPos={
row:cursor.row,column:column},endPos={row:cursor.row,column:column+following.length}
ace.getSelection().setSelectionRange({start:startPos,end:endPos})}}function activateSpinner(tab){tab.classList.add("loading"),
clearTimeout(tab.$jumpToDefReset),tab.$jumpToDefReset=setTimeout(function(){clearSpinners(tab)},CRASHED_JOB_TIMEOUT)

}function clearSpinners(tab){clearTimeout(tab.$jumpToDefReset),tab.classList.remove("loading")}var worker,loaded,lastJump,Plugin=imports.Plugin,language=imports.language,commands=imports.commands,settings=imports.settings,aceHandle=imports.ace,prefs=imports.preferences,tabs=imports.tabManager,ui=imports.ui,proc=imports.proc,showError=imports["dialog.error"].show,c9=imports.c9,util=require("plugins/c9.ide.language/complete_util"),HoverLink=require("./hover_link").HoverLink,MouseHandler=require("ace/mouse/mouse_handler").MouseHandler,useragent=require("ace/lib/useragent"),menus=imports.menus,CRASHED_JOB_TIMEOUT=3e4,plugin=new Plugin("Ajax.org",main.consumes)


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),register(null,{"language.jumptodef":plugin.freezePublicAPI({
addUnknownColumn:addUnknownColumn,jumpToPos:jumpToPos})})}return main.consumes=["Plugin","tabManager","ace","language","menus","commands","c9","tabManager","ui","settings","preferences","proc","dialog.error"],
main.provides=["language.jumptodef"],main})


define("treehugger/tree",[],function(require,exports,module){function inRange(p,pos,exclusive){if(p&&p.sl<=pos.line&&pos.line<=p.el){
if(p.sl<pos.line&&pos.line<p.el)return!0
if(p.sl==pos.line&&pos.line<p.el)return p.sc<=pos.col
if(p.sl==pos.line&&p.el===pos.line)return p.sc<=pos.col&&pos.col<=p.ec+(exclusive?1:0)
if(p.sl<pos.line&&p.el===pos.line)return pos.col<=p.ec+(exclusive?1:0)}}function Node(){}function ConsNode(cons,children){
this.cons=cons
for(var i=0;i<children.length;i++)this[i]=children[i]
this.length=children.length}function ListNode(children){for(var i=0;i<children.length;i++)this[i]=children[i]


this.length=children.length}function NumNode(value){this.value=value}function StringNode(value){this.value=value

}function PlaceholderNode(id){this.id=id}function parse(s){function accept(str){for(var i=0;i<str.length&&idx+i<s.length;i++)if(str[i]!=s[idx+i])return!1


return i==str.length}function lookAheadLetter(){return s[idx]>="a"&&s[idx]<="z"||s[idx]>="A"&&s[idx]<="Z"||"_"===s[idx]||s[idx]>="0"&&s[idx]<="9"

}function skipWhitespace(){for(;idx<s.length&&(" "===s[idx]||"\n"===s[idx]||"\r"===s[idx]||"\t"===s[idx]);)idx++

}function parseInt(){var pos=idx
if(s[idx]>="0"&&s[idx]<="9"){var ns=s[idx]
for(idx++;idx<s.length&&s[idx]>="0"&&s[idx]<="9";)ns+=s[idx],idx++
return skipWhitespace(),new NumNode((+ns),pos)}return null}function parseString(){var pos=idx
if(accept('"')){var ns=""
for(idx++;!accept('"')||accept('"')&&"\\"==s[idx-1];)ns+=s[idx],idx++
for(var ns2="",i=0;i<ns.length;i++)if("\\"==ns[i])switch(i++,ns[i]){case"n":ns2+="\n"
break
case"t":ns2+="\t"
break
default:ns2+=ns[i]}else ns2+=ns[i]
return idx++,skipWhitespace(),new StringNode(ns2,pos)}return null}function parsePlaceholder(){var pos=idx


if(lookAheadLetter()&&s[idx].toLowerCase()===s[idx]){for(var ns="";lookAheadLetter()&&idx<s.length;)ns+=s[idx],
idx++
return skipWhitespace(),new PlaceholderNode(ns,pos)}return null}function parseList(){var pos=idx
if(accept("[")){var items=[]
for(idx++,skipWhitespace();!accept("]")&&idx<s.length;)items.push(parseExp()),accept(",")&&(idx++,skipWhitespace())


return idx++,skipWhitespace(),new ListNode(items,pos)}return null}function parseCons(){for(var pos=idx,ns="";!accept("(");)ns+=s[idx],
idx++
idx++
for(var items=[];!accept(")")&&idx<s.length;)items.push(parseExp()),accept(",")&&(idx++,skipWhitespace())


return idx++,skipWhitespace(),new ConsNode(ns,items,pos)}function parseExp(){var r=parseInt()
return r?r:(r=parseString())?r:(r=parseList())?r:(r=parsePlaceholder(),r?r:parseCons())}var idx=0
return parseExp()}function parseCached(s){return"string"!=typeof s?null:s.length>200?parse():parseCache[s]||(parseCache[s]=parse(s))

}Node.prototype.toPrettyString=function(prefix){return prefix=prefix||"",prefix+this.toString()},Node.prototype.setAnnotation=function(name,value){
this.annos=this.annos||{},this.annos[name]=value},Node.prototype.getAnnotation=function(name){return this.annos?this.annos[name]:void 0

},Node.prototype.$pos=null,Node.prototype.getPos=function(){if(this.annos&&this.annos.pos)return this.annos.pos


var p=this.$pos
return p&&{sl:p.start.line,sc:p.start.column,el:p.end.line,ec:p.end.column}},Node.prototype.findNode=function(pos){
var p=this.getPos()
return inRange(p,pos)?this:null},ConsNode.prototype=new Node,ConsNode.prototype.toString=function(prefix){
try{for(var s=this.cons+"(",i=0;i<this.length;i++)s+=this[i].toString()+","
return this.length>0&&(s=s.substring(0,s.length-1)),s+")"}catch(e){console.error("Something went wrong: ",this,e)

}},ConsNode.prototype.toPrettyString=function(prefix){prefix=prefix||""
try{if(0===this.length)return prefix+this.cons+"()"
if(1===this.length&&(this[0]instanceof StringNode||this[0]instanceof NumNode))return prefix+this.cons+"("+this[0].toString()+")"


for(var s=prefix+this.cons+"(\n",i=0;i<this.length;i++)s+=this[i].toPrettyString(prefix+"    ")+",\n"


return s=s.substring(0,s.length-2),s+="\n",s+prefix+")"}catch(e){console.error("Something went wrong: ",this,e)

}},ConsNode.prototype.match=function(t,matches){if(matches=matches||{},t instanceof ConsNode&&this.cons===t.cons&&this.length===t.length){
for(var i=0;i<this.length;i++)if(!this[i].match(t[i],matches))return!1
return matches}return!1},ConsNode.prototype.build=function(values){for(var children=[],i=0;i<this.length;i++)children.push(this[i].build(values))


return new ConsNode(this.cons,children)},ConsNode.prototype.toJSON=function(){for(var l=[],i=0;i<this.length;i++)l.push(this[i])


return{cons:this.cons,children:l}},ConsNode.prototype.getPos=function(){if(this.$pos&&this.$pos.start&&this.$pos.end){
var p=this.$pos
return{sl:p.start.line,sc:p.start.column,el:p.end.line,ec:p.end.column}}for(var nodePos=this.getAnnotation("pos"),result=nodePos?{
sl:nodePos.sl,sc:nodePos.sc,el:nodePos.el,ec:nodePos.ec}:{sl:Number.MAX_VALUE,sc:Number.MAX_VALUE,el:0,
ec:0},hasSl=!1,hasSc=!1,i=0;i<this.length;i++){var p=this[i].getPos()
p&&(p.sl<Number.MAX_VALUE&&!hasSl&&(result.sl=p.sl,hasSl=!0),p.sc<Number.MAX_VALUE&&!hasSc&&(result.sc=p.sc,
hasSc=!0),result.el=p.el||result.el,result.ec=p.ec||result.ec)}return result},ConsNode.prototype.$pos=null,
ConsNode.prototype.findNode=function(pos){var p=this.getPos()
if(!inRange(p,pos))return null
for(var i=0;i<this.length;i++){var p2=this[i].getPos()
if(inRange(p2,pos)){var node=this[i].findNode(pos)
return node?node instanceof StringNode?this:node:this[i]}}},exports.cons=function(name,children){return new ConsNode(name,children)

},ListNode.prototype=new Node,ListNode.prototype.toString=function(){for(var s="[",i=0;i<this.length;i++)s+=this[i].toString()+","


return this.length>0&&(s=s.substring(0,s.length-1)),s+"]"},ListNode.prototype.toPrettyString=function(prefix){
prefix=prefix||""
try{if(0===this.length)return prefix+"[]"
for(var s=prefix+"[\n",i=0;i<this.length;i++)s+=this[i].toPrettyString(prefix+"  ")+",\n"
return s=s.substring(0,s.length-2),s+="\n",s+prefix+"]"}catch(e){console.error("Something went wrong: ",this)

}},ListNode.prototype.match=function(t,matches){if(matches=matches||{},t instanceof ListNode){if(this.length===t.length){
for(var i=0;i<this.length;i++)if(!this[i].match(t[i],matches))return!1
return matches}return!1}return!1},ListNode.prototype.build=function(values){for(var children=[],i=0;i<this.length;i++)children.push(this[i].build(values))


return new ListNode(children)},ListNode.prototype.getPos=ConsNode.prototype.getPos,ListNode.prototype.findNode=ConsNode.prototype.findNode,
ListNode.prototype.forEach=function(fn){for(var i=0;i<this.length;i++)fn.call(this[i],this[i],i)},ListNode.prototype.isEmpty=function(){
return 0===this.length},ListNode.prototype.contains=function(el){for(var i=0;i<this.length;i++)if(el.match(this[i]))return!0


return!1},ListNode.prototype.concat=function(l){for(var ar=[],i=0;i<this.length;i++)ar.push(this[i])
for(i=0;i<l.length;i++)ar.push(l[i])
return exports.list(ar)},ListNode.prototype.toJSON=function(){for(var l=[],i=0;i<this.length;i++)l.push(this[i])


return l},ListNode.prototype.removeDuplicates=function(){var newList=[]
lbl:for(var i=0;i<this.length;i++){for(var j=0;j<newList.length;j++)if(newList[j].match(this[i]))continue lbl


newList.push(this[i])}return new exports.list(newList)},ListNode.prototype.toArray=ListNode.prototype.toJSON,
exports.list=function(elements){return new ListNode(elements)},NumNode.prototype=new Node,NumNode.prototype.toString=function(){
return""+this.value},NumNode.prototype.match=function(t,matches){return matches=matches||{},t instanceof NumNode&&(this.value===t.value&&matches)

},NumNode.prototype.build=function(values){return this},exports.num=function(value){return new NumNode(value)

},StringNode.prototype=new Node,StringNode.prototype.toString=function(){return'"'+this.value+'"'},StringNode.prototype.match=function(t,matches){
return matches=matches||{},t instanceof StringNode&&(this.value===t.value&&matches)},StringNode.prototype.build=function(values){
return this},exports.string=function(value){return new StringNode(value)},PlaceholderNode.prototype=new Node,
PlaceholderNode.prototype.toString=function(){return this.id},PlaceholderNode.prototype.match=function(t,matches){
return matches=matches||{},"_"===this.id?matches:matches[this.id]?matches[this.id].match(t):(matches[this.id]=t,
matches)},PlaceholderNode.prototype.build=function(values){return values[this.id]},exports.placeholder=function(n){
return new PlaceholderNode(n)}
var parseCache={}
exports.Node=Node,exports.ConsNode=ConsNode,exports.ListNode=ListNode,exports.NumNode=NumNode,exports.StringNode=StringNode,
exports.PlaceholderNode=PlaceholderNode,exports.parse=parseCached,exports.inRange=inRange})


define("text!plugins/c9.ide.language.core/complete.css",[],"")


define("plugins/c9.ide.language.core/tooltip",[],function(require,exports,module){function main(options,imports,register){
function load(){tooltipEl=dom.createElement("div"),tooltipEl.className="language_tooltip dark",language.getWorker(function(err,worker){
return err?console.error(err):(languageWorker=worker,worker.on("hint",function(event){var tab=tabs.focussedTab


tab&&tab.path===event.data.path&&(assert(tab.editor&&tab.editor.ace,"Could find a tab but no editor for "+event.data.path),
onHint(event,tab.editor.ace))},plugin),worker.on("tooltipRegex",function(event){tooltipRegexes[event.data.language]=event.data.tooltipRegex

},plugin),void language.on("cursormove",function(e){return clearTimeout(cursormoveTimeout),e.selection.rangeCount||!tabs.focussedTab?hide():lastPos&&!inRange(lastPos,e.pos)&&(lastPos.sl!==e.pos.row&&hide(),
allowImmediateEmit)?(allowImmediateEmit=!1,setTimeout(function(){worker.emit("cursormove",{data:{pos:e.pos,
line:e.doc.getLine(e.pos.row)}})},0)):(applyLastCompletionTooltip(),void(cursormoveTimeout=setTimeout(function(){
var latestPos=e.doc.selection.getCursor()
worker.emit("cursormove",{data:{pos:latestPos,line:e.doc.getLine(latestPos.row),now:e.now}}),cursormoveTimeout=null

},e.now?0:100)))},plugin))}),aceHandle.on("themeChange",function(e){var theme=e.theme
theme&&(tooltipEl.className="language_tooltip "+(theme.isDark?"dark":""))},plugin)}function onHint(event,ace){
var message=event.data.message,pos=event.data.pos,cursorPos=ace.getCursorPosition(),line=ace.getSession().getDocument().getLine(cursorPos.row)


if(message&&message.signatures&&(message=message.signatures.map(function(sig){var activeParam,doc=sig.name+"("+sig.parameters.map(function(p){
return p.active&&(activeParam=p),p.active?'<span class="language_activeparam">'+util.escapeXml(p.name)+"</span>":'<span class="language_param">'+util.escapeXml(p.name)+"</span>"

}).join(", ")+")"
return sig.returnType&&(doc+=" : "+util.escapeXml(sig.returnType)),activeParam&&activeParam.type&&(doc+='&nbsp;&mdash; <span class="language_type">'+util.escapeXml(activeParam.name)+":&nbsp;"+util.escapeXml(activeParam.type)+"</span>"),
activeParam&&(activeParam.docHtml||activeParam.doc)&&(doc+='<div class="language_paramhelp"><span class="language_activeparam">'+util.escapeXml(activeParam.name)+'</span>:<span class="language_activeparamhelp">'+(activeParam.docHtml||util.escapeXml(activeParam.doc||activeParam.type))+"</span></div>"),
doc}).join("<br />")),clearTimeout(onMouseDownTimeout),ace.selection.rangeCount||!ace.selection.isEmpty())return hide()


if(line!==event.data.line)return cursormoveTimeout||(cursormoveTimeout=setTimeout(function(){language.onCursorChange(),
cursormoveTimeout=null},50)),void(lastPos&&lastPos.sl!==cursorPos.row&&hide())
if(message&&inRange(pos,cursorPos)){var displayPos=event.data.displayPos||cursorPos
show(displayPos.row,displayPos.column,message,ace),lastPos=pos,allowImmediateEmit=!0,lastCompletionTooltip.active=!1

}else lastCompletionTooltip.active||hide()}function inRange(pos,cursorPos){return tree.inRange(pos,{line:cursorPos.row,
col:cursorPos.column})}function draw(){return!!drawn||(drawn=!0,void ui.insertCss(require("text!./complete.css"),plugin))

}function show(row,column,html,_ace){draw(),ace=_ace
var cursorPos=ace.getCursorPosition()
isVisible||(isVisible=!0,window.document.body.appendChild(tooltipEl),ace.on("mousewheel",hide,plugin),
tabs.on("focus",hide,plugin),window.document.addEventListener("mousedown",onMouseDown)),tooltipEl.innerHTML=html


var position=ace.renderer.textToScreenCoordinates(row,column),cursorConfig=ace.renderer.$cursorLayer.config


if(cursorConfig){labelHeight=dom.getInnerHeight(tooltipEl),isTopdown=!0,row>cursorPos.row?isTopdown=!0:row<cursorPos.row?isTopdown=!1:position.pageY<labelHeight?isTopdown=!0:position.pageY+labelHeight>window.innerHeight&&(isTopdown=!1)


var editorBottom=ace.renderer.scroller.getBoundingClientRect().bottom
isTopdown&&position.pageY>editorBottom&&(position.pageY=editorBottom-cursorConfig.lineHeight),tooltipEl.style.left=position.pageX-22+"px",
isTopdown?tooltipEl.style.top=position.pageY+cursorConfig.lineHeight+2+"px":tooltipEl.style.top=position.pageY-labelHeight+3+"px",
adjustCompleterTop&&adjustCompleterTop(labelHeight)}}function onMouseDown(){clearTimeout(onMouseDownTimeout),
onMouseDownTimeout=setTimeout(hide,300)}function getHeight(){return isVisible&&labelHeight||0}function isTopdown(){
return isTopdown}function getRight(){return isVisible&&tooltipEl.getBoundingClientRect().right}function hide(clearLastPos){
if(clearLastPos&&(lastPos=null),isVisible){try{tooltipEl.parentElement.removeChild(tooltipEl)}catch(e){
console.error(e)}window.document.removeEventListener("mousedown",onMouseDown),ace.off("mousewheel",hide),
isVisible=!1}}function getTooltipRegex(language,ace){return tooltipRegexes[language||getSyntax(ace)]}
function getSyntax(ace){return ace&&SyntaxDetector.getContextSyntax(ace.session.doc,ace.getCursorPosition(),ace.session.syntax)

}function setLastCompletion(completion,pos){if(!completion.guessTooltip)return lastCompletionTooltip={}


var simpleName=completion.replaceText.replace("^^","").replace(/\(\)$/,"")
if(0!==completion.name.indexOf(simpleName))return lastCompletionTooltip={}
var matcher="("+util.escapeRegExp(simpleName)+")\\(([^\\)]*)?"
lastCompletionTooltip={docHtml:completion.docHeadHtml,doc:completion.docHead||completion.name,row:pos.row,
matcher:new RegExp(matcher+"$"),substringMatcher:new RegExp(matcher),tab:tabs.focussedTab}}function applyLastCompletionTooltip(){
var tab=tabs.focussedTab,ace=tab&&tab.editor&&tab.editor.ace
if(ace&&lastCompletionTooltip.tab===tab){var pos=ace.getCursorPosition(),line=ace.getSession().getDocument().getLine(pos.row).substr(0,pos.column)


if(!line.match(lastCompletionTooltip.matcher))return lastCompletionTooltip.active?hide():null
var name=RegExp.$1,args=RegExp.$2,beforeMatch=line.substr(0,line.length-name.length-args.length),docHtml=beautifyCompletionDoc(args)


show(pos.row,beforeMatch.length,docHtml,ace),lastPos=null,lastCompletionTooltip.active=!0}}function beautifyCompletionDoc(args){
var docHtml=lastCompletionTooltip.docHtml||util.escapeXml(lastCompletionTooltip.doc)
if(!docHtml.match(lastCompletionTooltip.substringMatcher))return docHtml
var argIndex=args.split(",").length-1
return docHtml.replace(lastCompletionTooltip.substringMatcher,function(all,name,params){return name+"("+(params||"").split(",").map(function(param,i){
return i===argIndex?'<span class="language_activeparam">'+param+"</span>":param})})}var ace,languageWorker,isVisible,labelHeight,adjustCompleterTop,isTopdown,tooltipEl,allowImmediateEmit,lastPos,cursormoveTimeout,onMouseDownTimeout,language=imports.language,tabs=imports.tabManager,dom=require("ace/lib/dom"),Plugin=imports.Plugin,ui=imports.ui,aceHandle=imports.ace,tree=require("treehugger/tree"),assert=require("c9/assert"),SyntaxDetector=require("./syntax_detector"),util=imports.util,plugin=new Plugin("Ajax.org",main.consumes),tooltipRegexes={},lastCompletionTooltip={}


plugin.on("load",function(){load()}),plugin.on("unload",function(){tooltipEl&&tooltipEl.parentNode&&tooltipEl.parentNode.removeChild(tooltipEl)

})
var drawn=!1
plugin.freezePublicAPI({hide:hide,show:show,getHeight:getHeight,getRight:getRight,isTopdown:isTopdown,
set adjustCompleterTop(f){adjustCompleterTop=f},getTooltipRegex:getTooltipRegex,setLastCompletion:setLastCompletion
}),register(null,{"language.tooltip":plugin})}return main.consumes=["Plugin","tabManager","language","ui","ace","util"],
main.provides=["language.tooltip"],main})


define("ace/placeholder",[],function(require,exports,module){"use strict"
var Range=require("./range").Range,EventEmitter=require("./lib/event_emitter").EventEmitter,oop=require("./lib/oop"),PlaceHolder=function(session,length,pos,others,mainClass,othersClass){
var _self=this
this.length=length,this.session=session,this.doc=session.getDocument(),this.mainClass=mainClass,this.othersClass=othersClass,
this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=others,this.$onCursorChange=function(){
setTimeout(function(){_self.onCursorChange()})},this.$pos=pos
var undoStack=session.getUndoManager().$undoStack||session.getUndoManager().$undostack||{length:-1}
this.$undoStackDepth=undoStack.length,this.setup(),session.selection.on("changeCursor",this.$onCursorChange)

};(function(){oop.implement(this,EventEmitter),this.setup=function(){var _self=this,doc=this.doc,session=this.session


this.selectionBefore=session.selection.toJSON(),session.selection.inMultiSelectMode&&session.selection.toSingleRange(),
this.pos=doc.createAnchor(this.$pos.row,this.$pos.column)
var pos=this.pos
pos.$insertRight=!0,pos.detach(),pos.markerId=session.addMarker(new Range(pos.row,pos.column,pos.row,pos.column+this.length),this.mainClass,null,!1),
this.others=[],this.$others.forEach(function(other){var anchor=doc.createAnchor(other.row,other.column)


anchor.$insertRight=!0,anchor.detach(),_self.others.push(anchor)}),session.setUndoSelect(!1)},this.showOtherMarkers=function(){
if(!this.othersActive){var session=this.session,_self=this
this.othersActive=!0,this.others.forEach(function(anchor){anchor.markerId=session.addMarker(new Range(anchor.row,anchor.column,anchor.row,anchor.column+_self.length),_self.othersClass,null,!1)

})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1
for(var i=0;i<this.others.length;i++)this.session.removeMarker(this.others[i].markerId)}},this.onUpdate=function(delta){
if(this.$updating)return this.updateAnchors(delta)
var range=delta
if(range.start.row===range.end.row&&range.start.row===this.pos.row){this.$updating=!0
var lengthDiff="insert"===delta.action?range.end.column-range.start.column:range.start.column-range.end.column,inMainRange=range.start.column>=this.pos.column&&range.start.column<=this.pos.column+this.length+1,distanceFromStart=range.start.column-this.pos.column


if(this.updateAnchors(delta),inMainRange&&(this.length+=lengthDiff),inMainRange&&!this.session.$fromUndo)if("insert"===delta.action)for(var i=this.others.length-1;i>=0;i--){
var otherPos=this.others[i],newPos={row:otherPos.row,column:otherPos.column+distanceFromStart}
this.doc.insertMergedLines(newPos,delta.lines)}else if("remove"===delta.action)for(var i=this.others.length-1;i>=0;i--){
var otherPos=this.others[i],newPos={row:otherPos.row,column:otherPos.column+distanceFromStart}
this.doc.remove(new Range(newPos.row,newPos.column,newPos.row,newPos.column-lengthDiff))}this.$updating=!1,
this.updateMarkers()}},this.updateAnchors=function(delta){this.pos.onChange(delta)
for(var i=this.others.length;i--;)this.others[i].onChange(delta)
this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var _self=this,session=this.session,updateMarker=function(pos,className){
session.removeMarker(pos.markerId),pos.markerId=session.addMarker(new Range(pos.row,pos.column,pos.row,pos.column+_self.length),className,null,!1)

}
updateMarker(this.pos,this.mainClass)
for(var i=this.others.length;i--;)updateMarker(this.others[i],this.othersClass)}},this.onCursorChange=function(event){
if(!this.$updating&&this.session){var pos=this.session.selection.getCursor()
pos.row===this.pos.row&&pos.column>=this.pos.column&&pos.column<=this.pos.column+this.length?(this.showOtherMarkers(),
this._emit("cursorEnter",event)):(this.hideOtherMarkers(),this._emit("cursorLeave",event))}},this.detach=function(){
this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),
this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),
this.session=null},this.cancel=function(){if(this.$undoStackDepth!==-1){for(var undoManager=this.session.getUndoManager(),undosRequired=(undoManager.$undoStack||undoManager.$undostack).length-this.$undoStackDepth,i=0;i<undosRequired;i++)undoManager.undo(this.session,!0)


this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(PlaceHolder.prototype),
exports.PlaceHolder=PlaceHolder})


define("plugins/c9.ide.language.core/refactor",[],function(require,exports,module){function main(options,imports,register){
function load(){loaded||(loaded=!0,language.getWorker(function(err,langWorker){return err?console.error(err):(worker=langWorker,
worker.on("refactoringsResult",function(event){enableRefactorings(event)}),worker.on("renamePositionsResult",function(event){
tabs.focussedTab&&tabs.focussedTab.editor&&tabs.focussedTab.editor.ace===lastAce&&event.data&&(isGenericRefactor=event.data.isGeneric,
initRenameUI(event.data,lastAce),worker.emit("onRenameBegin",{data:{}}))}),void worker.on("commitRenameResult",function(event){
var data=event.data
data.err?question.show("Rename","Are you sure you would like to rename '"+data.oldName+"' to '"+data.newName+"'?",data.err,function(){
cleanup()},function(){cancelRename()},{yes:"Rename",no:"Cancel"}):cleanup()}))}),commands.addCommand({
name:"renameVar",hint:"Rename refactor",bindKey:{mac:"Option-Command-R",win:"Ctrl-Alt-R"},exec:function(editor){
selectVar=!1,beginRename(editor)}},plugin),commands.addCommand({name:"selectVar",hint:"select all instances of variable",
exec:function(editor){selectVar=!0,beginRename(editor)}},plugin),mnuRename=new ui.item({disabled:!0,command:"renameVar",
caption:"Rename Variable"}),mnuRename2=new ui.item({id:"mnuCtxEditorRename",caption:"Rename",command:"renameVar"
}),menus.addItemByPath("Tools/~",new ui.divider,1e4,plugin),menus.addItemByPath("Tools/Rename Variable",mnuRename,2100,plugin),
aceHandle.getElement("menu",function(menu){menus.addItemToMenu(menu,mnuRename2,750,plugin),menu.on("prop.visible",function(e){
if(e.value){mnuRename2.disable()
var ace=tabs.focussedTab.editor.ace
ace&&worker&&worker.emit("refactorings",{data:ace.getSelection().getCursor()})}})}))}function enableRefactorings(event){
for(var names=event.data,enabled=!1,i=0;i<names.length;i++){var name=names[i]
"renameVariable"!==name&&"rename"!==name||(enabled=!0)}enabled?(mnuRename.enable(),mnuRename2.enable()):(mnuRename.disable(),
mnuRename2.disable())}function beginRename(editor){var ace=lastAce=editor.ace
ace.focus()
var curPos=ace.getCursorPosition(),doc=ace.getSession().getDocument(),line=doc.getLine(curPos.row)
oldIdentifier=getFullIdentifier(line,curPos,ace),worker.emit("renamePositions",{data:curPos})}function initRenameUI(data,ace){
var cursor=ace.getCursorPosition(),mainPos=data.pos,others=data.others.filter(function(o){return!(o.row===mainPos.row&&o.column===mainPos.column)

})
return selectVar?(ace.selection.toSingleRange(),others.push(mainPos),void others.forEach(function(pos){
ace.selection.addRange(new Range(pos.row,pos.column,pos.row,pos.column+data.length))})):(marker.disableMarkerType("occurrence_main",ace),
marker.disableMarkerType("occurrence_other",ace),void(placeHolder||(placeHolder=new PlaceHolder(ace.session,data.length,mainPos,others,"language_rename_main","language_rename_other"),
(cursor.row!==mainPos.row||cursor.column<mainPos.column||cursor.column>mainPos.column+data.length)&&ace.moveCursorTo(mainPos.row,mainPos.column),
placeHolder.showOtherMarkers(),oldContinuousCompletion=language.isContinuousCompletionEnabled(),language.setContinuousCompletionEnabled(!1),
oldCommandKey||(oldCommandKey=ace.keyBinding.onCommandKey,ace.keyBinding.onCommandKey=onKeyPress),placeHolder.on("cursorLeave",function(){
commitRename()}))))}function commitRename(){var doc=lastAce.getSession().getDocument(),oPos=placeHolder.pos,line=doc.getLine(oPos.row),newIdentifier=getFullIdentifier(line,oPos,lastAce)


worker.emit("commitRename",{data:{oldId:oldIdentifier,newName:newIdentifier.value,isGeneric:isGenericRefactor
}})}function cancelRename(){placeHolder&&placeHolder.cancel(),worker.emit("onRenameCancel",{data:{}}),
cleanup()}function cleanup(){placeHolder&&placeHolder.detach(),language.setContinuousCompletionEnabled(oldContinuousCompletion),
marker.enableMarkerType("occurrence_main"),marker.enableMarkerType("occurrence_other"),placeHolder=null,
oldIdentifier=null,oldCommandKey&&(lastAce.keyBinding.onCommandKey=oldCommandKey,oldCommandKey=null)}
function onKeyPress(e,hashKey,keyCode){var keyBinding=lastAce.keyBinding,selection=placeHolder.session.selection,col=0


switch(keyCode){case 32:if(e.ctrlKey||e.metaKey||e.altKey)return oldCommandKey.apply(keyBinding,arguments)


col=selection.lead.column
var start=placeHolder.pos.column,end=start+placeHolder.length
col!=start&&col!=end||commitRename()
break
case 27:cancelRename(),e.preventDefault()
break
case 13:commitRename(),e.preventDefault()
break
case 35:col=placeHolder.length
case 36:var row=selection.lead.row
col+=placeHolder.pos.column,e.shiftKey?selection.selectTo(row,col):selection.moveTo(row,col)
break
default:return oldCommandKey.apply(keyBinding,arguments)}e.preventDefault(),e.stopPropagation()}function getFullIdentifier(line,pos,ace){
var regex=complete.getIdentifierRegex(null,ace),prefix=completeUtil.retrievePrecedingIdentifier(line,pos.column,regex),postfix=completeUtil.retrieveFollowingIdentifier(line,pos.column,regex)


return{column:pos.column-prefix.length,row:pos.row,value:prefix+postfix}}var worker,mnuRename,mnuRename2,placeHolder,oldCommandKey,oldIdentifier,lastAce,isGenericRefactor,oldContinuousCompletion,selectVar,loaded,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),language=imports.language,menus=imports.menus,commands=imports.commands,complete=imports["language.complete"],ui=imports.ui,tabs=imports.tabManager,aceHandle=imports.ace,marker=imports["language.marker"],question=imports["dialog.question"],completeUtil=require("plugins/c9.ide.language/complete_util"),PlaceHolder=require("ace/placeholder").PlaceHolder,Range=require("ace/range").Range


plugin.on("load",function(){load()}),register(null,{"language.refactor":plugin})}return main.consumes=["Plugin","tabManager","language","ui","menus","dialog.question","ace","language.marker","language","commands","language.complete"],
main.provides=["language.refactor"],main})


define("text!plugins/c9.ide.language.core/marker.css",[],"")


define("plugins/c9.ide.language.core/marker",[],function(require,exports,module){function main(options,imports,register){
function SimpleAnchor(row,column){this.row=row,this.column=column||0}function removeMarkers(session){
for(var markers=session.markerAnchors,i=0;i<markers.length;i++)session.removeMarker(markers[i].id)
session.markerAnchors=[],session.setAnnotations([])}function addMarkers(annos,editor){if(editor){var ignoredMarkers=language.getIgnoredMarkers(),mySession=editor.session


mySession.markerAnchors||(mySession.markerAnchors=[]),removeMarkers(mySession),mySession.languageAnnos=[]


var lastLine=mySession.getDocument().getLength()-1,sel=editor.getSelectionRange(),showOccurenceMarkers=!editor.inMultiSelectMode&&(!!sel.isEmpty()||!sel.isMultiLine()&&null),occurrenceMarkers=[]


if(annos.forEach(function(anno){if(!(disabledMarkerTypes[anno.type]||anno.pos.el&&anno.pos.sl!==anno.pos.el)){
var pos=anno.pos||{}
pos.sl>lastLine&&(pos.sl=lastLine)
var range=new Range(pos.sl,pos.sc||0,pos.el,pos.ec||0)
if(("occurrence_other"==anno.type||"occurrence_main"==anno.type)&&!showOccurenceMarkers){if(showOccurenceMarkers===!1)return


range.containsRange(sel)&&(showOccurenceMarkers=!0),occurrenceMarkers.push(mySession.markerAnchors.length)

}mySession.markerAnchors.push(anno),anno.start=new SimpleAnchor(pos.sl,pos.sc),void 0!==pos.sc&&void 0!==pos.ec&&(anno.range=range,
anno.id=mySession.addMarker(anno.range,"language_highlight_"+(anno.type?anno.type:"default")),anno.range.start=anno.start,
anno.colDiff=pos.ec-pos.sc,anno.rowDiff=pos.el-pos.sl)
try{if(!anno.message||anno.message.match(ignoredMarkers))return}catch(e){showError("Illegal ignore message filter: "+e.message)

}var gutterAnno={guttertext:anno.message,type:anno.type||anno.level||"warning",text:anno.message,pos:anno.pos,
resolutions:anno.resolutions,row:pos.sl}
anno.gutterAnno=gutterAnno,mySession.languageAnnos.push(gutterAnno)}}),!showOccurenceMarkers)for(var i=occurrenceMarkers.length;i--;){
var markerI=occurrenceMarkers[i]
mySession.removeMarker(mySession.markerAnchors[markerI].id),mySession.markerAnchors.splice(markerI,1)

}mySession.setAnnotations(mySession.languageAnnos)}}function disableMarkerType(type,ace){disabledMarkerTypes[type]=!0


var session=ace.getSession(),markers=session.getMarkers(!1)
for(var id in markers)markers[id].clazz==="language_highlight_"+type&&session.removeMarker(id)}function enableMarkerType(type){
disabledMarkerTypes[type]=!1}function onChange(session,delta){var marker,start,isInserting="r"!==delta.action[0],text=delta.lines[0],adaptingId=text&&text.search(/[^a-zA-Z0-9\$_]/)===-1,languageAnnos=[],markers=session.markerAnchors||[],foundOne=!1


if(isInserting)for(var i=markers.length;i--;)marker=markers[i],marker.range&&marker.range.contains(delta.start.row,delta.start.column)&&(foundOne=!0,
adaptingId?marker.colDiff+=text.length:Range.comparePoints(delta.start,marker.range.start)>0&&session.removeMarker(marker.id)),
start=marker.start,start.onChange(delta),marker.range&&(marker.range.end.row=start.row+marker.rowDiff,
marker.range.end.column=start.column+marker.colDiff),marker.gutterAnno&&(languageAnnos.push(marker.gutterAnno),
marker.gutterAnno.row=marker.start.row)
else{for(var i=markers.length;i--;)marker=markers[i],comparePoints(delta.start,marker.start)<0&&comparePoints(delta.end,marker.start)>0?(session.removeMarker(marker.id),
foundOne=!0):(adaptingId&&marker.range&&marker.range.contains(delta.start.row,delta.start.column)&&(foundOne=!0,
marker.colDiff-=text.length),start=marker.start,start.onChange(delta),marker.range&&(marker.range.end.row=start.row+marker.rowDiff,
marker.range.end.column=start.column+marker.colDiff),marker.gutterAnno&&(languageAnnos.push(marker.gutterAnno),
marker.gutterAnno.row=marker.start.row))
if(!foundOne)return}session._dispatchEvent("changeBackMarker"),session.setAnnotations(languageAnnos)}
var language=imports.language,tabs=imports.tabManager,ui=imports.ui,showError=imports["dialog.error"].show,Range=require("ace/range").Range,Anchor=require("ace/anchor").Anchor,comparePoints=Range.comparePoints


SimpleAnchor.prototype.onChange=Anchor.prototype.onChange,SimpleAnchor.prototype.setPosition=function(row,column){
this.row=row,this.column=column},language.once("initWorker",function(e){ui.insertCss(require("text!./marker.css"),language)


var lastStaticMarkers=[],lastHighlightMarkers=[],lastHighlightMarkersString="[]",lastStaticMarkersTab=null,lastHighlightMarkersTab=null


e.worker.on("markers",function(event){var tab=tabs.findTab(event.data.path)
if(tab){var editor=tab.editor
if(tab.document===editor.ace.session.c9doc){lastStaticMarkers=event.data,lastStaticMarkersTab=tab
var markers=lastHighlightMarkersTab===tab?lastStaticMarkers.concat(lastHighlightMarkers):lastStaticMarkers


addMarkers(markers,editor.ace)}}}),e.worker.on("highlightMarkers",function(event){var tab=tabs.findTab(event.data.path)


if(tab){var editor=tab.editor,string=JSON.stringify(event.data)
if(lastHighlightMarkersTab!==tab||string!==lastHighlightMarkersString){lastHighlightMarkers=event.data,
lastHighlightMarkersString=string,lastHighlightMarkersTab=tab
var markers=lastStaticMarkersTab===tab?lastHighlightMarkers.concat(lastStaticMarkers):lastHighlightMarkers


addMarkers(markers,editor.ace)}}}),e.worker.on("change",function(event,worker){onChange(worker.$doc,event)

})})
var disabledMarkerTypes={}
register(null,{"language.marker":{disableMarkerType:disableMarkerType,enableMarkerType:enableMarkerType
}})}return main.consumes=["Plugin","tabManager","language","ui","dialog.error"],main.provides=["language.marker"],
main})


define("plugins/c9.ide.language.core/quickfix",[],function(require,exports,module){function main(options,imports,register){
function load(){loaded||(loaded=!0,commands.on("update",function(){var key=commands.getPrettyHotkey("quickfix")


language.getWorker(function(err,result){return err?console.error(err):(worker=result,void worker.emit("quickfix_key",{
data:key}))})}),commands.addCommand({name:"quickfix",hint:"quickfix",bindKey:{mac:"Command-F3",win:"Ctrl-F3"
},exec:function(editor){invoke()}},plugin),language.getWorker(function(err,result){err&&console.error(err),
worker=result,worker.on("quickfixes_result",onResult)}))}function invoke(){if(tabs.focussedTab&&tabs.focussedTab.editor&&tabs.focussedTab.editor.ace){
var tab=tabs.focussedTab,ace=tab.editor.ace,sel=ace.getSelection(),pos=sel.getCursor()
activateSpinner(tabs.focussedTab),worker.emit("quickfixes",{data:pos})}}function onResult(e){var tab=tabs.findTab(e.data.path)


if(tab&&tabs.focussedTab===tab){clearSpinners(tab)
var results=e.data.results
if(results.length){if(results[0].deltas.length>1&&results[0].delta.some(function(d){return d.path}))throw new Error("Multiple deltas with paths not allowed")


applyQuickfix(e.data.path,results[0])}}}function activateSpinner(tab){tab.classList.add("loading"),clearTimeout(tab.$quickfixReset),
tab.$quickfixReset=setTimeout(function(){clearSpinners(tab)},CRASHED_JOB_TIMEOUT)}function clearSpinners(tab){
clearTimeout(tab.$quickfixReset),tab.classList.remove("loading")}function applyQuickfix(sourcePath,fix){
var tab=fix.deltas[0].path?tabs.findTab(fix.deltas[0].path):tabs.focussedTab
if(tab!==tabs.focussedTab){var sourcePos=tabs.focussedTab.editor.ace.getCursorPosition()
return jumptodef.jumpToPos(fix.deltas[0].path,fix.pos,sourcePath,sourcePos,function(err){return err?console.error(err):void applyQuickfix(sourcePath,fix)

})}var ace=tab.editor.ace,doc=ace.getSession().getDocument()
if(doc.applyDeltas(fix.deltas),fix.pos){var pos=fix.pos,selection=ace.getSelection()
selection.clearSelection(),selection.moveCursorTo(pos.row,pos.column,!1)}}var worker,loaded,Plugin=imports.Plugin,tabs=imports.tabManager,language=imports.language,commands=imports.commands,jumptodef=imports["language.jumptodef"],plugin=new Plugin("Ajax.org",main.consumes),CRASHED_JOB_TIMEOUT=3e4


plugin.on("load",load),register(null,{"language.quickfix":plugin.freezePublicAPI({})})}return main.consumes=["Plugin","ui","tabManager","ace","language","menus","commands","c9","tabManager","settings","language.jumptodef"],
main.provides=["language.quickfix"],main})


define("ace/autocomplete/popup",[],function(require,exports,module){"use strict"
var Renderer=require("../virtual_renderer").VirtualRenderer,Editor=require("../editor").Editor,Range=require("../range").Range,event=require("../lib/event"),lang=require("../lib/lang"),dom=require("../lib/dom"),$singleLineEditor=function(el){
var renderer=new Renderer(el)
renderer.$maxLines=4
var editor=new Editor(renderer)
return editor.setHighlightActiveLine(!1),editor.setShowPrintMargin(!1),editor.renderer.setShowGutter(!1),
editor.renderer.setHighlightGutterLine(!1),editor.$mouseHandler.$focusWaitTimout=0,editor.$highlightTagPending=!0,
editor},AcePopup=function(parentNode){var el=dom.createElement("div"),popup=new $singleLineEditor(el)


parentNode&&parentNode.appendChild(el),el.style.display="none",popup.renderer.content.style.cursor="default",
popup.renderer.setStyle("ace_autocomplete"),popup.setOption("displayIndentGuides",!1),popup.setOption("dragDelay",150)


var noop=function(){}
popup.focus=noop,popup.$isFocused=!0,popup.renderer.$cursorLayer.restartTimer=noop,popup.renderer.$cursorLayer.element.style.opacity=0,
popup.renderer.$maxLines=8,popup.renderer.$keepTextAreaAtCursor=!1,popup.setHighlightActiveLine(!1),popup.session.highlight(""),
popup.session.$searchHighlight.clazz="ace_highlight-marker",popup.on("mousedown",function(e){var pos=e.getDocumentPosition()


popup.selection.moveToPosition(pos),selectionMarker.start.row=selectionMarker.end.row=pos.row,e.stop()

})
var lastMouseEvent,hoverMarker=new Range((-1),0,(-1),1/0),selectionMarker=new Range((-1),0,(-1),1/0)
selectionMarker.id=popup.session.addMarker(selectionMarker,"ace_active-line","fullLine"),popup.setSelectOnHover=function(val){
val?hoverMarker.id&&(popup.session.removeMarker(hoverMarker.id),hoverMarker.id=null):hoverMarker.id=popup.session.addMarker(hoverMarker,"ace_line-hover","fullLine")

},popup.setSelectOnHover(!1),popup.on("mousemove",function(e){if(!lastMouseEvent)return void(lastMouseEvent=e)


if(lastMouseEvent.x!=e.x||lastMouseEvent.y!=e.y){lastMouseEvent=e,lastMouseEvent.scrollTop=popup.renderer.scrollTop


var row=lastMouseEvent.getDocumentPosition().row
hoverMarker.start.row!=row&&(hoverMarker.id||popup.setRow(row),setHoverMarker(row))}}),popup.renderer.on("beforeRender",function(){
if(lastMouseEvent&&hoverMarker.start.row!=-1){lastMouseEvent.$pos=null
var row=lastMouseEvent.getDocumentPosition().row
hoverMarker.id||popup.setRow(row),setHoverMarker(row,!0)}}),popup.renderer.on("afterRender",function(){
var row=popup.getRow(),t=popup.renderer.$textLayer,selected=t.element.childNodes[row-t.config.firstRow]


selected!=t.selectedNode&&(t.selectedNode&&dom.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=selected,
selected&&dom.addCssClass(selected,"ace_selected"))})
var hideHoverMarker=function(){setHoverMarker(-1)},setHoverMarker=function(row,suppressRedraw){row!==hoverMarker.start.row&&(hoverMarker.start.row=hoverMarker.end.row=row,
suppressRedraw||popup.session._emit("changeBackMarker"),popup._emit("changeHoverMarker"))}
popup.getHoveredRow=function(){return hoverMarker.start.row},event.addListener(popup.container,"mouseout",hideHoverMarker),
popup.on("hide",hideHoverMarker),popup.on("changeSelection",hideHoverMarker),popup.session.doc.getLength=function(){
return popup.data.length},popup.session.doc.getLine=function(i){var data=popup.data[i]
return"string"==typeof data?data:data&&data.value||""}
var bgTokenizer=popup.session.bgTokenizer
return bgTokenizer.$tokenizeRow=function(row){var data=popup.data[row],tokens=[]
if(!data)return tokens
"string"==typeof data&&(data={value:data}),data.caption||(data.caption=data.value||data.name)
for(var flag,c,last=-1,i=0;i<data.caption.length;i++)c=data.caption[i],flag=data.matchMask&1<<i?1:0,last!==flag?(tokens.push({
type:data.className||""+(flag?"completion-highlight":""),value:c}),last=flag):tokens[tokens.length-1].value+=c


if(data.meta){var maxW=popup.renderer.$size.scrollerWidth/popup.renderer.layerConfig.characterWidth,metaData=data.meta


metaData.length+data.caption.length>maxW-2&&(metaData=metaData.substr(0,maxW-data.caption.length-3)+"\u2026"),
tokens.push({type:"rightAlignedText",value:metaData})}return tokens},bgTokenizer.$updateOnChange=noop,
bgTokenizer.start=noop,popup.session.$computeWidth=function(){return this.screenWidth=0},popup.isOpen=!1,
popup.isTopdown=!1,popup.autoSelect=!0,popup.data=[],popup.setData=function(list){popup.setValue(lang.stringRepeat("\n",list.length),-1),
popup.data=list||[],popup.setRow(0)},popup.getData=function(row){return popup.data[row]},popup.getRow=function(){
return selectionMarker.start.row},popup.setRow=function(line){line=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,line)),
selectionMarker.start.row!=line&&(popup.selection.clearSelection(),selectionMarker.start.row=selectionMarker.end.row=line||0,
popup.session._emit("changeBackMarker"),popup.moveCursorTo(line||0,0),popup.isOpen&&popup._signal("select"))

},popup.on("changeSelection",function(){popup.isOpen&&popup.setRow(popup.selection.lead.row),popup.renderer.scrollCursorIntoView()

}),popup.hide=function(){this.container.style.display="none",this._signal("hide"),popup.isOpen=!1},popup.show=function(pos,lineHeight,topdownOnly){
var el=this.container,screenHeight=window.innerHeight,screenWidth=window.innerWidth,renderer=this.renderer,maxH=renderer.$maxLines*lineHeight*1.4,top=pos.top+this.$borderSize,allowTopdown=top>screenHeight/2&&!topdownOnly


allowTopdown&&top+lineHeight+maxH>screenHeight?(renderer.$maxPixelHeight=top-2*this.$borderSize,el.style.top="",
el.style.bottom=screenHeight-top+"px",popup.isTopdown=!1):(top+=lineHeight,renderer.$maxPixelHeight=screenHeight-top-.2*lineHeight,
el.style.top=top+"px",el.style.bottom="",popup.isTopdown=!0),el.style.display="",this.renderer.$textLayer.checkForSizeChanges()


var left=pos.left
left+el.offsetWidth>screenWidth&&(left=screenWidth-el.offsetWidth),el.style.left=left+"px",this._signal("show"),
lastMouseEvent=null,popup.isOpen=!0},popup.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize

},popup.$imageSize=0,popup.$borderSize=1,popup}
dom.importCssString(".ace_autocomplete.ace-tm .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_autocomplete.ace-tm .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),
exports.AcePopup=AcePopup})


define("plugins/c9.ide.language.core/completedp",[],function(require,exports,module){function addStylesheetRule(cssText){
var s=document.styleSheets[document.styleSheets.length-1]
s.insertRule(cssText,s.cssRules.length)}function defineIcon(icon){var path=(this.staticUrl||"/static")+"/plugins/c9.ide.language/images/"


iconClass[icon]="lang-icon-"+icon
var cssText="."+iconClass[icon]+"{background-image:url('"+path+icon+".png')}"
return addStylesheetRule(cssText),iconClass[icon]}function tokenizeRow(){return[]}function renderLineInner(builder,row){
var match=this.data[row],html="<span class='completer-img "+(match.icon?iconClass[match.icon]||this.$defineIcon(match.icon):"")+"'></span>"


if(match.type){var shortType=guidToShortString(match.type)
shortType&&(match.meta=shortType)}var name=escapeHTML(match.name),prefix=match.identifierRegex?this.calcPrefix(match.identifierRegex):name.substr(0,this.prefix.length),trim=match.meta?" maintrim":""


if(this.ignoreGenericMatches&&match.isGeneric)html+='<span class="main'+trim+'"><span class="deferred"><u>'+prefix+"</u>"+name.substring(prefix.length)+"</span></span>"
else{var simpleName=match.replaceText.replace("^^","").replace(/\(\)$/,"")
0===name.indexOf(simpleName)?(simpleName=escapeHTML(simpleName),html+='<span class="main'+trim+'"><u>'+prefix+"</u>"+simpleName.substring(prefix.length)+'</span><span class="deferred">'+name.substring(Math.max(simpleName.length,prefix.length))+"</span>"):html+='<span class="main'+trim+'"><u>'+prefix+"</u>"+name.substring(prefix.length)+"</span>"

}match.meta&&(html+='<span class="meta"> - '+match.meta+"</span>"),builder.push(html)}function renderLine(stringBuilder,row,onlyContents,foldLine){
onlyContents||stringBuilder.push("<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),
this.popup.$renderLineInner(stringBuilder,row),onlyContents||stringBuilder.push("</div>")}var escapeHTML=require("ace/lib/lang").escapeHTML,guidToShortString=exports.guidToShortString=function(guid){
var result=guid&&guid.replace(/^[^:]+:(([^\/]+)\/)*?([^\/]*?)(\[\d+[^\]]*\])?(\/prototype)?$|.*/,"$3")


return result&&"Object"!==result?result:""},iconClass=(exports.guidToLongString=function(guid,name){if("local:"===guid.substr(0,6))return guidToShortString(guid)


var result=guid&&guid.replace(/^[^:]+:(([^\/]+\/)*)*?([^\/]*?)$|.*/,"$1$3")
return result&&"Object"!==result?(result=result.replace(/\//g,".").replace(/\[\d+[^\]]*\]/g,""),"prototype"!==name&&(result=result.replace(/\.prototype$/,"")),
result):""},{})
exports.initPopup=function(popup,staticUrl){popup.session.bgTokenizer.popup=popup,popup.session.bgTokenizer.$tokenizeRow=tokenizeRow,
popup.renderer.$textLayer.popup=popup,popup.$renderLineInner=renderLineInner,popup.$defineIcon=defineIcon,
popup.renderer.$textLayer.$renderLine=renderLine,popup.staticUrl=staticUrl}})


define("plugins/c9.ide.language.core/complete",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,language.once("initWorker",function(e){worker=e.worker,worker.on("setIdentifierRegex",function(event){
idRegexes[event.data.language]=event.data.identifierRegex}),worker.on("setCompletionRegex",function(event){
completionRegexes[event.data.language]=event.data.completionRegex}),e.worker.on("complete",function(event){
var tab=tabs.focussedTab
tab&&(tab.path||tab.name)===event.data.path&&tab.document===tab.editor.ace.session.c9doc&&(assert(tab.editor,"Could find a tab but no editor for "+event.data.path),
onComplete(event,tab.editor))})}),menus.addItemByPath("Tools/~",new ui.divider,2e3,plugin),menus.addItemByPath("Tools/Show Autocomplete",new ui.item({
command:"complete"}),2100,plugin),commands.addCommand({name:"complete",hint:"code complete",bindKey:{
mac:"Ctrl-Space|Alt-Space",win:"Ctrl-Space|Alt-Space"},isAvailable:function(editor){return editor&&language.isEditorSupported({
editor:editor})},exec:function(){invoke()}},plugin),commands.addCommand({name:"completeoverwrite",hint:"code complete & overwrite",
bindKey:{mac:"Ctrl-Shift-Space|Alt-Shift-Space",win:"Ctrl-Shift-Space|Alt-Shift-Space"},isAvailable:function(editor){
return editor&&language.isEditorSupported({editor:editor})},exec:invoke.bind(null,!1,!0)},plugin),aceHandle.on("themeChange",function(e){
theme=e.theme,theme&&drawn&&(txtCompleterDoc.className="code_complete_doc_text"+(theme.isDark?" dark":""),
popup.setTheme({cssClass:"code_complete_text",isDark:theme.isDark,padding:0}),popup.renderer.setStyle("dark",theme.isDark))

},plugin),settings.on("read",updateSettings),settings.on("user/language",updateSettings),void settings.on("project/language",updateSettings))

}function draw(){function clearLastLine(){popup.onLastLine=!1}drawn||(drawn=!0,ui.insertCss(require("text!./complete.css"),plugin),
txtCompleterDoc=document.createElement("div"),txtCompleterDoc.className="code_complete_doc_text"+(!theme||theme.isDark?" dark":""),
popup=new Popup(document.body),popup.setTheme({cssClass:"code_complete_text",isDark:!theme||theme.isDark,
padding:0}),popup.$imageSize=21,popup.renderer.$extraHeight=4,popup.renderer.setStyle("dark",!theme||theme.isDark),
completedp.initPopup(popup,c9.staticUrl),popup.on("select",clearLastLine),popup.on("change",clearLastLine),
popup.on("mouseover",function(){return ignoreMouseOnce?void(ignoreMouseOnce=!1):(isDocsRequested||requestDocInvoke.call(),
void(isDrawDocInvokeScheduled||drawDocInvoke.schedule(SHOW_DOC_DELAY_MOUSE_OVER)))},!1),popup.on("select",function(){
updateDoc(!0)}),popup.on("changeHoverMarker",function(){updateDoc(!0)}),popup.on("click",function(e){
onKeyPress(e,0,13),e.stop()}),emit("draw"))}function updateSettings(){setEnterCompletion(settings.get("user/language/@enterCompletion"))

}function isPopupVisible(){return popup&&popup.isOpen}function getSyntax(ace){return SyntaxDetector.getContextSyntax(ace.getSession().getDocument(),ace.getCursorPosition(),ace.getSession().syntax)

}function isJavaScript(ace){return["javascript","jsx"].indexOf(getSyntax(ace))>-1}function isHtml(ace){
return"html"===getSyntax(ace)}function replaceText(ace,match,deleteSuffix){if(!ace.inVirtualSelectionMode&&ace.inMultiSelectMode)return ace.forEachSelection(function(){
replaceText(ace,match,deleteSuffix)},null,{keepOrder:!0}),void(ace.tabstopManager&&ace.tabstopManager.tabNext())


var newText=match.replaceText,pos=ace.getCursorPosition(),session=ace.getSession(),line=session.getLine(pos.row),doc=session.getDocument(),idRegex=match.identifierRegex||getIdentifierRegex(null,ace),prefix=completeUtil.retrievePrecedingIdentifier(line,pos.column,idRegex),postfix=completeUtil.retrieveFollowingIdentifier(line,pos.column,idRegex)||"",snippet=match.snippet


if(!snippet){"require(^^)"===match.replaceText&&isJavaScript(ace)&&(newText='require("^^")',isInvokeScheduled||setTimeout(deferredInvoke.bind(null,!1,ace),0))


var endingParens="(^^)"===newText.substr(newText.length-4)?4:"()"===newText.substr(newText.length-2)?2:0


endingParens&&("("===line.substr(pos.column+(deleteSuffix?postfix.length:0),1)&&(newText=newText.substr(0,newText.length-endingParens)),
postfix&&line.substr(pos.column,postfix.length+1)===postfix+"("&&(newText=newText.substr(0,newText.length-endingParens),
deleteSuffix=!0)),newText.indexOf("^^")===-1&&(newText+="^^")
var preId=completeUtil.retrievePrecedingIdentifier(line,pos.column,idRegex)
isHtml(ace)&&"<"===line[pos.column-preId.length-1]&&"<"===newText[0]&&(newText=newText.substring(1)),
snippet=newText.replace(/[$]/g,"\\$").replace(/\^\^(.*)\^\^|\^\^/g,"${0:$1}"),newText=newText.replace(/\^\^/g,"")

}tooltip.setLastCompletion(match,pos),deleteSuffix||newText.slice(-postfix.length)===postfix||match.deleteSuffix?doc.removeInLine(pos.row,pos.column-prefix.length,pos.column+postfix.length):doc.removeInLine(pos.row,pos.column-prefix.length,pos.column),
snippetManager.insertSnippet(ace,snippet),language.onCursorChange(null,null,!0),emit("replaceText",{pos:pos,
prefix:prefix,newText:newText,match:match}),matchCompletionRegex(getCompletionRegex(),doc.getLine(pos.row),ace.getCursorPosition())&&deferredInvoke(!0)

}function showCompletionBox(editor,m,prefix,line){var ace=editor.ace
draw(),matches=m,docElement=txtCompleterDoc,commandKeyBeforePatch||(aceBeforePatch=ace,commandKeyBeforePatch=ace.keyBinding.onCommandKey,
ace.keyBinding.onCommandKey=onKeyPress.bind(this),textInputBeforePatch=ace.keyBinding.onTextInput,ace.keyBinding.onTextInput=onTextInput.bind(this)),
lastAce=ace,populateCompletionBox(ace,matches),window.document.addEventListener("mousedown",closeCompletionBox),
ace.on("mousewheel",closeCompletionBox)
var renderer=ace.renderer
popup.setFontSize(ace.getFontSize())
var lineHeight=renderer.layerConfig.lineHeight,base=ace.getCursorPosition()
base.column-=prefix.length,base.column>0&&line.substr(base.column-1,1).match(/["'"]/)&&base.column--
var loc=ace.renderer.textToScreenCoordinates(base.row,base.column),pos={left:loc.pageX,top:loc.pageY}


pos.left-=popup.getTextLeftOffset(),tooltipHeightAdjust=0,popup.show(pos,lineHeight),adjustToToolTipHeight(tooltip.getHeight()),
updateDoc(!0),ignoreMouseOnce=!isPopupVisible(),emit("showPopup",{popup:popup})}function adjustToToolTipHeight(height){
if(tooltip.adjustCompleterTop=adjustToToolTipHeight,isPopupVisible()){var left=parseInt(popup.container.style.left,10)


if((popup.isTopdown!==tooltip.isTopdown()||left>tooltip.getRight())&&(height=0),popup.isTopdown){var top=parseInt(popup.container.style.top,10)-tooltipHeightAdjust


height-=height?3:0,top+=height,popup.container.style.top=top+"px"}else{var bottom=parseInt(popup.container.style.bottom,10)-tooltipHeightAdjust


bottom+=height,popup.container.style.bottom=bottom+"px"}tooltipHeightAdjust=height,isDocShown&&showDocPopup()

}}function closeCompletionBox(event){if(popup&&(!event||!event.target||!popup.container.contains(event.target)&&!docElement.contains(event.target))&&(emit("hidePopup"),
popup.hide(),hideDocPopup(),lastAce)){var ace=lastAce
window.document.removeEventListener("mousedown",closeCompletionBox),ace.off("mousewheel",closeCompletionBox),
commandKeyBeforePatch&&(aceBeforePatch.keyBinding.onCommandKey=commandKeyBeforePatch,aceBeforePatch.keyBinding.onTextInput=textInputBeforePatch),
commandKeyBeforePatch=textInputBeforePatch=null,undrawDocInvoke.schedule(HIDE_DOC_DELAY),requestDocInvoke.cancel(),
forceOpen=!1}}function populateCompletionBox(ace,matches){var pos=ace.getCursorPosition(),line=ace.getSession().getLine(pos.row),idRegex=getIdentifierRegex(null,ace),prefix=completeUtil.retrievePrecedingIdentifier(line,pos.column,idRegex)


popup.ace=ace,popup.matches=matches,popup.prefix=prefix,popup.ignoreGenericMatches=isIgnoreGenericEnabled(matches),
popup.matches=matches,popup.calcPrefix=function(regex){return completeUtil.retrievePrecedingIdentifier(line,pos.column,regex)

},setPopupDataKeepRow(matches)}function setPopupDataKeepRow(matches){var row=popup.getRow()
popup.setData(matches),popup.setRow(row),(!popup.isOpen||row>=matches.length||row>0&&!popup.data.every(function(m,i){
return i>row||matches[i]&&matches[i].name===m.name}))&&popup.setRow(0)}function cleanupMatches(matches,ace,pos,line){
if(isIgnoreGenericEnabled(matches)&&(matches=matches.filter(function(m){return!m.isGeneric})),ace.inMultiSelectMode)for(var prefix=completeUtil.retrievePrecedingIdentifier(line,pos.column),i=0;i<matches.length;i++){
var m=matches[i]
m.replaceText===prefix&&matches.splice(i--,1)}if(inCommentOrString(ace,pos))for(var i=0;i<matches.length;i++){
var m=matches[i]
if("snippet"!==m.meta){"package"===m.icon||"event"===m.icon||m.isContextual||(m.icon=null)
var simpleName=m.replaceText.replace("^^","").replace(/\(\)$/,"")
0===m.name.indexOf(simpleName)&&(m.name=m.replaceText=simpleName),delete m.isContextual,delete m.meta

}else matches.splice(i--,1)}return matches}function isIgnoreGenericEnabled(matches){for(var isNonGenericAvailable=!1,isContextualAvailable=!1,i=0;i<matches.length;i++)matches[i].isGeneric||(isNonGenericAvailable=!0),
matches[i].isContextual&&(isContextualAvailable=!0)
return isNonGenericAvailable&&isContextualAvailable}function updateDoc(delayPopup){docElement.innerHTML='<span class="code_complete_doc_body">'


var matches=popup.matches,selected=matches&&(matches[popup.getHoveredRow()]||matches[popup.getRow()])


if(selected){var docHead=selected.docHeadHtml||selected.docHead&&escapeHTML(selected.docHead)
if(selected.type){var shortType=completedp.guidToShortString(selected.type)
shortType&&(docHead=docHead||selected.name+" : "+completedp.guidToLongString(selected.type)+"</div>")

}selected.$doc="",(selected.doc||selected.docHtml)&&(selected.$doc="<p>"+(selected.doc||selected.docHtml)+"</p>"),
(selected.icon||selected.type)&&(selected.$doc='<div class="code_complete_doc_head">'+(docHead||selected.name&&escapeHTML(selected.name))+"</div>"+(selected.$doc||"")),
selected&&selected.$doc?(isDocShown?showDocPopup():(hideDocPopup(),isDrawDocInvokeScheduled&&!delayPopup||(isDocsRequested||requestDocInvoke.schedule(FETCH_DOC_DELAY),
drawDocInvoke.schedule(SHOW_DOC_DELAY))),docElement.innerHTML+=selected.$doc+"</span>"):hideDocPopup(),
selected&&selected.docUrl&&(docElement.innerHTML+="<p><a onclick=\"require('ext/preview/preview').preview('"+selected.docUrl+'\'); return false;" href="'+selected.docUrl+'" target="c9doc">(more)</a></p>'),
docElement.innerHTML+="</span>"}}function showDocPopup(){if(isDocsRequested||requestDocInvoke.call(),
!matches[0]||"always"!==matches[0].nodoc){var rect=popup.container.getBoundingClientRect()
txtCompleterDoc.parentNode||document.body.appendChild(txtCompleterDoc),txtCompleterDoc.style.top=popup.container.style.top,
txtCompleterDoc.style.bottom=popup.container.style.bottom,window.innerWidth-rect.right<320?(txtCompleterDoc.style.right=window.innerWidth-rect.left+"px",
txtCompleterDoc.style.left=""):(txtCompleterDoc.style.left=rect.right+1+"px",txtCompleterDoc.style.right=""),
txtCompleterDoc.style.height=rect.height+"px",txtCompleterDoc.style.display="block"}}function hideDocPopup(){
txtCompleterDoc&&(txtCompleterDoc.style.display="none")}function setTextInputToolTip(text){if("("===text)for(var foundOne=!1,pos=lastAce.getCursorPosition(),line=lastAce.getSession().getLine(pos.row),i=0;i<matches.length;i++)if(matches[i].isGeneric&&(matches[i].doc||matches[i].name!==matches[i].replaceText)&&matches[i].replaceText.match(/\)$/)){
var replaceText=matches[i].replaceText.replace("^^","").replace(/\(\)$/,""),prefix=completeUtil.retrievePrecedingIdentifier(line,pos.column-1,matches[i].identifierRegex||getIdentifierRegex())


replaceText===prefix&&(foundOne&&tooltip.setLastCompletion(null,pos),tooltip.setLastCompletion(matches[i],pos),
foundOne=!0)}}function onTextInput(text,pasted){var keyBinding=lastAce.keyBinding
if(textInputBeforePatch.apply(keyBinding,arguments),!pasted){setTextInputToolTip(text)
for(var matched=!1,i=0;i<matches.length&&!matched;i++){var idRegex=matches[i].identifierRegex||getIdentifierRegex()


matched=idRegex.test(text)}var completionMatch=matchCompletionRegex(getCompletionRegex(),text,{column:text.length
})
matched||completionMatch?deferredInvoke(completionMatch):closeCompletionBox()}}function onKeyPress(e,hashKey,keyCode){
if(keyCode&&(e.metaKey||e.ctrlKey||e.altKey))return void(e.altKey&&32==keyCode||closeCompletionBox())


var keyBinding=lastAce.keyBinding
switch(keyCode){case 0:break
case 32:case 35:case 36:closeCompletionBox()
break
case 27:lastAce.$vimModeHandler&&commandKeyBeforePatch.apply(keyBinding,arguments),closeCompletionBox(),
e.preventDefault(),e.stopPropagation()
break
case 8:commandKeyBeforePatch.apply(keyBinding,arguments),deferredInvoke(),e.preventDefault()
break
case 37:case 39:commandKeyBeforePatch.apply(keyBinding,arguments),closeCompletionBox(),e.preventDefault()


break
case 13:case 9:var ace=lastAce
if(!enterCompletion&&13===keyCode){commandKeyBeforePatch(e,hashKey,keyCode),closeCompletionBox()
break}closeCompletionBox(),replaceText(ace,matches[popup.getRow()],e.shiftKey),e.preventDefault(),e.stopImmediatePropagation&&e.stopImmediatePropagation()


break
case 40:isDocShown=!0
var time=Date.now()
if(popup.getRow()==popup.matches.length-1){if(!(lastUpDownEvent+REPEAT_IGNORE_RATE>time)||1===popup.matches.length)return closeCompletionBox()

}else popup.setRow(popup.getRow()+1)
lastUpDownEvent=time,e.stopPropagation(),e.preventDefault()
break
case 38:isDocShown=!0
var time=(new Date).getTime()
if(!popup.getRow()&&!(lastUpDownEvent+REPEAT_IGNORE_RATE>time)||1===popup.matches.length)return closeCompletionBox()


lastUpDownEvent=time,popup.getRow()&&popup.setRow(popup.getRow()-1),e.stopPropagation(),e.preventDefault()


break
case 33:popup.gotoPageUp(),e.stopPropagation(),e.preventDefault()
break
case 34:popup.gotoPageDown(),e.stopPropagation(),e.preventDefault()}}function invoke(options){var tab=tabs.focussedTab


if(tab&&language.isEditorSupported(tab)){var ace=lastAce=tab.editor.ace
if(options=options||{},options.predictOnly||(isDocsRequested=options.requestDocs),ace.inMultiSelectMode){
var row=ace.selection.lead.row,shouldClose=options.autoInvoke&&!ace.selection.ranges.every(function(r){
return r.cursor.row==row&&r.isEmpty()})
if(shouldClose&&!forceOpen||!sameMultiselectPrefix(ace))return closeCompletionBox()
forceOpen=!0}var pos=ace.getCursorPosition(),line=ace.getSession().getLine(pos.row)
worker.emit("complete",{data:{pos:pos,line:line,forceBox:!0,deleteSuffix:!0,noDoc:!options.requestDocs&&!isDocShown,
predictOnly:options.predictOnly}}),options.autoInvoke&&killCrashedCompletionInvoke(CRASHED_COMPLETION_TIMEOUT)

}}function onComplete(event,editor){if(!lastAce||lastAce!=editor.ace)return void console.error("[complete] received completion for wrong ace")


var pos=editor.ace.getCursorPosition(),line=editor.ace.getSession().getLine(pos.row)
if(isDocsRequested=!event.data.noDoc,killCrashedCompletionInvoke.cancel(),completeUtil.canCompleteForChangedLine(event.data.line,line,event.data.pos,pos,getIdentifierRegex(null,editor.ace))&&(!event.data.isUpdate||isPopupVisible()||!eventMatches||!eventMatches.length)){
var matches=eventMatches=event.data.matches
if(matches=filterMatches(matches,line,pos),matches=cleanupMatches(matches,editor.ace,pos,line),1!==matches.length||event.data.forceBox)if(matches.length>0){
var idRegex=matches[0].identifierRegex||getIdentifierRegex(),identifier=completeUtil.retrievePrecedingIdentifier(line,pos.column,idRegex)


1!==matches.length||identifier!==matches[0].replaceText&&identifier+" "!==matches[0].replaceText||!matches[0].replaceText?showCompletionBox(editor,matches,identifier,line):closeCompletionBox()

}else closeCompletionBox()
else replaceText(editor.ace,matches[0],event.data.deleteSuffix)}}function setEnterCompletion(enabled){
enterCompletion=enabled}function sameMultiselectPrefix(ace){var commonPrefix,idRegex=getIdentifierRegex()


return ace.selection.ranges.every(function(range){var pos=range.cursor,line=ace.session.getLine(pos.row),prefix=completeUtil.retrievePrecedingIdentifier(line,pos.column,idRegex)


return void 0===commonPrefix&&(commonPrefix=prefix),commonPrefix==prefix})}function onCompleteUpdate(){
var ace=lastAce
if(isPopupVisible()&&eventMatches){var pos=ace.getCursorPosition(),line=ace.getSession().getLine(pos.row),idRegex=getIdentifierRegex(),prefix=completeUtil.retrievePrecedingIdentifier(line,pos.column,idRegex)


matches=filterMatches(eventMatches,line,pos),matches=cleanupMatches(matches,ace,pos,line),matches.length?showCompletionBox({
ace:ace},matches,prefix,line):(closeCompletionBox(),$closeTrigger=ace.prevOp)}}function filterMatches(matches,line,pos){
for(var identifierRegex=getIdentifierRegex(),defaultPrefix=completeUtil.retrievePrecedingIdentifier(line,pos.column,identifierRegex),results=matches.filter(function(match){
var prefix=match.identifierRegex?completeUtil.retrievePrecedingIdentifier(line,pos.column,match.identifierRegex):defaultPrefix


return 0===match.name.indexOf(prefix)}),prefixLine=line.substr(0,pos.column),i=0;i<results.length;i++){
var m=results[i]
if(m.replaceText=m.replaceText||m.name,!results[i].isGeneric||"local"===results[i].$source){var match=prefixLine.lastIndexOf(m.replaceText)


match>-1&&match===pos.column-m.replaceText.length&&completeUtil.retrievePrecedingIdentifier(line,pos.column,m.identifierRegex||identifierRegex)&&(results.splice(i,1),
results.splice(0,0,m))}}return results}function deferredInvoke(now,ace,fromBackspace){if(!fromBackspace||$closeTrigger&&ace.prevOp==$closeTrigger){
ace=ace||lastAce,now=now||!isPopupVisible()
var delay=now?0:AUTO_UPDATE_DELAY
now||setTimeout(onCompleteUpdate.bind(this),0),isInvokeScheduled||(isInvokeScheduled=!0,deferredInvoker.ace=ace,
deferredInvoker.schedule(delay))}}function getCompletionRegex(language,ace){return completionRegexes[language||getSyntax(ace||lastAce)]||null

}function matchCompletionRegex(completionRegex,line,pos){if(!completionRegex)return!1
var ch=line[pos.column-1]
return!(!ch||!completionRegex.test(ch))||(completionRegex.source.match(/[^\\]\$\)*$/)?completionRegex.test(line.substr(0,pos.column)):void 0)

}function getIdentifierRegex(language,ace){return idRegexes[language||getSyntax(ace||lastAce)]||DEFAULT_ID_REGEX

}function inCommentOrString(ace,pos){var token=ace.getSession().getTokenAt(pos.row,pos.column-1)
return token&&token.type&&token.type.match(/^comment|^string/)}function addSnippet(data,plugin){if("string"==typeof data){
data={text:data}
var text=data.text,firstLine=text.split("\n",1)[0].replace(/\#/g,"").trim()
firstLine.split(";").forEach(function(n){if(n){var info=n.split(":")
2==info.length&&(data[info[0].trim()]=info[1].trim())}})}if(data.include&&(data.include=data.include.split(",").map(function(n){
return n.trim()})),!data.scope)throw new Error("Missing Snippet Scope")
data.scope=data.scope.split(","),!data.snippets&&data.text&&(data.snippets=snippetManager.parseSnippetFile(data.text)),
data.scope.forEach(function(scope){snippetManager.register(data.snippets,scope)}),plugin.addOther(function(){
snippetManager.unregister(data.snippets)})}var theme,commandKeyBeforePatch,textInputBeforePatch,aceBeforePatch,isDocShown,txtCompleterDoc,docElement,lastAce,worker,matches,eventMatches,popup,lastUpDownEvent,forceOpen,$closeTrigger,isDocsRequested,drawn,Plugin=imports.Plugin,ui=imports.ui,c9=imports.c9,aceHandle=imports.ace,menus=imports.menus,tabs=imports.tabManager,commands=imports.commands,language=imports.language,tooltip=imports["language.tooltip"],settings=imports.settings,escapeHTML=require("ace/lib/lang").escapeHTML,lang=require("ace/lib/lang"),SyntaxDetector=require("./syntax_detector"),completeUtil=require("plugins/c9.ide.language/complete_util"),Popup=require("ace/autocomplete/popup").AcePopup,completedp=require("./completedp"),assert=require("c9/assert"),snippetManager=require("ace/snippets").snippetManager,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),isInvokeScheduled=!1,ignoreMouseOnce=!1,enterCompletion=!0,tooltipHeightAdjust=0,idRegexes={},completionRegexes={},DEFAULT_ID_REGEX=completeUtil.DEFAULT_ID_REGEX,FETCH_DOC_DELAY=1200,SHOW_DOC_DELAY=1500,SHOW_DOC_DELAY_MOUSE_OVER=100,HIDE_DOC_DELAY=1e3,AUTO_UPDATE_DELAY=200,CRASHED_COMPLETION_TIMEOUT=6e3,REPEAT_IGNORE_RATE=200,deferredInvoker=lang.deferredCall(function(){
isInvokeScheduled=!1
var ace=deferredInvoker.ace,pos=ace.getCursorPosition(),line=ace.getSession().getDocument().getLine(pos.row),identifierRegex=getIdentifierRegex(null,ace),completionRegex=getCompletionRegex(null,ace)


completeUtil.precededByIdentifier(line,pos.column,null,ace)||line[pos.column-1]&&line[pos.column-1].match(identifierRegex)||matchCompletionRegex(completionRegex,line,pos)&&(line[pos.column-1].match(identifierRegex)||!(line[pos.column]||"").match(identifierRegex))||language.isInferAvailable()&&completeUtil.isRequireJSCall(line,pos.column,"",ace)?invoke({
autoInvoke:!0}):closeCompletionBox()}),drawDocInvoke=lang.deferredCall(function(){if(isPopupVisible()){
var match=matches[popup.getHoveredRow()]||matches[popup.getRow()]
match&&(match.doc||match.$doc)&&(isDocShown=!0,showDocPopup()),isDrawDocInvokeScheduled=!1}}),isDrawDocInvokeScheduled=!1,requestDocInvoke=lang.deferredCall(function(){
isPopupVisible()&&(isDocsRequested=!0,eventMatches.some(function(m){return m.noDoc})&&invoke({requestDocs:!0
}))}),undrawDocInvoke=lang.deferredCall(function(){isPopupVisible()||(isDocShown=!1,hideDocPopup())}),killCrashedCompletionInvoke=lang.deferredCall(function(){
closeCompletionBox()}),loaded=!1
plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1,drawn=!1,theme=null,isInvokeScheduled=null,
ignoreMouseOnce=null,enterCompletion=null,tooltipHeightAdjust=null,commandKeyBeforePatch=null,textInputBeforePatch=null,
aceBeforePatch=null,isDocShown=null,txtCompleterDoc=null,docElement=null,lastAce=null,worker=null,matches=null,
eventMatches=null,popup=null,lastUpDownEvent=null,forceOpen=null,$closeTrigger=null,isDocShown=!1,isDocsRequested=!1

}),plugin.freezePublicAPI({deferredInvoke:deferredInvoke,invoke:invoke,getCompletionRegex:getCompletionRegex,
matchCompletionRegex:matchCompletionRegex,getIdentifierRegex:getIdentifierRegex,closeCompletionBox:closeCompletionBox,
isPopupVisible:isPopupVisible,setEnterCompletion:setEnterCompletion,$setShowDocDelay:function(value){
SHOW_DOC_DELAY=value},events:["replaceText","showPopup","hidePopup"],addSnippet:addSnippet}),register(null,{
"language.complete":plugin})}return main.consumes=["Plugin","ui","tabManager","ace","language","menus","commands","c9","tabManager","language.tooltip","settings"],
main.provides=["language.complete"],main})


define("plugins/c9.ide.language.core/keyhandler",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,language.on("attachToEditor",function(ace){var kb=ace.keyBinding,defaultCommandHandler=kb.onCommandKey.bind(kb)


kb.onCommandKey=composeHandlers(onCommandKey,defaultCommandHandler,ace),ace.commands.on("afterExec",onAfterExec,!0)

}),void complete.on("replaceText",function(e){onTextInput(e.newText,!1,!0)}))}function onAfterExec(e){
"insertstring"===e.command.name?(ace=e.editor,onTextInput(e.args)):"backspace"===e.command.name&&(ace=e.editor,
language.isContinuousCompletionEnabled()&&onBackspace(e))}function composeHandlers(mainHandler,fallbackHandler,myAce){
return function(){ace=myAce
var result=mainHandler.apply(null,arguments)
result||fallbackHandler.apply(null,arguments)}}function onTextInput(text,pasted,completed){return inputTriggerTooltip(text,pasted),
!completed&&(!complete.isPopupVisible()&&(language.isContinuousCompletionEnabled()?typeAlongCompleteTextInput(text,pasted):inputTriggerComplete(text,pasted),
!1))}function onCommandKey(e){27==e.keyCode&&tooltip.hide()}function onBackspace(e){if(complete.isPopupVisible())return!1


var pos=ace.getCursorPosition(),line=ace.session.doc.getLine(pos.row)
return!inCommentToken(pos)&&(!(!complete_util.precededByIdentifier(line,pos.column,null,ace)&&!inTextToken(pos))&&void(complete.getCompletionRegex(null,ace)&&complete.deferredInvoke(!1,ace,!0)))

}function inputTriggerComplete(text,pasted){var pos=ace.getCursorPosition(),completionRegex=complete.getCompletionRegex(null,ace),idRegex=complete.getIdentifierRegex(null,ace)


!pasted&&completionRegex&&text.match(completionRegex)&&!inCommentToken(pos)&&handleChar(text,idRegex,completionRegex)

}function inputTriggerTooltip(text,pasted){var tooltipRegex=tooltip.getTooltipRegex(null,ace)
!pasted&&tooltipRegex&&text.match(tooltipRegex)&&language.onCursorChange(null,null,!0)}function typeAlongCompleteTextInput(text,pasted){
var completionRegex=complete.getCompletionRegex(null,ace),idRegex=complete.getIdentifierRegex(null,ace)


return!pasted&&void handleChar(text,idRegex,completionRegex)}function inTextToken(pos){var token=ace.getSession().getTokenAt(pos.row,pos.column-1)


return token&&token.type&&"text"===token.type}function inCommentToken(pos){var token=ace.getSession().getTokenAt(pos.row,pos.column-1)


return token&&token.type&&0===token.type.indexOf("comment")}function handleChar(ch,idRegex,completionRegex){
var pos=ace.getCursorPosition()
if(!inCommentToken(pos)){var line=ace.getSession().getDocument().getLine(pos.row),matchIdRegex=ch.match(idRegex||DEFAULT_ID_REGEX)


if(matchIdRegex||complete.matchCompletionRegex(completionRegex,line,pos)){if(!complete_util.precededByIdentifier(line,pos.column,ch,ace))return!1


complete.deferredInvoke(!0,ace)}else'"'===ch||"'"===ch?complete_util.isRequireJSCall(line,pos.column,"",ace,!0)&&complete.deferredInvoke(!0,ace):setTimeout(complete.invoke.bind(complete,{
predictOnly:!0}))}}function setSkipInput(input){}var ace,Plugin=imports.Plugin,language=imports.language,complete=imports["language.complete"],tooltip=imports["language.tooltip"],complete_util=require("plugins/c9.ide.language/complete_util"),DEFAULT_ID_REGEX=complete_util.DEFAULT_ID_REGEX,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({composeHandlers:composeHandlers,setSkipInput:setSkipInput
}),register(null,{"language.keyhandler":plugin})}return main.consumes=["Plugin","tabManager","ace","language","language.complete","language.tooltip"],
main.provides=["language.keyhandler"],main})


define("ace/worker/worker_client",[],function(require,exports,module){"use strict"
function $workerBlob(workerUrl){var script="importScripts('"+net.qualifyURL(workerUrl)+"');"
try{return new Blob([script],{type:"application/javascript"})}catch(e){var BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,blobBuilder=new BlobBuilder


return blobBuilder.append(script),blobBuilder.getBlob("application/javascript")}}function createWorker(workerUrl){
var blob=$workerBlob(workerUrl),URL=window.URL||window.webkitURL,blobURL=URL.createObjectURL(blob)
return new Worker(blobURL)}var oop=require("../lib/oop"),net=require("../lib/net"),EventEmitter=require("../lib/event_emitter").EventEmitter,config=require("../config"),WorkerClient=function(topLevelNamespaces,mod,classname,workerUrl,importScripts){
if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),
this.onMessage=this.onMessage.bind(this),require.nameToUrl&&!require.toUrl&&(require.toUrl=require.nameToUrl),
config.get("packaged")||!require.toUrl)workerUrl=workerUrl||config.moduleUrl(mod,"worker")
else{var skipBalancers=!0,normalizePath=this.$normalizePath
workerUrl=workerUrl||normalizePath(require.toUrl("ace/worker/worker.js",null,"_",skipBalancers))
var tlns={}
topLevelNamespaces.forEach(function(ns){tlns[ns]=normalizePath(require.toUrl(ns,null,"_",skipBalancers).replace(/(\.js)?(\?.*)?$/,""))

})}this.$worker=createWorker(workerUrl),importScripts&&this.send("importScripts",importScripts),this.$worker.postMessage({
init:!0,tlns:tlns,module:mod,classname:classname}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage

};(function(){oop.implement(this,EventEmitter),this.onMessage=function(e){var msg=e.data
switch(msg.type){case"event":this._signal(msg.name,{data:msg.data})
break
case"call":var callback=this.callbacks[msg.id]
callback&&(callback(msg.data),delete this.callbacks[msg.id])
break
case"error":this.reportError(msg.data)
break
case"log":window.console&&console.log&&console.log.apply(console,msg.data)}},this.reportError=function(err){
window.console&&console.error&&console.error(err)},this.$normalizePath=function(path){return net.qualifyURL(path)

},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),
this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(cmd,args){
this.$worker.postMessage({command:cmd,args:args})},this.call=function(cmd,args,callback){if(callback){
var id=this.callbackId++
this.callbacks[id]=callback,args.push(id)}this.send(cmd,args)},this.emit=function(event,data){try{this.$worker.postMessage({
event:event,data:{data:data.data}})}catch(ex){console.error(ex.stack)}},this.attachToDocument=function(doc){
this.$doc&&this.terminate(),this.$doc=doc,this.call("setValue",[doc.getValue()]),doc.on("change",this.changeListener)

},this.changeListener=function(delta){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),
"insert"==delta.action?this.deltaQueue.push(delta.start,delta.lines):this.deltaQueue.push(delta.start,delta.end)

},this.$sendDeltaQueue=function(){var q=this.deltaQueue
q&&(this.deltaQueue=null,q.length>50&&q.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{
data:q}))}}).call(WorkerClient.prototype)
var UIWorkerClient=function(topLevelNamespaces,mod,classname){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),
this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[]


var main=null,emitSync=!1,sender=Object.create(EventEmitter),_self=this
this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){_self.messageBuffer.push(e),
main&&(emitSync?setTimeout(processNext):processNext())},this.setEmitSync=function(val){emitSync=val}
var processNext=function(){var msg=_self.messageBuffer.shift()
msg.command?main[msg.command].apply(main,msg.args):msg.event&&sender._signal(msg.event,msg.data)}
sender.postMessage=function(msg){_self.onMessage({data:msg})},sender.callback=function(data,callbackId){
this.postMessage({type:"call",id:callbackId,data:data})},sender.emit=function(name,data){this.postMessage({
type:"event",name:name,data:data})},config.loadModule(["worker",mod],function(Main){for(main=new Main[classname](sender);_self.messageBuffer.length;)processNext()

})}
UIWorkerClient.prototype=WorkerClient.prototype,exports.UIWorkerClient=UIWorkerClient,exports.WorkerClient=WorkerClient,
exports.createWorker=createWorker})


define("plugins/c9.ide.language/language",[],function(require,exports,module){function main(options,imports,register){
function onCursorChange(e,sender,now){if(worker.$doc){var cursorPos=worker.$doc.selection.getCursor(),line=worker.$doc.getDocument().getLine(cursorPos.row)


emit("cursormove",{doc:worker.$doc,pos:cursorPos,line:line,selection:worker.$doc.selection,now:now})}
}function onChange(e){worker.changeListener(e),worker._signal("change",e)}function onChangeMode(){var tab=worker&&worker.$doc&&worker.$doc.c9doc&&worker.$doc.c9doc.tab


tab&&notifyWorker("switchFile",{tab:tab})}function notifyWorker(type,e){if(!worker)return plugin.once("initWorker",notifyWorker.bind(null,type,e),plugin)


var tab=e.tab,path=getTabPath(tab),c9session=tab.document.getSession()
if(tab.document.hasValue&&!tab.document.hasValue())return void tab.document.once("setValue",function(){
setTimeout(function(){notifyWorker(type,e)})},plugin)
var session=c9session&&c9session.loaded&&c9session.session
if(session){var immediateWindow=session.repl?tab.name:null
session!==worker.$doc&&"switchFile"===type&&(worker.$doc&&(worker.$doc.off("change",onChange),worker.$doc.off("changeMode",onChangeMode),
worker.$doc.c9doc.tab.off("setPath",onChangeMode),worker.$doc.selection.off("changeCursor",onCursorChange)),
worker.$doc=session,session.selection.on("changeCursor",onCursorChange),session.c9doc.tab.on("setPath",onChangeMode),
session.on("changeMode",onChangeMode),session.on("change",onChange))
var syntax=session.syntax
!syntax&&session.$modeId&&(syntax=/[^\/]*$/.exec(session.$modeId)[0]||syntax,session.syntax=syntax)
var last=lastWorkerMessage
if(last.type!==type||last.path!==path||last.immediateWindow!==immediateWindow||last.syntax!==syntax){
lastWorkerMessage={type:type,path:path,immediateWindow:immediateWindow,syntax:syntax}
var value=e.value||session.doc.$lines||[]
return draw(),clearTimeout(delayedTransfer),"switchFile"===type&&value.length>BIG_FILE_LINES?delayedTransfer=setTimeout(notifyWorkerTransferData.bind(null,type,path,immediateWindow,syntax,value),BIG_FILE_DELAY):notifyWorkerTransferData(type,path,immediateWindow,syntax,value,e.force)

}}}function notifyWorkerTransferData(type,path,immediateWindow,syntax,value,force){if(force||"switchFile"!==type||getTabPath(getActiveTab())===path)return void 0===options.workspaceDir&&console.error("[language] options.workspaceDir is undefined!"),
"switchFile"===type&&worker.deltaQueue&&(value=worker.$doc.$lines,worker.deltaQueue=null),worker.call(type,[path,immediateWindow,syntax,value,null,options.workspaceDir]),
"switchFile"===type&&worker._signal("changeMode"),!0}function getTabPath(tab){return tab&&(tab.path||tab.name)

}function load(){if(loaded)return!1
loaded=!0
var id="plugins/c9.ide.language.core/worker"
if(options.workerPrefix)var path=options.workerPrefix.replace(/\/?$/,"/")+id+".js"
if(UI_WORKER)worker=new UIWorkerClient(["treehugger","ace","c9","plugins"],id,"LanguageWorker",path),
"sync"===UI_WORKER&&worker.setEmitSync(!0)
else{try{worker=new WorkerClient(["treehugger","ace","c9","plugins","acorn","tern"],id,"LanguageWorker",path||(options.staticPrefix||"/static")+"/lib/ace/lib/ace/worker/worker.js")

}catch(e){if(18===e.code&&window.location&&"file://"===window.location.origin)throw new Error("Cannot load worker from file:// protocol, please host a server on localhost instead or use ?noworker=1 to use a worker in the UI thread (can cause slowdowns)")


throw e}worker.reportError=function(err){console.error(err.stack||err),imports.error_handler.reportError(err,{},["worker"])

},worker.$worker.onerror=function(e){e.preventDefault()}}worker.call("setStaticPrefix",[net.qualifyURL(options.staticPrefix||c9.staticUrl||"/static")]),
document.location.hostname.match(/c9.dev|cloud9beta.com|localhost|127.0.0.1/)&&worker.call("setDebug",[!0]),
aceHandle.on("create",function(e){e.editor.on("createAce",function(ace){emit("attachToEditor",ace)},plugin)

},plugin),tabs.on("tabDestroy",function(e){var path=e.tab.path
path&&worker.emit("documentClose",{data:path})
var c9session=e.tab.document.getSession()
c9session&&c9session.session===worker.$doc&&(worker.$doc=null)},plugin),tabs.on("open",function(e){isEditorSupported(e.tab)&&(notifyWorker("documentOpen",e),
tabs.getPanes||notifyWorker("switchFile",{tab:e.tab}))},plugin),tabs.on("focusSync",function(e){isEditorSupported(e.tab)&&notifyWorker("switchFile",e)

},plugin),emit.sticky("initWorker",{worker:worker}),settings.on("read",function(){setTimeout(function(){
updateSettings()})},plugin),settings.once("read",function(){settings.setDefaults("user/language",[["hints",!0],["continuousCompletion",!0],["instanceHighlight",!0],["enterCompletion",!0]]),
settings.setDefaults("project/language",[["warnLevel","info"],["undeclaredVars",!0],["eslintrc",!0],["semi",!0],["unusedFunctionArgs",!1]]),
settings.on("user/language",updateSettings,plugin),settings.on("project/language",updateSettings,plugin)

},plugin),prefs.add({Project:{"Hints & Warnings":{position:700,"Warning Level":{type:"dropdown",path:"project/language/@warnLevel",
items:[{caption:"Error",value:"error"},{caption:"Warning",value:"warning"},{caption:"Info",value:"info"
}],position:5e3},"Mark Missing Optional Semicolons":{type:"checkbox",path:"project/language/@semi",position:7e3
},"Mark Undeclared Variables":{type:"checkbox",path:"project/language/@undeclaredVars",position:8e3},
"Mark Unused Function Arguments":{type:"checkbox",path:"project/language/@unusedFunctionArgs",position:9e3
},"Ignore Messages Matching Regex":{title:[null,"Ignore Messages Matching ",["a",{href:"http://en.wikipedia.org/wiki/Regular_expression",
target:"blank"},"Regex"]],type:"textbox",path:"project/language/@ignoredMarkers",width:300,position:11e3
}},"JavaScript Support":{position:1100,"Customize JavaScript Warnings With .eslintrc":{title:[null,"Customize JavaScript Warnings With ",["a",{
href:"http://eslint.org/docs/user-guide/configuring",target:"blank"},".eslintrc"]],position:210,type:"checkbox",
path:"project/language/@eslintrc"}}}},plugin),prefs.add({Language:{position:500,Input:{position:100,"Complete As You Type":{
type:"checkbox",path:"user/language/@continuousCompletion",position:4e3},"Complete On Enter":{type:"checkbox",
path:"user/language/@enterCompletion",position:5e3},"Highlight Variable Under Cursor":{type:"checkbox",
path:"user/language/@instanceHighlight",position:6e3}},"Hints & Warnings":{position:200,"Enable Hints and Warnings":{
type:"checkbox",path:"user/language/@hints",position:1e3},'Ignore Messages Matching <a href="http://en.wikipedia.org/wiki/Regular_expression" target="blank">Regex</a>':{
type:"textbox",path:"user/language/@ignoredMarkers",position:3e3}}}},plugin),commands.addCommand({name:"expandSnippet",
bindKey:"Tab",exec:function(editor){return editor&&editor.ace.expandSnippet()},isAvailable:function(editor){
var ace=editor&&editor.ace
if(ace&&ace.selection.isEmpty())return ace.expandSnippet({dryRun:!0})}},plugin)}function getActiveTab(){
return isEditorSupported(tabs.focussedTab)?tabs.focussedTab:tabs.getPanes().map(function(p){return p.activeTab

}).filter(function(t){return isEditorSupported(t)})[0]}function draw(){drawn||(emit("draw"),drawn=!0)

}function getWorker(callback){return worker?setTimeout(callback.bind(null,null,worker)):void plugin.once("initWorker",function(){
callback(null,worker)},plugin)}function updateSettings(e){function updateFeatures(type,names){names.forEach(function(s){
worker.call("enableFeature",[s,settings.getBool(type+"/language/@"+s)])})}return worker?(updateFeatures("user",["instanceHighlight","hints"]),
updateFeatures("project",["unusedFunctionArgs","undeclaredVars","eslintrc","semi"]),worker.call("setWarningLevel",[settings.get("project/language/@warnLevel")]),
isContinuousCompletionEnabledSetting=settings.get("user/language/@continuousCompletion"),ignoredMarkers=(settings.get("user/language/@ignoredMarkers")||"(?!NONE)NONE")+"|"+(settings.get("project/language/@ignoredMarkers")||"(?!NONE)NONE"),
void refreshAllMarkers()):plugin.once("initWorker",updateSettings,plugin)}function refreshAllMarkers(){
if(refreshAllPending++,!(refreshAllPending>1)){var activeTabs=tabs.getPanes().map(function(pane){return pane.getTab()

}),focussedTab=tabs.focussedTab
activeTabs=activeTabs.filter(function(tab){return tab!==focussedTab}).concat(focussedTab),async.forEachSeries(activeTabs,function(tab,next){
return isEditorSupported(tab)&&tab!==focussedTab?(lastWorkerMessage={},notifyWorker("switchFile",{tab:tab,
force:!0})?void worker.once("markers",function(e){next()}):next()):next()},function(){return refreshAllPending>1?(refreshAllPending=0,
setTimeout(function(){refreshAllPending=0,refreshAllMarkers()},100)):(refreshAllPending=0,lastWorkerMessage={},
void(tabs.focussedTab&&notifyWorker("switchFile",{tab:tabs.focussedTab})))})}}function isEditorSupported(tab){
return tab&&["ace","immediate"].indexOf(tab.editor?tab.editor.type:tab.editorType)!==-1}function isInferAvailable(){
return c9.hosted}function isContinuousCompletionEnabled(){return isContinuousCompletionEnabledSetting

}function getIgnoredMarkers(){return ignoredMarkers}function setContinuousCompletionEnabled(value){isContinuousCompletionEnabledSetting=value

}function registerLanguageHandler(modulePath,contents,callback,plugin){"function"==typeof contents&&(plugin=callback,
callback=contents,contents=null),getWorker(function(err,worker){return err?console.error("Could not find worker",err):(worker.on("registered",function reply(e){
e.data.path===modulePath&&(worker.removeEventListener(reply),plugin&&plugin.on("unload",unregisterLanguageHandler.bind(null,modulePath)),
callback&&callback(e.data.err,createEmitter(modulePath)))}),modulePath&&updateRequireConfig(modulePath,worker),
void worker.call("register",[modulePath,contents]))})}function unregisterLanguageHandler(modulePath){
getWorker(function(err,worker){return err?console.error(err):void(worker.$worker&&worker.call("unregister",[modulePath]))

})}function createEmitter(modulePath){return{on:function(event,listener){worker.on(modulePath+"/"+event,function(e){
listener(e.data)})},once:function(event,listener){worker.once(modulePath+"/"+event,function(e){listener(e.data)

})},off:function(event,listener){worker.off(modulePath+"/"+event,listener)},emit:function(event,data){
worker.emit(modulePath+"/"+event,{data:data})}}}function updateRequireConfig(modulePath,worker){var path=window.requirejs.toUrl(modulePath,"",!0),url=require.toUrl(path)


if(/^\w+:/.test(url)){var paths={}
paths[path]=url,worker.call("initBaseUrls",[paths])}}var delayedTransfer,isContinuousCompletionEnabledSetting,initedTabs,ignoredMarkers,c9=imports.c9,Plugin=imports.Plugin,settings=imports.settings,aceHandle=imports.ace,tabs=imports.tabManager,prefs=imports.preferences,commands=imports.commands,WorkerClient=require("ace/worker/worker_client").WorkerClient,UIWorkerClient=require("ace/worker/worker_client").UIWorkerClient,net=require("ace/lib/net"),async=require("async"),BIG_FILE_LINES=5e3,BIG_FILE_DELAY=500,UI_WORKER_DELAY=3e3,INITIAL_DELAY=2e3,UI_WORKER=window.location&&/[?&]noworker=(\w+)|$/.exec(window.location.search)[1]||options.useUIWorker,lastWorkerMessage={},refreshAllPending=0,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


emit.setMaxListeners(50)
var worker,loaded=!1
aceHandle.on("create",function(e){var editor=e.editor
!initedTabs&&tabs.getPanes&&tabs.once("ready",function(){if(!initedTabs){tabs.getTabs().forEach(function(tab){
isEditorSupported(tab)&&setTimeout(function(){if(tab.value)return notifyWorker("documentOpen",{tab:tab,
value:tab.value})
var value=tab.document.value
return value?notifyWorker("documentOpen",{tab:tab,value:value}):void tab.document.once("valueSet",function(e){
notifyWorker("documentOpen",{tab:tab,value:e.value})})},UI_WORKER?UI_WORKER_DELAY:INITIAL_DELAY)})
var activeTab=getActiveTab()
isEditorSupported(activeTab)&&notifyWorker("switchFile",{tab:activeTab}),initedTabs=!0}}),editor.on("documentLoad",function(e){
var session=e.doc.getSession().session
notifyWorker("documentOpen",{tab:e.doc.tab}),session.once("changeMode",function(){tabs.focussedTab===e.doc.tab&&notifyWorker("switchFile",{
tab:e.doc.tab})})}),editor.on("documentUnload",function(e){})},plugin)
var drawn
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,worker.terminate(),clearTimeout(delayedTransfer),delayedTransfer=null,
lastWorkerMessage={},refreshAllPending=0,isContinuousCompletionEnabledSetting=void 0,initedTabs=!1,ignoredMarkers=void 0,
drawn=!1}),plugin.freezePublicAPI({isEditorSupported:isEditorSupported,isContinuousCompletionEnabled:isContinuousCompletionEnabled,
setContinuousCompletionEnabled:setContinuousCompletionEnabled,isInferAvailable:isInferAvailable,registerLanguageHandler:registerLanguageHandler,
unregisterLanguageHandler:unregisterLanguageHandler,getWorker:getWorker,onCursorChange:onCursorChange,
getIgnoredMarkers:getIgnoredMarkers,refreshAllMarkers:refreshAllMarkers,_events:[]}),register(null,{language:plugin
})}return main.consumes=["Plugin","c9","settings","ace","tabManager","preferences","commands","error_handler"],
main.provides=["language"],main})


define("plugins/c9.ide.watcher/gui",[],function(require,exports,module){function main(options,imports,register){
function load(){function initializeDocument(doc){doc.meta.$savedValue||(doc.meta.$savedValue=doc.recentValue),
doc.on("setValue",function(e){doc.meta.$savedValue=e.value},plugin)}function initializeTab(tab){tab.path&&(tab.document.undoManager.isAtBookmark()&&initializeDocument(tab.document),
tab.classList.contains("conflict")&&addChangedTab(tab,comparisonType.TIMESTAMP_AND_CONTENTS))}return!loaded&&(loaded=!0,
removedPaths={},changedPaths={},settings.on("read",function(e){settings.setDefaults("user/general",[["automerge","false"],["confirmmerge","true"]])

}),prefs.add({File:{position:150,Watchers:{position:300,"Auto-Merge Files When a Conflict Occurs":{type:"checkbox",
path:"user/general/@automerge",min:"1",max:"64",tooltip:"Whenever the file watcher detects a file change on disk, 'auto merge' will fetch the contents from disc and merges it with the version in the editor.",
position:2200}}}},plugin),tabManager.getTabs().forEach(initializeTab),tabManager.on("open",function(e){
initializeTab(e.tab)},plugin),save.on("beforeSave",function(e){e.document.meta.$savingValue=e.save,e.tab.classList.contains("conflict")&&showChangeDialog(e.tab)

},plugin),save.on("afterSave",function(e){var meta=e.document.meta
e.err||(meta.$savedValue=meta.$savingValue,watcher.watch(e.path)),delete meta.$savingValue,delete meta.$mergeRoot

},plugin),watcher.on("change",function(e){var tab=tabManager.findTab(e.path)
if(tab){if(collabEnabled&&"ace"==tab.editorType)return(!tab.meta.$lastCollabChange||tab.meta.$lastCollabChange<Date.now()-1e3)&&tab.meta.$collabChangeRegistered&&clearTimeout(tab.meta.$collabChangeRegistered),
!1
addChangedTab(tab,comparisonType.TIMESTAMP_AND_CONTENTS)}}),collab.on("change",function(e){var tab=tabManager.findTab(e.path)


tab&&addChangedTab(tab,comparisonType.NONE)}),collab.on("resolveConflict",function(e){var tab=tabManager.findTab(e.path)


if(tab){var doc=tab.document,path=tab.path
resolveConflict(doc,path)}}),void watcher.on("delete",function(e){var tab=tabManager.findTab(e.path)
tab&&addDeletedTab(tab)}))}function resolveConflict(doc,path){doc.tab.classList.remove("conflict"),delete doc.meta.$merge,
delete changedPaths[path]}function resolve(doc,path){collabEnabled&&collab.send&&collab.send({type:"RESOLVE_CONFLICT",
data:{docId:path}}),resolveConflict(doc,path)}function isTabSaving(tab){return!!tab.document.meta.$saving

}function addChangedTab(tab,doubleCheckComparisonType){if(!(changedPaths[tab.path]&&(changedPaths[tab.path].data&&(changedPaths[tab.path].dirty=!0),
changeDialog&&changeDialog.visible)||isTabSaving(tab))){if(tabManager.focussedTab&&"terminal"==tabManager.focussedTab.editorType)return void tabManager.once("focus",function(){
addChangedTab(tab,comparisonType.CONTENTS)})
var doc=tab.document,path=tab.path
switch(changedPaths[tab.path]={tab:tab,resolve:resolve.bind(null,doc,path)},doubleCheckComparisonType){
case comparisonType.TIMESTAMP_AND_CONTENTS:checkByStatOrContents(tab)
break
case comparisonType.CONTENTS:checkByContents(tab)
break
case comparisonType.NONE:showChangeDialog(tab)}}}function createChangeDialog(tab,data){var doc=tab.document,path=tab.path


if(changedPaths[path])return changedPaths[path].data=data||changedPaths[path].data,tabManager.focussedTab&&!changedPaths[tabManager.focussedTab.path]?(doc.tab.classList.add("conflict"),
void tabManager.once("focus",function(){showChangeDialog(tab,data)})):void(tabManager.findTab(path)&&showChangeDialog(tab,data))

}function checkByStatOrContents(tab){var doc=tab.document,path=tab.path
fs.stat(path,function(err,stat){return!err&&doc.meta.timestamp>=stat.mtime?resolve(doc,path):void checkByContents(tab,stat)

})}function checkByContents(tab,stat){var doc=tab.document,path=tab.path
fs.readFile(path,function(err,data){return err?(console.warn("[watchers] Could not read",path,"will assume it got changed"),
createChangeDialog(tab)):data===doc.meta.$savedValue?resolve(doc,path):(void 0==doc.meta.$mergeRoot&&(doc.meta.$mergeRoot=doc.meta.$savedValue||doc.recentValue),
doc.meta.$savedValue=data,stat&&(doc.meta.timestamp=stat.mtime),data===doc.value?(doc.undoManager.bookmark(),
void resolve(doc,path)):(void 0==doc.meta.$merge&&(doc.meta.$merge=!doc.undoManager.isAtBookmark()),doc.undoManager.bookmark(-2),
void(automerge(tab,data)?resolve(doc,path):createChangeDialog(tab,data))))})}function automerge(tab,data){
return!!settings.getBool("user/general/@automerge")&&merge(tab,data)}function merge(tab,data){if("ace"!=tab.editor.type)return!1


var doc=tab.document,root=doc.meta.$mergeRoot||doc.meta.$savedValue
if("string"!=typeof root)return!1
var aceDoc=doc.getSession().session.doc,mergedValue=threeWayMerge(root,data,aceDoc)
return doc.meta.$mergeRoot=data,mergedValue==data&&(doc.undoManager.bookmark(),save.save(tab)),!0}function getLatestValue(path,callback){
changedPaths[path]&&!changedPaths[path].dirty&&changedPaths[path].data?callback(null,path,changedPaths[path].data):fs.readFile(path,function(err,data){
callback(err,path,data)})}function updateChangedPath(err,path,data){if(changedPaths[path]){var tab=changedPaths[path].tab||tabManager.findTab(path)


if(!tab)return changedPaths[path].resolve()
var doc=tab.document
doc.setBookmarkedValue(data,!0),doc.meta.timestamp=Date.now()-settings.timeOffset,changedPaths[path].resolve(),
save.save(tab)}}function mergeChangedPath(err,path,data){merge(changedPaths[path].tab,data),changedPaths[path].resolve()

}function showChangeDialog(tab,data){function no(all){if(all)for(var id in changedPaths)changedPaths[id].tab.document.undoManager.bookmark(-2),
changedPaths[id].resolve()
else changedPaths[path].tab.document.undoManager.bookmark(-2),changedPaths[path].resolve()
checkIfQueueIsEmpty()}function yes(all){if(all)for(var id in changedPaths)getLatestValue(id,updateChangedPath)
else getLatestValue(path,updateChangedPath)
checkIfQueueIsEmpty()}var path,merge
if(changeDialog){if(1===changeDialog.visible)return void(question.all=!0)
if(void 0===changeDialog.visible)return void changeDialog.on("show",function(){question.all=!0})}path=tab.path,
merge=tab.document.meta.$merge&&"string"==typeof tab.document.meta.$savedValue,changeDialog=merge?filechange.show("File Changed",path+" has been changed on disk.",null,no,yes,function(all){
if(all){askAutoMerge()
for(var id in changedPaths)getLatestValue(id,mergeChangedPath)}else askAutoMerge(),getLatestValue(path,mergeChangedPath)


checkIfQueueIsEmpty()},{merge:!0,all:Object.keys(changedPaths).length>1}):question.show("File Changed",path+" has been changed on disk.","Would you like to reload this file?",yes,no,{
yes:"Reload",no:"Keep current version",all:Object.keys(changedPaths).length>1}),initialFocus||(initialFocus=tabManager.focussedTab),
tabManager.focusTab(tab)}function addDeletedTab(tab,force){if(force||!removedPaths[tab.path])return tabManager.focussedTab&&"terminal"==tabManager.focussedTab.editorType?void tabManager.once("focus",function(){
addDeletedTab(tab,!0)}):void fs.stat(tab.path,function(err,data){if(err&&"ENOENT"===err.code){if(removedPaths[tab.path]={
tab:tab},deleteDialog){if(1===deleteDialog.visible)return void(question.all=!0)
if(void 0===deleteDialog.visible)return void deleteDialog.on("show",function(){question.all=!0})}if(!tabManager.findTab(tab.path))return


showDeleteDialog(tab)}else watcher.watch(tab.path)})}function showDeleteDialog(tab){var path=tab.path


deleteDialog=question.show("File removed, keep tab open?",path+" has been deleted, or is no longer available.","Do you wish to keep the file open in the editor?",function(all){
var doc
if(all){for(var id in removedPaths)doc=removedPaths[id].tab.document,doc.undoManager.bookmark(-2),doc.meta.newfile=!0


removedPaths={}}else doc=removedPaths[path].tab.document,doc.undoManager.bookmark(-2),doc.meta.newfile=!0,
delete removedPaths[path]
checkIfQueueIsEmpty()},function(all,cancel){if(all){for(var id in removedPaths)closeTab(removedPaths[id].tab,!0)


removedPaths={}}else closeTab(removedPaths[path].tab),delete removedPaths[path]
checkIfQueueIsEmpty()},{all:Object.keys(removedPaths).length>1,yes:"Keep open",yestoall:"Keep all open",
no:"Close tab"}),deleteDialog.on("show",function(){if(!tabManager.findTab(path))return!1}),initialFocus||(initialFocus=tabManager.focussedTab),
tabManager.focusTab(tab)}function checkIfQueueIsEmpty(){for(var path in changedPaths)return showChangeDialog(changedPaths[path].tab,changedPaths[path].data)


for(var path in removedPaths)return showDeleteDialog(removedPaths[path].tab)
initialFocus&&(tabManager.focusTab(initialFocus),initialFocus=null)}function closeTab(tab,noAnim){tab.document.meta.$ignoreSave=!0,
tab.close(noAnim),delete tab.document.meta.$ignoreSave}function askAutoMerge(){settings.getBool("user/general/@confirmmerge")&&question.show("Always merge?","Always merge on file changes?","With 'auto merge' enabled, if a file changes on disk and you have unsaved changes in the IDE, it will automatically attempt to merge your changes with the new file. This setting can be controlled from the settings panel as well.",function(){
question.dontAsk&&settings.set("user/general/@confirmmerge","false"),settings.set("user/general/@automerge","true")

},function(){question.dontAsk&&settings.set("user/general/@confirmmerge","false"),settings.set("user/general/@automerge","false")

},{showDontAsk:!0})}var removedPaths,changedPaths,deleteDialog,changeDialog,initialFocus,Plugin=imports.Plugin,watcher=imports.watcher,prefs=imports.preferences,fs=imports.fs,save=imports.save,settings=imports.settings,tabManager=imports.tabManager,question=imports["dialog.question"],filechange=imports["dialog.filechange"],threeWayMerge=imports.threewaymerge.merge,collab=imports.collab,collabEnabled=options.collab,comparisonType={
TIMESTAMP_AND_CONTENTS:"TIMESTAMP_AND_CONTENTS",CONTENTS:"CONTENTS",NONE:"NONE"},plugin=new Plugin("Ajax.org",main.consumes),loaded=(plugin.getEmitter(),
!1)
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({}),register(null,{"watcher.gui":plugin
})}return main.consumes=["Plugin","fs","settings","preferences","watcher","tabManager","save","dialog.question","dialog.filechange","threewaymerge","collab"],
main.provides=["watcher.gui"],main})


define("plugins/c9.ide.watcher/watcher",[],function(require,exports,module){function main(options,imports,register){
function load(){function ignoreHandler(e){options&&options.testing||ignore(e.path,6e4)}function doneHandler(e){
options&&options.testing||(clearTimeout(ignored[e.path]),ignored[e.path]=setTimeout(function(){unignore(e.path)

},IGNORE_TIMEOUT))}function unwatchChildren(e){e.watchers=[],Object.keys(handlers).forEach(function(path){
(path==e.path||path.startsWith(e.path+"/"))&&unwatch(path)&&e.watchers.push(path.slice(e.path.length))

}),ignoreHandler(e)}function rewatchChildren(e){doneHandler(e)
var toPath=e.result[0]?e.path:e.args[1]
e.watchers.forEach(function(path){watch(toPath+path)})}return!loaded&&(loaded=!0,fs.on("beforeWriteFile",ignoreHandler,plugin),
fs.on("afterWriteFile",doneHandler,plugin),fs.on("beforeRename",unwatchChildren,plugin),fs.on("afterRename",rewatchChildren,plugin),
fs.on("beforeMkdir",ignoreHandler,plugin),fs.on("afterMkdir",doneHandler,plugin),fs.on("beforeMkdirP",ignoreHandler,plugin),
fs.on("afterMkdirP",doneHandler,plugin),fs.on("beforeUnlink",ignoreHandler,plugin),fs.on("afterUnlink",doneHandler,plugin),
fs.on("beforeRmfile",ignoreHandler,plugin),fs.on("afterRmfile",doneHandler,plugin),fs.on("beforeRmdir",ignoreHandler,plugin),
fs.on("afterRmdir",doneHandler,plugin),c9.on("disconnect",function(){cached||(cached=Object.keys(handlers)),
handlers={}}),void c9.on("connect",function(){cached&&(handlers={},cached.forEach(function(path){watch(path)

}),cached=null)}))}function handleError(err,path){return"EDISCONNECT"!==err.code&&("function"==typeof handlers[path]&&fs.unwatch(path,handlers[path]),
delete handlers[path],emit("failed",{path:path}),!1)}function ignore(path,timeout,skipParent){if(timeout||(timeout=IGNORE_TIMEOUT),
ignored[path]&&clearTimeout(ignored[path]),ignored[path]=setTimeout(function(){unignore(path)},timeout),
!skipParent){var parent=dirname(path)
parent!=path&&ignore(parent,timeout,!0)}}function unignore(path){var parent=dirname(path)
clearTimeout(ignored[path]),clearTimeout(ignored[parent]),delete ignored[path],delete ignored[parent]

}function watch(path,$refresh,$force){var handler=handlers[path]
return $force||!handler||handler instanceof Date&&!(handler.getTime()+6e4>Date.now())?($force||(handler&&clearTimeout(handler.timeout),
handlers[path]=handler=new Date,handlers[path].retries=0),void fs.watch(path,function handler(err,event,filename,stat,files){
function fireWatcherEvent(eventSuffix){if("error"==event){if(".all"!=eventSuffix)return}else"delete"==event?(fs.unwatch(path,handler),
delete handlers[path],emit("delete"+eventSuffix,{path:path})):"directory"==event?emit("directory"+eventSuffix,{
path:path,files:files,stat:stat}):emit("change"+eventSuffix,{type:event,filename:filename,path:path,stat:stat
})}return err?"ENOENT"==err.code&&handlers[path]&&handlers[path].retries<1?(handlers[path].retries++,
handlers[path].timeout=setTimeout(function(){watch(path,$refresh,!0)},1e3),!1):handleError(err,path):(filename||(filename=basename(path)),
"init"==event?(handler.unwatchScheduled?(fs.unwatch(path,handler),emit("unwatch",{path:path})):handlers[path]=handler,
void($refresh&&fs.readdir(path,function(){}))):void(ignored[path]||!options.testing&&stat.vfsWrite?(WAIT_FOR_SIGNAL&&ignore(path,200),
fireWatcherEvent(".all")):(fireWatcherEvent(""),fireWatcherEvent(".all"))))})):void(handler.unwatchScheduled=!1)

}function unwatch(path){handlers[path]&&("function"==typeof handlers[path]?(fs.unwatch(path,handlers[path]),
emit("unwatch",{path:path}),delete handlers[path]):handlers[path].unwatchScheduled=!0)}function check(path,timestamp){
fs.stat(path,function(err,stat){if(err){if("EDISCONNECT"==err.code)return
"ENOENT"!=err.code&&"EBADF"!=err.code||(console.log("[watcher] sending artificial check event for",path,"(deleted)",stat),
emit("delete",{path:path}))}else timestamp<stat.mtime&&(console.log("[watcher] sending artificial check event for",path,"(expected mtime "+timestamp+")",stat),
emit("change",{type:"change",filename:basename(path),path:path,stat:stat}))})}var cached,Plugin=imports.Plugin,fs=imports.fs,c9=imports.c9,basename=require("path").basename,dirname=require("path").dirname,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),WAIT_FOR_SIGNAL=!1,IGNORE_TIMEOUT=WAIT_FOR_SIGNAL?6e4:1e3,ignored={},handlers={},loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({_events:["change","delete","directory","failed","unwatch"],
watch:watch,unwatch:unwatch,check:check,ignore:ignore}),register(null,{watcher:plugin})}return main.consumes=["c9","Plugin","fs"],
main.provides=["watcher"],main})


define("plugins/c9.ide.threewaymerge/diff",[],function(require,exports,module){"use strict"
var DiffMatchPatch=require("./diff_match_patch_amd").diff_match_patch,Diff=module.exports={longest_common_subsequence:function(file1,file2){
for(var dmp=new DiffMatchPatch,d=dmp.diff_main(file1,file2,!1),candidate={file1index:-1,file2index:-1,
chain:null},i1=0,i2=0,i=0;i<d.length;i++){var change=d[i],op=change[0],text=change[1]
if(0===op)for(var j=0;j<text.length;j++)candidate={file1index:i1++,file2index:i2++,chain:candidate}
else 1===op?i2+=text.length:op===-1&&(i1+=text.length)}return candidate},longest_common_subsequence2:function(file1,file2){
var equivalenceClasses,file2indices,newCandidate,candidates,line,c,i,j,jX,r,s
for(equivalenceClasses={},j=0;j<file2.length;j++)line=file2[j],equivalenceClasses[line]?equivalenceClasses[line].push(j):equivalenceClasses[line]=[j]


for(candidates=[{file1index:-1,file2index:-1,chain:null}],i=0;i<file1.length;i++){for(line=file1[i],file2indices=equivalenceClasses[line]||[],
r=0,c=candidates[0],jX=0;jX<file2indices.length;jX++){for(j=file2indices[jX],s=r;s<candidates.length&&!(candidates[s].file2index<j&&(s==candidates.length-1||candidates[s+1].file2index>j));s++);
if(s<candidates.length&&(newCandidate={file1index:i,file2index:j,chain:candidates[s]},r==candidates.length?candidates.push(c):candidates[r]=c,
r=s+1,c=newCandidate,r==candidates.length))break}candidates[r]=c}return candidates[candidates.length-1]

},diff_comm:function(file1,file2){function processCommon(){common.common.length&&(common.common.reverse(),
result.push(common),common={common:[]})}for(var result=[],tail1=file1.length,tail2=file2.length,common={
common:[]},candidate=Diff.longest_common_subsequence(file1,file2);null!==candidate;candidate=candidate.chain){
for(var different={file1:[],file2:[]};--tail1>candidate.file1index;)different.file1.push(file1[tail1])


for(;--tail2>candidate.file2index;)different.file2.push(file2[tail2]);(different.file1.length||different.file2.length)&&(processCommon(),
different.file1.reverse(),different.file2.reverse(),result.push(different)),tail1>=0&&common.common.push(file1[tail1])

}return processCommon(),result.reverse(),result},diff_patch:function(file1,file2){function chunkDescription(file,offset,length){
for(var chunk=[],i=0;i<length;i++)chunk.push(file[offset+i])
return{offset:offset,length:length,chunk:chunk}}for(var result=[],tail1=file1.length,tail2=file2.length,candidate=Diff.longest_common_subsequence(file1,file2);null!==candidate;candidate=candidate.chain){
var mismatchLength1=tail1-candidate.file1index-1,mismatchLength2=tail2-candidate.file2index-1
tail1=candidate.file1index,tail2=candidate.file2index,(mismatchLength1||mismatchLength2)&&result.push({
file1:chunkDescription(file1,candidate.file1index+1,mismatchLength1),file2:chunkDescription(file2,candidate.file2index+1,mismatchLength2)
})}return result.reverse(),result},strip_patch:function(patch){for(var newpatch=[],i=0;i<patch.length;i++){
var chunk=patch[i]
newpatch.push({file1:{offset:chunk.file1.offset,length:chunk.file1.length},file2:{chunk:chunk.file2.chunk
}})}return newpatch},invert_patch:function(patch){for(var i=0;i<patch.length;i++){var chunk=patch[i],tmp=chunk.file1


chunk.file1=chunk.file2,chunk.file2=tmp}},patch:function(file,patch){function copyCommon(targetOffset){
for(;commonOffset<targetOffset;)result.push(file[commonOffset]),commonOffset++}for(var result=[],commonOffset=0,chunkIndex=0;chunkIndex<patch.length;chunkIndex++){
var chunk=patch[chunkIndex]
copyCommon(chunk.file1.offset)
for(var lineIndex=0;lineIndex<chunk.file2.chunk.length;lineIndex++)result.push(chunk.file2.chunk[lineIndex])


commonOffset+=chunk.file1.length}return copyCommon(file.length),result},diff_indices:function(file1,file2){
for(var result=[],tail1=file1.length,tail2=file2.length,candidate=Diff.longest_common_subsequence(file1,file2);null!==candidate;candidate=candidate.chain){
var mismatchLength1=tail1-candidate.file1index-1,mismatchLength2=tail2-candidate.file2index-1
tail1=candidate.file1index,tail2=candidate.file2index,(mismatchLength1||mismatchLength2)&&result.push({
file1:[tail1+1,mismatchLength1],file2:[tail2+1,mismatchLength2]})}return result.reverse(),result},diff3_merge_indices:function(a,o,b){
function addHunk(h,side){hunks.push([h.file1[0],side,h.file1[1],h.file2[0],h.file2[1]])}function copyCommon(targetOffset){
targetOffset>commonOffset&&(result.push([1,commonOffset,targetOffset-commonOffset]),commonOffset=targetOffset)

}var i,m1=Diff.diff_indices(o,a),m2=Diff.diff_indices(o,b),hunks=[]
for(i=0;i<m1.length;i++)addHunk(m1[i],0)
for(i=0;i<m2.length;i++)addHunk(m2[i],2)
hunks.sort()
for(var result=[],commonOffset=0,hunkIndex=0;hunkIndex<hunks.length;hunkIndex++){for(var firstHunkIndex=hunkIndex,hunk=hunks[hunkIndex],regionLhs=hunk[0],regionRhs=regionLhs+hunk[2];hunkIndex<hunks.length-1;){
var maybeOverlapping=hunks[hunkIndex+1],maybeLhs=maybeOverlapping[0]
if(maybeLhs>regionRhs)break
regionRhs=Math.max(regionRhs,maybeLhs+maybeOverlapping[2]),hunkIndex++}if(copyCommon(regionLhs),firstHunkIndex==hunkIndex)hunk[4]>0&&result.push([hunk[1],hunk[3],hunk[4]])
else{var regions={0:[a.length,-1,o.length,-1],2:[b.length,-1,o.length,-1]}
for(i=firstHunkIndex;i<=hunkIndex;i++){hunk=hunks[i]
var side=hunk[1],r=regions[side],oLhs=hunk[0],oRhs=oLhs+hunk[2],abLhs=hunk[3],abRhs=abLhs+hunk[4]
r[0]=Math.min(abLhs,r[0]),r[1]=Math.max(abRhs,r[1]),r[2]=Math.min(oLhs,r[2]),r[3]=Math.max(oRhs,r[3])

}var aLhs=regions[0][0]+(regionLhs-regions[0][2]),aRhs=regions[0][1]+(regionRhs-regions[0][3]),bLhs=regions[2][0]+(regionLhs-regions[2][2]),bRhs=regions[2][1]+(regionRhs-regions[2][3])


result.push([-1,aLhs,aRhs-aLhs,regionLhs,regionRhs-regionLhs,bLhs,bRhs-bLhs])}commonOffset=regionRhs}
return copyCommon(o.length),result},diff3_merge:function(a,o,b,excludeFalseConflicts){function flushOk(){
okLines.length&&result.push({ok:okLines}),okLines=[]}function pushOk(xs){for(var j=0;j<xs.length;j++)okLines.push(xs[j])

}function isTrueConflict(rec){if(rec[2]!=rec[6])return!0
for(var aoff=rec[1],boff=rec[5],j=0;j<rec[2];j++)if(a[j+aoff]!=b[j+boff])return!0
return!1}for(var result=[],files=[a,o,b],indices=Diff.diff3_merge_indices(a,o,b),okLines=[],i=0;i<indices.length;i++){
var x=indices[i],side=x[0]
side==-1?excludeFalseConflicts&&!isTrueConflict(x)?pushOk(files[0].slice(x[1],x[1]+x[2])):(flushOk(),
result.push({conflict:{a:a.slice(x[1],x[1]+x[2]),aIndex:x[1],o:o.slice(x[3],x[3]+x[4]),oIndex:x[3],b:b.slice(x[5],x[5]+x[6]),
bIndex:x[5]}})):pushOk(files[side].slice(x[1],x[1]+x[2]))}return flushOk(),result}}})


define("plugins/c9.ide.threewaymerge/threewaymerge",[],function(require,exports,module){"use strict"
function main(options,imports,register){function merge(root,theirs,oursDocument){var ours=oursDocument.getValue(),merged=diff3(theirs,root,ours)


return patchAce(ours,merged,oursDocument),merged}function patchAce(oldValue,newValue,doc,options){"undefined"==typeof doc&&(doc=newValue,
newValue=oldValue,oldValue=doc.getValue()),newValue=newValue.replace(/\r\n|\r|\n/g,doc.getNewLineCharacter()),
oldValue=oldValue.replace(/\r\n|\r|\n/g,doc.getNewLineCharacter())
var dmp=new dmplib.diff_match_patch
options&&"quick"==options.method&&(dmp.Diff_Timeout=.2)
var d=dmp.diff_main(oldValue,newValue,!0)
if(d.length){var i=options&&options.offset||0
d.forEach(function(chunk){var op=chunk[0],text=chunk[1]
0===op?i+=text.length:op===-1?doc.remove(Range.fromPoints(doc.indexToPosition(i),doc.indexToPosition(i+text.length))):1===op&&(doc.insert(doc.indexToPosition(i),text),
i+=text.length)})}}function diff3(a,o,b){function charsToLine(chars){for(var text=[],y=0;y<chars.length;y++)text[y]=mapping.lineArray[chars.charCodeAt(y)]


return text.join("")}for(var mapping=linesToChars(a,o,b),merger=diff.diff3_merge(mapping.chars1,mapping.chars2,mapping.chars3,!0),lines=[],i=0;i<merger.length;i++){
var item=merger[i]
if(item.ok)lines.push(charsToLine(item.ok.join("")))
else{a=charsToLine(item.conflict.a),o=charsToLine(item.conflict.o),b=charsToLine(item.conflict.b)
var lineMerge=diff.diff3_merge(a,o,b,!0)
1===lineMerge.length&&lineMerge[0].ok?lines.push(lineMerge[0].ok.join("")):(lines.push("<<<<<<<<< saved version\n",a.replace(/\n?$/,"\n"),"=========\n",b.replace(/\n?$/,"\n"),">>>>>>>>> local version"),
i!==merger.length-1&&lines.push("\n"))}}return lines.join("")}function linesToChars(text1,text2,text3){
function diff_linesToCharsMunge_(text){for(var chars="",lineStart=0,lineEnd=-1,lineArrayLength=lineArray.length;lineEnd<text.length-1;){
lineEnd=text.indexOf("\n",lineStart),lineEnd==-1&&(lineEnd=text.length-1)
var line=text.substring(lineStart,lineEnd+1)
lineStart=lineEnd+1,(lineHash.hasOwnProperty?lineHash.hasOwnProperty(line):void 0!==lineHash[line])?chars+=String.fromCharCode(lineHash[line]):(chars+=String.fromCharCode(lineArrayLength),
lineHash[line]=lineArrayLength,lineArray[lineArrayLength++]=line)}return chars}var lineArray=[],lineHash={}


lineArray[0]=""
var chars1=diff_linesToCharsMunge_(text1),chars2=diff_linesToCharsMunge_(text2),chars3=diff_linesToCharsMunge_(text3)


return{chars1:chars1,chars2:chars2,chars3:chars3,lineArray:lineArray}}var Plugin=imports.Plugin,Range=require("ace/range").Range,diff=require("./diff"),dmplib=require("./diff_match_patch_amd"),plugin=new Plugin("Ajax.org",main.consumes)


plugin.freezePublicAPI({DIFF_DELETE:dmplib.DIFF_DELETE,DIFF_INSERT:dmplib.DIFF_INSERT,DIFF_EQUAL:dmplib.DIFF_EQUAL,
patchAce:patchAce,merge:merge,diff3:diff3,DiffMatchPatch:dmplib.diff_match_patch}),register(null,{threewaymerge:plugin
})}return main.consumes=["Plugin"],main.provides=["threewaymerge"],main})


define("plugins/c9.ide.readonly/access_control",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){loaded||(loaded=!0,readonly&&api.collab.get("access_info",function(err,info){
if(err)return showAlert("Error",err)
if(lastInfo=info,info.admin){var profileBaseUrl=dashboardUrl.match("^http(s)?://[^/#?]+")[0]
notify('<div class="c9-readonly">Your workspace is in Read-Only Mode because your account has ran out of quota for this type of workspace. Please visit your <a target="_blank" style="color: blue;" href="'+profileBaseUrl+'/account/billing">subscription page to buy more resources</a>.</div>')

}else"rw"==info.acl?notify('<div class="c9-readonly">This workspace is in Read-Only Mode because owners account has ran out of quota for this type of workspace. Please ask the owner to buy more resources</div>'):info["private"]?info.member?info.pending&&showCancelAccessDialog():showRequestAccessDialog():(addRequestButton(),
info.member&&!info.pending||(notify("<div class='c9-readonly'>You are in Read-Only Mode. "+(info.pending?"":"Click on this bar to request access from the owner.")+"</div>",!0),
info.pending||document.querySelector(".c9-readonly").addEventListener("click",function(){showRequestAccessDialog()

},!1)))}))}function addRequestButton(){btn=new ui.button({skin:"c9-menu-btn",tooltip:"Request Write Access",
command:"request_access"}),updateButton(),commands.addCommand({name:"request_access",hint:"Share the workspace",
group:"General",exec:showRequestAccessDialog},plugin),ui.insertByIndex(layout.findParent({name:"preferences"
}),btn,600,plugin)}function updateButton(){btn&&(btn.setAttribute("caption",lastInfo.pending?"Cancel Access Request":"Request Access"),
btn.setAttribute("tooltip",lastInfo.pending?"Cancel Pending Access Request":"Request Write Access"))}
function showRequestAccessDialog(write){return lastInfo.pending?showCancelAccessDialog():void showQuestion("Workspace Access","You don't currently have "+(write?"write ":"")+"access to this workspace","Would you like to request access?",function(){
requestAccess(),lastInfo.pending=!0},redirectToDashboardIfPrivate,{yes:"Request access",no:"Not now"})

}function requestAccess(){api.collab.post("request_access",function(err,member){return err?showAlert("Error Requesting access",err.message||err):(showAlert("Done","Access request sent","We have sent an access request to the admin of this workspace."),
void updateButton())})}function showCancelAccessDialog(){showQuestion("Workspace Access","Request access pending approval","Would you like to cancel your access request?",function(){
api.collab["delete"]("cancel_request",function(err){return err&&err.message&&/isn't a pending workspace member/.test(err.message)&&(err=null),
err?showAlert("Error",err.message||err):(lastInfo.pending=!1,showAlert("Done","Access request cancelled","We don't currently have access to this workspace"),
void updateButton())})},redirectToDashboardIfPrivate)}function redirectToDashboardIfPrivate(){lastInfo["private"]&&(window.top.location.href=dashboardUrl)

}var btn,Plugin=imports.Plugin,api=imports.api,showAlert=imports["dialog.alert"].show,showQuestion=imports["dialog.question"].show,notify=imports["dialog.notification"].show,ui=imports.ui,layout=imports.layout,commands=imports.commands,plugin=new Plugin("Ajax.org",main.consumes),readonly=options.readonly,dashboardUrl=options.dashboardUrl,lastInfo={},loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,lastInfo={},btn=null}),plugin.freezePublicAPI({requestAccess:requestAccess,
showRequestAccessDialog:showRequestAccessDialog}),register(null,{accessControl:plugin})}return main.consumes=["Plugin","api","dialog.alert","dialog.question","ui","layout","commands","dialog.notification"],
main.provides=["accessControl"],main})


define("plugins/c9.fs/fs.cache.xml",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){function onreaddir(e,orphan){var node=findNode(e.path)


if(e.error)return void(node&&(node.status="pending"))
var parentPath=e.path
if(parentPath.endsWith("/")||(parentPath+="/"),!node){if(!showHidden&&isFileHidden(e.path))return
if(node=createNode(e.path),!node)return
node.isFolder=!0,orphans[e.path]=node,orphan=!0}node.$lastReadT=Date.now(),model.setAttribute(node,"status","loaded")


var ondisk=Object.create(null),toRemove=[],toCreate=[],orphanAppand=[],existing=node.map||(node.map=Object.create(null))


if(e.result[1].forEach(function(stat){if(stat.name&&(showHidden||!isFileHidden(stat.name))){var name=stat.name,path=parentPath+name


ondisk[name]=1,orphans[path]&&(existing[name]&&delete orphans[path],orphanAppand.push(path)),existing[name]?updateNodeStat(path,stat,existing[name]):toCreate.push(stat)

}}),Object.keys(existing).forEach(function(name){existing[name]&&"predicted"===existing[name].status&&(ondisk[name]=1),
ondisk[name]||toRemove.push(name)}),toCreate.length||toRemove.length||orphanAppand.length||!node.children||!node.children.length){
var wasOpen=startUpdate(node)
node.children=null,toCreate.forEach(function(stat){createNode(parentPath+stat.name,stat,null,!0)}),toRemove.forEach(function(name){
var currentNode=existing[name]
delete existing[name],emit("remove",{path:parentPath+name,node:currentNode,parent:node})}),emit("readdir",{
path:e.path,parent:node,orphan:orphan}),endUpdate(node,wasOpen),orphanAppand.forEach(function(path){emit("orphan-append",{
path:path})})}}function onstat(e){if(!e.error){var stat=e.result[1],there=!0,node=findNode(e.path),parent=findNode(dirname(e.path))


if(showHidden||!isFileHidden(e.path)){if(!node){if(!parent)return
there=!1}if(there!=!!stat)there?node.link||deleteNode(node):("object"!=typeof stat&&(stat=null),createNode(e.path,stat))
else if(there){if("object"!=typeof stat&&(stat=null),!stat&&node)return
stat&&node?updateNodeStat(e.path,stat,node):createNode(e.path,stat,node)}}}}function confirmStatus(node){
"predicted"===node.status&&(node.status=node.isFolder?"pending":"loaded")}function afterHandler(e){e.error?e.undo&&e.undo():e.confirm&&e.confirm()

}function addSingleNode(e,isFolder,linkInfo){var node=findNode(e.path)
if(!node&&(showHidden||!isFileHidden(e.path))){var parent=findNode(dirname(e.path))
if(parent){var stat=isFolder?{mime:"folder"}:linkInfo?{link:!0,linkStat:{fullPath:linkInfo}}:{}
stat.mtime=Date.now(),node=createNode(e.path,stat),emit("add",{path:e.path,node:node}),e.undo=function(){
deleteNode(node),emit("remove",{path:e.path,node:node,parent:parent})},e.confirm=function(){confirmStatus(node)

},node.status="predicted"}}}function removeSingleNode(e){var node=findNode(e.path)
node&&(deleteNode(node),emit("remove",{path:node.path,node:node}),e.undo=function(){this.error&&"ENOENT"==this.error.code||(createNode(node.path,null,node),
emit("add",{path:node.path,node:node}))})}function recurPathUpdate(node,oldPath,newPath,isCopy){isCopy||model.setAttribute(node,"oldpath",oldPath),
model.setAttribute(node,"path",newPath),node.children&&(node.children=null)
for(var cnode,nodes=model.getChildren(node)||[],i=nodes.length;i--;)cnode=nodes[i],cnode&&recurPathUpdate(cnode,cnode.path,newPath+"/"+cnode.label,isCopy)


emit(isCopy?"add":"update",{path:oldPath,newPath:newPath,node:node})}return!loaded&&(loaded=!0,clear(),
watcher.on("delete",function(e){removeSingleNode(e)}),watcher.on("change.all",function(e){onstat({path:e.path,
result:[null,e.stat]})}),watcher.on("directory.all",function(e){onreaddir({path:e.path,result:[null,e.files]
})}),fs.on("beforeReaddir",function(e){var node=findNode(e.path)
node&&model.setAttribute(node,"status","loading")}),fs.on("afterReaddir",onreaddir,plugin),fs.on("afterStat",onstat,plugin),
fs.on("afterReadFile",function(e){var err=e.result[0]
return onstat({path:e.path,result:[0,!err||"ENOENT"!=err.code]})},plugin),fs.on("afterExists",onstat,plugin),
fs.on("beforeWriteFile",function(e){addSingleNode(e)},plugin),fs.on("afterWriteFile",afterHandler,plugin),
fs.on("beforeRename",function(e){var node=findNode(e.path)
if(node){var oldPath=e.path,newPath=e.args[1],parent=findNode(dirname(newPath)),toNode=findNode(newPath)


toNode||(deleteNode(node,!0),createNode(newPath,null,node),recurPathUpdate(node,oldPath,newPath)),e.undo=function(){
if(!toNode){if(!parent){for(var tmpParent=node;node.parent&&"pending"==tmpParent.parent.status;)tmpParent=tmpParent.parent


tmpParent&&deleteNode(tmpParent,!0)}deleteNode(node,!0),toNode&&createNode(newPath,null,toNode),createNode(oldPath,null,node),
recurPathUpdate(node,newPath,oldPath)}},e.confirm=function(){toNode&&(deleteNode(toNode,!0),createNode(newPath,null,node),
recurPathUpdate(node,oldPath,newPath)),confirmStatus(node)},node.status="predicted"}},plugin),fs.on("afterRename",afterHandler,plugin),
fs.on("beforeMkdirP",function(e){for(var dirsToMake=[],path=e.path;!findNode(path);){if(dirsToMake.push(path),
path=dirname(path),"~"==path)return
if("."==path)break}dirsToMake.forEach(function(dir){createNode(dir,{mime:"folder"})})
var node=dirsToMake[0]&&findNode(dirsToMake[0])
node&&(e.undo=function(){dirsToMake.forEach(function(dir){var node=findNode(dir)
node&&deleteNode(node)})},e.confirm=function(){confirmStatus(node)},node.status="predicted")},plugin),
fs.on("afterMkdirP",afterHandler,plugin),fs.on("beforeMkdir",function(e){addSingleNode(e,!0)},plugin),
fs.on("afterMkdir",afterHandler,plugin),fs.on("beforeUnlink",function(e){removeSingleNode(e)},plugin),
fs.on("afterUnlink",afterHandler,plugin),fs.on("beforeRmfile",function(e){removeSingleNode(e)},plugin),
fs.on("afterRmfile",afterHandler,plugin),fs.on("beforeRmdir",function(e){removeSingleNode(e)},plugin),
fs.on("afterRmdir",afterHandler,plugin),fs.on("beforeCopy",function(e){function setCacheCopy(to){toNode=copyNode(node),
createNode(to,null,toNode),recurPathUpdate(toNode,e.path,to,!0),e.undo=function(){removeSingleNode({path:to
})},e.confirm=function(){confirmStatus(node)},toNode.status="predicted"}var node=findNode(e.path)
if(node){var parent=findNode(dirname(e.args[1]))
if(parent){var toNode=findNode(e.args[1])
if(toNode){if(e.args[2]&&e.args[2].overwrite===!1)return void(e.setCacheCopy=setCacheCopy)
deleteNode(toNode)}setCacheCopy(e.args[1])}}},plugin),fs.on("afterCopy",function(e){!e.error&&e.setCacheCopy&&e.setCacheCopy(e.result[1].to),
afterHandler(e)},plugin),fs.on("beforeSymlink",function(e){addSingleNode(e,!1,e.args[1])},plugin),void fs.on("afterSymlink",function(e){
if(e.error)e.undo&&e.undo()
else{var node=findNode(e.path)
if(!node)return
fs.stat(e.args[1],function(err,stat){var linkNode=findNode(e.path)
return err||stat.err?void model.setAttribute(linkNode,"error",err.message):(stat.fullPath=e.args[1],createNode(e.path,{
link:!0,linkStat:stat},linkNode),void emit("update",{path:e.path,node:linkNode}))})}},plugin))}function findNode(path,context){
if("string"==typeof context){if(node=emit("findNode",{type:context,path:path}),node||node===!1)return node


context=null}var parts=path.split("/"),node=context||model.root
node||(node=orphans[parts[0]],node&&parts.shift()),"/"==path&&parts.shift()
for(var up=0,i=parts.length;i--;){var p=parts[i]
!p&&i||"."===p?parts.splice(i,1):".."===p?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}for(var i=0;i<parts.length;i++){
var p=parts[i]
node&&(node=node.map&&node.map[p]),node||(node=orphans[parts.slice(0,i+1).join("/")])}return node}function findNodes(path){}
function createNode(path,stat,updateNode,updating){if(!/^[!~\/]/.test(path)){var e=new Error("Refusing to add a node with misformed path to fs.cache")


return reportError(e,{path:path})}orphans[path]&&(updateNode=orphans[path],delete orphans[path])
var parts=path.split("/"),node=model.root.map["~"==parts[0]?"~":""]
node||(node=orphans[parts[0]],node&&parts.shift())
var parent=model.root,modified=[],subPath=""
if(parts.forEach(function(p,i){if(p){if(subPath+="~"==p?p:"/"+p,!node)return node=orphans[subPath]
var map=node.map
if(map||(map=node.map=Object.create(null)),parent=node,node=map[p],!node){if(modified.push(parent),i!==parts.length-1){
if(node={label:p,path:subPath,status:"pending",isFolder:!0},!showHidden&&isFileHidden(p))return void(orphans[node.path]=node)

}else updateNode?(deleteNode(updateNode,!0),node=updateNode,node.label!=p&&(map[node.label]==node&&delete map[node.label],
node.label=p)):node={label:p,path:subPath}
node.parent=parent,map[p]=node}}}),node||(node={label:parts[parts.length-1],path:path},orphans[path]=node),
updateNodeStat(path,stat,node),node.children=null,!updating){modified.length||modified.push(parent)
var wasOpen=startUpdate(modified[0])
modified.forEach(function(n){n!=model.root&&(n.children=null)}),endUpdate(modified[0],wasOpen)}return model._signal("createNode",node),
node}function updateNodeStat(path,stat,node){node.path=path
var original_stat
if(stat&&stat.link&&(original_stat=stat,stat=stat.linkStat),stat){var isFolder=stat&&/(directory|folder)$/.test(stat.mime)


isFolder?node.status=node.status||"pending":node.status="loaded","number"!=typeof stat.mtime&&stat.mtime&&(stat.mtime=+stat.mtime),
void 0!=stat.size&&(node.size=stat.size),void 0!=stat.mtime&&(node.mtime=stat.mtime),(original_stat||stat.linkErr)&&(node.link=stat.fullPath||stat.linkErr),
isFolder?node.isFolder=isFolder:delete node.isFolder}node.isFolder&&!node.map?(node.map=Object.create(null),
node.children=null):!node.isFolder&&node.map&&(delete node.map,node.children=null)}function deleteNode(node,silent){
if(findNode(node.path)==node){var parent=findNode(dirname(node.path))
if(!parent){var e=new Error("Node with misformed path in fs.cache")
return void reportError(e,{path:node.path,hasParentProp:!!node.parent,parentPath:node.parent&&node.parent.path
})}if(orphans[node.path]!=node||(delete orphans[node.path],parent.map[node.label]==node)){silent||model._signal("remove",node)


var wasOpen=startUpdate(parent)
delete parent.map[node.label],parent.children&&(node.index=parent.children.indexOf(node)),parent.children=node.children=null,
endUpdate(parent,wasOpen)}}}function copyNode(node,parent){var copy={}
return Object.keys(node).forEach(function(key){var prop
"parent"==key?prop=parent:"map"==key?(prop={},Object.keys(node.map).forEach(function(label){prop[label]=copyNode(node.map[label],node)

})):prop="children"===key||"isSelected"===key?null:lang.deepCopy(node[key]),copy[key]=prop}),copy}function clear(){
for(var all=model.visibleItems,i=all.length;i--;)model.isOpen(all[i])&&model.collapse(all[i])
model.projectDir={label:options.rootLabel||c9.projectName,isFolder:!0,path:"/",status:"pending",className:"projectRoot",
isEditable:!1,map:Object.create(null)}
var root={}
root.map=Object.create(null),root.map[""]=model.projectDir,model.setRoot(root)}function loadNodes(path,progress){
function recur(){node=findNode(subPath,"expand"),node?"loaded"==node.status?("/"!==subPath.slice(-1)&&(subPath+="/"),
subPath+=nodes[loaded],nodes[loaded++]=node,progress({nodes:nodes,node:node,loaded:loaded}),recur()):"loading"==node.status?plugin.on("readdir",function listener(e){
e.path==subPath&&(plugin.off("readdir",listener),recur())}):"pending"==node.status&&model.loadChildren(node,recur):progress({
nodes:nodes,node:nodes[loaded-1],loaded:loaded,complete:!0})}var node,loaded=0,subPath="/",nodes=path.split("/")


recur()}function updateHiddenFileRegexp(str){var parts=(str||".*").split(/,\s*/).map(function(x){return x.trim().replace(/([\/'*+?|()\[\]{}.\^$])/g,function(p){
return"*"===p?"[^\\/]*?":"\\"+p})}).filter(Boolean)
hiddenFileRe=new RegExp("(^|/)("+parts.join("|")+")/?$","i")}function isFileHidden(name){return hiddenFileRe.test(name)

}function startUpdate(node){var wasOpen=node.isOpen
return wasOpen&&model.close(node,void 0,!0),model._signal("startUpdate",node),wasOpen}function endUpdate(node,wasOpen){
wasOpen&&(model.open(node,void 0,!0),model._signal("change",node)),model._signal("endUpdate",node,wasOpen)

}function refresh(node){model.close(node,void 0,!0),model.open(node,void 0,!0),model._signal("change",node)

}var fs=imports.fs,Plugin=imports.Plugin,c9=imports.c9,watcher=(imports.util,imports.watcher),reportError=imports.error_handler.reportError,TreeData=require("ace_tree/data_provider"),lang=require("ace/lib/lang"),dirname=require("path").dirname,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),model=new TreeData,showHidden=!1,hiddenFilePattern="",hiddenFileRe=/^$/,orphans={}


model.loadChildren=function(node,cb){fs.readdir(node.path,function(err,files){cb&&cb(err,files)})},model.shouldLoadChildren=function(node,ch){
return"pending"==node.status||node.path&&node.isFolder&&!ch},model.getClassName=function(node){var cl=node.className||""


return node.link&&(cl+=" symlink"),node.isCut&&(cl+=" cut"),cl}
var loaded=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,showHidden=!1,hiddenFilePattern="",hiddenFileRe=/^$/,orphans={}

}),plugin.freezePublicAPI({model:model,get showHidden(){return showHidden},set showHidden(value){showHidden=value,
emit("setShowHidden",{value:value})},get hiddenFilePattern(){return hiddenFilePattern},set hiddenFilePattern(value){
updateHiddenFileRegexp(value),hiddenFilePattern=value},_events:["orphan-append","readdir","add","remove","update"],
createNode:createNode,removeNode:deleteNode,findNode:findNode,findNodes:findNodes,clear:clear,refresh:refresh,
loadNodes:loadNodes,isFileHidden:isFileHidden}),register(null,{"fs.cache":plugin})}return main.consumes=["fs","Plugin","c9","util","watcher","error_handler"],
main.provides=["fs.cache"],main})


define("plugins/c9.fs/fs.errors",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&void(loaded=!0)}function parse(msg,options){function replace(m,m1){var value=options[m1.toLowerCase()]


return m1.charAt(0)!=m1.charAt(0).toLowerCase()&&(value=uCaseFirst(value)),value}return options["totype|type"]=options.totype||options.type,
options["to|filename"]=options.to||options.filename,options.error=errcode[options.error.code]?errcode[options.error.code].replace(/\{(.*?)\}/g,replace):errmsg[options.error.message]?errmsg[options.error.message].replace(/\{(.*?)\}/g,replace):options.error.message||options.error,
msg&&msg.replace&&msg.replace(/\{(.*?)\}/g,replace)||""}var Plugin=imports.Plugin,fs=imports.fs,showError=imports["dialog.error"].show,fsCache=imports["fs.cache"],basename=require("path").basename,uCaseFirst=require("c9/string").uCaseFirst,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1,m={
writeFile:"Failed to write to {filename}. {error}.",rename:"Failed to rename {type} {filename} to {to}. {error}.",
mkdirP:"Failed to create folder(s) {path}. {error}.",mkdir:"Failed to create folder {filename}. {error}.",
unlink:"Failed to delete {type} {filename}. {error}.",rmfile:"Failed to delete {type} {filename}. {error}.",
rmdir:"Failed to delete {type} {filename}. {error}.",copy:"Failed to copy {type} {filename} to {to}. {error}.",
symlink:"Failed to create symlink {filename} to {to}. {error}."},errcode={ENOENT:"File or folder {filename} does not exist",
EISDIR:"{Totype|type} {to|filename} is a directory",ENOTDIR:"{Totype|type} {to|filename} is not a directory",
EEXIST:"{Totype|type} {to|filename} already exists",EACCES:"Access denied acccessing this {type}",ENOSPC:"Your disk is full. Please create more space. Could not write {filename}",
EDISCONNECT:"The connection went away. Please try again.",ENOTCONNECTED:"You are disconnected. Please check your connection and try again"
},errmsg={"away re-connect attempts exceeded":"You are disconnected. Please check your connection and try again"
}
fs.on("userError",function(e){if(m[e.name]&&"EEXIST"!=e.error.code){var tonode,totype,args=e.args,path=args[0],node=fsCache.findNode(path),type=node?node.link?"symlink":node.isFolder?"folder":"file":"file or folder",topath="string"==typeof args[1]?args[1]:null


topath&&(tonode=fsCache.findNode(topath),totype=tonode?tonode.link?"symlink":tonode.isFolder?"folder":"file":"file or folder")


var message=parse(m[e.name],{error:e.error,type:type,to:topath?"'<span title='"+topath.replace(/'/g,"&apos;")+"'>"+basename(topath)+"</span>'":"",
totype:totype,path:path,filename:"'<span title='"+path.replace(/'/g,"&apos;")+"'>"+basename(path)+"</span>'"
})
showError({html:message})}}),plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({}),register(null,{})}return main.consumes=["fs","dialog.error","fs.cache","Plugin"],
main.provides=[],main})


define("plugins/c9.fs/fs.streams",[],function(require,exports,module){var Stream=require("stream").Stream,PATH=require("path")


return function(vfs,base,baseProc,cli){function readFile(path,encoding,callback){callback&&"function"!=typeof encoding||(callback=encoding,
encoding=null)
var options={}
encoding&&(options.encoding=encoding),vfs.readfile(resolvePath(path),options,function(err,meta){if(err)return callback(err)


var data=""
meta.stream.on("data",function(d){data+=d})
var done
meta.stream.on("error",function(e){done||(done=!0,callback(e))}),meta.stream.on("end",function(){done||(done=!0,
callback(null,data))})})}function writeFile(path,data,encoding,callback){callback&&"function"!=typeof encoding||(callback=encoding,
encoding=null)
var options={}
encoding&&(options.encoding=encoding)
var stream=options.stream=new Stream
stream.readable=!0,vfs.mkfile(resolvePath(path),options,function(err,meta){return err?callback(err):void callback(null)

}),stream.emit("data",data),stream.emit("end")}function appendFile(path,data,encoding,callback){callback||(callback=encoding,
encoding=null)
var options={}
encoding&&(options.encoding=encoding),options.data=data,vfs.appendfile(resolvePath(path),options,function(err,meta){
return err?callback(err):void callback(null)})}function readdir(path,callback){vfs.readdir(resolvePath(path),{
encoding:null},function(err,meta){if(err)return callback(err)
var stream=meta.stream,files=[]
stream.on("data",function(stat){files.push(stat)})
var called
stream.on("error",function(err){called||(called=!0,callback(err))}),stream.on("end",function(){called||(called=!0,
callback(null,files))})})}function exists(path,callback){vfs.stat(resolvePath(path),{},function(err,stat){
return callback(!(!stat||stat.err),stat)})}function stat(path,callback){vfs.stat(resolvePath(path),{},callback)

}function chmod(path,mode,callback){vfs.chmod(resolvePath(path),{mode:mode},callback)}function rename(from,to,options,callback){
"function"==typeof options&&(callback=options,options={}),vfs.rename(resolvePath(to),{from:resolvePath(from),
overwrite:options.overwrite},callback)}function mkdirHandler(callback){return function(err){callback(err&&err.message.indexOf("exists")>-1?{
code:"EEXIST",message:err.message}:err)}}function mkdirP(path,mode,callback){callback||(callback=mode,
mode=null),vfs.mkdirP(resolvePath(path),{mode:mode},mkdirHandler(callback))}function mkdir(path,callback){
vfs.mkdir(resolvePath(path),{},mkdirHandler(callback))}function rmfile(path,callback){vfs.rmfile(resolvePath(path),{},callback||function(){})

}function rmdir(path,options,callback){"function"==typeof options&&(callback=options,options={}),vfs.rmdir(resolvePath(path),options,callback||function(){})

}function copy(path,to,options,callback){"function"==typeof options&&(callback=options,options={}),vfs.copy(resolvePath(path),{
to:resolvePath(to),overwrite:void 0===options.overwrite||options.overwrite,recursive:options.recursive
},callback)}function symlink(path,target,callback){vfs.symlink(resolvePath(path),{target:resolvePath(target)
},callback)}function watch(path,callback){vfs.watch(resolvePath(path),{},function(err,meta){if(err)return callback(err)


var watcher=meta.watcher
watcher.on("change",function(event,filename,stat,files){callback(null,event,filename,stat,files)}),watcher.on("error",function(err){
callback(err||!0)}),callback[path]&&callback[path](),callback[path]=function(){watcher.removeAllListeners(),
watcher.close()},callback(null,"init",path)})}function unwatch(path,callback){callback[path]&&callback[path]()

}var resolvePath=function(path,basePath){return"~"==path.charAt(0)?cli&&"undefined"!=typeof process?process.env.HOME+"/"+path.substr(1):path:(basePath||(basePath=base),
basePath?path.substring(0,basePath.length)===basePath?path:PATH.join(basePath,path):path)}
return{readFile:readFile,writeFile:writeFile,appendFile:appendFile,readdir:readdir,exists:exists,stat:stat,
rename:rename,mkdirP:mkdirP,mkdir:mkdir,unlink:rmfile,rmfile:rmfile,rmdir:rmdir,copy:copy,chmod:chmod,
symlink:symlink,watch:watch,unwatch:unwatch,vfs:vfs,metadata:vfs.metadata,readFileWithMetadata:vfs.readFileWithMetadata
}}})


define("plugins/c9.fs/fs.xhr",[],function(require,exports,module){"use strict"
return function(_request){function request(method,path,body,callback,progress,sync,headers){return _request(path,{
method:method,body:body,headers:headers,progress:progress,sync:sync,timeout:6e4},callback)}function _readFile(path,encoding,callback,progress,metadata){
if("function"==typeof encoding&&(progress=callback,callback=encoding,encoding=null),"/"==path.substr(-1)&&(path=path.substr(0,path.length-1)),
!path){var err=new Error("Cannot read root as file")
return err.code="EISDIR",callback(err)}var headers=metadata?{"x-request-metadata":"true"}:null
return request("GET",path,"",function(err,data,res){if(err)return metadata?callback(err,null,null,res):callback(err,null,res)


var hasMetadata=void 0!=res.headers["x-metadata-length"]
if(metadata||hasMetadata){var ml=parseInt(res.headers["x-metadata-length"],10)||0,ln=data.length
if(!metadata){var $reqHeaders=res.$reqHeaders,message="Unexpected metadata "
return $reqHeaders&&(message+=($reqHeaders==headers)+$reqHeaders["x-request-metadata"]),console.error($reqHeaders,headers,message),
setTimeout(function(){throw new Error(message)}),callback(err,data.substr(0,ln-ml),res)}callback(err,data.substr(0,ln-ml),ml&&data.substr(-1*ml)||"",res)

}else callback(err,data,res)},progress,!1,headers)}function readFile(path,encoding,callback,progress,_metadata){
if(void 0!=_metadata)throw new Error("attempt to call readfile with metadata")
return _readFile(path,encoding,callback,progress,!1)}function readFileWithMetadata(path,encoding,callback,progress){
return _readFile(path,encoding,callback,progress,!0)}function writeFile(path,data,sync,callback,progress){
return"function"==typeof sync&&(progress=callback,callback=sync,sync=!1),"/"==path.substr(-1)&&(path=path.substr(0,path.length-1)),
request("PUT",path,data,callback,progress,sync)}function readdir(path,callback,progress){return"/"!=path.substr(-1)&&(path+="/"),
request("GET",path,"",function(err,data){if(err)return callback(err)
try{var files=JSON.parse(data)}catch(e){return callback(e)}callback(null,files,progress)})}function exists(path,callback){
return request("HEAD",path,"",function(err){callback(!err)})}function stat(path,callback){callback(new Error("stat is unsupported via XHR"))

}function rename(from,to,options,callback){return"function"==typeof options&&(callback=options,options={}),
request("POST",to,JSON.stringify({renameFrom:from,overwrite:options.overwrite}),callback)}function mkdirP(path,mode,callback){
callback(new Error("mkdirP is unsupported via XHR"))}function mkdir(path,callback){return"/"!=path.substr(-1)&&(path+="/"),
request("PUT",path,"",callback)}function rmfile(path,callback){return"/"==path.substr(-1)&&(path=path.substr(0,path.length-1)),
request("DELETE",path,"",callback)}function rmdir(path,options,callback){return"function"==typeof options&&(callback=options,
options={}),"/"==path.substr(-1)&&(path=path.substr(0,path.length-1)),request("DELETE",path,JSON.stringify(options),callback)

}function copy(path,to,options,callback){return"function"==typeof options&&(callback=options,options={}),
request("POST",to,JSON.stringify({copyFrom:path,overwrite:void 0===options.overwrite||options.overwrite,
recursive:options.recursive}),callback)}function symlink(path,target,callback){return request("POST",path,JSON.stringify({
linkTo:target}),callback)}function metadata(path,data,sync,callback){return"function"==typeof sync&&(callback=sync,
sync=!1),request("POST",path,JSON.stringify({metadata:data}),callback,null,sync)}function watch(path,callback){
callback(new Error("watch is unsupported via XHR"))}function unwatch(path,callback){callback(new Error("unwatch is unsupported via XHR"))

}return{readFile:readFile,writeFile:writeFile,readdir:readdir,exists:exists,stat:stat,rename:rename,mkdirP:mkdirP,
mkdir:mkdir,unlink:rmfile,rmfile:rmfile,rmdir:rmdir,copy:copy,symlink:symlink,watch:watch,unwatch:unwatch,
metadata:metadata,readFileWithMetadata:readFileWithMetadata}}})


define("plugins/c9.fs/fs",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,void(options.cli&&plugin.on("error",function(e){})))}function wrap(name,fn){
return function(path){function cb(err){var errorEvent,result=0,hasError=err&&"boolean"!=typeof err
hasError&&(errorEvent={name:name,error:err,args:args},emit("error",errorEvent)===!1&&result++,event.error=err),
event.result=Array.prototype.slice.call(arguments),emit("after"+uCaseFirst(name),event)===!1&&result++,
original_callback.apply(this,arguments)===!1&&result++,progress&&progress(null,null,!0),hasError&&0===result&&emit("userError",errorEvent)

}var args=Array.prototype.slice.call(arguments)
if("function"!=typeof args[args.length-1])throw new Error("Missing callback for "+name)
path=args[0]=normalize(path),"rename"!=name&&"copy"!=name&&"symlink"!=name||(args[1]=normalize(args[1]))


var original_callback=args.pop()
if("readFile"==name||"writeFile"==name){var progress
if("function"==typeof args[args.length-1])progress=original_callback,original_callback=args.pop()
else{var progressEventName="readFile"==name?"downloadProgress":"uploadProgress"
progress=function(loaded,total,complete){emit(progressEventName,{path:path,loaded:loaded,total:total,
complete:complete})}}args.push(cb,progress)}else args.push("unwatch"==name&&original_callback.__cb__||cb)


original_callback.__cb__=cb
var event={path:path,args:args,fn:fn}
return emit("before"+uCaseFirst(name),event)!==!1&&fn.apply(this,args)}}function getExtension(path){return path=path.substr(path.lastIndexOf("/")+1),
path.indexOf(".")>-1?path.substr(path.lastIndexOf(".")+1):""}var vfs=imports.vfs,Plugin=imports.Plugin,stream=require("./fs.streams")(vfs,options.base,options.baseProc,options.cli),xhr=options.cli?stream:require("./fs.xhr")(vfs.rest),uCaseFirst=require("c9/string").uCaseFirst,normalize=require("path").normalize,api={
readFile:xhr.readFile,writeFile:xhr.writeFile,appendFile:stream.appendFile,readdir:xhr.readdir,rename:stream.rename,
exists:stream.exists,stat:stream.stat,mkdirP:stream.mkdirP,mkdir:stream.mkdir,unlink:stream.unlink,rmfile:stream.rmfile,
rmdir:stream.rmdir,copy:stream.copy,chmod:stream.chmod,symlink:stream.symlink,watch:stream.watch,unwatch:stream.unwatch,
metadata:xhr.metadata},plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()
emit.setMaxListeners(500)
var loaded=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1})
var names=Object.keys(api)
names.forEach(function(name){api[name]=wrap(name,api[name])})
var events=[]
names.forEach(function(n){events.push("before"+uCaseFirst(n)),events.push("after"+uCaseFirst(n))}),plugin.freezePublicAPI({
_events:events.push("error","downloadProgress","uploadProgress")&&events,getExtension:getExtension,readFile:api.readFile,
readFileWithMetadata:wrap("readFile",xhr.readFileWithMetadata),writeFile:api.writeFile,appendFile:api.appendFile,
readdir:api.readdir,rename:api.rename,exists:api.exists,stat:api.stat,mkdirP:api.mkdirP,mkdir:api.mkdir,
unlink:api.unlink,rmfile:api.rmfile,rmdir:api.rmdir,copy:api.copy,chmod:api.chmod,symlink:api.symlink,
watch:api.watch,unwatch:api.unwatch,metadata:api.metadata}),register(null,{fs:plugin})}return main.consumes=["vfs","Plugin","auth"],
main.provides=["fs"],main})


define("plugins/c9.fs/net",[],function(require,exports,module){function main(options,imports,register){
var vfs=imports.vfs,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


plugin.freezePublicAPI({_events:["beforeConnect","afterConnect"],connect:function(port,options,callback){
emit("beforeConnect",{port:port,options:options}),options.encoding||(options.encoding="utf8"),vfs.connect(port,options,function(err,meta){
callback(err,meta&&meta.stream),emit("afterConnect",{port:port,stream:meta&&meta.stream,error:err})})

}}),register(null,{net:plugin})}return main.consumes=["vfs","Plugin"],main.provides=["net"],main})


define("plugins/c9.fs/proc.apigen",[],function(require,exports,module){function main(options,imports,register){
function ApiGenerator(options){function spawn(args,callback,cbExit,noAuthCheck){proc.pty(runtime,{args:args,
cwd:basepath,env:env},function(err,pty){function ondata(data){var err=errorCheck(data,noAuthCheck,control)


return err?(control.discard(),callback(err)):void callback(null,data,control)}function onexit(data){return cbExit?cbExit():callback("No data received")

}if(err)return callback(err)
var control={kill:function(){pty.kill()},write:function(value){pty.write(value)},discard:function(keep){
keep&&pty.off("data",ondata),pty.off("exit",onexit)}}
pty.on("data",ondata),pty.on("exit",onexit)})}function parseArg(options,arg,found,data){if(arg instanceof RegExp){
var m=data.match(arg)
return m.length>1?m[1]:m[0]}if("object"==typeof arg){var obj={}
for(var prop in arg)obj[prop]=parseArg(options,arg[prop],found,data)
return obj}return"string"==typeof arg?arg.replace(/\\\{|\{(.*?)\}/g,function(m,name){return"\\{"==m?m:"$"==name.charAt(0)?found[name.substr(1)]:options[name]

}):arg}function createMethod(def){return function(options,callback){var parse=parseArg.bind(this,options),args="function"==typeof def.args?def.args(options):def.args.map(parse),buffer=""


spawn(args,function(err,data,control){if(err)return callback(err)
if(def.buffer)return void(buffer+=data)
if(def.write&&def.write.forEach(function(item){var found
found="string"==typeof item.match?data.indexOf(item.match)>-1:data.match(item.match),found&&control.write(parse(item.text,found,data))

}),def.exit)for(var found,i=0;i<def.exit.length;i++){var item=def.exit[i]
if(found="string"==typeof item.match?data.indexOf(item.match)>-1:data.match(item.match)){item.error?callback(item.result?parse(item.result,found,data):data):callback(null,parse(item.result,found,data)),
control.discard(),(item.error||item.kill)&&control.kill()
break}}return def.stream?void callback(null,data,control):void 0},function(){if(def.buffer)try{callback(null,def.parse?def.parse(buffer):buffer)

}catch(e){console.error(e),callback(e)}else callback(def.defaultSuccess?null:"No proper data received")

},def.noauth)}}var runtime=options.runtime,basepath=options.basepath,errorCheck=options.errorCheck,env=options.env,plugin=new Plugin("Ajax.org",main.consumes)


return plugin.freezePublicAPI({spawn:spawn,createMethod:createMethod}),plugin}var proc=imports.proc,Plugin=imports.Plugin


register(null,{"proc.apigen":{create:ApiGenerator}})}return main.consumes=["Plugin","proc"],main.provides=["proc.apigen"],
main})


define("plugins/c9.fs/proc2pty",[],function(require,exports,module){var EventEmitter=require("events").EventEmitter


module.exports=function(process){var pty=new EventEmitter
return pty.write=function(data){process.stdin.write(data.replace(/\r/g,"\n"))},pty.resize=function(){},
pty.destroy=pty.end=function(){process.kill()},process.stdout.on("data",function(chunk){pty.emit("data",chunk)

}),process.stderr.on("data",function(chunk){pty.emit("data",chunk)}),process.on("exit",function(code){
pty.emit("exit",code)}),pty}})


define("plugins/c9.fs/proc",[],function(require,exports,module){function main(options,imports,register){
var installMode,vfs=imports.vfs,Plugin=imports.Plugin,ProcessToPty=require("./proc2pty"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),tmuxName=options.tmuxName


plugin.freezePublicAPI({get installMode(){return installMode},set installMode(_vfs){vfs=_vfs||imports.vfs,
installMode=!!_vfs},_events:["beforeSpawn","afterSpawn","beforePty","afterPty","beforeTmux","afterTmux","beforeExecFile","afterExecFile"],
spawn:function(path,options,callback){function exec(err,data){vfs.spawn(data.path,options,function(err,meta){
callback(err,meta&&meta.process),emit("afterSpawn",{path:path,process:meta&&meta.process})})}emit("beforeSpawn",{
path:path,options:options}),callback||(callback=options,options={}),!options.stdoutEncoding&&(options.stdoutEncoding="utf8"),
!options.stderrEncoding&&(options.stderrEncoding="utf8"),!options.stdinEncoding&&(options.stdinEncoding="utf8"),
options.resolve?vfs.resolve(path,{},exec):exec(null,{path:path})},pty:function(path,options,callback){
function exec(err,data){vfs.pty(data.path,options,function(err,meta){callback(err,meta&&meta.pty),emit("afterPty",{
path:path,pty:meta&&meta.pty})})}return installMode||options.fakePty?void plugin.spawn(path,options,function(err,process){
return err?callback(err):void callback(null,new ProcessToPty(process))}):(emit("beforePty",{path:path,
options:options}),options.encoding||(options.encoding="utf8"),options.name||(options.name="xterm-color"),
void(options.resolve?vfs.resolve(path,{},exec):exec(null,{path:path})))},tmux:function(command,options,callback){
emit("beforeTmux",{command:command,options:options}),options.encoding||(options.encoding="utf8"),options.name||(options.name="xterm-color"),
tmuxName&&(options.tmuxName=tmuxName),options.command=command||"",vfs.tmux("",options,function(err,meta){
callback(err,meta&&meta.pty,meta&&meta.pid,meta||{}),emit("afterTmux",{command:command,pty:meta&&meta.pty,
pid:meta&&meta.pid})})},execFile:function(path,options,callback){function exec(err,data){vfs.execFile(data.path,options,function(err,e){
var stdout=(err||e).stdout,stderr=(err||e).stderr
callback(err,stdout,stderr),emit("afterExecFile",{path:path,stdout:stdout,stderr:stderr,error:err})})

}return callback?(emit("beforeExecFile",{path:path,options:options}),options.encoding||(options.encoding="utf8"),
void(options.resolve?vfs.resolve(path,{},exec):exec(null,{path:path}))):this.execFile(path,{},arguments[1])

},killtree:function(pid,options,callback){vfs.killtree(pid,options,callback)}}),register(null,{proc:plugin
})}return main.consumes=["vfs","Plugin"],main.provides=["proc"],main})


define("plugins/c9.ide.dialog.wizard/wizard",[],function(require,module,exports){function main(options,imports,register){
function Wizard(developer,deps,options){function draw(options){if(!drawn){drawn=!0
var aml=new ui.bar
options.aml.parentNode.insertBefore(aml,options.aml),options.aml.removeNode(),body={html:aml.$ext,aml:aml
}}}function cancel(){emit("cancel",{activePage:lastPage})}function previous(){current--,activate(path[current]),
emit("previous",{activePage:path[current]})}function next(){path.splice(current+1),plugin.update([{id:"previous",
visible:!0},{id:"next",visible:!0}])
var page=emit("next",{activePage:path[path.length-1]})
current=path.push(page)-1,activate(page,!0)}function gotoPage(page){current=path.push(page)-1,activate(page,!0)

}function finish(){plugin.hide(),emit("finish",{activePage:lastPage})}function activate(page,noButtons){
var idx=path.indexOf(page)
if(idx==-1)throw new Error
noButtons||plugin.update([{id:"previous",visible:idx>0},{id:"next",visible:!0}]),lastPage&&lastPage.hide(),
page.show(body),lastPage=page}function show(reset){return plugin.queue(function(){(reset||current==-1)&&(path=[startPage],
current=0,activate(startPage))},!0)}var body,startPage,lastPage,plugin=new Dialog(developer,deps.concat(main.consumes),{
name:"dialog.wizard",allowClose:options.allowClose||!1,"class":"wizard "+(options["class"]||""),height:options.height,
width:options.width,resizable:options.resizable,title:options.title,modal:void 0===options.modal||options.modal,
custom:!0,elements:[{type:"button",id:"cancel",caption:"Cancel",visible:!1,onclick:cancel},{type:"filler"
},{type:"button",id:"previous",caption:"Previous",visible:!1,onclick:previous},{type:"button",id:"next",
caption:"Next",color:"green","default":!0,onclick:next},{type:"button",id:"finish",caption:"Finish",visible:!1,
onclick:finish}]}),emit=plugin.getEmitter(),path=[],current=-1,drawn=!1
return plugin.on("draw",function(options){draw(options)}),plugin.freezePublicAPI.baseclass(),plugin.freezePublicAPI({
get activePage(){return path[current]},get startPage(){return startPage},set startPage(v){startPage=v

},get showPrevious(){return plugin.getElement("previous").visible},set showPrevious(value){plugin.update([{
id:"previous",visible:value}])},get showNext(){return plugin.getElement("next").visible},set showNext(value){
plugin.update([{id:"next",visible:value}])},get showCancel(){return plugin.getElement("cancel").visible

},set showCancel(value){plugin.update([{id:"cancel",visible:value}])},get showFinish(){return plugin.getElement("finish").visible

},set showFinish(value){plugin.update([{id:"finish",visible:value}])},_events:["cancel","previous","next","finish"],
show:show,cancel:cancel,previous:previous,next:next,finish:finish,gotoPage:gotoPage}),plugin}function WizardPage(options,forPlugin){
function draw(){drawn||(drawn=!0,aml=new ui.bar,plugin.addOther(function(){aml.removeNode()}),apf.document.documentElement.appendChild(aml),
aml.removeNode(),emit.sticky("draw",{html:aml.$ext,aml:aml}))}function hide(){aml.parentNode.removeChild(aml),
emit("hide")}function show(options){draw(),options&&options.aml.appendChild(aml),emit("show")}var aml,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),name=options.name


forPlugin&&forPlugin.addOther(function(){plugin.unload()})
var drawn
return plugin.freezePublicAPI.baseclass(),plugin.freezePublicAPI({get name(){return name},get aml(){return aml

},get container(){return aml&&aml.$ext},_events:["hide","show"],show:show,hide:hide}),plugin}var Plugin=imports.Plugin,Dialog=imports.Dialog,apf=imports.apf,ui=imports.ui


register("",{Wizard:Wizard,WizardPage:WizardPage})}return main.consumes=["Plugin","ui","Dialog","apf"],
main.provides=["Wizard","WizardPage"],main})


define("ace_tree/data_provider_mirror",[],function(require,exports,module){"use strict"
var oop=require("ace/lib/oop"),DataProvider=require("./data_provider"),Mirror=function(source){this.source=source,
this.rowHeight=25,this.expandedList=Object.create(null),this.selectedList=Object.create(null),source&&this.setRoot(source.root)

}
oop.inherits(Mirror,DataProvider),function(){this.setRoot=function(root){Array.isArray(root)&&(root={
items:root}),this.root=root||{},void 0==this.root.$depth&&(this.root.$depth=-1),this.root.$depth<0?(this.visibleItems=[],
this.root.isOpen=!1,this.open(this.root),this.visibleItems.unshift()):this.visibleItems=[this.root],this.$selectedNode=this.root,
this._signal("setRoot"),this._signal("change")},this.setOpen=function(node,val){val?this.expandedList[node.path]=val:delete this.expandedList[node.path]

},this.isOpen=function(node){return this.expandedList[node.path]},this.isSelected=function(node){return this.selectedList[node.path]

},this.setSelected=function(node,val){val?this.selectedList[node.path]=!!val:delete this.selectedList[node.path]

}}.call(Mirror.prototype),module.exports=Mirror})


define("text!plugins/c9.ide.dialog.file/file.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "window"\n      center    = "true"\n      height    = "395"\n      minwidth  = "560"\n      minheight = "247"\n      icon      = ""\n      buttons   = "close"\n      skin      = "bk-window2"\n      kbclose   = "true"\n      resizable = "true"\n      title     = "Save As"\n      width     = "560"\n      class     = "dark"\n      draggable = "true">\n        <a:vbox\n          class     = "filesave-inner-padding"\n          padding   = "5">\n            <div>\n                <a:hsplitbox\n                  id        = "boxFilename"\n                  align     = "center"\n                  padding   = "5"\n                  height    = "28" >\n                    <a:label class="lblFilename" width="70" margin="5 0 0 0">Filename:</a:label>\n                    <a:textbox\n                      id           = "txtFilename"\n                      flex         = "7"\n                      class        = "ace_searchbox tb_textbox searchbox searchTxt tb_console"\n                      focusselect  = "true" />\n                </a:hsplitbox>\n            </div>\n            \n            <div class="dgLikeContaier" margin="5 0 5 0" flex="1">\n                <a:hbox id="container"\n                  anchors  = "0 0 0 0"\n                  overflow = "hidden">\n                </a:hbox>\n            </div> \n            \n            <a:hbox\n              align     = "center"\n              padding   = "5">\n                <a:label class="lbl_saveas" width="70">Folder:</a:label>\n                <a:textbox\n                  id           = "txtDirectory"\n                  flex         = "7"\n                  class        = "directory ace_searchbox tb_textbox searchbox searchTxt tb_console"\n                  focusselect  = "true" />\n            </a:hbox>\n            \n            <a:hbox edge="13 0 0" pack="end" padding="8">\n                  <!--class    = "btnIconOnly smallCaption newFolder"-->\n                <a:button\n                  id       = "btnCreateFolder"\n                  skin     = "btn-default-css3"\n                  tooltip  = "Create folder">\n                    Create folder\n                </a:button>\n                <a:checkbox\n                  id      = "cbShowFiles"\n                  skin    = "checkbox_black"\n                  checked = "false"\n                  width   = "120"\n                  margin  = "7 0 0">\n                    Show files in tree\n                </a:checkbox>\n                <a:filler />\n                <a:button\n                  id      = "btnChoose"\n                  class   = "btn-green"\n                  width   = "120"\n                  caption = "Save"\n                  skin    = "btn-default-css3"\n                />\n                <a:button\n                  id       = "btnCancel"\n                  class    = "btn-red"\n                  skin     = "btn-default-css3"\n                  width   = "120"\n                  caption  = "Cancel"\n                />\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n</a:application>')


define("text!plugins/c9.ide.dialog.file/file.css",[],"")


define("plugins/c9.ide.dialog.file/file",[],function(require,module,exports){function main(options,imports,register){
function draw(htmlNode){function updateScrollBarSize(){var w=tree.renderer.scrollBarV.getWidth()
tree.renderer.scroller.style.right=Math.max(w,10)+"px"}drawn||(drawn=!0,ui.insertMarkup(null,require("text!./file.xml"),plugin),
ui.insertCss(require("text!./file.css"),plugin),dialog=plugin.getElement("window"),container=plugin.getElement("container"),
btnChoose=plugin.getElement("btnChoose"),btnCancel=plugin.getElement("btnCancel"),btnCreateFolder=plugin.getElement("btnCreateFolder"),
cbShowFiles=plugin.getElement("cbShowFiles"),txtFilename=plugin.getElement("txtFilename"),txtDirectory=plugin.getElement("txtDirectory"),
boxFilename=plugin.getElement("boxFilename"),btnCreateFolder.on("click",function(){fileTree.createFolder(null,null,function(err,newpath){
expandAndSelect(newpath)},tree)}),txtFilename.on("keyup",function(e){13==e.keyCode&&btnChoose.dispatchEvent("click")

}),txtDirectory.on("keyup",function(e){13==e.keyCode&&expandAndSelect(txtDirectory.value)}),tree=new Tree(container.$int),
tree.renderer.setScrollMargin(10,10),tree.renderer.setTheme({cssClass:"filetree"}),tree.edit=new TreeEditor(tree),
tree.on("beforeRename",function(e){return fileTree.tree._emit("beforeRename",e)}),tree.on("rename",function(e){
return fileTree.tree._emit("rename",e)}),tree.on("delete",function(e){var selection=tree.selection.getSelectedNodes()


fileTree.remove(selection)}),tree.renderer.on("scrollbarVisibilityChanged",updateScrollBarSize),tree.renderer.on("resize",updateScrollBarSize),
tree.on("userSelect",function(e){var selected=tree.selection.getCursor()
selected&&(plugin.directory=selected.isFolder?selected.path:dirname(selected.path),selected.isFolder||(plugin.filename=basename(selected.path)))

}),tree.on("afterChoose",function(e){}),dialog.on("prop.visible",function(e){updateTreeModel(e.value),
emit(e.value?"show":"hide")}),dialog.on("afterresize",function(){tree.resize()}),emit.sticky("draw"))

}function updateTreeModel(enable){if(enable){var model=new TreeData,height=parseInt(ui.getStyleRule(".filetree .tree-row","height"),10)


model.rowHeightInner=height,model.rowHeight=height,model.indent=12,model.getIconHTML=getIconHTML,model.setRoot(fsCache.model.root),
model.source=fsCache.model,Object.getOwnPropertyNames(model.source).forEach(function(n){"function"==typeof model.source[n]&&(model[n]=model.source[n])

}),model.startUpdate=function(){},model.endUpdate=function(node){model.isOpen(node)&&(model.close(node),
model.open(node))},updateFilter(model),tree.setDataProvider(model),model.getChildren(model.root).forEach(function(node){
node.isRoot&&model.expand(node)})
var path=plugin.directory+(showFiles&&!hideFileInput?"/"+plugin.filename:"")
expandAndSelect(path,model),fsCache.model.on("startUpdate",tree.provider.startUpdate),fsCache.model.on("endUpdate",tree.provider.endUpdate)

}else fsCache.model.off("startUpdate",tree.provider.startUpdate),fsCache.model.off("endUpdate",tree.provider.endUpdate),
tree.setDataProvider(null)}function expandAndSelect(path,model){fsCache.loadNodes(path,function(e){model&&tree.provider!=model||(e.node&&(tree.reveal(e.node),
e.node.isFolder&&tree.provider.expand(e.node)),e.complete&&setTimeout(function(){tree.renderer.scrollCaretIntoView(null,.5)

},200))})}function getIconHTML(node){var icon=node.map?"folder":util.getFileIcon(node.label)
return"loading"===node.status&&(icon="loading"),"<span class='filetree-icon "+icon+"'></span>"}function updateFilter(model){
model&&model.setFilter(showFiles?null:function(node){return node.isRoot||node.isFolder})}function init(title,path,onChoose,onCancel,options){
var createFolderButton=(options&&options.createFolderButton)!==!1,showFilesCheckbox=(options&&options.showFilesCheckbox)!==!1,hideFileInput=options&&options.hideFileInput


plugin.title=title||"Save As",plugin.filename=path?basename(path):"",plugin.directory=path?hideFileInput?path:dirname(path):"/",
btnChoose.setAttribute("caption",options&&options.chooseCaption||"Save")
var choosen=!1
btnChoose.onclick=function(){var path=join(plugin.directory,hideFileInput?"":plugin.filename)
return path?void fs.exists(path,function(exists,stat){var isDirectory=stat&&(/(directory|folder)$/.test(stat.mime)||stat.link&&/(directory|folder)$/.test(stat.linkStat.mime))


isDirectory&&!hideFileInput||(choosen=!0,onChoose(path,stat||!1,function(){dialog.hide()}))}):alert("Invalid Path","Invalid Path","Please choose a correct path and filename")

},btnCancel.onclick=function(){dialog.hide()},btnCreateFolder.setAttribute("visible",createFolderButton),
cbShowFiles.setAttribute("visible",showFilesCheckbox),boxFilename.setAttribute("visible",!hideFileInput),
cbShowFiles.setAttribute("checked",!0),showFiles=!0,cbShowFiles.on("prop.value",function(){showFiles=cbShowFiles.checked,
updateFilter(tree.provider)}),plugin.once("hide",function(){!choosen&&onCancel&&onCancel()})}function show(title,path,onChoose,onCancel,options){
plugin.loaded&&(draw(),init(title,path,onChoose,onCancel,options),dialog.show())}function hide(){dialog&&dialog.hide()

}var dialog,container,btnChoose,btnCancel,btnCreateFolder,tree,cbShowFiles,txtFilename,txtDirectory,boxFilename,Plugin=imports.Plugin,util=(imports.Dialog,
imports.util),ui=imports.ui,fs=imports.fs,fsCache=imports["fs.cache"],alert=imports["dialog.alert"].show,fileTree=imports.tree,Tree=require("ace_tree/tree"),TreeData=require("ace_tree/data_provider_mirror"),TreeEditor=require("ace_tree/edit"),join=require("path").join,basename=require("path").basename,dirname=require("path").dirname,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),showFiles=!0,hideFileInput=!0,drawn=!1


plugin.freezePublicAPI({get aml(){return dialog},get tree(){return tree},get title(){},set title(value){
drawn&&dialog.setAttribute("title",value)},get filename(){return txtFilename.value},set filename(value){
drawn&&txtFilename.setAttribute("value",value)},get directory(){return txtDirectory.value},set directory(value){
drawn&&txtDirectory.setAttribute("value",value)},_events:["draw","show","hide"],show:show,hide:hide}),
register("",{"dialog.file":plugin})}return main.consumes=["Plugin","ui","fs","dialog.alert","fs.cache","util","Dialog","tree"],
main.provides=["dialog.file"],main})


define("text!plugins/c9.ide.dialog.login/login.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "window"\n      center    = "true"\n      height    = "188"\n      minwidth  = "300"\n      icon      = ""\n      buttons   = "close"\n      skin      = "bk-window2"\n      kbclose   = "true"\n      resizable = "false"\n      title     = "Please Sign In"\n      width     = "300"\n      class     = "login dark"\n      draggable = "true">\n        <a:vbox\n          anchors   = "10 20 0 10"\n          padding   = "5">\n            <div>\n              <a:label id="lblExplanation">Log in</a:label>\n            </div>\n            <div>\n              <a:hbox\n                id        = "boxUser"\n                align     = "center"\n                padding   = "5">\n                  <a:label class="lblUsername" width="70">User name:</a:label>\n                  <a:textbox\n                    id           = "txtUsername"\n                    flex         = "7"\n                    class        = "ace_searchbox tb_textbox searchbox searchTxt tb_console"\n                    focusselect  = "true" />\n              </a:hbox>\n            </div>\n            <div>\n              <a:hbox\n                id        = "boxPassword"\n                align     = "center"\n                padding   = "5">\n                  <a:label class="lblPassword" width="70">Password:</a:label>\n                  <a:secret\n                    id           = "txtPassword"\n                    flex         = "7"\n                    class        = "ace_searchbox tb_textbox searchbox searchTxt tb_console"\n                    focusselect  = "true" />\n              </a:hbox>\n            </div>\n            \n            <a:hbox edge="23 0 10" pack="end" padding="8">\n                <a:button\n                  id      = "btnChoose"\n                  class   = "btn-green"\n                  caption = "OK"\n                  skin    = "btn-default-css3"\n                />\n                <a:button\n                  id       = "btnCancel"\n                  skin     = "btn-default-css3"\n                  caption  = "Cancel"\n                />\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n</a:application>')


define("text!plugins/c9.ide.dialog.login/login.css",[],"")


define("plugins/c9.ide.dialog.login/login",[],function(require,module,exports){function main(options,imports,register){
function draw(htmlNode){drawn||(drawn=!0,ui.insertMarkup(null,require("text!./login.xml"),plugin),ui.insertCss(require("text!./login.css"),plugin),
dialog=plugin.getElement("window"),btnChoose=plugin.getElement("btnChoose"),btnCancel=plugin.getElement("btnCancel"),
txtUsername=plugin.getElement("txtUsername"),txtPassword=plugin.getElement("txtPassword"),lblExplanation=plugin.getElement("lblExplanation"),
dialog.on("prop.visible",function(e){emit(e.value?"show":"hide")}),emit.sticky("draw"))}function show(title,description,onChoose,onCancel,options){
draw(),lblExplanation.$ext.textContent=description,plugin.title=title||"Please Sign In"
var chosen
btnChoose.onclick=function(){chosen=!0,dialog.disable(),onChoose(txtUsername.value,txtPassword.value,function(success){
dialog.enable(),success&&plugin.hide()})},btnCancel.onclick=function(){plugin.hide()},plugin.once("hide",function(){
!chosen&&onCancel&&onCancel()}),dialog.show()}function hide(){dialog&&dialog.hide()}var dialog,btnChoose,btnCancel,txtUsername,txtPassword,lblExplanation,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),ui=imports.ui,emit=(imports.util,
plugin.getEmitter()),drawn=!1
plugin.freezePublicAPI({get title(){},set title(value){drawn&&dialog.setAttribute("title",value)},_events:["draw","show","hide"],
show:show,hide:hide}),register("",{"dialog.login":plugin})}return main.consumes=["Plugin","ui","util","Dialog"],
main.provides=["dialog.login"],main})


define("text!plugins/c9.ide.dialog.common/notification.css",[],"")


define("plugins/c9.ide.dialog.common/notification",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,ui.insertCss(require("text!./notification.css"),options.staticPrefix,plugin),
container=layout.findParent(plugin),void(logo=document.querySelector(".c9-mbar-round")))}function show(html,showCloseButton,timeout){
function show(){div.style.display="block"
var toHeight=calculateHeight()
container.setHeight(toHeight-div.offsetHeight),div.style.zIndex=1e4-count,div.style.marginTop=-1*div.offsetHeight+"px",
anims.animate(div,{marginTop:0,duration:.2,timingFunction:"linear"}),anims.animate(logo,{top:toHeight+"px",
duration:.2,timingFunction:"linear"},function(){}),anims.animateSplitBoxNode(container,{height:toHeight+"px",
duration:.22,timingFunction:"linear"},function(){})}var hide,timer
count++
var div=container.$int.appendChild(document.createElement("div"))
return showCloseButton&&(div.appendChild(document.createElement("U")).className="close",div.className="notificationlabel",
div.addEventListener("mouseup",function(e){"U"==e.target.tagName&&hide()})),ui.insertHtml(div,html,plugin),
container.show(),div.style.display="none",timeout?timer=setTimeout(show,timeout):show(),hide=_hide.bind(null,div,timer),
hide.hasClosed=function(){return!div.parentNode},hide}function _hide(div,timer,callback){if(clearTimeout(timer),
!div||!div.parentNode)return callback&&callback()
var toHeight=calculateHeight()-div.scrollHeight
anims.animate(div,{marginTop:-1*div.offsetHeight+"px",duration:.2,timingFunction:"linear"}),anims.animate(logo,{
top:toHeight+"px",duration:.2,timingFunction:"linear"},function(){}),anims.animateSplitBoxNode(container,{
height:toHeight+"px",duration:.2,timingFunction:"linear"},function(){div.parentNode.removeChild(div),
callback&&callback(),count||container.hide()})}function calculateHeight(){for(var nodes=container.$ext.childNodes,total=0,i=0;i<nodes.length;i++)1==nodes[i].nodeType&&(total+=nodes[i].scrollHeight)


return total}var container,logo,Plugin=imports.Plugin,ui=imports.ui,layout=imports.layout,anims=imports.anims,plugin=new Plugin("Ajax.org",main.consumes),count=0,loaded=!1


plugin.on("load",function(){load()}),plugin.freezePublicAPI({show:show}),register(null,{"dialog.notification":plugin
})}return main.consumes=["Plugin","ui","layout","anims"],main.provides=["dialog.notification"],main})


define("text!plugins/c9.ide.dialog.common/error.css",[],"")


define("plugins/c9.ide.dialog.common/error",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){ui.insertCss(require("text!./error.css"),options.staticPrefix,plugin)

}function initDisconnectEvents(vfs){var timer
vfs.once("connect",function(){vfs.connection.on("reconnectDelay",function(e){clearInterval(timer)
var delay=e.delay
delay>999&&(timer=setInterval(function(){return vfs.connected?clearInterval(timer):(delay-=1e3,showDisconnect({
delay:delay}),void(delay<=0&&clearInterval(timer)))},1e3)),showDisconnect(e)})}),vfs.on("away",function(){}),
vfs.on("back",function(){hideDisconnect()}),vfs.on("connect",function(){hideDisconnect()}),vfs.on("disconnect",function(){}),
vfs.on("connecting",function(){showDisconnect({connecting:!0})}),plugin.on("retryConnect",function(){
vfs.connection.reconnect(0)})}function getCenterX(){var bartools=document.querySelector(".bartools")
if(!bartools)return 0
var b1=bartools.getBoundingClientRect(),b2=bartools.nextSibling.getBoundingClientRect()
return b1.left+b1.width+(b2.left-b1.left-b1.width)/2}function getMessageString(message){var messageString


return messageString="string"==typeof message?apf.escapeXML(message):message.message?apf.escapeXML(message.message):message.html?message.html:"Error: "+message.toString()

}function show(message,timeout){if(error||(error=document.body.appendChild(document.createElement("div")),
error.addEventListener("mouseup",function(e){"U"==e.target.tagName&&hide()})),error.className="errorlabel c9error "+(message.className?message.className:""),
!message.noError){if(!message)return console.trace(),console.error("empty error message",message)
metrics.increment("dialog.error")}return hide(function(){var messageString=getMessageString(message)
error.innerHTML="<div><u class='close'></u>"+messageString+"</div>",error.style.opacity=0,error.style.display="block",
error.style.top=offset-(error.offsetHeight-10+topPx)+"px",error.firstChild.style.marginLeft=Math.max(0,getCenterX()-error.firstChild.offsetWidth/2)+"px",
lastClassname=message.className,setTimeout(function(){error.className="errorlabel c9error anim "+(offset>0?"fade-in":"")+" "+(message.className||""),
error.style.top=offset+topPx+"px",error.style.opacity=1},10),clearTimeout(hideTimeout),timeout<0||(hideTimeout=setTimeout(hide,timeout||15e3))

}),++lastCookie}function hide(cookie,callback){return"function"==typeof cookie?hide(null,cookie):cookie&&lastCookie!==cookie?callback&&callback():error&&"none"!==error.style.display?(error.className="errorlabel c9error anim "+(offset>0?"fade-in ":" ")+(lastClassname?lastClassname:""),
offset>0?error.style.opacity=0:error.style.top=-1*error.offsetHeight-10+topPx+"px",void setTimeout(function(){
error.style.display="none",callback&&callback()},220)):callback&&callback()}function showDisconnect(options){
disconnect||(disconnect=document.body.appendChild(document.createElement("div")),disconnect.className="disconnectlabel",
disconnect.addEventListener("mouseup",function(e){"U"==e.target.tagName&&emit("retryConnect")}))
var message
message=!options||options.delay<1e3||options.connecting?"Reconnecting...":options.delay?"Reconnecting in "+Math.ceil(options.delay/1e3)+" seconds."+(options.delay<2001?"":" <u>Retry Now.</u>"):"Reconnecting...",
disconnect.innerHTML="<div>"+message+"</div>",disconnect.firstChild.style.marginLeft=Math.max(0,getCenterX()-150)+"px",
"block"!=disconnect.style.display&&(disconnect.style.display="block",disconnect.style.top=-1*disconnect.offsetHeight-10+topPx+"px",
setTimeout(function(){disconnect.className="disconnectlabel anim",disconnect.style.top=topPx+"px"},10),
offset=28)}function hideDisconnect(cookie,callback){return disconnect&&"none"!==disconnect.style.display?(disconnect.className="disconnectlabel anim",
disconnect.style.top=-1*disconnect.offsetHeight-10+topPx+"px",setTimeout(function(){disconnect.style.display="none",
callback&&callback()},220),void(offset=0)):callback&&callback()}var error,hideTimeout,disconnect,lastClassname,Plugin=imports.Plugin,ui=imports.ui,metrics=imports.metrics,plugin=(imports.error_handler,
new Plugin("Ajax.org",main.consumes)),emit=plugin.getEmitter(),topPx=0,lastCookie=0,offset=0
plugin.on("load",function(){load()}),plugin.on("unload",function(){topPx=0,lastCookie=0,offset=0,error=null,
hideTimeout=null,disconnect=null}),plugin.freezePublicAPI({get top(){return topPx},set top(value){topPx=value

},get vfs(){throw new Error("Permission Denied")},set vfs(v){initDisconnectEvents(v)},get visible(){return error&&"none"!==error.style.display&&error.className

},showDisconnect:showDisconnect,hideDisconnect:hideDisconnect,show:show,hide:hide}),register(null,{"dialog.error":plugin
})}return main.consumes=["Plugin","ui","metrics","error_handler"],main.provides=["dialog.error"],main

})


define("plugins/c9.ide.dialog.common/upsell",[],function(require,module,exports){function main(options,imports,register){
function show(onYes,onNo,title,header,msg,options){return options||(options={isHTML:!0}),plugin.queue(function(){
var cancel=options.cancel,metadata=options.metadata
title=title||"This is a Premium feature",header=header||"Upgrade to Premium Now!",onYes=onYes||function(){},
onNo=onNo||function(){},msg=msg||'A better, faster, more versatile Cloud9 is just a click away. Check out our <a href="https://c9.io/pricing" target="_blank">amazing premium plans</a>.',
plugin.title=title,plugin.heading=options&&options.isHTML?header:util.escapeXml(header),plugin.body=options&&options.isHTML?msg:util.escapeXml(msg).replace(/\n/g,"<br>"),
plugin.getElement("yes").setCaption(options.yes||"Go Premium!"),plugin.getElement("no").setCaption(options.no||"Cancel"),
plugin.allowClose=cancel
var gotYesNo=!1
plugin.once("hide",function(){!gotYesNo&&cancel&&onNo(!1,!0,metadata)}),plugin.update([{id:"yes",onclick:function(){
gotYesNo=!0,plugin.hide(),onYes(!1,metadata)}},{id:"no",onclick:function(){gotYesNo=!0,plugin.hide(),
onNo(!1,!1,metadata)}}])},options.queue===!1)}var Dialog=imports.Dialog,util=imports.util,plugin=new Dialog("Ajax.org",main.consumes,{
name:"dialog.upsell",allowClose:!0,modal:!0,elements:[{type:"filler"},{type:"button",id:"no",caption:"Cancel",
hotkey:"ESC",skin:"c9-simple-btn",margin:"7 10 0 0"},{type:"button",id:"yes",caption:"Go Premium!",color:"green",
"default":!0,hotkey:"Y"}]})
plugin.freezePublicAPI({show:show}),register("",{"dialog.upsell":plugin})}return main.consumes=["Dialog","util"],
main.provides=["dialog.upsell"],main})


define("plugins/c9.ide.dialog.common/question",[],function(require,module,exports){function main(options,imports,register){
function show(title,header,msg,onYes,onNo,options){return onYes&&"function"!=typeof onYes?show(title,header,msg,null,null,onYes):onNo&&"function"!=typeof onNo?show(title,header,msg,onYes,null,onNo):(options||(options={}),
plugin.queue(function(){var all=options.all,cancel=options.cancel,showDontAsk=options.showDontAsk,metadata=options.metadata


plugin.title=title,plugin.heading=options&&options.isHTML?header:util.escapeXml(header),plugin.body=options&&options.isHTML?msg:util.escapeXml(msg).replace(/\n/g,"<br>"),
plugin.getElement("yes").setCaption(options.yes||"Yes"),plugin.getElement("no").setCaption(options.no||"No"),
plugin.getElement("yestoall").setCaption(options.yestoall||"Yes to All"),plugin.getElement("notoall").setCaption(options.notoall||"No to All"),
plugin.allowClose=cancel
var gotYesNo=!1
plugin.once("hide",function(){!gotYesNo&&cancel&&onNo&&onNo(!1,!0,metadata)}),plugin.update([{id:"cancel",
visible:cancel&&!options.notoall,onclick:function(){plugin.hide()}},{id:"dontask",visible:showDontAsk
},{id:"yestoall",visible:all,onclick:function(){gotYesNo=!0,plugin.hide(),onYes&&onYes(!0,metadata)}},{
id:"notoall",visible:all,onclick:function(){gotYesNo=!0,plugin.hide(),onNo&&onNo(!0,!1,metadata)}},{id:"yes",
onclick:function(){gotYesNo=!0,plugin.hide(),onYes&&onYes(!1,metadata)}},{id:"no",onclick:function(){
gotYesNo=!0,plugin.hide(),onNo&&onNo(!1,!1,metadata)}}])},options.queue===!1))}var Dialog=imports.Dialog,util=imports.util,plugin=new Dialog("Ajax.org",main.consumes,{
name:"dialog.question",allowClose:!1,modal:!0,elements:[{type:"checkbox",id:"dontask",caption:"Don't ask again",
visible:!1},{type:"button",id:"yestoall",caption:"Yes to All",color:"green",visible:!1},{type:"button",
id:"notoall",caption:"No to All",color:"red","default":!0,visible:!1},{type:"filler"},{type:"button",
id:"yes",caption:"Yes",color:"green","default":!0,hotkey:"Y"},{type:"button",id:"no",caption:"No",color:"red",
hotkey:"N"},{type:"button",id:"cancel",caption:"Cancel",visible:!1,hotkey:"ESC"}]})
plugin.freezePublicAPI({get all(){},set all(value){plugin.update([{id:"yestoall",visible:value},{id:"notoall",
visible:value}])},get cancel(){},set cancel(value){plugin.allowClose=value,plugin.update([{id:"cancel",
visible:value}])},get showDontAsk(){return plugin.getElement("dontask").visible},set showDontAsk(value){
plugin.update([{id:"dontask",visible:value}])},get dontAsk(){return plugin.getElement("dontask").value

},show:show}),register("",{"dialog.question":plugin})}return main.consumes=["Dialog","util"],main.provides=["dialog.question"],
main})


define("plugins/c9.ide.dialog.common/info",[],function(require,exports,module){"use strict"
function main(options,imports,register){function show(message,timeout){var visible=error.visible
if(visible&&visible.indexOf("infolabel")===-1)return-1
var options="string"==typeof message?{message:message}:message
return options.className="infolabel",options.noError=!0,error.show(options,timeout)}var Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),error=imports["dialog.error"]


plugin.freezePublicAPI({show:show,hide:error.hide.bind(error)}),register(null,{"dialog.info":plugin})

}return main.consumes=["Plugin","ui","metrics","dialog.error"],main.provides=["dialog.info"],main})


define("plugins/c9.ide.dialog.common/fileremove",[],function(require,module,exports){function main(options,imports,register){
function show(files,onremove){function confirm(file){var name=file.label,type=file.isFolder?"folder":"file"


question("Confirm Remove","You are about to remove the "+(type||"item")+" "+name,"Do you want continue? (This change cannot be undone)",function(all){
files.confirmed=!0,onremove(file),all&&files.forEach(function(file){onremove(file)}),files.confirmed=!1,
!all&&files.length>0&&confirm(files.shift())},function(all,cancel){!all&&files.length>0&&confirm(files.shift())

},{all:files.length>0})}return void 0===files.confirmed&&(files.confirmed=!1),!!files.confirmed||(confirm(files.shift()),
!1)}var question=imports["dialog.question"].show
register("",{"dialog.fileremove":{show:show}})}return main.consumes=["dialog.question"],main.provides=["dialog.fileremove"],
main})


define("plugins/c9.ide.dialog.common/fileoverwrite",[],function(require,module,exports){function main(options,imports,register){
function show(title,header,msg,onOverwrite,onSkip,options){return plugin.queue(function(){var all=options.all,cancel=options.cancel,metadata=options.metadata


plugin.title=title,plugin.heading=util.escapeXml(header),plugin.body=util.escapeXml(msg),plugin.allowClose=cancel


var gotYes=!1
plugin.once("hide",function(){!gotYes&&cancel&&onSkip(!1,!0,metadata)}),plugin.update([{id:"cancel",visible:cancel,
onclick:function(){plugin.hide()}},{id:"yestoall",visible:all,onclick:function(){gotYes=!0,plugin.hide(),
onOverwrite(!0,metadata)}},{id:"notoall",visible:all,onclick:function(){plugin.hide(),onSkip(!0,!1,metadata)

}},{id:"yes",onclick:function(){gotYes=!0,plugin.hide(),onOverwrite(!1,metadata)}},{id:"no",onclick:function(){
plugin.hide(),onSkip(!1,!1,metadata)}}])})}var Dialog=imports.Dialog,util=imports.util,plugin=new Dialog("Ajax.org",main.consumes,{
name:"dialog.fileoverwrite",allowClose:!1,modal:!0,elements:[{type:"button",id:"yestoall",caption:"Overwrite All",
color:"green",visible:!1},{type:"button",id:"notoall",caption:"Skip All",color:"red","default":!0,visible:!1
},{type:"filler"},{type:"button",id:"yes",caption:"Overwrite",color:"green","default":!0,hotkey:"Y"},{
type:"button",id:"no",caption:"Skip",color:"red",hotkey:"N"},{type:"button",id:"cancel",caption:"Cancel",
visible:!1,hotkey:"ESC"}]})
plugin.freezePublicAPI({show:show}),register("",{"dialog.fileoverwrite":plugin})}return main.consumes=["Dialog","util"],
main.provides=["dialog.fileoverwrite"],main})


define("plugins/c9.ide.dialog.common/filechange",[],function(require,module,exports){function main(options,imports,register){
function show(title,header,body,onlocal,onremote,onmerge,options){return options=options||{},plugin.queue(function(){
plugin.title=title,plugin.heading=util.escapeXml(header),body&&(plugin.body=util.escapeXml(body))
var cb=plugin.getElement("applyall")
if(cb.uncheck(),cb.setAttribute("visible",options.all!==!1),options.merge){var mergeBoth=plugin.getElement("mergeboth")


options.merge.caption&&mergeBoth.setAttribute("caption",options.merge.caption)}plugin.update([{id:"keepmine",
onclick:function(){plugin.hide(),onlocal(cb.value)}},{id:"useremote",onclick:function(){plugin.hide(),
onremote(cb.value)}},{id:"mergeboth",visible:!!options.merge,onclick:function(){plugin.hide(),onmerge(cb.value)

}}])})}var Dialog=imports.Dialog,util=imports.util,plugin=new Dialog("Ajax.org",main.consumes,{name:"dialog.filechange",
title:"File changed",body:"<p>You or a collaborator has changed this file.</p>Which version would you like to use?",
allowClose:!1,modal:!1,width:600,elements:[{type:"checkbox",id:"applyall",caption:"Apply to all changed files"
},{type:"filler"},{type:"button",id:"keepmine",caption:"Keep Mine",color:"blue"},{type:"button",id:"useremote",
caption:"Use Remote",color:"blue"},{type:"button",id:"mergeboth",caption:"Merge Both",color:"green","default":!0
}]})
plugin.freezePublicAPI({set all(value){plugin.update([{id:"applyall",visible:value}])},show:show}),register("",{
"dialog.filechange":plugin})}return main.consumes=["Dialog","util"],main.provides=["dialog.filechange"],
main})


define("plugins/c9.ide.dialog.common/confirm",[],function(require,module,exports){function main(options,imports,register){
function show(title,header,msg,onconfirm,oncancel,options){return plugin.queue(function(){options||(options={}),
plugin.title=title,plugin.heading=options.isHTML?header:util.escapeXml(header),plugin.body=options.isHTML?msg:util.escapeXml(msg).replace(/\n/g,"<br>"),
plugin.getElement("ok").setCaption(options.yes||"OK"),plugin.getElement("cancel").setCaption(options.no||"Cancel"),
plugin.update([{id:"dontshow",visible:options.showDontShow},{id:"ok",onclick:function(){plugin.hide(),
onconfirm()}},{id:"cancel",onclick:function(){plugin.hide(),oncancel&&oncancel()}}])})}var Dialog=imports.Dialog,util=imports.util,plugin=new Dialog("Ajax.org",main.consumes,{
name:"dialog.confirm",allowClose:!1,modal:!0,elements:[{type:"checkbox",id:"dontshow",caption:"Don't show again",
visible:!1},{type:"filler"},{type:"button",id:"ok",caption:"OK",color:"green","default":!0,onclick:function(){
plugin.hide()}},{type:"button",id:"cancel",caption:"Cancel",hotkey:"ESC",onclick:function(){plugin.hide()

}}]})
plugin.freezePublicAPI({show:show}),register("",{"dialog.confirm":plugin})}return main.consumes=["Dialog","util"],
main.provides=["dialog.confirm"],main})


define("plugins/c9.ide.dialog.common/alert_internal",[],function(require,module,exports){function main(options,imports,register){
function show(title,header,msg,onhide,options){return options=options||{},metrics.increment("dialog.error"),
plugin.queue(function(){void 0===header?(plugin.title="Notice",header=title,msg=msg||""):plugin.title=title,
plugin.heading=options.isHTML?header:util.escapeXml(header),plugin.body=options.isHTML?msg:(util.escapeXml(msg)||"").replace(/\n/g,"<br />").replace(/(https?:\/\/[^\s]*\b)/g,"<a href='$1' target='_blank'>$1</a>"),
plugin.getElement("ok").setCaption(options.yes||"OK"),plugin.update([{id:"dontshow",visible:options.showDontShow
}]),plugin.once("hide",function(){onhide&&onhide()})})}var Dialog=imports.Dialog,util=imports.util,metrics=imports.metrics,alertWrapper=imports["dialog.alert"],plugin=new Dialog("Ajax.org",main.consumes,{
name:"dialog.alert_internal",allowClose:!0,modal:!0,elements:[{type:"checkbox",id:"dontshow",caption:"Don't show again",
visible:!1},{type:"filler"},{type:"button",id:"ok",caption:"OK","default":!0,onclick:function(){plugin.hide()

}}]})
alertWrapper.alertInternal=plugin,plugin.freezePublicAPI({get dontShow(){return plugin.getElement("dontshow").value

},show:show}),register("",{"dialog.alert_internal":plugin})}return main.consumes=["Dialog","util","dialog.alert","metrics"],
main.provides=["dialog.alert_internal"],main})


define("plugins/c9.ide.dialog.common/alert",[],function(require,module,exports){function main(options,imports,register){
function show(title,header,msg,onhide,options){return alertInternal?alertInternal.show(title,header,msg,onhide,options):(alert(title+(header?"\n\n"+header:"")+(msg?"\n\n"+msg:"")),
void(onhide&&onhide()))}function hide(){alertInternal&&alertInternal.hide.apply(alertInternal,arguments)

}var alertInternal,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


plugin.freezePublicAPI({get dontShow(){return alertInternal&&alertInternal.dontShow},get aml(){return alertInternal&&alertInternal.aml

},show:show,hide:hide,get alertInternal(){return alertInternal},set alertInternal(value){alertInternal=value,
alertInternal.on("show",function(e){emit("show",e)}),alertInternal.on("hide",function(e){emit("hide",e)

}),alertInternal.on("draw",function(e){emit.sticky("draw",e)})},_events:["draw","show","hide"]}),register("",{
"dialog.alert":plugin})}return main.consumes=["Plugin"],main.provides=["dialog.alert"],main})


define("plugins/c9.ide.dialog/dialog",[],function(require,module,exports){function main(options,imports,register){
function Dialog(developer,deps,options){function draw(htmlNode){if(!drawn){drawn=!0,dialog=new ui.modalwindow({
id:"window",title:title,icon:"",center:"true",modal:modal,buttons:allowClose?"close":"",width:width,height:height,
zindex:zindex||"",skin:"bk-window2","class":"dialog "+(height?"":"relative")+(options.dark?" dark":"")+(className?" "+className:""),
childNodes:[new ui.vbox({id:"titles",padding:10,edge:"15 20 25 20"}),new ui.hbox({id:"buttons","class":"dialog-buttons",
pack:"end",padding:"8",height:"46",edge:"11 10 10"})]}),apf.document.documentElement.appendChild(dialog),
plugin.addElement(dialog),dialog.on("prop.visible",function(e){emit(e.value?"show":"hide")}),dialog.on("keydown",function(e){
allowClose&&27==e.keyCode&&dialog.hide()}),dialog.on("resize",function(){emit("resize")})
var escHandler=function(e){dialog.visible&&27==e.keyCode&&(dialog.dispatchEvent("keydown",e),e.stopPropagation())

},addEscHandler=function(){document.body.addEventListener("keydown",escHandler,!0)},removeEscHandler=function(){
document.body.removeEventListener("keydown",escHandler,!0)}
plugin.on("show",addEscHandler),plugin.on("hide",removeEscHandler),plugin.on("unload",removeEscHandler),
titles=plugin.getElement("titles"),buttons=plugin.getElement("buttons"),elements.length?elements.forEach(function(item){
createItem(null,null,item)}):buttons.parentNode.removeChild(buttons),emit.sticky("draw",{aml:titles,html:titles.$int
}),options.resizable&&(plugin.resizable=options.resizable)}}function queue(implementation,force){if(plugin.loaded)return Dialog.addToQueue(dialog,function(next){
draw(),implementation()
var custom=options.custom||!(heading||body)
custom||(titles.$int.innerHTML="<h3 style='margin:0 0 10px 0'>"+heading+"</h3><div class='alertMsg'>"+body+"</div>")


var textselect=options.textselect
void 0==textselect&&(textselect=!custom),titles.textselect=textselect,plugin.once("hide",next),dialog.show(),
focusManager.focus(dialog,!0)},force)}function show(){return plugin.queue(function(){},!0)}function hide(){
dialog&&dialog.hide()}function update(items){items.forEach(function(item){if(!drawn)return void elements.every(function(el){
if(el.id==item.id){for(var prop in item)el[prop]=item[prop]
return!1}return!0})
var el=plugin.getElement(item.id)
switch(el.type||el.tagName){case"dropdown":var dropdown=el
item.items&&dropdown.setChildren(item.items),null!=item.value&&dropdown.setAttribute("value",item.value)


break
default:Object.keys(item).forEach(function(key){return"onclick"===key?el.onclick=item.onclick:"id"!=key?el.setAttribute(key,item[key]):void 0

})}})}function createItem(heading,name,options){var node,position=options.position||(count+=100)
switch(options.type){case"checkbox":node=new ui.checkbox({label:options.caption,value:options.defaultValue||"",
values:options.values,skin:"checkbox_black"})
break
case"dropdown":node=new ui.dropdown({items:options.items,width:options.width||widths.dropdown,skin:"black_dropdown",
value:options.defaultValue,caption:options.caption,"empty-message":options["empty-message"]})
break
case"textbox":node=new ui.textbox({skin:"searchbox","initial-message":options.message||"",width:options.width||widths.textbox,
value:options.defaultValue||"",realtime:options.realtime||1})
break
case"button":node=new ui.button({skin:options.skin||"btn-default-css3","class":options.color?"btn-"+options.color:"",
margin:options.margin,caption:options.caption||"",submenu:options.submenu&&options.submenu.aml||options.submenu||"",
width:options.width||widths.button,"default":options["default"]?"1":""})
break
case"label":node=new ui.label({caption:options.caption,style:options.style,width:options.width||""})
break
case"image":node=new ui.img({skin:"simpleimg",src:options.src,margin:options.margin,width:options.width,
height:options.height})
break
case"divider":node=new ui.divider({skin:"c9-divider-hor",margin:"5 0 5 0"})
break
case"filler":node=new ui.filler
break
case"custom":node=options.node
break
default:throw new Error("Unknown form element type: "+options.type)}return(options.id||options.name)&&node.setAttribute("id",options.id||options.name),
void 0!==options.visible&&node.setAttribute("visible",options.visible),options.onclick&&(node.onclick=options.onclick),
options.hotkey&&dialog.on("keydown",function(e){("ESC"==options.hotkey&&27==e.keyCode||String.fromCharCode(e.keyCode)==options.hotkey)&&node.dispatchEvent("click")

}),ui.insertByIndex(buttons,node,position,plugin),plugin.addElement(node),node}var dialog,buttons,titles,plugin=new Plugin(developer,deps.concat(main.consumes)),emit=plugin.getEmitter(),name=options.name,left=options.left,top=options.top,width=options.width||512,height=options.height,title=options.title,heading=options.heading,body=options.body,className=options["class"],modal=options.modal,zindex=options.zindex,allowClose=options.allowClose,elements=options.elements||[],resizable=!1,widths=options.widths||{},count=0,drawn=!1


return plugin.on("unload",function(){drawn=!1,resizable=!1}),plugin.freezePublicAPI.baseclass(),plugin.freezePublicAPI({
get aml(){return dialog},get width(){return width},set width(v){width=v,dialog&&dialog.setAttribute("width",width)

},get left(){return left},set left(v){left=v,dialog&&dialog.setAttribute("left",left)},get top(){return top

},set top(v){top=v,dialog&&dialog.setAttribute("top",top)},get title(){return title},set title(v){title=v,
dialog&&dialog.setAttribute("title",title)},get resizable(){return resizable},set resizable(v){v!==resizable&&(resizable=v,
dialog&&(height||dialog.setAttribute("height",v?dialog.getHeight():""),width||dialog.setAttribute("width",v?dialog.getWidth():""),
dialog.setAttribute("class","dialog "+(v?"":"relative")+(options.dark?" dark":"")+(className?" "+className:"")),
dialog.setAttribute("resizable",v)))},get heading(){return heading},set heading(v){heading=v},get body(){
return body},set body(v){body=v},get modal(){return modal},get visible(){return dialog&&dialog.visible

},get allowClose(){return allowClose},set allowClose(v){allowClose=v,dialog&&dialog.setAttribute("buttons",v?"close":"")

},_events:["draw","show","hide"],createElement:function(options){createItem(null,null,options)},update:update,
queue:queue,show:show,hide:hide}),plugin.load(name,"dialog"),plugin}var Plugin=imports.Plugin,ui=imports.ui,focusManager=imports.focusManager,EventEmitter=require("events").EventEmitter


Dialog.queue=[],Dialog.addToQueue=function(dialog,fn,force){function queueItem(){fn(function(){Dialog.queue.splice(Dialog.queue.indexOf(queueItem),1),
emitter.emit("hide"),emitter.visible=0,Dialog.queue.length?Dialog.queue[0]():setTimeout(function(){focusManager.focus(Dialog.lastFocus),
delete Dialog.lastFocus})}),emitter.emit("show")===!1?dialog.hide():emitter.visible=1}var emitter=new EventEmitter


return emitter.visible=void 0,force?queueItem():(Dialog.queue.push(queueItem),Dialog.lastFocus||(Dialog.lastFocus=focusManager.activeElement),
1==Dialog.queue.length&&setTimeout(Dialog.queue[0])),emitter},register("",{Dialog:Dialog})}return main.consumes=["Plugin","ui","focusManager"],
main.provides=["Dialog"],main})


define("plugins/c9.ide.ui/lib/dropdown",[],function(require,module,exports){return function(apf){apf.StandardBinding=apf.Presentation,
apf.MultiSelect=apf.StandardBinding,apf.dropdown=function(struct,tagName){this.$init(tagName||"dropdown",apf.NODE_VISIBLE,struct)

},function(){function isValueEqual(v1,v2){return v1==v2||("object"!=typeof v1&&"object"!=typeof v2?v1+""==v2+"":void 0)

}this.$animType=1,this.$animSteps=5,this.$animSpeed=20,this.$itemSelectEvent="onmouseup",this.dragdrop=!1,
this.reselectable=!0,this.$focussable=apf.KEYBOARD,this.autoselect=!1,this.multiselect=!1,this.disableremove=!0,
this.delayedselect=!1,this.maxitems=5,this.$booleanProperties.disableremove=!0,this.$supportedProperties.push("maxitems","disableremove","initial-message","fill"),
this.$propHandlers.maxitems=function(value){this.sliderHeight=value?Math.min(this.maxitems||100,value)*this.itemHeight:10,
this.containerHeight=value?Math.min(this.maxitems||100,value)*this.itemHeight:10},this.addEventListener("prop.class",function(e){
this.$setStyleClass(this.oSlider,e.value)}),this.$propHandlers.value=function(value){for(var items=this.items||this.childNodes,i=0;i<items.length;i++){
var x=items[i],itemValue=x.value
if(void 0==itemValue&&x.getAttribute&&(itemValue=x.getAttribute("value")),isValueEqual(value,itemValue))return void this.$setLabel(x.caption||x.getAttribute&&x.getAttribute("caption")||value)

}this.$setLabel(String(value))},this.$updateChildren=function(){var items=this.items,children=this.childNodes


if(items){for(var i=0;i<items.length;i++){var item=items[i],ch=children[i]
ch?ch.item!=item&&(ch.item=item,ch.setAttribute("value",item.value),ch.setAttribute("caption",item.caption)):(ch=new apf.item(item),
this.appendChild(ch),ch.item=item)}for(;i<children.length;)children[i].destroy(!0,!0)}this.$int=this.$container


for(var i=0;i<children.length;i++)ch=children[i],ch.$pHtmlNode!=this.$int&&ch.dispatchEvent("DOMNodeInsertedIntoDocument",{}),
isValueEqual(ch.getAttribute("value"),this.value)?ch.$ext&&ch.$ext.classList.add("selected"):ch.$ext&&ch.$ext.classList.remove("selected")

},this.slideToggle=function(e,userAction){e||(e=event),userAction&&this.disabled||(this.isOpen?this.slideUp():this.slideDown(e))

},this.slideDown=function(e){if(this.dispatchEvent("slidedown")===!1)return!1
this.isOpen=!0,this.$updateChildren(),this.$propHandlers.maxitems.call(this,this.xmlRoot&&this.each?this.getTraverseNodes().length:this.childNodes.length),
this.oSlider.style.display="block",this.ignoreOverflow||(this.oSlider.style.overflowY="visible",this.$container.style.overflowY="hidden"),
this.oSlider.style.display="",this.$setStyleClass(this.$ext,this.$baseCSSname+"Down"),this.oSlider.style.height=this.sliderHeight-1+"px",
this.oSlider.style.width=this.$ext.offsetWidth-2-this.widthdiff+"px"
var _self=this,_popupCurEl=apf.popup.getCurrentElement()
apf.popup.show(this.$uniqueId,{x:0,y:this.$ext.offsetHeight,zindextype:"popup+",animate:!0,container:this.$getLayoutNode("container","contents",this.oSlider),
ref:this.$ext,width:this.$ext.offsetWidth-this.widthdiff,height:this.containerHeight,allowTogether:_popupCurEl&&apf.isChildOf(_popupCurEl.$ext,_self.$ext),
callback:function(container){_self.ignoreOverflow||(_self.$container.style.overflowY="auto")}})},this.slideUp=function(){
return 2!=this.isOpen&&(this.dispatchEvent("slideup")!==!1&&(this.isOpen=!1,this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Down"]),
apf.popup.last==this.$uniqueId&&apf.popup.hide(),!1))},this.select=function(value){this.setValue(value)

},this.$setLabel=function(value){this.oLabel.textContent=value||this["initial-message"]||"",this.$setStyleClass(this.$ext,value?"":this.$baseCSSname+"Initial",value?[this.$baseCSSname+"Initial"]:[])

},this.$blur=function(){this.slideUp(),this.isOpen||this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Over"]),
this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"])},this.$setClearMessage=function(msg){this.$setLabel(msg)

},this.$removeClearMessage=function(){this.$setLabel("")},this.addEventListener("popuphide",this.slideUp),
this.load=this.setChildren=function(data){this.items=data,this.isOpen&&this.$updateChildren(),this.$propHandlers.value.call(this,this.value)

},this.change=this.setValue=function(value){this.value!=value&&(this.setAttribute("value",value),this.dispatchEvent("afterchange",{
value:value}))},this.getValue=function(){return this.value},this.getSelectedNode=function(){this.isOpen||this.$updateChildren()


for(var items=this.childNodes,i=0;i<items.length;i++){var x=items[i],itemValue=x.value
if(void 0==itemValue&&x.getAttribute&&(itemValue=x.getAttribute("value")),isValueEqual(this.value,itemValue))return x

}},this.addEventListener("keydown",function(e){var node,key=e.keyCode
switch(key){case 32:this.slideToggle(e.htmlEvent)
break
case 38:if(e.altKey)return this.slideToggle(e.htmlEvent)
node=this.getSelectedNode(),node&&(node=node.previousSibling),node&&this.select(node.value)
break
case 40:if(e.altKey)return void this.slideToggle(e.htmlEvent)
node=this.getSelectedNode(),node&&(node=node.nextSibling),node&&this.select(node.value)
break
default:if(9==key||!this.xmlRoot)return
return(!this.lookup||(new Date).getTime()-this.lookup.date.getTime()>1e3)&&(this.lookup={str:"",date:new Date
}),void(this.lookup.str+=String.fromCharCode(key))}return!1},!0),this.addEventListener("itemclick",function(e){
this.select(e.value),this.slideUp()},!0),this.$draw=function(){this.$getNewContext("main"),this.$getNewContext("container"),
this.$animType=this.$getOption("main","animtype")||1,this.clickOpen=this.$getOption("main","clickopen")||"button",
this.$ext=this.$getExternal(null,null,function(oExt){oExt.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+');o.$setStyleClass(o.$ext, o.$baseCSSname + "Over", null, true);'),
oExt.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+');if(o.isOpen) return;o.$setStyleClass(o.$ext, "", [o.$baseCSSname + "Over"], true);')


var oButton=this.$getLayoutNode("main","button",oExt)
oButton&&oButton.setAttribute("onmousedown","apf.lookup("+this.$uniqueId+").slideToggle(event, true);")


var oLabel=this.$getLayoutNode("main","label",oExt)
"both"==this.clickOpen&&oLabel.parentNode.setAttribute("onmousedown","apf.lookup("+this.$uniqueId+").slideToggle(event, true);")

}),this.oLabel=this.$getLayoutNode("main","label",this.$ext),3==this.oLabel.nodeType&&(this.oLabel=this.oLabel.parentNode),
this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.$button&&(this.$button=this.$getLayoutNode("main","button",this.$ext)),
this.oSlider=apf.insertHtmlNode(this.$getLayoutNode("container"),document.body),this.$container=this.$getLayoutNode("container","contents",this.oSlider),
this.$container.host=this,this.$pHtmlDoc=apf.popup.setContent(this.$uniqueId,this.oSlider),this.listtype=parseInt(this.$getLayoutNode("main","type"))||1,
this.itemHeight=this.$getOption("main","item-height")||18.5,this.widthdiff=this.$getOption("main","width-diff")||0,
this.ignoreOverflow=apf.isTrue(this.$getOption("main","ignore-overflow"))||!1},this.addEventListener("DOMNodeInsertedIntoDocument",function(){
"undefined"==typeof this["initial-message"]&&this.$setInheritedAttribute("initial-message"),!this.selected&&this["initial-message"]&&this.$setLabel()

}),this.$destroy=function(){apf.popup.removeContent(this.$uniqueId),apf.destroyHtmlNode(this.oSlider),
this.oSlider=null}}.call(apf.dropdown.prototype=new apf.Presentation),apf.config.$inheritProperties["initial-message"]=1,
apf.aml.setElement("dropdown",apf.dropdown)}})


define("plugins/c9.ide.ui/lib/splitbox",[],function(require,module,exports){return function(apf){setTimeout,
setInterval
apf.resize=function(){this.scales={scalex:!1,scaley:!1,scaleratio:!1,dwidth:0,dheight:0,snap:!1,gridW:48,
gridH:48},this.htmlElement
var squares=[]
this.init=function(){squares=[new apf.resize.square("top","left",this),new apf.resize.square("top","middle",this),new apf.resize.square("top","right",this),new apf.resize.square("middle","left",this),new apf.resize.square("middle","right",this),new apf.resize.square("bottom","left",this),new apf.resize.square("bottom","middle",this),new apf.resize.square("bottom","right",this)]

},this.grab=function(oHtml,scales){this.htmlElement=oHtml,this.scales=scales,squares.length||this.init(),
this.show()},this.hide=function(){for(var i=0,l=squares.length;i<l;i++)squares[i].visible=!1,squares[i].repaint()

},this.show=function(){for(var s,sx=this.scales.scalex,sy=this.scales.scaley,sr=this.scales.scaleratio,i=0,l=squares.length;i<l;i++)s=squares[i],
s.visible=!(!sx||!sy)||(sy&&!sx?"middle"==s.posX:sx&&!sy?"middle"==s.posY:!!sr&&(("top"==s.posY||"bottom"==s.posY)&&"middle"!==s.posX)),
s.repaint()},this.destroy=function(){for(var i=0;i<squares.length;i++)squares[i].destroy()}},apf.resize.square=function(posY,posX,objResize){
this.visible=!0,this.posX=posX,this.posY=posY
var margin=0,_self=this
this.htmlElement=objResize.htmlElement.parentNode.appendChild(document.createElement("div")),apf.setStyleClass(this.htmlElement,"square"),
this.repaint=function(){if(this.visible){var block=objResize.htmlElement
this.htmlElement.style.display="block"
var bw=parseInt(block.style.width)+apf.getDiff(block)[0],bh=parseInt(block.style.height)+apf.getDiff(block)[1],bt=parseInt(block.style.top),bl=parseInt(block.style.left),sw=this.htmlElement.offsetWidth,sh=this.htmlElement.offsetHeight,t="top"==posY?bt-margin-sh:"middle"==posY?bt+bh/2-sh/2:bt+bh+margin,l="left"==posX?bl-margin-sw:"middle"==posX?bl+bw/2-sw/2:bl+bw+margin,c="middle"==posY?"w-resize":"middle"==posX?"n-resize":posY+posX=="topleft"||posY+posX=="bottomright"?"nw-resize":"ne-resize"


this.htmlElement.style.top=t-1+"px",this.htmlElement.style.left=l-1+"px",this.htmlElement.style.cursor=c

}else{var sw=this.htmlElement.offsetWidth
this.htmlElement.style.display="none"}},this.destroy=function(){apf.destroyHtmlNode(this.htmlElement)

},this.htmlElement.onmouseover=function(e){apf.setStyleClass(_self.htmlElement,"squareHover")},this.htmlElement.onmouseout=function(e){
apf.setStyleClass(_self.htmlElement,"",["squareHover"])},this.htmlElement.onmousedown=function(e){e=e||event


var width,height,top,left,dx,dy,prev_w,prev_h,block=objResize.htmlElement,sx=e.clientX,sy=e.clientY,dw=(block.parentNode.offsetTop,
block.parentNode.offsetLeft,objResize.scales.dwidth),dh=objResize.scales.dheight,snap=objResize.scales.snap,gridH=objResize.scales.gridH,gridW=objResize.scales.gridW,objBlock=apf.flow.isBlock(block),r=objBlock.other.ratio,posX=_self.posX,posY=_self.posY,l=parseInt(block.style.left),t=parseInt(block.style.top),w=parseInt(block.style.width),h=parseInt(block.style.height),resized=!1


objResize.onresizedone(w,h,t,l),e.preventDefault&&e.preventDefault(),document.onmousemove=function(e){
e=e||event,dx=e.clientX-sx,dy=e.clientY-sy
var shiftKey=e.shiftKey,proportion=r
if(shiftKey){if("right"==posX&&"bottom"==posY?(width=w+dx,height=width/proportion,left=l,top=t):"right"==posX&&"top"==posY?(width=w+dx,
height=width/proportion,left=l,top=t-dx/proportion):"left"==posX&&"bottom"==posY?(width=w-dx,height=width/proportion,
left=l+dx,top=t):"left"==posX&&"top"==posY&&(width=w-dx,height=width/proportion,left=l+dx,top=t+dx/proportion),
!(width>=dw&&height>=dh))return width=prev_w,height=prev_h,!1
width=prev_w=Math.max(dw,width),height=prev_h=Math.max(dh,height)}else width="right"==posX?w+dx:"left"==posX?w-dx:w,
height="bottom"==posY?h+dy:"top"==posY?h-dy:h,left="right"==posX?l:"left"==posX?Math.min(l+w-dw,l+dx):l,
top="bottom"==posY?t:"top"==posY?Math.min(t+h-dh,t+dy):t,width=Math.max(dw,width),height=Math.max(dh,height)


snap&&(left=Math.floor(left/gridW)*gridW,top=Math.floor(top/gridH)*gridH,width=Math.ceil(width/gridW)*gridW,
height=Math.ceil(height/gridH)*gridH),objResize.onresize&&objResize.onresize(block,top,left,width,height),
objResize.show(),resized=!0},document.onmouseup=function(e){document.onmousemove=null,objResize.onresizedone&&resized&&(objResize.onresizedone(width,height,top,left),
objBlock.other.ratio=width/height,resized=!1)}}},apf.hsplitbox=function(struct,tagName){this.$init(tagName||"hsplitbox",apf.NODE_VISIBLE,struct)

},apf.vsplitbox=function(struct,tagName){this.$init(tagName||"vsplitbox",apf.NODE_VISIBLE,struct)},function(){
function visibleHandler(e){this.parentNode.$handle&&(!e.value||this.parentNode.childNodes.length<3?this.parentNode.$handle.hide():this.parentNode.$handle.show()),
e.value&&!this.parentNode.visible&&this.parentNode.show(),this.parentNode.$propHandlers.edge.call(this.parentNode,this.parentNode.edge,!0),
this.parentNode.$propHandlers.padding.call(this.parentNode,this.parentNode.padding)}this.minwidth=0,this.minheight=0,
this.padding=0,this.edge=0,this.$edge=[0,0,0,0],this.$focussable=!1,this.$useLateDom=!0,this.$box=!0,
this.$layout=!0,this.$booleanProperties.splitter=!0,this.$supportedProperties.push("padding","edge","splitter"),
this.$propHandlers.padding=function(value){if(this.padding=parseInt(value),this.$amlLoaded){this.$handle&&(this.$handle.$ext.style[this.$vbox?"height":"width"]=value+"px")


var firstChild=this.getFirstChild(),lastChild=this.getSecondChild()
this.$vbox?this.flexChild2?firstChild.height?lastChild.$ext.style.marginTop=firstChild.visible?value+"px":0:firstChild.$ext.style.marginBottom=lastChild.visible?value+apf.getHeightDiff(lastChild.$ext)+"px":0:this.fixedChild&&this.fixedChild.visible&&(this.flexChild1==firstChild?this.fixedChild.visible&&(this.flexChild1.$ext.style.bottom=parseInt(this.fixedChild.height)+value+this.$edge[2]+"px"):lastChild&&this.flexChild1==lastChild&&(this.flexChild1.$ext.style.top=parseInt(this.fixedChild.height)+value+this.$edge[2]+"px")):this.flexChild2?firstChild.width?lastChild.$ext.style.marginLeft=value+apf.getWidthDiff(firstChild.$ext)+apf.getMargin(firstChild.$ext)[0]+"px":firstChild.$ext.style.marginRight=value+(lastChild?apf.getWidthDiff(lastChild.$ext)+apf.getMargin(lastChild.$ext)[0]:0)+"px":this.fixedChild&&this.fixedChild.visible&&(this.flexChild1==firstChild?this.flexChild1.$ext.style.right=parseInt(this.fixedChild.width)+value+this.$edge[1]+"px":lastChild&&this.flexChild1==lastChild&&(this.flexChild1.$ext.style.left=parseInt(this.fixedChild.width)+value+this.$edge[3]+"px"))

}},this.$propHandlers.splitter=function(value){value?this.$handle?this.$handle.show():this.$handle=this.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),this.lastChild):this.$handle&&this.$handle.hide()

},this.$propHandlers.edge=function(value,setSize){if(this.$edge=apf.getBox(value),this.$amlLoaded){var fNode=this.getFirstVisibleChild()


if(!fNode)return this.hide(),!1
fNode.$ext.style.left=this.$edge[3]+fNode.$margin[3]+"px",fNode.$ext.style.top=this.$edge[0]+fNode.$margin[0]+"px",
this.$vbox?fNode.$ext.style.right=this.$edge[1]+fNode.$margin[1]+"px":fNode.$ext.style.bottom=this.$edge[2]+fNode.$margin[2]+"px"


var lNode=this.getSecondVisibleChild()
if(lNode&&lNode.visible&&lNode.$ext){if(lNode.$ext.style.right=this.$edge[1]+lNode.$margin[1]+"px",lNode.$ext.style.bottom=this.$edge[2]+lNode.$margin[2]+"px",
this.$vbox){var isPercentage
lNode.$ext.style.left=this.$edge[3]+lNode.$margin[3]+"px",fNode.height||0===fNode.height?(isPercentage=String(fNode.height).indexOf("%")>-1,
lNode.$ext.style.top=isPercentage?fNode.height:parseInt(fNode.height)+this.padding+this.$edge[0]+fNode.$margin[0]+"px",
isPercentage&&(fNode.$ext.style.height="",fNode.$ext.style.bottom=100-parseFloat(fNode.height)+"%",lNode.$ext.style.height=""),
this.$handle&&(this.$handle.$ext.style.top=isPercentage?fNode.height:parseInt(fNode.height)+this.$edge[0]+"px")):(isPercentage=String(lNode.height).indexOf("%")>-1,
lNode.$ext.style.top="",fNode.$ext.style.bottom=isPercentage?lNode.height:parseInt(lNode.height)+this.padding+this.$edge[2]+lNode.$margin[2]+"px",
isPercentage&&(lNode.$ext.style.height="",lNode.$ext.style.top=100-parseFloat(lNode.height)+"%"),this.$handle&&(this.$handle.$ext.style.bottom=isPercentage?lNode.height:parseInt(lNode.height)+this.$edge[0]+"px")),
this.$handle&&(this.$handle.$ext.style.left=this.$edge[3]+"px",this.$handle.$ext.style.right=this.$edge[1]+"px")

}else{if(lNode.$ext.style.top=this.$edge[0]+lNode.$margin[0]+"px",fNode.width||0===fNode.width){var isPercentage=String(fNode.width).indexOf("%")>-1


lNode.$ext.style.left=isPercentage?fNode.width:parseInt(fNode.width)+this.padding+this.$edge[3]+fNode.$margin[3]+"px",
isPercentage&&(fNode.$ext.style.width="",fNode.$ext.style.right=100-parseFloat(fNode.width)+"%"),this.$handle&&(this.$handle.$ext.style.left=isPercentage?fNode.width:parseInt(fNode.width)+this.$edge[3]+"px")

}else{var isPercentage=String(lNode.width).indexOf("%")>-1
lNode.$ext.style.left="",fNode.$ext.style.right=isPercentage?lNode.width:parseInt(lNode.width)+this.padding+this.$edge[1]+lNode.$margin[1]+"px",
isPercentage&&(lNode.$ext.style.width="",lNode.$ext.style.left=100-parseFloat(lNode.width)+"%"),this.$handle&&(this.$handle.$ext.style.right=isPercentage?lNode.width:parseInt(lNode.width)+this.$edge[3]+"px")

}this.$handle&&(this.$handle.$ext.style.top=this.$edge[0]+"px",this.$handle.$ext.style.bottom=this.$edge[2]+"px")

}this.$handle&&(this.$handle.$ext.style.position="absolute")}else this.$vbox?(fNode.$ext.style.bottom=this.$edge[2]+fNode.$margin[2]+"px",
fNode.$ext.style.height=""):(fNode.$ext.style.right=this.$edge[1]+fNode.$margin[1]+"px",fNode.$ext.style.width=""),
this.$handle&&this.$handle.hide()
if(setSize===!0){var size=this.$vbox?"height":"width"
fNode.$propHandlers[size].call(fNode,fNode[size])}}},this.getFirstChild=function(startNode){for(var node=startNode||this.firstChild;node&&node.$splitter;)node=node.nextSibling


return node||!1},this.getSecondChild=function(){var node=this.getFirstChild()
return!!node&&(node.nextSibling&&this.getFirstChild(node.nextSibling))},this.getFirstVisibleChild=function(startNode){
for(var node=startNode||this.firstChild;node&&(!node.visible||node.$splitter);)node=node.nextSibling
return!(!node||!node.visible)&&node},this.getSecondVisibleChild=function(){var node=this.getFirstVisibleChild()


return!!node&&(node.nextSibling&&this.getFirstVisibleChild(node.nextSibling))}
var handlers={width:function(value,isLast){this.$ext.style.width=apf.isNot(value)?"":parseFloat(value)==value?value-apf.getWidthDiff(this.$ext)+"px":value,
this.$amlLoaded&&isLast!==!1&&this.parentNode.$propHandlers.edge.call(this.parentNode,this.parentNode.edge)

},height:function(value,isLast){this.$ext.style.height=apf.isNot(value)?"":parseFloat(value)==value?value-apf.getHeightDiff(this.$ext)+"px":value,
this.$amlLoaded&&isLast!==!1&&this.parentNode.$propHandlers.edge.call(this.parentNode,this.parentNode.edge)

},margin:function(value,isLast){this.$margin=apf.getBox(value),this.$amlLoaded&&isLast!==!1&&this.parentNode.$propHandlers.edge.call(this.parentNode,this.parentNode.edge)

}}
this.register=function(amlNode,insert){if(!amlNode.$splitter&&amlNode.nodeFunc==apf.NODE_VISIBLE){amlNode.$margin=[0,0,0,0],
amlNode.$propHandlers.left=amlNode.$propHandlers.top=amlNode.$propHandlers.right=amlNode.$propHandlers.bottom=apf.K


for(var prop in handlers)amlNode.$propHandlers[prop]=handlers[prop]
var fNode=this.getFirstChild(),sNode=fNode&&this.getSecondChild(),prop=this.$vbox?"height":"width"
this.flexChild1=this.flexChild2=this.fixedChild=null,!fNode[prop]||~String(fNode[prop]).indexOf("%")?this.flexChild1=fNode:this.fixedChild=fNode,
sNode&&(!sNode[prop]||~String(sNode[prop]).indexOf("%")?this[this.flexChild1?"flexChild2":"flexChild1"]=sNode:this.fixedChild=sNode),
amlNode.addEventListener("prop.visible",visibleHandler),amlNode.$ext.style.position="absolute",amlNode.$ext.style.margin="",
amlNode.height&&handlers.height.call(amlNode,amlNode.height,!1),amlNode.width&&handlers.width.call(amlNode,amlNode.width,!1),
amlNode.margin&&handlers.margin.call(amlNode,amlNode.margin,!1)
var isLast=this.lastChild.$amlLoaded||this.lastChild==amlNode
isLast&&(this.$propHandlers.padding.call(this,this.padding),this.$propHandlers.edge.call(this,this.edge,!amlNode[this.$vbox?"height":"width"])),
this.$handle&&this.childNodes.length>2&&this.$handle.show()}},this.unregister=function(amlNode){if(!amlNode.$splitter&&amlNode.nodeFunc==apf.NODE_VISIBLE){
delete amlNode.$margin,amlNode.$propHandlers.left=amlNode.$propHandlers.top=amlNode.$propHandlers.right=amlNode.$propHandlers.bottom=null


for(var prop in handlers)delete amlNode.$propHandlers[prop]
this.fixedChild==amlNode?delete this.fixedChild:this.flexChild1==amlNode?delete this.flexChild1:this.flexChild2==amlNode&&delete this.flexChild2,
amlNode.removeEventListener("prop.visible",visibleHandler),amlNode.$ext.style.display=amlNode.visible?"block":"none",
amlNode.width&&(amlNode.$ext.style.width=""),amlNode.height&&(amlNode.$ext.style.height=""),amlNode.$ext.style.position=amlNode.$ext.style.margin=amlNode.$ext.style.left=amlNode.$ext.style.top=amlNode.$ext.style.right=amlNode.$ext.style.bottom="",
this.$handle&&this.$handle.hide()}},this.addEventListener("DOMNodeRemoved",function(e){e.$doOnlyAdmin||e.currentTarget==this||e.relatedNode==this&&this.unregister(e.currentTarget)

}),this.addEventListener("DOMNodeInserted",function(e){if(e.currentTarget!=this&&1==e.currentTarget.nodeType&&e.currentTarget.nodeFunc==apf.NODE_VISIBLE)return!(e.relatedNode==this&&!e.$isMoveWithinParent&&(e.currentTarget.$setLayout(this.localName,!0),
e.currentTarget.$altExt))&&void 0}),this.$draw=function(){var doc=this.$pHtmlNode.ownerDocument
this.$ext=this.$pHtmlNode.appendChild(doc.createElement("div")),this.getAttribute("style")&&this.$ext.setAttribute("style",this.getAttribute("style")),
this.$ext.className=this.localName,this.$vbox="vsplitbox"==this.localName,this.$int=this.$ext,this.$ext.host=this,
this.getAttribute("class")&&apf.setStyleClass(this.$ext,this.getAttribute("class"))},this.$loadAml=function(x){}

}.call(apf.vsplitbox.prototype=new apf.GuiElement),apf.hsplitbox.prototype=apf.vsplitbox.prototype,apf.aml.setElement("hsplitbox",apf.hsplitbox),
apf.aml.setElement("vsplitbox",apf.vsplitbox),apf.splitter=function(struct,tagName){this.$init(tagName||"splitter",apf.NODE_VISIBLE,struct)

},function(){this.minwidth=0,this.minheight=0,this.$scale=0,this.$focussable=!1,this.$splitter=!0,this.$booleanProperties.realtime=!0,
this.$propHandlers.realtime=function(value){this.$setStyleClass(this.$ext,value&&this.$baseCSSname+"Realtime"||"",[this.$baseCSSname+"Realtime"])

},this.$propHandlers.scale=function(value){this.$scale="left"==value||"top"==value?1:2},this.$propHandlers.parent=function(value){
this.$parent="object"==typeof value?value:self[value]},this.$propHandlers.type=function(value){this.$setStyleClass(this.$ext,value,["horizontal"==value?"vertical":"horizontal"]),
"vertical"==value?this.$setStyleClass(this.$ext,"w-resize",["n-resize"]):this.$setStyleClass(this.$ext,"n-resize",["w-resize"]),
"horizontal"==value?this.$info={pos:"top",opos:"left",size:"width",osize:"height",offsetPos:"offsetTop",
offsetSize:"offsetHeight",oOffsetPos:"offsetLeft",oOffsetSize:"offsetWidth",clientPos:"clientY",d1:1,
d2:0,x1:0,x2:2}:this.$info={pos:"left",opos:"top",size:"height",osize:"width",offsetPos:"offsetLeft",
offsetSize:"offsetWidth",oOffsetPos:"offsetTop",oOffsetSize:"offsetHeight",clientPos:"clientX",d1:0,d2:1,
x1:3,x2:1}},this.addEventListener("DOMNodeInserted",function(e){e.currentTarget==this&&this.init&&this.init()

}),this.$draw=function(){this.$ext=this.$getExternal()
var template="vbox|hbox".indexOf(this.parentNode.localName)>-1?"box":"splitbox"
apf.extend(this,apf.splitter.templates[template]),this.decorate()},this.$loadAml=function(x){this.realtime!==!1&&this.$propHandlers.realtime.call(this,this.realtime=!0)

}}.call(apf.splitter.prototype=new apf.Presentation),apf.splitter.templates={box:{update:function(newPos,finalPass){
var max=this.$previous?this.$previous.$ext[this.$info.offsetSize]+this.$next.$ext[this.$info.offsetSize]:this.parentNode.getWidth(),method=finalPass?"setAttribute":"setProperty"


apf.hasFlexibleBox&&(newPos-=this.$previous?apf.getAbsolutePosition(this.$previous.$ext,this.parentNode.$int)[this.$info.d1]:0),
this.$previous&&this.$next&&(this.$previous.flex||0===this.$previous.flex)&&(this.$next.flex||0===this.$next.flex)?(finalPass||this.realtime||(newPos-=this.$ext[this.$info.offsetSize]),
this.$scale&&1!=this.$scale||this.$previous[method]("flex",newPos),this.$scale&&2!=this.$scale||this.$next[method]("flex",this.$totalFlex-newPos)):(!this.$next||this.$next.flex||this.$scale&&2!=this.$scale||this.$next[method](this.$info.osize,max-newPos),
!this.$previous||this.$previous.flex||this.$scale&&1!=this.$scale||this.$previous[method](this.$info.osize,newPos)),
apf.hasSingleResizeEvent&&apf.layout.forceResize(this.$ext.parentNode)},$setSiblings:function(){for(this.$previous=this.previousSibling;this.$previous&&(1!=this.$previous.nodeType||this.$previous.visible===!1||this.$previous.nodeFunc!=apf.NODE_VISIBLE);)this.$previous=this.$previous.previousSibling


for(this.$next=this.nextSibling;this.$next&&(1!=this.$next.nodeType||this.$next.visible===!1||this.$next.nodeFunc!=apf.NODE_VISIBLE);)this.$next=this.$next.nextSibling

},init:function(size,refNode,oItem){if(this.$setSiblings(),this.$thickness=null,this.parentNode&&this.parentNode.$box&&(this.setProperty("type","vbox"==this.parentNode.localName?"horizontal":"vertical"),
this.$thickness=parseInt(this.parentNode.padding)),!this.$previous||!this.$next)return this
var diff=apf.getDiff(this.$ext)
if(!this.parentNode.$box){var iSize=Math.max(this.$previous.$ext[this.$info.offsetSize],this.$next.$ext[this.$info.offsetSize])


this.$ext.style[size]=iSize-diff[this.$info.d1]+"px"}var iThick=this[this.$info.osize]=this.$thickness||this.$next[this.$info.oOffsetPos]-this.$previous[this.$info.oOffsetPos]-this.$previous[this.$info.oOffsetSize]


return this.$ext.style[this.$info.osize]=iThick-diff[this.$info.d2]+"px",this},decorate:function(){var _self=this


this.$ext.onmousedown=function(e){if(e||(e=event),_self.dispatchEvent("dragstart")!==!1){apf.dragMode=!0,
_self.$setSiblings()
var changedPosition,pHtml=_self.parentNode.$int,diff=0
if("absolute|fixed|relative".indexOf(apf.getStyle(pHtml,"position"))==-1&&(pHtml.style.position="relative",
changedPosition=!0),_self.$totalFlex=0,_self.$parent)if(_self.$previous)!_self.$next
else{var posNext=apf.getAbsolutePosition(_self.$next.$ext,_self.parentNode.$int),wd=_self.$parent.getWidth()


if(2==_self.$scale){var max=posNext[_self.$info.d1]+_self.$next.$ext[_self.$info.offsetSize]-this[_self.$info.offsetSize]


diff=_self.parentNode.$int[_self.$info.offsetSize]-max
var min=max-wd-diff}}else{if(_self.$previous)var posPrev=apf.getAbsolutePosition(_self.$previous.$ext,_self.parentNode.$int),min=_self.$scale?0:(posPrev[_self.$info.d1]||0)+(parseInt(_self.$previous.minwidth)||0)


if(_self.$next)var posNext=apf.getAbsolutePosition(_self.$next.$ext,_self.parentNode.$int),max=posNext[_self.$info.d1]+_self.$next.$ext[_self.$info.offsetSize]-this[_self.$info.offsetSize]-(parseInt(_self.$next.minwidth)||0)

}if(_self.$previous&&_self.$next){if((_self.$previous.flex||0===_self.$previous.flex)&&(_self.$next.flex||0===_self.$next.flex)){
for(var node,set=[],nodes=_self.parentNode.childNodes,i=0,l=nodes.length;i<l;i++)(node=nodes[i]).visible===!1||node.nodeFunc!=apf.NODE_VISIBLE||node.$splitter||node.flex&&set.push(node,node.$ext[_self.$info.offsetSize]+(apf.hasFlexibleBox&&!_self.realtime&&node==_self.$previous?2*_self.parentNode.padding:0))


for(var i=0,l=set.length;i<l;i+=2)set[i].setAttribute("flex",set[i+1])}_self.$totalFlex+=_self.$next.flex+_self.$previous.flex

}var startPos,startOffset
if(apf.hasFlexibleBox){var coords=apf.getAbsolutePosition(this)
if(startPos=e[_self.$info.clientPos]-coords[_self.$info.d1],!_self.realtime){if(_self.$previous.flex&&!_self.$next.flex){
var mBox=apf.getBox(_self.$next.margin)
mBox[_self.$info.x1]=_self.parentNode.padding,_self.$next.$ext.style.margin=mBox.join("px ")+"px"}else{
var mBox=apf.getBox(_self.$previous.margin)
mBox[_self.$info.x2]=_self.parentNode.padding,_self.$previous.$ext.style.margin=mBox.join("px ")+"px"

}var diff=apf.getDiff(this)
this.style.left=coords[0]+"px",this.style.top=coords[1]+"px",this.style.width=this.offsetWidth-diff[0]+"px",
this.style.height=this.offsetHeight-diff[1]+"px",this.style.position="absolute"}}else{var coords=apf.getAbsolutePosition(this.offsetParent)


startOffset=apf.getAbsolutePosition(_self.$previous.$ext)[_self.$info.d1],startPos=e[_self.$info.clientPos]-coords[_self.$info.d1],
_self.realtime||(this.style.left="0px",this.style.top="0px",this.style.position="relative"),min=-1e3}
apf.plane.show(this),_self.$setStyleClass(this,_self.$baseCSSname+"Moving"),_self.$setStyleClass(document.body,"vertical"==_self.type?"w-resize":"n-resize",["vertical"==_self.type?"n-resize":"w-resize"]),
document.onmouseup=function(e){e||(e=event)
var newPos
if(e[_self.$info.clientPos]>=0){var coords=apf.getAbsolutePosition(_self.$ext.offsetParent)
newPos=Math.min(max,Math.max(min,e[_self.$info.clientPos]-coords[_self.$info.d1]-(apf.hasFlexibleBox?startPos:startOffset)))+diff

}_self.$setStyleClass(_self.$ext,"",[_self.$baseCSSname+"Moving"]),_self.$setStyleClass(document.body,"",["n-resize","w-resize"]),
changedPosition&&(pHtml.style.position=""),apf.hasFlexibleBox&&!_self.realtime&&((_self.$previous.flex&&!_self.$next.flex?_self.$next:_self.$previous).$ext.style.margin=apf.getBox(_self.$previous.margin).join("px ")+"px"),
newPos&&_self.update(newPos,!0),apf.plane.hide(),_self.realtime||(_self.$ext.style.left="",_self.$ext.style.top="",
_self.$ext.style[_self.$info.size]="",_self.$ext.style.position=""),_self.dispatchEvent("dragdrop"),document.onmouseup=document.onmousemove=null,
apf.dragMode=!1},document.onmousemove=function(e){e||(e=event)
var newPos
if(e[_self.$info.clientPos]>=0){var coords=apf.getAbsolutePosition(_self.$ext.offsetParent)
newPos=Math.min(max,Math.max(min,e[_self.$info.clientPos]-coords[_self.$info.d1]-(apf.hasFlexibleBox||!_self.realtime?startPos:startOffset)))+diff,
_self.realtime?_self.update(newPos):_self.$ext.style[_self.$info.pos]=newPos+"px"}apf.stopEvent(e),_self.dispatchEvent("dragmove")

}}},apf.queue.add("splitter"+this.$uniqueId,function(){_self.init()})}},splitbox:{update:function(newPos,finalPass){
this[this.parentNode.$vbox?"updateV":"updateH"](newPos,finalPass)},updateV:function(newPos,finalPass){
var method=finalPass?"setAttribute":"setProperty",pNode=this.$parent||this.parentNode,firstChild=pNode.firstChild


if("splitter"==firstChild.localName&&(firstChild=firstChild.nextSibling),pNode.fixedChild)pNode.fixedChild==pNode.firstChild?pNode.fixedChild[method]("height",newPos-pNode.$edge[0]):pNode.fixedChild[method]("height",apf.getHtmlInnerHeight(pNode.$int)-newPos-pNode.padding-pNode.$edge[1])
else if(firstChild.height){var total=apf.getHtmlInnerHeight(pNode.$int)
firstChild[method]("height",(newPos-pNode.$edge[0])/total*100+"%")}else{var total=apf.getHtmlInnerHeight(pNode.$int)


pNode.lastChild[method]("height",(total-newPos-pNode.$edge[2]-pNode.padding)/total*100+"%")}apf.dispatchEvent("splitter.resize",{
splitter:this,"final":finalPass})},updateH:function(newPos,finalPass){var method=finalPass?"setAttribute":"setProperty",pNode=this.$parent||this.parentNode,firstChild=pNode.firstChild


if("splitter"==firstChild.localName&&(firstChild=firstChild.nextSibling),pNode.fixedChild)pNode.fixedChild==pNode.firstChild?pNode.fixedChild[method]("width",newPos-pNode.$edge[3]):pNode.fixedChild[method]("width",apf.getHtmlInnerWidth(pNode.$int)-newPos-pNode.padding-pNode.$edge[2])
else if(firstChild.width){var total=apf.getHtmlInnerWidth(pNode.$int)
firstChild[method]("width",(newPos-pNode.$edge[3])/total*100+"%")}else{var total=apf.getHtmlInnerWidth(pNode.$int)


pNode.lastChild[method]("width",(total-newPos-pNode.$edge[1]-pNode.padding)/total*100+"%")}apf.dispatchEvent("splitter.resize",{
splitter:this,"final":finalPass})},$setSiblings:function(){this.$previous=this.parentNode.firstChild,
this.$next=this.parentNode.lastChild},decorate:function(){var _self=this
this.parentNode&&this.parentNode.$box&&this.setProperty("type",this.parentNode.$vbox?"horizontal":"vertical"),
this.$ext.onmousedown=function(e){function update(e,final){if(_self.$ext.offsetParent){var newPos,coords


pNode.$vbox?e.clientY>=0&&(coords=apf.getAbsolutePosition(_self.$parent?_self.$parent.$ext:_self.$ext.offsetParent),
newPos=Math.min(max,Math.max(min,e.clientY-coords[1]-offset))):e.clientX>=0&&(coords=apf.getAbsolutePosition(_self.$parent?_self.$parent.$ext:_self.$ext.offsetParent),
newPos=Math.min(max,Math.max(min,e.clientX-coords[0]-offset))),newPos&&(_self.realtime||final?_self.update(newPos,final):_self.$ext.style[pNode.$vbox?"top":"left"]=newPos+"px")

}}if(e||(e=event),_self.dispatchEvent("dragstart")!==!1){apf.dragMode=!0,_self.$setSiblings()
var pNode=_self.$parent||_self.parentNode,firstChild=pNode.firstChild.$splitter?pNode.childNodes[1]:pNode.firstChild


if(pNode.$vbox)var min=parseInt(firstChild.minheight)+pNode.$edge[0],max=apf.getHtmlInnerHeight(pNode.$ext)-pNode.lastChild.minheight-pNode.$edge[2]-pNode.padding,offset=_self.$ext.getBoundingClientRect().top-e.clientY
else var min=parseInt(firstChild.minwidth)+pNode.$edge[3],max=apf.getHtmlInnerWidth(pNode.$ext)-pNode.lastChild.minwidth-pNode.$edge[1]-pNode.padding,offset=_self.$ext.getBoundingClientRect().left-e.clientX


apf.plane.show(this),_self.$setStyleClass(this,_self.$baseCSSname+"Moving"),_self.$setStyleClass(document.body,"vertical"==_self.type?"w-resize":"n-resize",["vertical"==_self.type?"n-resize":"w-resize"]),
document.onmouseup=function(e){e||(e=event),_self.$setStyleClass(_self.$ext,"",[_self.$baseCSSname+"Moving"]),
_self.$setStyleClass(document.body,"",["n-resize","w-resize"]),update(e,!0),apf.plane.hide()
for(var frames=document.getElementsByTagName("iframe"),i=0;i<frames.length;i++)frames[i].style.pointerEvents=""


_self.realtime||(_self.$ext.style.left="",_self.$ext.style.top="",_self.$ext.style[_self.$info.size]="",
_self.$ext.style.position=""),_self.dispatchEvent("dragdrop"),document.onmouseup=document.onmousemove=null,
apf.dragMode=!1},document.onmousemove=function(e){e||(e=event),update(e),apf.stopEvent(e),_self.dispatchEvent("dragmove")

}}}}}},apf.aml.setElement("splitter",apf.splitter)}})


define("plugins/c9.ide.ui/lib/crypto",[],function(require,module,exports){return function(apf){function rotate_left(n,s){
var t4=n<<s|n>>>32-s
return t4}function cvt_hex(val){var i,v,str=""
for(i=7;i>=0;i--)v=val>>>4*i&15,str+=v.toString(16)
return str}apf.crypto.Base64=function(){function encode(data){var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[]


if(!data)return data
data=apf.crypto.UTF8.encode(data+"")
do o1=data.charCodeAt(i++),o2=data.charCodeAt(i++),o3=data.charCodeAt(i++),bits=o1<<16|o2<<8|o3,h1=bits>>18&63,
h2=bits>>12&63,h3=bits>>6&63,h4=63&bits,tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)
while(i<data.length)
switch(enc=tmp_arr.join(""),data.length%3){case 1:enc=enc.slice(0,-2)+"=="
break
case 2:enc=enc.slice(0,-1)+"="}return enc}function decode(data){var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,tmp_arr=[]


if(!data)return data
data+=""
do h1=b64.indexOf(data.charAt(i++)),h2=b64.indexOf(data.charAt(i++)),h3=b64.indexOf(data.charAt(i++)),
h4=b64.indexOf(data.charAt(i++)),bits=h1<<18|h2<<12|h3<<6|h4,o1=bits>>16&255,o2=bits>>8&255,o3=255&bits,
64==h3?tmp_arr[ac++]=String.fromCharCode(o1):64==h4?tmp_arr[ac++]=String.fromCharCode(o1,o2):tmp_arr[ac++]=String.fromCharCode(o1,o2,o3)
while(i<data.length)
return apf.crypto.UTF8.decode(tmp_arr.join(""))}var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="


return{decode:decode,encode:encode}}(),apf.crypto.UTF8={encode:function(string){string=(string+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")


for(var c1,enc,tmp_arr=[],start=0,end=0,n=0,l=string.length;n<l;n++)c1=string.charCodeAt(n),enc=null,
c1<128?end++:enc=c1>127&&c1<2048?String.fromCharCode(c1>>6|192)+String.fromCharCode(63&c1|128):String.fromCharCode(c1>>12|224)+String.fromCharCode(c1>>6&63|128)+String.fromCharCode(63&c1|128),
null!==enc&&(end>start&&tmp_arr.push(string.substring(start,end)),tmp_arr.push(enc),start=end=n+1)
return end>start&&tmp_arr.push(string.substring(start,string.length)),tmp_arr.join("")},decode:function(str_data){
var tmp_arr=[],i=0,ac=0,c1=0,c2=0,c3=0
for(str_data+="";i<str_data.length;)c1=str_data.charCodeAt(i),c1<128?(tmp_arr[ac++]=String.fromCharCode(c1),
i++):c1>191&&c1<224?(c2=str_data.charCodeAt(i+1),tmp_arr[ac++]=String.fromCharCode((31&c1)<<6|63&c2),
i+=2):(c2=str_data.charCodeAt(i+1),c3=str_data.charCodeAt(i+2),tmp_arr[ac++]=String.fromCharCode((15&c1)<<12|(63&c2)<<6|63&c3),
i+=3)
return tmp_arr.join("")}},apf.crypto.MD5={hexcase:0,b64pad:"",chrsz:8,hex_md5:function(s){return this.binl2hex(this.core_md5(this.str2binl(s),s.length*this.chrsz))

},b64_md5:function(s){return this.binl2b64(this.core_md5(this.str2binl(s),s.length*this.chrsz))},str_md5:function(s){
return this.binl2str(this.core_md5(this.str2binl(s),s.length*this.chrsz))},hex_hmac_md5:function(key,data){
return this.binl2hex(this.core_hmac_md5(key,data))},b64_hmac_md5:function(key,data){return this.binl2b64(this.core_hmac_md5(key,data))

},str_hmac_md5:function(key,data){return this.binl2str(this.core_hmac_md5(key,data))},core_md5:function(x,len){
x[len>>5]|=128<<len%32,x[(len+64>>>9<<4)+14]=len
for(var a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16){var olda=a,oldb=b,oldc=c,oldd=d


a=this.md5_ff(a,b,c,d,x[i+0],7,-680876936),d=this.md5_ff(d,a,b,c,x[i+1],12,-389564586),c=this.md5_ff(c,d,a,b,x[i+2],17,606105819),
b=this.md5_ff(b,c,d,a,x[i+3],22,-1044525330),a=this.md5_ff(a,b,c,d,x[i+4],7,-176418897),d=this.md5_ff(d,a,b,c,x[i+5],12,1200080426),
c=this.md5_ff(c,d,a,b,x[i+6],17,-1473231341),b=this.md5_ff(b,c,d,a,x[i+7],22,-45705983),a=this.md5_ff(a,b,c,d,x[i+8],7,1770035416),
d=this.md5_ff(d,a,b,c,x[i+9],12,-1958414417),c=this.md5_ff(c,d,a,b,x[i+10],17,-42063),b=this.md5_ff(b,c,d,a,x[i+11],22,-1990404162),
a=this.md5_ff(a,b,c,d,x[i+12],7,1804603682),d=this.md5_ff(d,a,b,c,x[i+13],12,-40341101),c=this.md5_ff(c,d,a,b,x[i+14],17,-1502002290),
b=this.md5_ff(b,c,d,a,x[i+15],22,1236535329),a=this.md5_gg(a,b,c,d,x[i+1],5,-165796510),d=this.md5_gg(d,a,b,c,x[i+6],9,-1069501632),
c=this.md5_gg(c,d,a,b,x[i+11],14,643717713),b=this.md5_gg(b,c,d,a,x[i+0],20,-373897302),a=this.md5_gg(a,b,c,d,x[i+5],5,-701558691),
d=this.md5_gg(d,a,b,c,x[i+10],9,38016083),c=this.md5_gg(c,d,a,b,x[i+15],14,-660478335),b=this.md5_gg(b,c,d,a,x[i+4],20,-405537848),
a=this.md5_gg(a,b,c,d,x[i+9],5,568446438),d=this.md5_gg(d,a,b,c,x[i+14],9,-1019803690),c=this.md5_gg(c,d,a,b,x[i+3],14,-187363961),
b=this.md5_gg(b,c,d,a,x[i+8],20,1163531501),a=this.md5_gg(a,b,c,d,x[i+13],5,-1444681467),d=this.md5_gg(d,a,b,c,x[i+2],9,-51403784),
c=this.md5_gg(c,d,a,b,x[i+7],14,1735328473),b=this.md5_gg(b,c,d,a,x[i+12],20,-1926607734),a=this.md5_hh(a,b,c,d,x[i+5],4,-378558),
d=this.md5_hh(d,a,b,c,x[i+8],11,-2022574463),c=this.md5_hh(c,d,a,b,x[i+11],16,1839030562),b=this.md5_hh(b,c,d,a,x[i+14],23,-35309556),
a=this.md5_hh(a,b,c,d,x[i+1],4,-1530992060),d=this.md5_hh(d,a,b,c,x[i+4],11,1272893353),c=this.md5_hh(c,d,a,b,x[i+7],16,-155497632),
b=this.md5_hh(b,c,d,a,x[i+10],23,-1094730640),a=this.md5_hh(a,b,c,d,x[i+13],4,681279174),d=this.md5_hh(d,a,b,c,x[i+0],11,-358537222),
c=this.md5_hh(c,d,a,b,x[i+3],16,-722521979),b=this.md5_hh(b,c,d,a,x[i+6],23,76029189),a=this.md5_hh(a,b,c,d,x[i+9],4,-640364487),
d=this.md5_hh(d,a,b,c,x[i+12],11,-421815835),c=this.md5_hh(c,d,a,b,x[i+15],16,530742520),b=this.md5_hh(b,c,d,a,x[i+2],23,-995338651),
a=this.md5_ii(a,b,c,d,x[i+0],6,-198630844),d=this.md5_ii(d,a,b,c,x[i+7],10,1126891415),c=this.md5_ii(c,d,a,b,x[i+14],15,-1416354905),
b=this.md5_ii(b,c,d,a,x[i+5],21,-57434055),a=this.md5_ii(a,b,c,d,x[i+12],6,1700485571),d=this.md5_ii(d,a,b,c,x[i+3],10,-1894986606),
c=this.md5_ii(c,d,a,b,x[i+10],15,-1051523),b=this.md5_ii(b,c,d,a,x[i+1],21,-2054922799),a=this.md5_ii(a,b,c,d,x[i+8],6,1873313359),
d=this.md5_ii(d,a,b,c,x[i+15],10,-30611744),c=this.md5_ii(c,d,a,b,x[i+6],15,-1560198380),b=this.md5_ii(b,c,d,a,x[i+13],21,1309151649),
a=this.md5_ii(a,b,c,d,x[i+4],6,-145523070),d=this.md5_ii(d,a,b,c,x[i+11],10,-1120210379),c=this.md5_ii(c,d,a,b,x[i+2],15,718787259),
b=this.md5_ii(b,c,d,a,x[i+9],21,-343485551),a=this.safe_add(a,olda),b=this.safe_add(b,oldb),c=this.safe_add(c,oldc),
d=this.safe_add(d,oldd)}return[a,b,c,d]},md5_cmn:function(q,a,b,x,s,t){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(a,q),this.safe_add(x,t)),s),b)

},md5_ff:function(a,b,c,d,x,s,t){return this.md5_cmn(b&c|~b&d,a,b,x,s,t)},md5_gg:function(a,b,c,d,x,s,t){
return this.md5_cmn(b&d|c&~d,a,b,x,s,t)},md5_hh:function(a,b,c,d,x,s,t){return this.md5_cmn(b^c^d,a,b,x,s,t)

},md5_ii:function(a,b,c,d,x,s,t){return this.md5_cmn(c^(b|~d),a,b,x,s,t)},core_hmac_md5:function(key,data){
var bkey=this.str2binl(key),ipad=Array(16),opad=Array(16)
bkey.length>16&&(bkey=this.core_md5(bkey,key.length*this.chrsz))
for(var i=0;i<16;i++)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i]
return this.core_md5(opad.concat(this.core_md5(ipad.concat(this.str2binl(data)),512+data.length*this.chrsz)),640)

},safe_add:function(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16)
return msw<<16|65535&lsw},bit_rol:function(num,cnt){return num<<cnt|num>>>32-cnt},str2binl:function(str){
var i,bin=[],mask=(1<<this.chrsz)-1
for(i=0;i<str.length*this.chrsz;i+=this.chrsz)bin[i>>5]|=(str.charCodeAt(i/this.chrsz)&mask)<<i%32
return bin},binl2str:function(bin){var i,str=[],mask=(1<<this.chrsz)-1
for(i=0;i<32*bin.length;i+=this.chrsz)str.push(String.fromCharCode(bin[i>>5]>>>i%32&mask))
return str.join("")},binl2hex:function(binarray){var i,hex_tab=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",str=[]


for(i=0;i<4*binarray.length;i++)str.push(hex_tab.charAt(binarray[i>>2]>>i%4*8+4&15)+hex_tab.charAt(binarray[i>>2]>>i%4*8&15))


return str.join("")},binl2b64:function(binarray){var i,tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",str=[]


for(i=0;i<4*binarray.length;i+=3)for(var triplet=(binarray[i>>2]>>8*(i%4)&255)<<16|(binarray[i+1>>2]>>8*((i+1)%4)&255)<<8|binarray[i+2>>2]>>8*((i+2)%4)&255,j=0;j<4;j++)8*i+6*j>32*binarray.length?str.push(this.b64pad):str.push(tab.charAt(triplet>>6*(3-j)&63))


return str.join("")}},apf.crypto.SHA1=function(str){var blockstart,i,j,A,B,C,D,E,temp,W=new Array(80),H0=1732584193,H1=4023233417,H2=2562383102,H3=271733878,H4=3285377520


str=apf.crypto.UTF8.encode(str)
var str_len=str.length,word_array=[]
for(i=0;i<str_len-3;i+=4)j=str.charCodeAt(i)<<24|str.charCodeAt(i+1)<<16|str.charCodeAt(i+2)<<8|str.charCodeAt(i+3),
word_array.push(j)
switch(str_len%4){case 0:i=2147483648
break
case 1:i=str.charCodeAt(str_len-1)<<24|8388608
break
case 2:i=str.charCodeAt(str_len-2)<<24|str.charCodeAt(str_len-1)<<16|32768
break
case 3:i=str.charCodeAt(str_len-3)<<24|str.charCodeAt(str_len-2)<<16|str.charCodeAt(str_len-1)<<8|128

}for(word_array.push(i);word_array.length%16!=14;)word_array.push(0)
for(word_array.push(str_len>>>29),word_array.push(str_len<<3&4294967295),blockstart=0;blockstart<word_array.length;blockstart+=16){
for(i=0;i<16;i++)W[i]=word_array[blockstart+i]
for(i=16;i<=79;i++)W[i]=rotate_left(W[i-3]^W[i-8]^W[i-14]^W[i-16],1)
for(A=H0,B=H1,C=H2,D=H3,E=H4,i=0;i<=19;i++)temp=rotate_left(A,5)+(B&C|~B&D)+E+W[i]+1518500249&4294967295,
E=D,D=C,C=rotate_left(B,30),B=A,A=temp
for(i=20;i<=39;i++)temp=rotate_left(A,5)+(B^C^D)+E+W[i]+1859775393&4294967295,E=D,D=C,C=rotate_left(B,30),
B=A,A=temp
for(i=40;i<=59;i++)temp=rotate_left(A,5)+(B&C|B&D|C&D)+E+W[i]+2400959708&4294967295,E=D,D=C,C=rotate_left(B,30),
B=A,A=temp
for(i=60;i<=79;i++)temp=rotate_left(A,5)+(B^C^D)+E+W[i]+3395469782&4294967295,E=D,D=C,C=rotate_left(B,30),
B=A,A=temp
H0=H0+A&4294967295,H1=H1+B&4294967295,H2=H2+C&4294967295,H3=H3+D&4294967295,H4=H4+E&4294967295}return temp=cvt_hex(H0)+cvt_hex(H1)+cvt_hex(H2)+cvt_hex(H3)+cvt_hex(H4),
temp.toLowerCase()}}})


define("plugins/c9.ide.ui/lib/menu/menu",[],function(require,module,exports){return function(apf){var $setTimeout=setTimeout


setInterval
apf.popup={cache:{},focusFix:{INPUT:1,TEXTAREA:1,SELECT:1},setContent:function(cacheId,content,style,width,height){
return this.popup||this.init(),this.cache[cacheId]={content:content,style:style,width:width,height:height
},content.style.position="absolute",content.ownerDocument},removeContent:function(cacheId){this.cache[cacheId]=null,
delete this.cache[cacheId]},init:function(){this.popup={},apf.addEventListener("hotkey",function(e){("27"==e.keyCode||e.altKey)&&apf.popup.forceHide()

})},show:function(cacheId,options){this.popup||this.init(),options=apf.extend({x:0,y:0,animate:!1,ref:null,
width:null,height:null,callback:null,draggable:!1,resizable:!1,allowTogether:!1,autoCorrect:!0,noleft:!1,
setZindex:!0},options),options.allowTogether&&(options.allowTogether===!0||options.allowTogether==this.last)||this.last==cacheId||!this.cache[this.last]||this.cache[this.last].options&&this.cache[this.last].options.autohide===!1||this.hide()


var o=this.cache[cacheId]
o.options=options
var dp,popup=o.content,moveUp=!1,moveLeft=!1,fixed=!1
options.setZindex&&apf.window.zManager.set(options.zindextype||"popup",o.content),(dp=o.content.style.display)&&dp.indexOf("none")>-1&&(o.content.style.display="")


for(var x=options.x,y=options.y,refNode=options.ref;refNode&&1==refNode.nodeType&&!(fixed="fixed"==apf.getStyle(refNode,"position"));)refNode=refNode.parentNode||refNode.$parentNode


if(fixed)pos=apf.getAbsolutePosition(options.ref,refNode),y=(y||0)+pos[1]+refNode.offsetTop,pos[0]+=refNode.offsetLeft,
popup.style.position="fixed",popup.style.top=y+"px",options.noleft||(popup.style.left=x+"px")
else{if(refNode){var pos=apf.getAbsolutePosition(options.ref,o.content.offsetParent||o.content.parentNode)


x=(x||0)+pos[0],y=(y||0)+pos[1]}(options.width||o.width)&&(popup.style.width=(options.width||o.width)-3+"px"),
popup.style.position="absolute",popup.style.maxHeight=""
var parentMenu=this.cache[options.allowTogether],pOverflow=apf.getOverflowParent(o.content),edgeY=pOverflow==document.documentElement?window.innerHeight+window.pageYOffset+pOverflow.scrollTop:pOverflow.offsetHeight+pOverflow.scrollTop


moveUp=options.up||options.autoCorrect&&y+(options.height||o.height||o.content.offsetHeight)>edgeY
var maxHeight=0
if(moveUp){var value,height=options.height||o.height||o.content.offsetHeight
if(value=options.ref?pos[1]-height:Math.max(0,edgeY-height),!options.up&&value<0)moveUp=!1,popup.style.top=y+"px",
maxHeight=edgeY-y-this.$screenMargin.bottom-10
else{var minTop=this.$screenMargin.top+3
maxHeight=(pos?pos[1]:edgeY)-minTop-10,popup.style.top=Math.max(value,minTop)+"px"}}else popup.style.top=y+"px",
maxHeight=edgeY-y-this.$screenMargin.bottom-10
if(popup.style.overflowY="auto",popup.style.maxHeight=maxHeight?maxHeight+"px":"",!options.noleft){var edgeX=pOverflow==document.documentElement?window.innerWidth+window.pageXOffset+pOverflow.scrollLeft:pOverflow.offsetWidth+pOverflow.scrollLeft


if(moveLeft=options.autoCorrect&&x+(options.width||o.width||o.content.offsetWidth)>edgeX){var value
value=options.ref?pos[0]-(options.width||o.width||o.content.offsetWidth)+options.ref.offsetWidth:edgeX-(options.width||o.width||o.content.offsetWidth)-(parentMenu?edgeX-parentMenu.content.offsetLeft:0)+5,
popup.style.left=value<0?x:value-1+"px"}else popup.style.left=x+"px"}}if(apf.setStyleClass(popup,moveUp?"upward":"downward",[moveUp?"downward":"upward"]),
apf.setStyleClass(popup,moveLeft?"moveleft":"moveright",[moveLeft?"moveright":"moveleft"]),options.animate)if("fade"==options.animate)apf.tween.single(popup,{
type:"fade",from:0,to:1,anim:apf.tween.NORMAL,steps:options.steps||15*apf.animSteps})
else{var iVal,steps=7,i=0
iVal=setInterval(function(){var value=++i*((options.height||o.height)/steps)
popup.style.height=value+"px",moveUp?popup.style.top=y-value-(options.y||0)+"px":(options.container||popup).scrollTop=-1*(i-steps)*((options.height||o.height)/steps),
popup.style.display="block",i>=steps&&(clearInterval(iVal),options.callback&&options.callback(popup))

},10)}else refNode||((options.height||o.height)&&(popup.style.height=(options.height||o.height)+"px"),
value=edgeY-(options.height||o.height||o.content.offsetHeight),popup.style.top=y+(options.height||o.height||o.content.offsetHeight)<edgeY?y:value+"px"),
popup.style.display="block",options.callback&&options.callback(popup)
$setTimeout(function(){apf.popup.last=cacheId}),options.draggable&&(options.id=cacheId,this.makeDraggable(options))

},hide:function(){if(!this.isDragging){var o=this.cache[this.last]
o&&(o.content&&(o.content.style.display="none"),o.options&&o.options.onclose&&(o.options.onclose(apf.extend(o.options,{
htmlNode:o.content})),o.options.onclose=!1))}},isShowing:function(cacheId){return this.last&&this.last==cacheId&&this.cache[this.last]&&"none"!=this.cache[this.last].content.style.display

},isDragging:!1,makeDraggable:function(options){if(apf.Interactive&&!this.cache[options.id].draggable){
var oHtml=this.cache[options.id].content
this.cache[options.id].draggable=!0
var o={$propHandlers:{},minwidth:10,minheight:10,maxwidth:1e4,maxheight:1e4,dragOutline:!1,resizeOutline:!1,
draggable:!0,resizable:options.resizable,$ext:oHtml,oDrag:oHtml.firstChild}
oHtml.onmousedown=oHtml.firstChild.onmousedown=function(e){e||(e=event),(e||event).cancelBubble=!0},apf.implement.call(o,apf.Interactive),
o.$propHandlers.draggable.call(o,!0),o.$propHandlers.resizable.call(o,!0)}},getCurrentElement:function(){
return"number"==typeof this.last&&apf.lookup(this.last)},$mousedownHandler:function(amlNode,e){if(this.last&&(!amlNode||this.last!=amlNode.$uniqueId)&&this.cache[this.last]){
for(var htmlNode=e.srcElement||e.target,uId=this.last;this.cache[uId];){if(apf.isChildOf(this.cache[uId].content,htmlNode,!0))return


if(!this.cache[uId].options)return
uId=this.cache[uId].options.allowTogether}this.forceHide()}},forceHide:function(){if(!document.body.classList.contains("noInput")&&this.last&&!apf.plane.current&&this.isShowing(this.last)&&this.cache[this.last]&&this.cache[this.last].options&&this.cache[this.last].options.autohide!==!1){
var o=apf.lookup(this.last)
o?o.dispatchEvent("popuphide")!==!1&&this.hide():this.last=null}},destroy:function(){for(var cacheId in this.cache)this.cache[cacheId]&&(this.cache[cacheId].content.onmousedown=null,
apf.destroyHtmlNode(this.cache[cacheId].content),this.cache[cacheId].content=null,this.cache[cacheId]=null)


!this.popup},setMargin:function(m){for(var i in this.$screenMargin)i in m&&(this.$screenMargin[i]=m[i]||0)

},$screenMargin:{top:0,left:0,right:0,bottom:0}},apf.menu=function(struct,tagName){this.$init(tagName||"menu",apf.NODE_VISIBLE,struct),
this.animate=!0},function(){function forceHide(e){if(!(this.$showingSubMenu||this.pinned||apf.isChildOf(e.fromElement,e.toElement)||apf.isChildOf(e.toElement,e.fromElement)||apf.isChildOf(this,e.toElement)||"popuphide"!==e.name&&!e.toElement||e.toElement&&apf.popup.cache[e.toElement.$uniqueId]))return this.$hideTree!=-1&&(this.$hideTree=!0,
this.hide()),!1}this.$focussable=apf.MENU,this.$positioning="basic",this.visible=!1,this.matchhide=!1,
this.$booleanProperties.animate=!0,this.$booleanProperties.pinned=!0,this.$booleanProperties.sticky=!0,
this.$booleanProperties.matchhide=!0,this.$propHandlers.visible=function(value,prop,force,nofocus,hideOpener){
if(this.$ext)if(value)this.$ext.style.display="block",this.opener&&this.opener.localName.indexOf("item")>-1&&(this.opener.parentNode.$showingSubMenu=this)
else{this.$ext.style.display="none"
var lastFocus=apf.menu.lastFocussed,opener=this.opener
if(lastFocus!=this.opener&&this.opener&&this.opener.$blur&&this.opener.$blur(),this.opener&&this.opener.parentNode&&"menu"==this.opener.parentNode.localName)this.$hideTree||(this.$hideTree=-1),
this.opener.parentNode.focus()
else if(lastFocus)if(apf.window.$settingFocus)apf.window.$settingFocus!=lastFocus&&lastFocus.$blur&&lastFocus.$blur(),
this.$blur(),"menu"!=apf.window.$settingFocus.localName&&(apf.menu.lastFocussed=null)
else if(this.$hideTree){this.$hideTree||(this.$hideTree=-1)
var visTest=(lastFocus.disabled||lastFocus.$ext&&!lastFocus.$ext.offsetHeight)&&lastFocus!=apf.document.documentElement


nofocus||visTest?(lastFocus.$blur&&lastFocus.$blur(),this.$blur(),apf.document.activeElement=null,visTest&&apf.window.moveNext()===!1&&apf.window.$focusRoot()):lastFocus.focus(null,null,!0),
apf.menu.lastFocussed=null}clearTimeout(this.$submenuTimer),this.$showingSubMenu&&(this.$showingSubMenu.hide(),
this.$showingSubMenu=null),this.opener&&this.opener.$submenu&&(this.opener.$submenu(!0,!0),this.$hideTree===!0&&this.opener&&this.opener.parentNode&&"menu"==this.opener.parentNode.localName&&this.opener.parentNode.$hideTree!=-1&&(this.opener.parentNode.$hideTree=!0,
this.opener.parentNode.hide()),this.opener=null),this.$hideTree=null,this.$selected&&(apf.setStyleClass(this.$selected.$ext,"",["hover"]),
this.$selected=null),this.dispatchEvent("hide",{opener:opener})}}
this.display=function(x,y,noanim,opener,xmlNode,openMenuId,btnWidth){function afterRender(){null===x?apf.popup.show(this.$uniqueId,{
x:0,y:this.ref?0:opener.$ext.offsetHeight,animate:!(noanim||!this.animate)&&"fade",steps:10,ref:(this.ref||opener).$ext,
allowTogether:openMenuId,autohide:!this.pinned,noleft:void 0!==this.left,setZindex:!this.zindex,up:"up"==(this.ref||opener).submenudir
}):apf.popup.show(this.$uniqueId,{x:x,y:y,animate:!(noanim||!this.animate)&&"fade",steps:10,allowTogether:openMenuId,
autohide:!this.pinned,setZindex:!this.zindex}),apf.popup.last=null,this.focus(),lastFocus&&lastFocus!=this&&lastFocus.$focus&&lastFocus.$focus(null,{
fromContextMenu:!0}),this.xmlReference=xmlNode,this.dispatchEvent("display",{opener:opener})}this.opener=opener


var lastFocus
if(apf.menu.lastFocussed||(lastFocus=apf.menu.lastFocussed=apf.menu.lastFocussedItem),xmlNode&&!this.disabled){
var last,i,node,result,nodes=this.childNodes,c=0,l=nodes.length
for(i=0;i<l;i++)node=nodes[i],1==node.nodeType&&"item"==node.localName&&(result=!xmlNode||!node.match||(node.cmatch||(node.cmatch=apf.lm.compile(node.match,{
xpathmode:3,injectself:!0})))(xmlNode),result?(this.matchhide?node.show():node.enable(),"divider"==node.localName&&this.matchhide?(last=node,
0==c&&node.hide(),c=0):c++):(this.matchhide?node.hide():node.disable(),!node.nextSibling&&0==c&&last&&last.hide()))

}this.oOverlay&&(btnWidth?(this.oOverlay.style.display="block",this.oOverlay.style.width=btnWidth+"px"):this.oOverlay.style.display="none"),
this.visible=!1,this.parentNode||apf.document.documentElement.appendChild(this),this.$rendered!==!1?(this.show(),
afterRender.call(this)):(this.addEventListener("afterrender",afterRender),this.show())},this.getValue=function(group){
return this.getSelected(group).value||""},this.getSelected=function(group){var i,nodes=this.childNodes,l=nodes.length


for(i=0;i<l;i++)if(nodes[i].group==group&&nodes[i].selected)return nodes[i]
return!1},this.select=function(group,value){this.selectedValue=value
var i,nodes=this.childNodes,l=nodes.length
for(i=0;i<l;i++)nodes[i].group==group&&(value&&(nodes[i].value==value||!nodes[i].value&&nodes[i].caption==value)?nodes[i].setProperty("selected",!0,!1,!0):nodes[i].selected&&nodes[i].setProperty("selected",!1,!1,!0))

},this.addEventListener("prop.visible",function(){this.$initChildren()},!0),this.addEventListener("keydown",function(e){
var node,key=e.keyCode
switch(key){case 13:if(!this.$selected)return
node=this.$selected,node.$down(),node.$up(),node.$click()
break
case 27:this.hide()
break
case 38:if(node=this.$selected&&this.$selected.previousSibling||this.lastChild,node&&"divider"==node.localName&&(node=node.previousSibling),
!node)return
this.$selected&&apf.setStyleClass(this.$selected.$ext,"",["hover"]),apf.setStyleClass(node.$ext,"hover"),
this.$selected=node
break
case 40:if(node=this.$selected&&this.$selected.nextSibling||this.firstChild,node&&"divider"==node.localName&&(node=node.nextSibling),
!node)return
this.$selected&&apf.setStyleClass(this.$selected.$ext,"",["hover"]),apf.setStyleClass(node.$ext,"hover"),
this.$selected=node
break
case 37:if(!this.opener)return
if("button"==this.opener.localName){for(node=this.opener.previousSibling;node&&!node.submenu;)node=node.previousSibling


if(node){node.dispatchEvent("mouseover")
var btnMenu=node.parentNode.menuIsPressed
btnMenu&&self[btnMenu.submenu].dispatchEvent("keydown",{keyCode:40})}}else if("menu"==this.opener.parentNode.localName){
var op=this.opener
this.hide(),apf.setStyleClass(op.$ext,"hover"),op.parentNode.$showingSubMenu=null}break
case 39:if(this.$selected&&this.$selected.submenu)return this.$selected.$submenu(null,!0),void this.$showingSubMenu.dispatchEvent("keydown",{
keyCode:40})
if(this.opener){for(var op=this.opener;op&&op.parentNode&&"menu"==op.parentNode.localName;)op=op.parentNode.opener


if(op&&"button"==op.localName){for(node=op.nextSibling;node&&!node.submenu;)node=node.nextSibling
if(node){node.dispatchEvent("mouseover")
var btnMenu=node.parentNode.menuIsPressed
return void(btnMenu&&(self[btnMenu.submenu]||btnMenu.submenu).dispatchEvent("keydown",{keyCode:40}))}
}}this.$selected||arguments.callee.call(this,{keyCode:40})
break
default:return}return!1},!0),this.addEventListener("focus",function(e){apf.popup.last=this.$uniqueId,
apf.menu.lastFocussed||(apf.menu.lastFocussed=apf.menu.lastFocussedItem)}),this.addEventListener("blur",forceHide),
this.addEventListener("popuphide",forceHide),this.$draw=function(){this.$pHtmlNode=document.body,this.$ext=this.$getExternal(),
this.oOverlay=this.$getLayoutNode("main","overlay",this.$ext),apf.popup.setContent(this.$uniqueId,this.$ext,"",null,null),
this.$ext.addEventListener("mouseup",function(e){var rect=this.getBoundingClientRect()
e.clientY>rect.bottom&&rect.height&&(e.stopPropagation(),e.preventDefault())},!0)},this.$loadAml=function(x){
this.$int=this.$getLayoutNode("main","container",this.$ext)},this.$destroy=function(){apf.popup.removeContent(this.$uniqueId)

},this.$initChildren=function(){for(var ch=this.childNodes,i=0;i<ch.length;i++){var amlNode=ch[i]
amlNode.$amlLoaded||amlNode.dispatchEvent("DOMNodeInsertedIntoDocument"),amlNode.previousSibling&&amlNode.previousSibling.$ext&&amlNode.$ext&&amlNode.$ext.previousSibling!=amlNode.previousSibling.$ext&&amlNode.$ext.parentNode==amlNode.previousSibling.$ext.parentNode&&amlNode.$ext.parentNode.insertBefore(amlNode.$ext,amlNode.previousSibling.$ext.nextSibling)

}}
var insertBefore=this.insertBefore
this.insertBefore=function(node,beforeNode){if(this.visible)return insertBefore.call(this,node,beforeNode)


if(beforeNode==node)return node
if(!this||this==node)throw new Error("Invalid insertBefore call")
var children=this.childNodes
node.parentNode&&node.removeNode()
var index=beforeNode?children.indexOf(beforeNode):children.length
return node.parentNode=this,beforeNode?children.splice(index,0,node):children.push(node),node.previousSibling=children[index-1],
node.nextSibling=children[index+1],node.previousSibling?node.previousSibling.nextSibling=node:this.firstChild=children[0],
node.nextSibling?node.nextSibling.previousSibling=node:this.lastChild=children[this.childNodes.length-1],
node},this.appendChild=function(node){return this.insertBefore(node)}}.call(apf.menu.prototype=new apf.Presentation),
apf.addEventListener("movefocus",function(e){var next=e.toElement
next&&"menu"!=next.localName&&(apf.menu.lastFocussedItem=next)}),apf.aml.setElement("menu",apf.menu),
apf.divider=function(struct,tagName){this.$init(tagName||"divider",apf.NODE_VISIBLE,struct)},function(){
this.$focussable=!1,this.minwidth=0,this.minheight=0,this.$childProperty="caption",this.addEventListener("AMLReparent",function(beforeNode,pNode,withinParent){
this.$amlLoaded&&(withinParent||this.skinName==pNode.skinName||this.loadAml())}),this.$supportedProperties.push("caption","value","for","textalign"),
this.$propHandlers.caption=function(value){this.$caption?(this.$setStyleClass(this.$ext,this.$baseCSSname+"Caption"),
this.$caption.textContent=value):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Caption"])},this.$canLeechSkin=!0,
this.$draw=function(){this.parentNode.isPaged&&this.parentNode.$buttons&&(this.$pHtmlNode=this.parentNode.$buttons),
this.$isLeechingSkin?this.$ext=apf.insertHtmlNode(this.parentNode.$getLayoutNode("divider"),this.$pHtmlNode):(this.$ext=this.$getExternal("main"),
this.$caption=this.$getLayoutNode("main","caption",this.$ext))}}.call(apf.divider.prototype=new apf.Presentation),
apf.aml.setElement("divider",apf.divider),apf.item=function(struct,tagName){this.$init(tagName||"item",apf.NODE_VISIBLE,struct)

},function(){this.$focussable=!1,this.$childProperty="caption",this.$canLeechSkin="item",this.checked=!1,
this.selected=!1,this.$booleanProperties.checked=!0,this.$booleanProperties.selected=!0,this.$supportedProperties.push("submenu","value","match","group","icon","checked","selected","disabled","caption","type","values"),
this.$propHandlers.submenu=function(value){apf.setStyleClass(this.$ext,"submenu")},this.$propHandlers.select=function(value){
this.select=value?"self::"+value.split("|").join("|self::"):value},this.$propHandlers.group=function(value){
if(this.$group&&this.$group.$removeRadio&&this.$group.$removeRadio(this),!value)return void(this.$group=null)


var group="string"==typeof value?apf.nameserver.get("group",value):value
group||(group=apf.nameserver.register("group",value,new apf.$group),group.setAttribute("id",value),group.dispatchEvent("DOMNodeInsertedIntoDocument"),
group.parentNode=this),this.$group=group,this.$group.$addRadio(this)},this.$propHandlers.hotkey=function(value){},
this.$propHandlers.icon=function(value){this.$icon&&apf.skins.setIcon(this.$icon,value,this.parentNode.iconPath)

},this.$propHandlers.caption=function(value){this.$caption&&apf.setNodeValue(this.$caption,value)},this.$propHandlers.type=function(value){
apf.setStyleClass(this.$ext,value,["item","check","radio"])},this.$propHandlers.values=function(value){
this.$values="string"==typeof value?value.split("|"):value||[1,0],this.$propHandlers.value.call(this,this.value)

},this.$propHandlers.value=function(value){if("check"==this.type){value="string"==typeof value?value.trim():value


var checked
checked=this.$values?"undefined"!=typeof value&&null!==value&&value.toString()==this.$values[0].toString():apf.isTrue(value),
checked!=this.checked&&(this.checked=checked,this.$propHandlers.checked.call(this,checked))}},this.$propHandlers.checked=function(value){
"check"==this.type&&(apf.isTrue(value)?apf.setStyleClass(this.$ext,"checked"):apf.setStyleClass(this.$ext,"",["checked"]),
this.$values||(this.getAttribute("values")?this.$propHandlers.values.call(this,this.getAttribute("values")):this.$values=[!0,!1]),
this.$values&&this.$values[value?0:1]!=this.value&&this.setProperty("value",!this.$values||this.$values[value?0:1]))

},this.select=function(){this.parentNode.select(this.group,void 0!=this.value?this.value:this.caption)

},this.check=function(){this.setProperty("value",!this.$values||this.$values[0])},this.uncheck=function(){
this.setProperty("value",!!this.$values&&this.$values[1])},this.$check=function(){apf.setStyleClass(this.$ext,"selected")

},this.$uncheck=function(){apf.setStyleClass(this.$ext,"",["selected"])},this.$propHandlers.selected=function(value){
"radio"==this.type&&(apf.isTrue(value)?(this.$group&&this.$group.setProperty("value",this.value),this.$check()):this.$uncheck())

},this.$propHandlers.disabled=function(value){apf.isTrue(value)||value==-1?apf.setStyleClass(this.$ext,"disabled"):apf.setStyleClass(this.$ext,"",["disabled"])

},this.addEventListener("AMLReparent",function(beforeNode,pNode,withinParent){this.$amlLoaded&&(withinParent||this.skinName==pNode.skinName||this.loadAml())

}),this.$down=function(){},this.$up=function(e){return"radio"==this.type?this.parentNode.select(this.group,void 0!=this.value?this.value:this.caption):"check"==this.type&&this.setProperty("checked",!this.checked),
this.submenu?void this.$over(null,!0):(this.parentNode.$hideTree=!0,this.parentNode.sticky||"dropdown"==this.parentNode.localName||this.parentNode.hide(),
this.parentNode.dispatchEvent("itemclick",{value:void 0!=this.value?this.value:this.caption,relatedNode:this,
checked:this.checked,selected:this.selected}),void this.dispatchEvent("click",{xmlContext:(this.parentNode||0).xmlReference,
opener:(this.parentNode||0).opener,button:e&&e.button}))},this.$click=function(){}
var timer
this.$out=function(e){if(!apf.isChildOf(this.$ext,e.toElement||e.explicitOriginalTarget)&&!apf.isChildOf(this.$ext,e.srcElement||e.target)&&(clearTimeout(timer),
!this.submenu||this.$submenu(!0))){apf.setStyleClass(this.$ext,"",["hover"])
var sel=this.parentNode.$selected
sel&&sel!=this&&apf.setStyleClass(sel.$ext,"",["hover"]),this.parentNode.$selected=null}},this.$over=function(e,force){
function selectItem(el){return(el.parentNode.$selected!=el||!e)&&(el.parentNode.$selected&&apf.setStyleClass(el.parentNode.$selected.$ext,"",["hover"]),
apf.setStyleClass(el.$ext,"hover"),el.parentNode.$selected=el,!0)}function submenu(){ps&&ps.visible&&(ps.hide(),
_self.parentNode.$showingSubMenu==ps&&(_self.parentNode.$showingSubMenu=null)),!_self.submenu||_self.parentNode.opener&&!_self.parentNode.opener.visible||_self.$submenu()

}if(selectItem(this)){var opener=this.parentNode.opener
if(opener&&opener.parentNode&&opener.parentNode.$showingSubMenu&&selectItem(opener),force||!apf.isChildOf(this.$ext,e.toElement||e.explicitOriginalTarget)&&!apf.isChildOf(this.$ext,e.fromElement||e.target)){
var _self=this,ps=this.parentNode.$showingSubMenu
if(ps&&ps.name&&ps.name==this.submenu)return this.parentNode.$selected=null,this.parentNode.$showingSubMenu=null,
void _self.$submenu()
clearTimeout(timer),force?submenu():timer=$setTimeout(function(){submenu(),timer=null},210)}}},this.$submenu=function(hide,force){
if(!this.submenu)return!0
var menu=self[this.submenu]||this.submenu
if(menu){if(hide)return!(menu.visible&&!force)&&(this.parentNode.$showingSubMenu==menu&&(this.parentNode.$showingSubMenu=null),
apf.setStyleClass(this.$ext,"",["hover"]),menu.hide(),!0)
this.parentNode.$showingSubMenu=menu
var pos=apf.getAbsolutePosition(this.$ext,this.parentNode.$ext.offsetParent)
menu.display(pos[0]+this.$ext.offsetWidth-3,pos[1]+3,!0,this,this.parentNode.xmlReference,this.parentNode.$uniqueId),
menu.setAttribute("zindex",(this.parentNode.zindex||this.parentNode.$ext.style.zIndex||1)+1)}},this.$draw=function(isSkinSwitch){
for(var p=this.parentNode;"item"==p.$canLeechSkin;)p=p.parentNode
this.$ext=this.$getExternal(this.$isLeechingSkin?"item":"main",null,function($ext){var o="var o = apf.lookup("+this.$uniqueId+"); if (!o || o.disabled) return; o"


$ext.setAttribute("onmouseup",o+".$up(event)"),$ext.setAttribute("onmousemove",o+".$over(event)"),$ext.setAttribute("onmouseout",o+".$out(event)"),
$ext.setAttribute("onmousedown",o+".$down()"),$ext.setAttribute("onclick",o+".$click()")})
var next=this.nextSibling&&this.nextSibling.$ext
next&&next.parentNode===this.$ext.parentNode&&this.$ext.nextSibling!==next&&next.parentNode.insertBefore(this.$ext,next)


var _self=this
apf.addListener(this.$ext,"mouseover",function(e){_self.disabled||_self.dispatchEvent("mouseover",{htmlEvent:e
})}),apf.addListener(this.$ext,"mouseout",function(e){_self.disabled||_self.dispatchEvent("mouseout",{
htmlEvent:e})}),this.$caption=this.$getLayoutNode("item","caption",this.$ext),this.$icon=this.$getLayoutNode("item","icon",this.$ext),
this.$hotkey=this.$getLayoutNode("item","hotkey",this.$ext),!isSkinSwitch&&this.nextSibling&&this.nextSibling.$ext&&this.nextSibling.$ext.parentNode==this.$ext.parentNode&&this.$ext.parentNode.insertBefore(this.$ext,this.nextSibling.$ext)

},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var isSkinSwitch=!!this.$ext
isSkinSwitch&&("undefined"!=typeof this.checked?this.$handlePropSet("checked",this.checked):"undefined"!=typeof this.selected&&this.$handlePropSet("selected",this.selected),
this.disabled&&this.$handlePropSet("disabled",this.disabled),this.caption&&this.$handlePropSet("caption",this.caption))

})}.call(apf.item.prototype=new apf.Presentation),apf.aml.setElement("item",apf.item)}})


define("plugins/c9.ide.ui/lib/flexbox",[],function(require,module,exports){return function(apf){var $setInterval=(setTimeout,
setInterval)
apf.hbox=function(struct,tagName){this.$init(tagName||"hbox",apf.NODE_VISIBLE,struct)},apf.vbox=function(struct,tagName){
this.$init(tagName||"vbox",apf.NODE_VISIBLE,struct)},function(){function visibleHandler(e){if(this.parentNode.splitters&&!this.$splitter)if(e.value){
var isLast=isLastVisibleChild(this)
isLast?!this.previousSibling||this.previousSibling.$splitter||this.previousSibling.nosplitter||this.parentNode.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),this):this.nextSibling.$splitter||this.nextSibling.nosplitter||isFirstVisibleChild(this)||this.nosplitter||this.parentNode.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),this.nextSibling)

}else this.nextSibling&&this.nextSibling.$splitter?this.nextSibling.removeNode():this.previousSibling&&this.previousSibling.$splitter&&this.previousSibling.removeNode()


return this.parentNode.$propHandlers.padding&&this.parentNode.$propHandlers.padding.call(this.parentNode,this.parentNode.padding),
apf.layout.forceResize(this.parentNode.$int),apf.hasFlexibleBox?void(this.$altExt&&(this.$altExt.style.display=e.value?apf.CSS_DISPLAY_FLEX:"none")):(e.value?(this.$ext.style.display=this.parentNode.$vbox&&"stretch"==this.parentNode.align?"block":"inline-block",
this.$br&&(this.$br.style.display="stretch"==this.parentNode.align?"none":"")):this.$br&&(this.$br.style.display="none"),
void this.parentNode.$resize())}function resizeHandler(){if(!this.flex){if(this.$isRszHandling||this.$lastSizeChild&&this.$lastSizeChild[0]==this.$ext.offsetWidth&&this.$lastSizeChild[1]==this.$ext.offsetHeight)return


this.parentNode.$resize(!0),this.$lastSizeChild=[this.$ext.offsetWidth,this.$ext.offsetHeight]}}function isFirstVisibleChild(amlNode){
for(var firstChild=amlNode.parentNode.firstChild;firstChild&&(firstChild.nodeFunc!=apf.NODE_VISIBLE||firstChild.visible===!1||2==firstChild.visible&&apf.isFalse(firstChild.getAttribute("visible")));)firstChild=firstChild.nextSibling


return firstChild&&firstChild==amlNode}function isLastVisibleChild(amlNode){for(var lastChild=amlNode.parentNode.lastChild;lastChild&&(lastChild.nodeFunc!=apf.NODE_VISIBLE||lastChild.visible===!1||2==lastChild.visible&&apf.isFalse(lastChild.getAttribute("visible")));)lastChild=lastChild.previousSibling


return lastChild&&lastChild==amlNode}function myVisibleHandler(e){e.value&&(this.$int.style.display=apf.CSS_DISPLAY_FLEX)

}function myHeightHandler(e){if(clearInterval(this.$heighttimer),e.value||"stretch"!=this.align)delete this.$heighttimer
else if(!this.$heighttimer){var _self=this
this.$heighttimer=$setInterval(function(){if(!_self.$amlDestroyed){for(var $int,nodes=_self.childNodes,i=0,l=nodes.length;i<l;i++)if(($int=(node=nodes[i]).$int||node.$container)&&Math.min($int.scrollHeight,node.maxheight||1e4)>$int.offsetHeight)return _self.$resize(!0)


_self.flex&&clearInterval(this.$heighttimer)}},this.flex?1:500)}}this.minwidth=0,this.minheight=0,this.$focussable=!1,
this.$useLateDom=!0,this.$box=!0,this.$layout=!0
var input={INPUT:1,SELECT:1,TEXTAREA:1}
this.$booleanProperties.splitters=!0,this.$supportedProperties.push("padding","reverse","edge","pack","align","splitters"),
this.$propHandlers.padding=function(value){this.padding=parseInt(value)
for(var node,nodes=this.childNodes,elms=[],i=0,l=nodes.length;i<l;i++)(node=nodes[i]).nodeFunc==apf.NODE_VISIBLE&&node.$ext&&node.visible!==!1&&elms.push(node)


if(elms.length){for(var last,b,el,i=elms.length-2;i>=0;i--)b=(el=elms[i]).margin&&apf.getBox(el.margin)||[0,0,0,0],
last&&last.$splitter||el.$splitter||(b[this.$vbox?2:1]+=this.padding,!apf.hasFlexibleBox&&0!=i&&"stretch"==this.align&&this.$vbox&&(b[0]+=this.padding)),
el.$ext.style.margin=b.join("px ")+"px",last=el
b=(el=elms[elms.length-1]).margin&&apf.getBox(el.margin)||[0,0,0,0],el.$ext.style.margin=b.join("px ")+"px",
apf.hasFlexibleBox||this.$resize()}},this.$propHandlers.reverse=function(value){apf.hasFlexibleBox&&(this.$int.style[apf.CSSPREFIX+"BoxDirection"]=value?"reverse":"normal")

},this.$propHandlers.edge=function(value){var el=!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int
el.style.padding=(this.$edge=apf.getBox(value)).join("px ")+"px",apf.hasFlexibleBox||this.$resize()},
this.$propHandlers.pack=function(value){if(apf.hasFlex)"start"!=value&&"end"!=value||(value="flex-"+value),
this.$int.style.justifyContent=value||"flex-start"
else if(apf.hasFlexibleBox)this.$int.style[apf.CSSPREFIX+"BoxPack"]=value||"start"
else if(this.$amlLoaded)if(this.$vbox)this.$int.style.verticalAlign="center"==value?"middle":"end"==value?"bottom":"top"
else{this.$int.style.textAlign=""
for(var nodes=this.childNodes,i=0,l=nodes.length;i<l;i++){var node=nodes[i]
node.nodeFunc==apf.NODE_VISIBLE&&node.$amlLoaded&&(node.$ext.style.textAlign=apf.getStyle(node.$ext,"textAlign")||"left")

}this.$int.style.textAlign="center"==value?"center":"end"==value?"right":"left"}},this.$propHandlers.align=function(value){
if(apf.hasFlex)"start"!=value&&"end"!=value||(value="flex-"+value),this.$int.style.alignItems=value||"stretch"
else if(apf.hasFlexibleBox){this.$int.style[apf.CSSPREFIX+"BoxAlign"]=value||"stretch"
for(var stretch=!value||"stretch"==value,nodes=this.childNodes,size=this.$vbox?"width":"height",isInFixed=!1,loopNode=this;!isInFixed&&loopNode&&(isInFixed=loopNode[size]||loopNode.anchors||(loopNode.$vbox?loopNode.top&&loopNode.bottom:loopNode.left&&loopNode.right),
loopNode.flex);)loopNode=loopNode.parentNode||loopNode.$parentNode
for(var i=0,l=nodes.length;i<l;i++)(node=nodes[i]).$ext&&1==node.$ext.nodeType&&(stretch&&!node[size]?node.$ext.style[size]=input[node.$ext.tagName]?"100%":"auto":node[size]&&handlers["true"][size].call(node,node[size]))

}else if(this.$amlLoaded){var stretch=!value||"stretch"==value
if(this.$vbox){var el=!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int
el.style.textAlign=""
for(var node,nodes=this.childNodes,i=0,l=nodes.length;i<l;i++)(node=nodes[i]).nodeFunc==apf.NODE_VISIBLE&&node.$amlLoaded&&(node.visible!==!1&&(node.$ext.style.display="stretch"==value?"block":"inline-block",
node.$br.style.display="stretch"==value?"none":""),node.$ext.style.textAlign=apf.getStyle(node.$ext,"textAlign")||"left")


el.style.textAlign="center"==value?"center":"end"==value?"right":"left"}else for(var nodes=this.childNodes,i=0,l=nodes.length;i<l;i++)(node=nodes[i]).nodeFunc==apf.NODE_VISIBLE&&node.$amlLoaded&&(node.$ext.style.verticalAlign="center"==value?"middle":"end"==value?"bottom":"top")

}}
var handlers={"true":{optimize:function(value){this.optimize=apf.isTrue(value)},width:function(value){
(this.$altExt||this.$ext).style.width=apf.isNot(value)?"":parseFloat(value)==value?value+"px":value},
height:function(value){(this.$altExt||this.$ext).style.height=apf.isNot(value)?apf.isGecko&&this.flex&&this.parentNode.$vbox?"auto":"":parseFloat(value)==value?value+"px":value

},margin:function(value){var b=apf.getBox(value)
isLastVisibleChild(this)||(b[this.parentNode.$vbox?2:1]+=this.parentNode.padding),this.$ext.style.margin=b.join("px ")+"px"

},flex:function(value){if(this.flex=value=parseInt(value),value){if(!this.optimize&&!this.$altExt){this.$altExt=this.$ext.ownerDocument.createElement("div"),
this.parentNode.$int.replaceChild(this.$altExt,this.$ext),this.$altExt.appendChild(this.$ext),this.$altExt.style.boxSizing="border-box",
this.$altExt.style.display=apf.CSS_DISPLAY_FLEX,this.$altExt.style.flexDirection=this.parentNode.$vbox?"column":"row",
this.$altExt.style[apf.CSSPREFIX+"BoxOrient"]="vertical",this.$ext.style[apf.CSS_FLEX_PROP]=1
var size=this.parentNode.$vbox?"height":"width"
this.preventforcezero||(this.$altExt.style[size]="0px")}(this.$altExt||this.$ext).style[apf.CSS_FLEX_PROP]=parseInt(value)||1

}else this.$altExt&&(this.parentNode.$int.replaceChild(this.$ext,this.$altExt),this.$ext.style[apf.CSS_FLEX_PROP]="",
delete this.$altExt)}},"false":{width:function(value){this.$ext.style.width=value?parseFloat(value)==value?Math.max(0,value-apf.getWidthDiff(this.$ext))+"px":value:""

},height:function(value){this.$ext.style.height=value?parseFloat(value)==value?Math.max(0,value-apf.getHeightDiff(this.$ext))+"px":value:""

},margin:function(value){var b=apf.getBox(value)
this.padding&&(isLastVisibleChild(this)||(b[this.parentNode.$vbox?2:1]+=this.padding),this!=this.parentNode.firstChild&&"stretch"==this.parentNode.align&&this.parentNode.$vbox&&(b[0]+=this.padding)),
this.$ext.style.margin=b.join("px ")+"px"},flex:function(value){this.flex=parseInt(value),this.$amlLoaded&&this.parentNode.$resize(!0)

}}}
this.register=function(amlNode,insert){if(!amlNode.$altExt){amlNode.$propHandlers.left=amlNode.$propHandlers.top=amlNode.$propHandlers.right=amlNode.$propHandlers.bottom=apf.K


var propHandlers=handlers[apf.hasFlexibleBox]
for(var prop in propHandlers)amlNode.$propHandlers[prop]=propHandlers[prop]
if(amlNode.nodeFunc==apf.NODE_VISIBLE){if(apf.hasFlexibleBox){if("INPUT"==amlNode.$ext.tagName||input[amlNode.$ext.tagName]){
var doc=amlNode.$ext.ownerDocument
amlNode.$altExt=doc.createElement("div"),amlNode.parentNode.$int.replaceChild(amlNode.$altExt,amlNode.$ext),
amlNode.$altExt.style.boxSizing="border-box",amlNode.$altExt.appendChild(amlNode.$ext)
apf.getDiff(amlNode.$ext)
amlNode.$altExt.style.height="100%",amlNode.$altExt.style.width="0",amlNode.$altExt.style.lineHeight=0,
amlNode.$altExt.style.margin="-1px 0 0 0",amlNode.$ext.style.width="100%",amlNode.$ext.style.height="100%",
amlNode.$ext.style.top="1px",amlNode.$ext.style.position="relative"}else"inline"==apf.getStyle(amlNode.$ext,"display")&&(amlNode.$ext.style.display="block")


amlNode.$ext.style.boxSizing="border-box"}else{if(this.$vbox?(amlNode.$br=this.$int.insertBefore(amlNode.$ext.ownerDocument.createElement("br"),amlNode.$ext.nextSibling),
amlNode.visible===!1&&(amlNode.$br.style.display="none")):(amlNode.visible!==!1&&(amlNode.$ext.style.display="inline-block"),
this.$int.style.whiteSpace="",amlNode.$ext.style.whiteSpace=apf.getStyle(amlNode.$ext,"whiteSpace")||"normal",
this.$int.style.whiteSpace="nowrap"),this.$int.style.fontSize="0",!amlNode.$box){var fontSize=apf.getStyle(amlNode.$ext,"fontSize")


if("0px"==fontSize){amlNode.$ext.style.fontSize=""
for(var pNode=this.$int.parentNode;"0px"==apf.getStyle(pNode,"fontSize");)pNode=pNode.parentNode
fontSize=apf.getStyle(pNode,"fontSize")}amlNode.$ext.style.fontSize=fontSize}amlNode.addEventListener("resize",resizeHandler)

}amlNode.addEventListener("prop.visible",visibleHandler),this.$noResize=!0,amlNode.height&&propHandlers.height.call(amlNode,amlNode.height),
amlNode.width&&propHandlers.width.call(amlNode,amlNode.width),amlNode.margin&&propHandlers.margin.call(amlNode,amlNode.margin),
amlNode.flex&&propHandlers.flex.call(amlNode,amlNode.flex)
var isLast=isLastVisibleChild(amlNode)
if(isLast||insert){if(this.$propHandlers.padding.call(this,this.padding),this.$propHandlers.align.call(this,this.align),
apf.hasFlexibleBox||this.$propHandlers.pack.call(this,this.pack),amlNode.visible!==!1&&visibleHandler.call(amlNode,{
value:!0}),insert&&amlNode.previousSibling){for(var prev=amlNode.previousSibling;prev&&(1!=prev.nodeType||"splitter"==prev.localName);)prev=prev.previousSibling


prev&&visibleHandler.call(prev,{value:!0})}}else if(this.splitters&&!amlNode.$splitter&&amlNode.visible!==!1&&!amlNode.nosplitter)if(amlNode.$ext.nextSibling!=(amlNode.nextSibling&&(amlNode.nextSibling.$altExt||amlNode.nextSibling.$ext))){
var _self=this
setTimeout(function(){_self.insertBefore(_self.ownerDocument.createElementNS(apf.ns.aml,"splitter"),amlNode.nextSibling)

})}else this.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),amlNode.nextSibling)


delete this.$noResize,!apf.hasFlexibleBox&&isLast&&this.$resize()}}},this.unregister=function(amlNode){
if(amlNode.$propHandlers){amlNode.$propHandlers.left=amlNode.$propHandlers.top=amlNode.$propHandlers.right=amlNode.$propHandlers.bottom=null


var propHandlers=handlers[apf.hasFlexibleBox]
for(var prop in propHandlers)delete amlNode.$propHandlers[prop]
if(amlNode.nodeFunc==apf.NODE_VISIBLE){if(amlNode.flex){var flex=amlNode.flex
propHandlers.flex.call(amlNode,0),amlNode.flex=flex}apf.hasFlexibleBox?amlNode.$ext.style.boxSizing="":(amlNode.$ext.style.verticalAlign="",
amlNode.$ext.style.textAlign="",amlNode.$ext.style.whiteSpace="",amlNode.$br&&(amlNode.$br.parentNode.removeChild(amlNode.$br),
delete amlNode.$br),amlNode.removeEventListener("resize",resizeHandler)),amlNode.removeEventListener("prop.visible",visibleHandler),
amlNode.$ext.style.display=amlNode.visible?"block":"none",amlNode.margin&&(amlNode.$ext.style.margin=""),
amlNode.width&&(amlNode.$ext.style.width=""),this.splitters&&!amlNode.$splitter&&(amlNode.nextSibling&&amlNode.nextSibling.$splitter&&amlNode.nextSibling.removeNode(),
isLastVisibleChild(amlNode)&&amlNode.previousSibling&&amlNode.previousSibling.$splitter&&amlNode.previousSibling.removeNode())

}}},this.addEventListener("DOMNodeRemoved",function(e){e.$doOnlyAdmin||e.currentTarget==this||e.relatedNode==this&&this.unregister(e.currentTarget)

}),this.addEventListener("DOMNodeInserted",function(e){if(e.currentTarget==this)return void(this.visible&&(this.$ext.style.display=apf.CSS_DISPLAY_FLEX))


if(1==e.currentTarget.nodeType&&e.currentTarget.nodeFunc==apf.NODE_VISIBLE)return!(e.relatedNode==this&&!e.$isMoveWithinParent&&(e.currentTarget.$setLayout(this.localName,!0),
e.currentTarget.$altExt))&&void 0}),this.$draw=function(){var doc=this.$pHtmlNode.ownerDocument
if(this.$ext=this.$pHtmlNode.appendChild(doc.createElement("div")),this.getAttribute("style")&&this.$ext.setAttribute("style",this.getAttribute("style")),
this.$ext.className=this.localName,this.$vbox="vbox"==this.localName,this.$int=!apf.hasFlexibleBox&&this.$vbox?this.$ext.appendChild(doc.createElement("div")):this.$ext,
this.$ext.host=this,!apf.hasFlexibleBox&&this.$vbox&&(this.$int.style.display="inline-block",this.$int.style.width="100%"),
apf.hasFlex)this.$display="-"+apf.CSSPREFIX+"-box",this.$int.style.display=this.$int.style.display||apf.CSS_DISPLAY_FLEX,
this.$int.style.flexDirection="hbox"==this.localName?"":"column",this.$int.style.alignItems="stretch",
this.addEventListener("prop.visible",myVisibleHandler)
else if(apf.hasFlexibleBox)this.$display="-"+apf.CSSPREFIX+"-box",this.$int.style.display=apf.CSS_DISPLAY_FLEX,
this.$int.style[apf.CSSPREFIX+"BoxOrient"]="hbox"==this.localName?"horizontal":"vertical",this.$int.style[apf.CSSPREFIX+"BoxAlign"]="stretch",
this.addEventListener("prop.visible",myVisibleHandler)
else{this.$vbox||(this.$int.style.whiteSpace="nowrap",this.addEventListener("prop.height",myHeightHandler))


var spacer=(!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int).appendChild(doc.createElement("strong"))


spacer.style.height="100%",spacer.style.display="inline-block",spacer.style.verticalAlign="middle",this.addEventListener("resize",this.$resize)

}this.getAttribute("class")&&apf.setStyleClass(this.$ext,this.getAttribute("class")),this.$originalMin=[this.minwidth||0,this.minheight||0]

},this.$resize=function(force){if(this.$amlLoaded&&!this.$noResize&&(force===!0||!this.$lastSize||this.$lastSize[0]!=this.$int.offsetWidth||this.$lastSize[1]!=this.$int.offsetHeight)&&apf.window.vManager.check(this,this.$uniqueId,this.$resize)){
this.$noResize=!0,this.$lastSize=[this.$int.offsetWidth,this.$int.offsetHeight]
for(var node,total=0,size=this.$vbox?"width":"height",osize=(this.$vbox?"minWidth":"minHeight",this.$vbox?"height":"width"),scroll=this.$vbox?"scrollWidth":"scrollHeight",ooffset=(this.$vbox?"offsetWidth":"offsetHeight",
this.$vbox?"offsetHeight":"offsetWidth"),getDiff=this.$vbox?"getWidthDiff":"getHeightDiff",ogetDiff=this.$vbox?"getHeightDiff":"getWidthDiff",borders=this.$vbox?"getVerBorders":"getHorBorders",nodes=this.childNodes,hNodes=[],fW=0,max=0,i=0;i<nodes.length;i++)if((node=nodes[i]).nodeFunc==apf.NODE_VISIBLE&&node.visible!==!1&&node.$amlLoaded){
if(hNodes.push(node),!node[size]){var m=node.margin&&apf.getBox(node.margin)
m&&this.$vbox&&m.unshift()
var mdiff=m?m[0]+m[2]:0
max=Math.max(max,mdiff+Math.min(node.$ext[scroll]+apf[borders](node.$ext),node["max"+size]||1e4))}if(parseInt(node.flex))total+=parseFloat(node.flex)
else{var m=node.margin&&apf.getBox(node.margin)
m&&!this.$vbox&&m.shift(),fW+=node.$ext[ooffset]+(m?m[0]+m[2]:0)}}if(!max&&this[size]&&(max=this[size]-apf[ogetDiff](this.$ext)),
"stretch"==this.align)for(var l=hNodes.length,i=0;i<l;i++)if(node=hNodes[i],!node[size]&&!this.$vbox||this.$vbox&&input[node.$ext.tagName]){
var m=node.margin&&apf.getBox(node.margin)
m&&this.$vbox&&m.unshift()
var mdiff=m?m[0]+m[2]:0
max&&Math.min(node.$ext[scroll],node["max"+size]||1e4)!=max?node.$ext.style[size]=Math.max(0,max-apf[getDiff](node.$ext)-mdiff)+"px":node.$ext.style[size]=""

}if(total>0){this.$vbox&&(this.$int.style.height="100%"),this.$int.style.overflow="hidden"
for(var splitterCount=2*this.$aml.querySelectorAll("splitter").length,rW=this.$int[ooffset]-apf[ogetDiff](this.$int)-fW-(hNodes.length-1-splitterCount)*this.padding,lW=rW,done=0,i=0,l=hNodes.length;i<l;i++)if((node=hNodes[i]).flex){
var v=(i%2==0?Math.floor:Math.ceil)(rW/total*parseInt(node.flex))
done+=parseInt(node.flex)
var m=node.margin&&apf.getBox(node.margin)
m&&!this.$vbox&&m.shift(),node.$ext.style[osize]=Math.max(0,(done==total?lW:v)-apf[ogetDiff](node.$ext)-(m?m[0]+m[2]:0))+"px",
lW-=v}}else this.$vbox&&(this.$int.style.height=""),this.$int.style.overflow=""
this.$noResize=!1}},this.$loadAml=function(x){void 0==this.padding&&(this.padding=0),void 0==this.edge&&this.$propHandlers.edge.call(this,this.edge=0),
void 0==this.pack&&this.$propHandlers.pack.call(this,this.edge="start"),void 0==this.align&&(this.align="stretch"),
apf.hasFlexibleBox||this.$vbox||this.height||"stretch"!=this.align||myHeightHandler.call(this,{})}}.call(apf.vbox.prototype=new apf.GuiElement),
apf.hbox.prototype=apf.vbox.prototype,apf.aml.setElement("hbox",apf.hbox),apf.aml.setElement("vbox",apf.vbox)

}})


define("plugins/c9.ide.ui/lib/page",[],function(require,module,exports){return function(apf){apf.page=function(struct,tagName){
this.$init(tagName||"page",apf.NODE_VISIBLE,struct)},function(){function $btnSet(oHtml){this.parentNode.set(this),
this.autofocus&&(this.canHaveChildren=2),this.$setStyleClass(oHtml,"down",null,!0)}this.canHaveChildren=!0,
this.$focussable=!1,this.closebtn=!1,this.autofocus=!0,this.setCaption=function(caption){this.setProperty("caption",caption,!1,!0)

},this.setIcon=function(icon){this.setProperty("icon",icon,!1,!0)},this.addEventListener("beforerender",function(){
this.parentNode.dispatchEvent("beforerender",{page:this})}),this.addEventListener("afterrender",function(){
this.parentNode.dispatchEvent("afterrender",{page:this})}),this.$booleanProperties.visible=!0,this.$booleanProperties.fake=!0,
this.$booleanProperties.closebtn=!0,this.$booleanProperties.autofocus=!0,this.$supportedProperties.push("fake","caption","icon","tooltip","type","buttons","closebtn","trans-in","trans-out","autofocus"),
this.$propHandlers.closebtn=function(value){var _self=this
if(value){var btncontainer=this.parentNode.$getLayoutNode("button","container",this.$button)
this.parentNode.$getNewContext("btnclose")
var elBtnClose=this.parentNode.$getLayoutNode("btnclose")
elBtnClose&&(apf.setStyleClass(this.$button,"btnclose"),elBtnClose.addEventListener("mousedown",function(e){
apf.cancelBubble(e,apf.lookup(_self.$uniqueId))},!1),elBtnClose.addEventListener("click",function(e){
var page=apf.lookup(_self.$uniqueId)
page.parentNode.remove(page,e)},!1),btncontainer.appendChild(elBtnClose))}},this.$propHandlers.tooltip=function(value){
if(this.parentNode){var node=this.parentNode.$getLayoutNode("button","caption",this.$button);(1==node.nodeType?node:node.parentNode).setAttribute("title",value||"")

}},this.$propHandlers.caption=function(value){if(this.parentNode){var node=this.parentNode.$getLayoutNode("button","caption",this.$button)


1==node.nodeType?node.textContent=value:node.nodeValue=value}},this.$propHandlers.icon=function(value){
if(this.parentNode){var node=this.parentNode.$getLayoutNode("button","icon",this.$button)
node&&1==node.nodeType&&apf.skins.setIcon(node,value,this.parentNode.iconPath)}},this.$propHandlers.visible=function(value){
if(this.parentNode)if(value){if(this.$fake)return this.parentNode.set(this.$fake),void(this.visible=!1)


this.$ext.style.display="",this.parentNode.$hasButtons&&(this.$button.style.display="block"),this.parentNode.$activepage||this.parentNode.set(this)

}else{if(this.$active){this.$deactivate()
for(var nextPage=this.parentNode.activepagenr+1,pages=this.parentNode.getPages(),len=pages.length;nextPage<len&&!pages[nextPage].visible;)nextPage++


if(nextPage==len)for(nextPage=this.parentNode.activepagenr-1;nextPage>=0&&len&&!pages[nextPage].visible;)nextPage--


nextPage>=0?this.parentNode.set(nextPage):this.parentNode.activepage=this.parentNode.activepagenr=this.parentNode.$activepage=null

}this.$ext.style.display="none",this.parentNode.$hasButtons&&(this.$button.style.display="none")}},this.$propHandlers.fake=function(value){
this.$ext&&(apf.destroyHtmlNode(this.$ext),this.$int=this.$ext=null)},this.$propHandlers.type=function(value){
this.setProperty("fake",!0),this.relPage&&this.$active&&this.relPage.$deactivate(),this.relPage=this.parentNode.getPage(value),
this.$active&&this.$activate()},this.addEventListener("DOMNodeRemoved",function(e){e&&e.currentTarget!=this||(this.$button&&(1&this.$position&&this.parentNode.$setStyleClass(this.$button,"",["firstbtn","firstcurbtn"]),
2&this.$position&&this.parentNode.$setStyleClass(this.$button,"",["lastbtn"])),e.$doOnlyAdmin||(this.$button&&this.$button.parentNode.removeChild(this.$button),
this.parentNode&&this.parentNode.$activepage==this&&(this.$button&&this.parentNode.$setStyleClass(this.$button,"",["curbtn"]),
this.parentNode.$setStyleClass(this.$ext,"",["curpage"]))))}),this.addEventListener("DOMNodeRemovedFromDocument",function(e){
this.fake&&this.parentNode&&this.parentNode.$activepage==this&&this.$deactivate()}),this.addEventListener("DOMNodeInserted",function(e){
if((!e||e.currentTarget==this)&&this.$amlLoaded){if(e.$isMoveWithinParent||this.skinName==this.parentNode.skinName)this.$button&&(!e.$oldParent||e.$oldParent.$hasButtons)&&this.parentNode.$buttons&&this.parentNode.$buttons.insertBefore(this.$button,e.$beforeNode&&e.$beforeNode.$button||null)
else{var skin=this.parentNode.skinName.split(":")
this.$forceSkinChange(skin[1],skin[0])}this.type&&(this.relPage=this.parentNode.getPage&&this.parentNode.getPage(this.type))

}},!0),this.$position=0,this.$first=function(remove){remove?(this.$isFirst=!1,this.$position-=1,this.parentNode.$setStyleClass(this.$button,"",["firstbtn","firstcurbtn"])):(this.$isFirst=!0,
this.$position=1|this.$position,this.parentNode.$setStyleClass(this.$button,"firstbtn"+(this.parentNode.$activepage==this?" firstcurbtn":"")))

},this.$last=function(remove){remove?(this.$isLast=!1,this.$position-=2,this.parentNode.$setStyleClass(this.$button,"",["lastbtn"])):(this.$isLast=!0,
this.$position=2|this.$position,this.parentNode.$setStyleClass(this.$button,"lastbtn"))},this.$deactivate=function(fakeOther){
this.$active=!1,this.parentNode&&(this.parentNode.$hasButtons&&(this.$position>0&&this.parentNode.$setStyleClass(this.$button,"",["firstcurbtn"]),
this.parentNode.$setStyleClass(this.$button,"",["curbtn"])),this.fake&&!this.relPage||fakeOther||(this.parentNode.$setStyleClass(this.fake?this.relPage.$ext:this.$ext,"",["curpage"]),
this.fake&&(this.relPage.visible||(this.relPage.$ext.style.display="none"),this.relPage.dispatchEvent("prop.visible",{
value:!1})),this.dispatchEvent("prop.visible",{value:!1})))},this.$deactivateButton=function(){this.parentNode&&this.parentNode.$hasButtons&&(this.$position>0&&this.parentNode.$setStyleClass(this.$button,"",["firstcurbtn"]),
this.parentNode.$setStyleClass(this.$button,"",["curbtn"]))},this.$activate=function(){if(this.$active=!0,
!this.$drawn){var f
return void this.addEventListener("DOMNodeInsertedIntoDocument",f=function(e){this.removeEventListener("DOMNodeInsertedIntoDocument",f),
this.$active&&this.$activate()})}this.parentNode.$hasButtons&&(this.$isFirst&&this.parentNode.$setStyleClass(this.$button,"firstcurbtn"),
this.parentNode.$setStyleClass(this.$button,"curbtn")),this.fake&&!this.relPage||(this.fake?this.relPage&&(this.relPage.$ext.style.display="",
this.parentNode.$setStyleClass(this.relPage.$ext,"curpage"),this.relPage.$fake=this,this.relPage.$render&&this.relPage.$render(),
this.relPage.dispatchEvent("prop.visible",{value:!0})):this.parentNode.$setStyleClass(this.$ext,"curpage"),
apf.layout&&this.relPage&&apf.layout.forceResize(this.fake?this.relPage.$int:this.$int)),this.$render&&this.$render(),
this.fake||this.dispatchEvent("prop.visible",{value:!0})},this.$activateButton=function(){if(!this.$active){
if(!this.$drawn){var f
return void this.addEventListener("DOMNodeInsertedIntoDocument",f=function(e){this.removeEventListener("DOMNodeInsertedIntoDocument",f),
this.$activateButton()})}this.parentNode&&this.parentNode.$hasButtons&&(this.$isFirst&&this.parentNode.$setStyleClass(this.$button,"firstcurbtn"),
this.parentNode.$setStyleClass(this.$button,"curbtn")),this.$render&&this.$render()}},this.addEventListener("$skinchange",function(){
this.caption&&this.$propHandlers.caption.call(this,this.caption),this.icon&&this.$propHandlers.icon.call(this,this.icon)

}),this.$enable=function(){this.$button&&this.$setStyleClass(this.$button,null,["btnDisabled"])},this.$disable=function(){
this.$button&&this.$setStyleClass(this.$button,"btnDisabled")},this.$btnDown=function(oHtml,htmlEvent){
if(!this.disabled&&2!=htmlEvent.button)return 1==htmlEvent.button?void apf.stopEvent(htmlEvent):void(this.parentNode.dispatchEvent("tabselectclick",{
page:this,htmlEvent:htmlEvent})!==!1&&(this.$btnPressed=!0,$btnSet.call(this,oHtml)))},this.$btnUp=function(oHtml,htmlEvent){
if(this.parentNode.$setStyleClass(oHtml,"",["down"],!0),!this.disabled){if(1==htmlEvent.button){apf.stopEvent(htmlEvent)


var page=apf.lookup(this.$uniqueId)
return void page.parentNode.remove(page,htmlEvent)}this.$btnPressed=!1,this.parentNode.dispatchEvent("tabselectmouseup")

}},this.$btnOut=function(oHtml){this.parentNode.$setStyleClass(oHtml,"",["over"],!0),this.canHaveChildren=!0,
this.$dragging=!1,this.$btnPressed=!1},this.$canLeechSkin=!0,this.addEventListener("prop.class",function(e){
apf.setStyleClass(this.$button,e.value,this.$lastClassValueBtn?[this.$lastClassValueBtn]:null),this.$lastClassValueBtn=e.value

}),this.$draw=function(isSkinSwitch){this.skinName=this.parentNode.skinName
var sType=this.getAttribute("type")
if(sType&&(this.fake=!0,this.relPage=this.parentNode.getPage(sType)||null),this.parentNode.$hasButtons){
this.parentNode.$getNewContext("button")
var elBtn=this.parentNode.$getLayoutNode("button")
elBtn.setAttribute(this.parentNode.$getOption("main","select")||"onmousedown","apf.lookup("+this.$uniqueId+").$btnDown(this, event);"),
elBtn.setAttribute("onmouseup","apf.lookup("+this.$uniqueId+").$btnUp(this, event)"),elBtn.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+").parentNode;if(apf.lookup("+this.$uniqueId+") != o.$activepage"+(this.parentNode.overactivetab?" || true":"")+') o.$setStyleClass(this, "over", null, true);'),
elBtn.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+");o&&o.$btnOut(this, event);"),
this.$button=apf.insertHtmlNode(elBtn,this.parentNode.$buttons)
var closebtn=this.closebtn=this.getAttribute("closebtn");(apf.isTrue(closebtn)||(this.parentNode.buttons||"").indexOf("close")>-1&&!apf.isFalse(closebtn))&&this.$propHandlers.closebtn.call(this,!0),
!isSkinSwitch&&this.nextSibling&&this.nextSibling.$button&&this.$button.parentNode.insertBefore(this.$button,this.nextSibling.$button),
this.$button.host=this}if(!this.fake){this.$ext&&this.$ext.parentNode.removeChild(this.$ext),this.$ext=this.parentNode.$getExternal("page",this.parentNode.oPages,null,this),
this.$ext.host=this,this.$int=this.parentNode.$getLayoutNode("page","container",this.$ext),this.visible&&(this.$isLast&&this.$last(),
this.$isFirst&&this.$first())
var _self=this
this.parentNode&&this.parentNode.getPages().forEach(function(page){page&&page.type==_self.id&&(page.relPage=_self,
page.$active&&(_self.$fake=page,page.$activate()),_self.$button.style.display="none",_self.visible=!1)

})}},this.$destroy=function(){this.$button&&(this.parentNode&&!this.parentNode.$amlDestroyed&&this.$button.parentNode&&this.$button.parentNode.removeChild(this.$button),
this.$button.host=null,this.$button=null)}}.call(apf.page.prototype=new apf.Presentation),apf.aml.setElement("page",apf.page),
apf.BaseTab=function(){this.$init(!0)},function(){function visCheck(){scalersz.call(this)}function animAddTab(tab,callback){
function animateToTop(){t.style.marginTop="0px",setTimeout(function(){t.style[apf.CSSPREFIX+"TransitionProperty"]="",
t.style[apf.CSSPREFIX+"TransitionDuration"]="",t.style[apf.CSSPREFIX+"TimingFunction"]="",t.style.marginTop="",
animateWidth&&(t.style.maxWidth=""),callback(tab)},150)}var t=tab.$button,animateWidth=t.offsetWidth-apf.getWidthDiff(t)<parseInt(apf.getStyle(t,"maxWidth"))


if(animateWidth){var p=tab.parentNode.getPages()[0]==tab?null:tab.previousSibling.$button,tb=p?p.offsetWidth-apf.getWidthDiff(p):parseInt(apf.getStyle(t,"maxWidth"))


t.style.maxWidth="0px"}t.style.marginTop=t.offsetHeight+2+"px",setTimeout(function(){t.style[apf.CSSPREFIX+"TransitionProperty"]="margin-top, max-width",
t.style[apf.CSSPREFIX+"TransitionDuration"]="100ms, 50ms",t.style[apf.CSSPREFIX+"TimingFunction"]="cubic-bezier(.10, .10, .25, .90), cubic-bezier(.10, .10, .25, .90)",
animateWidth?(t.style.maxWidth=tb+"px",setTimeout(animateToTop,50)):animateToTop()})}function animRemoveTab(tab,isLast,isContracted,callback,isOnly){
function end(){setTimeout(function(){p.style[apf.CSSPREFIX+"TransitionProperty"]="",p.style[apf.CSSPREFIX+"TransitionDuration"]="",
p.style[apf.CSSPREFIX+"TimingFunction"]="",t.style[apf.CSSPREFIX+"TransitionProperty"]="",t.style[apf.CSSPREFIX+"TransitionDuration"]="",
t.style[apf.CSSPREFIX+"TimingFunction"]="",t.style.display="none",callback(tab)},150)}var t=tab.$button


if(t){var tb=t.offsetHeight,diff=t.offsetWidth
t.style[apf.CSSPREFIX+"TransitionProperty"]="margin-top, max-width, padding",t.style[apf.CSSPREFIX+"TransitionDuration"]=(isOnly?".2":".15")+"s, .1s, .1s",
t.style[apf.CSSPREFIX+"TimingFunction"]="linear, ease-out, ease-out",t.style.marginTop=tb+2+"px"
var p=t.parentNode
apf.isGecko&&(p=p.parentNode),p.style[apf.CSSPREFIX+"TransitionProperty"]="padding-right",p.style[apf.CSSPREFIX+"TransitionDuration"]=".2s",
p.style[apf.CSSPREFIX+"TimingFunction"]="ease-out",setTimeout(function(){if(isLast)p.style.paddingRight=""
else{var cur=parseInt(apf.getStyle(p,"paddingRight"))
p.style.paddingRight=cur+diff-(apf.tabRightDelta||15)+"px"}t.className+=" destroyed",end()},isOnly?150:100)

}}function scalersz(e,excl){if((this.length||this.getPages().length)&&!this.$waitForMouseOut){var p=apf.isGecko?this.$buttons.parentNode:this.$buttons


p.style[apf.CSSPREFIX+"TransitionProperty"]="padding-right",p.style[apf.CSSPREFIX+"TransitionDuration"]=this.length<4?".4s":".2s",
p.style[apf.CSSPREFIX+"TimingFunction"]="ease-out",apf.isGecko?p.style.paddingRight=apf.getWidthDiff(this.$buttons)+"px":p.style.paddingRight="",
setTimeout(function(){p.style[apf.CSSPREFIX+"TransitionProperty"]="",p.style[apf.CSSPREFIX+"TransitionDuration"]="",
p.style[apf.CSSPREFIX+"TimingFunction"]=""},250)}}this.isPaged=!0,this.$focussable=apf.KEYBOARD,this.length=0,
this.isLoading={},this.inited=this.ready=!1,this.$scroll=!0,this.set=function(page,callback,noEvent){
return noEvent||this.src&&!this.$findPage(page,{})?this.$propHandlers.activepage.call(this,page,null,null,callback,noEvent):this.activepage==(page.name||page)?callback&&callback(this.getPage(page)):(this.$lastCallback=callback,
void this.setProperty("activepage",page))},this.$supportedProperties.push("activepage","activepagenr","length","src","loading","trans-in","trans-out"),
this.$propHandlers.activepagenr=this.$propHandlers.activepage=function(next,prop,force,callback,noEvent){
if(this.inited&&!apf.isNot(next)&&next!=-1){callback||(callback=this.$lastCallback,delete this.$lastCallback)


var page,info={}
if(page=this.$findPage(next,info),!page){if(this.src){if(this.isLoading[next])return
this.$findPage("loading",{})&&this.$propHandlers.activepage.call(this,"loading"),this.setProperty("loading",!0),
this.isLoading[next]=!0,page=this.ownerDocument.createElementNS(apf.ns.apf,"page"),page.setAttribute("id",next),
this.appendChild(page)
var _self=this
return void page.insertMarkup(this.src,{page:next,callback:function(options){if(delete _self.isLoading[next],
!options.xmlNode){var oError=new Error(apf.formatErrorString(0,null,"Loading new page","Could not load new page: "+_self.src))


if(_self.setProperty("loading",!1),this.dispatchEvent("error",apf.extend({error:oError,bubbles:!0},options))===!1)return!0


throw oError}_self.setProperty("activepage",next),callback&&callback(options.amlNode),_self.setProperty("loading",!1)

}})}return!1}if(page.parentNode!=this)return!1
if(!page.visible||page.disabled)return!1
if(next.tagName&&(next=info.position,this.activepage=page.name||next),!noEvent){var oEvent={previous:this.activepage,
previousId:this.activepagenr,previousPage:this.$activepage,next:next,nextId:info.position,nextPage:page
}
if(this.dispatchEvent("beforeswitch",oEvent)===!1)return this.hideLoader&&this.hideLoader(),!1}return this.activepagenr=info.position,
this.setProperty("activepagenr",info.position),this.$activepage&&this.$activepage.$deactivate(),page.$activate(),
this.$activepage=page,this.hideLoader&&(page.$rendered!==!1?this.hideLoader():page.addEventListener("afterrender",function(){
this.parentNode.hideLoader()})),noEvent||(page.$rendered!==!1?this.dispatchEvent("afterswitch",oEvent):page.addEventListener("afterrender",function(){
this.parentNode.dispatchEvent("afterswitch",oEvent)})),"function"==typeof callback&&callback(page),!0

}},this.$propHandlers.buttons=function(value){this.$scale=value.indexOf("scale")>-1,this.$scroll=!this.$scale,
this.$order=value.indexOf("order")>-1,this.$scale?(this.$maxBtnWidth=parseInt(this.$getOption("button","maxwidth"))||150,
this.$minBtnWidth=parseInt(this.$getOption("button","minwidth"))||10,this.$setStyleClass(this.$buttons,"scale"),
this.addEventListener("resize",scalersz)):(this.$setStyleClass(this.$buttons,"",["scale"]),this.removeEventListener("resize",scalersz))

},this.anims="add|remove|sync",this.$scaleinit=function(node,type,callback,force){function btnMoHandler(e){
var pos=apf.getAbsolutePosition(this);(e.clientX<=pos[0]||e.clientY<=pos[1]||e.clientX>=pos[0]+this.offsetWidth||e.clientY>=pos[1]+this.offsetHeight)&&(apf.removeListener(_self.$buttons,"mouseout",btnMoHandler),
delete _self.$waitForMouseOut,_self.$scaleinit(null,"sync"))}var _self=this,pg=this.getPages(),l=pg.length


if(l){if(force&&!this.$ext.offsetWidth&&!this.$ext.offsetHeight||this.anims.indexOf(type)==-1||this.skipAnimOnce)return scalersz.call(this),
this.skipAnimOnce=!1,void("add"==type?node.dispatchEvent("afteropen"):"remove"==type&&node.dispatchEvent("afterclose")!==!1&&callback())


if(apf.window.vManager.check(this,"tabscale",visCheck)){if(!type)return scalersz.call(this)
if("add"==type)animAddTab(node,function(){node.dispatchEvent("afteropen")})
else if("sync"==type)scalersz.call(this)
else if("remove"==type){for(var onfinish=function(){if(node.dispatchEvent("afterclose")!==!1){if(callback(),
!isLast&&isContracted)for(var pages=_self.getPages(),i=0,l=pages.length;i<l;i++){var page=pages[i]
page.$button.style.minWidth="",page.$button.style.maxWidth=""}2==_self.$waitForMouseOut?(apf.removeListener(_self.$buttons,"mouseout",btnMoHandler),
delete _self.$waitForMouseOut):isLast&&delete _self.$waitForMouseOut}},pages=this.getPages(),lNode=pages[pages.length-1];lNode&&(!lNode.$button||lNode.$button.style.top);)lNode=lNode.previousSibling


if(!lNode||!node.$button)return
var isLast=lNode==node,isContracted=node.$button.offsetWidth-apf.getWidthDiff(node.$button)!=parseInt(apf.getStyle(node.$button,"maxWidth"))


if(!isLast&&isContracted)for(var i=0,l=pages.length;i<l;i++){var page=pages[i]
page.$button.style.minWidth=page.$button.style.maxWidth=page.$button.offsetWidth-(apf.isGecko?0:apf.getWidthDiff(page.$button))+"px"

}var isCur=this.$activepage==node
if(_self.nextTabInLine)_self.set(_self.nextTabInLine),delete _self.nextTabInLine
else if(_self.$activepage==node){for(var ln=node.nextSibling;ln&&(!ln.$first||!ln.visible);)ln=ln.nextSibling


for(var rn=node.previousSibling;rn&&(!rn.$last||!rn.visible);)rn=rn.previousSibling;(ln||rn)&&_self.set(ln||rn)

}if(isCur&&(apf.setStyleClass(node.$button,"curbtn"),node.$button&&(node.$button.style.zIndex=0)),!(node.relPage||node).$ext)return onfinish()


1==pages.length&&((node.relPage||node).$ext.style.display="none"),animRemoveTab(node,isLast,isContracted,onfinish,1==pages.length),
this.$waitForMouseOut=!0,isLast||apf.addListener(_self.$buttons,"mouseout",btnMoHandler)}}}},this.getPages=function(){
var r=[],nodes=this.childNodes
if(!nodes)return r
for(var i=0,l=nodes.length;i<l;i++)"page|case".indexOf(nodes[i].localName)>-1&&nodes[i].visible!==!1&&r.push(nodes[i])


return r},this.getPage=function(nameOrId){return apf.isNot(nameOrId)?this.$activepage:this.$findPage(nameOrId)

},this.add=function(caption,name,type,before,callback){var page=this.ownerDocument.createElementNS(apf.ns.aml,"page")


return name&&page.setAttribute("id",name),type&&page.setAttribute("type",type),caption&&page.setAttribute("caption",caption),
callback&&callback(page),this.insertBefore(page,before),page},this.remove=function(nameOrId,force,noAnimation){
var page="object"==typeof nameOrId?nameOrId:this.$findPage(nameOrId)
if(!page)return!1
var e={page:page}
return"object"==typeof force&&(e.htmlEvent=force,force=!1),force||this.dispatchEvent("close",e)!==!1?(this.$scale&&!noAnimation?this.$scaleinit(page,"remove",function(){
page.destroy(!0,!0)},!0):page.dispatchEvent("afterclose")!==!1&&page.destroy(!0,!0),page):void 0},this.addEventListener("DOMNodeRemoved",function(e){
var amlNode=e.currentTarget
if(!e.$doOnlyAdmin&&e.relatedNode==this&&"page"==amlNode.localName){if((this.activepage||0==this.activepage)&&this.activepage!=-1){
if(this.getPage(this.nextTabInLine)||(this.nextTabInLine=null),this.nextTabInLine&&this.set(this.nextTabInLine),
this.nextTabInLine||this.$activepage!=amlNode)this.$scale&&this.$scaleinit()
else{for(var ln=amlNode.nextSibling;ln&&(!ln.$first||!ln.visible);)ln=ln.nextSibling
for(var rn=amlNode.previousSibling;rn&&(!rn.$last||!rn.visible);)rn=rn.previousSibling
this.firstChild==amlNode&&ln&&ln&&ln.$first(),this.lastChild==amlNode&&rn&&rn&&rn.$last(),ln||rn?this.set(ln||rn):(amlNode.$deactivate(),
this.$activepage=this.activepage=this.activepagenr=null,this.setProperty("activepage",null))}delete this.nextTabInLine

}this.setProperty("length",this.getPages().length-1)}}),this.addEventListener("DOMNodeInserted",function(e){
var amlNode=e.currentTarget
if("page"==amlNode.localName&&e.relatedNode==this&&1==amlNode.nodeType){var pages=this.getPages()
if(!e.$beforeNode){var lastChild,pg=pages;(lastChild=pg[pg.length-2])&&lastChild.$last(!0),amlNode.$last()

}var p2,p=pages[0]
if(amlNode==p&&((p2=this.getPage(1))&&p2.$first(!0),amlNode.$first()),this.$activepage){var info={}
this.$findPage(this.$activepage,info),this.activepagenr!=info.position&&(parseInt(this.activepage)==this.activepage&&(this.activepage=info.position,
this.setProperty("activepage",info.position)),this.activepagenr=info.position,this.setProperty("activepagenr",info.position))

}else(this.activepage||this.$activepage||amlNode.render)&&!amlNode.$rendered||this.set(amlNode)
this.$scale&&amlNode.visible&&!e.$isMoveWithinParent?this.$scaleinit(amlNode,"add"):amlNode.dispatchEvent("afteropen"),
this.setProperty("length",this.getPages().length)}}),this.$findPage=function(nameOrId,info){var node,nodes=this.childNodes


if(nodes){if(nameOrId.localName){for(var t=0,i=0,l=nodes.length;i<l;i++)if(node=nodes[i],"page|case".indexOf(node.localName)>-1&&++t&&node==nameOrId)return info&&(info.position=t-1),
node}else for(var t=0,i=0,l=nodes.length;i<l;i++)if(node=nodes[i],"page|case".indexOf(node.localName)>-1&&(t++==nameOrId||node.name==nameOrId))return info&&(info.position=t-1),
node
return null}},this.$enable=function(){for(var nodes=this.childNodes,i=0,l=nodes.length;i<l;i++)nodes[i].enable&&nodes[i].enable()

},this.$disable=function(){for(var nodes=this.childNodes,i=0,l=nodes.length;i<l;i++)nodes[i].disable&&nodes[i].disable()

},this.$loadChildren=function(callback){var i,node,nodes,page=!1
if(this.inited=!0,this.$hasButtons){this.$buttons=this.$getLayoutNode("main","buttons",this.$ext),this.$buttons.setAttribute("id",this.$uniqueId+"_buttons")

}if(this.oPages=this.$getLayoutNode("main","pages",this.$ext),this.$int)for(this.$int=this.oPages,page=!0,
nodes=this.childNodes,i=0;i<nodes.length;i++)node=nodes[i],1==node.nodeType&&(node.$draw(!0),node.$skinchange&&node.$skinchange(),
node.$loadAml())
else this.$int=this.oPages,nodes=this.getPages(),nodes.length&&(nodes[0].$first(),(node=nodes[nodes.length-1]).$last())


node?(this.activepage=("undefined"!=typeof this.activepage?this.activepage:this.activepagenr)||0,page=this.getPage(this.activepage),
page.render&&!page.$rendered||this.$propHandlers.activepage.call(this,this.activepage)):this.isPages=!1,
this.setProperty("length",this.getPages().length),this.ready=!0,!this.activepage&&this.getAttribute("src")&&(this.src=this.getAttribute("src"),
this.$propHandlers.activepage.call(this))},this.$destroy=function(bSkinChange){bSkinChange||!this.oScroller

}}.call(apf.BaseTab.prototype=new apf.Presentation),apf["switch"]=function(struct,tagName){this.$hasButtons=!1,
this.$init(tagName||"switch",apf.NODE_VISIBLE,struct)},apf.pages=function(struct,tagName){this.$hasButtons=!1,
this.$init(tagName||"pages",apf.NODE_VISIBLE,struct),this.$focussable=!1},apf.tab=function(struct,tagName){
this.$hasButtons=!0,this.$init(tagName||"tab",apf.NODE_VISIBLE,struct)},function(){this.$focussable=apf.KEYBOARD,
this.$draw=function(bSkinChange){this.$ext=this.$getExternal(),this.$loadChildren()}}.call(apf.tab.prototype=new apf.BaseTab),
apf["switch"].prototype=apf.pages.prototype=apf.tab.prototype,apf.aml.setElement("switch",apf["switch"]),
apf.aml.setElement("pages",apf.pages),apf.aml.setElement("tab",apf.tab)}})


define("plugins/c9.ide.ui/lib_apf",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,define(["require","module","exports","./lib/menu/menu","./lib/crypto","./lib/page","./lib/dropdown","./lib/splitbox","./lib/flexbox"],function(require,module,exports){
function main(options,imports,register){function defineProp(obj,name,val){Object.defineProperty(obj,name,{
value:val,enumerable:!1,writable:!0,configurable:!0})}function findCssRule(name,stylesheet,win){name=name.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1").replace(/::?(after|before)/g,"::?$1")


var nameRe=new RegExp("^"+name+"$","i")
if(stylesheet){"number"==typeof stylesheet&&(stylesheet=(win||self).document.styleSheets[stylesheet||0])


var rules=stylesheet.cssRules
if(!rules)return!1
for(var i=0;i<rules.length;i++)if(nameRe.test(rules.item(i).selectorText))return rules.item(i)}else for(var sheets=(win||self).document.styleSheets,j=sheets.length-1;j>=0;j--)try{
for(var rules=sheets[j].cssRules||[],i=0;i<rules.length;i++)if(nameRe.test(rules.item(i).selectorText))return rules.item(i)

}catch(e){}}function xmlToHtml(xmlNode,shallow){if(1==xmlNode.nodeType&&"style"!=xmlNode.localName){var el=document.createElement(xmlNode.localName),ch=xmlNode.childNodes


if(!shallow)for(var i=0;i<ch.length;i++){var childEl=xmlToHtml(ch[i])
childEl&&el.appendChild(childEl)}for(var attr=xmlNode.attributes,i=0;i<attr.length;i++)el.setAttribute(attr[i].name,attr[i].nodeValue)


return el}if(3==xmlNode.nodeType){var el=document.createTextNode(xmlNode.nodeValue)
return el}}function findNode(htmlNode,textNode,parts,maxRecur){if(parts||(parts=textNode.split("/")),
textNode=parts.shift(),"."==textNode)return htmlNode
if("text()"==textNode){for(var ch=htmlNode.childNodes,i=0;i<ch.length;i++)if(3==ch[i].nodeType||4==ch[i].nodeType)return ch[i]


throw new Error("can't find node "+textNode)}if("@"==textNode[0]){var name=textNode.substr(1)
if(htmlNode.getAttributeNode)return htmlNode.getAttributeNode(name)
var value=htmlNode.getAttribute(name)
return{name:name,value:value,nodeValue:value,nodeType:2}}var index=0
textNode=textNode.replace(/\[\d+\]/,function(x){return index=parseInt(x.slice(1,-1))-1,""})
for(var re=new RegExp("^("+textNode+")$","i"),ch=htmlNode.childNodes,i=0;i<ch.length;i++)if(ch[i].localName&&re.test(ch[i].localName)){
if(!index)return parts.length?findNode(ch[i],"",parts):ch[i]
index--}}function findNodes(htmlNode,textNode,result,re){var recursive=!0
result||(result=[],"."==textNode[0]&&(textNode=textNode.substr(1)),textNode.startsWith("//")?textNode=textNode.substr(2):recursive=!1,
re=new RegExp("^("+textNode.replace(/a:/g,"")+")$","i"))
for(var ch=htmlNode.childNodes,i=0;i<ch.length;i++)ch[i].localName&&re.test(ch[i].localName)&&result.push(ch[i]),
recursive&&findNodes(ch[i],textNode,result,re)
return result}imports.ext.on("register",function(e){apf.nameserver.register("all",e.plugin.name,e.plugin)

}),imports.ext.on("unregister",function(e){apf.nameserver.remove("all",e.plugin),delete apf.nameserver.lookup.all[e.plugin.name]

}),apf={getPlugin:function(name){return apf.nameserver.get("all",name)},NODE_HIDDEN:101,NODE_VISIBLE:102,
KEYBOARD:2,KEYBOARD_MOUSE:!0,MENU:3,includeStack:[],initialized:!1,AppModules:[],started:!1,crypto:{},
config:{},ns:{apf:"http://ajax.org/2005/aml",aml:"http://ajax.org/2005/aml",xsd:"http://www.w3.org/2001/XMLSchema",
xhtml:"http://www.w3.org/1999/xhtml",xslt:"http://www.w3.org/1999/XSL/Transform",xforms:"http://www.w3.org/2002/xforms",
ev:"http://www.w3.org/2001/xml-events"},browserDetect:function(){if(!this.$bdetect){var Browser=this.$bdetect=function(){
var ua=navigator.userAgent.toLowerCase(),platform=navigator.platform.toLowerCase(),UA=ua.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0]


ua.match(/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/)&&(UA=["ie",null,Regexp.$2])
var mode="ie"==UA[1]&&document.documentMode,b={name:"version"==UA[1]?UA[3]:UA[1],version:mode||parseFloat("opera"==UA[1]&&UA[4]?UA[4]:UA[2]),
Platform:{name:ua.match(/ip(?:ad|od|hone)/)?"ios":(ua.match(/(?:webos|android)/)||platform.match(/mac|win|linux/)||["other"])[0]
}}
return b[b.name]=!0,b[b.name+parseInt(b.version,10)]=!0,b.Platform[b.Platform.name]=!0,b}(),UA=navigator.userAgent.toLowerCase()


this.isGecko=!!Browser.firefox,this.isChrome=!!Browser.chrome,this.isSafari=!!Browser.safari,this.isSafariOld=Browser.safari&&2.4===Browser.version,
this.isWebkit=this.isSafari||this.isChrome||UA.indexOf("konqueror")!=-1,this.isOpera=!!Browser.opera,
this.isIE=!!Browser.ie,this.isWin=Browser.Platform.win,this.isMac=Browser.Platform.mac,this.isLinux=Browser.Platform.linux,
this.isIphone=Browser.Platform.ios||UA.indexOf("aspen simulator")!=-1,this.versionWebkit=this.isWebkit?Browser.version:null,
this.versionGecko=this.isGecko?Browser.version:null,this.versionFF=this.isGecko?Browser.version:null,
this.versionSafari=this.isSafari?Browser.version:null,this.versionChrome=this.isChrome?Browser.version:null,
this.versionOpera=this.isOpera?Browser.version:null}},setCompatFlags:function(){apf.isIE11=!(apf.isGecko||apf.isWebkit||apf.isOpera||apf.isIE),
this.hasSingleResizeEvent=!apf.isIE,this.hasSingleRszEvent=!apf.isIE,this.hasAutocompleteXulBug=apf.isGecko,
this.mouseEventBuffer=6,this.hasComputedStyle="undefined"!=typeof document.defaultView&&"undefined"!=typeof document.defaultView.getComputedStyle,
this.w3cRange=Boolean(window.getSelection)
var t=document.createElement("div")
this.hasContentEditable="string"==typeof t.contentEditable||"boolean"==typeof t.contentEditable,this.hasFlex="flexFlow"in t.style,
!this.hasFlex&&apf.isWebkit?(t.style.display="-webkit-box",this.hasFlexibleBox="-webkit-box"==t.style.display):this.hasFlexibleBox=this.hasFlex


var props=["transform","OTransform","KhtmlTransform","MozTransform","WebkitTransform"],props2=["transition","OTransition","KhtmlTransition","MozTransition","WebkitTransition"],prefixR=["","O","Khtml","Moz","Webkit"],prefixC=["","o-","khtml-","moz-","webkit-"],events=["transitionend","transitionend","transitionend","transitionend","webkitTransitionEnd"],i=0,l=5


for(this.supportCSSAnim=!1,this.supportCSSTransition=!1;i<l&&!this.supportCSSAnim;++i)"undefined"!=typeof t.style[props[i]]&&(this.supportCSSAnim=props[i],
this.supportCSSTransition=props2[i],this.runtimeStylePrefix=prefixR[i],this.classNamePrefix=prefixC[i],
this.cssAnimEvent=events[i])
t=null,this.animSteps=1,this.animInterval=1,this.CSSPREFIX=apf.isGecko?"Moz":apf.isWebkit?"webkit":"",
this.CSSPREFIX2=apf.isGecko?"-moz":apf.isWebkit?"-webkit":"",apf.hasFlex?(apf.CSS_FLEX_PROP="flex",apf.CSS_DISPLAY_FLEX="flex"):(apf.CSS_FLEX_PROP=apf.CSSPREFIX+"BoxFlex",
apf.CSS_DISPLAY_FLEX=apf.CSSPREFIX2+"-box"),this.percentageMatch=new RegExp,this.percentageMatch.compile("([\\-\\d\\.]+)\\%","g")

},extend:function(dest,src){var prop,i,x=!dest.notNull
if(2==arguments.length){for(prop in src)(x||src[prop])&&(dest[prop]=src[prop])
return dest}for(i=1;i<arguments.length;i++){src=arguments[i]
for(prop in src)(x||src[prop])&&(dest[prop]=src[prop])}return dest},$extend:function(dest,src){for(var prop in src)dest[prop]=src[prop]


return dest},start:function(){this.started=!0
var sHref=location.href.split("#")[0].split("?")[0]
return this.host=location.hostname&&sHref.replace(/(\/\/[^\/]*)\/.*$/,"$1"),this.hostPath=sHref.replace(/\/[^\/]*$/,"")+"/",
this.setCompatFlags(),(!apf.onstart||apf.onstart()!==!1)&&(apf.isWebkit?apf.runWebkit():this.isGecko?apf.runGecko():this.isIE11||apf.runIE(),
this.started=!0,void(this.root=!0))},nsqueue:{},all:[],implement:function(classRef){if(1==arguments.length)classRef.call(this)
else for(var a,i=0,l=arguments.length;i<l;i++)a=arguments[i],arguments[i].call(this)
return this},uniqueHtmlIds:0,setUniqueHtmlId:function(oHtml){var id
return oHtml.setAttribute("id",id="q"+this.uniqueHtmlIds++),id},getUniqueId:function(){return this.uniqueHtmlIds++

},lookup:function(uniqueId){return this.all[uniqueId]},findHost:function(o){for(;o&&o.parentNode;){try{
if((o.host||o.host===!1)&&"string"!=typeof o.host)return o.host}catch(e){}o=o.parentNode}return null},
formatErrorString:function(number,control,process,message,amlContext,outputname,output){return apf.lastErrorMessage=message,
message},getAbsolutePath:function(base,url){return url&&"/"==url.charAt(0)?url:url&&base&&!url.match(/^\w+\:\/\//)?base.replace(/\/$/,"")+"/"+url.replace(/^\//,""):url

},namespaces:{},setNamespace:function(namespaceURI,oNamespace){this.namespaces[namespaceURI]=oNamespace,
oNamespace.namespaceURI=namespaceURI},initialize:function(){apf.window.init()},fireEvent:function(el,type,e,capture){
el.dispatchEvent?el.dispatchEvent(type,e,capture):el.fireEvent("on"+type,e)},addListener:function(el,type,fn,capture){
return el.addEventListener?el.addEventListener(type,fn,capture||!1):el.attachEvent&&el.attachEvent("on"+type,fn),
this},removeListener:function(el,type,fn,capture){return el.removeEventListener?el.removeEventListener(type,fn,capture||!1):el.detachEvent&&el.detachEvent("on"+type,fn),
this},stopEvent:function(e){return this.stopPropagation(e).preventDefault(e),!1},stopPropagation:function(e){
return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},preventDefault:function(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,
this},unload:function(exclude){}}
var $xmlns=function(xmlNode,tag,xmlns,prefix){return xmlNode.querySelectorAll(tag)||[]},$setTimeout=setTimeout,$setInterval=setInterval


apf.setTimeout=function(f,t){return apf.$eventDepth++,$setTimeout(function(){f(),0==--apf.$eventDepth&&apf.queue.empty()

},t)},document.documentElement.className+=" has_apf",apf.browserDetect(),apf.buildDom=function buildDom(arr,parent){
if("string"==typeof arr&&arr){var txt=document.createTextNode(arr)
return parent&&parent.appendChild(txt),txt}if(!Array.isArray(arr))return arr
if("string"!=typeof arr[0]||!arr[0]){for(var els=[],i=0;i<arr.length;i++){var ch=buildDom(arr[i],parent)


ch&&els.push(ch)}return els}var el=document.createElement(arr[0]),options=arr[1],childIndex=1
options&&"object"==typeof options&&!Array.isArray(options)&&(childIndex=2,Object.keys(options).forEach(function(n){
var val=options[n]
"class"==n?el.className=Array.isArray(val)?val.join(" "):val:"function"==typeof val?el[n]=val:el.setAttribute(n,val)

}))
for(var i=childIndex;i<arr.length;i++)buildDom(arr[i],el)
return parent&&parent.appendChild(el),el},apf.Class=function(){},apf.Class.prototype=new function(){var FUN="function",OBJ="object",UNDEF="undefined",PROP="prop."


this.$regbase=0,this.hasFeature=function(test){return this.$regbase&test},this.$initStack=[],this.$bufferEvents=[],
this.$init=function(callback,nodeFunc,struct){if(typeof callback==FUN||callback===!0)return this.$bufferEvents=this.$bufferEvents.slice(),
callback===!0?this:(this.$initStack=this.$initStack.slice(),this.$initStack.push(callback),this)
this.addEventListener=realAddEventListener,2!=this.nodeType&&(this.$uniqueId=apf.all.push(this)-1),this.$captureStack={},
this.$eventsStack={},this.$funcHandlers={}
for(var i=0,l=this.$initStack.length;i<l;i++)this.$initStack[i].apply(this,arguments)
for(i=0,l=this.$bufferEvents.length;i<l;i++)this.addEventListener.apply(this,this.$bufferEvents[i])
return delete realAddEventListener,delete this.$initStack,delete this.$bufferEvents,struct&&(struct.htmlNode||this.nodeFunc==apf.NODE_HIDDEN)&&(this.$pHtmlNode=struct.htmlNode,
this.$onInsertedIntoDocument&&this.$onInsertedIntoDocument(),apf.queue.empty()),this},this.implement=apf.implement,
this.$handlePropSet=function(prop,value){this[prop]=value},this.getAvailableProperties=function(){return this.$supportedProperties.slice()

},this.setProperty=function(prop,value,forceOnMe,setAttr,inherited){var arr,e,oldvalue=this[prop],eventName=PROP+prop


try{var isChanged=typeof value==OBJ?value!=(typeof oldvalue==OBJ?oldvalue:null):this.$booleanProperties&&this.$booleanProperties[prop]?oldvalue!=apf.isTrue(value):String(oldvalue)!==String(value)

}catch(e){var isChanged=!0}if(isChanged){if(this.$handlePropSet(prop,value,forceOnMe)===!1)return
value=this[prop]}if((arr=this.$eventsStack[eventName])&&isChanged&&this.dispatchEvent(eventName,{prop:prop,
value:value,oldvalue:oldvalue,changed:isChanged})===!1&&(e.returnValue=!1),(aci||(aci=apf.config.$inheritProperties))[prop]){
if(10==inherited||value)10!=inherited&&(this.$inheritProperties[prop]=inherited||-1)
else if(delete this.$inheritProperties[prop],this.$setInheritedAttribute&&this.$setInheritedAttribute(prop))return


if(this.$amlLoaded&&(!e||e.returnValue!==!1)&&this.childNodes){var inheritType=aci[prop]
!function recur(nodes){var i,l,node,n
for(i=0,l=nodes.length;i<l;i++)if(node=nodes[i],1==node.nodeType||7==node.nodeType)if(n=node.$inheritProperties[prop],
1!=inheritType||n){if(!(n<0)){if(3==n||3==inherited){var sameValue=node[prop]
node[prop]=null}node.setProperty(prop,3!=n?value:sameValue,!1,!1,n||2)}}else recur(node.childNodes)}(this.childNodes)

}}return value}
var aci
this.getProperty=function(prop){return this[prop]},apf.$eventDepth=0,this.$eventDepth=0,this.dispatchEvent=function(eventName,options,e){
var arr,result,rValue,i
if(options||(options={}),options.name||(options.name=eventName),apf.$eventDepth++,this.$eventDepth++,
e=options&&options.name?options:e,!(e&&e.currentTarget||options&&options.currentTarget)&&(options.currentTarget=this,
arr=this.$captureStack[eventName]))for(i=arr.length;i--;)rValue=arr[i].call(this,e||(e=new apf.AmlEvent(eventName,options))),
typeof rValue!=UNDEF&&(result=rValue)
if(options&&options.captureOnly)return e&&typeof e.returnValue!=UNDEF?e.returnValue:result
if(this["on"+eventName]&&(result=this["on"+eventName].call(this,e||(e=options))),arr=this.$eventsStack[eventName])for(i=arr.length;i--;)arr[i]&&(rValue=arr[i].call(this,e||(e=options)),
typeof rValue!=UNDEF&&(result=rValue))
return(e&&e.bubbles&&!e.cancelBubble||!e&&options&&options.bubbles)&&this!=apf&&(rValue=(this.parentNode||this.ownerElement||apf).dispatchEvent(eventName,options,e),
typeof rValue!=UNDEF&&(result=rValue)),0==--apf.$eventDepth&&this.ownerDocument&&apf.queue&&apf.queue.empty(),
this.$eventDepth--,e&&typeof e.returnValue!=UNDEF?e.returnValue:result},this.addEventListener=function(a,b,c){
this.$bufferEvents.push([a,b,c])}
var realAddEventListener=function(eventName,callback,useCapture){"o"==eventName[0]&&"n"==eventName[1]&&(eventName=eventName.substr(2))


var stack=useCapture?this.$captureStack:this.$eventsStack,s=stack[eventName]
if(s||(s=stack[eventName]=[]),!(s.indexOf(callback)>-1)){s.push(callback)
var f;(f=this.$eventsStack["$event."+eventName])&&f[0].call(this,callback)}}
this.removeEventListener=function(eventName,callback,useCapture){var stack=(useCapture?this.$captureStack:this.$eventsStack)[eventName]


stack&&(this.$eventDepth&&(stack=(useCapture?this.$captureStack:this.$eventsStack)[eventName]=stack.slice()),
stack.remove(callback),stack.length||delete(useCapture?this.$captureStack:this.$eventsStack)[eventName])

},this.hasEventListener=function(eventName){return this.$eventsStack[eventName]&&this.$eventsStack[eventName].length>0

},this.destroy=function(deep,clean){if(typeof this.$uniqueId!=UNDEF||2==this.nodeType)if(this.$amlLoaded=!1,
this.$amlDestroyed=!0,this.$destroy&&this.$destroy(),this.dispatchEvent("DOMNodeRemoved",{relatedNode:this.parentNode,
bubbles:!0}),this.dispatchEvent("DOMNodeRemovedFromDocument"),apf.all[this.$uniqueId]=void 0,this.nodeFunc||this.nodeType){
if(this.$ext&&!this.$ext.isNative&&(1==this.nodeType&&"a"!=this.localName&&(this.$ext.oncontextmenu=this.$ext.host=null),
clean&&"collection"!=this.localName&&this.$ext.parentNode&&this.$ext.parentNode.removeChild(this.$ext)),
this.$int&&!this.$int.isNative&&1==this.$int.nodeType&&"a"!=this.localName&&(this.$int.host=null),this.$aml=null,
deep&&this.childNodes){var nodes=this.childNodes
for(i=nodes.length-1;i>=0;i--)nodes[i].destroy&&nodes[i].destroy(!0,clean&&"collection"==this.localName)


this.childNodes=null}this.parentNode&&this.removeNode?this.removeNode():this.ownerElement&&!this.ownerElement.$amlDestroyed&&this.ownerElement.removeAttribute(this.name),
this.$focussable&&this.focussable&&apf.window.$removeFocus(this)
for(var prop in this.$funcHandlers){var f=this.$funcHandlers[prop]
f&&f.amlNode&&f.amlNode.removeEventListener(PROP+f.prop,f.handler)}if(this.attributes)for(var attr=this.attributes,keys=Object.keys(attr),i=attr.length-1;i>=0;i--)attr[keys[i]].destroy()


try{(this.id||this.name)&&delete self[this.id||this.name]}catch(ex){}if(this.$eventsStack={},this.$captureStack={},
this.$funcHandlers={},this.$bufferEvents)for(var i=this.$bufferEvents.length-1;i>=0;i--)this.$bufferEvents=null


apf.nameserver.remove(this.localName,this)}else try{(this.id||this.name)&&(self[this.id||this.name]=null)

}catch(ex){}},this.on=function(){this.addEventListener.apply(this,arguments)},this.once=function(name,listener){
function callback(){listener.apply(this,arguments),_self.removeEventListener(name,callback)}var _self=this


this.addEventListener(name,callback)},this.emit=this.dispatchEvent,this.off=this.removeEventListener,
Object.defineProperty(this,"$html",{get:function(){return this.$int||this.$container||this.$ext},enumerable:!1,
configurable:!0})},apf.extend(apf,(new apf.Class).$init()),apf.color={colorshex:{aliceblue:15792383,antiquewhite:16444375,
aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,
blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,
coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,
darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,
darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,
deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,
goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,
indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,
lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,
lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,
lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,
mediumblue:205,mediumorchid:12211667,mediumpurple:9662680,mediumseagreen:3978097,mediumslateblue:8087790,
mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,
mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14184595,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,
powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,
salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,
skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,
steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,
wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fixHSB:function(hsb){
return{h:Math.min(360,Math.max(0,hsb.h)),s:Math.min(100,Math.max(0,hsb.s)),b:Math.min(100,Math.max(0,hsb.b))
}},fixRGB:function(rgb){return{r:Math.min(255,Math.max(0,rgb.r)),g:Math.min(255,Math.max(0,rgb.g)),b:Math.min(255,Math.max(0,rgb.b))
}},fixHex:function(hex,asBrowser){hex=hex.toLowerCase().replace(/[^a-f0-9]/g,"")
var len=6-hex.length
if(len>0){var ch="0",o=[],i=0
for(asBrowser&&(ch=hex.charAt(hex.length-1),o.push(hex));i<len;i++)o.push(ch)
asBrowser||o.push(hex),hex=o.join("")}return hex},hexToRGB:function(hex){return hex=parseInt(hex.indexOf("#")>-1?hex.substring(1):hex,16),
{r:hex>>16,g:(65280&hex)>>8,b:255&hex}},hexToHSB:function(hex){return this.RGBToHSB(this.hexToRGB(hex))

},RGBToHSB:function(rgb){var hsb={h:0,s:0,b:0},min=Math.min(rgb.r,rgb.g,rgb.b),max=Math.max(rgb.r,rgb.g,rgb.b),delta=max-min


return hsb.b=max,hsb.s=0!=max?255*delta/max:0,0!=hsb.s?rgb.r==max?hsb.h=(rgb.g-rgb.b)/delta:rgb.g==max?hsb.h=2+(rgb.b-rgb.r)/delta:hsb.h=4+(rgb.r-rgb.g)/delta:hsb.h=-1,
hsb.h*=60,hsb.h<0&&(hsb.h+=360),hsb.s*=100/255,hsb.b*=100/255,hsb},HSBToRGB:function(hsb){var rgb={},h=Math.round(hsb.h),s=Math.round(255*hsb.s/100),v=Math.round(255*hsb.b/100)


if(0==s)rgb.r=rgb.g=rgb.b=v
else{var t1=v,t2=(255-s)*v/255,t3=(t1-t2)*(h%60)/60
360==h&&(h=0),h<60?(rgb.r=t1,rgb.b=t2,rgb.g=t2+t3):h<120?(rgb.g=t1,rgb.b=t2,rgb.r=t1-t3):h<180?(rgb.g=t1,
rgb.r=t2,rgb.b=t2+t3):h<240?(rgb.b=t1,rgb.r=t2,rgb.g=t1-t3):h<300?(rgb.b=t1,rgb.g=t2,rgb.r=t2+t3):h<360?(rgb.r=t1,
rgb.g=t2,rgb.b=t1-t3):(rgb.r=0,rgb.g=0,rgb.b=0)}return{r:Math.round(rgb.r),g:Math.round(rgb.g),b:Math.round(rgb.b)
}},RGBToHex:function(rgb){return("00000"+(rgb.r<<16|rgb.g<<8|rgb.b).toString(16)).slice(-6)},HSBToHex:function(hsb){
return this.RGBToHex(this.HSBToRGB(hsb))}},apf.asyncForEach=function(list,async,callback){var i=0,len=list.length


return len?void async(list[i],function handler(err){return err?callback(err):(i++,void(i<len?async(list[i],handler,i):callback(null)))

},i):callback(null,[])},apf.asyncWhile=function(condition,async,callback){var i=0
async(i,function handler(err){return err?callback?callback(err,i):null:(++i,void(condition(i)?async(i,handler):callback&&callback(null,i)))

})},apf.asyncMap=function(list,mapper,callback){var i=0,len=list.length
if(!len)return callback(null,[])
var map=[]
async(list[i],function handler(err,value){return err?callback(err):(map[i]=value,i++,void(i<len?async(list[i],handler):callback(null,map)))

})},apf.asyncChain=function(funcs){function next(){var f=funcs[i++]
i==len?f():f(next)}var i=0,len=funcs.length
next()},apf.NUMBER=1,apf.BOOLEAN=2,apf.STRING=3,apf.ARRAY=4,apf.DATE=5,apf.REGEXP=6,apf.FUNCTION=7,defineProp(Array.prototype,"dataType",apf.ARRAY),
defineProp(Number.prototype,"dataType",apf.NUMBER),defineProp(Date.prototype,"dataType",apf.DATE),defineProp(Boolean.prototype,"dataType",apf.BOOLEAN),
defineProp(String.prototype,"dataType",apf.STRING),defineProp(RegExp.prototype,"dataType",apf.REGEXP),
defineProp(Function.prototype,"dataType",apf.FUNCTION),defineProp(Function.prototype,"extend",function(){
return apf.extend.apply(this,[this].concat(Array.prototype.slice.call(arguments))),this}),defineProp(Function.prototype,"bindWithEvent",function(){
var __method=this,args=Array.prototype.slice.call(arguments),o=args.shift()
args.shift()
return function(event){return event||(event=window.event),__method.apply(o,[event].concat(args).concat(Array.prototype.slice.call(arguments)))

}}),defineProp(Array.prototype,"copy",function(){for(var ar=[],i=0,j=this.length;i<j;i++)ar[i]=this[i]&&this[i].copy?this[i].copy():this[i]


return ar}),defineProp(Array.prototype,"merge",function(){for(var i=0,k=arguments.length;i<k;i++)for(var j=0,l=arguments[i].length;j<l;j++)this.push(arguments[i][j])

}),defineProp(Array.prototype,"arrayAdd",function(){for(var s=this.copy(),i=0,k=arguments.length;i<k;i++)for(var j=0,l=s.length;j<l;j++)s[j]+=arguments[i][j]


return s}),defineProp(Array.prototype,"equals",function(obj){for(var i=0,j=this.length;i<j;i++)if(this[i]!=obj[i])return!1


return!0}),defineProp(Array.prototype,"makeUnique",function(){for(var out=[],seen=new Set,i=this.length;i--;)seen.has(this[i])||(out[out.length]=this[i],
seen.add(this[i]))
return out}),defineProp(Array.prototype,"contains",function(obj,from){return this.indexOf(obj,from)!=-1

}),defineProp(Array.prototype,"pushUnique",function(){for(var item,i=0,l=arguments.length;i<l;++i)item=arguments[i],
this.indexOf(item)==-1&&this.push(item)
return this}),defineProp(Array.prototype,"each",function(fn){for(var i=0,l=this.length;i<l&&fn.call(this,this[i],i,this)!==!1;i++);
return this}),defineProp(Array.prototype,"remove",function(obj){for(var i=this.length-1;i>=0;i--)this[i]==obj&&this.splice(i,1)


return this}),defineProp(Array.prototype,"removeIndex",function(i){return this.length?this.splice(i,1):null

}),defineProp(Array.prototype,"insertIndex",function(obj,i){this.splice(i,0,obj)}),defineProp(Array.prototype,"invert",Array.prototype.reverse),
Number.prototype.toPrettyDigit=Number.prototype.toPrettyDigit||function(){var n=this.toString()
return 1==n.length?"0"+n:n},String.prototype.uCaseFirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)

},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/\s+$/,"").replace(/^\s+/,"")

}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/,"")}),
String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/,"")}),String.prototype.repeat||(String.prototype.repeat=function(times){
return Array(times+1).join(this)}),String.prototype.truncate=function(nr,ellipsis){return this.length>=nr?this.substring(0,nr-(ellipsis?4:1))+(ellipsis?"...":""):this

},String.prototype.pad=function(len,pad,dir){return dir?(this+Array(len).join(pad)).slice(0,len):(Array(len).join(pad)+this).slice(-len)

},apf.PAD_LEFT=!1,apf.PAD_RIGHT=!0,String.prototype.splitSafe=function(separator,limit,bLowerCase){return(bLowerCase&&this.toLowerCase()||this).replace(/(?:^\s+|\n|\s+$)/g,"").split(new RegExp("[\\s ]*"+separator+"[\\s ]*","g"),limit||999)

},String.prototype.sprintf=function(){for(var str=this.toString(),i=0,inx=str.indexOf("%s");inx>=0;){
var replacement=arguments[i++]||" "
str=str.substr(0,inx)+replacement+str.substr(inx+2),inx=str.indexOf("%s")}return str},Date.now||(Date.now=function(){
return+new Date}),apf.hotkeys={},function(){function register(hotkey,handler,remove){for(var key,hashId=0,keys=hotkey.splitSafe("\\-",null,!0),i=0,l=keys.length;i<l;++i)keyMods[keys[i]]?hashId|=keyMods[keys[i]]:key=keys[i]||"-"


key&&(_self.$keys[hashId]||(_self.$keys[hashId]={}),remove?handler==_self.$keys[hashId][key]&&(_self.$keys[hashId][key]=null):_self.$keys[hashId][key]=handler)

}function toMacNotation(hotkey,bHtml){var t,str=hotkey.trim()
if(!str)return""
for(var keys=str.splitSafe("\\-+"),i=0,l=keys.length;i<l;++i)keys[i]||(keys[i]="-"),(t=(bHtml?macUnicodeHtml:macUnicode)[keys[i].toLowerCase()])&&(keys[i]=t)


return keys.join(" ")}var keyMods={ctrl:1,alt:2,option:2,shift:4,meta:8,command:8}
this.keyNames={8:"Backspace",9:"Tab",13:"Enter",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",
36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",107:"+",112:"F1",113:"F2",114:"F3",
115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",188:",",219:"[",221:"]"
}
var macUnicode={meta:"\u2318",command:"\u2318",alt:"\u2325",option:"\u2325",shift:"\u21e7",ctrl:"\u2303"},macUnicodeHtml={meta:"&#8984;",
command:"&#8984;",alt:"&#8997;",option:"&#8997;",shift:"&#8679;",ctrl:"&#2303;"}
this.$keys={}
var _self=this
apf.registerHotkey=this.register=function(hotkey,handler){for(var parts=hotkey.split("|"),i=0,l=parts.length;i<l;++i)register(parts[i],handler)

},this.$exec=function(eInfo){var handler,hashId=0|(eInfo.ctrlKey?1:0)|(eInfo.altKey?2:0)|(eInfo.shiftKey?4:0)|(eInfo.metaKey?8:0),code=eInfo.keyCode,key=_self.keyNames[code]||(code&&code>46&&91!=code?String.fromCharCode(code):null)


if((hashId||key&&key.match(/^F\d{1,2}$/))&&key)return _self.$keys[hashId]&&(handler=_self.$keys[hashId][key.toLowerCase()])&&(handler(eInfo.htmlEvent),
eInfo.returnValue=!1,apf.queue.empty()),eInfo.returnValue},apf.removeHotkey=this.remove=this.unregister=function(hotkey,handler){
for(var parts=hotkey.split("|"),i=0,l=parts.length;i<l;++i)register(parts[i],handler,!0)},this.toMacNotation=function(hotkey,bHtml){
for(var parts=hotkey.split("|"),i=0,l=parts.length,res=[];i<l;++i)res.push(toMacNotation(parts[i],bHtml))


return res.join(" | ")},apf.addEventListener("keydown",function(eInfo){var e=eInfo.htmlEvent
if(_self.$exec(eInfo)===!1||eInfo.returnValue===!1)return apf.stopEvent(e),!1})}.call(apf.hotkeys),apf.nameserver={
lookup:{},add:function(type,item){return this.lookup[type]||(this.lookup[type]=[]),this.lookup[type].push(item)-1

},register:function(type,id,item){if(this.lookup[type]||(this.lookup[type]={}),this.waiting[id]){for(var list=this.waiting[id],i=0;i<list.length;i++)list[i]()


delete this.waiting[id]}return this.lookup[type][id]=item},waiting:{},waitFor:function(name,callback){
(this.waiting[name]||(this.waiting[name]=[])).push(callback)},remove:function(type,item){var list=this.lookup[type]


if(list)for(var prop in list)list[prop]==item&&delete list[prop]},get:function(type,id){return this.lookup[type]?this.lookup[type][id]:null

},getAll:function(type){var name,arr=[],l=this.lookup[type]
if(!l)return arr
if(l.dataType==apf.ARRAY)for(var i=0;i<l.length;i++)arr.push(l[i])
else for(name in l)arr.push(l[name])
return arr},getAllNames:function(type){var name,arr=[]
for(name in this.lookup[type])parseInt(name)!=name&&arr.push(name)
return arr}},apf.plane={$set:[],$lookup:{},$find:function(id){if(this.$lookup[id])return this.$lookup[id]


var item=this.$set.pop()
return item||(item=this.$factory()),this.$lookup[id]=item,item},get:function(options){return this.$find(options&&options.protect||"default")

},show:function(o,reAppend,copyCursor,useRealSize,options){this.options=options||{}
var item=this.$find(options&&options.protect||"default")
item.show(o,reAppend,copyCursor,useRealSize,options)},hide:function(protect,noAnim){var item=this.$lookup[protect||"default"]


item&&(item.hide(noAnim),delete this.$lookup[protect||"default"],this.$set.push(item))},$factory:function(){
function getCover(){var obj=document.createElement("DIV")
return obj}function createCover(){var cover=document.body.appendChild(getCover())
return _self.options.customCover||(cover.style.background=spacerPath),cover.style.position="fixed",cover.style.left=0,
cover.style.top=0,cover.host=!1,cover}var _self=this,spacerPath="url("+(apf.skins.skins["default"]?apf.skins.skins["default"].mediaPath+"spacer.gif":"images/spacer.gif")+")",plane=createCover()


return{host:this,plane:plane,lastCursor:null,lastCoverType:"default",show:function(o,reAppend,copyCursor,useRealSize,options){
var plane,coverType=options&&options.customCover?"custom":"default"
"custom"!=coverType&&this.lastCoverType==coverType||(this.plane=createCover()),plane=this.plane,options&&options.customCover||(this.plane.style.background=options&&options.color||spacerPath),
this.animate=options&&options.animate,this.protect=options&&options.protect,this.protect&&apf.setProperty("planes",(apf.planes||0)+1),
o&&(this.current=o,reAppend&&(this.$originalPlace=[o.parentNode,o.nextSibling],this.plane.appendChild(o))),
options&&options.zIndex&&apf.window.zManager.set(options&&options.zClass||"plane",this.plane,!reAppend&&o),
useRealSize=apf.isIE
plane.parentNode==document.body?useRealSize?document.documentElement.offsetWidth:apf.getWindowWidth():plane.parentNode.offsetWidth,
plane.parentNode==document.body?useRealSize?document.documentElement.offsetHeight:apf.getWindowHeight():plane.parentNode.offsetHeight


copyCursor&&(null===this.lastCursor&&(this.lastCursor=document.body.style.cursor),document.body.style.cursor=apf.getStyle(o,"cursor")),
this.plane.style.display="block"
var toOpacity=parseFloat(options&&options.opacity)||1
if(this.animate){var _self=this
this.plane.style.opacity=0,setTimeout(function(){apf.tween.single(_self.plane,{steps:5,interval:10,type:"fade",
from:0,to:toOpacity})},100)}else this.plane.style.opacity=toOpacity
apf.getDiff(plane)
return this.plane.style.width="100%",this.plane.style.height="100%",this.lastCoverType=options&&options.customCover?"custom":"default",
plane},hide:function(noAnim){this.protect&&apf.setProperty("planes",apf.planes-1)
var isChild
try{isChild=apf.isChildOf(this.plane,document.activeElement)}catch(ex){isChild=!1}if(this.current&&this.current.parentNode==this.plane&&this.$originalPlace[0].insertBefore(this.current,this.$originalPlace[1]),
this.animate&&!noAnim){var _self=this
setTimeout(function(){apf.tween.single(_self.plane,{steps:5,interval:10,type:"fade",from:apf.getStyle(_self.plane,"opacity"),
to:0,onfinish:function(){_self.plane.style.display="none"}})},100)}else this.plane.style.opacity=0,this.current&&apf.window.zManager.clear(this.plane,this.current),
this.plane.style.display="none"
return isChild&&apf.document.activeElement&&(document.activeElement.focus(),apf.document.activeElement.$focus()),
this.current=null,null!==this.lastCursor&&(document.body.style.cursor=this.lastCursor,this.lastCursor=null),
this.plane}}}},apf.setStyleRule=function(name,type,value,stylesheet,win){var rule=findCssRule(name,stylesheet,win)


return rule&&(value.indexOf("!important")>-1?rule.style.cssText=type+":"+value:(type=type.replace(/-(\w)/g,function(_,a){
return a.toUpperCase()}),rule.style[type]=value)),!!rule},apf.removeStyleRule=function(name,stylesheet,win){
var rule=findCssRule(name,stylesheet,win)
if(rule){var i=Array.prototype.indexOf.call(rule.parentStyleSheet.cssRules,rule)
i!=-1&&rule.parentStyleSheet.deleteRule(i)}return!!rule},apf.getStyleRule=function(name,type,stylesheet,win){
var rule=findCssRule(name,stylesheet,win)
return!!rule&&rule.style[type]},apf.setStyleClass=function(oHtml,className,exclusion,userAction){if(!(!oHtml||userAction&&this.disabled)){
className&&(exclusion?exclusion[exclusion.length]=className:exclusion=[className])
var re=new RegExp("(^| +)(?:"+(exclusion?exclusion.join("|"):"")+")","gi")
return null!=oHtml.className?oHtml.className=oHtml.className.replace(re," ")+(className?" "+className:""):oHtml.setAttribute("class",(oHtml.getAttribute("class")||"").replace(re," ")+(className?" "+className:"")),
oHtml}},apf.importCssString=function(cssString,doc,media){doc=doc||document
var htmlNode=doc.getElementsByTagName("head")[0],style=doc.createElement("style")
style.appendChild(doc.createTextNode(cssString)),media&&style.setAttribute("media",media),htmlNode.appendChild(style)

},apf.getStyleRecur=function(el,prop){var value=apf.hasComputedStyle?document.defaultView.getComputedStyle(el,"").getPropertyValue(prop.replace(/([A-Z])/g,function(m,m1){
return"-"+m1.toLowerCase()})):el.currentStyle[prop]
return value&&"transparent"!=value&&"inherit"!=value||!el.parentNode||1!=el.parentNode.nodeType?value:this.getStyleRecur(el.parentNode,prop)

},apf.importStylesheet=function(def,win,stylesheet){if(def.length){if(!stylesheet){for(var re=new RegExp("^"+document.domain,"g"),doc=(win||window).document,index=document.styleSheets.length-1;index>=0&&(doc.styleSheets[index].href&&!doc.styleSheets[index].href.match(re));index--);
stylesheet=doc.styleSheets[index]}stylesheet||(stylesheet=apf.createStylesheet(win))
for(var i=0;i<def.length;i++)if(def[i][1]){var rule=def[i][0]+" {"+def[i][1]+"}"
try{stylesheet.insertRule(rule,0)}catch(e){stylesheet=new StyleSheet,stylesheet.insertRule(rule,0)}}}
},apf.createStylesheet=function(win){var doc=(win||window).document
if(doc.createStyleSheet)return doc.createStyleSheet()
var elem=doc.createElement("style")
return elem.type="text/css",doc.getElementsByTagName("head")[0].appendChild(elem),elem.sheet},apf.isInRect=function(oHtml,x,y){
var pos=this.getAbsolutePosition(oHtml)
return!(x<pos[0]||y<pos[1]||x>oHtml.offsetWidth+pos[0]-10||y>oHtml.offsetHeight+pos[1]-10)},apf.getOverflowParent=function(o){
for(o=o.offsetParent;o&&("hidden"!=this.getStyle(o,"overflow")||"absolute|relative".indexOf(this.getStyle(o,"position"))==-1);)o=o.offsetParent


return o||document.documentElement},apf.getPositionedParent=function(o){for(o=o.offsetParent;o&&"body"!=o.tagName.toLowerCase()&&"absolute|relative".indexOf(this.getStyle(o,"position"))==-1;)o=o.offsetParent


return o||document.documentElement},apf.getAbsolutePosition=function(o,refParent,inclSelf){if(o==document.body)return[o.offsetLeft+(parseFloat(apf.getStyle(o,"marginLeft"))||0),+(o.scrollLeft||0),o.offsetTop+(parseFloat(apf.getStyle(o,"marginTop"))||0)+(o.scrollTop||0)]


var box=o.getBoundingClientRect(),top=box.top,left=box.left
if(refParent&&refParent!=document.body){var pos=apf.getAbsolutePosition(refParent,null,!0)
top-=pos[1],left-=pos[0]}return left+=(refParent||document.body).scrollLeft||document.documentElement.scrollLeft||0,
top+=(refParent||document.body).scrollTop||document.documentElement.scrollTop||0,inclSelf&&!refParent&&(left+=parseInt(apf.getStyle(o,"borderLeftWidth"))||0,
top+=parseInt(apf.getStyle(o,"borderTopWidth"))||0),[left,top]},apf.getHorBorders=function(oHtml){return Math.max(0,(parseInt(apf.getStyle(oHtml,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(oHtml,"borderRightWidth"))||0))

},apf.getVerBorders=function(oHtml){return Math.max(0,(parseInt(apf.getStyle(oHtml,"borderTopWidth"))||0)+(parseInt(apf.getStyle(oHtml,"borderBottomWidth"))||0))

},apf.getWidthDiff=function(oHtml){return apf.hasFlexibleBox&&"content-box"!=apf.getStyle(oHtml,apf.CSSPREFIX+"BoxSizing")?0:Math.max(0,(parseInt(apf.getStyle(oHtml,"paddingLeft"))||0)+(parseInt(apf.getStyle(oHtml,"paddingRight"))||0)+(parseInt(apf.getStyle(oHtml,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(oHtml,"borderRightWidth"))||0))

},apf.getHeightDiff=function(oHtml){return apf.hasFlexibleBox&&"content-box"!=apf.getStyle(oHtml,apf.CSSPREFIX+"BoxSizing")?0:Math.max(0,(parseInt(apf.getStyle(oHtml,"paddingTop"))||0)+(parseInt(apf.getStyle(oHtml,"paddingBottom"))||0)+(parseInt(apf.getStyle(oHtml,"borderTopWidth"))||0)+(parseInt(apf.getStyle(oHtml,"borderBottomWidth"))||0))

},apf.getDiff=function(oHtml){return apf.hasFlexibleBox&&"content-box"!=apf.getStyle(oHtml,apf.CSSPREFIX+"BoxSizing")?[0,0]:[Math.max(0,(parseInt(apf.getStyle(oHtml,"paddingLeft"))||0)+(parseInt(apf.getStyle(oHtml,"paddingRight"))||0)+(parseInt(apf.getStyle(oHtml,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(oHtml,"borderRightWidth"))||0)),Math.max(0,(parseInt(apf.getStyle(oHtml,"paddingTop"))||0)+(parseInt(apf.getStyle(oHtml,"paddingBottom"))||0)+(parseInt(apf.getStyle(oHtml,"borderTopWidth"))||0)+(parseInt(apf.getStyle(oHtml,"borderBottomWidth"))||0))]

},apf.getMargin=function(oHtml){return[(parseInt(apf.getStyle(oHtml,"marginLeft"))||0)+(parseInt(apf.getStyle(oHtml,"marginRight"))||0),(parseInt(apf.getStyle(oHtml,"marginTop"))||0)+(parseInt(apf.getStyle(oHtml,"marginBottom"))||0)]

},apf.getHtmlInnerWidth=function(oHtml){return oHtml.offsetWidth-(parseInt(apf.getStyle(oHtml,"borderLeftWidth"))||0)-(parseInt(apf.getStyle(oHtml,"borderRightWidth"))||0)

},apf.getHtmlInnerHeight=function(oHtml){return oHtml.offsetHeight-(parseInt(apf.getStyle(oHtml,"borderTopWidth"))||0)-(parseInt(apf.getStyle(oHtml,"borderBottomWidth"))||0)

},apf.isCharacter=function(charCode){return(charCode<112||charCode>122)&&(32==charCode||charCode>42||8==charCode)

},apf.K=function(){},apf.isNumber=function(value){return parseFloat(value)==value},apf.isArray=function(value){
return"[object Array]"===Object.prototype.toString.call(value)},apf.isTrue=function(c){return c===!0||"true"===c||"on"===c||"number"==typeof c&&c>0||"1"===c

},apf.isFalse=function(c){return c===!1||"false"===c||"off"===c||0===c||"0"===c},apf.isNot=function(c){
return!c&&"string"!=typeof c&&0!==c||"number"==typeof c&&!isFinite(c)},apf.cancelBubble=function(e,o){
e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,o&&o.$ext&&o.$ext["on"+(e.type||e.name)]&&o.$ext["on"+(e.type||e.name)](e),
apf.window.$mousedown(e)},apf.destroyHtmlNode=function(element){element&&element.parentNode&&element.parentNode.removeChild(element)

},apf.getRules=function(node){for(var rules={},w=node.firstChild;w;w=w.nextSibling)1==w.nodeType&&(rules[w.localName]||(rules[w.localName]=[]),
rules[w.localName].push(w))
return rules},apf.isCoord=function(n){return n||0===n},apf.getCoord=function(n,other){return n||0===n?n:other

},apf.getBox=function(value,base){if(base||(base=0),null==value||!parseInt(value)&&0!=parseInt(value))return[0,0,0,0]


for(var x=String(value).splitSafe(" "),i=0;i<x.length;i++)x[i]=parseInt(x[i])||0
switch(x.length){case 1:x[1]=x[0],x[2]=x[0],x[3]=x[0]
break
case 2:x[2]=x[0],x[3]=x[1]
break
case 3:x[3]=x[1]}return x},apf.getNode=function(data,tree){var nc=0
if(null!=data)for(var i=0;i<data.childNodes.length;i++)if(1==data.childNodes[i].nodeType){if(nc==tree[0])return data=data.childNodes[i],
tree.length>1&&(tree.shift(),data=this.getNode(data,tree)),data
nc++}return null},apf.getFirstElement=function(xmlNode){return 1==xmlNode.firstChild.nodeType?xmlNode.firstChild:xmlNode.firstChild.nextSibling

},apf.getLastElement=function(xmlNode){return 1==xmlNode.lastChild.nodeType?xmlNode.lastChild:xmlNode.lastChild.previousSibling

},apf.visibilitymanager=function(){this.check=function(amlNode,type,callback){function cleanup(setInsertion){
for(var p=amlNode;p;)p.removeEventListener("prop.visible",check),p.removeEventListener("DOMNodeRemoved",remove),
p.removeEventListener("DOMNodeRemovedFromDocument",remove),setInsertion&&p.addEventListener("DOMNodeInserted",add),
p=p.parentNode||p.$parentNode
delete amlNode.$visibleCheck[type]}function check(e){(amlNode.$ext.offsetHeight||amlNode.$ext.offsetWidth)&&(callback.call(amlNode),
cleanup())}function remove(e){e.currentTarget==this&&cleanup("DOMNodeRemoved"==e.name)}function add(){
for(var p=amlNode;p;)p.addEventListener("prop.visible",check),p.addEventListener("DOMNodeRemoved",remove),
p.addEventListener("DOMNodeRemovedFromDocument",remove),p.removeEventListener("DOMNodeInserted",add),
p=p.parentNode||p.$parentNode
amlNode.$visibleCheck[type]=!0}if(amlNode.$ext.offsetHeight||amlNode.$ext.offsetWidth)return!0
if(amlNode.$visibleCheck){if(amlNode.$visibleCheck[type])return}else amlNode.$visibleCheck={}
return add(),!1}},apf.isChildOf=function(pNode,childnode,orItself){if(!pNode||!childnode)return!1
if(2==childnode.nodeType&&(childnode=childnode.ownerElement),orItself&&pNode==childnode)return!0
for(var loopnode=childnode.parentNode;loopnode;){if(loopnode==pNode)return!0
loopnode=loopnode.parentNode}return!1}
var HTML_ENTITY_MAP={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;"},HTML_CHARACTERS_EXPRESSION=/[&"'<>]/gm


apf.escapeHTML=apf.escapeXML=function(text){return text&&text.replace(HTML_CHARACTERS_EXPRESSION,function(c){
return HTML_ENTITY_MAP[c]||c})},apf.isOnlyChild=function(node,nodeType){if(!node||!node.parentNode||nodeType&&nodeType.indexOf(node.nodeType)==-1)return!1


var i,l,cnode,nodes=node.parentNode.childNodes
for(i=0,l=nodes.length;i<l;i++){if(cnode=nodes[i],1==cnode.nodeType&&cnode!=node)return!1
if(3==cnode.nodeType&&!cnode.nodeValue.trim())return!1}return!0},apf.getChildNumber=function(node,fromList){
if(!node)return-1
var p=node.parentNode,j=0
if(!p)return-1
if(fromList||(fromList=p.childNodes),fromList.indexOf){var idx=fromList.indexOf(node)
return idx==-1?fromList.length:idx}for(var i=0,l=fromList.length;i<l;i++){if(fromList[i]==node)return j


j++}return-1},apf.setNodeValue=function(xmlNode,nodeValue){if(xmlNode)if(1==xmlNode.nodeType)xmlNode.firstChild||xmlNode.appendChild(xmlNode.ownerDocument.createTextNode("")),
xmlNode.firstChild.nodeValue=apf.isNot(nodeValue)?"":nodeValue
else{var oldValue=xmlNode.nodeValue
xmlNode.nodeValue=null==nodeValue?"":String(nodeValue),xmlNode.$triggerUpdate&&xmlNode.$triggerUpdate(null,oldValue)

}},apf.queryNodes=function(contextNode,sExpr){return contextNode.selectNodes(sExpr)},apf.queryNode=function(contextNode,sExpr){
return contextNode.selectSingleNode(sExpr)},apf.queryValue=function(xmlNode,xpath){return xmlNode?2==xmlNode.nodeType?xmlNode.nodeValue:xpath&&(xmlNode=apf.queryNode(xmlNode,xpath),
!xmlNode)?"":1==xmlNode.nodeType?xmlNode.firstChild?xmlNode.firstChild.nodeValue:"":xmlNode.nodeValue:""

},apf.queryValues=function(xmlNode,xpath){var out=[]
if(!xmlNode)return out
var nodes=apf.queryNodes(xmlNode,xpath)
if(!nodes.length)return out
for(var i=0;i<nodes.length;i++){var n=nodes[i]
1==n.nodeType&&(n=n.firstChild),out.push(n.nodeValue||"")}return out},apf.getInheritedAttribute=function(xml,attr,func){
var result,avalue
for(1!=xml.nodeType&&(xml=xml.parentNode);xml&&(1!=xml.nodeType||!(result=attr&&((avalue=xml.getAttribute(attr))||"string"==typeof avalue)||func&&func(xml)));)xml=xml.parentNode


return""===avalue?"":!result&&attr&&apf.config?apf.config[attr]:result},apf.getTextNode=function(x){for(var i=0,l=x.childNodes.length;i<l;++i)if(3==x.childNodes[i].nodeType||4==x.childNodes[i].nodeType)return x.childNodes[i]


return!1},apf.getXml=function(strXml,noError,preserveWhiteSpace){return apf.getXmlDom(strXml,noError,preserveWhiteSpace).documentElement

},apf.zmanager=function(){var count={"default":{level:10},plane:{level:1e5},popup:{level:195e3},notifier:{
level:3e5},"popup+":{level:35e4},drag:{level:4e5},print:{level:1e6}}
this.set=function(type,main,companion){main.style.zIndex=count[type].level++,companion&&(companion.$storedZ=companion.style.zIndex,
companion.style.zIndex=count[type].level++)},this.clear=function(main,companion){companion.style.zIndex==parseInt(main.style.zIndex)+1&&(companion.style.zIndex=companion.$storedZ),
companion.$storedZ=void 0}},apf.config=(new apf.Class).$init(),apf.extend(apf.config,{disableRightClick:!1,
allowSelect:!1,allowBlur:!0,autoDisableActions:!0,autoDisable:!1,disableF5:!0,autoHideLoading:!0,disableSpace:!0,
defaultPage:"home",disableBackspace:!0,undokeys:!1,outline:!1,dragOutline:!1,resizeOutline:!1,autoDisableNavKeys:!0,
disableTabbing:!1,resourcePath:null,initdelay:!0,skinset:"default",tags:{},defaults:{},baseurl:"","empty-message":"No items",
"loading-message":"Loading...","offline-message":"You are currently offline.",setDefaults:function(){},
getDefault:function(type,prop){var d=this.defaults[type]
if(d)for(var i=d.length-1;i>=0;i--)if(d[i][0]==prop)return d[i][1]},$handlePropSet:function(name,value){
this[name.replace(/-(\w)/g,function(m,m1){return m1.toUpperCase()})]=this[name]=value,(this.$propHandlers&&this.$propHandlers[name]||apf.GuiElement.propHandlers[name]||apf.K).call(this,value)

},$inheritProperties:{},$propHandlers:{skinset:function(value){this.$amlLoaded&&apf.skins.changeSkinset(value)

},outline:function(value){this.dragOutline=this.resizeOutline=this.outline=apf.isTrue(value)},"drag-outline":function(value){
this.dragOutline=!!value&&apf.isTrue(value)},"resize-outline":function(value){this.resizeOutline=!!value&&!apf.isFalse(value)

}}}),apf.layout={compile:function(oHtml){var l=this.layouts[oHtml.getAttribute("id")]
if(!l)return!1
var root=l.root.copy()
l.layout.compile(root),l.layout.reset()},removeAll:function(aData){aData.children.length=null
var htmlId=this.getHtmlId(aData.pHtml)
this.rules[htmlId]||delete this.qlist[htmlId]},timer:null,qlist:{},dlist:[],$hasQueue:!1,queue:function(oHtml,obj,compile,q){
q||(this.$hasQueue=!0,q=this.qlist)
var id
return(id=this.getHtmlId(oHtml))||(id=apf.setUniqueHtmlId(oHtml)),q[id]?(obj&&q[id][2].push(obj),void(compile&&(q[id][1]=compile))):(q[id]=[oHtml,compile,[obj]],
void(this.timer||(this.timer=apf.setZeroTimeout(function(){apf.layout.processQueue()}))))},processQueue:function(){
var i,id,l,qItem,list
for(i=0;i<this.dlist.length;i++)this.dlist[i].hidden?this.dlist[i].hide():this.dlist[i].show()
do{var qlist=this.qlist
this.qlist={},this.$hasQueue=!1
for(id in qlist){for(qItem=qlist[id],qItem[1]&&apf.layout.compileAlignment(qItem[1]),list=qItem[2],i=0,
l=list.length;i<l;i++)if(list[i]){if(list[i].$amlDestroyed)continue
list[i].$updateLayout()}apf.layout.activateRules(qItem[0])}}while(this.$hasQueue)
apf.hasSingleRszEvent&&apf.layout.forceResize(),this.dlist=[],apf.setZeroTimeout.clearTimeout(this.timer),
this.timer=null},rules:{},onresize:{},getHtmlId:function(oHtml){return oHtml.getAttribute?oHtml.getAttribute("id"):1

},setRules:function(oHtml,id,rules,overwrite){this.getHtmlId(oHtml)||apf.setUniqueHtmlId(oHtml),this.rules[this.getHtmlId(oHtml)]||(this.rules[this.getHtmlId(oHtml)]={})


var ruleset=this.rules[this.getHtmlId(oHtml)][id]
!overwrite&&ruleset?this.rules[this.getHtmlId(oHtml)][id]=rules+"\n"+ruleset:this.rules[this.getHtmlId(oHtml)][id]=rules

},getRules:function(oHtml,id){return id?this.rules[this.getHtmlId(oHtml)][id]:this.rules[this.getHtmlId(oHtml)]

},removeRule:function(oHtml,id){var htmlId=this.getHtmlId(oHtml)
if(this.rules[htmlId]){var ret=this.rules[htmlId][id]||!1
delete this.rules[htmlId][id]
var prop
for(prop in this.rules[htmlId]);if(prop||delete this.rules[htmlId],apf.hasSingleRszEvent)if(this.onresize[htmlId])this.onresize[htmlId]=null
else{for(var p=oHtml.parentNode;p&&1==p.nodeType&&!this.onresize[p.getAttribute("id")];)p=p.parentNode


if(p&&1==p.nodeType){var x=this.onresize[p.getAttribute("id")]
x.children&&delete x.children[htmlId]}}return ret}},activateRules:function(oHtml,no_exec){if(!oHtml){
var prop,obj
for(prop in this.rules)obj=document.getElementById(prop),obj&&!obj.onresize&&this.activateRules(obj)
return void(apf.hasSingleRszEvent&&apf.layout.$onresize&&apf.layout.$onresize())}var rsz,id,rules,strRules=[]


if(apf.hasSingleRszEvent){var htmlId=this.getHtmlId(oHtml)
if(rules=this.rules[htmlId],!rules)return!1
for(id in rules)"string"==typeof rules[id]&&strRules.push(rules[id])
for(var p=oHtml.parentNode;p&&1==p.nodeType&&!this.onresize[p.getAttribute("id")];)p=p.parentNode
var f=new Function(strRules.join("\n"))
if(this.onresize[htmlId]&&(f.children=this.onresize[htmlId].children),p&&1==p.nodeType){var x=this.onresize[p.getAttribute("id")]


this.onresize[htmlId]=(x.children||(x.children={}))[htmlId]=f}else this.onresize[htmlId]=f
if(no_exec||f(),!apf.layout.$onresize){var rsz=function(f){try{var c=[]
for(var name in f)f[name]&&c.unshift(f[name])
for(var i=0;i<c.length;i++)c[i](),c[i].children&&rsz(c[i].children)}catch(e){}}
apf.addListener(window,"resize",apf.layout.$onresize=function(){apf.config.resize!==!1&&rsz(apf.layout.onresize)

})}}else{if(rules=this.rules[this.getHtmlId(oHtml)],!rules)return oHtml.onresize=null,!1
for(id in rules)"string"==typeof rules[id]&&strRules.push(rules[id])
rsz=new Function(strRules.join("\n")),oHtml.onresize=rsz,no_exec||rsz()}},forceResize:function(oHtml,force){
if(force){if(apf.hasSingleRszEvent)return apf.layout.$onresize&&apf.layout.$onresize()
var rsz=oHtml.onresize
rsz&&rsz()
for(var els=oHtml.getElementsByTagName("*"),i=0,l=els.length;i<l;i++)els[i]&&els[i].onresize&&els[i].onresize()

}},paused:{},pause:function(oHtml,replaceFunc){if(apf.hasSingleRszEvent){var htmlId=this.getHtmlId(oHtml)


this.paused[htmlId]=this.onresize[htmlId]||!0,replaceFunc?(this.onresize[htmlId]=replaceFunc,this.onresize[htmlId].children=this.paused[htmlId].children,
replaceFunc()):delete this.onresize[htmlId]}else this.paused[this.getHtmlId(oHtml)]=oHtml.onresize||!0,
replaceFunc?(oHtml.onresize=replaceFunc,replaceFunc()):oHtml.onresize=null},play:function(oHtml){if(this.paused[this.getHtmlId(oHtml)])if(apf.hasSingleRszEvent){
var htmlId=this.getHtmlId(oHtml),oldFunc=this.paused[htmlId]
"function"==typeof oldFunc?this.onresize[htmlId]=oldFunc:delete this.onresize[htmlId],apf.layout.$onresize&&apf.layout.$onresize(),
this.paused[this.getHtmlId(oHtml)]=null}else{var oldFunc=this.paused[this.getHtmlId(oHtml)]
"function"==typeof oldFunc?(oHtml.onresize=oldFunc,oldFunc()):oHtml.onresize=null,this.paused[this.getHtmlId(oHtml)]=null

}}},apf.getWindowWidth=function(){return window.innerWidth},apf.getWindowHeight=function(){return window.innerHeight

},apf.setZeroTimeout=window.postMessage?function(){function setZeroTimeout(fn){var id=timeouts.push(fn)


return window.postMessage(messageName,"*"),id}function handleMessage(e){e||(e=event),e.source==window&&e.data==messageName&&(apf.stopPropagation(e),
timeouts.length>0&&(t=timeouts.shift())&&t())}var timeouts=[],messageName="zero-timeout-message"
return setZeroTimeout.clearTimeout=function(id){timeouts[id]=null},apf.addListener(window,"message",handleMessage,!0),
setZeroTimeout}():function(){function setZeroTimeout(){return $setTimeout.apply(null,arguments)}return setZeroTimeout.clearTimeout=function(){
return clearTimeout.apply(null,arguments)},setZeroTimeout}(),apf.queue={q:{},timer:null,add:function(id,f){
this.q[id]=f,this.timer||(this.timer=apf.setZeroTimeout(function(){apf.queue.empty()}))},remove:function(id){
delete this.q[id]},empty:function(prop){apf.setZeroTimeout.clearTimeout(this.timer),this.timer=null,apf.layout&&apf.layout.$hasQueue&&apf.layout.processQueue()


var q=this.q
this.q={}
for(var prop in q){var f=q[prop]
f&&(delete q[prop],f())}}},apf.skins={skins:{},css:[],events:["onmousemove","onmousedown","onmouseup","onmouseout","onclick","ondragcopy","ondragstart","ondblclick"],
Init:function(xmlNode,refNode,path){var name=(refNode?refNode.getAttribute("id"):null)||xmlNode.getAttribute("id"),base=(refNode?(refNode.getAttribute("src")||"").match(/\//)||path:"")?(path||refNode.getAttribute("src")).replace(/\/[^\/]*$/,"")+"/":"",mediaPath=null,iconPath=null


mediaPath=xmlNode.getAttribute("media-path"),null!==mediaPath?mediaPath=apf.getAbsolutePath(base||apf.hostPath,mediaPath):refNode&&(mediaPath=refNode.getAttribute("media-path"),
mediaPath=null!==mediaPath?apf.getAbsolutePath(apf.hostPath,mediaPath):apf.getAbsolutePath(base||apf.hostPath,"images/")),
iconPath=xmlNode.getAttribute("icon-path"),null!==iconPath?iconPath=apf.getAbsolutePath(base||apf.hostPath,iconPath):refNode&&(iconPath=refNode.getAttribute("icon-path"),
iconPath=null!==iconPath?apf.getAbsolutePath(apf.hostPath,iconPath):apf.getAbsolutePath(base||apf.hostPath,"icons/")),
name||(name="default"),xmlNode.getAttribute("id")&&(document.body.className+=" "+xmlNode.getAttribute("id"))


var names=name.split("|")
if(name=names[0],(!this.skins[name]||"default"==name)&&(this.skins[name]={base:base,name:name,iconPath:iconPath,
mediaPath:mediaPath,templates:{},originals:{},xml:xmlNode},names.length>1))for(var i=0;i<names.length;i++)this.skins[names[i]]=this.skins[name]


this.skins["default"]||this.$first!=refNode||(this.skins["default"]=this.skins[name])
for(var nodes=xmlNode.childNodes,i=nodes.length-1;i>=0;i--)if(1==nodes[i].nodeType){var htmlNode=xmlToHtml(nodes[i])


this.skins[name].templates[htmlNode.getAttribute("name")]=htmlNode,nodes[i].ownerDocument&&this.importSkinDef(nodes[i],base,name,htmlNode)

}this.purgeCss(mediaPath,iconPath)},importSkinDef:function(xmlNode,basepath,name,htmlNode){var i,l,nodes=$xmlns(xmlNode,"style",apf.ns.aml),tnode,node


for(i=0,l=nodes.length;i<l;i++){node=nodes[i]
var test=!0
if(node.getAttribute("condition"))try{test=eval(node.getAttribute("condition"))}catch(e){test=!1}if(test)for(tnode=node.firstChild;tnode;)this.css.push(tnode.nodeValue),
tnode=tnode.nextSibling
node.remove()}nodes=$xmlns(xmlNode,"alias",apf.ns.apf)
var t=this.skins[name].templates
for(i=0;i<nodes.length;i++)nodes[i].firstChild&&(t[nodes[i].firstChild.nodeValue.toLowerCase()]=htmlNode||xmlNode)

},loadedCss:"",purgeCss:function(imagepath,iconpath){if(this.css.length){var cssString=this.css.join("\n").replace(/images\//g,imagepath).replace(/icons\//g,iconpath)


apf.preProcessCSS(cssString),this.css=[]}},setSkinPaths:function(skinName,amlNode){skinName=skinName.split(":")


var name=skinName[0]
skinName[1]
amlNode.iconPath=this.skins[name].iconPath,amlNode.mediaPath=this.skins[name].mediaPath},getTemplate:function(skinName,noError){
skinName=skinName.split(":")
var name=skinName[0],type=skinName[1]
if(!this.skins[name])return!1
if(!this.skins[name].templates[type])return!1
var skin=this.skins[name].templates[type],originals=this.skins[name].originals[type]
if(!originals){originals=this.skins[name].originals[type]={}
for(var nodes=$xmlns(skin,"presentation",apf.ns.aml)[0].childNodes,i=0;i<nodes.length;i++)1==nodes[i].nodeType&&(originals[nodes[i].localName]=nodes[i])

}return originals},changeSkinset:function(value){for(var node=apf.document.documentElement;node;)if(node&&node.nodeFunc==apf.NODE_VISIBLE&&node.hasFeature(apf.__PRESENTATION__)&&!node.skinset&&(node.$propHandlers.skinset.call(node,value),
node.skinset=null),node.firstChild||node.nextSibling)node=node.firstChild||node.nextSibling
else{do node=node.parentNode
while(node&&!node.nextSibling)
node&&(node=node.nextSibling)}},setIcon:function(oHtml,strQuery,iconPath){if(!strQuery)return void(oHtml.style.backgroundImage="")


if("img"==oHtml.tagName.toLowerCase())return void oHtml.setAttribute("src",strQuery?(iconPath||"")+strQuery:"")


var isQualified=strQuery.match(/^(https?|file):/)
oHtml.style.backgroundImage="url("+(isQualified?"":iconPath||"")+strQuery+")"}},apf.tween=function(apf){
var modules={left:function(oHtml,value){oHtml.style.left=value+PX},right:function(oHtml,value){oHtml.style.left="",
oHtml.style.right=value+PX},top:function(oHtml,value){oHtml.style.top=value+PX},bottom:function(oHtml,value){
oHtml.style.top="",oHtml.style.bottom=value+PX},width:function(oHtml,value,center){oHtml.style.width=value+PX

},height:function(oHtml,value,center){oHtml.style.height=value+PX},scrollTop:function(oHtml,value,center){
oHtml.scrollTop=value},scrollLeft:function(oHtml,value,center){oHtml.scrollLeft=value},paddingTop:function(oHtml,value,center){
oHtml.style.paddingTop=value+"px"},boxFlex:function(oHtml,value,center){oHtml.style[apf.CSS_FLEX_PROP]=value

},boxFlexGrow:function(oHtml,value,center){oHtml.style[apf.CSS_FLEX_PROP+"-grow"]=value},"height-rsz":function(oHtml,value,center){
oHtml.style.height=value+PX,apf.hasSingleResizeEvent&&apf.layout.$onresize&&apf.layout.$onresize()},mwidth:function(oHtml,value,info){
var diff=apf.getDiff(oHtml)
oHtml.style.width=value+PX,oHtml.style.marginLeft=-1*(value/2+(parseInt(apf.getStyle(oHtml,"borderLeftWidth"))||diff[0]/2)+(info.margin||0))+PX

},mheight:function(oHtml,value,info){var diff=apf.getDiff(oHtml)
oHtml.style.height=value+PX,oHtml.style.marginTop=-1*value/2-(parseInt(apf.getStyle(oHtml,"borderTopWidth"))||diff[1]/2)+(info.margin||0)+PX

},scrollwidth:function(oHtml,value){oHtml.style.width=value+PX,oHtml.scrollLeft=oHtml.scrollWidth},scrollheight_old:function(oHtml,value){
try{oHtml.style.height=value+PX,oHtml.scrollTop=oHtml.scrollHeight}catch(e){alert(value)}},scrollheight:function(oHtml,value,info){
var diff=apf.getHeightDiff(oHtml),oInt=info.$int||oHtml
oHtml.style.height=Math.max(value+(info.diff||0),0)+PX,oInt.scrollTop=oInt.scrollHeight-oInt.offsetHeight-diff+(info.diff||0)-(apf.isGecko?16:0)

},scrolltop:function(oHtml,value){oHtml.style.height=value+PX,oHtml.style.top=-1*value-2+PX,oHtml.scrollTop=0

},clipright:function(oHtml,value,center){oHtml.style.clip="rect(auto, auto, auto, "+value+"px)",oHtml.style.marginLeft=-1*value+PX

},fade:function(oHtml,value){oHtml.style.opacity=value},bgcolor:function(oHtml,value){oHtml.style.backgroundColor=value

},textcolor:function(oHtml,value){oHtml.style.color=value},htmlcss:function(oHtml,value,obj){oHtml.style[obj.type]=value+(obj.needsPx?PX:"")

},transformscale:function(oHtml,value,obj){oHtml.style[obj.type]=SCALEA+parseFloat(value)+SCALEB},transformrotate:function(oHtml,value,obj){
oHtml.style[obj.type]=ROTATEA+parseFloat(value)+ROTATEB},transformvalscale:function(value){return SCALEA+parseFloat(value)+SCALEB

},transformvalrotate:function(value){return ROTATEA+parseFloat(value)+ROTATEB}},ID="id",PX="px",NUM="number",TRANSVAL="transformval",TRANSFORM="transform",SCALE="scale",SCALEA="scale(",ROTATEA="rotate(",SCALEB=")",ROTATEB="deg)",CSSTIMING=["linear","ease-in","ease-out","ease","ease-in-out","cubic-bezier"],CSSPROPS={
left:"left",right:"right",top:"top",bottom:"bottom",width:"width",height:"height",scrollTop:!1,scrollLeft:!1,
mwidth:!1,mheight:!1,scrollwidth:!1,scrollheight:!1,fade:"opacity",opacity:"opacity",bgcolor:"background-color",
textcolor:"color",transform:"transform"},__pow=Math.pow,__round=Math.round,queue={},current=null,setQueue=function(oHtml,stepFunction){
var id=oHtml.getAttribute(ID)
id||(apf.setUniqueHtmlId(oHtml),id=oHtml.getAttribute(ID)),queue[id]||(queue[id]=[]),queue[id].push(stepFunction),
1==queue[id].length&&stepFunction(0)},nextQueue=function(oHtml){var q=queue[oHtml.getAttribute(ID)]
q&&(q.shift(),q.length&&q[0](0))},clearQueue=function(oHtml,bStop){var q=queue[oHtml.getAttribute(ID)]


q&&(bStop&&current&&current.control&&(current.control.stop=!0),q.length=0)},purgeQueue=function(oHtml){
var id=oHtml.getAttribute(ID)
id||(apf.setUniqueHtmlId(oHtml),id=oHtml.getAttribute(ID))
for(var i in queue)i==id&&(queue[i]=[])},calcSteps=function(func,fromValue,toValue,nrOfSteps){var i=0,l=nrOfSteps-1,steps=[fromValue]


for(typeof func==NUM&&(func?1==func?func=apf.tween.easeInCubic:2==func&&(func=apf.tween.easeOutCubic):func=apf.tween.linear),
i=0;i<l;++i)steps.push(func(i/nrOfSteps,fromValue,toValue-fromValue))
return steps.push(toValue),steps},calcColorSteps=function(animtype,fromValue,toValue,nrOfSteps){for(var d2,d1,c=apf.color.colorshex,a=parseInt((c[fromValue]||fromValue).slice(1),16),b=parseInt((c[toValue]||toValue).slice(1),16),i=0,out=[];i<nrOfSteps;i++)d1=i/(nrOfSteps-1),
d2=1-d1,out[out.length]="#"+("000000"+(255&__round((255&a)*d2+(255&b)*d1)|65280&__round((65280&a)*d2+(65280&b)*d1)|16711680&__round((16711680&a)*d2+(16711680&b)*d1)).toString(16)).slice(-6)


return out},single=function(oHtml,info){info=apf.extend({steps:10,interval:5,anim:apf.tween.linear,control:{}
},info),info.steps=Math.ceil(info.steps*apf.animSteps),info.interval=Math.ceil(info.interval*apf.animInterval),
oHtml.nodeFunc>100&&(info.$int=oHtml.$int,oHtml=oHtml.$ext)
try{"fixed|absolute|relative".indexOf(apf.getStyle(oHtml,"position"))==-1&&(oHtml.style.position="relative")

}catch(e){}var useCSSAnim=!1,isTransform=info.type==TRANSFORM
if(info.method=useCSSAnim?info.type:isTransform?modules[TRANSFORM+(info.subType||SCALE)]:modules[info.type]?modules[info.type]:(info.needsPx=needsPix[info.type]||!1)?modules.htmlcss:modules.htmlcss,
useCSSAnim){var type=CSSPROPS[info.type]
if(type===!1)return apf.tween
info.type=type||info.type,isTransform&&(info.subType||(info.subType=SCALE),info.type=apf.supportCSSAnim)


var transform=isTransform?modules[TRANSVAL+(info.subType||SCALE)]:null
return oHtml.style[info.type]=isTransform?transform(info.from):info.from+(needsPix[info.type]?PX:""),
$setTimeout(function(){oHtml.style[info.type]=isTransform?transform(info.to):info.to+(needsPix[info.type]?PX:""),
oHtml.offsetTop,oHtml.style[apf.cssPrefix+"Transition"]=info.type+" "+info.steps*info.interval/1e3+"s "+CSSTIMING[info.anim||0]


var f=function(){info.onfinish&&info.onfinish(oHtml,info.userdata),oHtml.style[apf.cssPrefix+"Transition"]="",
oHtml.removeEventListener(apf.cssAnimEvent,f)}
oHtml.addEventListener(apf.cssAnimEvent,f)}),apf.tween}info.control&&(info.control.state=apf.tween.RUNNING,
info.control.stop=function(){info.control.state=apf.tween.STOPPING,clearQueue(oHtml),info.onstop&&info.onstop(oHtml,info.userdata)

})
var steps=info.color?calcColorSteps(info.anim,info.from,info.to,info.steps):calcSteps(info.anim,parseFloat(info.from),parseFloat(info.to),info.steps),stepFunction=function(step){
if(info.control&&info.control.state)return void(info.control.state=apf.tween.STOPPED)
if(current=info,!info.onbeforeeach||info.onbeforeeach(oHtml,info.userdata)!==!1){try{info.method(oHtml,steps[step],info)

}catch(e){}if(info.oneach&&info.oneach(oHtml,info.userdata),step<info.steps)return $setTimeout(function(){
stepFunction(step+1)},info.interval)
current=null,info.control&&(info.control.state=apf.tween.STOPPED),info.onfinish&&info.onfinish(oHtml,info.userdata),
nextQueue(oHtml)}}
return info.type.indexOf("scroll")>-1&&purgeQueue(oHtml),setQueue(oHtml,stepFunction),apf.tween},multi=function(oHtml,info){
info=apf.extend({steps:10,interval:5,anim:apf.tween.linear,control:{}},info),info.steps=Math.ceil(info.steps*apf.animSteps),
info.interval=Math.ceil(info.interval*apf.animInterval),oHtml.nodeFunc>100&&(info.$int=oHtml.$int,oHtml=oHtml.$ext)


for(var animCSS,isTransform,useCSSAnim=!1,hasCSSAnims=!1,cssDuration=info.steps*info.interval/1e3,cssAnim=CSSTIMING[info.anim||0],steps=[],stepsTo=[],i=0,l=info.tweens.length;i<l;i++){
var data=info.tweens[i]
if(data.oHtml&&data.oHtml.nodeFunc>100&&(data.$int=data.oHtml.$int,data.oHtml=data.oHtml.$ext),animCSS=useCSSAnim&&CSSPROPS[data.type],
isTransform=data.type==TRANSFORM,isTransform&&(data.subType||(data.subType=SCALE),data.type=apf.supportCSSAnim),
data.method=animCSS?data.type:isTransform?modules[TRANSFORM+data.subType]:modules[data.type]?modules[data.type]:(data.needsPx=needsPix[data.type]||!1)?modules.htmlcss:modules.htmlcss,
animCSS){var type=isTransform?data.type:CSSPROPS[data.type]
data.type=type||data.type
var transform=modules[TRANSVAL+data.subType]
oHtml.style[data.type]=isTransform?transform(data.from):data.from+(needsPix[data.type]?PX:""),stepsTo.push([data.type,isTransform?transform(data.to):data.to+(needsPix[data.type]?PX:"")]),
steps.push(data.type+" "+cssDuration+"s "+cssAnim+" 0"),hasCSSAnims=!0}else steps.push(data.color?calcColorSteps(info.anim,data.from,data.to,info.steps):calcSteps(info.anim,parseFloat(data.from),parseFloat(data.to),info.steps))

}if(hasCSSAnims){oHtml.style[apf.cssPrefix+"Transition"]=steps.join(","),oHtml.offsetTop
var count=0,func=function(){count++,count==stepsTo.length&&(info.onfinish&&info.onfinish(oHtml,info.userdata),
oHtml.style[apf.cssPrefix+"Transition"]="",oHtml.removeEventListener(apf.cssAnimEvent,func))}
oHtml.addEventListener(apf.cssAnimEvent,func,!1)
for(var k=0,j=stepsTo.length;k<j;k++)oHtml.style[stepsTo[k][0]]=stepsTo[k][1]
return apf.tween}info.control&&(info.control.state=apf.tween.RUNNING,info.control.stop=function(){info.control.state!=apf.tween.STOPPED&&(info.control.state=apf.tween.STOPPING,
clearQueue(oHtml),info.onstop&&info.onstop(oHtml,info.userdata))})
var tweens=info.tweens,stepFunction=function(step){if(info.control&&info.control.state)return void(info.control.state=apf.tween.STOPPED)


current=info
try{for(var i=0;i<steps.length;i++)tweens[i].method(tweens[i].oHtml||oHtml,steps[i][step],tweens[i])}catch(e){}
return info.oneach&&info.oneach(oHtml,info.userdata),step<info.steps?$setTimeout(function(){stepFunction(step+1)

},info.interval):(current=null,info.control&&(info.control.state=apf.tween.STOPPED),info.onfinish&&info.onfinish(oHtml,info.userdata),
void nextQueue(oHtml))}
return setQueue(oHtml,stepFunction),apf.tween},css=function(oHtml,className,info,remove){(info=info||{}).tweens=[],
oHtml.nodeFunc>100&&(oHtml=oHtml.$ext),remove&&apf.setStyleClass(oHtml,"",[className])
var resetAnim=function(remove,callback){remove?apf.setStyleClass(oHtml,"",[className]):apf.setStyleClass(oHtml,className)


for(var i=0;i<info.tweens.length;i++)"filter"!=info.tweens[i].type&&(oHtml.style[info.tweens[i].type]="")


callback&&callback.apply(this,arguments)},onfinish=info.onfinish,onstop=info.onstop
info.onfinish=function(){resetAnim(remove,onfinish)},info.onstop=function(){resetAnim(!remove,onstop)

}
var result,newvalue,curvalue,j,isColor,style,rules,i,tweens={}
for(i=0;i<document.styleSheets.length;i++){try{rules=document.styleSheets[i].cssRules}catch(e){rules=!1

}if(rules&&rules.length)for(j=rules.length-1;j>=0;j--){var rule=rules[j]
if(rule.style&&(rule.selectorText||"").match("."+className+"$"))for(style in rule.style)if(rule.style[style]&&cssProps.indexOf("|"+style+"|")!=-1){
if("filter"==style){if(!rule.style[style].match(/opacity\=([\d\.]+)/))continue
newvalue=RegExp.$1,result=(apf.getStyleRecur(oHtml,style)||"").match(/opacity\=([\d\.]+)/),curvalue=result?RegExp.$1:100,
isColor=!1,newvalue==curvalue&&(remove?curvalue=100:newvalue=100)}else newvalue=remove&&oHtml.style[style]||rule.style[style],
remove&&(oHtml.style[style]=""),curvalue=apf.getStyleRecur(oHtml,style),isColor=!!style.match(/color/i)


tweens[style]={type:style,from:(isColor?String:parseFloat)(remove?newvalue:curvalue),to:(isColor?String:parseFloat)(remove?curvalue:newvalue),
color:isColor,needsPx:needsPix[style.toLowerCase()]||!1}}}}for(var prop in tweens)info.tweens.push(tweens[prop])


return remove&&apf.setStyleClass(oHtml,className),multi(oHtml,info)},cssRemove=function(oHtml,className,info){
css(oHtml,className,info,!0)},needsPix={left:!0,top:!0,bottom:!0,right:!0,width:!0,height:!0,fontSize:!0,
lineHeight:!0,textIndent:!0,marginLeft:!0,marginTop:!0,marginRight:!0,marginBottom:!0},cssProps="|backgroundColor|backgroundPosition|color|width|filter|height|left|top|bottom|right|fontSize|letterSpacing|lineHeight|textIndent|opacity|paddingLeft|paddingTop|paddingRight|paddingBottom|borderLeftWidth|borderTopWidth|borderRightWidth|borderBottomWidth|borderLeftColor|borderTopColor|borderRightColor|borderBottomColor|marginLeft|marginTop|marginRight|marginBottom|transform|"


return{single:single,multi:multi,css:css,cssRemove:cssRemove,clearQueue:clearQueue,addModule:function(name,func,force){
return"string"!=typeof name||"function"!=typeof func||modules[name]&&!force?this:(modules[name]=func,
this)},NORMAL:0,EASEIN:1,EASEOUT:2,RUNNING:0,STOPPING:1,STOPPED:2,calcColorSteps:calcColorSteps,linear:function(t,x_min,dx){
return dx*t+x_min},easeInQuad:function(t,x_min,dx){return dx*__pow(t,2)+x_min},easeOutQuad:function(t,x_min,dx){
return-dx*t*(t-2)+x_min},easeInOutQuad:function(t,x_min,dx){return(t/=.5)<1?dx/2*t*t+x_min:-dx/2*(--t*(t-2)-1)+x_min

},easeInCubic:function(t,x_min,dx){return dx*__pow(t,3)+x_min},easeOutCubic:function(t,x_min,dx){return dx*(__pow(t-1,3)+1)+x_min

},easeInOutCubic:function(t,x_min,dx){return(t/=.5)<1?dx/2*__pow(t,3)+x_min:dx/2*(__pow(t-2,3)+2)+x_min

},easeInQuart:function(t,x_min,dx){return dx*__pow(t,4)+x_min},easeOutQuart:function(t,x_min,dx){return-dx*(__pow(t-1,4)-1)+x_min

},easeInOutQuart:function(t,x_min,dx){return(t/=.5)<1?dx/2*__pow(t,4)+x_min:-dx/2*(__pow(t-2,4)-2)+x_min

},easeInQuint:function(t,x_min,dx){return dx*__pow(t,5)+x_min},easeOutQuint:function(t,x_min,dx){return dx*(__pow(t-1,5)+1)+x_min

},easeInOutQuint:function(t,x_min,dx){return(t/=.5)<1?dx/2*__pow(t,5)+x_min:dx/2*(__pow(t-2,5)+2)+x_min

},easeInSine:function(t,x_min,dx){return-dx*Math.cos(t*(Math.PI/2))+dx+x_min},easeOutSine:function(t,x_min,dx){
return dx*Math.sin(t*(Math.PI/2))+x_min},easeInOutSine:function(t,x_min,dx){return-dx/2*(Math.cos(Math.PI*t)-1)+x_min

},easeInExpo:function(t,x_min,dx){return 0==t?x_min:dx*__pow(2,10*(t-1))+x_min},easeOutExpo:function(t,x_min,dx){
return 1==t?x_min+dx:dx*(-__pow(2,-10*t)+1)+x_min},easeInOutExpo:function(t,x_min,dx){return 0==t?x_min:1==t?x_min+dx:(t/=.5)<1?dx/2*__pow(2,10*(t-1))+x_min:dx/2*(-__pow(2,-10*--t)+2)+x_min

},easeInCirc:function(t,x_min,dx){return-dx*(Math.sqrt(1-t*t)-1)+x_min},easeOutCirc:function(t,x_min,dx){
return dx*Math.sqrt(1-(t-=1)*t)+x_min},easeInOutCirc:function(t,x_min,dx){return(t/=.5)<1?-dx/2*(Math.sqrt(1-t*t)-1)+x_min:dx/2*(Math.sqrt(1-(t-=2)*t)+1)+x_min

},easeInElastic:function(t,x_min,dx){var s=1.70158,p=.3,a=dx
return 0==t?x_min:1==t?x_min+dx:(!a||a<Math.abs(dx)?(a=dx,s=p/4):s=p/(2*Math.PI)*Math.asin(dx/a),-(a*__pow(2,10*(t-=1))*Math.sin((1*t-s)*(2*Math.PI)/p))+x_min)

},easeOutElastic:function(t,x_min,dx){var s=1.70158,p=.3,a=dx
return 0==t?x_min:1==t?x_min+dx:(a<Math.abs(dx)?(a=dx,s=p/4):s=p/(2*Math.PI)*Math.asin(dx/a),a*__pow(2,-10*t)*Math.sin((t-s)*(2*Math.PI)/p)+dx+x_min)

},easeInOutElastic:function(t,x_min,dx){var s=1.70158,p=0,a=dx
return 0==t?x_min:t/2==2?x_min+dx:(p||(p=.3*1.5),a<Math.abs(dx)?(a=dx,s=p/4):s=p/(2*Math.PI)*Math.asin(dx/a),
t<1?-.5*(a*__pow(2,10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/p))+x_min:a*__pow(2,-10*(t-=1))*Math.sin((t-s)*(2*Math.PI)/p)*.5+dx+x_min)

},easeInBack:function(t,x_min,dx){var s=1.70158
return dx*__pow(t,2)*((s+1)*t-s)+x_min},easeOutBack:function(t,x_min,dx){var s=1.70158
return dx*((t-=1)*t*((s+1)*t+s)+1)+x_min},easeInOutBack:function(t,x_min,dx){var s=1.70158
return t/2<1?dx/2*(t*t*(((s*=1.525)+1)*t-s))+x_min:dx/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+x_min},easeInBounce:function(t,x_min,dx){
return dx-apf.tween.easeOutBounce(1-t,0,dx)+x_min},easeOutBounce:function(t,x_min,dx){return t<1/2.75?dx*(7.5625*t*t)+x_min:t<2/2.75?dx*(7.5625*(t-=1.5/2.75)*t+.75)+x_min:t<2.5/2.75?dx*(7.5625*(t-=2.25/2.75)*t+.9375)+x_min:dx*(7.5625*(t-=2.625/2.75)*t+.984375)+x_min

},easeInOutBounce:function(t,x_min,dx){return t<.5?.5*apf.tween.easeInBounce(2*t,0,dx)+x_min:.5*apf.tween.easeOutBounce(2*t-1,0,dx)+.5*dx+x_min

}}}(apf),apf.AmlNamespace=function(){this.elements={}},apf.AmlNamespace.prototype={setElement:function(tagName,fConstr){
return this.elements[tagName]=fConstr}},apf.aml=new apf.AmlNamespace,apf.setNamespace("http://ajax.org/2005/aml",apf.aml),
apf.__AMLNODE__=16384,apf.AmlNode=function(){this.$init(function(){this.childNodes=[]})},function(){this.$regbase=this.$regbase|apf.__AMLNODE__,
this.NODE_ELEMENT=1,this.NODE_ATTRIBUTE=2,this.NODE_TEXT=3,this.NODE_CDATA_SECTION=4,this.NODE_ENTITY_REFERENCE=5,
this.NODE_ENTITY=6,this.NODE_PROCESSING_INSTRUCTION=7,this.NODE_COMMENT=8,this.NODE_DOCUMENT=9,this.NODE_DOCUMENT_TYPE=10,
this.NODE_DOCUMENT_FRAGMENT=11,this.NODE_NOTATION=12,this.ownerDocument=null,this.nodeValue="",this.namespaceURI="",
this.appendChild=this.insertBefore=function(amlNode,beforeNode,noHtmlDomEdit){function triggerUpdate(){
amlNode.$pHtmlNode=_self.canHaveChildren?_self.$int:document.body
var nextNode=beforeNode
if(!initialAppend&&!noHtmlDomEdit&&amlNode.$ext&&!amlNode.$coreHtml){for(nextNode=beforeNode;nextNode&&!nextNode.$altExt&&!nextNode.$ext;)nextNode=nextNode.nextSibling


amlNode.$pHtmlNode.insertBefore(amlNode.$altExt||amlNode.$ext,nextNode&&(nextNode.$altExt||nextNode.$ext)||null)

}if(amlNode.dispatchEvent("DOMNodeInserted",{$beforeNode:beforeNode,relatedNode:_self,$isMoveWithinParent:isMoveWithinParent,
$oldParentHtmlNode:oldParentHtmlNode,$oldParent:oldParent,bubbles:!0}),initialAppend&&!noHtmlDomEdit&&beforeNode&&amlNode.$ext&&!amlNode.$coreHtml){
for(nextNode=beforeNode;nextNode&&!nextNode.$altExt&&!nextNode.$ext;)nextNode=nextNode.nextSibling
amlNode.$pHtmlNode.insertBefore(amlNode.$altExt||amlNode.$ext,nextNode&&(nextNode.$altExt||nextNode.$ext)||null)

}}if(this.nodeType==this.NODE_DOCUMENT){if(this.childNodes.length)throw new Error(apf.formatErrorString(0,this,"Insertbefore DOM operation","Only one top level element is allowed in an AML document."))


this.documentElement=amlNode}if(amlNode==beforeNode)return amlNode
if(this==amlNode)throw new Error(apf.formatErrorString(0,this,"Insertbefore DOM operation","Cannot append node as a child of itself."))


if(amlNode.nodeType==this.NODE_DOCUMENT_FRAGMENT){for(var nodes=amlNode.childNodes.slice(0),i=0,l=nodes.length;i<l;i++)this.insertBefore(nodes[i],beforeNode)


return amlNode}var isMoveWithinParent=amlNode.parentNode==this,oldParentHtmlNode=amlNode.$pHtmlNode,oldParent=amlNode.parentNode,index=-1,_self=this


if(beforeNode&&(index=this.childNodes.indexOf(beforeNode),index<0))return!1
amlNode.ownerDocument||(amlNode.ownerDocument=this.ownerDocument||apf.ownerDocument),amlNode.parentNode&&amlNode.removeNode(isMoveWithinParent,!0),
amlNode.parentNode=this,beforeNode&&(index=this.childNodes.indexOf(beforeNode)),beforeNode&&(amlNode.nextSibling=beforeNode,
amlNode.previousSibling=beforeNode.previousSibling,beforeNode.previousSibling=amlNode,amlNode.previousSibling&&(amlNode.previousSibling.nextSibling=amlNode)),
index>=0?this.childNodes=this.childNodes.slice(0,index).concat(amlNode,this.childNodes.slice(index)):(index=this.childNodes.push(amlNode)-1,
amlNode.nextSibling=null,index>0?(amlNode.previousSibling=this.childNodes[index-1],amlNode.previousSibling.nextSibling=amlNode):amlNode.previousSibling=null),
this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[this.childNodes.length-1]
var initialAppend=!amlNode.$amlLoaded,doc=this.nodeType==this.NODE_DOCUMENT?this:this.ownerDocument
return doc&&this.nodeType!=this.NODE_DOCUMENT_FRAGMENT&&this.$amlLoaded?(initialAppend&&!amlNode.render&&this.$onInsertedIntoDocument(),
triggerUpdate(),amlNode):amlNode},this.$onInsertedIntoDocument=function(){var amlNode=this
options.ignoreSelf||amlNode.$amlLoaded||amlNode.dispatchEvent("DOMNodeInsertedIntoDocument"),function _recur(nodes){
for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i]
node.$amlLoaded||node.dispatchEvent("DOMNodeInsertedIntoDocument")
var nNodes=node.childNodes
!node.render&&nNodes&&nNodes.length&&_recur(nNodes)}}(amlNode.childNodes)},this.removeNode=function(doOnlyAdmin,noHtmlDomEdit){
return this.parentNode&&this.parentNode.childNodes?(this.parentNode.childNodes.remove(this),this.$amlLoaded&&(this.dispatchEvent("DOMNodeRemoved",{
relatedNode:this.parentNode,bubbles:!0,$doOnlyAdmin:doOnlyAdmin}),!noHtmlDomEdit&&!doOnlyAdmin&&this.$ext&&this.$ext.parentNode&&this.$ext.parentNode.removeChild(this.$ext)),
this.parentNode.firstChild==this&&(this.parentNode.firstChild=this.nextSibling),this.parentNode.lastChild==this&&(this.parentNode.lastChild=this.previousSibling),
this.nextSibling&&(this.nextSibling.previousSibling=this.previousSibling),this.previousSibling&&(this.previousSibling.nextSibling=this.nextSibling),
this.$pHtmlNode=this.parentNode=this.previousSibling=this.nextSibling=null,this):this},this.remove=function(){
this.removeNode()},this.removeChild=function(childNode){return childNode.removeNode(),this},this.replaceChild=function(node,oldNode){
return node!==oldNode&&(this.insertBefore(node,oldNode),this.removeChild(oldNode)),node},this.cloneNode=function(deep){
return deep&&1==this.nodeType?this.ownerDocument.$domParser.parseFromXml(this,{doc:this.ownerDocument,
delay:!0}).childNodes[0]:this.ownerDocument.$domParser.$createNode(this.ownerDocument,this.nodeType,this)

},this.canDispatch=function(namespaceURI,type){},this.compareDocumentPosition=function(otherNode){},this.hasAttributes=function(){
return Object.keys(this.attributes).length},this.hasChildNodes=function(){return this.childNodes&&this.childNodes.length

},this.isDefaultNamespace=function(namespaceURI){if(1==node.nodeType&&!this.prefix)return this.namespaceURI==namespaceURI


var node=this.parentNode||this.ownerElement
return node&&node.isDefaultNamespace(namespaceURI)},this.lookupNamespaceURI=function(prefix){if(1==node.nodeType&&this.namespaceURI&&prefix==this.prefix)return this.namespaceURI


var node=this.parentNode||this.ownerElement
return node&&node.lookupNamespaceURI(prefix)},this.lookupPrefix=function(namespaceURI){if(1==this.nodeType&&namespaceURI==this.namespaceURI&&this.prefix)return this.prefix


var node=this.parentNode||this.ownerElement
return node&&node.lookupPrefix(namespaceURI)},this.normalize=function(){},this.selectNodes=function(sExpr,contextNode){
return contextNode||(contextNode=9==this.nodeType?this.documentElement:this),findNodes(contextNode,sExpr)

},this.selectSingleNode=function(sExpr,contextNode){return this.selectNodes(sExpr,contextNode)[0]}}.call(apf.AmlNode.prototype=new apf.Class),
apf.AmlElement=function(struct,tagName){var $init=this.$init
this.$init=function(tagName,nodeFunc,struct){this.$supportedProperties=this.$supportedProperties.slice()


var prop,p,q
p=this.$propHandlers,q=this.$propHandlers={}
for(prop in p)q[prop]=p[prop]
p=this.$booleanProperties,q=this.$booleanProperties={}
for(prop in p)q[prop]=p[prop]
return $init.call(this,tagName,nodeFunc,struct)},this.$init(function(tagName,nodeFunc,struct){if(this.$events={},
this.$inheritProperties={},this.attributes={},this.nodeFunc=nodeFunc,this.localName=tagName,struct){var nodes,prop,i,l,attr


struct.childNodes&&(nodes=struct.childNodes,delete struct.childNodes)
for(prop in struct)"htmlNode"!=prop&&(attr=new apf.AmlAttr(this,prop,struct[prop]),"id"==prop?this.$propHandlers.id.call(this,this.id=struct.id):"on"==prop.substr(0,2)&&attr.$triggerUpdate(),
this.attributes[attr.name]=attr)
if(this.ownerDocument||(this.ownerDocument=apf.document,this.prefix="a",this.namespaceURI=apf.ns.aml,
this.tagName=tagName),nodes){for(this.childNodes=nodes,i=0,l=nodes.length;i<l;i++)nodes[i].nextSibling=nodes[i+1]||null,
nodes[i].previousSibling=nodes[i-1]||null,nodes[i].parentNode=this
this.firstChild=nodes[0]||null,this.lastChild=nodes[nodes.length-1]||null}this.$aml=apf.$emptyNode||(apf.$emptyNode=apf.getXml("<empty />"))

}}),tagName&&$init.call(this,tagName,apf.NODE_HIDDEN,struct)},function(){function createAmlNode(node,parent){
if(node.nodeType==node.ELEMENT_NODE){var el
if("application"==node.localName)el=parent
else{for(var namespace="a"==node.prefix?apf.aml:apf.xhtml,ElementType=namespace.elements[node.localName]||namespace.elements["@default"],el=new ElementType({},node.localName),a=node.attributes,i=0;i<a.length;i++)el.setAttribute(a[i].name,a[i].value)


el.$aml=node}for(var list=node.childNodes,i=0;i<list.length;i++)createAmlNode(list[i],el)
el!=parent&&parent.appendChild(el)}else if(node.nodeType==node.TEXT_NODE){var text=node.data.trim()
if(text){var o=new apf.AmlText
o.nodeValue=text,parent.appendChild(o)}}else node.nodeType==node.DOCUMENT_NODE&&createAmlNode(node.documentElement,parent)

}this.nodeType=this.NODE_ELEMENT,this.canHaveChildren=!0,this.$propHandlers={id:function(value){this.name!=value&&value&&(apf.nameserver.register(this.localName,value,this),
apf.nameserver.register("all",value,this),this.name=value)}},this.$booleanProperties={},this.$inheritProperties={},
this.$supportedProperties=[],this.getElementsByTagName=function(tagName,norecur){tagName=tagName.toLowerCase()


var node,i,l,nodes=this.childNodes,result=[]
for(i=0,l=nodes.length;i<l;i++)1==(node=nodes[i]).nodeType&&(node.tagName!=tagName&&"*"!=tagName||result.push(node),
norecur||1!=node.nodeType||(result=result.concat(node.getElementsByTagName(tagName))))
return result},this.getElementsByTagNameNS=function(namespaceURI,localName,norecur){localName=localName.toLowerCase()


var node,i,l,nodes=this.childNodes,result=[]
for(i=0,l=nodes.length;i<l;i++)1==(node=nodes[i]).nodeType&&(node.namespaceURI!=namespaceURI||node.localName!=localName&&"*"!=localName||result.push(node),
norecur||node.$amlDestroyed||1!=node.nodeType||(result=result.concat(node.getElementsByTagNameNS(namespaceURI,localName))))


return result},this.setAttribute=function(name,value,noTrigger){name=name.toLowerCase()
var a=this.attributes[name]
if(!a){if(this.attributes[name]=a=new apf.AmlAttr(this,name,value),!this.$amlLoaded&&"id"!=name&&"hotkey"!=name)return


return void(noTrigger?a.$setValue(value):(a.dispatchEvent("DOMNodeInsertedIntoDocument",{relatedNode:this
}),a.dispatchEvent("DOMNodeInserted",{relatedNode:this,bubbles:!0})))}var oldValue=a.nodeValue
a.$setValue(value),!noTrigger&&this.$amlLoaded&&a.$triggerUpdate(null,oldValue)},this.hasAttribute=function(name){
return!!this.attributes[name]},this.removeAttribute=function(name){var item=this.attributes[name]
if(item){var oldValue=item.nodeValue
item.nodeValue=item.value="",item.$triggerUpdate(null,oldValue),item.ownerElement=null,item.nodeValue=item.value=oldValue

}return delete this.attributes[name],this},this.getAttribute=function(name,inherited){var item=this.attributes[name]


return item?item.nodeValue:null},this.getBoundingClientRect=function(){return new apf.AmlTextRectangle(this)

},this.querySelector=function(){},this.querySelectorAll=function(){},this.scrollIntoView=function(){},
this.insertMarkup=function(amlDefNode,options){var xmlNode=apf.getXml(amlDefNode)
createAmlNode(xmlNode,this)},this.$setInheritedAttribute=function(prop){var value,node=this,isInherit=!1


if(value=node.getAttribute(prop),!value){for(node=node.parentNode;node&&1==node.nodeType&&!(value=node.getAttribute(prop,!0));)node=node.parentNode


isInherit=!0}return!value&&apf.config&&prop&&(value=apf.config[prop]),isInherit&&(this.$inheritProperties[prop]=2),
value&&this.setProperty(prop,value,!1,!1,2),value},this.addEventListener("DOMNodeInserted",function(e){
if(e.currentTarget==this&&!e.$isMoveWithinParent&&e.$oldParent){var vOld,vNew,aci=apf.config.$inheritProperties


for(var prop in aci)vOld=apf.getInheritedAttribute(e.$oldParent,prop),vNew=apf.getInheritedAttribute(this.parentNode,prop),
vOld!=vNew&&!function recur(nodes){var i,l,node,n
for(i=0,l=nodes.length;i<l;i++)if(node=nodes[i],1==node.nodeType||7==node.nodeType)if(n=node.$inheritProperties[prop],
1!=aci[prop]||n){if(!(n<0)){if(3==n){var sameValue=node[prop]
node[prop]=null}node.setProperty(prop,3!=n?vNew:sameValue,!1,!1,n)}}else recur(node.childNodes)}([this])

}}),this.$handlePropSet=function(prop,value,force){this.$booleanProperties[prop]&&(value=apf.isTrue(value)),
this[prop]=value
var handler
return(handler=this.$propHandlers&&this.$propHandlers[prop]||this.nodeFunc==apf.NODE_VISIBLE&&apf.GuiElement&&apf.GuiElement.propHandlers[prop]||null)&&handler.call(this,value,prop,force)

},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var i,l,attr=this.attributes,keys=Object.keys(attr)


for(i=0,l=keys.length;i<l;i++)attr[keys[i]].dispatchEvent("DOMNodeInsertedIntoDocument")},!0),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){
this.$amlLoaded=!0})}.call(apf.AmlElement.prototype=new apf.AmlNode),apf.AmlCharacterData=function(){
this.data="",this.length=0,this.$init(!0),this.appendData=function(sValue){this.dispatchEvent("DOMCharacterDataModified",{
value:sValue})},this.deleteData=function(nOffset,nCount){this.dispatchEvent("DOMCharacterDataModified",{
offset:nOffset,count:nCount})},this.insertData=function(nOffset,nCount){this.dispatchEvent("DOMCharacterDataModified",{
offset:nOffset,count:nCount})},this.replaceData=function(nOffset,nCount,sValue){this.dispatchEvent("DOMCharacterDataModified",{
offset:nOffset,count:nCount,value:sValue})},this.substringData=function(nOffset,nCount){}},apf.AmlCharacterData.prototype=new apf.AmlNode,
apf.AmlText=function(isPrototype){this.$init(isPrototype)},function(){this.nodeType=this.NODE_TEXT,this.nodeName="#text",
this.serialize=function(){return apf.escapeXML(this.nodeValue)},this.$setValue=function(value){this.dispatchEvent("DOMCharacterDataModified",{
bubbles:!0,prevValue:this.nodeValue,newValue:this.nodeValue=value}),this.$amlLoaded&&this.$ext&&(this.$ext.nodeValue=value)

},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var pHtmlNode
if(this.parentNode.$childProperty)return this.parentNode.setAttribute(this.parentNode.$childProperty,this.nodeValue)


if(pHtmlNode=this.parentNode.$int){this.$amlLoaded=!0
var nodeValue=this.nodeValue
if(apf.hasTextNodeWhiteSpaceBug){var nodeValue=nodeValue.replace(/[\t\n\r ]+/g," ")
nodeValue&&" "!=nodeValue&&(this.$ext=pHtmlNode.appendChild(pHtmlNode.ownerDocument.createTextNode(nodeValue)))

}else this.$ext=pHtmlNode.appendChild(pHtmlNode.ownerDocument.createTextNode(nodeValue))}},!0)}.call(apf.AmlText.prototype=new apf.AmlCharacterData),
apf.AmlAttr=function(ownerElement,name,value){this.$init(),ownerElement&&(this.ownerElement=ownerElement,
this.ownerDocument=ownerElement.ownerDocument),this.nodeName=this.name=name,this.nodeValue=this.value=value

},function(){this.nodeType=this.NODE_ATTRIBUTE,this.MODIFICATION=1,this.ADDITION=2,this.REMOVAL=3,this.serialize=this.toString=function(){
return this.name+'="'+apf.escapeXML(String(this.value))+'"'},this.$setValue=function(value){this.nodeValue=this.value=value,
this.specified=!0,this.ownerElement.dispatchEvent("DOMAttrModified",{relatedNode:this,attrChange:this.MODIFICATION,
attrName:this.name,newValue:value,prevValue:this.$lastValue||"",bubbles:!0}),this.$lastValue=value},this.$triggerUpdate=function(e,oldValue){
var name=this.name,value=this.value||this.nodeValue,host=this.ownerElement,isEvent="on"==name.substr(0,2)


return!this.specified&&(isEvent&&this.$lastValue==value||"id"==name&&host.id)?void(this.specified=!0):isEvent?(host.$events[name]&&host.removeEventListener(name.substr(2),host.$events[name]),
void(value&&host.addEventListener(name,host.$events[name]="string"==typeof value?new Function("event",value):value))):(host.setProperty(name,value),
this.specified?host.dispatchEvent("DOMAttrModified",{relatedNode:this,attrChange:this.MODIFICATION,attrName:name,
newValue:value,prevValue:this.$lastValue||"",bubbles:!0}):this.specified=!0,void(this.$lastValue=value))

},this.addEventListener("DOMNodeInsertedIntoDocument",this.$triggerUpdate)}.call(apf.AmlAttr.prototype=new apf.AmlNode),
apf.AmlCDATASection=function(isPrototype){this.nodeType=this.NODE_CDATA_SECTION,this.nodeName="#cdata-section",
this.$init(isPrototype)},apf.AmlCDATASection.prototype=new apf.AmlText((!0)),apf.AmlCDATASection.prototype.serialize=function(){
return"<![CDATA["+this.nodeValue+"]]>"},apf.AmlComment=function(isPrototype){this.nodeType=this.NODE_COMMENT,
this.nodeName="#comment",this.$init(isPrototype)},function(){this.serialize=function(){return"<!--"+this.nodeValue+"-->"

},this.$setValue=function(value){this.dispatchEvent("DOMCharacterDataModified",{bubbles:!0,newValue:value,
prevValue:this.nodeValue})}}.call(apf.AmlComment.prototype=new apf.AmlCharacterData),apf.AmlConfiguration=function(isPrototype){
this.parameterNames=[],this.$init(isPrototype)},function(){this.setParameter=this.setProperty,this.getParameter=this.getProperty,
this.canSetParameter=function(name,value){return this.parameterNames.indexOf(name)>-1}}.call(apf.AmlConfiguration.prototype=new apf.Class),
apf.AmlDocument=function(){this.$prefixes={},this.$namespaceURIs={},this.domConfig=new apf.AmlConfiguration,
this.$init()},function(){this.nodeType=this.NODE_DOCUMENT,this.nodeFunc=apf.NODE_HIDDEN,this.nodeName="#document",
this.$amlLoaded=!0,this.activeElement=null,this.doctype=null,this.domConfig=null,this.implementation=null,
this.documentElement=null,this.getElementById=function(id){return self[id]},this.getElementsByTagName=function(tagName){
var docEl,res=(docEl=this.documentElement).getElementsByTagName(tagName)
return"*"!=tagName&&docEl.tagName!=tagName||res.unshift(docEl),res},this.getElementsByTagNameNS=function(nameSpaceURI,tagName){
var docEl,res=(docEl=this.documentElement).getElementsByTagNameNS(nameSpaceURI,tagName)
return("*"==tagName||docEl.tagName==tagName&&docEl.namespaceURI==nameSpaceURI)&&res.unshift(docEl),res

},this.createElement=function(qualifiedName){var parts=qualifiedName.split(":"),prefix=1==parts.length?"":parts[0],name=1==parts.length?parts[0]:parts[1],namespace="a"==prefix?apf.aml:apf.xhtml,ElementType=namespace.elements[name]||namespace.elements["@default"]


return new ElementType({},qualifiedName)},this.createElementNS=function(namespaceURI,qualifiedName){var ElementType=apf.aml.elements[qualifiedName]||apf.aml.elements["@default"]


return new ElementType({})},this.createEvent=function(){return new apf.AmlEvent},this.createTextNode=function(nodeValue){
var o=new apf.AmlText
return o.nodeValue=nodeValue||"",o},this.querySelector=function(){},this.querySelectorAll=function(){},
this.hasFocus=function(){}}.call(apf.AmlDocument.prototype=new apf.AmlNode),apf.AmlDocumentFragment=function(isPrototype){
this.$init(isPrototype)},apf.AmlDocumentFragment.prototype=new apf.AmlNode,apf.AmlDocumentFragment.prototype.nodeName="#document-fragment",
apf.AmlDocumentFragment.prototype.nodeType=apf.AmlDocumentFragment.prototype.NODE_DOCUMENT_FRAGMENT,apf.AmlTextRectangle=function(host){
function handler(){var pos=_self.getAbsolutePosition(_self.$ext)
_self.setProperty("left",pos[0]),_self.setProperty("top",pos[1]),_self.setProperty("right",document.documentElement.offsetWidth-pos[0]),
_self.setProperty("bottom",document.documentElement.offsetWidth-pos[1])}var _self=this
host.addEventListener("prop.width",handler),host.addEventListener("prop.height",handler),host.addEventListener("prop.left",handler),
host.addEventListener("prop.top",handler),handler.call(host)},apf.AmlTextRectangle.prototype=new apf.Class,
apf.xhtml=new apf.AmlNamespace,apf.setNamespace("http://www.w3.org/1999/xhtml",apf.xhtml),apf.XhtmlElement=function(struct,tagName){
this.$init(tagName||!0,apf.NODE_VISIBLE,struct),this.$xoe=this.addEventListener,this.addEventListener=this.$xae,
this.removeEventListener=this.$xre
var _self=this
this.$de=function(e){_self.dispatchEvent(e.type,null,e)}},function(){var excludedEvents={contextmenu:1,
keydown:1,keypress:1,keyup:1,DOMNodeInserted:2,DOMNodeInsertedIntoDocument:2,DOMNodeRemoved:2,DOMNodeRemovedFromDocument:2
}
this.$xae=function(type,fn){this.$xoe.apply(this,arguments),excludedEvents[type]>(this.editable?0:1)||"prop."==type.substr(0,5)||this.$ext&&("on"==type.substr(0,2)&&(type=type.substr(2)),
apf.addListener(this.$ext,type,this.$de))},this.$xre=function(type,fn){apf.AmlElement.prototype.removeEventListener.apply(this,arguments),
this.$ext&&apf.removeListener(this.$ext,type,this.$de)},this.$handlePropSet=function(name,value,force,inherit){
this.$booleanProperties[name]&&(value=apf.isTrue(value)),this[name]=value
var handler=this.$propHandlers&&this.$propHandlers[name]||apf.GuiElement.propHandlers[name]
handler?handler.call(this,value,null,name):this.$int&&(force||this.$amlLoaded)&&this.$int.setAttribute(name,value)

},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var pHtmlNode
if(pHtmlNode=this.$pHtmlNode=this.parentNode.$int){var aml=this.$aml
aml?this.$ext=this.$int=pHtmlNode.appendChild(xmlToHtml(aml,!0)):this.$ext=this.$int=pHtmlNode.appendChild(document.createElement(this.localName)),
"a"!=this.localName&&(this.$ext.host=this),this.style=this.$ext.style}},!0),this.addEventListener("DOMNodeInsertedIntoDocument",function(e){
this.$amlLoaded=!0,this.$setLayout&&this.$setLayout()})}.call(apf.XhtmlElement.prototype=new apf.AmlElement),
apf.xhtml.setElement("@default",apf.XhtmlElement),apf.XhtmlIgnoreElement=function(struct,tagName){this.$init(tagName,apf.NODE_VISIBLE,struct)

},apf.XhtmlIgnoreElement.prototype=new apf.AmlElement,apf.xhtml.setElement("script",apf.XhtmlIgnoreElement),
apf.xhtml.setElement("noscript",apf.XhtmlIgnoreElement),apf.xhtml.setElement("head",apf.XhtmlIgnoreElement),
apf.xhtml.setElement("meta",apf.XhtmlIgnoreElement),apf.XhtmlInputElement=function(struct,tagName){this.$init(tagName||"input",apf.NODE_VISIBLE,struct)

},function(){this.$xae=apf.XhtmlElement.prototype.$xae,this.$xre=apf.XhtmlElement.prototype.$xre,this.$handlePropSet=function(name,value,force){
if("type"!=name)return apf.XhtmlElement.prototype.$handlePropSet.call(this,name,value,force)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){
var pHtmlNode;(pHtmlNode=this.parentNode.$int)&&(this.$aml?this.$ext=this.$int=pHtmlNode.appendChild(xmlToHtml(this.$aml,!0)):(this.$ext=this.$int=document.createElement(this.localName),
this.getAttribute("type")&&this.$int.setAttribute("type",this.getAttribute("type")),pHtmlNode.appendChild(this.$int)))

},!0)}.call(apf.XhtmlInputElement.prototype=new apf.AmlElement),apf.xhtml.setElement("input",apf.XhtmlInputElement),
apf.XhtmlOptionElement=function(struct,tagName){this.$init(tagName||"option",apf.NODE_VISIBLE,struct)

},function(){this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.$ext=this.$int=this.parentNode.$int.appendChild(this.parentNode.$int.ownerDocument.createElement("option")),
this.value&&this.$int.setAttribute("value",this.value)},!0)}.call(apf.XhtmlOptionElement.prototype=new apf.AmlElement),
apf.xhtml.setElement("option",apf.XhtmlOptionElement),apf.XhtmlSkipChildrenElement=function(struct,tagName){
this.$init(tagName,apf.NODE_VISIBLE,struct)},function(){this.canHaveChildren=!1,this.$redraw=function(){
var _self=this
apf.queue.add("redraw"+this.$uniqueId,function(){var pHtmlNode=_self.$ext.parentNode,beforeNode=_self.$ext.nextSibling


pHtmlNode.removeChild(_self.$ext),_self.$ext=apf.insertHtmlNode(null,pHtmlNode,beforeNode,_self.$aml?_self.$aml.serialize?_self.$aml.serialize():_self.$aml.xml:_self.serialize())

})},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){var pHtmlNode;(pHtmlNode=this.parentNode.$int)&&(this.$ext=apf.insertHtmlNode(null,pHtmlNode,null,this.$aml?this.$aml.serialize?this.$aml.serialize():this.$aml.xml:this.serialize()))

},!0)}.call(apf.XhtmlSkipChildrenElement.prototype=new apf.AmlElement),apf.xhtml.setElement("object",apf.XhtmlSkipChildrenElement),
apf.xhtml.setElement("embed",apf.XhtmlSkipChildrenElement),apf.xhtml.setElement("table",apf.XhtmlSkipChildrenElement),
apf.xhtml.setElement("pre",apf.XhtmlSkipChildrenElement),apf.__ANCHORING__=8192,apf.Anchoring=function(){
function visibleHandler(e){if((this.$rule_header||this.$rule_v||this.$rule_h)&&this.parentNode)if(e.value){
if(this.$rule_v||this.$rule_h){var rules=this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h
l.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",rules),l.queue(this.$pHtmlNode,this)}l.processQueue()

}else l.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),l.queue(this.$pHtmlNode)}function remove(e){
e&&(e.$doOnlyAdmin||e.currentTarget!=this)||l.queue&&this.$pHtmlNode&&(l.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),
l.queue(this.$pHtmlNode))}function reparent(e){this.$amlLoaded&&e.currentTarget==this&&!e.$isMoveWithinParent&&this.$parsed&&this.$moveAnchoringRules(e.$oldParentHtmlNode)

}function getRuleHeader(){return this.$pHtmlDoc?"try{\n            var oHtml = document.getElementById('"+this.$ext.getAttribute("id")+"');\n            \n            var pWidth = "+(this.$pHtmlNode==this.$pHtmlDoc.body?"apf.getWindowWidth()":"apf.getHtmlInnerWidth(oHtml.parentNode)")+";\n            \n            var pHeight = "+(this.$pHtmlNode==this.$pHtmlDoc.body?"apf.getWindowHeight()":"apf.getHtmlInnerHeight(oHtml.parentNode)")+";\n            }catch(e){\n            }".replace(/^\s*/gm,""):""

}function setPercentage(expr,value){return String(expr).replace(apf.percentageMatch,"(("+value+" * $1)/100)")

}function visCheck(){this.$updateQueue&&(this.$updateLayout(),apf.layout.activateRules(this.$ext.parentNode))

}this.$regbase=this.$regbase|apf.__ANCHORING__,this.$anchors=[]
var VERTICAL=1,HORIZONTAL=2
this.$updateQueue=0,this.$inited=this.$parsed=this.$anchoringEnabled=!1,this.$hordiff=this.$verdiff=0,
this.$rule_v=this.$rule_h=this.$rule_header=""
var l=apf.layout
this.$supportedProperties.push("anchors")
var propHandlers={right:function(value,prop){(this.$anchoringEnabled||this.$setLayout("anchoring"))&&(value||0===value||(this.$ext.style[prop]=""),
this.$updateQueue||l.queue(this.$pHtmlNode,this),this.$updateQueue=this.$updateQueue|HORIZONTAL)},bottom:function(value,prop){
(this.$anchoringEnabled||this.$setLayout("anchoring"))&&(value||0===value||(this.$ext.style[prop]=""),
this.$updateQueue||l.queue(this.$pHtmlNode,this),this.$updateQueue=this.$updateQueue|VERTICAL)}}
propHandlers.left=propHandlers.width=propHandlers.right,propHandlers.top=propHandlers.height=propHandlers.bottom,
this.$propHandlers.anchors=function(value){this.$anchors=value?value.splitSafe("(?:, *| )"):[],(this.$anchoringEnabled||this.$setLayout("anchoring"))&&(this.$updateQueue||l.queue(this.$pHtmlNode,this),
this.$updateQueue=this.$updateQueue|HORIZONTAL|VERTICAL)},this.$disableAnchoring=function(activate){if(this.$inited&&this.$anchoringEnabled&&this.$pHtmlNode){
l.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),l.queue&&l.queue(this.$pHtmlNode)
for(var prop in propHandlers)delete this.$propHandlers[prop]
this.removeEventListener("DOMNodeRemoved",remove),this.removeEventListener("DOMNodeInserted",reparent),
this.$ext&&(this.$ext.style.left=this.$ext.style.right=this.$ext.style.top=this.$ext.style.bottom=this.$ext.style.width=this.$ext.style.height=this.$ext.style.position=""),
this.removeEventListener("prop.visible",visibleHandler),this.$inited=!1,this.$anchoringEnabled=!1}},this.$enableAnchoring=function(){
this.$inited||(apf.extend(this.$propHandlers,propHandlers),this.addEventListener("DOMNodeRemoved",remove),
this.addEventListener("DOMNodeInserted",reparent),this.addEventListener("prop.visible",visibleHandler),
this.$updateQueue=0|((this.left||this.width||this.right||this.anchors)&&HORIZONTAL)|((this.top||this.height||this.bottom||this.anchors)&&VERTICAL),
this.$updateQueue&&l.queue(this.$pHtmlNode,this),this.$inited=!0,this.$anchoringEnabled=!0)},this.$moveAnchoringRules=function(oldParent,updateNow){
var rules=oldParent&&l.removeRule(oldParent,this.$uniqueId+"_anchors")
rules&&l.queue(oldParent),(this.$rule_v||this.$rule_h||this.$rule_header)&&(this.$rule_header=getRuleHeader.call(this),
rules=this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h,l.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",rules),
l.queue(this.$pHtmlNode,this))},this.$hasAnchorRules=function(){return!(!this.$rule_v&&!this.$rule_h)

},this.$recalcAnchoring=function(queueDelay){this.$updateQueue=this.$updateQueue|HORIZONTAL|VERTICAL,
this.$updateLayout(),l.queue(this.$pHtmlNode,this),queueDelay||l.processQueue()},this.$updateLayout=function(){
if(this.$anchoringEnabled&&apf.window.vManager.check(this,"anchoring",visCheck)){if(this.$parsed||(this.$ext.getAttribute("id")||apf.setUniqueHtmlId(this.$ext),
this.$rule_header=getRuleHeader.call(this),this.$parsed=!0),!this.$updateQueue)return void(this.visible&&"none"==this.$ext.style.display&&(this.$ext.style.display=""))


"relative"==this.draggable?"absolute|fixed|relative".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="absolute"):this.left||0===this.left||this.top||0===this.top||this.right||0===this.right||this.bottom||0===this.bottom||this.$anchors.length?"absolute|fixed".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="absolute"):this.center||("absolute|fixed|relative".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="relative"),
this.width||(this.$ext.style.width=""),this.height||(this.$ext.style.height=""))
var rules
if(this.$updateQueue&HORIZONTAL){rules=[],this.$hordiff=apf.getWidthDiff(this.$ext)
var left=this.$anchors[3]||this.left,right=this.$anchors[1]||this.right,width=this.width,hasLeft=left||0===left,hasRight=right||0===right,hasWidth=width||0===width


right&&"string"==typeof right&&(right=setPercentage(right,"pWidth")),hasLeft&&(parseInt(left)!=left?(left=setPercentage(left,"pWidth"),
rules.push("oHtml.style.left = ("+left+") + 'px'")):this.$ext.style.left=left+"px"),hasRight&&(parseInt(right)!=right?(right=setPercentage(right,"pWidth"),
rules.push("oHtml.style.right = ("+right+") + 'px'")):this.$ext.style.right=right+"px"),hasLeft&&hasRight?this.$ext.style.width="":hasWidth&&"number"==typeof this.maxwidth&&"number"==typeof this.minwidth&&(parseInt(width)!=width?(this.width=width=(this.width||"").replace(/--(\d+)/,"-(-$1)"),
width=setPercentage(width,"pWidth"),rules.push("oHtml.style.width = Math.max("+(this.minwidth-this.$hordiff)+", Math.min("+(this.maxwidth-this.$hordiff)+", "+width+" - "+this.$hordiff+")) + 'px'")):this.$ext.style.width=(width>this.minwidth?width<this.maxwidth?width:this.maxwidth:this.minwidth)-this.$hordiff+"px"),
this.$rule_h=rules.length?"try{"+rules.join(";}catch(e) {};try{")+";}catch(e){};":""}if(this.$updateQueue&VERTICAL){
rules=[],this.$verdiff=apf.getHeightDiff(this.$ext)
var top=this.$anchors[0]||this.top,bottom=this.$anchors[2]||this.bottom,height=this.height,hasTop=top||0===top,hasBottom=bottom||0===bottom,hasHeight=height||0===height


bottom&&"string"==typeof bottom&&(bottom=setPercentage(bottom,"pHeight")),hasTop&&(parseInt(top)!=top?(top=setPercentage(top,"pHeight"),
rules.push("oHtml.style.top = ("+top+") + 'px'")):this.$ext.style.top=top+"px"),hasBottom&&(parseInt(bottom)!=bottom?rules.push("oHtml.style.bottom = ("+bottom+") + 'px'"):this.$ext.style.bottom=bottom+"px"),
hasTop&&hasBottom?this.$ext.style.height="":hasHeight&&"number"==typeof this.minheight&&(parseInt(height)!=height?(height=setPercentage(height,"pHeight"),
rules.push("oHtml.style.height = Math.max("+(this.minheight-this.$verdiff)+", Math.min("+(this.maxheight-this.$verdiff)+", "+height+" - "+this.$verdiff+")) + 'px'")):this.$ext.style.height=Math.max(0,(height>this.minheight?height<this.maxheight?height:this.maxheight:this.minheight)-this.$verdiff)+"px"),
this.$rule_v=rules.length?"try{"+rules.join(";}catch(e) {};try{")+";}catch(e){};":""}this.$rule_v||this.$rule_h?l.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h,!0):l.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),
this.$updateQueue=0,this.$box&&!apf.hasFlexibleBox&&apf.layout.forceResize(this.$ext)}},this.addEventListener("DOMNodeRemovedFromDocument",function(e){
this.$disableAnchoring()})},apf.__GUIELEMENT__=32768,apf.GuiElement=function(){this.$init(!0)},function(){
this.$regbase=this.$regbase|apf.__GUIELEMENT__,this.$focussable=apf.KEYBOARD_MOUSE,this.visible=2,this.minwidth=0,
this.minheight=0,this.$booleanProperties["disable-keyboard"]=!0,this.$booleanProperties.visible=!0,this.$supportedProperties.push("draggable","resizable"),
this.$supportedProperties.push("focussable","zindex","disabled","tabindex","disable-keyboard","contextmenu","visible","autosize","loadaml","alias","width","left","top","height","tooltip"),
this.$setLayout=function(type,insert){return!(!this.$drawn||!this.$pHtmlNode)&&(this.parentNode&&this.parentNode.$box?(this.$layoutType!=this.parentNode&&(this.$disableCurrentLayout&&this.$disableCurrentLayout(),
this.parentNode.register(this,insert),this.$disableCurrentLayout=null,this.$layoutType=this.parentNode),
type==this.parentNode.localName):(this.$anchoringEnabled||(this.$disableCurrentLayout&&this.$disableCurrentLayout(),
this.$enableAnchoring(),this.$disableCurrentLayout=this.$disableAnchoring,this.$layoutType=null),"anchoring"==type))

},this.addEventListener("DOMNodeInserted",function(e){e.currentTarget!=this||!this.parentNode.$box&&"table"!=this.parentNode.localName||(e.$oldParent||(this.$layoutType=null),
this.$setLayout(!e.$oldParent))}),this.implement(apf.Anchoring),this.setWidth=function(value){return this.setProperty("width",value,!1,!0),
this},this.setHeight=function(value){return this.setProperty("height",value,!1,!0),this},this.setLeft=function(value){
return this.setProperty("left",value,!1,!0),this},this.setTop=function(value){return this.setProperty("top",value,!1,!0),
this},this.show||(this.show=function(){return this.setProperty("visible",!0,!1,!0),this}),this.hide||(this.hide=function(){
return this.setProperty("visible",!1,!1,!0),this}),this.getWidth=function(){return(this.$ext||{}).offsetWidth

},this.getHeight=function(){return(this.$ext||{}).offsetHeight},this.getLeft=function(){return(this.$ext||{}).offsetLeft

},this.getTop=function(){return(this.$ext||{}).offsetTop},this.enable=function(){return this.setProperty("disabled",!1,!1,!0),
this},this.disable=function(){return this.setProperty("disabled",!0,!1,!0),this},this.sendToBack=function(){
return this.setProperty("zindex",0,!1,!0),this},this.bringToFront=function(){return this.setProperty("zindex",apf.all.length+1,!1,!0),
this},this.sendBackwards=function(){return this.setProperty("zindex",this.zindex-1,!1,!0),this},this.bringForward=function(){
return this.setProperty("zindex",this.zindex+1,!1,!0),this},this.hasFocus=function(){},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){
var x=this.$aml
this.parentNode&&(this.$pHtmlNode=this.parentNode.$int),this.$pHtmlNode&&(this.$pHtmlDoc=this.$pHtmlNode.ownerDocument||document,
this.$initSkin&&this.$initSkin(x),this.$draw&&this.$draw(),e.id&&this.$ext.setAttribute("id",e.id),"undefined"==typeof this.visible&&(this.visible=!0),
this.$drawn=!0)},!0)
var f=function(e){if(this.$pHtmlNode){if(this.$setLayout(),this.$ext){var hasPres=this.hasFeature(apf.__PRESENTATION__)||!1,type=this.$isLeechingSkin?this.localName:"main"


this.minwidth=Math.max(this.minwidth||0,apf.getCoord(hasPres&&parseInt(this.$getOption(type,"minwidth")),0)),
this.minheight=Math.max(this.minheight||0,apf.getCoord(hasPres&&parseInt(this.$getOption(type,"minheight")),0)),
void 0==this.maxwidth&&(this.maxwidth=apf.getCoord(hasPres&&parseInt(this.$getOption(type,"maxwidth")),1e4)),
void 0==this.maxheight&&(this.maxheight=apf.getCoord(hasPres&&parseInt(this.$getOption(type,"maxheight")),1e4))

}this.$loadAml&&this.$loadAml(this.$aml),this.$focussable&&"undefined"==typeof this.focussable&&apf.GuiElement.propHandlers.focussable.call(this,!0),
setResizeEvent&&f2()}}
this.addEventListener("DOMNodeInsertedIntoDocument",f),this.addEventListener("$skinchange",f)
var f2,setResizeEvent
this.addEventListener("$event.resize",f2=function(c){return this.$ext?(apf.layout.setRules(this.$ext,"resize","var o = apf.all["+this.$uniqueId+"];            if (o) o.dispatchEvent('resize');",!0),
apf.layout.queue(this.$ext),void this.removeEventListener("$event.resize",f2)):void(setResizeEvent=!0)

}),this.addEventListener("contextmenu",function(e){if(this.contextmenus){var menu
"string"==typeof this.contextmenus[0]&&(menu=self[this.contextmenus[0]]),menu="menu"==this.contextmenus[0].localName?this.contextmenus[0]:self[this.contextmenus[0].getAttribute("menu")],
menu&&(menu.display(e.x+1,e.y+1,null,this),e.returnValue=!1,e.cancelBubble=!0)}})}.call(apf.GuiElement.prototype=new apf.AmlElement),
apf.GuiElement.propHandlers={minwidth:function(value){this.$ext.style.minWidth=Math.max(0,value-apf.getWidthDiff(this.$ext))+"px"

},minheight:function(value){this.$ext.style.minHeight=Math.max(0,value-apf.getHeightDiff(this.$ext))+"px"

},maxwidth:function(value){this.$ext.style.maxWidth=Math.max(0,value-apf.getWidthDiff(this.$ext))+"px"

},maxheight:function(value){this.$ext.style.maxHeight=Math.max(0,value-apf.getHeightDiff(this.$ext))+"px"

},focussable:function(value){this.focussable="undefined"==typeof value||value,"container"==value?(this.$isWindowContainer=!0,
this.focussable=!0):this.focussable=apf.isTrue(value),this.hasFeature(apf.__FOCUSSABLE__)||this.implement(apf.Focussable),
this.focussable?(apf.window.$addFocus(this,this.tabindex),"container"==value&&this.$tabList.remove(this)):apf.window.$removeFocus(this)

},tabindex:function(value){this.hasFeature(apf.__FOCUSSABLE__)&&this.setTabIndex(parseInt(value)||null)

},zindex:function(value){this.$ext.style.zIndex=value},visible:function(value){apf.isFalse(value)||"undefined"==typeof value?(this.$ext&&(this.$ext.style.display="none"),
(apf.document.activeElement==this||2==this.canHaveChildren&&apf.isChildOf(this,apf.document.activeElement,!1))&&(apf.config.allowBlur&&this.hasFeature(apf.__FOCUSSABLE__)?this.blur():apf.window.moveNext()),
this.visible=!1):(this.$ext&&(this.$ext.style.display="",this.$ext.offsetHeight||(this.$ext.style.display=this.$display||"block")),
this.visible=!0)},disabled:function(value){if(!this.$drawn){var _self=this
return void this.addEventListener("DOMNodeInsertedIntoDocument",this.$updateDisabled||(this.$updateDisabled=function(e){
apf.GuiElement.propHandlers.disabled.call(_self,_self.disabled)}))}if(apf.queue.remove("disable"+this.$uniqueId),
this.canHaveChildren){value!=-1&&(value=this.disabled=apf.isTrue(value))
for(var node,nodes=this.childNodes,i=0,l=nodes.length;i<l;i++)node=nodes[i],node.nodeFunc==apf.NODE_VISIBLE&&(value&&node.disabled!=-1&&(node.$disabled=node.disabled||!1),
node.setProperty("disabled",!!value&&-1))
if(this.$isWindowContainer)return}if(value==-1||0==value);else if("boolean"==typeof this.$disabled){if(null!==value)return void(this.$disabled=value||!1)


value=this.$disabled,this.$disabled=null}apf.isTrue(value)||value==-1?(this.disabled=!1,apf.document.activeElement==this&&(apf.window.moveNext(!0),
apf.document.activeElement==this&&this.$blur()),this.hasFeature(apf.__PRESENTATION__)&&this.$setStyleClass(this.$ext,this.$baseCSSname+"Disabled"),
this.$disable&&this.$disable(),this.disabled=value):(this.disabled=!1,apf.document.activeElement==this&&this.$focus(),
this.hasFeature(apf.__PRESENTATION__)&&this.$setStyleClass(this.$ext,null,[this.$baseCSSname+"Disabled"]),
this.$enable&&this.$enable())},enabled:function(value){this.setProperty("disabled",!value)},"disable-keyboard":function(value){
this.disableKeyboard=apf.isTrue(value)},tooltip:function(value){this.$ext.setAttribute("title",(value||"")+(this.hotkey?" ("+(apf.isMac?apf.hotkeys.toMacNotation(this.hotkey):this.hotkey)+")":""))

},contextmenu:function(value){this.contextmenus=[value]}},!function(){var prot=apf.XhtmlElement.prototype


prot.implement(apf.Anchoring),prot.$drawn=!0,prot.$setLayout=apf.GuiElement.prototype.$setLayout,prot.addEventListener("DOMNodeInserted",function(e){
e.currentTarget==this&&"vbox|hbox|table".indexOf(this.parentNode.localName)==-1&&this.$setLayout()})}(),
apf.__PRESENTATION__=512,apf.Presentation=function(){this.$init(!0)},function(){function changeSkin(skin,skinset){
if(clearTimeout(this.$skinTimer),this.selectable)var valueList=this.getSelection()
var oExt=this.$ext,oInt=this.$int,pNode=this.$ext?this.$ext.parentNode:this.$pHtmlNode,beforeNode=oExt&&oExt.nextSibling,idExt=this.$ext&&this.$ext.getAttribute("id"),idInt=this.$int&&this.$int.getAttribute("id"),oldBase=this.$baseCSSname


if(oExt&&oExt.parentNode&&oExt.parentNode.removeChild(oExt),this.$destroy&&this.$destroy(!0),this.skin=skin,
this.$loadSkin(skinset?skinset+":"+skin:null),this.$draw&&this.$draw(!0),idExt&&this.$ext.setAttribute("id",idExt),
(beforeNode||this.$ext&&pNode!=this.$ext.parentNode)&&pNode.insertBefore(this.$ext,beforeNode),this.$ext){
var i,l,newclasses=[],classes=(oExt.className||"").splitSafe("\\s+")
for(i=0;i<classes.length;i++)classes[i]&&0!=classes[i].indexOf(oldBase)&&newclasses.push(classes[i].replace(oldBase,this.$baseCSSname))


apf.setStyleClass(this.$ext,newclasses.join(" "))
var en,ev=apf.skins.events
for(i=0,l=ev.length;i<l;i++)en=ev[i],"function"!=typeof oExt[en]||this.$ext[en]||(this.$ext[en]=oExt[en])


this.$ext.style.left=oExt.style.left,this.$ext.style.top=oExt.style.top,this.$ext.style.width=oExt.style.width,
this.$ext.style.height=oExt.style.height,this.$ext.style.right=oExt.style.right,this.$ext.style.bottom=oExt.style.bottom,
this.$ext.style.zIndex=oExt.style.zIndex,this.$ext.style.position=oExt.style.position,this.$ext.style.display=oExt.style.display

}if(idInt&&this.$int.setAttribute("id",idInt),this.$int&&this.$int!=oInt)for(var node,newNode=this.$int,nodes=oInt.childNodes,i=nodes.length-1;i>=0;i--)(node=nodes[i]).host&&(node.host.$pHtmlNode=newNode,
node.host.$isLeechingSkin&&setLeechedSkin.call(node.host)),newNode.insertBefore(node,newNode.firstChild)


this.disabled&&this.$disable(),this.$focussable&&apf.document.activeElement==this&&this.$focus(),this.dispatchEvent("$skinchange",{
ext:oExt,"int":oInt}),this.value&&this.$propHandlers.value.call(this,this.value),this.hasFeature(apf.__MULTISELECT__)&&this.selectable&&this.selectList(valueList,!0),
apf.hasSingleRszEvent||(apf.layout.activateRules(this.$ext),this.$int&&apf.layout.activateRules(this.$int)),
this.draggable&&this.$propHandlers.draggable&&this.$propHandlers.draggable.call(this,this.draggable),
this.resizable&&this.$propHandlers.resizable&&this.$propHandlers.resizable.call(this,this.resizable),
apf.layout.forceResize(this.$ext)}function setLeechedSkin(e){if(this.$amlLoaded&&(!e||!e.$isMoveWithinParent&&e.currentTarget==this&&e.$oldParent)&&!this.attributes.skin){
var skinName,skinNode,pNode=this.parentNode
if((skinName=this.$canLeechSkin.dataType==apf.STRING?this.$canLeechSkin:this.localName)&&pNode.$originalNodes&&(skinNode=pNode.$originalNodes[skinName])&&skinNode.getAttribute("inherit")){
var link=skinNode.getAttribute("link")
if(this.$isLeechingSkin=!0,link)this.$forceSkinChange(link)
else{var skin=pNode.skinName.split(":")
this.$forceSkinChange(skin[1],skin[0])}}else this.$isLeechingSkin&&(delete this.skin,this.$isLeechingSkin=!1,
this.$forceSkinChange())}}this.$regbase=this.$regbase|apf.__PRESENTATION__,this.$supportedProperties.push("skin"),
this.$propHandlers.skinset=this.$propHandlers.skin=function(value){if(this.$amlLoaded&&!this.$skinTimer){
var _self=this
clearTimeout(this.$skinTimer),this.$skinTimer=$setTimeout(function(){changeSkin.call(_self,_self.skin),
delete _self.$skinTimer})}},this.$propHandlers.style=function(value){!this.styleAttrIsObj&&this.$amlLoaded&&this.$ext.setAttribute("style",value)

},this.$propHandlers.border=function(value){value?this.$ext.style.borderWidth=apf.getBox(value).join("px ")+"px":this.$ext.style.borderWidth=""

},this.$propHandlers.margin=function(value){value?this.$ext.style.margin=apf.getBox(value).join("px ")+"px":this.$ext.style.margin=""

},this.$propHandlers["class"]=function(value){this.$setStyleClass(this.$ext,value,this.$lastClassValue?[this.$lastClassValue]:null),
this.$lastClassValue=value},this.$forceSkinChange=function(skin,skinset){changeSkin.call(this,skin,skinset)

},this.$setStyleClass=apf.setStyleClass,this.$initSkin=function(x){this.$canLeechSkin&&this.addEventListener("DOMNodeInserted",setLeechedSkin),
this.skin||(this.skin=this.getAttribute("skin"))
var skinName,skinNode,pNode=this.parentNode
if(this.$canLeechSkin&&!this.skin&&(skinName=this.$canLeechSkin.dataType==apf.STRING?this.$canLeechSkin:this.localName)&&pNode&&pNode.$originalNodes&&(skinNode=pNode.$originalNodes[skinName])&&skinNode.getAttribute("inherit")){
var link=skinNode.getAttribute("link")
this.$isLeechingSkin=!0,link?(this.skin=link,this.$loadSkin()):this.$loadSkin(pNode.skinName)}else this.skinset||(this.skinset=this.getAttribute("skinset")),
this.$loadSkin(null,this.$canLeechSkin)},this.$loadSkin=function(skinName,noError){if(this.baseSkin=skinName||(this.skinset||this.$setInheritedAttribute("skinset"))+":"+(this.skin||this.localName),
clearTimeout(this.$skinTimer),this.skinName&&(this.$blur(),this.$baseCSSname=null),this.skinName=this.baseSkin,
this.$pNodes={},this.$originalNodes=apf.skins.getTemplate(this.skinName,!0),!this.$originalNodes){var skin=this.skin


if(skin){var skinset=this.skinName.split(":")[0]
this.baseName=this.skinName="default:"+skin,this.$originalNodes=apf.skins.getTemplate(this.skinName),
this.$originalNodes||"default"==skinset||(this.baseName=this.skinName=skinset+":"+this.localName,this.$originalNodes=apf.skins.getTemplate(this.skinName,!0))

}if(this.$originalNodes||(this.baseName=this.skinName="default:"+this.localName,this.$originalNodes=apf.skins.getTemplate(this.skinName)),
!this.$originalNodes){if(noError)return this.baseName=this.skinName=this.originalNode=null
throw new Error(apf.formatErrorString(1077,this,"Presentation","Could not load skin: "+this.baseSkin))

}}this.$originalNodes&&apf.skins.setSkinPaths(this.skinName,this)},this.$getNewContext=function(type,amlNode){
this.$pNodes[type]=this.$originalNodes[type].cloneNode(!0)},this.$hasLayoutNode=function(type){return!!this.$originalNodes[type]

},this.$getLayoutNode=function(type,section,htmlNode){var node=this.$pNodes[type]||this.$originalNodes[type]


if(!node)return!1
if(!section)return htmlNode||apf.getFirstElement(node)
var textNode=node.getAttribute(section)
return textNode?findNode(htmlNode||apf.getFirstElement(node),textNode):null},this.$getOption=function(type,section){
type=type.toLowerCase()
var node=this.$pNodes[type]||this.$originalNodes[type]
if(!section||!node)return node
var attr=node.getAttribute(section)||""
return attr},this.$getExternal=function(tag,pNode,func,aml){pNode||(pNode=this.$pHtmlNode),tag||(tag="main"),
this.$getNewContext(tag)
var node,oExt=this.$getLayoutNode(tag)
return(node=(aml||this).getAttribute("style"))&&oExt.setAttribute("style",node),func&&func.call(this,oExt),
oExt=apf.insertHtmlNode(oExt,pNode),oExt.host=this,(node=(aml||this).getAttribute("bgimage"))&&(oExt.style.backgroundImage="url("+apf.getAbsolutePath(this.mediaPath,node)+")"),
this.$baseCSSname||(this.$baseCSSname=oExt.className.trim().split(" ")[0]),oExt},this.$focus=function(){
this.$ext&&this.$setStyleClass(this.oFocus||this.$ext,this.$baseCSSname+"Focus")},this.$blur=function(){
this.renaming&&this.stopRename(null,!0),this.$ext&&this.$setStyleClass(this.oFocus||this.$ext,"",[this.$baseCSSname+"Focus"])

}}.call(apf.Presentation.prototype=new apf.GuiElement),apf.config.$inheritProperties.skinset=1,require("./lib/dropdown")(apf),
require("./lib/splitbox")(apf),require("./lib/crypto")(apf),apf.BaseButton=function(){this.$init(!0)},
function(){this.$refKeyDown=this.$refMouseDown=0,this.$mouseOver=this.$mouseLeft=!1,this.$propHandlers.background=function(value){
var oNode=this.$getLayoutNode("main","background",this.$ext)
if(oNode)if(value){var b=value.split("|")
this.$background=b.concat(["vertical",2,16].slice(b.length-1)),oNode.style.backgroundImage="url("+this.mediaPath+b[0]+")",
oNode.style.backgroundRepeat="no-repeat"}else oNode.style.backgroundImage="",oNode.style.backgroundRepeat="",
this.$background=null},this.addEventListener("keydown",function(e){var key=e.keyCode
switch(key){case 13:"checkbox"!=this.localName&&this.$ext.onmouseup(e.htmlEvent,!0)
break
case 32:return e.htmlEvent.repeat||(this.$refKeyDown++,this.$updateState(e.htmlEvent)),!1}},!0),this.addEventListener("keyup",function(e){
var key=e.keyCode
switch(key){case 32:return this.$refKeyDown--,this.$refKeyDown<0?(this.$refKeyDown=0,!1):(this.$refKeyDown+this.$refMouseDown!=0||this.disabled||this.$ext.onmouseup(e,!0),
this.$updateState(e),!1)}},!0),this.states={Out:1,Over:2,Down:3},this.$updateState=function(e,strEvent){
return e.reset?(this.$refKeyDown=0,this.$refMouseDown=0,this.$mouseOver=!1,!1):void(this.$refKeyDown>0||this.$refMouseDown>0&&(this.$mouseOver||this.$ext===e.currentTarget)||this.isBoolean&&this.value?this.$setState("Down",e,strEvent):this.$mouseOver?this.$setState("Over",e,strEvent):this.$setState("Out",e,strEvent))

},this.$setupEvents=function(){if(!this.editable){var _self=this
this.$ext.onmousedown=function(e){e=e||window.event,_self.$notfromext&&(e.srcElement||e.target)==this||(_self.$refMouseDown=1,
_self.$mouseLeft=!1,_self.disabled||(_self.value?apf.stopEvent(e):apf.cancelBubble(e),_self.$updateState(e,"mousedown")))

},this.$ext.onmouseup=function(e,force){if(e=e||window.event,!_self.disabled&&(force||(_self.$mouseOver||this===e.currentTarget)&&_self.$refMouseDown))return _self.$refMouseDown=0,
_self.$updateState(e,"mouseup"),!(_self.disabled||e&&"click"==e.type&&1==_self.$mouseLeft)&&(!(_self.$refMouseDown+_self.$refKeyDown)&&(_self.$clickHandler&&_self.$clickHandler()?_self.$updateState(e||event,"click"):_self.dispatchEvent("click",{
htmlEvent:e}),!1))},this.$ext.onmousemove=function(e){if(!_self.$mouseOver||2==_self.$mouseOver){if(e=e||window.event,
_self.$notfromext&&(e.srcElement||e.target)==this)return
_self.$mouseOver=!0,_self.disabled||_self.$updateState(e,"mouseover")}},this.$ext.onmouseout=function(e){
e=e||window.event
var tEl=e.explicitOriginalTarget||e.toElement
apf.isChildOf(this,tEl)||(_self.$mouseOver=!1,_self.$refMouseDown=0,_self.$mouseLeft=!0,_self.disabled||_self.$updateState(e,"mouseout"))

}}},this.$doBgSwitch=function(nr){if(this.background&&(this.$background[2]>=nr||4==nr)){4==nr&&(nr=this.$background[2]+1)


var strBG="vertical"==this.$background[1]?"0 -"+parseInt(this.$background[3])*(nr-1)+"px":"-"+parseInt(this.$background[3])*(nr-1)+"px 0"


this.$getLayoutNode("main","background",this.$ext).style.backgroundPosition=strBG}},this.$focus=function(){
this.$ext&&this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus")},this.$blur=function(e){this.$ext&&(this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),
e&&this.$updateState({}))},this.addEventListener("prop.disabled",function(e){this.$refKeyDown=this.$refMouseDown=0

}),this.$destroy=function(skinChange){!skinChange&&this.$ext&&(this.$ext.onmousedown=this.$ext.onmouseup=this.$ext.onmouseover=this.$ext.onmouseout=this.$ext.onclick=this.$ext.ondblclick=null)

}}.call(apf.BaseButton.prototype=new apf.StandardBinding),apf.BaseSimple=function(){this.$init(!0)},function(){
this.getValue=function(){return this.value}}.call(apf.BaseSimple.prototype=new apf.StandardBinding),apf.BaseStateButtons=function(){
function setButtonEvents(btn){btn.setAttribute("onmousedown","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, 'down', null, true);             apf.cancelBubble(event, o);              var o = apf.findHost(this).$ext;             if (o.onmousedown) o.onmousedown(event);             apf.cancelBubble(event, o);             apf.window.$mousedown(event);"),
btn.setAttribute("onmouseup","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, '', ['down'], true);"),
btn.setAttribute("onmouseover","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, 'hover', null, true);"),
btn.setAttribute("onmouseout","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, '', ['hover', 'down'], true);"),
btn.setAttribute("ondblclick","apf.stopPropagation(event);")}this.state="normal",this.edit=!1
var actions={min:["minimized","minimize","restore"],max:["maximized","maximize","restore"],edit:["edit","edit","closeedit"],
close:["closed","close","show"]}
this.$lastheight=null,this.$lastpos=null,this.$lastState={normal:!0},this.$booleanProperties.animate=!0,
this.$supportedProperties.push("buttons","animate","state"),this.close=function(){return this.setProperty("state",this.state.split("|").pushUnique("closed").join("|"),!1,!0),
this},this.minimize=function(){return this.setProperty("state",this.state.split("|").remove("maximized").remove("normal").pushUnique("minimized").join("|"),!1,!0),
this},this.maximize=function(){return this.setProperty("state",this.state.split("|").remove("minimized").remove("normal").pushUnique("maximized").join("|"),!1,!0),
this},this.restore=function(){return this.setProperty("state",this.state.split("|").remove("minimized").remove("maximized").pushUnique("normal").join("|"),!1,!0),
this},this.edit=function(value){return this.setProperty("state",this.state.split("|").pushUnique("edit").join("|"),!1,!0),
this},this.closeedit=function(value){return this.setProperty("state",this.state.split("|").remove("edit").join("|"),!1,!0),
this},this.$toggle=function(type){var c=actions[type][0]
this[actions[type][this.state.indexOf(c)>-1?2:1]]()},this.$propHandlers.refparent=function(value){"string"==typeof value?this.$refParent=self[value]&&self[value].$ext||document.getElementById(value):this.$refParent=value

},this.$propHandlers.maxconf=function(value){this.$maxconf=value.splitSafe(",")},this.$propHandlers.state=function(value,prop,force,reenter,noanim){
function setMax(){if(!_self.animstate){var w,h,pos,box,pDiff
if(_self.maxconf?(w=_self.$maxconf[0],h=_self.$maxconf[1],pos=["center"==_self.$maxconf[2]?(apf.getWindowWidth()-w)/2:_self.$maxconf[2],"center"==_self.$maxconf[3]?(apf.getWindowHeight()-h)/3:_self.$maxconf[3]]):(w=pNode==document.documentElement?window.innerWidth:pNode.offsetWidth,
h=pNode==document.documentElement?window.innerHeight:pNode.offsetHeight),pos||(pos=pNode!=htmlNode.offsetParent?apf.getAbsolutePosition(pNode,htmlNode.offsetParent):[0,0]),
"absolute"!=position){var diff=apf.getDiff(pNode)
w-=diff[0],h-=diff[0]}if(box=_self.$refParent?[0,0,0,0]:marginBox,pDiff=apf.getDiff(pNode),pNode.style.width=pNode.offsetWidth-pDiff[0]+"px",
pNode.style.height=pNode.offsetHeight-pDiff[1]+"px",!hasAnimated&&_self.$maxconf&&_self.$maxconf[4]&&apf.plane.show(htmlNode,!1,null,null,{
color:_self.$maxconf[4],opacity:_self.$maxconf[5],animate:_self.animate,protect:_self.$uniqueId}),_self.animate&&!hasAnimated)_self.animstate=1,
hasAnimated=!0,apf.tween.multi(htmlNode,{steps:15,anim:apf.tween.easeInOutCubic,interval:10,tweens:[{
type:"left",from:l,to:pos[0]-box[3]},{type:"top",from:t,to:pos[1]-box[0]},{type:"width",from:_self.$lastpos.px[2],
to:w+box[1]+box[3]-apf.getWidthDiff(_self.$ext)},{type:"height",from:_self.$lastpos.px[3],to:h+box[0]+box[2]-apf.getHeightDiff(_self.$ext)
}],oneach:function(){apf.hasSingleRszEvent&&apf.layout.forceResize(_self.$int)},onfinish:function(){_self.animstate=0,
_self.dispatchEvent("afterstatechange",{from:lastState,to:o}),apf.hasSingleRszEvent&&apf.layout.forceResize(_self.$int)

}})
else if(!_self.animstate){htmlNode.style.left=pos[0]-box[3]+"px",htmlNode.style.top=pos[1]-box[0]+"px"


var diff=apf.getDiff(_self.$ext)
htmlNode.style.width=w-diff[0]+box[1]+box[3]+"px",htmlNode.style.height=h-diff[1]+box[0]+box[2]+"px"}
}}var _self=this
if(!this.$amlLoaded)return void apf.queue.add("state"+this.$uniqueId,function(){_self.$propHandlers.state.call(_self,value,prop,force,reenter,noanim)

})
0==value&&(value="normal")
var i,pNode,position,l,t,o={},s=value.split("|"),lastState=this.$lastState,styleClass=[]
for(i=0;i<s.length;i++)o[s[i]]=!0
if(o.value=value,o.maximized||o.minimized||(o.normal=!0),!reenter&&this.dispatchEvent("beforestatechange",{
from:lastState,to:o})===!1)return this.state=lastState.value,!1
if(o.closed==this.visible&&this.setProperty("visible",!o.closed,!1,!0),o.normal!=lastState.normal||!o.normal&&(o.minimized!=lastState.minimized||o.maximized!=lastState.maximized)){
if(null!=this.$lastheight&&(this.$ext.style.height=this.$lastheight),this.$lastpos){if(apf.plane.hide(this.$uniqueId),
this.animate&&!noanim){var htmlNode=this.$ext
return position=apf.getStyle(htmlNode,"position"),"absolute"!=position?(l=parseInt(apf.getStyle(htmlNode,"left"))||0,
t=parseInt(apf.getStyle(htmlNode,"top"))||0):(l=htmlNode.offsetLeft,t=htmlNode.offsetTop),this.animstate=1,
void apf.tween.multi(htmlNode,{steps:15,anim:apf.tween.easeInOutCubic,interval:10,tweens:[{type:"left",
from:l,to:this.$lastpos.px[0]},{type:"top",from:t,to:this.$lastpos.px[1]},{type:"width",from:this.$ext.offsetWidth,
to:this.$lastpos.px[2]},{type:"height",from:this.$ext.offsetHeight,to:this.$lastpos.px[3]}],oneach:function(){
apf.hasSingleRszEvent&&apf.layout.forceResize(_self.$int)},onfinish:function(){_self.$lastpos.parentNode.insertBefore(_self.$ext,_self.$lastpos.beforeNode),
_self.$placeHolder&&_self.$placeHolder.parentNode.removeChild(_self.$placeHolder),_self.$propHandlers.state.call(_self,value,null,null,!0,!0)

}})}this.animate||(apf.plane.hide(this.$uniqueId,!0),_self.$lastpos.parentNode.insertBefore(_self.$ext,_self.$lastpos.beforeNode),
_self.$placeHolder&&_self.$placeHolder.parentNode.removeChild(_self.$placeHolder)),this.$ext.style.position=this.$lastpos.pos,
this.$ext.style.left=this.$lastpos.css[0],this.$ext.style.top=this.$lastpos.css[1],this.$ext.style.width=this.$lastpos.css[2],
this.$ext.style.height=this.$lastpos.css[3],pNode=this.$lastpos.parentNode,pNode.style.width=this.$lastpos.parent[0],
pNode.style.height=this.$lastpos.parent[1],pNode.style.overflow=this.$lastpos.parent[2]}this.aData&&this.aData.restore&&this.aData.restore(),
apf.layout&&apf.layout.play(this.$pHtmlNode),this.$lastheight=this.$lastpos=null,o.normal&&styleClass.push("",this.$baseCSSname+"Max",this.$baseCSSname+"Min")

}if(o.minimized!=lastState.minimized&&(o.minimized?(styleClass.unshift(this.$baseCSSname+"Min",this.$baseCSSname+"Max",this.$baseCSSname+"Edit"),
this.aData&&this.aData.minimize&&this.aData.minimize(this.collapsedHeight),this.aData&&this.aData.minimize||(this.$lastheight=this.$ext.style.height,
this.$ext.style.height=Math.max(0,this.collapsedHeight-apf.getHeightDiff(this.$ext))+"px"),this.hasFocus()&&apf.window.moveNext(null,this,!0)):(styleClass.push(this.$baseCSSname+"Min"),
$setTimeout(function(){apf.window.$focusLast(_self)}))),o.maximized!=lastState.maximized)if(o.maximized){
styleClass.unshift(this.$baseCSSname+"Max",this.$baseCSSname+"Min",this.$baseCSSname+"Edit"),pNode=this.$refParent,
pNode||(pNode=this.$ext.offsetParent==document.body?document.documentElement:this.$ext.parentNode),this.animstate=0


var hasAnimated=!1,htmlNode=this.$ext,position=apf.getStyle(htmlNode,"position")
if("absolute"==position)pNode.style.overflow="hidden",l=htmlNode.offsetLeft,t=htmlNode.offsetTop
else{var pos=apf.getAbsolutePosition(htmlNode)
l=pos[0],t=pos[1]}this.$lastpos={css:[this.$ext.style.left,this.$ext.style.top,this.$ext.style.width,this.$ext.style.height,this.$ext.style.margin,this.$ext.style.zIndex],
px:[l,t,this.$ext.offsetWidth,this.$ext.offsetHeight],parent:[pNode.style.width,pNode.style.height,pNode.style.overflow],
pos:htmlNode.style.position,parentNode:pNode,beforeNode:this.$ext.nextSibling},this.parentNode.$layout&&(this.$placeHolder||(this.$placeHolder=document.createElement("div")),
this.$placeHolder.style.position=this.$lastpos.pos,this.$placeHolder.style.left=this.$lastpos.css[0],
this.$placeHolder.style.top=this.$lastpos.css[1],this.$placeHolder.style.width=this.$lastpos.px[2]+"px",
this.$placeHolder.style.height=this.$lastpos.px[3]+"px",this.$placeHolder.style.margin=this.$lastpos.css[4],
this.$placeHolder.style.zIndex=this.$lastpos.css[5],this.$pHtmlNode.insertBefore(this.$placeHolder,this.$ext),
htmlNode.style.position="absolute"),document.body.appendChild(htmlNode),htmlNode.style.left=l+"px",htmlNode.style.top=t+"px",
apf.layout&&apf.layout.pause(this.$pHtmlNode,setMax)}else styleClass.push(this.$baseCSSname+"Max")
if(o.edit!=lastState.edit)if(o.edit)styleClass.unshift(this.$baseCSSname+"Edit",this.$baseCSSname+"Max",this.$baseCSSname+"Min"),
this.btnedit&&(oButtons.edit.textContent="close"),this.dispatchEvent("editstart")
else{if(this.dispatchEvent("editstop")===!1)return!1
styleClass.push(this.$baseCSSname+"Edit"),1==styleClass.length&&styleClass.unshift(""),this.btnedit&&(oButtons.edit.textContent="edit")

}(styleClass.length||o.closed!=lastState.closed)&&(styleClass.length&&this.$setStyleClass(this.$ext,styleClass.shift(),styleClass),
o.edit&&(this.dispatchEvent("prop.visible",{value:!0}),_self.oSettings&&apf.layout.forceResize(_self.oSettings)),
(!o.maximized||!this.animate||lastState.maximized&&_self.animate)&&_self.dispatchEvent("afterstatechange",{
from:lastState,to:o}),this.$lastState=o,this.aData&&!o.maximized&&this.$purgeAlignment(),!this.animate&&apf.hasSingleRszEvent&&apf.layout&&apf.layout.forceResize(_self.$int))

}
var marginBox,oButtons={}
this.$propHandlers.buttons=function(value){if(this.$hasLayoutNode("button")){for(var buttons=value&&(value=value.replace(/(\|)\||\|$/,"$1")).split("|")||[],nodes=this.$buttons.childNodes,re=value&&new RegExp("("+value+")"),found={},idleNodes=[],i=0;i<nodes.length;i++)1==nodes[i].nodeType&&"DIV"==nodes[i].tagName&&(!nodes[i].getAttribute("button")||value&&nodes[i].className&&nodes[i].className.match(re)?found[RegExp.$1]=nodes[i]:(nodes[i].style.display="none",
this.$setStyleClass(nodes[i],"",["min","max","close","edit"]),idleNodes.push(nodes[i])))
for(i=0;i<buttons.length;i++)if(buttons[i])if(found[buttons[i]])this.$buttons.insertBefore(found[buttons[i]],this.$buttons.firstChild)
else{var btn=idleNodes.pop()
btn||(this.$getNewContext("button"),btn=this.$getLayoutNode("button"),btn.setAttribute("button","button"),
setButtonEvents.call(this,btn),btn=apf.insertHtmlNode(btn,this.$buttons)),this.$setStyleClass(btn,buttons[i],["min","max","close","edit"]),
btn.onclick=new Function("apf.lookup("+this.$uniqueId+").$toggle('"+buttons[i]+"')"),btn.style.display="block",
oButtons[buttons[i]]=btn,this.$buttons.insertBefore(btn,this.$buttons.firstChild)}marginBox=apf.getBox(apf.getStyle(this.$ext,"borderWidth"))

}},this.$initButtons=function(oExt){this.animate=apf.enableAnim,this.collapsedHeight=this.$getOption("Main","collapsed-height")


var oButtons=this.$getLayoutNode("main","buttons",oExt)
if(oButtons&&!apf.isIphone&&this.getAttribute("buttons")&&this.$hasLayoutNode("button"))for(var btn,len=(this.getAttribute("buttons")||"").split("|").length,i=0;i<len;i++)this.$getNewContext("button"),
btn=oButtons.appendChild(this.$getLayoutNode("button")),btn.setAttribute("button","button"),setButtonEvents.call(this,btn)

},this.addEventListener("DOMNodeRemovedFromDocument",function(e){for(var name in oButtons)oButtons[name].onclick=null

})},apf.__DELAYEDRENDER__=2048,apf.DelayedRender=function(){this.$regbase=this.$regbase|apf.__DELAYEDRENDER__,
this.$rendered=!1,this.$render=function(usedelay){this.$rendered||this.dispatchEvent("beforerender")!==!1&&(this["render-delay"]||usedelay?$setTimeout("apf.lookup("+this.$uniqueId+").$renderparse()",10):this.$renderparse())

},this.$renderparse=function(){this.$rendered||(this.$ext.style.visibility="hidden",this.childNodes.forEach(function(i){
i.$onInsertedIntoDocument()}),this.$rendered=!0,this.dispatchEvent("afterrender"),this.addEventListener("$event.afterrender",function(cb){
cb.call(this)}),this.$ext.style.visibility="")}
var f
this.addEventListener("prop.visible",f=function(){arguments[0].value&&(this.$render(),this.removeEventListener("prop.visible",f))

})},apf.GuiElement.propHandlers.render=function(value){this.hasFeature(apf.__DELAYEDRENDER__)||"runtime"!=value||(this.implement(apf.DelayedRender),
"page"!=this.localName&&(this.visible=!1,this.$ext.style.display="none"),"undefined"==typeof this["render-delay"]&&this.$setInheritedAttribute("render-delay"))

},apf.config.$inheritProperties["render-delay"]=1,apf.__FOCUSSABLE__=1<<26,apf.Focussable=function(){
this.$regbase=this.$regbase|apf.__FOCUSSABLE__,void 0==this.disabled&&(this.disabled=!1),this.setTabIndex=function(tabindex){
return apf.window.$removeFocus(this),apf.window.$addFocus(this,tabindex),this},this.focus=function(noset,e,nofix){
return noset?(!this.$focus||this.editable||e&&e.mouse&&this.$focussable!=apf.KEYBOARD_MOUSE||this.$focus(e),
this.dispatchEvent("focus",apf.extend({bubbles:!0},e)),this):(this.$isWindowContainer>-1?apf.window.$focusLast(this,e,!0):apf.window.$focus(this,e),
this)},this.blur=function(noset,e){return e&&!apf.isChildOf(e.fromElement,e.toElement)&&apf.popup.isShowing(this.$uniqueId)&&"menu"!=e.toElement.localName&&apf.popup.forceHide(),
this.$blur&&this.$blur(e),noset||apf.window.$blur(this),this.dispatchEvent("blur",apf.extend({bubbles:!e||!e.cancelBubble
},e)),this},this.hasFocus=function(){return apf.document.activeElement==this||this.$isWindowContainer&&(apf.document.activeElement||{}).$focusParent==this

}},apf.Interactive=function(){function dragStart(e,reparent){if(e||(e=event),reparent||_self.draggable&&!apf.dragMode){
dragOutline=!1
var host=apf.findHost(e.target)
if(!(host&&host.textselect||_self.dispatchEvent("beforedragstart",{htmlEvent:e})===!1)){apf.dragMode=!0,
reparent?(_self.dispatchEvent("beforedrag"),overThreshold=!0):overThreshold=!1,apf.popup.forceHide(),
posAbs="absolute|fixed".indexOf(apf.getStyle(_self.$ext,"position"))>-1,posAbs||(_self.$ext.style.position=posAbs?"absolute":"relative"),
_self.editable&&(posAbs=!0),posAbs&&!_self.aData&&apf.plane.show(dragOutline?oOutline:_self.$ext,e.reappend)


var ext=(reparent||oOutline&&oOutline.self)&&dragOutline?oOutline:_self.$ext,pos=posAbs?apf.getAbsolutePosition(ext,ext.offsetParent,!0):[parseInt(apf.getStyle(ext,"left"))||0,parseInt(apf.getStyle(ext,"top"))||0]


return startGeo=[ext.style.left,ext.style.top,ext.style.right,ext.style.bottom,ext.style.width,ext.style.height],
nX=pos[0]-(oX=e.clientX),nY=pos[1]-(oY=e.clientY),reparent||oOutline&&oOutline.self||(_self.$ext.style.right&&(_self.$ext.style.left=pos[0]+"px",
_self.$ext.style.right=""),_self.$ext.style.bottom&&(_self.$ext.style.top=pos[1]+"px",_self.$ext.style.bottom="")),
document.onmousemove=dragMove,document.onmouseup=function(e,cancel){document.onmousemove=document.onmouseup=null,
posAbs&&!_self.aData&&apf.plane.hide()
var htmlNode=dragOutline?oOutline:_self.$ext
if(overThreshold&&!_self.$multidrag)if(cancel){var ext=_self.$ext
ext.style.left=startGeo[0],ext.style.top=startGeo[1],ext.style.right=startGeo[2],ext.style.bottom=startGeo[3],
ext.style.width=startGeo[4],ext.style.height=startGeo[5],_self.dispatchEvent&&_self.dispatchEvent("dragcancel",{
htmlNode:htmlNode,htmlEvent:e})}else _self.setProperty?updateProperties():dragOutline&&(_self.$ext.style.left=l+"px",
_self.$ext.style.top=t+"px")
l=t=w=h=null,posAbs||(_self.$ext.style.position="relative"),_self.showdragging&&apf.setStyleClass(_self.$ext,"",["dragging"]),
posAbs&&dragOutline&&!oOutline.self&&(oOutline.style.display="none"),apf.dragMode=!1,!cancel&&_self.dispatchEvent&&overThreshold&&_self.dispatchEvent("afterdrag",{
htmlNode:htmlNode,htmlEvent:e})},reparent&&document.onmousemove(e),!1}}}function dragMove(e){e||(e=event),
!overThreshold&&_self.showdragging&&apf.setStyleClass(_self.$ext,"dragging")
var distance,dx=e.clientX-oX,dy=e.clientY-oY
if(overThreshold||!((distance=dx*dx>dy*dy?dx:dy)*distance<2)){if(!overThreshold&&(dragOutline&&"block"!=oOutline.style.display&&(oOutline.style.display="block"),
_self.dispatchEvent&&_self.dispatchEvent("beforedrag",{htmlEvent:e})===!1))return void document.onmouseup()


var oHtml=dragOutline?oOutline:_self.$ext
if(oHtml.style.left=(l=e.clientX+nX)+"px",oHtml.style.top=(t=e.clientY+nY)+"px",_self.realtime){var change=_self.$stick={}


_self.$showDrag(l,t,oHtml,e,change),"undefined"!=typeof change.l&&(l=change.l,oHtml.style.left=l+"px"),
"undefined"!=typeof change.t&&(t=change.t,oHtml.style.top=t+"px")}overThreshold=!0}}function resizeStart(e,options){
if(e||(e=event),!(!_self.resizable||String(_self.height).indexOf("%")>-1&&"vbox"==_self.parentNode.localName||String(_self.width).indexOf("%")>-1&&"hbox"==_self.parentNode.localName)){
resizeOutline=!1
var ext=_self.$ext
if(!resizeOutline){var diff=apf.getDiff(ext)
hordiff=diff[0],verdiff=diff[1]}startPos=apf.getAbsolutePosition(ext),startPos.push(ext.offsetWidth),
startPos.push(ext.offsetHeight),myPos=apf.getAbsolutePosition(ext,ext.offsetParent,!0),startGeo=[ext.style.left,ext.style.top,ext.style.right,ext.style.bottom,ext.style.width,ext.style.height]


var resizeType,sLeft=0,sTop=0,x=(oX=e.clientX)-startPos[0]+sLeft+document.documentElement.scrollLeft,y=(oY=e.clientY)-startPos[1]+sTop+document.documentElement.scrollTop


if(options&&options.resizeType?(posAbs="absolute|fixed".indexOf(apf.getStyle(ext,"position"))>-1,resizeType=options.resizeType):resizeType=getResizeType.call(ext,x,y),
rX=x,rY=y,resizeType&&(!_self.dispatchEvent||_self.dispatchEvent("beforeresize",{type:resizeType,setType:function(type){
resizeType=type}})!==!1)){apf.popup.forceHide(),apf.dragMode=!0,overThreshold=!1,we=resizeType.indexOf("w")>-1,
no=resizeType.indexOf("n")>-1,ea=resizeType.indexOf("e")>-1,so=resizeType.indexOf("s")>-1,_self.minwidth||(_self.minwidth=0),
_self.minheight||(_self.minheight=0),_self.maxwidth||(_self.maxwidth=1e4),_self.maxheight||(_self.maxheight=1e4),
posAbs&&(lMax=myPos[0]+startPos[2],tMax=myPos[1]+startPos[3],lMin=myPos[0]+startPos[2],tMin=myPos[1]+startPos[3]),
posAbs&&apf.plane.show(resizeOutline?oOutline:ext)
return ext.style.right&&(ext.style.left=myPos[0]+"px"),ext.style.bottom&&(ext.style.top=myPos[1]+"px"),
options&&options.nocursor||(null===lastCursor&&(lastCursor=document.body.style.cursor),document.body.style.cursor=getCssCursor(resizeType)+"-resize"),
document.onmousemove=resizeMove,document.onmouseup=function(e,cancel){if(document.onmousemove=document.onmouseup=null,
posAbs&&apf.plane.hide(),clearTimeout(timer),resizeOutline){var diff=apf.getDiff(_self.$ext)
hordiff=diff[0],verdiff=diff[1]}if(cancel){var ext=_self.$ext
ext.style.left=startGeo[0],ext.style.top=startGeo[1],ext.style.right=startGeo[2],ext.style.bottom=startGeo[3],
ext.style.width=startGeo[4],ext.style.height=startGeo[5],_self.dispatchEvent&&_self.dispatchEvent("resizecancel")

}else doResize(e||event,!0)
_self.setProperty&&updateProperties(),document.body.style.cursor=lastCursor||"",lastCursor=null,resizeOutline&&(oOutline.style.display="none"),
apf.dragMode=!1,!cancel&&_self.dispatchEvent&&_self.dispatchEvent("afterresize",{l:l,t:t,w:w+hordiff,
h:h+verdiff}),l=t=w=h=null},!1}}}function updateProperties(left,top,width,height,hdiff,vdiff,right,bottom){
"undefined"==typeof left?(left=l,top=t,width=w,height=h,vdiff=verdiff,hdiff=hordiff):posAbs=!0
var hasLeft=_self.left||0===_self.left,hasRight=_self.right||0===_self.right,hasBottom=_self.bottom||0===_self.bottom,hasTop=_self.top||0===_self.top


if(posAbs){var htmlNode=oOutline&&"block"==oOutline.style.display?oOutline:_self.$ext
hasRight&&!right&&0!==right&&(right=apf.getHtmlRight(htmlNode)),hasBottom&&!bottom&&0!==bottom&&(bottom=apf.getHtmlBottom(htmlNode)),
hasRight&&(_self.setProperty("right",right,0,_self.editable),_self.left||(htmlNode.style.left="")),hasBottom&&(_self.setProperty("bottom",bottom,0,_self.editable),
_self.top||(htmlNode.style.top="")),!left&&0!==left||hasRight&&!hasLeft||_self.setProperty("left",left,0,_self.editable),
!top&&0!==top||hasBottom&&!hasTop||_self.setProperty("top",top,0,_self.editable)}void 0==hdiff||!width||hasLeft&&hasRight||_self.setProperty("width",width+hdiff,0,_self.editable),
void 0==vdiff||!height||hasTop&&hasBottom||_self.setProperty("height",height+vdiff,0,_self.editable)}
function resizeMove(e){if(e||(e=event),clearTimeout(timer),lastTime&&(new Date).getTime()-lastTime<(resizeOutline?6:apf.mouseEventBuffer)){
var z={clientX:e.clientX,clientY:e.clientY}
return void(timer=$setTimeout(function(){doResize(z)},10))}lastTime=(new Date).getTime(),doResize(e),
_self.dispatchEvent&&_self.dispatchEvent("resize")}function doResize(e,force){var oHtml=resizeOutline&&!force?oOutline:_self.$ext,sLeft=document.documentElement.scrollLeft,sTop=document.documentElement.scrollTop


if(we&&(posAbs&&(oHtml.style.left=(l=max(lMin-_self.maxwidth,min(lMax-_self.minwidth,myPos[0]+e.clientX-oX+sLeft)))+"px"),
oHtml.style.width=(w=min(_self.maxwidth-hordiff,max(hordiff,_self.minwidth,startPos[2]-(e.clientX-oX)+sLeft)-hordiff))+"px"),
no&&(posAbs&&(oHtml.style.top=(t=max(tMin-_self.maxheight,min(tMax-_self.minheight,myPos[1]+e.clientY-oY+sTop)))+"px"),
oHtml.style.height=(h=min(_self.maxheight-verdiff,max(verdiff,_self.minheight,startPos[3]-(e.clientY-oY)+sTop)-verdiff))+"px"),
ea&&(oHtml.style.width=(w=min(_self.maxwidth-hordiff,max(hordiff,_self.minwidth,e.clientX-startPos[0]+(startPos[2]-rX)+sLeft)-hordiff))+"px"),
so&&(oHtml.style.height=(h=min(_self.maxheight-verdiff,max(verdiff,_self.minheight,e.clientY-startPos[1]+(startPos[3]-rY)+sTop)-verdiff))+"px"),
_self.parentNode&&"table"==_self.parentNode.localName&&(updateProperties(),apf.layout.processQueue()),
_self.realtime){var change=_self.$stick={}
_self.$showResize(l||apf.getHtmlLeft(oHtml),t||apf.getHtmlTop(oHtml),w&&w+hordiff||oHtml.offsetWidth,h&&h+verdiff||oHtml.offsetHeight,e,change,we,no,ea,so),
posAbs&&we&&"undefined"!=typeof change.l&&(oHtml.style.left=(l=max(lMin-_self.maxwidth,min(lMax-_self.minwidth,change.l)))+"px"),
posAbs&&no&&"undefined"!=typeof change.t&&(oHtml.style.top=(t=max(tMin-_self.maxheight,min(tMax-_self.minheight,change.t)))+"px"),
"undefined"!=typeof change.w&&(oHtml.style.width=(w=min(_self.maxwidth-hordiff,max(hordiff,_self.minwidth,change.w)-hordiff))+"px"),
"undefined"!=typeof change.h&&(oHtml.style.height=(h=min(_self.maxheight-verdiff,max(verdiff,_self.minheight,change.h)-verdiff))+"px")

}apf.hasSingleRszEvent&&apf.layout.forceResize(_self.$int)}function getResizeType(x,y){var cursor="",tcursor=""


return posAbs="absolute|fixed".indexOf(apf.getStyle(_self.$ext,"position"))>-1,("true"==_self.resizable||"vertical"==_self.resizable||_self.resizable.indexOf("top")>-1||_self.resizable.indexOf("bottom")>-1)&&(y<rszborder+marginBox[0]&&_self.resizable.indexOf("bottom")==-1?cursor=posAbs?"n":"":y>this.offsetHeight-(rszcorner||rszborder)&&_self.resizable.indexOf("top")==-1&&(cursor="s")),
("true"==_self.resizable||"horizontal"==_self.resizable||_self.resizable.indexOf("left")>-1||_self.resizable.indexOf("right")>-1)&&(x<(cursor?rszcorner:rszborder)+marginBox[0]&&_self.resizable.indexOf("right")==-1?cursor+=tcursor+(posAbs?"w":""):x>this.offsetWidth-(cursor||tcursor?rszcorner:rszborder)&&_self.resizable.indexOf("left")==-1&&(cursor+=tcursor+"e")),
cursor}function resizeIndicate(e){if(e||(e=event),_self.resizable&&!_self.editable&&!document.onmousemove){
var pos=apf.getAbsolutePosition(_self.$ext),sLeft=0,sTop=0,x=e.clientX-pos[0]+sLeft+document.documentElement.scrollLeft,y=e.clientY-pos[1]+sTop+document.documentElement.scrollTop


originalCursor||(originalCursor=apf.getStyle(this,"cursor"))
var cursor=getResizeType.call(_self.$ext,x,y)
this.style.cursor=cursor?getCssCursor(cursor)+"-resize":originalCursor||"default"}}function getCssCursor(cursor){
var cssCursor=cursor
return apf.isWebkit&&("se"==cursor||"nw"==cursor?cssCursor="nwse":"sw"==cursor||"ne"==cursor?cssCursor="nesw":"s"==cursor||"n"==cursor?cssCursor="ns":"e"!=cursor&&"w"!=cursor||(cssCursor="ew")),
cssCursor}var nX,nY,rX,rY,startPos,l,t,lMax,tMax,lMin,tMin,w,h,we,no,ea,so,rszborder,rszcorner,marginBox,verdiff,hordiff,posAbs,oX,oY,overThreshold,dragOutline,resizeOutline,myPos,startGeo,lastCursor=null,_self=this


this.$dragStart=function(e,reparent){var nativeEvent=e||event;(reparent||2!=nativeEvent.button)&&dragStart.apply(nativeEvent.srcElement||this,arguments)

},this.$propHandlers.draggable=function(value){apf.isFalse(value)?this.draggable=value=!1:apf.isTrue(value)&&(this.draggable=value=!0)


var o=this.editable?this.$ext:this.oDrag||this.$ext
value?apf.addListener(o,"mousedown",this.$dragStart):apf.removeListener(o,"mousedown",this.$dragStart),
1&o.interactive||(o.interactive=(o.interactive||0)+1)},this.$propHandlers.resizable=function(value){apf.isFalse(value)?this.resizable=!1:apf.isTrue(value)&&(this.resizable="true"),
this.$ext.style.cursor=""
var o=this.oResize||this.$ext
2&o.interactive||(_self.editable||(apf.addListener(o,"mousedown",function(){resizeStart.apply(o,arguments)

}),apf.addListener(o,"mousemove",function(){resizeIndicate.apply(o,arguments)})),o.interactive=(o.interactive||0)+2,
rszborder=this.$getOption&&parseInt(this.$getOption("Main","resize-border"))||3,rszcorner=this.$getOption&&parseInt(this.$getOption("Main","resize-corner"))||12,
marginBox=apf.getBox(apf.getStyle(this.$ext,"borderWidth")))},this.$cancelInteractive=function(){document.onmouseup(null,!0)

},this.$resizeStart=resizeStart,this.$updateProperties=updateProperties
var lastTime,timer,originalCursor,oOutline,min=Math.min,max=Math.max},apf.GuiElement.propHandlers.resizable=function(value){
this.implement(apf.Interactive),this.$propHandlers.resizable.apply(this,arguments)},apf.GuiElement.propHandlers.draggable=function(value){
this.implement(apf.Interactive),this.$propHandlers.draggable.apply(this,arguments)},apf.window=function(){
function trackChildFocus(e){return"blur"==e.name?void(e.srcElement!=this&&this.$blur&&this.$blur()):(e.srcElement==this||!this.$focus||e&&e.mouse&&this.$focussable!=apf.KEYBOARD_MOUSE||this.$focus(),
e.srcElement==this||e.trackedChild?void(e.trackedChild=!0):(this.$lastFocussed=e.srcElement,void(this.localName&&this.localName.indexOf("window")>-1&&(e.trackedChild=!0))))

}function findFocusParent(amlNode){var node=amlNode
do node=node.parentNode
while(node&&!node.$isWindowContainer)
return node||apf.document.documentElement}function moveFocus(e){e&&e.currentTarget!=this||(this.$isWindowContainer?apf.window.$tabList.pushUnique(this):apf.window.$addFocus(this,this.tabindex,!0))

}function removeFocus(e){if(!e||e.currentTarget==this&&!e.$doOnlyAdmin){var list=this.$focusParent.$tabList,nodes=this.childNodes


if(nodes)for(var i=0,l=nodes.length;i<l;i++)list.remove(nodes[i])
return apf.window.activeElement==this&&apf.window.moveNext(),this.$isWindowContainer?void apf.window.$tabList.remove(this):void(this.$focusParent&&list.remove(this))

}}this.$uniqueId=apf.all.push(this),this.apf=apf,this.toString=function(){return"[apf.window]"},this.show=function(){
apf.isDeskrun&&jdwin.Show()},this.hide=function(){apf.isDeskrun?jdwin.Hide():this.win&&this.win.close()

},this.focus=function(){apf.isDeskrun?jdwin.SetFocus():window.focus()},this.setIcon=function(url){apf.isDeskrun&&(jdwin.icon=parseInt(url)==url?parseInt(url):url)

},this.setTitle=function(value){this.title=value||"",apf.isDeskrun?jdwin.caption=value:document.title=value||""

},this.loadAml=function(x){"deskrun"==x.localName&&this.loadDeskRun(x)},this.vManager=new apf.visibilitymanager,
this.zManager=new apf.zmanager,this.$tabList=[],this.$addFocus=function(amlNode,tabindex,isAdmin){if(!isAdmin&&(amlNode.addEventListener("DOMNodeInserted",moveFocus),
amlNode.addEventListener("DOMNodeRemoved",removeFocus),amlNode.$isWindowContainer>-2)){if(amlNode.addEventListener("focus",trackChildFocus),
amlNode.addEventListener("blur",trackChildFocus),amlNode.$focusParent=amlNode,amlNode.$isWindowContainer>-1)return amlNode.$tabList||(amlNode.$tabList=[amlNode]),
void this.$tabList.push(amlNode)
amlNode.$tabList=[amlNode]}var fParent=findFocusParent(amlNode),list=fParent.$tabList
amlNode.$isWindowContainer?amlNode.$focusParent2=fParent:amlNode.$focusParent=fParent,list[tabindex]?list.insertIndex(amlNode,tabindex):tabindex||0===parseInt(tabindex)?list[tabindex]=amlNode:list.push(amlNode)

},this.$removeFocus=function(amlNode){amlNode.$focusParent&&(amlNode.$focusParent.$tabList.remove(amlNode),
amlNode.$isWindowContainer||(amlNode.removeEventListener("DOMNodeInserted",moveFocus),amlNode.removeEventListener("DOMNodeRemoved",removeFocus)),
amlNode.$isWindowContainer>-2&&(amlNode.removeEventListener("focus",trackChildFocus),amlNode.removeEventListener("blur",trackChildFocus)))

}
var focusLoopDetect
this.$focus=function(amlNode,e,force){var aEl=this.activeElement
if(aEl!=amlNode||force){if(this.$settingFocus=amlNode,e||(e={}),e.toElement=amlNode,e.fromElement=aEl,
aEl&&aEl!=amlNode&&focusLoopDetect!=aEl&&(focusLoopDetect=aEl,aEl.blur(!0,e),focusLoopDetect!=aEl))return!1


amlNode.$focussable==apf.MENU&&apf.activeElement||(apf.activeElement=this.document.activeElement=this.document.documentElement.$lastFocussed=amlNode),
(apf.window.activeElement=amlNode).focus(!0,e),this.$settingFocus=null,apf.dispatchEvent("movefocus",{
toElement:amlNode})}},this.$blur=function(amlNode){var aEl=this.activeElement
return aEl==amlNode&&(aEl.$focusParent.$lastFocussed=null,aEl.$focussable!=apf.MENU&&(apf.activeElement=this.document.activeElement=null),
apf.window.activeElement=null,void apf.dispatchEvent("movefocus",{fromElement:amlNode}))}
var lastFocusParent
this.$focusDefault=function(amlNode,e){var fParent=findFocusParent(amlNode)
this.$focusLast(fParent,e)},this.$focusRoot=function(e){var docEl=apf.document.documentElement
this.$focusLast(docEl,e)===!1},this.$focusLast=function(amlNode,e,ignoreVisible){var lf=amlNode.$lastFocussed


if(lf&&lf.parentNode&&lf.$focussable===!0&&(ignoreVisible||lf.$ext.offsetHeight))this.$focus(lf,e,!0)
else{for(var next,skip,node=amlNode;node;){if(!skip&&node.focussable!==!1&&node.$focussable===!0&&!node.$tabList&&(ignoreVisible||node.$ext&&node.$ext.offsetHeight)&&node.disabled<1){
this.$focus(node,e,!0)
break}if(next=!skip&&node.firstChild||!(skip=!1)&&node.nextSibling)node=next,node.$isWindowContainer>0&&(skip=!0)
else{if(node==amlNode)return void(node.$isWindowContainer&&this.$focus(node,e,!0))
do node=node.parentNode
while(node&&!node.nextSibling&&node!=amlNode&&!node.$isWindowContainer)
if(node==amlNode)return void(node.$isWindowContainer&&this.$focus(node,e,!0))
if(node){if(node.$isWindowContainer){this.$focus(node,e,!0)
break}node=node.nextSibling}}}node||this.$focus(apf.document.documentElement)}},this.hasFocus=function(amlNode){
return this.activeElement==amlNode},this.moveNext=function(shiftKey,relObject,switchWindows,e){if(switchWindows&&apf.window.activeElement){
var p=apf.window.activeElement.$focusParent
if(p.visible&&p.modal)return!1}var dir,start,next,amlNode=relObject||apf.window.activeElement,fParent=amlNode?switchWindows&&amlNode.$isWindowContainer&&amlNode.$isWindowContainer!=-1?apf.window:e&&e.innerList?amlNode.$focusParent:amlNode.$focusParent2||amlNode.$focusParent:apf.document.documentElement,list=fParent.$tabList


if(amlNode&&(switchWindows||amlNode!=apf.document.documentElement)){if(start=(list||[]).indexOf(amlNode),
start==-1)return}else start=-1
if(this.activeElement==amlNode&&1==list.length||0==list.length)return!1
dir=shiftKey?-1:1,next=start,start<0&&(start=0)
do{if(next+=dir,next>=list.length?next=0:next<0&&(next=list.length-1),start==next&&amlNode)return list[0].$isWindowContainer&&this.$focus(list[0],e),
!1
amlNode=list[next]}while(amlNode&&(amlNode.disabled>0||amlNode==apf.window.activeElement||(switchWindows?!amlNode.visible:amlNode.$ext&&!amlNode.$ext.offsetHeight)||amlNode.focussable===!1||switchWindows&&!amlNode.$tabList.length))


amlNode&&(fParent==apf.window&&amlNode.$isWindowContainer!=-2?this.$focusLast(amlNode,{mouse:!0},switchWindows):((e||(e={})).shiftKey=shiftKey,
this.$focus(amlNode,e)))},this.focusDefault=function(){this.moveNext()===!1&&this.moveNext(null,apf.document.documentElement,!0)

},apf.addListener(window,"beforeunload",function(){return apf.dispatchEvent("exit")}),apf.addListener(window,"unload",function(){
apf&&(apf.window.isExiting=!0)}),apf.addListener(document,"contextmenu",function(e){e||(e=event)
var pos,ev,amlNode=apf.findHost(e.srcElement||e.target)||apf.window.activeElement||apf.document&&apf.document.documentElement


return(!amlNode||"menu"!=amlNode.localName)&&(apf.contextMenuKeyboard?(pos=amlNode?amlNode.selected?apf.getAbsolutePosition(amlNode.$selected):apf.getAbsolutePosition(amlNode.$ext||amlNode.$pHtmlNode):[0,0],
ev={x:pos[0]+10+document.documentElement.scrollLeft,y:pos[1]+10+document.documentElement.scrollTop,amlNode:amlNode,
htmlEvent:e}):ev=e.htmlEvent?e:{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop,
htmlEvent:e},ev.bubbles=!0,apf.contextMenuKeyboard=null,(amlNode||apf).dispatchEvent("contextmenu",ev)===!1||ev.returnValue===!1?(e.preventDefault&&e.preventDefault(),
!1):apf.config.disableRightClick?(e.preventDefault&&e.preventDefault(),!1):void 0)}),apf.addListener(document,"mouseup",function(e){
e||(e=event),apf.dispatchEvent("mouseup",{htmlEvent:e})})
var ta={INPUT:1,TEXTAREA:1,SELECT:1,EMBED:1,OBJECT:1,PRE:1}
apf.addListener(document,"mousedown",this.$mousedown=function(e){e||(e=event)
var p,amlNode=apf.findHost(e.srcElement||e.target)
apf.popup.$mousedownHandler(amlNode,e),amlNode===!1&&(amlNode=apf.window.activeElement)
for(var eventTarget=amlNode;amlNode&&!amlNode.focussable;)amlNode=amlNode.parentNode
amlNode&&(amlNode.$focussable&&amlNode.focussable!==!1||2==amlNode.canHaveChildren||amlNode.$focusParent)||!apf.config.allowBlur?amlNode&&((p=apf.window.activeElement&&apf.window.activeElement.$focusParent||lastFocusParent)&&p.visible&&p.modal&&amlNode.$focusParent!=p&&amlNode.$isWindowContainer!=-1?apf.window.$focusLast(p,{
mouse:!0,ctrlKey:e.ctrlKey}):!amlNode&&apf.window.activeElement?apf.window.$focusRoot():amlNode.$isWindowContainer==-1?amlNode.$tabList.length?apf.window.moveNext(null,amlNode.$tabList[0],null,{
mouse:!0,innerList:!0}):apf.window.$focus(amlNode):(void 0==amlNode.disabled||amlNode.disabled<1)&&amlNode.focussable!==!1&&(amlNode.$focussable?apf.window.$focus(amlNode,{
mouse:!0,ctrlKey:e.ctrlKey}):2==amlNode.canHaveChildren&&(apf.config.allowBlur&&apf.window.activeElement&&apf.window.activeElement.$focusParent==amlNode||apf.window.$focusLast(amlNode,{
mouse:!0,ctrlKey:e.ctrlKey})))):(lastFocusParent=null,apf.window.activeElement&&apf.window.activeElement.blur()),
amlNode=eventTarget,apf.dispatchEvent("mousedown",{htmlEvent:e,amlNode:amlNode||apf.document.documentElement
})
var canSelect=!((!apf.document&&(!apf.isParsingPartial||amlNode)||apf.dragMode)&&!ta[e.target&&e.target.tagName])


if(canSelect&&amlNode){!e.target&&e.srcElement&&(e.target={})
var isTextInput=(ta[e.target.tagName]||"true"==e.target.contentEditable)&&!e.target.disabled||amlNode.$isTextInput&&amlNode.$isTextInput(e)&&amlNode.disabled<1


apf.config.allowSelect||isTextInput||amlNode.nodeType==amlNode.NODE_PROCESSING_INSTRUCTION||amlNode.textselect||(canSelect=!1)

}if(!amlNode||"editor::ace"!==amlNode.name&&"c9terminalcontainer"!=amlNode["class"]||(canSelect=!0),!canSelect&&2!=e.button){
e.preventDefault&&e.preventDefault()
try{document.activeElement&&"true"==document.activeElement.contentEditable&&document.activeElement.blur()

}catch(e){}}}),apf.addListener(document,"selectstart",function(e){if(apf.isIE){e||(e=event)
var amlNode=apf.findHost(e.srcElement),canSelect=!(!apf.document&&(!apf.isParsingPartial||amlNode)||apf.dragMode)


return canSelect&&(apf.config.allowSelect||!amlNode||amlNode.nodeType==amlNode.NODE_PROCESSING_INSTRUCTION||amlNode.textselect||(canSelect=!1)),
canSelect?void 0:(e.returnValue=!1,!1)}}),apf.addListener(document,"keyup",this.$keyup=function(e){e||(e=event)


var ev={keyCode:e.keyCode,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altkey,htmlEvent:e,
bubbles:!0},aEl=apf.document&&apf.window.activeElement
if((aEl&&!aEl.disableKeyboard?aEl.dispatchEvent("keyup",ev):apf.dispatchEvent("keyup",ev))===!1)return apf.preventDefault(e),
!1})
var wheel=this.$mousewheel=function(e){e||(e=event)
var delta=null
if(e.wheelDelta?(delta=e.wheelDelta/120,apf.isOpera&&(delta*=-1)):e.detail&&(delta=-e.detail/3),null!==delta){
var ev={delta:delta,target:e.target||e.srcElement,button:e.button,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,
metaKey:e.metaKey,altKey:e.altKey,bubbles:!0,htmlEvent:e},amlNode=apf.findHost(e.srcElement||e.target),res=(amlNode||apf).dispatchEvent("mousescroll",ev)


res!==!1&&ev.returnValue!==!1||(e.preventDefault&&e.preventDefault(),e.returnValue=!1)}}
document.addEventListener&&document.addEventListener("DOMMouseScroll",wheel,!1),window.onmousewheel=document.onmousewheel=wheel


var keyPressed=!1
apf.addListener(window,"blur",function(e){keyPressed=!1}),apf.addListener(document,"keyup",function(e){
if(e=e||event,keyPressed&&(keyPressed=!1,e.ctrlKey&&9==e.keyCode&&apf.window.activeElement)){var w=apf.window.activeElement.$focusParent


if(w.modal)return e.preventDefault&&e.preventDefault(),!1
if(apf.activeElement&&apf.activeElement.editor)return
return apf.window.moveNext(e.shiftKey,apf.window.activeElement.$focusParent,!0),w=apf.window.activeElement.$focusParent,
w&&w.bringToFront&&w.bringToFront(),e.preventDefault&&e.preventDefault(),!1}}),apf.addListener(document,"keydown",this.$keydown=function(e){
e=e||event,keyPressed=!0,93==e.keyCode&&(apf.contextMenuKeyboard=!0)
var amlNode=apf.window.activeElement,htmlNode=e.explicitOriginalTarget||e.srcElement||e.target,isTextInput=(ta[htmlNode.tagName]||"true"==htmlNode.contentEditable||"plaintext-only"==htmlNode.contentEditable)&&!htmlNode.disabled||amlNode&&amlNode.$isTextInput&&amlNode.$isTextInput(e)&&amlNode.disabled<1,eInfo={
ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,altKey:e.altKey,keyCode:e.keyCode,htmlEvent:e,
isTextInput:isTextInput,bubbles:!0}
delete eInfo.currentTarget
var aEl=amlNode
if((!aEl||aEl.disableKeyboard||aEl.editable?apf.dispatchEvent("keydown",eInfo):aEl.dispatchEvent("keydown",eInfo))===!1)return apf.stopEvent(e),
!1
if((!apf.config.disableTabbing||apf.window.activeElement)&&9==e.keyCode){if(e.ctrlKey&&apf.window.activeElement){
var w=apf.window.activeElement.$focusParent
if(w.modal)return e.preventDefault&&e.preventDefault(),!1
apf.window.moveNext(e.shiftKey,apf.window.activeElement.$focusParent,!0),w=apf.window.activeElement.$focusParent,
w&&w.bringToFront&&w.bringToFront()}else apf.window.activeElement&&"menu"==apf.window.activeElement.tagName||apf.window.moveNext(e.shiftKey)


return e.preventDefault&&e.preventDefault(),!1}apf.isMac?e.metaKey:e.altKey
return apf.config.disableBackspace&&8==e.keyCode&&!isTextInput&&(e.returnValue=!1),!apf.config.disableF5||116!=e.keyCode&&117!=e.keyCode||(e.preventDefault(),
e.stopPropagation()),27==e.keyCode&&(e.returnValue=!1),!apf.config.allowSelect&&e.shiftKey&&e.keyCode>32&&e.keyCode<41&&!isTextInput&&(e.returnValue=!1),
e.returnValue===!1&&e.preventDefault&&e.preventDefault(),e.returnValue}),apf.document={},this.init=function(strAml){
apf.document=this.document=new apf.AmlDocument,this.document.documentElement=new apf.application,this.document.documentElement.ownerDocument=this.document,
this.document.appendChild(this.document.documentElement)},this.destroy=function(){}},apf.window.prototype=(new apf.Class).$init(),
apf.window=new apf.window,apf.runGecko=function(){apf.getHtmlLeft=function(oHtml){return oHtml.offsetLeft+(parseInt(apf.getStyle(oHtml.parentNode,"borderLeftWidth"))||0)

},apf.getHtmlRight=function(oHtml){var p
return("BODY"==(p=oHtml.offsetParent).tagName?apf.getWindowWidth():p.offsetWidth)-oHtml.offsetLeft-oHtml.offsetWidth-2*(parseInt(apf.getStyle(p,"borderLeftWidth"))||0)-(parseInt(apf.getStyle(p,"borderRightWidth"))||0)

},apf.getHtmlTop=function(oHtml){return oHtml.offsetTop+(parseInt(apf.getStyle(oHtml.parentNode,"borderTopWidth"))||0)

},apf.getHtmlBottom=function(oHtml){var p
return("BODY"==(p=oHtml.offsetParent).tagName?apf.getWindowHeight():p.offsetHeight)-oHtml.offsetTop-oHtml.offsetHeight-2*(parseInt(apf.getStyle(p,"borderTopWidth"))||0)-(parseInt(apf.getStyle(p,"borderBottomWidth"))||0)

}},apf.insertHtmlNodes=function(nodeList,htmlNode,beforeNode,s){var frag,node,i
if(nodeList)for(frag=document.createDocumentFragment(),i=nodeList.length-1;i>=0;i--)node=nodeList[i],
frag.insertBefore(node,frag.firstChild)
beforeNode?htmlNode.insertBefore(frag,beforeNode):htmlNode.appendChild(frag)},apf.insertHtmlNode=function(xmlNode,htmlNode,beforeNode,s){
return xmlNode=xmlNode.cloneNode(!0),beforeNode?htmlNode.insertBefore(xmlNode,beforeNode):htmlNode.appendChild(xmlNode),
xmlNode},apf.runIE=function(){apf.runWebkit()},HTMLDocument.prototype.selectNodes=XMLDocument.prototype.selectNodes=function(sExpr,contextNode){
return findNodes(contextNode,sExpr)},Text.prototype.selectNodes=Attr.prototype.selectNodes=Element.prototype.selectNodes=function(sExpr){
return findNodes(this,sExpr)},HTMLDocument.prototype.selectSingleNode=XMLDocument.prototype.selectSingleNode=function(sExpr,contextNode){
return findNode(contextNode,sExpr)},Text.prototype.selectSingleNode=Attr.prototype.selectSingleNode=Element.prototype.selectSingleNode=function(sExpr){
return findNode(this,sExpr)},XMLDocument.prototype.__defineGetter__&&(XMLDocument.prototype.__defineGetter__("xml",function(){
return(new XMLSerializer).serializeToString(this)}),XMLDocument.prototype.__defineSetter__("xml",function(){
throw new Error(apf.formatErrorString(1042,null,"XML serializer","Invalid assignment on read-only property 'xml'."))

}),Node.prototype.__defineGetter__("xml",function(){return 3==this.nodeType||4==this.nodeType||2==this.nodeType?this.nodeValue:(new XMLSerializer).serializeToString(this)

}),Element.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)

})),"undefined"!=typeof HTMLElement&&(HTMLElement.prototype.removeNode=function(){this.parentNode&&this.parentNode.removeChild(this)

}),Document.prototype.parseError=0,defineProp(Array.prototype,"item",function(i){return this[i]}),defineProp(Array.prototype,"expr",""),
Node.prototype.getElementById=function(id){}
var getStyle=apf.getStyle=function(el,prop){try{return(window.getComputedStyle(el,"")||{})[prop]||""}catch(e){}
}
HTMLDocument.prototype.setProperty=XMLDocument.prototype.setProperty=function(x,y){},apf.getXmlDom=function(message,noError,preserveWhiteSpaces){
var xmlParser
return message?(preserveWhiteSpaces===!1&&(message=message.replace(/>[\s\n\r]*</g,"><")),xmlParser=new DOMParser,
xmlParser=xmlParser.parseFromString(message,"text/xml"),noError||this.xmlParseError(xmlParser)):xmlParser=document.implementation.createDocument("","",null),
xmlParser},apf.xmlParseError=function(xml){if(xml.getElementsByTagName("parsererror").length){var nodeValue=xml.documentElement.firstChild.nodeValue


if(null!=nodeValue)var str=nodeValue.split("\n"),linenr=str[2].match(/\w+ (\d+)/)[1],message=str[0].replace(/\w+ \w+ \w+: (.*)/,"$1")
else if(nodeValue=xml.documentElement.firstChild.getElementsByTagName("div")[0].firstChild.nodeValue)var linenr=nodeValue.match(/line\s(\d*)/)[1]||"N/A",message=nodeValue.match(/column\s\d*:(.*)/)[1]||"N/A"
else var linenr="N/A",message="N/A"
var srcText=xml.documentElement.lastChild.firstChild,srcMsg=""
throw srcText&&srcText.nodeValue&&(srcMsg="\nSource Text : "+srcText.nodeValue.replace(/\t/gi," ")),new Error(apf.formatErrorString(1050,null,"XML Parse Error on line "+linenr,message+srcMsg))

}return xml},apf.runWebkit=function(){apf.getHtmlLeft=function(oHtml){return oHtml.offsetLeft},apf.getHtmlRight=function(oHtml){
var p
return("BODY"==(p=oHtml.offsetParent).tagName?apf.getWindowWidth():p.offsetWidth)-oHtml.offsetLeft-oHtml.offsetWidth-(parseInt(apf.getStyle(p,"borderLeftWidth"))||0)-(parseInt(apf.getStyle(p,"borderRightWidth"))||0)

},apf.getHtmlTop=function(oHtml){return oHtml.offsetTop},apf.getHtmlBottom=function(oHtml){var p
return("BODY"==(p=oHtml.offsetParent).tagName?apf.getWindowHeight():p.offsetHeight)-oHtml.offsetTop-oHtml.offsetHeight-(parseInt(apf.getStyle(p,"borderTopWidth"))||0)-(parseInt(apf.getStyle(p,"borderBottomWidth"))||0)

}},apf.application=function(){this.$init("application",apf.NODE_HIDDEN),this.$int=document.body,this.$tabList=[],
this.visible=!0,this.$isWindowContainer=!0,this.focus=function(){this.dispatchEvent("focus")},this.blur=function(){
this.dispatchEvent("blur")},apf.window.$addFocus(this)},apf.application.prototype=new apf.AmlElement,
apf.aml.setElement("application",apf.application),apf.section=function(struct,tagName){this.$init(tagName||"section",apf.NODE_VISIBLE,struct)

},apf.menubar=function(struct,tagName){this.$init(tagName||"menubar",apf.NODE_VISIBLE,struct)},apf.bar=function(struct,tagName){
this.$init(tagName||"bar",apf.NODE_VISIBLE,struct)},function(){this.$focussable=!1,this.$canLeechSkin=!0,
this.$isLeechingSkin=!1,this.$propHandlers.caption=function(value){this.$int.textContent=value},this.addEventListener("AMLReparent",function(beforeNode,pNode,withinParent){
this.$amlLoaded&&(this.$isLeechingSkin&&!withinParent&&this.skinName!=pNode.skinName||!this.$isLeechingSkin&&this.parentNode.$hasLayoutNode&&this.parentNode.$hasLayoutNode(this.localName))&&(this.$isLeechingSkin=!0,
this.$forceSkinChange(this.parentNode.skinName.split(":")[0]+":"+skinName))}),this.$draw=function(){this.$ext=this.$getExternal(this.$isLeechingSkin?this.localName:"main"),
this.oDrag&&this.oDrag.parentNode.removeChild(this.oDrag),this.oDrag=this.$getLayoutNode(this.$isLeechingSkin?this.localName:"main","dragger",this.$ext),
this.$int=this.$getLayoutNode(this.$isLeechingSkin?this.localName:"main","container",this.$ext)},this.$loadAml=function(x){},
this.$skinchange=function(){}}.call(apf.bar.prototype=new apf.Presentation),apf.menubar.prototype=apf.section.prototype=apf.bar.prototype,
apf.aml.setElement("bar",apf.bar),apf.aml.setElement("menubar",apf.menubar),apf.aml.setElement("section",apf.section),
apf.list=apf.bar,apf.aml.setElement("list",apf.list),apf.submit=function(struct,tagName){this.$init(tagName||"submit",apf.NODE_VISIBLE,struct)

},apf.trigger=function(struct,tagName){this.$init(tagName||"trigger",apf.NODE_VISIBLE,struct)},apf.reset=function(struct,tagName){
this.$init(tagName||"reset",apf.NODE_VISIBLE,struct)},apf.button=function(struct,tagName){this.$init(tagName||"button",apf.NODE_VISIBLE,struct)

},function(){function menuKeyHandler(e){return}function menuDown(e){var $button1,menu=self[this.submenu]||this.submenu


this.value=!this.value,this.value&&this.$setState("Down",{})
var menuPressed=this.parentNode.menuIsPressed
if(menuPressed&&menuPressed!=this){menuPressed.setValue(!1)
var oldMenu=self[menuPressed.submenu]||menuPressed.submenu
oldMenu!=(self[this.submenu]||this.submenu)&&oldMenu.$propHandlers.visible.call(oldMenu,!1,!0)}return this.value?(this.parentNode.menuIsPressed=this,
apf.setStyleClass(this.$ext,"submenu"),menu.display(null,null,!1,this,null,null,this.$ext.offsetWidth-2),
menu.addEventListener("prop.visible",function listen(e){apf.setStyleClass(this.$ext,"",["submenu"]),menu.removeEventListener("prop.visible",listen)

}),this.parentNode.hasMoved=!1,e&&e.htmlEvent&&apf.stopPropagation(e.htmlEvent),!1):(menu.hide(),this.$setState("Over",{},"toolbarover"),
($button1=this.parentNode.$button1)&&$button1.$setState("Over",{},"toolbarover"),this.parentNode.menuIsPressed=!1,
this.parentNode.hasMoved&&(this.value=!1),!1)}function menuOver(){var menuPressed=this.parentNode.menubar&&this.parentNode.menuIsPressed


if(menuPressed&&menuPressed!=this){var menu=self[this.submenu]||this.submenu
if(!menu.pinned){menuPressed.setValue(!1)
var oldMenu=self[menuPressed.submenu]||menuPressed.submenu
return oldMenu.$propHandlers.visible.call(oldMenu,!1,!0),this.setValue(!0),this.parentNode.menuIsPressed=this,
apf.setStyleClass(this.$ext,"submenu"),menu.display(null,null,!0,this,null,null,this.$ext.offsetWidth-2),
this.$focus(),this.parentNode.hasMoved=!0,!1}}}this.$useExtraDiv,this.$childProperty="caption",this.$inited=!1,
this.$isLeechingSkin=!1,this.$canLeechSkin=!0,this.$focussable=apf.KEYBOARD,this.value=null,this.$init(function(){
function setDefault(e){e.defaultButtonSet||e.returnValue===!1||(e.defaultButtonSet=!0,this.$useExtraDiv&&_self.$ext.appendChild(apf.button.$extradiv),
_self.$setStyleClass(_self.$ext,_self.$baseCSSname+"Default"),e.toElement!=_self&&e.toElement&&e.toElement.addEventListener("keydown",btnKeyDown))

}function removeDefault(e){this.$useExtraDiv&&apf.button.$extradiv.parentNode==_self.$ext&&_self.$ext.removeChild(apf.button.$extradiv),
_self.$setStyleClass(_self.$ext,"",[_self.$baseCSSname+"Default"]),e.fromElement!=_self&&e.fromElement&&e.fromElement.removeEventListener("keydown",btnKeyDown)

}function btnKeyDown(e){var ml,f=apf.document.activeElement
if(f){if(f.hasFeature(apf.__MULTISELECT__))return
ml=f.multiline}_self.$ext.onmouseup&&((!ml||"optional"==ml||13!=e.keyCode||!e.ctrlKey)&&(ml&&"optional"!=ml||13!=e.keyCode||e.ctrlKey||e.shiftKey||e.altKey)||(apf.preventDefault(e.htmlEvent),
_self.$ext.onmouseup(e.htmlEvent,!0)))}var forceFocus,lastDefaultParent,_self=this
this.$propHandlers["default"]=function(value){if(parseInt(value)!=value&&(value=apf.isTrue(value)?1:0),
this["default"]=parseInt(value),(!this.focussable&&value||forceFocus)&&this.setAttribute("focussable",forceFocus=value),
lastDefaultParent&&(lastDefaultParent.removeEventListener("focus",setDefault),lastDefaultParent.removeEventListener("blur",removeDefault)),
value){for(var pNode=this.parentNode;pNode&&!pNode.focussable&&--value;)pNode=pNode.parentNode
pNode&&(pNode.addEventListener("focus",setDefault),pNode.addEventListener("blur",removeDefault))}},this.addEventListener("focus",setDefault),
this.addEventListener("blur",removeDefault),this.$enable=function(){this["default"]&&(setDefault({}),
apf.document.activeElement&&apf.document.activeElement.focus(!0)),this.state&&this.value?this.$setState("Down",{}):this.$mouseOver?this.$updateState({},"mouseover"):this.$doBgSwitch(1)

},this.$disable=function(){this["default"]&&removeDefault({}),this.$doBgSwitch(4),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Over",this.$baseCSSname+"Down"])

}}),this.$booleanProperties.state=!0,this.$supportedProperties.push("icon","value","tooltip","state","color","caption","action","target","default","submenu","hotkey"),
this.$propHandlers.iconsize=function(value){this.oIcon&&(this.oIcon.style.backgroundSize=value)},this.$propHandlers.icon=function(value){
this.oIcon&&(value?this.$setStyleClass(this.$ext,this.$baseCSSname+"Icon"):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Icon"]),
apf.skins.setIcon(this.oIcon,value,this.iconPath))},this.$propHandlers.value=function(value){(this.state||this.submenu)&&(void 0===value&&(value=!this.value),
this.value=value,this.value?(this.$setState("Down",{}),this.$setStyleClass(this.$ext,this.$baseCSSname+"Checked")):(this.$setState("Out",{}),
this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Checked"])))},this.$propHandlers.state=function(value){
value?this.$setStateBehaviour(this.value):this.$setNormalBehaviour()},this.$propHandlers.color=function(value){
this.oCaption&&(this.oCaption.parentNode.style.color=value)},this.$propHandlers.caption=function(value){
value?this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Empty"]):this.$setStyleClass(this.$ext,this.$baseCSSname+"Empty"),
1==this.oCaption.nodeType?this.oCaption.textContent=String(value||"").trim():this.oCaption.nodeValue=String(value||"").trim()

},this.$propHandlers.submenu=function(value){return value?(this.$focussable=!1,this.$setStateBehaviour(),
this.addEventListener("mouseover",menuOver),this.addEventListener("mousedown",menuDown),void this.addEventListener("keydown",menuKeyHandler,!0)):(this.value&&this.parentNode&&menuDown.call(this),
this.$focussable=!0,this.$setNormalBehaviour(),this.removeEventListener("mousedown",menuDown),this.removeEventListener("mouseover",menuOver),
void this.removeEventListener("keydown",menuKeyHandler,!0))},this.change=this.setValue=function(value){
this.setProperty("value",value,!1,!0),this.dispatchEvent("afterchange",{value:value})},this.showMenu=function(){
this.submenu&&!this.value&&menuDown.call(this)},this.hideMenu=function(){this.submenu&&this.value&&menuDown.call(this)

},this.setCaption=function(value){this.setProperty("caption",value,!1,!0)},this.setIcon=function(url){
this.setProperty("icon",url,!1,!0)},this.$setStateBehaviour=function(value){this.value=value||!1,this.isBoolean=!0,
this.$setStyleClass(this.$ext,this.$baseCSSname+"Bool"),this.value&&(this.$setStyleClass(this.$ext,this.$baseCSSname+"Down"),
this.$doBgSwitch(this.states.Down))},this.$setNormalBehaviour=function(){this.value=null,this.isBoolean=!1,
this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Bool"])},this.$setState=function(state,e,strEvent){
var parentNode=this.parentNode
if((!strEvent||this.dispatchEvent(strEvent,{htmlEvent:e})!==!1)&&(!(parentNode&&parentNode.$button2&&parentNode.$button2.value)||this.submenu)){
this.$doBgSwitch(this.states[state])
var bs=this.$baseCSSname
this.$setStyleClass(this.$ext,"Out"!=state?bs+state:"",[this.value?"":bs+"Down",bs+"Over"]),this.submenu&&(bs=this.$baseCSSname+"menu",
this.$setStyleClass(this.$ext,"Out"!=state?bs+state:"",[this.value?"":bs+"Down",bs+"Over"]))}},this.$clickHandler=function(){
if(this.isBoolean&&!this.submenu&&this.auto!==!1)return this.setProperty("value",!this.value),!0},this.$submenu=function(hide,force){
hide&&this.submenu&&(this.setValue(!1),this.$setState("Out",{},"mouseout"),this.parentNode&&(this.parentNode.menuIsPressed=!1))

},this.addEventListener("$skinchange",function(e){this.tooltip&&apf.GuiElement.propHandlers.tooltip.call(this,this.tooltip)

}),this.$draw=function(){var pNode,isToolbarButton=(pNode=this.parentNode)&&pNode.parentNode&&"toolbar"==pNode.parentNode.localName


isToolbarButton&&("undefined"==typeof this.focussable&&(this.focussable=!1),this.$focussable=apf.KEYBOARD),
this.$ext=this.$getExternal(),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.oCaption=this.$getLayoutNode("main","caption",this.$ext),
this.oCaption.nodeValue&&!this.caption&&this.$propHandlers.caption.call(this,""),this.$useExtraDiv=apf.isTrue(this.$getOption("main","extradiv")),
!apf.button.$extradiv&&this.$useExtraDiv&&((apf.button.$extradiv=document.createElement("div")).className="extradiv"),
"submit"==this.localName?this.action="submit":"reset"==this.localName&&(this.action="reset"),this.$setupEvents()

},this.addEventListener("$skinchange",function(){this.caption&&this.$propHandlers.caption.call(this,this.caption),
this.icon&&this.$propHandlers.icon.call(this,this.icon),this.$updateState({reset:1})})}.call(apf.button.prototype=new apf.BaseButton),
apf.submit.prototype=apf.trigger.prototype=apf.reset.prototype=apf.button.prototype,apf.aml.setElement("submit",apf.submit),
apf.aml.setElement("trigger",apf.trigger),apf.aml.setElement("reset",apf.reset),apf.aml.setElement("button",apf.button),
apf.checkbox=function(struct,tagName){this.$init(tagName||"checkbox",apf.NODE_VISIBLE,struct)},function(){
this.$focussable=apf.KEYBOARD,this.checked=!1,this.$booleanProperties.checked=!0,this.$supportedProperties.push("value","checked","label","values"),
this.$propHandlers.value=function(value){value="string"==typeof value?value.trim():value,""==value&&this["default"]&&(value=this.value=apf.isTrue(this["default"])),
this.$values?this.checked="undefined"!=typeof value&&null!==value&&value.toString()==this.$values[0].toString():this.checked=apf.isTrue(value),
this.checked?apf.setStyleClass(this.$ext,this.$baseCSSname+"Checked"):apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Checked"])

},this.$propHandlers.checked=function(value){this.$values||this.getAttribute("values")&&this.$propHandler.values.call(this,this.getAttribute("values")),
this.setProperty("value",!this.$values||this.$values[value?0:1])},this.$propHandlers.label=function(value){
if(this.$ext){var lbl=this.$getLayoutNode("main","label",this.$ext)
lbl&&(1==lbl.nodeType?lbl.textContent=value:lbl.nodeValue=value)}},this.$propHandlers.values=function(value){
this.$values="string"==typeof value?value.split("|"):value||[1,0],this.$propHandlers.value.call(this,this.value)

},this.change=this.setValue=function(value){this.setProperty("value",value,!1,!0),this.dispatchEvent("afterchange",{
value:value})},this.getValue=function(){return this.xmlRoot?this.$values?this.$values[this.checked?0:1]:this.checked:this.value

},this.check=function(){this.setProperty("value",!this.$values||this.$values[0],!1,!0)},this.uncheck=function(){
this.setProperty("value",!!this.$values&&this.$values[1],!1,!0)},this.addEventListener("$clear",function(){
this.setProperty("value",!!this.$values&&this.$values[1])}),this.$enable=function(){this.$input&&(this.$input.disabled=!1),
this.$doBgSwitch(1)},this.$disable=function(){this.$input&&(this.$input.disabled=!0),this.$doBgSwitch(4)

},this.$setState=function(state,e,strEvent){this.$doBgSwitch(this.states[state]),this.$setStyleClass(this.$ext,"Out"!=state?this.$baseCSSname+state:"",[this.$baseCSSname+"Down",this.$baseCSSname+"Over"]),
this.state=state,strEvent&&this.dispatchEvent(strEvent,{htmlEvent:e})},this.$clickHandler=function(){
return this.change(this.$values?this.$values[this.checked?1:0]:!this.checked),this.validate&&this.validate(!0),
!0},this.$draw=function(){this.$ext=this.$getExternal(),this.$input=this.$getLayoutNode("main","input",this.$ext),
this.$notfromext=this.$input&&this.$input!=this.$ext,this.$setupEvents()},this.$childProperty="label",
this.addEventListener("$skinchange",function(){this.label&&this.$propHandlers.label.call(this,this.label)

})}.call(apf.checkbox.prototype=new apf.BaseButton),apf.aml.setElement("checkbox",apf.checkbox),apf.comment=function(){
this.$init("comment",apf.NODE_HIDDEN)},apf.comment.prototype=new apf.AmlComment,apf.aml.setElement("comment",apf.comment),
apf.contextmenu=function(){this.$init("contextmenu",apf.NODE_HIDDEN)},function(){this.$amlNodes=[],this.register=function(amlParent){
amlParent.contextmenus||(amlParent.contextmenus=[]),amlParent.contextmenus.push(this)},this.unregister=function(amlParent){
amlParent.contextmenus.remove(this)},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){
this.register(this.parentNode)})}.call(apf.contextmenu.prototype=new apf.AmlElement),apf.aml.setElement("contextmenu",apf.contextmenu),
apf.event=function(struct,tagName){this.$init(tagName||"event",apf.NODE_HIDDEN,struct)},function(){this.$hasInitedWhen=!1,
this.$booleanProperties.repeat=!0,this.$supportedProperties.push("when","message","icon","repeat"),this.$propHandlers.when=function(value){
if(this.$hasInitedWhen&&value&&this.parentNode&&this.parentNode.popup){var _self=this
$setTimeout(function(){_self.parentNode.popup(_self.message,_self.icon,_self)})}this.$hasInitedWhen=!0,
this.repeat&&delete this.when},this.$loadAml=function(x){}}.call(apf.event.prototype=new apf.AmlElement),
apf.aml.setElement("event",apf.event),apf.filler=function(struct,tagName){this.$init(tagName||"filler",apf.NODE_VISIBLE,struct)

},function(){this.$focussable=!1,this.flex=1,this.$draw=function(){this.$ext=this.$pHtmlNode.appendChild(this.$pHtmlNode.ownerDocument.createElement("div"))

}}.call(apf.filler.prototype=new apf.GuiElement),apf.aml.setElement("filler",apf.filler),apf.panel=function(struct,tagName){
this.$init(tagName||"panel",apf.NODE_VISIBLE,struct)},apf.fieldset=function(struct,tagName){this.$init(tagName||"fieldset",apf.NODE_VISIBLE,struct)

},apf.frame=function(struct,tagName){this.$init(tagName||"frame",apf.NODE_VISIBLE,struct)},function(){
this.implement(apf.BaseStateButtons),this.$focussable=!1,this.$supportedProperties.push("caption","url"),
this.$propHandlers.caption=function(value){this.oCaption&&(1==this.oCaption.nodeType?this.oCaption.textContent=value:this.oCaption.nodeValue=value)

},this.$propHandlers.icon=function(value){var oIcon=this.$getLayoutNode("main","icon",this.$ext)
oIcon&&(1==oIcon.nodeType&&(oIcon.style.display=value?"block":"none"),apf.skins.setIcon(oIcon,value,this.iconPath))

},this.$propHandlers.activetitle=function(value){var node=this.oCaption.parentNode,_self=this
node.addEventListener("click",function(e){e.target!=node&&e.target!=_self.oCaption||_self.$toggle(value)

},!1)},this.setTitle=function(value){this.setProperty("title",value)},this.$draw=function(){this.$ext=this.$getExternal(null,null,function(oExt){
this.$initButtons(oExt)}),this.oCaption=this.$getLayoutNode("main","caption",this.$ext),this.$int=this.$getLayoutNode("main","container",this.$ext),
this.$buttons=this.$getLayoutNode("main","buttons",this.$ext)},this.$loadAml=function(x){}}.call(apf.frame.prototype=new apf.Presentation),
apf.panel.prototype=apf.fieldset.prototype=apf.frame.prototype,apf.aml.setElement("panel",apf.panel),
apf.aml.setElement("fieldset",apf.fieldset),apf.aml.setElement("frame",apf.frame),apf.img=function(struct,tagName){
this.$init(tagName||"img",apf.NODE_VISIBLE,struct)},function(){this.change=this.setValue=function(value){
this.setProperty("value",value,!1,!0)},this.getValue=function(value){return this.value},this.$supportedProperties.push("value","src"),
this.$propHandlers.src=this.$propHandlers.value=function(value){if(1==this.oImage.nodeType?this.oImage.style.backgroundImage="url("+value+")":this.oImage.nodeValue=value,
2==this.oImage.nodeType&&!this.$resize.done){if(this.oImg){var pNode=apf.hasSingleRszEvent?this.$pHtmlNode:this.$ext


apf.layout.setRules(pNode,this.$uniqueId+"_image","var o = apf.all["+this.$uniqueId+"];                     if (o) o.$resize()"),
apf.layout.queue(pNode),this.oImg.onload=function(){apf.layout.forceResize(pNode)}}this.$resize.done=!0

}this.oImg&&(this.oImg.style.display=value?"block":"none")},this.refetch=function(){this.$propHandlers.value.call(this,""),
this.$propHandlers.value.call(this,this.value||this.src)},this.addEventListener("$clear",function(){this.value="",
this.oImg&&(this.oImg.style.display="none")}),this.$draw=function(){this.$ext=this.$getExternal(),this.$ext.onclick=function(e){
this.host.dispatchEvent("click",{htmlEvent:e||event})},this.oImage=this.$getLayoutNode("main","image",this.$ext),
1==this.oImage.nodeType&&(this.oImg=this.oImage.getElementsByTagName("img")[0])
var _self=this
apf.addListener(this.$ext,"mouseover",function(e){_self.disabled||_self.dispatchEvent("mouseover",{htmlEvent:e
})}),apf.addListener(this.$ext,"mouseout",function(e){_self.disabled||_self.dispatchEvent("mouseout",{
htmlEvent:e})})},this.addEventListener("DOMNodeInsertedIntoDocument",function(){for(var node,val="",i=this.childNodes.length;i>=0;--i)(node=this.childNodes[i])&&node.nodeName&&"#cdata-section"==node.nodeName&&(val=node.nodeValue,
node.removeNode())
this.sPreview=val}),this.$resize=function(){var diff=apf.getDiff(this.$ext),wratio=1,hratio=1
this.oImg.style.width="",this.oImg.style.height="",this.oImg.offsetWidth>this.$ext.offsetWidth&&(wratio=this.oImg.offsetWidth/(this.$ext.offsetWidth-diff[0])),
this.oImg.offsetHeight>this.$ext.offsetHeight&&(hratio=this.oImg.offsetHeight/(this.$ext.offsetHeight-diff[1])),
wratio>hratio&&wratio>1?this.oImg.style.width="100%":hratio>wratio&&hratio>1&&(this.oImg.style.height="100%"),
this.oImg.style.top=(this.$ext.offsetHeight-apf.getHeightDiff(this.$ext)-this.oImg.offsetHeight)/2+"px"

}}.call(apf.img.prototype=new apf.BaseSimple),apf.aml.setElement("img",apf.img),apf.label=function(struct,tagName){
this.$init(tagName||"label",apf.NODE_VISIBLE,struct)},function(){this.$focussable=!1
var forElement
this.change=this.setValue=function(value){this.setProperty("value",value,!1,!0)},this.getValue=function(){
return this.value},this.$supportedProperties.push("caption","for","textalign"),this.$propHandlers.caption=function(value){
"string"==typeof value?this.$caption.textContent=value:Array.isArray(value)&&(this.$caption.textContent="",
apf.buildDom(value,this.$caption))},this.$propHandlers["for"]=function(value){forElement="string"==typeof value?self[value]:value

},this.$propHandlers.textalign=function(value){this.$caption.style.textAlign=value||""},this.$draw=function(){
this.$ext=this.$getExternal(),this.$caption=this.$getLayoutNode("main","caption",this.$ext),1!=this.$caption.nodeType&&(this.$caption=this.$caption.parentNode),
this.$ext.onmousedown=function(){forElement&&forElement.$focussable&&forElement.focussable&&forElement.focus()

}
var _self=this
apf.addListener(this.$ext,"click",function(e){_self.disabled||_self.dispatchEvent("click",{htmlEvent:e
})}),apf.addListener(this.$ext,"mouseover",function(e){_self.disabled||_self.dispatchEvent("mouseover",{
htmlEvent:e})}),apf.addListener(this.$ext,"mouseout",function(e){_self.disabled||_self.dispatchEvent("mouseout",{
htmlEvent:e})})},this.$childProperty="caption"}.call(apf.label.prototype=new apf.BaseSimple),apf.aml.setElement("label",apf.label),
apf.colorbox=function(struct,tagName){this.$init(tagName||"colorbox",apf.NODE_VISIBLE,struct)},function(){
this.$focussable=!1
this.change=this.setValue=function(value){this.setProperty("value",value,!1,!0),this.dispatchEvent("afterchange",{
value:value})},this.getValue=function(){return this.value},this.$supportedProperties.push("value"),this.$propHandlers.value=function(value){
this.$input.value=value},this.$draw=function(){this.$ext=this.$getExternal(),this.$input=this.$getLayoutNode("main","input",this.$ext)


var _self=this
this.$input.onchange=function(){_self.change(this.value)}},this.$childProperty="value"}.call(apf.colorbox.prototype=new apf.BaseSimple),
apf.aml.setElement("colorbox",apf.colorbox),apf.WinServer={count:15e4,wins:[],setTop:function(win,norecur){
if(!win.zindex&&!win.modal){if(win.$opened){if(win.$opened.visible)return
delete win.$opened}var topmost
if(!norecur&&this.wins.length){var topmost=this.wins[this.wins.length-1]
if(topmost==win)return
topmost.modal&&topmost.visible?topmost&&win.modal&&(win.$opener=topmost,topmost.$opened=win,topmost=null):topmost=null

}return this.count+=2,win.setProperty("zindex",this.count),this.wins.remove(win),this.wins.push(win),
topmost&&this.setTop(topmost,!0),win}},setNext:function(){if(!(this.wins.length<2)){var nwin,start=this.wins.shift()


do{if(this.setTop(nwin||start).visible)break
nwin=this.wins.shift()}while(start!=nwin)}},setPrevious:function(){if(!(this.wins.length<2)){this.wins.unshift(this.wins.pop())


var nwin,start=this.wins.pop()
do{if(this.setTop(nwin||start).visible)break
nwin=this.wins.pop()}while(start!=nwin)}},remove:function(win){this.wins.remove(win)}},apf.toolwindow=function(struct,tagName){
this.$init(tagName||"toolwindow",apf.NODE_VISIBLE,struct)},apf.modalwindow=function(struct,tagName){this.$init(tagName||"modalwindow",apf.NODE_VISIBLE,struct)

},apf.AmlWindow=function(struct,tagName){this.$init(tagName||"window",apf.NODE_VISIBLE,struct)},function(){
this.implement(apf.BaseStateButtons),this.$isWindowContainer=!0,this.collapsedHeight=30,this.canHaveChildren=2,
this.visible=!1,this.showdragging=!1,this.kbclose=!1,this.$focussable=apf.KEYBOARD,this.$editableCaption=["title"],
this.setTitle=function(caption){return this.setProperty("title",caption,!1,!0),this},this.setIcon=function(icon){
return this.setProperty("icon",icon,!1,!0),this},this.show=function(callback){return this.execAction=callback,
this.setProperty("visible",!0,!1,!0),this},this.bringToFront=function(){return apf.WinServer.setTop(this),
this},this.$booleanProperties.modal=!0,this.$booleanProperties.center=!0,this.$booleanProperties.transaction=!0,
this.$booleanProperties.hideselects=!0,this.$booleanProperties.showdragging=!0,this.$booleanProperties.kbclose=!0,
this.$supportedProperties.push("title","icon","modal","minwidth","minheight","hideselects","center","kbclose","maxwidth","maxheight","showdragging","transaction"),
this.$propHandlers.modal=function(value){value?(this.visible&&apf.plane.show(this.$ext,!1,null,null,{
color:"black",opacity:this.cover&&this.cover.getAttribute("opacity")||.5,protect:this.$uniqueId,customCover:this.cover||"",
zIndex:!0,zClass:"popup+"}),this.$setStyleClass(this.$ext,"",["relative"])):(apf.plane.hide(this.$uniqueId),
this.$setStyleClass(this.$ext,"relative"))},this.$propHandlers.center=function(value){this.$ext.style.position="absolute"

},this.$propHandlers.title=function(value){this.oTitle&&(this.oTitle.nodeValue=value)},this.$propHandlers.icon=function(value){
this.oIcon&&(this.oIcon.style.display=value?"":"none",apf.skins.setIcon(this.oIcon,value,this.iconPath))

},this.$afterRender=function(){if(this.center&&!this.left&&!this.top&&!this.right&&!this.bottom&&!this.anchors){
apf.layout.processQueue()
var size=this.$ext.offsetParent&&"BODY"!=this.$ext.offsetParent.tagName?[this.$ext.offsetParent.offsetWidth,this.$ext.offsetParent.offsetHeight,0,0]:[apf.getWindowWidth(),apf.getWindowHeight()]


2==size.length&&size.push(document.documentElement.scrollLeft,document.documentElement.scrollTop),this.$ext.style.left=Math.max(0,(size[0]-parseInt(this.width||this.$ext.offsetWidth||0))/2)+size[2]+"px",
this.$ext.style.top=Math.max(0,(size[1]-parseInt(this.$ext.offsetHeight||0))/3)+size[3]+"px"}!this.$amlLoaded||!this.model&&(this.dockable&&this.aData||this.$isWidget||"toolwindow"==this.localName)||this.focus(!1,{
mouse:!0}),this.dispatchEvent("show")}
var wasVisible
this.$propHandlers.visible=function(value){if(apf.isTrue(value)){if(this.dispatchEvent("beforeshow")===!1)return this.visible=!1


this.modal&&apf.plane.show(this.$ext,!1,null,null,{color:"black",opacity:this.cover&&this.cover.getAttribute("opacity")||.5,
protect:this.$uniqueId,customCover:this.cover||"",zIndex:!0,zClass:"popup+"}),this.state=this.state.split("|").remove("closed").join("|"),
this.$ext.style.display="",this.$rendered===!1?this.addEventListener("afterrender",this.$afterRender):this.$afterRender()

}else this.modal&&apf.plane.hide(this.$uniqueId),this.$ext.style.display="none",this.hasFocus()&&apf.window.moveNext(!0,this,!0),
this.visible=!1,this.dispatchEvent("hide")
apf.layout&&this.$int&&apf.layout.forceResize(this.$int),wasVisible=value},this.$propHandlers.zindex=function(value){
this.$ext.style.zIndex=value+1},this.addEventListener("keydown",function(e){var key=e.keyCode,ctrlKey=e.ctrlKey,shiftKey=e.shiftKey,retValue=!1


switch(key){case 38:shiftKey&&this.resizable?this.setProperty("height",Math.max(this.minheight||0,this.$ext.offsetHeight-(ctrlKey?50:10))):this.draggable&&this.setProperty("top",this.$ext.offsetTop-(ctrlKey?50:10))


break
case 37:shiftKey&&this.resizable?this.setProperty("width",Math.max(this.minwidth||0,this.$ext.offsetWidth-(ctrlKey?50:10))):this.draggable&&this.setProperty("left",this.$ext.offsetLeft-(ctrlKey?50:10))


break
case 39:shiftKey&&this.resizable?this.setProperty("width",Math.min(this.maxwidth||1e4,this.$ext.offsetWidth+(ctrlKey?50:10))):this.draggable&&this.setProperty("left",this.$ext.offsetLeft+(ctrlKey?50:10))


break
case 40:shiftKey&&this.resizable?this.setProperty("height",Math.min(this.maxheight||1e4,this.$ext.offsetHeight+(ctrlKey?50:10))):this.draggable&&this.setProperty("top",this.$ext.offsetTop+(ctrlKey?50:10))


break
default:return void(retValue=null)}return apf.hasSingleRszEvent&&apf.layout.forceResize(this.$int),retValue

},!0),this.addEventListener("keydown",function(e){27==e.keyCode&&this.buttons.indexOf("close")>-1&&(!this.dockable||!this.aData)&&this.kbclose&&this.close()

}),this.$draw=function(){this.popout=apf.isTrue(this.getAttribute("popout")),this.popout&&(this.$pHtmlNode=document.body),
this.$ext=this.$getExternal(null,null,function(oExt){this.$initButtons(oExt)}),this.oTitle=this.$getLayoutNode("main","title",this.$ext),
this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.oDrag=this.$getLayoutNode("main","drag",this.$ext),
this.$buttons=this.$getLayoutNode("main","buttons",this.$ext),this.cover=this.$getLayoutNode("cover"),
this.popout&&(this.$ext.style.position="absolute"),this.oIcon&&(this.oIcon.style.display="none")
var _self=this
this.oDrag&&(this.oDrag.host=this,this.oDrag.onmousedown=function(e){return e||(e=event),_self.$isWidget||_self.aData&&_self.dockable&&3!=_self.aData.hidden||apf.WinServer.setTop(_self),
!_self.$lastState.maximized&&(_self.aData&&_self.dockable?(_self.$lastState.normal&&_self.startDocking(e),
!1):void 0)}),this.$ext.onmousedown=function(){var p=apf.document.activeElement
return(!p||p.$focusParent==_self||!p.$focusParent.modal)&&(_self.$isWidget||_self.aData&&_self.dockable&&3!=_self.aData.hidden||apf.WinServer.setTop(_self),
!!_self.$lastState.normal&&void 0)},this.$ext.onmousemove=function(){if(!_self.$lastState.normal)return!1

}},this.$loadAml=function(x){if(apf.WinServer.setTop(this),this.$int=this.$getLayoutNode("main","container",this.$ext),
this.oTitle){var _self=this;(1!=this.oTitle.nodeType?this.oTitle.parentNode:this.oTitle).ondblclick=function(e){
_self.state.indexOf("normal")==-1?_self.restore():_self.buttons.indexOf("max")>-1?_self.maximize():_self.buttons.indexOf("min")>-1&&_self.minimize()

}}if("undefined"==typeof this.draggable&&((this.$propHandlers.draggable||apf.GuiElement.propHandlers.draggable).call(this,!0),
this.draggable=!0),"undefined"==typeof this.buttons&&(this.buttons=""),void 0===this.modal&&(this.$propHandlers.modal.call(this,!0),
this.modal=!0),this.visible){if(this.modal){var _self=this
apf.queue.add("focus",function(){_self.focus(!1,{mouse:!0})})}}else this.$ext.style.display="none"
if(void 0===this.minwidth&&(this.minwidth=this.$getOption("Main","min-width")),void 0===this.minheight&&(this.minheight=this.$getOption("Main","min-height")),
void 0===this.maxwidth&&(this.maxwidth=this.$getOption("Main","max-width")),void 0===this.maxheight&&(this.maxheight=this.$getOption("Main","max-height")),
this.center&&this.visible){this.visible=!1,this.$ext.style.display="none"
var _self=this
$setTimeout(function(){_self.setProperty("visible",!0)})}},this.addEventListener("$skinchange",function(){
this.title&&this.$propHandlers.title.call(this,this.title),this.icon&&this.$propHandlers.icon.call(this,this.icon)

}),this.$destroy=function(skinChange){this.oDrag&&(this.oDrag.host=null,this.oDrag.onmousedown=null,apf.destroyHtmlNode(this.oDrag),
this.oDrag=null),this.oTitle=this.oIcon=null,this.$ext&&!skinChange&&(this.$ext.onmousedown=null,this.$ext.onmousemove=null)

}}.call(apf.modalwindow.prototype=new apf.Presentation),apf.AmlWindow.prototype=apf.toolwindow.prototype=apf.modalwindow.prototype,
apf.aml.setElement("toolwindow",apf.toolwindow),apf.aml.setElement("modalwindow",apf.modalwindow),apf.aml.setElement("window",apf.modalwindow),
apf.notifier=function(struct,tagName){this.$init(tagName||"notifier",apf.NODE_VISIBLE,struct)},function(){
function getPageScroll(){return[document.documentElement.scrollTop||document.body.scrollTop,document.documentElement.scrollLeft||document.body.scrollLeft]

}function getStartPosition(x,wh,ww,nh,nw,margin,startPadding){var scrolled=getPageScroll()
return[("top"==x[0]?margin[0]:"bottom"==x[0]?wh-nh-margin[2]:wh/2-nh/2)+scrolled[0]+startPadding,("left"==x[1]?margin[3]:"right"==x[1]?ww-nw-margin[1]:ww/2-nw/2)+scrolled[1]]

}this.timeout=2e3,this.position="top-right",this.columnsize=300,this.arrange="vertical",this.margin="10 10 10 10",
this.startPadding=0,this.lastPos=null,this.showing=0,this.sign=1,this.$supportedProperties.push("margin","position","timeout","columnsize","arrange","start-padding"),
this.$propHandlers.position=function(value){this.lastPos=null},this.$propHandlers.margin=function(value){
this.margin=value},this.$propHandlers["start-padding"]=function(value){this.startPadding=parseInt(value)

},this.$propHandlers.timeout=function(value){this.timeout=1e3*parseInt(value)},this.popup=function(message,icon,ev,persistent,callback){
function hideWindow(e,force){isMouseOver&&!force||apf.tween.css(oNoti,"notifier_hidden",{anim:apf.tween.NORMAL,
steps:10,interval:20,onfinish:function(container){callback&&callback(),_self.dispatchEvent("closed",{
html:oNoti}),apf.setStyleClass(oNoti,"",["notifier_hover"]),isMouseOver&&!force||(oNoti.parentNode&&oNoti.parentNode.removeChild(oNoti)&&!removed&&(_self.showing--,
removed=!0),0==_self.showing&&(_self.lastPos=null))}})}if(this.$ext){this.$ext.style.width=this.columnsize+"px"


var _self=this,oNoti=this.$pHtmlNode.appendChild(this.$ext.cloneNode(!0)),ww=window.innerWidth,wh=window.innerHeight,removed=!1,oIcon=this.$getLayoutNode("notification","icon",oNoti),oBody=this.$getLayoutNode("notification","body",oNoti)


oClose=this.$getLayoutNode("notification","close",oNoti),this.showing++,oIcon&&icon&&(1==oIcon.nodeType?oIcon.style.backgroundImage="url("+this.iconPath+icon+")":oIcon.nodeValue=this.iconPath+icon,
this.$setStyleClass(oNoti,this.$baseCSSname+"ShowIcon")),apf.buildDom(message||"[No message]",oBody),
oNoti.style.display="block",oClose.addEventListener("click",function(){hideWindow(null,!0)})
var margin=apf.getBox(this.margin||"0"),nh=oNoti.offsetHeight,nw=oNoti.offsetWidth,x=this.position.split("-"),_reset=!1


"top"!=x[1]&&"bottom"!=x[1]&&"left"!=x[0]&&"right"!=x[0]||(x=[x[1],x[0]]),("center"==x[0]&&"center"!==x[1]||"center"!==x[0]&&"center"==x[1])&&(x=["top","right"]),
this.lastPos||(this.lastPos=getStartPosition(x,wh,ww,nh,nw,margin,this.startPadding),this.sign=1,_reset=!0),
(!_reset&&"bottom"==x[0]&&1==this.sign||"top"==x[0]&&this.sign==-1)&&("vertical"==this.arrange?this.lastPos[0]+="center"==x[1]?0:this.sign*("top"==x[0]?margin[0]+nh:"bottom"==x[0]?-margin[2]-nh:0):this.lastPos[1]+="center"==x[0]?0:this.sign*("left"==x[1]?margin[3]+nw:"right"==x[1]?-margin[1]-nw:0))


var scrolled=getPageScroll()
this.lastPos[0]>wh+scrolled[0]-nh||this.lastPos[0]<scrolled[0]?(this.lastPos[1]+="left"==x[1]?nw+margin[3]:"right"==x[1]?-nw-margin[3]:0,
this.sign*=-1,this.lastPos[0]+=this.sign*("top"==x[0]?margin[0]+nh:"bottom"==x[0]?-margin[2]-nh:0)):(this.lastPos[1]>ww+scrolled[1]-nw||this.lastPos[1]<scrolled[1])&&(this.lastPos[0]+="top"==x[0]?nh+margin[0]:"bottom"==x[0]?-nh-margin[0]:0,
this.sign*=-1,this.lastPos[1]+="center"==x[0]?0:this.sign*("left"==x[1]?margin[3]+nw:"right"==x[1]?-margin[1]-nw:0)),
this.lastPos&&((this.lastPos[0]>wh+scrolled[0]-nh||this.lastPos[0]<scrolled[1])&&"horizontal"==this.arrange&&(this.lastPos=getStartPosition(x,wh,ww,nh,nw,margin,this.startPadding),
this.sign=1),(this.lastPos[1]>ww+scrolled[1]-nw||this.lastPos[1]<scrolled[1])&&"vertical"==this.arrange&&(this.lastPos=getStartPosition(x,wh,ww,nh,nw,margin,this.startPadding),
this.sign=1)),oNoti.style.left=this.lastPos[1]+"px",oNoti.style.top=this.lastPos[0]+"px",("top"==x[0]&&1==this.sign||"bottom"==x[0]&&this.sign==-1)&&("vertical"==this.arrange?this.lastPos[0]+="center"==x[1]?0:this.sign*("top"==x[0]?margin[0]+nh:"bottom"==x[0]?-margin[2]-nh:0):this.lastPos[1]+="center"==x[0]?0:this.sign*("left"==x[1]?margin[3]+nw:"right"==x[1]?-margin[1]-nw:0))


var isMouseOver=!1
return apf.tween.css(oNoti,"fade",{anim:apf.tween.NORMAL,steps:10,interval:10,onfinish:function(container){
oNoti.style.filter="",persistent||$setTimeout(hideWindow,_self.timeout)}}),oNoti.onmouseover=function(e){
e=e||event
var tEl=e.explicitOriginalTarget||e.toElement
isMouseOver||(tEl==oNoti||apf.isChildOf(oNoti,tEl))&&(apf.tween.css(oNoti,"notifier_hover",{anim:apf.tween.NORMAL,
steps:10,interval:20,onfinish:function(container){apf.setStyleClass(oNoti,"",["notifier_shown"])}}),isMouseOver=!0)

},oNoti.onmouseout=function(e){e=e||event
var tEl=e.explicitOriginalTarget||e.toElement
isMouseOver&&!persistent&&(apf.isChildOf(tEl,oNoti)||!apf.isChildOf(oNoti,tEl)&&oNoti!==tEl)&&(isMouseOver=!1,
hideWindow())},ev&&(oNoti.onclick=function(){ev.dispatchEvent("click")}),oNoti.hideWindow=hideWindow,
oNoti}},this.$draw=function(){this.$pHtmlNode=document.body,this.$ext=this.$getExternal("notification"),
this.$ext.style.display="none",this.$ext.style.position="absolute",apf.window.zManager.set("notifier",this.$ext)

}}.call(apf.notifier.prototype=new apf.Presentation),apf.aml.setElement("notifier",apf.notifier),apf.aml.setElement("event",apf.event),
apf.progress=function(struct,tagName){this.$init(tagName||"progress",apf.NODE_VISIBLE,struct)},apf.progressbar=function(struct,tagName){
this.$init(tagName||"progressbar",apf.NODE_VISIBLE,struct)},function(){this.$focussable=!1,this.value=0,
this.min=0,this.max=100,this.$running=!1,this.$timer,this.$booleanProperties.autostart=!0,this.$booleanProperties.autohide=!0,
this.$supportedProperties.push("value","min","max","autostart","autohide"),this.$propHandlers.value=function(value){
this.value=parseInt(value)||this.min,this.value>=this.max?apf.setStyleClass(this.$ext,this.$baseCSSname+"Complete",[this.$baseCSSname+"Running",this.$baseCSSname+"Half"]):apf.setStyleClass(this.$ext,this.$baseCSSname+"Running",[this.$baseCSSname+"Complete"]),
this.value>=this.max/2&&apf.setStyleClass(this.$ext,this.$baseCSSname+"Half",[]),this.oSlider.style.width=100*this.value/(this.max-this.min)+"%",
this.oCaption.nodeValue=Math.round(this.value/(this.max-this.min)*100)+"%"},this.$propHandlers.min=function(value){
this.min=parseFloat(value)},this.$propHandlers.max=function(value){this.max=parseFloat(value)},this.change=this.setValue=function(value){
this.setProperty("value",value,!1,!0),this.dispatchEvent("afterchange",{value:value})},this.getValue=function(){
return this.value},this.clear=function(){this.$clear()},this.$clear=function(restart,restart_time){if(clearInterval(this.$timer),
this.setValue(this.min),apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Running",this.$baseCSSname+"Complete"]),
restart){var _self=this
this.$timer=setInterval(function(){_self.start(restart_time)})}this.autohide&&this.hide(),this.$running=!1

},this.start=function(time){this.autohide&&this.show(),clearInterval(this.$timer)
var _self=this
this.$timer=setInterval(function(){_self.$amlDestroyed?clearInterval(_self.$timer):_self.$step()},time||1e3),
this.$setStyleClass(this.$ext,this.$baseCSSname+"Running")},this.pause=function(){clearInterval(this.$timer)

},this.stop=function(restart,time,restart_time){clearInterval(this.$timer),this.setValue(this.max)
var _self=this
this.$timer=setInterval(function(){_self.$clear(restart,restart_time||0)},time||500)},this.$step=function(){
this.value!=this.max&&this.setValue(this.value+1)},this.$draw=function(clear,parentNode,Node,transform){
this.$ext=this.$getExternal(),this.oSlider=this.$getLayoutNode("main","progress",this.$ext),this.oCaption=this.$getLayoutNode("main","caption",this.$ext)

},this.$loadAml=function(x){this.autostart&&this.start(),this.autohide&&this.hide()}}.call(apf.progressbar.prototype=new apf.StandardBinding),
apf.progress.prototype=apf.progressbar.prototype,apf.aml.setElement("progress",apf.progress),apf.aml.setElement("progressbar",apf.progressbar),
apf.radiobutton=function(struct,tagName){this.$init(tagName||"radiobutton",apf.NODE_VISIBLE,struct)},
function(){this.$childProperty="label",this.$focussable=apf.KEYBOARD,this.$booleanProperties.selected=!0,
this.$supportedProperties.push("value","background","group","label","selected","tooltip","icon"),this.$propHandlers.group=function(value){
if(this.$ext){if(this.$group&&this.$group.$removeRadio&&this.$group.$removeRadio(this),!value)return void(this.$group=null)


var group="string"==typeof value?apf.nameserver.get("group",value):value
group||(group=apf.nameserver.register("group",value,new apf.$group),group.setAttribute("id",value),group.dispatchEvent("DOMNodeInsertedIntoDocument"),
group.parentNode=this),this.$group=group,this.oInput&&this.oInput.setAttribute("name",value),this.$group.$addRadio(this)

}},this.$propHandlers.tooltip=function(value){this.$ext.setAttribute("title",value)},this.$propHandlers.icon=function(value){
this.oIcon&&(value?this.$setStyleClass(this.$ext,this.$baseCSSname+"Icon"):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Icon"]),
apf.skins.setIcon(this.oIcon,value,this.iconPath))},this.$propHandlers.label=function(value){value?this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Empty"]):this.$setStyleClass(this.$ext,this.$baseCSSname+"Empty"),
this.oLabel&&(this.oLabel.textContent=value)},this.$propHandlers.selected=function(value){this.$group&&value&&this.$group.setProperty("value",this.value)

},this.addEventListener("prop.model",function(e){this.$group&&this.$group.setProperty("model",e.value)

}),this.$propHandlers.background=function(value){var oNode=this.$getLayoutNode("main","background",this.$ext)


if(value){var b=value.split("|")
this.$background=b.concat(["vertical",2,16].slice(b.length-1)),oNode.style.backgroundImage="url("+this.mediaPath+b[0]+")",
oNode.style.backgroundRepeat="no-repeat"}else oNode.style.backgroundImage="",oNode.style.backgroundRepeat="",
this.$background=null},this.change=this.setValue=function(value){this.setProperty("value",value,!1,!0),
this.dispatchEvent("afterchange",{value:value})},this.getValue=function(){return this.value},this.select=function(){
this.setProperty("selected",!0,!1,!0)},this.getGroup=function(){return this.$group},this.$check=function(visually){
this.$setStyleClass(this.$ext,this.$baseCSSname+"Selected"),this.selected=!0,this.oInput&&(this.oInput.selected=!0),
this.doBgSwitch(2)},this.$uncheck=function(){this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Selected"]),
this.selected=!1,this.oInput&&(this.oInput.selected=!1),this.doBgSwitch(1)},this.$enable=function(){this.oInput&&(this.oInput.disabled=!1)


var _self=this
this.$ext.onclick=function(e){e||(e=event),(e.srcElement||e.target)!=this&&(_self.dispatchEvent("click",{
htmlEvent:e}),_self.$group.change(_self.value))},this.$ext.onmousedown=function(e){e||(e=event),(e.srcElement||e.target)!=this&&apf.setStyleClass(this,_self.$baseCSSname+"Down")

},this.$ext.onmouseover=function(e){e||(e=event),(e.srcElement||e.target)!=this&&apf.setStyleClass(this,_self.$baseCSSname+"Over")

},this.$ext.onmouseout=this.$ext.onmouseup=function(){apf.setStyleClass(this,"",[_self.$baseCSSname+"Down",_self.$baseCSSname+"Over"])

}},this.$disable=function(){this.oInput&&(this.oInput.disabled=!0),this.$ext.onclick=this.$ext.onmousedown=this.$ext.onmouseover=this.$ext.onmouseout=this.$ext.onmouseup=null

},this.doBgSwitch=function(nr){if(this.bgswitch&&(this.bgoptions[1]>=nr||4==nr)){4==nr&&(nr=this.bgoptions[1]+1)


var strBG="vertical"==this.bgoptions[0]?"0 -"+parseInt(this.bgoptions[2])*(nr-1)+"px":"-"+parseInt(this.bgoptions[2])*(nr-1)+"px 0"


this.$getLayoutNode("main","background",this.$ext).style.backgroundPosition=strBG}},this.$focus=function(){
if(this.$ext)return(!this.oInput||!this.oInput.disabled)&&void this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus")

},this.$blur=function(){this.$ext&&this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"])},this.addEventListener("keydown",function(e){
var key=e.keyCode
if(13==key||32==key)return this.$group.change(this.value),!1
if(38==key){for(var node=this;node&&node.previousSibling;)if(node=node.previousSibling,"radiobutton"==node.localName&&!node.disabled&&node.$group==this.$group)return node.check(),
void node.focus()}else if(40==key)for(var node=this;node&&node.nextSibling;)if(node=node.nextSibling,
"radiobutton"==node.localName&&!node.disabled&&node.$group==this.$group)return node.check(),void node.focus()

},!0),this.$draw=function(){this.$ext=this.$getExternal(),this.oInput=this.$getLayoutNode("main","input",this.$ext),
this.oLabel=this.$getLayoutNode("main","label",this.$ext),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),
this.oLabel&&1!=this.oLabel.nodeType&&(this.oLabel=this.oLabel.parentNode),this.$enable()},this.$childProperty="label",
this.$loadAml=function(x){this.group?this.$propHandlers.group.call(this,this.group):"group"==this.parentNode.localName&&this.$propHandlers.group.call(this,this.parentNode),
this.$group||this.$propHandlers.group.call(this,"group"+this.parentNode.$uniqueId)},this.$destroy=function(){
this.$group&&this.$group.$removeRadio(this)}}.call(apf.radiobutton.prototype=new apf.Presentation),apf.aml.setElement("radiobutton",apf.radiobutton),
apf.$group=apf.group=function(struct,tagName){this.$init(tagName||"group",apf.NODE_VISIBLE,struct),this.implement(apf.StandardBinding)


var radiobuttons=[]
this.$supportedProperties.push("value","selectedItem"),this.$propHandlers.value=function(value){for(var i=0;i<radiobuttons.length;i++)if(radiobuttons[i].value==value)return this.setProperty("selectedItem",radiobuttons[i])


return this.setProperty("selectedItem",null)}
var lastSelected
this.$propHandlers.selectedItem=function(rb){if(lastSelected&&lastSelected.$uncheck(),rb){rb.$check(),
lastSelected=rb
for(var i=0;i<radiobuttons.length;i++)radiobuttons[i].setProperty("selectedItem",rb)}},this.$addRadio=function(rb){
var id=radiobuttons.push(rb)-1
rb.value||rb.setProperty("value",id)
var _self=this
rb.addEventListener("prop.value",function(e){this.selected?_self.setProperty("value",e.value):_self.value==e.value&&this.select()

}),this.value&&rb.value==this.value?this.setProperty("selectedItem",rb):rb.selected&&this.setProperty("value",rb.value)

},this.$removeRadio=function(rb){radiobuttons.remove(rb),rb.value===rb.id&&rb.setProperty("value",""),
rb.selectedItem==rb&&this.setProperty("value",null)},this.change=this.setValue=function(value){this.setProperty("value",value),
this.dispatchEvent("afterchange",{value:value})},this.getValue=function(){return this.value},this.$draw=function(){
this.$ext=this.$int=this.$pHtmlNode}},apf.$group.prototype=new apf.GuiElement,apf.aml.setElement("group",apf.$group),
apf.skin=function(struct,tagName){this.$init(tagName||"skin",apf.NODE_HIDDEN,struct)},apf.aml.setElement("skin",apf.skin),
function(){this.$includesRemaining=0,this.$propHandlers.src=function(value){apf.skins.Init(apf.getXml(value),this,this.$path)

},this.addEventListener("DOMNodeInsertedIntoDocument",function(e){this.src||this.name||apf.skins.Init(this.$aml||this)

})}.call(apf.skin.prototype=new apf.AmlElement),apf.spinner=function(struct,tagName){this.$init(tagName||"spinner",apf.NODE_VISIBLE,struct),
this.max=64e3,this.min=-64e3,this.focused=!1,this.value=0,this.realtime=!1},function(){this.$supportedProperties.push("width","value","max","min","caption","realtime"),
this.$booleanProperties.realtime=!0,this.$propHandlers.value=function(value){value=parseInt(value)||0,
this.value=this.oInput.value=value>this.max?this.max:value<this.min?this.min:value},this.$propHandlers.min=function(value){
(value=parseInt(value))&&(this.min=value,value>this.value&&this.change(value))},this.$propHandlers.max=function(value){
(value=parseInt(value))&&(this.max=value,value<this.value&&this.change(value))},this.change=this.setValue=function(value){
this.setProperty("value",value,!1,!0),this.dispatchEvent("afterchange",{value:value})},this.getValue=function(){
return this.value},this.increment=function(){this.change(parseInt(this.oInput.value)+1)},this.decrement=function(){
this.change(parseInt(this.oInput.value)-1)},this.$enable=function(){this.oInput.disabled=!1,this.$setStyleClass(this.oInput,"",["inputDisabled"])

},this.$disable=function(){this.oInput.disabled=!0,this.$setStyleClass(this.oInput,"inputDisabled")},
this.$focus=function(e){this.$ext&&!this.focused&&(this.focused=!0,this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus"),
this.oLeft&&this.$setStyleClass(this.oLeft,"leftFocus"))},this.$blur=function(e){(this.$ext||this.focused)&&(this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),
this.oLeft&&this.$setStyleClass(this.oLeft,"".leftFocus),this.setProperty("value",this.oInput.value,!1,!1),
this.focused=!1)},this.addEventListener("keydown",function(e){var key=e.keyCode,keyAccess=key<8||key>9&&key<37&&12!==key||key>40&&key<46||key>46&&key<48||key>57&&key<96||key>105&&key<109&&107!==key||key>109&&189!==key


if(keyAccess)return!1
switch(key){case 38:this.increment()
break
case 40:this.decrement()}},!0),this.addEventListener("keyup",function(e){this.realtime&&this.change(parseInt(this.oInput.value))

},!0),this.$draw=function(){var _self=this
this.$ext=this.$getExternal(null,null,function(oExt){oExt.setAttribute("onmousedown",'if (!this.host.disabled)                     this.host.dispatchEvent("mousedown", {htmlEvent : event});'),
oExt.setAttribute("onmouseup",'if (!this.host.disabled)                     this.host.dispatchEvent("mouseup", {htmlEvent : event});'),
oExt.setAttribute("onclick",'if (!this.host.disabled)                     this.host.dispatchEvent("click", {htmlEvent : event});')

}),this.$int=this.$getLayoutNode("main","container",this.$ext),this.oInput=this.$getLayoutNode("main","input",this.$ext),
this.$buttonPlus=this.$getLayoutNode("main","buttonplus",this.$ext),this.$buttonMinus=this.$getLayoutNode("main","buttonminus",this.$ext),
this.oLeft=this.$getLayoutNode("main","left",this.$ext)
var timer,doc=document.compatMode&&"CSS1Compat"!=document.compatMode?document.body:document.html,z=0
this.oInput.value=this.value,this.oInput.onmousedown=function(e){function calcStep(e){e=e||window.event


var x=e.pageX||e.clientX+(doc?doc.scrollLeft:0),y=e.pageY||e.clientY+(doc?doc.scrollTop:0),nrOfPixels=cy-y


return y>ot&&x>ol&&y<ot+oh&&x<ol+ow?void(step=0):(step=Math.pow(Math.min(200,Math.abs(nrOfPixels))/10,2)/10,
void(nrOfPixels<0&&(step=-1*step)))}if(!_self.disabled){e=e||window.event,clearTimeout(timer)
var newval,value=parseInt(this.value)||0,step=0,cy=e.clientY,ot=_self.$int.offsetTop,ol=_self.$int.offsetLeft,ow=_self.$int.offsetWidth,oh=_self.$int.offsetHeight,func=function(){
clearTimeout(timer),timer=$setTimeout(func,10),step&&(newval=value+step,newval<=_self.max&&newval>=_self.min?(value+=step,
value=Math.round(value),_self.oInput.value=value,_self.realtime&&_self.change(value)):_self.oInput.value=step<0?_self.min:_self.max)

}
func(),document.onmousemove=calcStep,document.onmouseup=function(e){clearTimeout(timer)
var value=parseInt(_self.oInput.value)
value!=_self.value&&_self.change(value),document.onmousemove=document.onmouseup=null}}}
var buttonDown=!1
this.$buttonPlus.onmousedown=function(e){if(!_self.disabled){e=e||window.event,buttonDown=!0
var value=(parseInt(_self.oInput.value)||0)+1,func=function(){clearTimeout(timer),timer=$setTimeout(func,50),
z++,value+=Math.pow(Math.min(200,z)/10,2)/10,value=Math.round(value),_self.oInput.value=value<=_self.max?value:_self.max,
_self.realtime&&_self.change(value<=_self.max?value:_self.max)}
apf.setStyleClass(this,"plusDown",["plusHover"]),func()}},this.$buttonMinus.onmousedown=function(e){if(!_self.disabled){
e=e||window.event,buttonDown=!0
var value=(parseInt(_self.oInput.value)||0)-1,func=function(){clearTimeout(timer),timer=$setTimeout(func,50),
z++,value-=Math.pow(Math.min(200,z)/10,2)/10,value=Math.round(value),_self.oInput.value=value>=_self.min?value:_self.min,
_self.realtime&&_self.change(value>=_self.min?value:_self.min)}
apf.setStyleClass(this,"minusDown",["minusHover"]),func()}},this.$buttonMinus.onmouseout=function(e){
if(!_self.disabled){clearTimeout(timer),z=0
var value=parseInt(_self.oInput.value)
value!=_self.value&&_self.change(value),apf.setStyleClass(this,"",["minusHover"]),_self.focused||_self.$blur(e)

}},this.$buttonPlus.onmouseout=function(e){if(!_self.disabled){clearTimeout(timer),z=0
var value=parseInt(_self.oInput.value)
value!=_self.value&&_self.change(value),apf.setStyleClass(this,"",["plusHover"]),_self.focused||_self.$blur(e)

}},this.$buttonMinus.onmouseover=function(e){_self.disabled||apf.setStyleClass(this,"minusHover")},this.$buttonPlus.onmouseover=function(e){
_self.disabled||apf.setStyleClass(this,"plusHover")},this.$buttonPlus.onmouseup=function(e){if(!_self.disabled){
e=e||event,apf.cancelBubble(e,this),apf.setStyleClass(this,"plusHover",["plusDown"]),clearTimeout(timer),
z=0
var value=parseInt(_self.oInput.value)
buttonDown?buttonDown=!1:(value++,_self.oInput.value=value),value!=_self.value&&_self.change(value)}},
this.$buttonMinus.onmouseup=function(e){if(!_self.disabled){e=e||event,apf.cancelBubble(e,this),apf.setStyleClass(this,"minusHover",["minusDown"]),
clearTimeout(timer),z=0
var value=parseInt(_self.oInput.value)
buttonDown?buttonDown=!1:(value--,_self.oInput.value=value),value!=_self.value&&_self.change(value)}},
this.oInput.onselectstart=function(e){e=e||event,e.cancelBubble=!0},this.oInput.host=this},this.$destroy=function(){
this.oInput.onkeypress=this.oInput.onmousedown=this.oInput.onkeydown=this.oInput.onkeyup=this.oInput.onselectstart=this.$buttonPlus.onmouseover=this.$buttonPlus.onmouseout=this.$buttonPlus.onmousedown=this.$buttonPlus.onmouseup=this.$buttonMinus.onmouseover=this.$buttonMinus.onmouseout=this.$buttonMinus.onmousedown=this.$buttonMinus.onmouseup=null

}}.call(apf.spinner.prototype=new apf.StandardBinding),apf.aml.setElement("spinner",apf.spinner),apf.splitbutton=function(struct,tagName){
this.$init(tagName||"splitbutton",apf.NODE_VISIBLE,struct)},function(){this.$focussable=!1,this.$booleanProperties["disabled-split"]=1,
this.$propHandlers.caption=function(value){this.$button1.setProperty("caption",value)},this.$propHandlers.icon=function(value){
this.$button1.setProperty("icon",value)},this.$propHandlers.tooltip=function(value){this.$button1.setProperty("tooltip",value)

},this.$propHandlers.hotkey=function(value){this.$button1.setProperty("hotkey",value)},this.$propHandlers.disabled=function(value){
this.$button1.setProperty("disabled",value),this.$button2.setProperty("disabled",value)},this.$propHandlers["disabled-split"]=function(value){
this.$button2.setProperty("disabled",value)},this.$propHandlers["button-skin"]=function(value){this.$button1.setProperty("skin",value),
this.$button2.setProperty("skin",value)},this.$propHandlers["class"]=function(value){apf.setStyleClass(this.$ext,value,this.$lastClassValue?[this.$lastClassValue]:null),
this.$lastClassValue=value},this.$propHandlers.submenu=function(value){this.$button2.setProperty("submenu",value)


var _self=this
this.$button2.addEventListener("mousedown",function(){var menu=self[value]||value
menu.$splitInited||(_self.dispatchEvent("submenu.init"),menu.addEventListener("display",function(){var split=this.opener.parentNode,diff=apf.getAbsolutePosition(split.$button2.$ext)[0]-apf.getAbsolutePosition(split.$button1.$ext)[0]


this.$ext.style.marginLeft=~this.$ext.className.indexOf("moveleft")?0:"-"+diff+"px"}),menu.$splitInited=!0),
this.removeEventListener("mousedown",arguments.callee)})},this.$draw=function(){var _self=this
this.$ext=this.$pHtmlNode.appendChild(document.createElement("div")),this.$ext.className="splitbutton",
this.getAttribute("style")&&this.$ext.setAttribute("style",this.getAttribute("style"))
var skin=this["button-skin"]||this.getAttribute("skin")||this.localName
this.$button1=new apf.button({htmlNode:this.$ext,parentNode:this,skinset:this.getAttribute("skinset"),
skin:skin,"class":"main",onmouseover:function(){apf.setStyleClass(this.$ext,"primary"),_self.$button2.disabled||(_self.$button2.$setState("Over",{}),
_self.dispatchEvent("mouseover",{button:this}))},onmouseout:function(){apf.setStyleClass(this.$ext,"",["primary"]),
_self.$button2.disabled||(_self.$button2.$setState("Out",{}),_self.dispatchEvent("mouseout",{button:this
}))},onmousedown:function(){_self.dispatchEvent("mousedown",{button:this})},onclick:function(e){_self.dispatchEvent("click")

}}),this.$button2=new apf.button({htmlNode:this.$ext,parentNode:this,skinset:this.getAttribute("skinset"),
skin:skin,"class":"arrow",onmouseover:function(){apf.setStyleClass(this.$ext,"primary"),_self.$button1.$setState("Over",{}),
_self.dispatchEvent("mouseover",{button:this})},onmouseout:function(){_self.$button2.value?(apf.setStyleClass(this.$ext,"primary"),
_self.$button1.$setState("Over",{})):(apf.setStyleClass(this.$ext,"",["primary"]),_self.$button1.$setState("Out",{})),
_self.dispatchEvent("mouseout",{button:this})},onmousedown:function(){_self.dispatchEvent("mousedown",{
button:this})},onclick:function(e){_self.dispatchEvent("split.click",e)}})},this.$loadAml=function(x){}

}.call(apf.splitbutton.prototype=new apf.GuiElement),apf.aml.setElement("splitbutton",apf.splitbutton),
apf.input=function(struct,tagName){this.$init(tagName||"input",apf.NODE_VISIBLE,struct)},apf.secret=function(struct,tagName){
this.$init(tagName||"secret",apf.NODE_VISIBLE,struct)},apf.password=function(struct,tagName){this.$init(tagName||"password",apf.NODE_VISIBLE,struct)

},apf.textarea=function(struct,tagName){this.$init(tagName||"textarea",apf.NODE_VISIBLE,struct),this.multiline=!0

},apf.email=function(struct,tagName){this.$init(tagName||"email",apf.NODE_VISIBLE,struct)},apf.textbox=function(struct,tagName){
this.$init(tagName||"textbox",apf.NODE_VISIBLE,struct)},function(){this.$focussable=!0,this.$masking=!1,
this.$autoComplete=!1,this.$childProperty="value",this.value="",this.readonly=!1,this.$isTextInput=!0,
this.multiline=!1,this.$booleanProperties.readonly=!0,this.$booleanProperties.focusselect=!0,this.$booleanProperties.realtime=!0,
this.$booleanProperties.kbclear=!0,this.$supportedProperties.push("value","mask","initial-message","focusselect","realtime","type","rows","cols","kbclear"),
this.$propHandlers.value=function(value,prop,force,initial){if(this.$input&&(initial||this.getValue()!=value)){
if(!(initial||value||this.hasFocus()))return this.$clear()
this.isHTMLBox?this.$input.textContent!=value&&(this.$input.textContent=value):this.$input.value!=value&&(this.$input.value=value),
initial||apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Initial"]),this.$button&&(this.$button.style.display=value&&!initial?"block":"none")

}},this.addEventListener("prop.maxlength",function(e){this.$input.tagName.toLowerCase().match(/input|textarea/)&&(this.$input.maxLength=parseInt(e.value)||null)

}),this.addEventListener("prop.editable",function(e){e.value?apf.addListener(this.$input,"mousedown",apf.preventDefault):apf.removeListener(this.$input,"mousedown",apf.preventDefault)

}),this.$propHandlers.mask=function(value){if("password"!=this.mask.toLowerCase()){if(!value)throw new Error("Not Implemented")


this.$masking||(this.$masking=!0,this.implement(apf.textbox.masking),this.focusselect=!1),this.setMask(this.mask)

}},this.$propHandlers["initial-message"]=function(value){this.value||this.$clear(!0),"password"==this.type&&this.$inputInitFix&&(this.$inputInitFix.textContent=value,
apf.setStyleClass(this.$inputInitFix,"initFxEnabled"))},this.$propHandlers.rows=function(value){"textarea"==this.$input.tagName.toLowerCase()&&value&&(this.setProperty("rows",value),
this.$ext&&(this.$ext.rows=value))},this.$propHandlers.cols=function(value){"textarea"==this.$input.tagName.toLowerCase()&&value&&(this.setProperty("cols",value),
this.$ext&&(this.$ext.cols=value))},this.$propHandlers.focusselect=function(value){var _self=this
this.$input.onmousedown=function(){_self.focusselect=!1},this.$input.onmouseup=this.$input.onmouseout=function(){
_self.focusselect=value}},this.$propHandlers.type=function(value){value&&"password|username".indexOf(value)>-1&&"undefined"==typeof this.focusselect&&(this.focusselect=!0,
this.$propHandlers.focusselect.call(this,!0))},this.$isTextInput=function(e){return!0},this.change=this.setValue=function(value){
this.setProperty("value",value,!1,!0),this.dispatchEvent("afterchange",{value:value})},this.clear=function(){
this.setProperty("value","")},this.$clear=function(noEvent){this["initial-message"]?(apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial"),
this.$propHandlers.value.call(this,this["initial-message"],null,null,!0)):this.$propHandlers.value.call(this,"",null,null,!0),
noEvent||this.dispatchEvent("clear")},this.getValue=function(){var v
return v=this.isHTMLBox?this.$input.innerText:this.$input.value,v==this["initial-message"]?"":v.replace(/\r/g,"")

},this.select=function(){this.$input.select()},this.deselect=function(){this.$input.deselect()},this.$enable=function(){
this.$input.disabled=!1},this.$disable=function(){this.$input.disabled=!0},this.$insertData=function(str){
return this.setValue(str)},this.insert=function(text){this.$input.value+=text},this.addEventListener("$clear",function(){
this.value="",this["initial-message"]&&apf.document.activeElement!=this?(this.$propHandlers.value.call(this,this["initial-message"],null,null,!0),
apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial")):this.$propHandlers.value.call(this,""),this.dispatchEvent("clear")

}),this.$keyHandler=function(key,ctrlKey,shiftKey,altKey,e){this.$button&&27==key&&this.kbclear&&this.value&&(this.change(""),
this.dispatchEvent("keydown",{keyCode:key,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey,htmlEvent:e
}),e.stopPropagation())},this.$registerElement=function(oNode){oNode&&"autocomplete"==oNode.localName&&(this.$autoComplete=oNode)

}
var fTimer
this.$focus=function(e){function delay(){try{if(fTimer&&document.activeElement==_self.$input)return void clearInterval(fTimer)


_self.$input.focus()}catch(e){}_self.$masking&&_self.setPosition(),_self.focusselect&&_self.select()}
if(this.$ext&&!this.$ext.disabled){this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus")
var value=this.getValue()
this["initial-message"]&&!value&&(this.$propHandlers.value.call(this,"",null,null,!0),apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Initial"]))


var _self=this
delay()}},this.$blur=function(e){if(this.$ext){this.realtime||this.change(this.getValue()),e&&(e.cancelBubble=!0),
this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus","capsLock"])
var value=this.getValue()
this["initial-message"]&&!value&&(this.$propHandlers.value.call(this,this["initial-message"],null,null,!0),
apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial"))
try{e&&e.srcElement==apf.window||this.$input.blur()}catch(e){}this.oContainer&&$setTimeout("var o = apf.lookup("+this.$uniqueId+");                o.oContainer.style.display = 'none'",100),
clearInterval(fTimer)}},this.$draw=function(){var _self=this,typedBefore=!1
if("codeeditor"==this.localName&&(this.skin="textarea",this.$loadSkin()),this.$ext=this.$getExternal(null,null,function(oExt){
var mask=this.getAttribute("mask");("string"==typeof mask&&"password"==mask.toLowerCase()||"secret|password".indexOf(this.localName)>-1)&&(this.type="password",
this.$getLayoutNode("main","input").setAttribute("type","password")),oExt.setAttribute("onmousedown","if (!this.host.disabled)                 this.host.dispatchEvent('mousedown', {htmlEvent : event});"),
oExt.setAttribute("onmouseup","if (!this.host.disabled)                 this.host.dispatchEvent('mouseup', {htmlEvent : event});"),
oExt.setAttribute("onclick","if (!this.host.disabled)                 this.host.dispatchEvent('click', {htmlEvent : event});")

}),this.$input=this.$getLayoutNode("main","input",this.$ext),this.$button=this.$getLayoutNode("main","button",this.$ext),
this.$inputInitFix=this.$getLayoutNode("main","initialfix",this.$ext),"password"==this.type&&this.$propHandlers.type.call(this,"password"),
!apf.hasContentEditable&&"input|textarea".indexOf(this.$input.tagName.toLowerCase())==-1){var node=this.$input


this.$input=node.parentNode.insertBefore(document.createElement("textarea"),node),node.parentNode.removeChild(node),
this.$input.className=node.className,this.$ext==node&&(this.$ext=this.$input)}this.$button&&(this.$button.onmouseup=function(){
_self.$clear(),_self.change(""),_self.focus({mouse:!0})}),"textarea"==this.$input.tagName.toLowerCase()&&this.addEventListener("focus",function(e){}),
this.$input.onselectstart=function(e){e||(e=event),e.cancelBubble=!0},this.$input.host=this,this.$input.onkeydown=function(e){
if(e=e||window.event,this.host.disabled)return e.returnValue=!1,!1
if(_self.realtime)apf.isWebkit&&_self.xmlRoot&&_self.getValue()!=_self.value&&$setTimeout("var o = apf.lookup("+_self.$uniqueId+");                    o.change(o.getValue())")
else{var value=_self.getValue()
13==e.keyCode&&value!=_self.value&&_self.change(value)}if(_self.readonly||(!_self.multiline||"optional"==_self.multiline)&&13==e.keyCode&&!e.shiftKey||e.ctrlKey&&(66==e.keyCode||73==e.keyCode||85==e.keyCode))return e.returnValue=!1,
!1
if(typedBefore&&"password"==this.getAttribute("type")&&""!=this.value){var hasClass=_self.$ext.className.indexOf("capsLock")>-1,capsKey=20===e.keyCode


capsKey&&apf.setStyleClass(_self.$ext,hasClass?null:"capsLock",hasClass?["capsLock"]:null)}if(_self.$autoComplete||_self.oContainer){
var keyCode=e.keyCode
$setTimeout(function(){_self.$autoComplete?_self.$autoComplete.fillAutocomplete(keyCode):_self.fillAutocomplete(keyCode)

})}return _self.mask?void 0:_self.$keyHandler(e.keyCode,e.ctrlKey,e.shiftKey,e.altKey,e)},this.$input.onkeyup=function(e){
if(e||(e=event),this.host.disabled)return!1
e.keyCode
_self.$button&&(_self.$button.style.display=_self.getValue()?"block":"none"),_self.realtime&&$setTimeout(function(){
var v
_self.mask||(v=_self.getValue())==_self.value||_self.change(v)}),_self.isValid&&_self.isValid()&&13!=e.keyCode&&17!=e.keyCode&&_self.clearError()

},apf.hasAutocompleteXulBug&&this.$input.setAttribute("autocomplete","off"),"INPUT|TEXTAREA".indexOf(this.$input.tagName)==-1&&(this.isHTMLBox=!0,
this.$input.unselectable="Off",this.$input.contentEditable=!0,this.$input.select=function(){var r=document.createRange()


r.setStart(_self.$input.firstChild||_self.$input,0)
var lastChild=_self.$input.lastChild||_self.$input
r.setEnd(lastChild,1==lastChild.nodeType?lastChild.childNodes.length:lastChild.nodeValue.length)
var s=window.getSelection()
s.removeAllRanges(),s.addRange(r)},this.$input.onpaste=function(e){if(e.clipboardData.types.indexOf("text/html")!=-1){
var sel=window.getSelection(),range=sel.getRangeAt(0)
setTimeout(function(){var range2=sel.getRangeAt(0)
range2.setStart(range.startContainer,range.startOffset)
var c=range2.cloneContents()
range2.deleteContents()
var d=document.body.appendChild(document.createElement("div"))
d.appendChild(c)
var p=d.innerText
_self.multiline||(p=p.replace(/([\r\n])/g,"")),d.parentNode.removeChild(d),range2.insertNode(document.createTextNode(p))

})}}),this.$input.deselect=function(){if(document.selection){var r=document.selection.createRange()
r.collapse(),r.select()}}
var f
apf.addListener(this.$input,"keypress",f=function(e){if("password"!=_self.$input.getAttribute("type"))return apf.removeListener(_self.$input,"keypress",f)


e=e||window.event
var which=-1
e.which?which=e.which:e.keyCode&&(which=e.keyCode)
var shift_status=!1
e.shiftKey?shift_status=e.shiftKey:e.modifiers&&(shift_status=!!(4&e.modifiers)),which>=65&&which<=90&&!shift_status||which>=97&&which<=122&&shift_status?apf.setStyleClass(_self.$ext,"capsLock"):apf.setStyleClass(_self.$ext,null,["capsLock"]),
typedBefore=!0})},this.$loadAml=function(){"undefined"==typeof this["initial-message"]&&this.$setInheritedAttribute("initial-message"),
"undefined"==typeof this.realtime&&this.$setInheritedAttribute("realtime")},this.addEventListener("DOMNodeRemovedFromDocument",function(){
this.$button&&(this.$button.onmousedown=null),this.$input&&(this.$input.onkeypress=this.$input.onmouseup=this.$input.onmouseout=this.$input.onmousedown=this.$input.onkeydown=this.$input.onkeyup=this.$input.onselectstart=null)

})}.call(apf.textbox.prototype=new apf.StandardBinding),apf.config.$inheritProperties["initial-message"]=1,
apf.config.$inheritProperties.realtime=1,apf.input.prototype=apf.secret.prototype=apf.password.prototype=apf.textarea.prototype=apf.email.prototype=apf.textbox.prototype,
apf.aml.setElement("input",apf.input),apf.aml.setElement("secret",apf.secret),apf.aml.setElement("password",apf.password),
apf.aml.setElement("textarea",apf.textarea),apf.aml.setElement("textbox",apf.textbox),apf.toolbar=function(struct,tagName){
this.$init(tagName||"toolbar",apf.NODE_VISIBLE,struct)},function(){this.$focussable=!1,this.$draw=function(){
this.$ext=this.$getExternal(),this.$int=this.$getLayoutNode("main","container",this.$ext)}}.call(apf.toolbar.prototype=new apf.Presentation),
apf.aml.setElement("toolbar",apf.toolbar),apf.textbox.masking=function(){function checkChar(chr,p){var f=format.substr(p,1),c=fcase.substr(p,1)


return null==chr.match(new RegExp(_REF[f]))?_FALSE_:">"==c?chr.toUpperCase():"<"==c?chr.toLowerCase():chr

}function setPosition(p){return p<0&&(p=0),"undefined"==typeof pos[p]?(oInput.selectionStart=oInput.selectionEnd=pos[pos.length-1]+1,
lastPos=pos.length,!1):(oInput.selectionStart=pos[p],oInput.selectionEnd=pos[p]+1,void(lastPos=p))}function setCharacter(chr){
if(pos.length&&null==pos[lastPos])return!1
if(chr=checkChar(chr,lastPos),chr==_FALSE_)return!1
var val=oInput.value,start=oInput.selectionStart,end=oInput.selectionEnd
return oInput.value=val.substr(0,start)+chr+val.substr(end),oInput.selectionStart=start,oInput.selectionEnd=end,
myvalue[lastPos]=chr,!0}function deletePosition(p){if(null==pos[p])return!1
var val=oInput.value,start=pos[p],end=pos[p]+1
oInput.value=val.substr(0,start)+replaceChar+val.substr(end),oInput.selectionStart=start,oInput.selectionEnd=end,
myvalue[p]=" "}function calcPosFromCursor(){var range,lt=0
range=document.selection.createRange()
var r2=range.duplicate()
r2.expand("textedit"),r2.setEndPoint("EndToStart",range),lt=r2.text.length
for(var i=0;i<pos.length;i++)if(pos[i]>lt)return 0==i?0:i-1
return myvalue.length}var initial,myvalue,format,fcase,replaceChar,_FALSE_=9128748732,_REF={0:"\\d",1:"[12]",
9:"[\\d ]","#":"[\\d +-]",L:"[A-Za-z]","?":"[A-Za-z ]",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]",X:"[0-9A-Fa-f]",
x:"[0-9A-Fa-f ]","&":"[^s]",C:"."},lastPos=-1,masking=!1,oInput=this.$input,pos=[]
this.setPosition=function(setpos){setPosition(setpos||lastPos||0)},this.addEventListener("$clear",function(){
if(this.value="",this.mask)return this.setValue("")}),this.$propHandlers.value=function(value){var data=""


if(this.includeNonTypedChars)for(var i=0;i<initial.length;i++)initial.substr(i,1)!=value.substr(i,1)&&(data+=value.substr(i,1))


this.$insertData(data||value),setPosition(myvalue.length)}
var numpadKeys={96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",
109:"-",110:".",111:"/"}
this.addEventListener("keydown",function(e){var key=e.keyCode,stop=!1
switch(key){case 39:setPosition(lastPos+1),stop=!0
break
case 37:setPosition(lastPos-1),stop=!0
break
case 35:case 34:setPosition(myvalue.length),stop=!0
break
case 33:case 36:setPosition(0),stop=!0
break
case 8:deletePosition(lastPos-1),setPosition(lastPos-1),stop=!0
break
case 46:deletePosition(lastPos),setPosition(lastPos),stop=!0
break
default:67==key&&e.ctrlKey&&(window.clipboardData.setData("Text",this.getValue()),stop=!0)}var chr=numpadKeys[key]||String.fromCharCode(key)


setCharacter(chr)&&setPosition(lastPos+1)
var value,pos=lastPos
if(this.realtime&&(value=this.getValue())!=this.value&&(this.change(value),setPosition(pos)),apf.isCharacter(e.keyCode)||stop)return!1

},!0),this.$initMasking=function(){this.$keyHandler=null,masking=!0,this.$input[apf.isIphone?"onclick":"onmouseup"]=function(e){
var pos=Math.min(calcPosFromCursor(),myvalue.length)
return setPosition(pos),!1},this.$input.onpaste=function(e){e=e||window.event,e.returnValue=!1,this.host.setValue(window.clipboardData.getData("Text")||""),
$setTimeout(function(){setPosition(lastPos)},1)},this.getValue=function(){return this.includeNonTypedChars?initial==this.$input.value?"":this.$input.value.replace(new RegExp(replaceChar,"g"),""):myvalue.join("")

},this.setValue=function(value){this.$propHandlers.value.call(this,value)}},this.setMask=function(m){
masking||this.$initMasking(),m=m.split(";"),replaceChar=m.pop(),this.includeNonTypedChars=0!==parseInt(m.pop(),10)


var chr,mask=m.join(""),validation="",visual="",mode_case="-",strmode=!1,startRight=!1
pos=[],format="",fcase=""
for(var looppos=-1,i=0;i<mask.length;i++)chr=mask.substr(i,1),chr.match(/[\!\'\"\>\<\\]/)?"!"==chr?startRight=!0:"<"==chr||">"==chr?mode_case=chr:"'"!=chr&&'"'!=chr||(strmode=!strmode):(looppos++,
!strmode&&_REF[chr]?(pos.push(looppos),visual+=replaceChar,format+=chr,fcase+=mode_case,validation+=_REF[chr]):visual+=chr)


this.$input.value=visual,initial=visual,myvalue=[],replaceChar=replaceChar},this.$insertData=function(str){
if(str!=this.getValue()){var i,j
try{oInput.selectionStart==oInput.selectionEnd&&setPosition(0)}catch(ex){if(!str)return
var chr,val
for(i=0,j=str.length;i<j;i++)lastPos=i,null!=pos[lastPos]&&(chr=checkChar(str.substr(i,1),i),chr!=_FALSE_&&(val=oInput.value,
oInput.value=val.substr(0,pos[i])+chr+val.substr(pos[i]+1)))
return void(str.length&&lastPos++)}if(str=this.dispatchEvent("insert",{data:str})||str,!str){if(!this.getValue())return


for(i=this.getValue().length-1;i>=0;i--)deletePosition(i)
return void setPosition(0)}for(i=0,j=str.length;i<j;i++)lastPos=i,setCharacter(str.substr(i,1)),setPosition(i+1)


str.length&&lastPos++}}},require("./lib/menu/menu")(apf),require("./lib/flexbox")(apf),require("./lib/page")(apf),
apf.start(),register(null,{apf:apf})}return main.consumes=["ext"],main.provides=["apf"],main})})


define("plugins/c9.ide.ui/focus",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&void(loaded=!0)}function focus(el,blurTab){if(el)if(el.$amlLoaded){if(el.focus(),
blurTab){var tab=tabManager&&tabManager.focussedTab
tab&&tab.editor&&tab.editor.focus(!1,!0)}}else el.$amlDestroyed||tabManager.focusTab(el)}var tabManager,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({set tabManager(v){tabManager=v},get activeElement(){
return tabManager&&tabManager.focussed?tabManager.focussedTab:apf.activeElement},focus:focus}),register(null,{
focusManager:plugin})}return main.consumes=["Plugin"],main.provides=["focusManager"],main})


define("plugins/c9.ide.ui/widgets.terminal",[],function(require,exports,module){function main(options,imports,register){
function Terminal(options,forPlugin,baseclass){function send(data){emit("input",{data:data})}function _resize(force){
var ace=terminal.aceSession.ace,size=ace.renderer.$size,config=ace.renderer.layerConfig,h=size.scrollerHeight,w=size.scrollerWidth-2*config.padding


if(!h||config.lineHeight<=1)return!1
var _rows=Math.floor((h-1)/config.lineHeight)
_rows<=2&&!ace.renderer.scrollBarV.isVisible&&(w-=ace.renderer.scrollBarV.width)
var _cols=Math.floor(w/config.characterWidth)
if(_cols&&_rows&&(force||_cols!=terminal.cols||_rows!=terminal.rows)){if(_cols>1e3||_rows>1e3)return void console.error("invalid terminal size")


rows=Math.max(_rows,2),cols=Math.max(_cols,2),terminal.resize(_cols,_rows),emit("resize",{cols:cols,rows:rows
})}}function draw(htmlNode){if(!drawn){drawn=!0,aceterm=Aceterm.createEditor(htmlNode,"ace/theme/idle_fingers"),
terminal=new Aceterm(cols,rows,send),aceterm.setSession(terminal.aceSession),aceterm.renderer.on("resize",function(){
_resize()})
var cm=commands
aceterm.commands.addCommands(cm.getExceptionList()),cm.on("update",function(){aceterm.commands.addCommands(cm.getExceptionList())

},plugin),aceterm.commands.exec=function(command){return cm.exec(command)}
for(var prop in options)"container"!=prop&&plugin.hasOwnProperty(prop)&&(plugin[prop]=options[prop])
redirectEvents={afterRender:aceterm.renderer,title:terminal,afterWrite:terminal},emit.sticky("draw")}
}if(!options)throw new Error("options are required")
var plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()
baseclass&&plugin.baseclass()
var aceterm,terminal,redirectEvents,rows=options.rows||0,cols=options.cols||0,meta={},excludedEvents={
draw:1,load:1,unload:1,resize:1,addListener:1,removeListener:1,input:1},renameEvents={select:"changeSelection",
scroll:"changeScrollTop"},drawn=!1
return plugin.on("load",function(){options.container&&plugin.attachTo(options.container),forPlugin.once("unload",function(){
plugin.unload()})}),plugin.on("unload",function(){if(aceterm){var container=aceterm.container
aceterm.destroy(),container.innerHTML="",container.parentNode.removeChild(container)}aceterm=null,container=null,
meta={}}),plugin.on("newListener",function(type,fn){excludedEvents[type]||(renameEvents[type]&&(type=renameEvents[type]),
redirectEvents[type]?redirectEvents[type].on(type,fn):aceterm.on(type,fn))}),plugin.on("removeListener",function(type,fn){
excludedEvents[type]||(renameEvents[type]&&(type=renameEvents[type]),redirectEvents[type]?redirectEvents[type].removeListener(type,fn):aceterm.removeListener(type,fn))

}),plugin.freezePublicAPI({get aceterm(){return aceterm},get meta(){return meta},get focussed(){return aceterm.isFocussed()

},get container(){return aceterm.container},get renderer(){return aceterm.renderer},get selection(){return aceterm.selection

},get commands(){return aceterm.commands},get cols(){return cols},get rows(){return rows},get textInput(){
return aceterm.textInput},set textInput(value){return aceterm.textInput=value},get scrollMargin(){return aceterm.renderer.scrollMargin

},set scrollMargin(value){aceterm.renderer.setScrollMargin(value[0],value[1])},get theme(){return aceterm.renderer.theme.cssClass

},set theme(value){aceterm.renderer.setTheme({cssClass:value})},get convertEol(){return terminal.convertEol||!1

},set convertEol(value){terminal.convertEol=value},_events:["draw","click","userSelect","focus","blur","select","scroll","scrollbarVisibilityChanged","resize","afterRender","title","afterWrite"],
resize:function(){return aceterm.resize(!0)},focus:function(){return aceterm.focus()},blur:function(){
return aceterm.blur()},execCommand:function(cmd){return aceterm.execCommand(cmd)},scrollIntoView:function(anchor,lead,offset){
return aceterm.renderer.scrollCaretIntoView(anchor,lead,offset)},enable:function(){return aceterm.enable()

},disable:function(){return aceterm.enable()},write:function(data){return terminal.write(data)},clear:function(data){
terminal.clear()},attachTo:function(htmlNode,beforeNode){var container
drawn?container=aceterm.container:(container=document.createElement("div"),container.style.height="100%"),
htmlNode.insertBefore(container,beforeNode),drawn||draw(container)}}),plugin.load(null,options.baseName||"list"),
plugin}var Plugin=imports.Plugin,commands=imports.commands,Aceterm=require("../c9.ide.terminal/aceterm/aceterm")


register(null,{Terminal:Terminal})}return main.consumes=["Plugin","ui","util","commands"],main.provides=["Terminal"],
main})


define("plugins/c9.ide.ui/widgets.datagrid",[],function(require,exports,module){function main(options,imports,register){
function Datagrid(options,forPlugin,baseclass){if(!options)throw new Error("options are required")
options.baseName||(options.baseName="datagrid"),options.theme||(options.theme="blackdg ace-tree-"+options.baseName)


var model=new TreeModel
model.columns=options.columns,options.model=model
var plugin=new Tree(options,forPlugin,(!0))
return baseclass&&plugin.baseclass(),options.rowHeight||layout.on("eachTheme",function(e){var cls="."+options.theme.replace(/ /g," .")+" .row",height=parseInt(ui.getStyleRule(cls,"height"),10)||23


model.rowHeight=height,e.changed&&plugin.resize(!0)}),plugin.freezePublicAPI({get columns(){throw new Error("Columns can only be set.")

},set columns(c){model.columns=c,plugin.acetree&&plugin.acetree.renderer.setDataProvider(model)}}),baseclass||plugin.load(null,options.baseName||"datagrid"),
plugin}var Tree=imports.Tree,layout=imports.layout,ui=imports.ui,TreeModel=require("ace_tree/data_provider")


register(null,{Datagrid:Datagrid})}return main.consumes=["Tree","layout","ui"],main.provides=["Datagrid"],
main})


define("plugins/c9.ide.ui/widgets.tree",[],function(require,exports,module){function main(options,imports,register){
function Tree(options,forPlugin,baseclass){if(!options)throw new Error("options are required")
options.baseName||(options.baseName="tree")
var model=options.model
model||(model=new TreeModel,options.model=model)
var plugin=new List(options,forPlugin,(!0))
return baseclass&&plugin.baseclass(),plugin.freezePublicAPI({get indentSize(){return model.indentSize

},set indentSize(value){model.indentSize=value},_events:["expand","collapse"],get getRowIndent(){return model.getRowIndent

},set getRowIndent(fn){model.getRowIndent=fn},get hasChildren(){return model.hasChildren},set hasChildren(fn){
model.hasChildren=fn},get getChildren(){return model.getChildren},set getChildren(fn){model.getChildren=fn

},get loadChildren(){return model.loadChildren},set loadChildren(fn){model.loadChildren=fn},get shouldLoadChildren(){
return model.shouldLoadChildren},set shouldLoadChildren(fn){model.shouldLoadChildren=fn},toggle:function(node,deep,silent){
return model.toggleNode(node,deep,silent)},open:function(node,deep,silent,justLoaded){return model.open(node,deep,silent,justLoaded)

},close:function(node,deep,silent){return model.close(node,deep,silent)},isOpen:function(node){return model.isOpen(node)

},isVisible:function(node){return model.isVisible(node)},getNodePosition:function(node){return model.getNodePosition(node)

}}),baseclass||plugin.load(null,options.baseName||"tree"),plugin}var List=imports.List,TreeModel=require("ace_tree/data_provider")


register(null,{Tree:Tree})}return main.consumes=["List"],main.provides=["Tree"],main})


define("text!plugins/c9.ide.ui/widgets.less",[],"")


define("plugins/c9.ide.ui/widgets.list",[],function(require,exports,module){function main(options,imports,register){
function List(options,forPlugin,baseclass){function draw(htmlNode){if(!drawn){drawn=!0,acetree=new AceTree(htmlNode),
model=options.model||("object"===dataType?new TreeModel:new ListModel),model.filterCaseInsensitive=!0,
model.$sortNodes=!1,options.rowHeight||(options.rowHeight=23),options.theme||(options.theme="custom-tree ace-tree-"+(options.baseName||"list")),
acetree.setDataProvider(model)
for(var prop in options)"container"!=prop&&plugin.hasOwnProperty(prop)&&(plugin[prop]=options[prop])
redirectEvents={scroll:model,scrollbarVisibilityChanged:acetree.renderer,afterRender:acetree.renderer,
resize:acetree.renderer,expand:model,collapse:model,check:model,uncheck:model},emit.sticky("draw")}}if(!options)throw new Error("options are required")


var plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()
baseclass&&plugin.baseclass()
var acetree,model,redirectEvents,fRoot,meta={},dataType=options.model?"object":options.dataType,excludedEvents={
draw:1,load:1,unload:1,addListener:1,removeListener:1},renameEvents={select:"changeSelection",afterRename:"rename",
scroll:"changeScrollTop"},drawn=!1
return plugin.on("load",function(){options.container&&plugin.attachTo(options.container),forPlugin.once("unload",function(){
plugin.unload()})}),plugin.on("unload",function(){if(acetree){var container=acetree.container
model.setRoot(null),acetree.destroy(),container.innerHTML="",container.parentNode.removeChild(container)

}meta={}}),plugin.on("newListener",function(type,fn){excludedEvents[type]||(renameEvents[type]&&(type=renameEvents[type]),
redirectEvents[type]?redirectEvents[type].on(type,fn):acetree.on(type,fn))}),plugin.on("removeListener",function(type,fn){
excludedEvents[type]||(renameEvents[type]&&(type=renameEvents[type]),redirectEvents[type]?redirectEvents[type].removeListener(type,fn):acetree.removeListener(type,fn))

}),plugin.freezePublicAPI({get acetree(){return acetree},get meta(){return meta},get model(){return model

},get selectedNodes(){var sel=acetree.selection.getSelectedNodes()||[]
return"object"==dataType?sel:sel.map(function(n){return n.id})},get selectedNode(){var item=acetree.selection.getCursor()||null


return"object"==dataType?item:item.id},get root(){return model.cachedRoot},get scrollTop(){return model.getScrollTop()

},set scrollTop(value){return model.setScrollTop(value)},get focussed(){return acetree.isFocussed()},
get container(){return acetree.container},get renderer(){return acetree.renderer},get selection(){return acetree.selection

},get commands(){return acetree.commands},get textInput(){return acetree.textInput},set textInput(value){
return acetree.textInput=value},get emptyMessage(){return model.emptyMessage},set emptyMessage(value){
model.emptyMessage=value},get scrollMargin(){return acetree.renderer.scrollMargin},set scrollMargin(value){
acetree.renderer.setScrollMargin(value[0],value[1])},get rowHeight(){return model.rowHeight},set rowHeight(value){
model.rowHeight=value},get rowHeightInner(){return model.rowHeightInner},set rowHeightInner(value){model.rowHeightInner=value

},get theme(){return acetree.renderer.theme.cssClass},set theme(value){acetree.renderer.setTheme({cssClass:value
})},get animatedScroll(){return acetree.getOption("animatedScroll")},set animatedScroll(value){acetree.setOption("animatedScroll",value)

},get enableDragdrop(){return acetree.getOption("enableDragDrop")},set enableDragdrop(value){acetree.setOption("enableDragDrop",value)

},get enableVariableHeight(){return model.getItemHeight},set enableVariableHeight(value){if(!value)throw new Error("Unable to remove variable height")


var variableHeightRowMixin=model.constructor.variableHeightRowMixin
variableHeightRowMixin.apply(model)},get enableRename(){return!!acetree.edit},set enableRename(value){
acetree.edit=value?new AceTreeEditor(acetree):null},get enableCheckboxes(){return!!model.getCheckboxHTML

},set enableCheckboxes(value){model.getCheckboxHTML=value?function(node){return"<span class='checkbox "+(node.isChecked==-1?"half-checked ":node.isChecked?"checked ":"")+"'></span>"

}:null,value?acetree.commands.bindKey("Space",function(e){var nodes=acetree.selection.getSelectedNodes(),node=acetree.selection.getCursor()


node.isChecked=!node.isChecked,nodes.forEach(function(n){n.isChecked=node.isChecked}),model._signal(node.isChecked?"check":"uncheck",nodes),
model._signal("change")}):acetree.commands.bindKey("Space",null)},get filterKeyword(){return model.keyword

},set filterKeyword(value){model.keyword=value,model.keyword?(model.reKeyword=new RegExp("("+util.escapeRegExp(model.keyword)+")","i"),
fRoot=search.treeSearch(model.filterRoot?model.filterRoot.items||model.filterRoot:model.cachedRoot.items||model.cachedRoot,model.keyword,model.filterCaseInsensitive,null,null,model.filterProperty),
model.setRoot(fRoot)):(fRoot=null,model.reKeyword=null,model.setRoot(model.cachedRoot))},get filterCaseInsensitive(){
return model.filterCaseInsensitive},set filterCaseInsensitive(value){model.filterCaseInsensitive=value

},get filterProperty(){return model.filterProperty},set filterProperty(value){model.filterProperty=value

},get filterRoot(){return model.filterRoot},set filterRoot(value){model.filterRoot=value},get maxLines(){
return acetree.getOption("maxLines")},set maxLines(value){acetree.setOption("maxLines",value)},get minLines(){
return acetree.getOption("minLines")},set minLines(value){acetree.setOption("minLines",value)},get scrollSpeed(){
return acetree.getOption("scrollSpeed")},set scrollSpeed(value){acetree.setOption("scrollSpeed",value)

},get wrapAround(){return acetree.selection.$wrapAround},set wrapAround(value){acetree.selection.$wrapAround=value

},get isLoading(){return model.isLoading},set isLoading(fn){model.isLoading=fn},get getEmptyMessage(){
return model.getEmptyMessage},set getEmptyMessage(fn){model.getEmptyMessage=fn},get renderRow(){return model.renderRow

},set renderRow(fn){model.renderRow=fn,acetree.setDataProvider(model)},get getContentHTML(){return model.getContentHTML

},set getContentHTML(fn){model.getContentHTML=fn},get getCaptionHTML(){return model.getCaptionHTML},set getCaptionHTML(fn){
model.getCaptionHTML=fn},get getIconHTML(){return model.getIconHTML},set getIconHTML(fn){model.getIconHTML=fn

},get getCheckboxHTML(){return model.getCheckboxHTML},set getCheckboxHTML(fn){model.getCheckboxHTML=fn

},get sort(){return model.sort},set sort(fn){model.$sortNodes=!!fn,model.$sorted=!!fn,model.sort=fn},
get getClassName(){return model.getClassName},set getClassName(fn){model.getClassName=fn},get getTooltipText(){
return model.getTooltipText},set getTooltipText(fn){model.getTooltipText=fn},get getIndex(){return model.getIndex

},set getIndex(fn){model.getIndex=fn},get getItemHeight(){return model.getItemHeight},set getItemHeight(fn){
model.getItemHeight=fn},_events:["draw","click","drop","dragIn","dragOut","dragMoveOutside","folderDragLeave","folderDragEnter","dropOutside","userSelect","afterChoose","delete","beforeRename","afterRename","afterRender","check","uncheck","select","scroll","scrollbarVisibilityChanged","resize"],
setRoot:function(root){return model.cachedRoot=root,model.keyword?void(plugin.filterKeyword=model.keyword):model.setRoot(root)

},resize:function(force){return acetree.resize(force)},select:function(node){return node instanceof Array?acetree.selection.setSelection(node):acetree.selection.selectNode(node)

},focus:function(){return acetree.focus()},blur:function(){return acetree.blur()},startRename:function(node,column){
return acetree.edit.startRename(node,column)},execCommand:function(cmd){return acetree.execCommand(cmd)

},scrollIntoView:function(anchor,offset){return acetree.renderer.scrollCaretIntoView(anchor,offset)},
enable:function(){return acetree.enable()},disable:function(){return acetree.enable()},check:function(node,half){
node.isChecked=!half||-1,model._signal("check",node),model._signal("change")},uncheck:function(node){
node.isChecked=!1,model._signal("uncheck",node),model._signal("change")},getNodeAtIndex:function(idx){
return model.getNodeAtIndex(idx)},getIndexForNode:function(node){return model.getIndexForNode(node)},
refresh:function(){model.keyword?plugin.filterKeyword=model.keyword:model.setRoot(plugin.root)},attachTo:function(htmlNode,beforeNode){
var container
drawn?container=acetree.container:(container=document.createElement("div"),container.style.height="100%"),
htmlNode.insertBefore(container,beforeNode),drawn||draw(container)}}),baseclass||plugin.load(null,options.baseName||"list"),
plugin}var Plugin=imports.Plugin,ui=imports.ui,util=imports.util,AceTree=require("ace_tree/tree"),AceTreeEditor=require("ace_tree/edit"),ListModel=require("ace_tree/list_data"),TreeModel=require("ace_tree/data_provider"),search=require("../c9.ide.navigate/search")


ListModel.prototype.getEmptyMessage=function(){return this.emptyMessage||""},ui.on("load",function(){
ui.insertCss(require("text!./widgets.less"),options.staticPrefix,ui)}),register(null,{List:List})}return main.consumes=["Plugin","ui","util"],
main.provides=["List"],main})


define("plugins/c9.ide.ui/forms",[],function(require,exports,module){function main(options,imports,register){
function Form(options,forPlugin){function load(){loaded||(loaded=!0,options.html&&draw(options.html),
options.form&&add(options.form),forPlugin&&forPlugin.addOther(function(){plugin.unload()}))}function draw(htmlNode){
drawn||(drawn=!0,container=new ui.bar({htmlNode:htmlNode||document.body,"class":options.className,style:options.style||""
}),plugin.addElement(container),model&&container.setAttribute("model",model),emit("draw"))}function add(state,foreign){
if(!drawn)return void plugin.on("draw",function wait(){add(state,foreign),plugin.off("draw",wait)})
if(state instanceof Array)return void state.forEach(function(item){createItem({container:container},item.title,item,foreign)

})
for(var caption in state)if("position"!=caption){var first=state[caption],heading=createHeading(caption,first.position,Object.keys(first).length<1,foreign)


if(first instanceof Array)first.forEach(function(item){createItem(heading,item.title,item,foreign)})
else for(var title in first)if("position"!=title){var second=first[title]
createItem(heading,title,second,foreign)}}}function createHeading(name,position,hack,foreign){foreign||(foreign=plugin)


var heading=headings[name]
if(!heading){if(!hack){var aml=container.appendChild(new ui.bar)
ui.buildDom(["div",{"class":"header"},["span"],["div",(debug?"["+(position||"")+"] ":"")+name]])}heading=headings[name]={
container:aml},foreign.addOther(function(){heading.container.destroy(!0,!0),delete headings[name]})}return position&&position!=heading.container.$position&&!hack&&ui.insertByIndex(container,heading.container,position,foreign),
heading}function createItem(heading,name,options,foreign){function onAfterChange(e){if(!ignoreChange){
var path=e.currentTarget&&e.currentTarget.getAttribute("settingPath")||options.path
path&&settings.set(path,e.value),options.onchange&&options.onchange({value:e.value,type:e.currentTarget.tagName
})}}function addSettingListener(path,item,plugin){if(path&&item){var update=function(){ignoreChange=!0,
item.setValue(settings.get(path)),ignoreChange=!1}
settings.on(path,update,plugin),settings.on("read",update,plugin)}}foreign||(foreign=plugin)
var node,childNodes,position=options.position
options.setting&&!options.path&&(options.path=options.setting),name=options.title||name
var positionMark=debug?"["+(position||"")+"] ":""
name="string"==typeof name?positionMark+name+":":[null,positionMark,name,":"]
var main,secondary,ignoreChange=!1
switch(options.type){case"checkbox":childNodes=[new ui.label({width:width,maxwidth:maxwidth,caption:name
}),main=new ui.checkbox({value:options.path?settings.get(options.path):options.defaultValue||"",values:options.values,
skin:"cboffline",onafterchange:onAfterChange,settingPath:options.path})]
break
case"dropdown":childNodes=[new ui.label({width:width,maxwidth:maxwidth,caption:name}),main=new ui.dropdown({
items:options.items,width:options.width||widths.dropdown,skin:"black_dropdown",margin:"-1 0 0 0",zindex:100,
onafterchange:onAfterChange,value:options.path?settings.get(options.path):options.defaultValue||"",caption:options.caption,
"empty-message":options["empty-message"]})]
break
case"spinner":childNodes=[new ui.label({width:width,maxwidth:maxwidth,caption:name}),main=new ui.spinner({
width:options.width||widths.spinner,value:options.path?settings.get(options.path):options.defaultValue||"",
min:options.min||0,max:options.max||10,realtime:"undefined"!=typeof options.realtime?options.realtime:1,
onafterchange:onAfterChange,settingPath:options.path})]
break
case"checked-spinner":childNodes=[secondary=new ui.checkbox({value:options.checkboxPath?settings.get(options.checkboxPath):options.defaultCheckboxValue||"",
width:width,maxwidth:maxwidth,label:name,skin:"checkbox_black",onafterchange:onAfterChange,settingPath:options.checkboxPath
}),main=new ui.spinner({width:options.width||widths["checked-spinner"],value:options.path?settings.get(options.path):options.defaultValue||"",
min:options.min||0,max:options.max||10,realtime:"undefined"!=typeof options.realtime?options.realtime:1,
onafterchange:onAfterChange,settingPath:options.path})]
break
case"checkbox-single":childNodes=[main=new ui.checkbox({value:options.path?settings.get(options.path):options.defaultValue||"",
width:options.width||widths["checked-single"],label:name,skin:"checkbox_black",onafterchange:onAfterChange,
settingPath:options.path})]
break
case"textbox":childNodes=[new ui.label({width:width,maxwidth:maxwidth,caption:name}),main=new ui.textbox({
skin:skins.textbox||"searchbox",margin:"-3 0 0 0","initial-message":options.message||"",width:options.width||widths.textbox,
value:options.path?settings.get(options.path):options.defaultValue||"",realtime:"undefined"!=typeof options.realtime?options.realtime:1,
onafterchange:onAfterChange,settingPath:options.path})]
break
case"password":childNodes=[new ui.label({width:width,maxwidth:maxwidth,caption:name}),main=new ui.password({
skin:skins.password||"forminput",width:options.width||widths.password,value:options.path?settings.get(options.path):options.defaultValue||"",
realtime:"undefined"!=typeof options.realtime?options.realtime:1})]
break
case"colorbox":childNodes=[new ui.label({width:width,maxwidth:maxwidth,caption:name}),main=new ui.colorbox({
width:options.width||widths.colorbox,value:options.path?settings.get(options.path):options.defaultValue||"",
realtime:"undefined"!=typeof options.realtime?options.realtime:1,onafterchange:onAfterChange,settingPath:options.path
})]
break
case"button":childNodes=[new ui.label({width:width,maxwidth:maxwidth,caption:name}),new ui.button({skin:"blackbutton",
height:24,margin:"-2 0 -2 0",style:"line-height:22px",caption:options.caption,width:options.width||widths.button,
onclick:options.onclick})]
break
case"submit":node=new ui.button({skin:"btn-default-css3",margin:options.margin,caption:options.caption||"",
submenu:options.submenu&&options.submenu.aml||options.submenu||"",width:options.width||"",onclick:options.onclick,
"default":options["default"]?"1":""})
break
case"label":node=new ui.label({caption:options.caption,style:options.style,width:options.width||""})
break
case"image":node=new ui.img({skin:"simpleimg",src:options.src,margin:options.margin,width:options.width,
height:options.height})
break
case"divider":node=new ui.divider({skin:"c9-divider-hor",margin:"5 0 5 0"})
break
case"textarea":childNodes=[new ui.label({width:width,maxwidth:maxwidth,caption:name}),main=new ui.textarea({
width:options.width||widths.textarea,height:options.height||200,value:options.path?settings.get(options.path):options.defaultValue||"",
realtime:"undefined"!=typeof options.realtime?options.realtime:1})]
break
case"textarea-row":node=new ui.vsplitbox({options:options,height:options.rowheight||rowheight,edge:options.edge||edge,
type:options.type,childNodes:[new ui.label({height:40,caption:name}),main=new ui.textarea({width:options.width||widths.textarea,
height:options.height||200,style:options.fixedFont?"font-family: Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace; font-size: 10px":"",
value:options.path?settings.get(options.path):options.defaultValue||"",realtime:"undefined"!=typeof options.realtime?options.realtime:1,
onafterchange:onAfterChange,settingPath:options.path})]})
break
case"custom":node=options.node
break
default:throw new Error("Unknown form element type: "+options.type)}return node||(node=new ui.hsplitbox({
options:options,height:options.rowheight||rowheight,edge:options.edge||edge,type:options.type,childNodes:childNodes
})),(options.id||options.name)&&(node.setAttribute("id",options.id||options.name),elements[node.name]=node),
ui.insertByIndex(heading.container,node,position,foreign),foreign.addElement(node),addSettingListener(options.path,main,foreign||plugin),
addSettingListener(options.checkboxPath,secondary,foreign||plugin),node}function update(items){items.forEach(function(item){
var el=elements[item.id]
switch(el.type){case"dropdown":var dropdown=el.lastChild
item.items&&dropdown.setChildren(item.items),null!=item.value&&dropdown.setAttribute("value",item.value)


break
default:Object.keys(item).forEach(function(key){return"onclick"===key?el.onclick=item.onclick:"id"!=key?el.setAttribute(key,item[key]):void 0

})}})}function attachTo(htmlNode,beforeNode){draw(),htmlNode.$amlLoaded&&(container.parentNode=htmlNode,
htmlNode=htmlNode.$int),htmlNode.host?htmlNode.host.insertBefore(container,beforeNode&&beforeNode.host):htmlNode.insertBefore(container.$ext,beforeNode||null),
show()}function detach(){container.$ext.parentNode.removeChild(container.$ext),emit("hide")}function toJson(amlNode,json){
json||(json={}),drawn||(draw(),hide()),(amlNode||container).childNodes.forEach(function(row){if("bar"==row.localName)return toJson(row,json)


var name=row.name
if(name){var value=row.childNodes.filter(function(node){return"label"!=node.localName}).map(function(node){
return node.value})
1==value.length&&(value=value[0]),json[name]=value}})
var result=emit("serialize",{json:json})
return result||json}function reset(){container.childNodes.forEach(function(row){var options=row.options


row.childNodes.length&&("checkbox"==row.firstChild.localName&&row.firstChild.setValue(options.defaultCheckboxValue||""),
row.lastChild.setValue(options.defaultValue||""))})}function validate(){return!0}function getRect(){return container.$ext.getBoundingClientRect()

}function show(){container.show(),emit("show")}function hide(){container.hide(),emit("hide")}var container,loaded,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),model=options.model,edge=options.edge||"10 10 10 10",rowheight=options.rowheight||40,width=options.colwidth||300,maxwidth=options.colmaxwidth||300,widths=options.widths||{},skins=options.skins||{},elements={},meta={},debug=location.href.indexOf("menus=1")>-1,headings={},drawn=!1


return plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({get container(){return container.$ext

},get aml(){return container},get headings(){return headings},get meta(){return meta},set meta(v){meta=v

},_events:["draw","show","hide","serialize"],getRect:getRect,toJson:toJson,attachTo:attachTo,detach:detach,
draw:draw,reset:reset,add:add,update:update,show:show,hide:hide,validate:validate}),plugin.load(null,"form"),
plugin}var Plugin=imports.Plugin,settings=imports.settings,ui=imports.ui
register(null,{Form:Form})}return main.consumes=["ui","Plugin","settings"],main.provides=["Form"],main

})


define("plugins/c9.ide.ui/menus",[],function(require,exports,module){function main(options,imports,register){
function load(){function formatHotkey(value){return value&&/^commands./.test(value)&&(value=commands.getHotkey(value.slice("commands.".length))),
apf.isMac&&value&&(value=apf.hotkeys.toMacNotation(value)),value}function addHotkeyListener(amlNode,value){
var oldHandler=amlNode.$funcHandlers.hotkey
oldHandler&&oldHandler.value!=value&&commands.commandManager.off("prop."+oldHandler.prop,oldHandler.handler),
value&&/^commands./.test(value)&&commands.commandManager&&(oldHandler=amlNode.$funcHandlers.hotkey=oldHandler||{
handler:function(e){amlNode.$propHandlers.hotkey.call(amlNode,amlNode.hotkey)}},oldHandler.prop=value.slice("commands.".length),
oldHandler.amlNode=commands.commandManager,commands.commandManager.on("prop."+oldHandler.prop,oldHandler.handler))

}return!loaded&&(loaded=!0,draw(),commands.addCommand({name:"toggleMenubar",group:"General",exec:function(e){
minimized?restore():minimize()}},plugin),apf.button.prototype.$propHandlers.hotkey=function(value){this.$hotkey&&apf.setNodeValue(this.$hotkey,formatHotkey(value)),
this.$propHandlers.tooltip.call(this,this.tooltip),addHotkeyListener(this,value)},apf.button.prototype.$propHandlers.tooltip=function(value){
if(this.$ext){var hotkey=formatHotkey(this.hotkey)
this.$ext.setAttribute("title",(this.tooltip||"")+(hotkey?" ("+hotkey+")":""))}},apf.item.prototype.$propHandlers.hotkey=function(value){
if(this.$amlLoaded)this.$hotkey&&apf.setNodeValue(this.$hotkey,formatHotkey(value))
else{var _self=this
this.addEventListener("DOMNodeInsertedIntoDocument",function(e){_self.$hotkey&&_self.hotkey&&apf.setNodeValue(this.$hotkey,formatHotkey(_self.hotkey))

})}addHotkeyListener(this,value)},apf.splitbutton.prototype.$propHandlers.command=apf.button.prototype.$propHandlers.command=apf.item.prototype.$propHandlers.command=function(value){
return value?(this.setAttribute("hotkey",value&&"commands."+value||""),void(this.onclick=function(e){
if(!(e&&e.htmlEvent&&e.htmlEvent.button)){commands.exec(value,null,{source:"click"})
var command=commands.commands[value]
command&&command.focusContext&&emit("focusEditor")}})):(this.removeAttribute("hotkey"),void(this.onclick=null))

},settings.on("read",function(e){settings.setDefaults("state/menus",[["minimized","false"]]),settings.getBool("state/menus/@minimized")?(minimize(!0,!0),
minimized=!0):minimized=!1},plugin),void(options.autoInit&&init()))}function draw(){logobar=layout.findParent(plugin),
menubar=logobar.insertBefore(new apf.bar({id:"menubar","class":"fakehbox aligncenter menubar",style:"padding : 0 5px 0 3px;position:static"
}),logobar.firstChild),menubar.insertBefore(new apf.button({"class":"c9-mbar-minimize",skin:"c9-simple-btn",
onmousedown:function(e){minimized?restore():minimize()}}),menubar.firstChild),menubar.menubar=!0,plugin.addElement(menubar),
logobar.$ext.addEventListener("mousedown",function(){restore()}),emit("draw"),c9.local&&apf.popup.setMargin({
top:50})}function splitSafe(path){var escaped,pieces=[]
return path.split("/").forEach(function(n){escaped&&(n=escaped+"/"+n),escaped="\\"==n.substr(-1)&&n,escaped||pieces.push(n)

}),escaped&&pieces.push(escaped),pieces}function popSafe(path){return splitSafe(path).pop().replace(/\\\//g,"/")

}function init(){inited=!0,layout.initMenus(plugin),addItemByPath("View/Menu Bar",new ui.item({type:"check",
command:"toggleMenubar",isAvailable:function(){return settings.getBool("state/menus/@minimized")?this.uncheck():this.check(),
!0}}),250,plugin),queue&&(queue.forEach(function(args){addItemByPath.apply(null,args)}),queue=null),emit.sticky("ready")

}function checkItems(e){if(e.value){for(var n,prev,editor=emit("getEditor"),nodes=this.childNodes,i=nodes.length-1;i>=0;i--){
var cmd=(n=nodes[i]).command
if(n.visible)if("divider"!=n.localName){prev=n
var c=cmd&&commands.commands[cmd],fn=c&&c.isAvailable,a=(!n.isAvailable||n.isAvailable(editor))&&(!fn||fn(editor))


cmd||(cmd=n.command),(cmd||n.isAvailable)&&n[a?"enable":"disable"]()}else prev&&"divider"!=prev.localName?n.show():n.hide(),
prev=n}prev&&"divider"==prev.localName&&prev.hide()}toggleIframes(e)}function toggleIframes(e){for(var frames=document.getElementsByTagName("iframe"),i=0;i<frames.length;i++)frames[i].style.pointerEvents=e.value?"none":""

}function decorate(menu){menu.addEventListener("prop.visible",checkItems)}function setRootMenu(name,index,item,menu,plugin){
item instanceof Menu?(menu=item.aml,plugin=menu,item=null):"object"!=typeof item||item.nodeFunc||(plugin=item,
item=null),menu instanceof Menu?menu=menu.aml:plugin||!menu||menu.nodeFunc||(plugin=menu,menu=null),menu?(menu.addEventListener("prop.visible",checkItems),
menus[name]=menu):(menu=menus[name],menu||(menu=menus[name]=new ui.menu({id:"mnuMenus"+ ++count,"onprop.visible":checkItems
})))
var drawIt=emit("root",{name:name,menu:menu,index:index})!==!1
return item!=-1&&(item?(item.setAttribute("submenu",menu||"mnuMenus"+count),items[name]=item):(item=items[name],
!item&&drawIt&&(item=items[name]=new ui.button({skin:"c9-menu-btn",submenu:menu,margin:"0 0 0 0",caption:(debug?"("+index+") ":"")+name
}))),"number"==typeof index&&drawIt&&ui.insertByIndex(menubar,item,index,plugin),item&&lifeCycleHooks(item,items,name,plugin)),
lifeCycleHooks(menu,menus,name,plugin),menu}function setSubMenu(parent,name,index,item,menu,plugin,force){
if(item&&!item.nodeFunc?(plugin=item,item=null):menu&&!menu.nodeFunc&&(plugin=menu,menu=null),menu){if(menus[name]){
for(var nodes=menus[name].childNodes,i=nodes.length-1;i>=0;i--)ui.insertByIndex(menu,nodes[i],nodes[i].$position,plugin)


menus[name].destroy(!0,!0)}menu||menu.setAttribute("id","mnuMenus"+ ++count),menus[name]=menu}else menu=menus[name],
menu||(menu=menus[name]=new ui.menu({id:"mnuMenus"+ ++count,"onprop.visible":checkItems}))
return item?(item.setAttribute("submenu",menu),item.setAttribute("caption",apf.escapeXML((debug?"("+index+")":"")+popSafe(name))),
items[name]=item):(item=items[name],item?item.setAttribute("submenu",menu):item=items[name]=new apf.item({
submenu:menu,caption:(debug?"("+index+") ":"")+popSafe(name)})),emit("submenu",{name:name,parent:parent,
menu:menu,item:item,index:index}),"number"==typeof index&&ui.insertByIndex(parent,item,index,plugin),
lifeCycleHooks(item,items,name,plugin),lifeCycleHooks(menu,menus,name,plugin),menu}function setMenuItem(parent,name,menuItem,index,item,plugin){
item&&!item.nodeFunc&&(plugin=item,item=null)
var itemName=popSafe(name)
"~"==itemName&&(name+=index),item=items[name],item||(item=items[name]=menuItem,"~"!=itemName&&(debug&&(itemName="("+index+") "+itemName),
item.setAttribute("caption",itemName))),item.on("DOMNodeInsertedIntoDocument",function(){emit("menuitem",{
name:name,parent:parent,item:item,index:index})}),"number"==typeof index?ui.insertByIndex(parent,item,index,plugin):parent.appendChild(item),
lifeCycleHooks(item,items,name,plugin)}function lifeCycleHooks(item,items,name,plugin){plugin&&plugin.addElement(item),
item.on("DOMNodeRemovedFromDocument",function(){delete items[name]})}function addItemByPath(path,menuItem,index,menu,plugin){
if(!inited&&index<1e3)return void queue.push([path,menuItem,index,menu,plugin])
plugin||(plugin=menu,menu=null),index&&"object"==typeof index?(plugin=index,index=null):!plugin&&menu&&menu.aml&&(menu=menu.aml),
menuItem&&menuItem.aml&&(menuItem=menuItem.aml),assert(void 0!==plugin,"addItemByPath requires a plugin argument")


var name,isLast,curpath,steps=splitSafe(path),p=[]
menuItem||(menuItem="")
for(var i=0,l=steps.length;i<l&&(name=steps[i],p.push(name),curpath=p.join("/"),0!==i||menu?i==l-1&&menuItem.nodeFunc&&"menu"!=menuItem.localName?setMenuItem(menu,p.join("/"),menuItem,index,plugin):(isLast=!steps[i+1],
menu=!isLast&&menus[curpath]||setSubMenu(menu,curpath,i==l-1||isLast?index:null,isLast&&(menuItem.nodeFunc?"menu"!=menuItem.localName&&menuItem:menuItem.item),isLast&&(!menuItem.nodeFunc&&menuItem.menu||"menu"==menuItem.localName&&menuItem),plugin)):(isLast=!steps[i+1],
menu=!isLast&&menus[curpath]||setRootMenu(name,i==l-1||isLast?index:null,isLast&&(!menuItem.nodeFunc&&menuItem.item||"button"==menuItem.localName&&menuItem),isLast&&(!menuItem.nodeFunc&&menuItem.menu||"menu"==menuItem.localName&&menuItem),plugin)),
!isLast);i++);}function addItemToMenu(menu,menuItem,index,plugin){return ui.insertByIndex(menu,menuItem,index,plugin)

}function getMenuId(path){var menu=menus[path]
return menu&&menu.id}function restore(preview,noAnim){(minimized||preview)&&(apf.setStyleClass(logobar.$ext,"",["minimized"]),
logobar.$ext.style.overflow="hidden",anims.animateSplitBoxNode(logobar,{height:height+"px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",
duration:.15,immediate:noAnim},function(){logobar.$ext.style.overflow=""}),preview||(settings.set("state/menus/@minimized",!1),
minimized=!1,emit("restore")))}function minimize(preview,noAnim){minimized&&!preview||(logobar.$ext.style.overflow="hidden",
anims.animateSplitBoxNode(logobar,{height:minimizedHeight+"px",timingFunction:"cubic-bezier(.10, .10, .25, .90)",
duration:.15,immediate:noAnim},function(){apf.setStyleClass(logobar.$ext,"minimized"),apf.layout.forceResize(),
logobar.$ext.style.overflow=""}),preview||(settings.set("state/menus/@minimized",!0),minimized=!0,emit("minimize")))

}function expand(path){if(!items[path])throw new Error("Could not find menu item "+path)
for(var item,curpath,name,steps=splitSafe(path),p=[],i=0,l=steps.length;i<l;i++)name=steps[i],p.push(name),
curpath=p.join("/"),item=items[curpath],"button"==item.localName?item.showMenu():item.$submenu()
return menus[path]||items[path]}function collapse(path){if(!items[path])throw new Error("Could not find menu item "+path)


var item=items[path]
"button"==item.localName?(item.hideMenu(),item.$setState("Out",{},"mouseout")):item.$submenu(!0)}function click(path){
if(!items[path])throw new Error("Could not find menu item "+path)
var item=items[path]
"button"==item.localName?item.dispatchEvent("click"):item.$up()}function enableItem(path){if(!items[path])throw new Error("Could not find menu item "+path)


var item=items[path]
item.enable()
var menu=menus[path]
menu&&menu.enable()}function disableItem(path){if(!items[path])throw new Error("Could not find menu item "+path)


var item=items[path]
item.disable()
var menu=menus[path]
menu&&menu.disable()}function remove(path){var removed=!1,i=path.length
return"/"==path[i-1]&&(i-=1),Object.keys(items).forEach(function(p){0!==p.indexOf(path)||p[i]&&"/"!==p[i]||(items[p].destroy(!0,!0),
delete items[p],removed=!0)}),Object.keys(menus).forEach(function(p){0!==p.indexOf(path)||p[i]&&"/"!==p[i]||(menus[p].destroy(!0,!0),
delete menus[p],removed=!0)}),removed}function get(path){return{item:items[path],menu:menus[path]}}function escape(name){
return name.replace(/[\/]/g,"\u2044")}function Menu(options,forPlugin){function append(item){return ui.insertByIndex(aml,item.aml,item.position,item.plugin||forPlugin),
item.menu=plugin,items.push(item),item.aml.on("DOMNodeRemoveFromDocument",function(){items.splice(items.indexOf(item),1)

}),item}function remove(item){aml.removeChild(item.aml)}function show(x,y,type){"context"==type&&(x+=2,
y+=2),lastCoords={x:x,y:y},aml.display(x,y)}var aml,lastCoords,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),items=[],meta={}


return options||(options=0),plugin.on("load",function(){aml=new ui.menu({id:options.id,zindex:options.zindex,
visible:options.visible,width:options.width,height:options.height,minWidth:options.minWidth,minHeight:options.minHeight,
"onprop.visible":function(e){emit(e.value?"show":"hide",lastCoords),checkItems.call(this,e)},onitemclick:function(e){
emit("itemclick",{value:e.value,item:e.relatedNode})}}),aml.cloud9menu=plugin,(forPlugin||plugin).addElement(aml)


var items=options.items
if(items)for(var i=0;i<items.length;i++)append(items[i])
"function"==typeof options.onitemclick&&plugin.on("itemclick",options.onitemclick),aml.on("DOMNodeRemovedFromDocument",function(){
plugin.unload()})}),plugin.freezePublicAPI({get aml(){return aml},get meta(){return meta},get html(){
return aml&&aml.$ext},get opener(){return aml.opener&&aml.opener.cloud9item},get visible(){return aml.visible

},get zindex(){return aml&&ui.getStyle(aml.$ext,"z-index")},set zindex(value){aml&&aml.setAttribute("zindex",value)

},get width(){return aml&&aml.getWidth()},set width(value){aml&&aml.setAttribute("width",value)},get height(){
return aml&&aml.getHeight()},set height(value){aml&&aml.setAttribute("height",value)},get minWidth(){
return aml&&aml.getAttribute("minwidth")},set minWidth(value){aml&&aml.setAttribute("minwidth",value)

},get minHeight(){return aml&&aml.getAttribute("minheight")},set minHeight(value){aml&&aml.setAttribute("minheight",value)

},get items(){return items.slice(0)},_events:["itemclick","show","hide"],append:append,remove:remove,
show:show}),plugin.load(null,"menu"),plugin}function MenuItem(options,forPlugin){var aml,menu,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),position=options.position


return plugin.on("load",function(){var opts={onmousedown:function(e){emit("mousedown")},onmousemove:function(e){
emit("mousemove")},onmouseup:function(e){emit("onmouseup")},onclick:function(e){emit("click")}}
for(var prop in options)"on"==prop.substr(0,2)?plugin.on(prop.substr(2),options[prop]):"submenu"==prop?options.submenu&&(opts.submenu=options.submenu.aml||options.submenu):"isAvailable"!=prop&&(opts[prop]=options[prop])


aml=new ui.item(opts),aml.cloud9item=plugin,plugin.addElement(aml),options.isAvailable&&(aml.isAvailable=options.isAvailable),
aml.on("DOMNodeRemoveFromDocument",function(){plugin.unload()})}),plugin.freezePublicAPI({get aml(){return aml

},get html(){return aml&&aml.$ext},get plugin(){return forPlugin},get menu(){return menu},set menu(m){
menu=m},get disabled(){return aml.disabled},set disabled(v){aml.setAttribute("disabled",v)},get icon(){
return aml.icon},set icon(v){aml.setAttribute("icon",v)},get type(){return aml.type},set type(v){aml.setAttribute("type",v)

},get value(){return aml.value},set value(v){aml.setAttribute("value",v)},get caption(){return aml.caption

},set caption(v){aml.setAttribute("caption",v)},get group(){return aml.group},set group(v){aml.setAttribute("group",v)

},get checked(){return aml.checked},set checked(v){aml.setAttribute("radio"==aml.type?"selected":"checked",v)

},get submenu(){return aml.submenu&&aml.submenu.cloud9menu},set submenu(v){aml.setAttribute("submenu",v.aml||v)

},get command(){return aml.command},set command(v){aml.setAttribute("command",v)},get position(){return position

},show:function(){aml.show()},hide:function(){aml.hide()}}),plugin.load(null,"menuitem"),plugin}function Divider(options,forPlugin){
var aml,menu,plugin=new Plugin("Ajax.org",main.consumes),position=options&&options.position
return plugin.on("load",function(){aml=new ui.divider,aml.cloud9item=plugin,plugin.addElement(aml),aml.on("DOMNodeRemoveFromDocument",function(){
plugin.unload()})}),plugin.freezePublicAPI({get aml(){return aml},get html(){return aml&&aml.$ext},get plugin(){
return forPlugin},get menu(){return menu},set menu(m){menu=m},get position(){return position},show:function(){
aml.show()},hide:function(){aml.hide()}}),plugin.load(null,"divider"),plugin}var minimized,inited,menubar,logobar,Plugin=imports.Plugin,settings=imports.settings,commands=imports.commands,anims=imports.anims,layout=imports.layout,ui=imports.ui,c9=imports.c9,assert=require("c9/assert"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),items={},menus={},queue=[],count=0,debug=location.href.indexOf("menus=1")>-1,height=31,minimizedHeight=12,loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({get container(){return menubar.$ext

},get minimized(){return minimized},get height(){return height},set height(v){height=v,minimized===!1&&restore(!0,!0)

},get minimizedHeight(){return minimizedHeight},set minimizedHeight(v){minimizedHeight=v,minimized===!0&&minimize(!0,!0)

},_events:["getEditor","restore","minimize"],setRootMenu:setRootMenu,addItemByPath:addItemByPath,addItemToMenu:addItemToMenu,
enableItem:enableItem,disableItem:disableItem,remove:remove,getMenuId:getMenuId,expand:expand,collapse:collapse,
click:click,get:get,init:init,restore:restore,minimize:minimize,decorate:decorate,escape:escape}),register(null,{
menus:plugin,Menu:Menu,MenuItem:MenuItem,Divider:Divider})}return main.consumes=["Plugin","settings","commands","layout","anims","ui","c9"],
main.provides=["menus","Menu","MenuItem","Divider"],main})


define("plugins/c9.ide.ui/tooltip",[],function(require,exports,module){function main(options,imports,register){
function create(options,oHtml){var div
if(options.tooltip)div=options.tooltip
else{div=document.body.appendChild(document.createElement("div")),div.className="menu-bk downward menu-bkFocus c9-tooltip",
options.width&&(div.style.width=options.width),div.style.position="absolute",div.innerHTML="<div></div>"


var arrow=div.appendChild(document.createElement("div"))
arrow.className="arrow revisionsInfoArrow",options.tooltip=div}div.addEventListener("mouseover",ttmouseover),
div.addEventListener("mouseout",ttmouseout),div.companion=oHtml}function add(oHtml,options,plugin){return oHtml.nodeFunc&&(oHtml=oHtml.$ext),
oHtml.addEventListener("mouseover",mouseover),oHtml.addEventListener("mouseout",mouseout),oHtml.addEventListener("mousedown",mousedown),
void 0===options.timeout&&(options.timeout=500),oHtml.c9tooltipOptions=options,plugin.addOther(function(){
destroy(oHtml)}),oHtml}function destroy(oHtml){var options=oHtml.c9tooltipOptions,tooltip=options.tooltip


tooltip&&(tooltip.parentNode&&tooltip.parentNode.removeChild(tooltip),tooltip.htmlNodes&&tooltip.htmlNodes.forEach(function(oHtml){
oHtml.removeEventListener("mouseover",mouseover),oHtml.removeEventListener("mouseout",mouseout),oHtml.removeEventListener("mousedown",mousedown)

},this))}function ttmouseover(){var oHtml=this.companion,options=oHtml.c9tooltipOptions
clearTimeout(options.timer),options.control&&options.control.stop(),this.style.display="none"}function ttmouseout(e){
mouseout.call(this.companion)}function mouseover(e){var options=this.c9tooltipOptions
if(clearTimeout(options.timer),options.tooltip&&clearTimeout(options.tooltip.timer),!options.isAvailable||options.isAvailable()!==!1){
var _self=this
options.timer=setTimeout(function(){options.control&&options.control.stop(),create(options,_self),options.tooltip.style.display="block"


var pos
if(options.getPosition)pos=options.getPosition()
else{var p=ui.getAbsolutePosition(_self)
pos=[p[0]-(options.tooltip.offsetWidth-_self.offsetWidth)/2,p[1]]}options.tooltip.style.left=pos[0]+"px",
options.tooltip.style.top=pos[1]+"px",options.message&&((options.tooltip.firstElementChild||options.tooltip).innerHTML=options.message),
options.animate!==!1?apf.tween.single(options.tooltip,{type:"fade",from:0,to:1,steps:10,interval:0,control:options.control={}
}):options.tooltip.style.opacity=1},options.timeout)}}function mouseout(e){var options=this.c9tooltipOptions


clearTimeout(options.timer),options.tooltip&&"block"==options.tooltip.style.display&&(options.timer=options.tooltip.timer=setTimeout(function(){
options.control&&options.control.stop(),apf.tween.single(options.tooltip,{type:"fade",from:1,to:0,steps:10,
interval:0,control:options.control={},onfinish:function(){options.tooltip.style.display="none"}})},200))

}function mousedown(e){var options=this.c9tooltipOptions
clearTimeout(options.timer),options.tooltip&&options.hideonclick&&(options.control&&options.control.stop(),
options.tooltip.style.display="none")}var Plugin=imports.Plugin,ui=imports.ui,plugin=new Plugin("Ajax.org",main.consumes)


plugin.freezePublicAPI({add:add,destroy:destroy}),register(null,{tooltip:plugin})}return main.consumes=["Plugin","ui"],
main.provides=["tooltip"],main})


define("plugins/c9.ide.ui/lib_firmin",[],function(require,exports,module){FirminCSSMatrix=function(c){
this.m11=this.m22=this.m33=this.m44=1,this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0,
"string"==typeof c&&this.setMatrixValue(c)},FirminCSSMatrix.displayName="FirminCSSMatrix",FirminCSSMatrix.degreesToRadians=function(c){
return c*Math.PI/180},FirminCSSMatrix.determinant2x2=function(c,b,a,d){return c*d-b*a},FirminCSSMatrix.determinant3x3=function(c,b,a,d,e,j,f,g,h){
var i=FirminCSSMatrix.determinant2x2
return c*i(e,j,g,h)-d*i(b,a,g,h)+f*i(b,a,e,j)},FirminCSSMatrix.determinant4x4=function(c){var b=FirminCSSMatrix.determinant3x3,a=c.m11,d=c.m21,e=c.m31,j=c.m41,f=c.m12,g=c.m22,h=c.m32,i=c.m42,k=c.m13,l=c.m23,m=c.m33,n=c.m43,o=c.m14,p=c.m24,q=c.m34,r=c.m44


return a*b(g,l,p,h,m,q,i,n,r)-d*b(f,k,o,h,m,q,i,n,r)+e*b(f,k,o,g,l,p,i,n,r)-j*b(f,k,o,g,l,p,h,m,q)},[["m11","a"],["m12","b"],["m21","c"],["m22","d"],["m41","e"],["m42","f"]].forEach(function(b){
var a=b[0],d=b[1]
Object.defineProperty(FirminCSSMatrix.prototype,d,{set:function(c){this[a]=c},get:function(){return this[a]

}})}),FirminCSSMatrix.prototype.isAffine=function(){return 0===this.m13&&0===this.m14&&0===this.m23&&0===this.m24&&0===this.m31&&0===this.m32&&1===this.m33&&0===this.m34&&0===this.m43&&1===this.m44

},FirminCSSMatrix.prototype.multiply=function(c){var b=this,a=c,d=new FirminCSSMatrix
return d.m11=b.m11*a.m11+b.m12*a.m21+b.m13*a.m31+b.m14*a.m41,d.m12=b.m11*a.m12+b.m12*a.m22+b.m13*a.m32+b.m14*a.m42,
d.m13=b.m11*a.m13+b.m12*a.m23+b.m13*a.m33+b.m14*a.m43,d.m14=b.m11*a.m14+b.m12*a.m24+b.m13*a.m34+b.m14*a.m44,
d.m21=b.m21*a.m11+b.m22*a.m21+b.m23*a.m31+b.m24*a.m41,d.m22=b.m21*a.m12+b.m22*a.m22+b.m23*a.m32+b.m24*a.m42,
d.m23=b.m21*a.m13+b.m22*a.m23+b.m23*a.m33+b.m24*a.m43,d.m24=b.m21*a.m14+b.m22*a.m24+b.m23*a.m34+b.m24*a.m44,
d.m31=b.m31*a.m11+b.m32*a.m21+b.m33*a.m31+b.m34*a.m41,d.m32=b.m31*a.m12+b.m32*a.m22+b.m33*a.m32+b.m34*a.m42,
d.m33=b.m31*a.m13+b.m32*a.m23+b.m33*a.m33+b.m34*a.m43,d.m34=b.m31*a.m14+b.m32*a.m24+b.m33*a.m34+b.m34*a.m44,
d.m41=b.m41*a.m11+b.m42*a.m21+b.m43*a.m31+b.m44*a.m41,d.m42=b.m41*a.m12+b.m42*a.m22+b.m43*a.m32+b.m44*a.m42,
d.m43=b.m41*a.m13+b.m42*a.m23+b.m43*a.m33+b.m44*a.m43,d.m44=b.m41*a.m14+b.m42*a.m24+b.m43*a.m34+b.m44*a.m44,
d},FirminCSSMatrix.prototype.isIdentityOrTranslation=function(){var c=this
return 1===c.m11&&0===c.m12&&0===c.m13&&0===c.m14&&0===c.m21&&1===c.m22&&0===c.m23&&0===c.m24&&0===c.m31&&0===c.m31&&1===c.m33&&0===c.m34&&1===c.m44

},FirminCSSMatrix.prototype.adjoint=function(){var c=new FirminCSSMatrix,b=this,a=FirminCSSMatrix.determinant3x3,d=b.m11,e=b.m12,j=b.m13,f=b.m14,g=b.m21,h=b.m22,i=b.m23,k=b.m24,l=b.m31,m=b.m32,n=b.m33,o=b.m34,p=b.m41,q=b.m42,r=b.m43,s=b.m44


return c.m11=a(h,m,q,i,n,r,k,o,s),c.m21=-a(g,l,p,i,n,r,k,o,s),c.m31=a(g,l,p,h,m,q,k,o,s),c.m41=-a(g,l,p,h,m,q,i,n,r),
c.m12=-a(e,m,q,j,n,r,f,o,s),c.m22=a(d,l,p,j,n,r,f,o,s),c.m32=-a(d,l,p,e,m,q,f,o,s),c.m42=a(d,l,p,e,m,q,j,n,r),
c.m13=a(e,h,q,j,i,r,f,k,s),c.m23=-a(d,g,p,j,i,r,f,k,s),c.m33=a(d,g,p,e,h,q,f,k,s),c.m43=-a(d,g,p,e,h,q,j,i,r),
c.m14=-a(e,h,m,j,i,n,f,k,o),c.m24=a(d,g,l,j,i,n,f,k,o),c.m34=-a(d,g,l,e,h,m,f,k,o),c.m44=a(d,g,l,e,h,m,j,i,n),
c},FirminCSSMatrix.prototype.inverse=function(){var c,b,a,d,e
if(this.isIdentityOrTranslation())return c=new FirminCSSMatrix,0===this.m41&&0===this.m42&&0===this.m43||(c.m41=-this.m41,
c.m42=-this.m42,c.m43=-this.m43),c
if(a=this.adjoint(),b=FirminCSSMatrix.determinant4x4(this),Math.abs(b)<1e-8)return null
for(d=1;d<5;d++)for(e=1;e<5;e++)a["m"+d+e]/=b
return a},FirminCSSMatrix.prototype.rotate=function(c,b,a){var d=FirminCSSMatrix.degreesToRadians;("number"!=typeof c||isNaN(c))&&(c=0),
"number"==typeof b&&!isNaN(b)||"number"==typeof a&&!isNaN(a)||(a=c,c=0,b=0),("number"!=typeof b||isNaN(b))&&(b=0),
("number"!=typeof a||isNaN(a))&&(a=0),c=d(c),b=d(b),a=d(a)
var g,h,i,e=new FirminCSSMatrix,j=new FirminCSSMatrix,f=new FirminCSSMatrix
return a/=2,g=Math.sin(a),h=Math.cos(a),i=g*g,f.m11=f.m22=1-2*i,f.m12=f.m21=2*g*h,f.m21*=-1,b/=2,g=Math.sin(b),
h=Math.cos(b),i=g*g,j.m11=j.m33=1-2*i,j.m13=j.m31=2*g*h,j.m13*=-1,c/=2,g=Math.sin(c),h=Math.cos(c),i=g*g,
e.m22=e.m33=1-2*i,e.m23=e.m32=2*g*h,e.m32*=-1,f.multiply(j).multiply(e).multiply(this)},FirminCSSMatrix.prototype.rotateAxisAngle=function(c,b,a,d){
("number"!=typeof c||isNaN(c))&&(c=0),("number"!=typeof b||isNaN(b))&&(b=0),("number"!=typeof a||isNaN(a))&&(a=0),
("number"!=typeof d||isNaN(d))&&(d=0),0===c&&0===b&&0===a&&(a=1)
var f,g,h,i,k,l,m,e=new FirminCSSMatrix,j=Math.sqrt(c*c+b*b+a*a)
return d=(FirminCSSMatrix.degreesToRadians(d)||0)/2,f=Math.cos(d),g=Math.sin(d),h=g*g,0===j?(c=0,b=0,
a=1):1!==j&&(c/=j,b/=j,a/=j),1===c&&0===b&&0===a?(e.m22=e.m33=1-2*h,e.m23=e.m32=2*f*g,e.m32*=-1):0===c&&1===b&&0===a?(e.m11=e.m33=1-2*h,
e.m13=e.m31=2*f*g,e.m13*=-1):0===c&&0===b&&1===a?(e.m11=e.m22=1-2*h,e.m12=e.m21=2*f*g,e.m21*=-1):(i=g*f,
k=c*c,l=b*b,m=a*a,e.m11=1-2*(l+m)*h,e.m12=2*(c*b*h+a*i),e.m13=2*(c*a*h-b*i),e.m21=2*(b*c*h-a*i),e.m22=1-2*(m+k)*h,
e.m23=2*(b*a*h+c*i),e.m31=2*(a*c*h+b*i),e.m32=2*(a*b*h-c*i),e.m33=1-2*(k+l)*h),this.multiply(e)},FirminCSSMatrix.prototype.scale=function(c,b,a){
var d=new FirminCSSMatrix
return("number"!=typeof c||isNaN(c))&&(c=1),("number"!=typeof b||isNaN(b))&&(b=c),("number"!=typeof a||isNaN(a))&&(a=1),
d.m11=c,d.m22=b,d.m33=a,this.multiply(d)},FirminCSSMatrix.prototype.translate=function(c,b,a){var d=new FirminCSSMatrix


return("number"!=typeof c||isNaN(c))&&(c=0),("number"!=typeof b||isNaN(b))&&(b=0),("number"!=typeof a||isNaN(a))&&(a=0),
d.m41=c,d.m42=b,d.m43=a,this.multiply(d)},FirminCSSMatrix.prototype.setMatrixValue=function(c){c=c.trim()


var a,d,e,j,f,g,b=c.match(/^matrix(3d)?\(\s*(.+)\s*\)$/)
if(b&&(a=!!b[1],d=b[2].split(/\s*,\s*/),e=d.length,j=new Array(e),!(a&&16!==e||!a&&6!==e))){for(f=0;f<e;f++){
if(g=d[f],!g.match(/^-?\d+(\.\d+)?$/))return
j[f]=parseFloat(g)}for(f=0;f<e;f++)point=a?"m"+(Math.floor(f/4)+1)+(f%4+1):String.fromCharCode(f+97),
this[point]=j[f]}},FirminCSSMatrix.prototype.toString=function(){var a,d,b=this
return this.isAffine()?(d="matrix(",a=["a","b","c","d","e","f"]):(d="matrix3d(",a=["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"]),
d+a.map(function(c){return b[c].toFixed(6)}).join(", ")+")"},Firmin="undefined"==typeof Firmin?{}:Firmin,
Firmin.CSSMatrix="object"==typeof WebKitCSSMatrix?WebKitCSSMatrix:FirminCSSMatrix,Firmin.prefix=function(){
for(var d,a=document.createElement("div"),b=["webkit","Moz","O"],c=3;c--;)if(d=b[c],a.style.cssText="-"+d.toLowerCase()+"-transition-property:opacity;",
"undefined"!=typeof a.style[d+"TransitionProperty"])return d
return d}(),Firmin.matrixToString=function(d){if("Moz"!=Firmin.prefix)return d.toString()
var e="matrix(",f=["a","b","c","d","e","f"]
return e+f.map(function(a,b){var c=d[a].toFixed(6)
return b>3&&(c+="px"),c}).join(", ")+")"},Firmin.angleToRadians=function(a,b){var c
switch(a){case"rad":return b
case"deg":c=Math.PI/180
break
case"grad":c=Math.PI/200
break
case"turn":c=2*Math.PI}return c*b},Firmin.pointToVector=function(a){return a?a instanceof Array?a:[a.x,a.y,a.z]:null

},Firmin.NUMBER_PATTERN=/^-?\d+(\.\d+)?/,Firmin.parseNumeric=function(e,f){return function(b){var c,d


return"number"==typeof b?[f,b]:"string"!=typeof b?null:(d=(b.match(Firmin.NUMBER_PATTERN)||[""])[0],c=d.length===b.length?f:e.filter(function(a){
return b.substr(d.length)===a})[0],c&&d?[c,parseFloat(d)]:null)}},Firmin.parseAngle=Firmin.parseNumeric(["deg","grad","rad","turn"],"deg"),
Firmin.parseTime=Firmin.parseNumeric(["s","ms"],"s"),Firmin.Transform=function(a,b){this.ctm=a||new Firmin.CSSMatrix,
this.centre=Firmin.pointToVector(b)||["50%","50%",0]},Firmin.Transform.methods=["translate","translate3d","translateX","translateY","translateZ","scale","scale3d","scaleX","scaleY","scaleZ","rotate","rotate3d","rotateX","rotateY","rotateZ","skew","skewX","skewY","matrix","matrix3d"],
Firmin.Transform.parse=function(a,b){var f,g,c=Firmin.Transform.methods,d={},e=null
"object"==typeof b&&b.transform&&(f=b.transform.ctm,g=b.transform.centre,e=new Firmin.Transform(f,g))


for(property in a)c.indexOf(property)!==-1?(e=e||new Firmin.Transform,e[property](a[property])):"origin"===property?(e=e||new Firmin.Transform,
e[property](a[property])):d[property]=a[property]
return{result:e,remainder:d}},Firmin.Transform.prototype.build=function(a){var b=this.centre
return"O"==Firmin.prefix&&(b=b.slice(0,2)),a=a||{},a[Firmin.prefix+"Transform"]=Firmin.matrixToString(this.ctm),
a[Firmin.prefix+"TransformOrigin"]=b.join(" "),a},Firmin.Transform.prototype.matrix=Firmin.Transform.prototype.matrix3d=function(a){
var b=new Firmin.CSSMatrix
6===a.length?(b.a=a[0],b.b=a[1],b.c=a[2],b.d=a[3],b.e=a[4],b.f=a[5]):(b.m11=a[0],b.m12=a[1],b.m13=a[2],
b.m14=a[3],b.m21=a[4],b.m22=a[5],b.m23=a[6],b.m24=a[7],b.m31=a[8],b.m32=a[9],b.m33=a[10],b.m34=a[11],
b.m41=a[12],b.m42=a[13],b.m43=a[14],b.m44=a[15]),this.ctm=this.ctm.multiply(b)},Firmin.Transform.prototype.translate=Firmin.Transform.prototype.translate3d=function(a){
var b,c,d,e
"number"==typeof a||"string"==typeof a?(c=d=parseInt(a,10)||0,e=0):(b=Firmin.pointToVector(a),c=b[0],
d=b[1],e=b[2],"number"!=typeof c&&(c=parseInt(c,10)||0),"number"!=typeof d&&(d=parseInt(d,10)||0),"number"!=typeof e&&(e=parseInt(e,10)||0)),
this.ctm=this.ctm.translate(c,d,e)},Firmin.Transform.prototype.translateX=function(a){this.translate([a,0])

},Firmin.Transform.prototype.translateY=function(a){this.translate([0,a])},Firmin.Transform.prototype.translateZ=function(a){
this.translate3d([0,0,a])},Firmin.Transform.prototype.scale=Firmin.Transform.prototype.scale3d=function(a){
var b,c,d,e
"number"==typeof a?(c=d=a,e=1):(b=Firmin.pointToVector(a),c=b[0],d=b[1],e=b[2]),this.ctm=this.ctm.scale(c,d,e)

},Firmin.Transform.prototype.scaleX=function(a){this.scale3d([a,1,1])},Firmin.Transform.prototype.scaleY=function(a){
this.scale3d([1,a,1])},Firmin.Transform.prototype.scaleZ=function(a){this.scale3d([1,1,a])},Firmin.Transform.prototype.skew=function(a){
var d,e,b=Firmin.parseAngle,c=Firmin.angleToRadians
"number"==typeof a||"string"==typeof a?d=e=c.apply(null,b(a))||0:(a=Firmin.pointToVector(a),d=c.apply(null,b(a[0]))||0,
e=c.apply(null,b(a[1]))||0),this.matrix([1,Math.tan(e),Math.tan(d),1,0,0])},Firmin.Transform.prototype.skewX=function(a){
this.skew([a,0])},Firmin.Transform.prototype.skewY=function(a){this.skew([0,a])},Firmin.Transform.prototype.rotate=function(a){
a=Firmin.angleToRadians.apply(null,Firmin.parseAngle(a))*(180/Math.PI),this.ctm=this.ctm.rotate(0,0,a)

},Firmin.Transform.prototype.rotate3d=function(a){var b=a.x,c=a.y,d=a.z,e=a.angle
"number"!=typeof b&&(b=0),"number"!=typeof c&&(c=0),"number"!=typeof d&&(d=0),e=Firmin.angleToRadians.apply(null,Firmin.parseAngle(e))*(180/Math.PI),
this.ctm=this.ctm.rotateAxisAngle(b,c,d,e)},Firmin.Transform.prototype.rotateX=function(a){this.rotate3d({
x:1,angle:a})},Firmin.Transform.prototype.rotateY=function(a){this.rotate3d({y:1,angle:a})},Firmin.Transform.prototype.rotateZ=function(a){
this.rotate3d({z:1,angle:a})},Firmin.Transform.prototype.origin=function(a){var c,d,b=Firmin.pointToVector(a)

;(v0=b[0])&&(this.centre[0]=v0),(c=b[1])&&(this.centre[1]=c),(d=b[2])&&(this.centre[2]=d)},Firmin.Transition=function(){
this.properties=["all"],this.duration=["ms",0],this.delay=["ms",0],this.timingFunction="ease"},Firmin.Transition.methods=["properties","timingFunction","duration","delay"],
Firmin.Transition.parse=function(a,b){var f,g,c=Firmin.Transition.methods,d={},e=new Firmin.Transition


for(p in a)c.indexOf(p)!==-1?"properties"===p&&"string"==typeof p?e[p]=[a[p]]:"timingFunction"===p&&"string"!=typeof a[p]?e[p]="cubic-bezier("+a[p].join(",")+")":"duration"===p?(f=Firmin.parseTime(a[p]),
f&&(e[p]=f)):"delay"===p?(g=Firmin.parseTime(a[p]),g&&(e[p]=g)):e[p]=a[p]:d[p]=a[p]
return{result:e,remainder:d}},Firmin.Transition.prototype.hasDuration=function(){return 0!==this.duration[1]

},Firmin.Transition.prototype.getDuration=function(){var a=this.duration
return"s"===a[0]?1e3*a[1]:a[1]},Firmin.Transition.prototype.hasDelay=function(){return 0!==this.delay[1]

},Firmin.Transition.prototype.getDelay=function(){var a=this.delay
return"s"===a[0]?1e3*a[1]:a[1]},Firmin.Transition.prototype.build=function(a){return a=a||{},"string"==typeof this.properties?a[Firmin.prefix+"TransitionProperty"]=this.properties:a[Firmin.prefix+"TransitionProperty"]=this.properties.join(", "),
a[Firmin.prefix+"TransitionDuration"]=this.duration[1]+this.duration[0],a[Firmin.prefix+"TransitionDelay"]=this.delay[1]+this.delay[0],
this.timingFunction&&(a[Firmin.prefix+"TransitionTimingFunction"]=this.timingFunction),a},Firmin.Animation=function(a,b){
var c,d
"function"==typeof a.callback&&(this.callback=a.callback),delete a.callback,c=Firmin.Transition.parse(a,b),
this.transition=c.result,d=Firmin.Transform.parse(c.remainder,b),this.transform=d.result,this.style=d.remainder

},Firmin.Animation.prototype.hasDuration=function(){return this.transition&&this.transition.hasDuration()

},Firmin.Animation.prototype.getTotalDuration=function(){return this.transition?this.transition.getDuration()+this.transition.getDelay():0

},Firmin.Animation.prototype.exec=function(a){var c,b=this.style
this.transition&&(b=this.transition.build(b)),this.transform&&(b=this.transform.build(b))
for(c in b)a.style[c]=b[c]},Firmin.Animated=function(a){this.element=a,this.operations=[],this.callback=null

},Firmin.Animated.prototype.run=function(){var a=this.operations.shift(),b=this
return a?(setTimeout(function(){a.exec(b.element)},10),setTimeout(function(){b.fireCallback(),b.run()

},a.getTotalDuration()||10),this.callback=a.callback,this):(this.fired=!0,this)},Firmin.Animated.prototype.fireCallback=function(){
var a=this.callback
"function"==typeof a&&a.call(null,this.element)},Firmin.Animated.prototype.__animate__=function(a){return this.operations.push(a),
this.__lastAnim=a,this.fired&&(this.fired=!1,this.run()),this},Firmin.Animated.prototype.animate=function(a,b,c){
return a.duration=b,a.callback=c,this.__animate__(new Firmin.Animation(a))},Firmin.Animated.prototype.animateR=function(a,b,c){
return a.duration=b,a.callback=c,this.__animate__(new Firmin.Animation(a,this.__lastAnim))},Firmin.animate=function(a,b,c,d){
var e=new Firmin.Animated(a)
return e.animate(b,c,d),e.run()},Firmin.animateR=function(a,b,c,d){var e=new Firmin.Animated(a),f=new Firmin.Animation({}),g=new Firmin.Transform,h=new Firmin.CSSMatrix,i=a.style[Firmin.prefix+"Transform"]


return h.setMatrixValue(i),g.ctm=h,f.transform=g,e.__lastAnim=f,e.animateR(b,c,d),e.run()},Firmin.Transform.methods.forEach(function(f){
var g=f+"R"
Firmin[f]=function(a,b,c,d){var e={}
return e[f]=b,Firmin.animate(a,e,c,d)},Firmin[g]=function(a,b,c,d){var e={}
return e[f]=b,Firmin.animateR(a,e,c,d)},Firmin.Animated.prototype[f]=function(a,b,c){var d={}
return d[f]=a,this.animate(d,b,c)},Firmin.Animated.prototype[g]=function(a,b,c){var d={}
return d[f]=a,this.animateR(d,b,c)}})})


define("plugins/c9.ide.ui/anims",[],function(require,exports,module){function main(options,imports,register){
function cssAnimate(el,options,finish){return options.splitbox?util.nextFrame($cssAnimate.bind(null,el,options,finish)):void Firmin.animate(el,options,options&&options.duration||.2,function(){
el.style.transition="",finish&&finish()})}function $cssAnimate(el,options,finish){var duration=options.duration||"0.2s"


"string"==typeof duration&&(duration=parseFloat(duration)*("m"==duration[duration.length-2]?1:.001)),
el.style.transitionDuration=duration+"s"
var delay=options.delay||"0s"
el.style.transitionDelay="string"==typeof delay?delay:delay+"s"
var timingFunction=options.timingFunction||"linear"
timingFunction&&(el.style.transitionTimingFunction=timingFunction)
var props=[]
for(var prop in options)/duration|delay|timingFunction|immediate/.test(prop)||props.push(prop)
el.style.transitionProperty=props.join(",")
var wait=el.wait=function(e){wait&&(el.removeEventListener("transitionend",wait,!1),el.style.transition="",
el.wait===wait&&(wait=el.wait=null,finish&&finish()))}
el.addEventListener("transitionend",wait,!1),setTimeout(function(){wait&&wait()},1e3*duration+10),props.forEach(function(name){
el.style[name]=options[name]})}function animateMultiple(tweens,finish){var shouldAnimate=settings.getBool("user/general/@animateui")


if(shouldAnimate){animating=!0
var called,duration=0
tweens.forEach(function(options){var node=options.node
cssAnimate(node.$ext||node,options,function(){options.duration!=duration||called||(called=!0,finish&&finish()),
animating=!1}),duration=Math.max(duration,options.duration||.2)})}else finish&&finish()}function animate(aNode,options,finish){
var shouldAnimate=settings.getBool("user/general/@animateui")
if(shouldAnimate)animating=!0,cssAnimate(aNode.$ext||aNode,options,function(){finish&&finish(),animating=!1

})
else{var htmlNode=aNode.$ext||aNode
for(var prop in options)"duration"!=prop&&"timingFunction"!=prop&&(htmlNode.style[prop]=options[prop])


finish&&finish()}}function animateSplitBoxNode(aNode,options,finish){var shouldAnimate=settings.getBool("user/general/@animateui"),pNode=aNode.parentNode


if(!pNode.$box)return oNode&&animate(oNode,options,finish)
var isFirst,firstChild=pNode.getFirstChild(),lastChild=pNode.getSecondChild(),oNode=(isFirst=aNode==firstChild)?lastChild:firstChild


if(oNode==aNode||!oNode.visible)throw new Error("animating object that has no partner")
var to2={timingFunction:options.timingFunction,duration:options.duration}
pNode.$vbox?isFirst?to2.top=parseInt(options.height,10)+pNode.$edge[0]+pNode.padding+"px":to2.bottom=parseInt(options.height,10)+pNode.$edge[2]+pNode.padding+"px":isFirst?to2.left=parseInt(options.width,10)+pNode.$edge[3]+pNode.padding+"px":to2.right=parseInt(options.width,10)+pNode.$edge[1]+pNode.padding+"px"


var e=new EventEmitter
if(e.type="splitbox",e.which=aNode,e.other=oNode,e.options=options,e.options2=to2,e.duration=options.duration||.2,
emit("animate",e),shouldAnimate&&!options.immediate)animating=!0,options.splitbox=to2.splitbox=!0,cssAnimate(aNode.$ext,options),
cssAnimate(oNode.$ext,to2,function(){aNode.parentNode&&(pNode.$vbox?aNode.setHeight(parseInt(options.height,10)):aNode.setWidth(parseInt(options.width,10))),
finish&&finish(),e.emit("finish"),animating=!1})
else{var dir
pNode.$vbox?(aNode.setHeight(options.height),dir=isFirst?"top":"bottom"):(aNode.setWidth(options.width),
dir=isFirst?"left":"right"),oNode.$ext.style[dir]=to2[dir],finish&&finish(),e.emit("finish")}}function emitAnimate(e){
emit("animate",e)}var Plugin=imports.Plugin,settings=imports.settings,util=imports.util
require("./lib_firmin")
var EventEmitter=require("events").EventEmitter,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),animating=!1


plugin.freezePublicAPI({get animating(){return animating},_events:["animate"],animateMultiple:animateMultiple,
animate:animate,animateSplitBoxNode:animateSplitBoxNode,emitAnimate:emitAnimate}),register(null,{anims:plugin
})}return main.consumes=["Plugin","settings","util"],main.provides=["anims"],main})


define("plugins/c9.ide.ui/codebox",[],function(require,exports,module){"use strict"
function init(apf){apf.codebox=function(struct,tagName){this.$init(tagName||"codebox",apf.NODE_VISIBLE,struct)

},function(){this.$isTextInput=function(e){return!0},this.$focussable=!0,this.$childProperty="value",
this.value="",this.$draw=function(){this.$ext=this.$getExternal(),this.$input=this.$getLayoutNode("main","input",this.$ext),
this.$button=this.$getLayoutNode("main","button",this.$ext),this.$inputInitFix=this.$getLayoutNode("main","initialfix",this.$ext),
this.addEventListener("resize",function(e){this.ace.resize()}),this.$input.style.textShadow="none"
var ace=this.createSingleLineAceEditor(this.$input)
ace.commands.removeCommands(["find","replace","replaceall","gotoline","findnext","findprevious","expandtoline"]),
ace.commands.removeCommands(["indent","outdent"]),ace.commands.commandKeyBinding=Object.create(null),
ace.commands.addCommand(ace.commands.byName.undo),ace.commands.addCommand(ace.commands.byName.redo),this.$editor=this.ace=ace,
ace.renderer.setPadding(2),this.ace.codebox=this
var checkInitial=function(){var value=ace.getValue()
if(value&&ace.renderer.initialMessageNode)ace.renderer.off("afterRender",checkInitial),dom.removeCssClass(ace.container,"ace_initialMsg"),
ace.renderer.scroller.removeChild(ace.renderer.initialMessageNode),ace.renderer.initialMessageNode=null
else if(!value&&!ace.renderer.initialMessageNode){ace.renderer.on("afterRender",checkInitial),dom.addCssClass(ace.container,"ace_initialMsg")


var el=document.createElement("div")
el.className="tb_textboxInitialMsg",el.textContent=ace.codebox["initial-message"]||"",ace.renderer.initialMessageNode=el,
ace.renderer.scroller.appendChild(ace.renderer.initialMessageNode)}}
if(ace.on("input",checkInitial),setTimeout(checkInitial,100),apf.isTrue(this.getAttribute("clearbutton"))){
var _self=this,visible=!1
ace.renderer.on("afterRender",function(){var show=!!ace.getValue()
visible!=show&&(visible=show,_self.$button.style.display=visible?"block":"")}),this.$button.addEventListener("click",function(){
ace.setValue("")},!1)}this.$ext.addEventListener("mousedown",function(){ace.focus()},!1)},this.getValue=function(){
return this.ace.getValue()},this.setValue=function(val){return this.ace.setValue(val)},this.select=function(){
return this.ace.selectAll()},this.$focus=function(e){this.$ext&&!this.disabled&&(this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus"),
this.ace.focus())},this.$blur=function(){this.$ext&&(this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),
this.ace&&this.ace.blur())},this.$enable=function(){this.ace.setReadOnly(!1)},this.$disable=function(){
this.ace.setReadOnly(!0)},this.execCommand=function(command){this.ace.commands.exec(command,this.ace)

},this.createSingleLineAceEditor=function(el){var renderer=new VirtualRenderer(el)
renderer.screenToTextCoordinates=function(x,y){var pos=this.pixelToScreenCoordinates(x,y)
return this.session.screenToDocumentPosition(Math.min(this.session.getScreenLength()-1,Math.max(pos.row,0)),Math.max(pos.column,0))

},renderer.setOption("maxLines",4),renderer.setStyle("ace_one-line")
var editor=new Editor(renderer)
return new MultiSelect(editor),editor.session.setUndoManager(new UndoManager),editor.setOption("indentedSoftWrap",!1),
editor.setHighlightActiveLine(!1),editor.setShowPrintMargin(!1),editor.renderer.setShowGutter(!1),editor.renderer.setHighlightGutterLine(!1),
editor.$mouseHandler.$focusWaitTimout=0,editor.setReadOnly=function(readOnly){this.$readOnly!=readOnly&&(this.codebox.$ext.style.pointerEvents=readOnly?"none":""),
this.setOption("readOnly",readOnly)},editor},this.$loadAml=function(){"undefined"==typeof this.clearbutton&&this.$setInheritedAttribute("clearbutton"),
"undefined"==typeof this["initial-message"]&&this.$setInheritedAttribute("initial-message"),apf.isTrue(this.singleline)&&this.ace.on("paste",function(e){
e.text=e.text.replace(/\r\n|\r|\n/g," ")})}}.call(apf.codebox.prototype=new apf.StandardBinding),apf.aml.setElement("codebox",apf.codebox)

}var Editor=require("ace/editor").Editor,VirtualRenderer=require("ace/virtual_renderer").VirtualRenderer,UndoManager=require("ace/undomanager").UndoManager,MultiSelect=require("ace/multi_select").MultiSelect,dom=require("ace/lib/dom")


return require("ace/lib/fixoldbrowsers"),init})


define("text!plugins/c9.ide.ui/style.less",[],"")


define("plugins/c9.ide.ui/ui",[],function(require,module,exports){function main(options,imports,register){
function load(){return!loaded&&!apf.uiLoaded&&(loaded=!0,apf.uiLoaded=!0,apf.preProcessCSS=insertLess,
apf.initialize(),window.addEventListener("mousedown",function(){apf.isMousePressed=!0,document.body.classList.add("disableIframe")

},!0),void window.addEventListener("mouseup",function(){apf.isMousePressed=!1,document.body.classList.remove("disableIframe")

},!0))}function initSettings(v){function wrap(prototype,prop,isNumber){delete prototype.$booleanProperties[prop]


var oldHandler=prototype.$propHandlers[prop]||function(value){this[prop]=value},func=isNumber?settings.getNumber:settings.getBool


prototype.$propHandlers[prop]=function(value){function listen(){var v=func(value)
_self[prop]!=v&&oldHandler.call(_self,v)}var _self=this,dynProp=this.getAttribute(prop),isDynProp=~(String(dynProp)||"").indexOf("/")


if(isNumber){if(parseInt(value,10)==value||!value)return isDynProp&&settings.set(dynProp,value,null,null,!0),
oldHandler.call(_self,parseInt(value,10))}else{if("checkbox"==this.localName){var idx=this.$values&&this.$values.indexOf(value)


if(!isNaN(idx)&&idx>-1)return isDynProp&&settings.set(dynProp,value,null,null,!0),oldHandler.call(_self,value)

}if(apf.isTrue(value))return isDynProp&&settings.set(dynProp,value,null,null,!0),oldHandler.call(_self,!0)


if(apf.isFalse(value)||!value)return isDynProp&&settings.set(dynProp,value,null,null,!0),oldHandler.call(_self,!1)

}isDynProp&&(oldHandler.call(_self,func(value)),settings.on(value,listen),this.once("DOMNodeRemovedFromDocument",function(){
settings.off(value,listen)}))}}settings=v,wrap(apf.item.prototype,"checked",!1),wrap(apf.spinner.prototype,"value",!0),
wrap(apf.group.prototype,"value",!1),wrap(apf.checkbox.prototype,"value",!1),wrap(apf.tab.prototype,"animate",!1)

}function defineLessLibrary(css,plugin){if(packed&&css)throw new Error("Can't add dynamic less library in packed mode!")


packedThemes||(cssLibs.push(css),plugin.addOther(function(){cssLibs.splice(cssLibs.indexOf(css),1)}))

}function createStyleSheet(css){var style=document.createElement("style")
return style.appendChild(document.createTextNode(css)),document.getElementsByTagName("head")[0].appendChild(style),
style}function insertLess(css,filename,staticPrefix,_callback,force){var callback=_callback||function(err){
err&&console.error(err)}
if(css=css.trim(),filename=filename||"unknown.css",staticPrefix=staticPrefix||"",!css)return callback()


if(!force){if(packed&&css)throw new Error("Can't add dynamic less library in packed mode!")
if(packedThemes)return}require(["./lib_less1.5"],function(less){less&&(less.async=!0)
var parser=new less.Parser({filename:filename}),baseLib='@base-path : "'+staticPrefix+'";\n@image-path : "'+staticPrefix+'/images";\n@icon-path : "'+staticPrefix+'/icons";\n',code=baseLib+"\n"+cssLibs.join("\n")+"\n"+css


parser.parse(code,function(e,tree){if(e)return callback(e)
var style=createStyleSheet(tree.toCSS({relativeUrls:!0,rootpath:staticPrefix||""}))
callback(null,style)})})}function insertCss(css,staticPrefix,plugin){if(css){staticPrefix instanceof Plugin&&(plugin=staticPrefix,
staticPrefix="")
var force=packedThemes&&String(staticPrefix).match(/^http/)
if(staticPrefix!==!1&&!packedThemes||force){var filename=staticPrefix+"/"+plugin.name+".less"
insertLess(css,filename,staticPrefix,function(err,style){return err?console.error(err):void(style&&plugin.addOther(function(){
style.parentNode.removeChild(style)}))},force)}else{if(!packed&&packedThemes&&staticPrefix!==!1)return


var style=createStyleSheet(css)
plugin.addOther(function(){style.parentNode.removeChild(style)})}}}function insertSkin(skin,plugin){var data=skin.data


delete skin.data,skin.src="<skins />",skin.id=skin.name
var skinNode=new apf.skin(skin)
skinNode.setProperty("src",data),apf.document.documentElement.appendChild(skinNode),plugin.addElement(skinNode)

}function insertHtml(parent,markup,plugin){parent||(parent=document.body)
var lastChild=parent.lastChild
parent.insertAdjacentHTML("beforeend",markup)
var nodes=[]
if(lastChild)for(;lastChild.nextSibling;)nodes.push(lastChild=lastChild.nextSibling)
else nodes.push(parent.lastChild)
return plugin.addOther(function(){nodes.forEach(function(node){node.parentNode.removeChild(node)})}),
nodes}function insertMarkup(parent,markup,plugin){if(parent||(parent=apf.document.documentElement),!parent.$amlDestroyed){
var childMarker=parent.childNodes.length
parent.insertMarkup(markup)
var childNodes=parent.childNodes.slice(childMarker)
return plugin.addElement.apply(plugin,childNodes)}}function insertByIndex(parent,item,index,plugin){for(var beforeNode,diff=1e8,nodes=parent.childNodes,i=0,l=nodes.length;i<l;i++){
var d=nodes[i].$position-index
d>0&&d<diff&&(beforeNode=nodes[i],diff=d)}if("string"==typeof item){var bar=new apf.bar({htmlNode:document.createElement("div")
})
bar.insertMarkup(item),item=bar.childNodes.slice(),bar.childNodes.length=0,bar.destroy()}if(Array.isArray(item)){
for(var i=0;i<item.length;i++){var node=parent.insertBefore(item[i],beforeNode)
node.$position=index,plugin!==!1&&plugin.addElement(node)}return item[0]}var node=parent.insertBefore(item,beforeNode)


return node.$position=index,plugin!==!1&&plugin.addElement(node),node}function addClass(html,name){html.className=html.className.replace(new RegExp(" "+name,"g"),"")+" "+name

}function removeClass(html,name){html.className=html.className.replace(new RegExp(" "+name,"g"),"")}var Plugin=imports.Plugin


require("plugins/c9.ide.ui/codebox")(imports.apf)
var settings,packed=0===require("text!./style.less").length,packedThemes=packed||options.packedThemes!==!1,plugin=new Plugin("Ajax.org",main.consumes),cssLibs=[],loaded=!1

;["model","tree","button","menu","item","bar","divider","toolbar","list","tab","textbox","textarea","radiobutton","checkbox","page","splitter","hsplitbox","vsplitbox","group","img","label","spinner","dropdown","BindingColumnRule","datagrid","hbox","vbox","colorbox","frame","password","modalwindow","filler","splitbutton","codebox"].forEach(function(tag){
plugin[tag]=function(struct){return new apf[tag](struct)}}),plugin.on("load",function(){load()}),plugin.on("unload",function(){
loaded=!1}),plugin.freezePublicAPI({get packed(){return packed},get packedThemes(){return packedThemes

},set settings(v){initSettings(v)},defineLessLibrary:defineLessLibrary,insertCss:insertCss,insertSkin:insertSkin,
insertMarkup:insertMarkup,insertHtml:insertHtml,insertByIndex:insertByIndex,buildDom:apf.buildDom,escapeXML:apf.escapeXML,
getAbsolutePosition:apf.getAbsolutePosition,createStylesheet:apf.createStylesheet,importStylesheet:apf.importStylesheet,
getStyleRule:apf.getStyleRule,setStyleRule:apf.setStyleRule,removeStyleRule:apf.removeStyleRule,setStyleClass:apf.setStyleClass,
getWidthDiff:apf.getWidthDiff,getHeightDiff:apf.getHeightDiff,getMargin:apf.getMargin,isChildOf:apf.isChildOf,
layout:apf.layout,asyncForEach:apf.asyncForEach,addClass:addClass,removeClass:removeClass,isTrue:apf.isTrue,
isFalse:apf.isFalse,getStyle:apf.getStyle}),register("",{ui:plugin})}return main.consumes=["Plugin","apf"],
main.provides=["ui"],main})


define("text!plugins/c9.ide.find.replace/findreplace.css",[],"")


define("text!plugins/c9.ide.find.replace/skin.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:button name="btnquicksearchnav">\n        <a:style><![CDATA[]]></a:style>\n        <a:presentation>\n            <a:main\n              caption    = "div[1]/text()"\n              label      = "div[1]/text()"\n              background = "."\n              icon       = "div[1]/span"\n              minwidth   = "20">\n                <div class="btnquicksearchnav">\n                    <div class="lbl">-\n                        <span></span>\n                        <div class="btnDivider"></div>\n                    </div>\n                 </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>')


define("text!plugins/c9.ide.find.replace/findreplace.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:label id="tooltipSearchReplace" skin="tooltipLabel" visible="false" />\n    <a:bar id="winSearchReplace" skinset="searchreplace" focussable="container" zindex="1000" minheight="0" visible="false" height="0">\n        <div id="divSearchCount"></div>\n        <a:button id="btnPrev"\n          skin       = "btnquicksearchnav" \n          class      = "btnquicksearchnavLeft withDivider" \n          right      = "24"\n          top        = "2"\n          focussable = "false"\n          zindex     = "100"/>\n        <a:button id="btnNext"\n          skin       = "btnquicksearchnav" \n          class      = "btnquicksearchnavRight" \n          right      = "2"\n          top        = "2"\n          focussable = "false"\n          zindex     = "100"/>\n        <a:hbox id="hbox" class="find-and-replace" padding="5" edge="5">\n            <a:hbox class="grouped_checkbox_holder" align="start" height="27">\n                <a:checkbox id="chkRegEx" value="state/ace/search/@regex" class="chkRegEx" label="Regular Expressions" skin="grouped_checkbox" width="27" />\n                <a:checkbox id="chkMatchCase" value="state/ace/search/@matchcase" class="chkMatchCase" label="Match Case" skin="grouped_checkbox" width="27" />\n                <a:checkbox id="chkWholeWords" value="state/ace/search/@wholeword" class="chkWholeWords" label="Whole Words" skin="grouped_checkbox" width="27" />\n            </a:hbox>\n            <a:hbox class="grouped_checkbox_holder" align="start" height="27">\n                <a:checkbox id="chkWrapAround" value="state/ace/search/@wraparound" class="chkWrapAround" label="Wrap Around" skin="grouped_checkbox" width="27" />\n                <a:checkbox id="chkSearchSelection" class="chkSearchSelection" label="Search Selection" skin="grouped_checkbox" width="27" />\n            </a:hbox>\n            <a:codebox id="txtFind" tabindex="1000" flex="3" skin="codebox" initial-message="Find" focusselect="true" class="buttonsright" />\n            <a:hbox class="grouped_checkbox_holder" height="27">\n                <a:checkbox id="chkPreserveCase" value="state/ace/search/@preservecase" class="single chkPreserveCase" label="Preserve Case" skin="grouped_checkbox" width="27" />\n            </a:hbox>\n            <a:codebox id="txtReplace" tabindex="1001" skin="codebox" margin="0 -1 0 0"  flex="1" initial-message="Replace With" focusselect="true" label="$0-9 will insert the text of your capturing groups." />\n            <a:button margin="0 -2 0 0" skin="blackbutton" id="btnReplace" height="27">Replace</a:button>\n            <a:button skin="blackbutton" tabindex="1002" id="btnReplaceAll" height="27">Replace All</a:button>\n            <a:button id="btnCollapse" skin="btn_console_open"  state="true" height="27" />\n        </a:hbox>\n    </a:bar>\n</a:application>')


define("plugins/c9.ide.find.replace/libsearch",[],function(require,exports,module){var prefix="state/search-history/",TextMode=require("ace/mode/text").Mode,HashHandler=require("ace/keyboard/hash_handler").HashHandler


module.exports=function(settings,execFind,toggleDialog,restore,toggleOption,resizeBox){return{keyStroke:"",
addSearchKeyboardHandler:function(txtFind,type){function optionCommand(name,key){return{bindKey:{mac:key.replace(/^|\|/g,"$&Ctrl-Option-"),
win:key.replace(/^|\|/g,"$&Alt-")},name:name,exec:toggleOption}}var _self=this
txtFind.ace.saveHistory=function(){_self.saveHistory(this.getValue(),this.session.listName)},txtFind.ace.session.listName=type


var iSearchHandler=new HashHandler
return iSearchHandler.bindKeys({Up:function(codebox){return!(codebox.getCursorPosition().row>0)&&(_self.navigateList("next",codebox),
codebox.selection.moveCursorFileStart(),void codebox.selection.clearSelection())},Down:function(codebox){
return!(codebox.getCursorPosition().row<codebox.session.getLength()-1)&&(_self.navigateList("prev",codebox),
void(codebox.selection.lead.row=codebox.session.getLength()-1))},"Ctrl-Home":function(codebox){_self.navigateList("first",codebox)

},"Ctrl-End":function(codebox){_self.navigateList("last",codebox)},Esc:function(){toggleDialog(-1)},"Shift-Esc":function(){
restore()},"Ctrl-Return|Alt-Return":function(codebox){codebox.insert("\n")},Return:function(codebox){
execFind(!1,!0)},"Shift-Return":function(codebox){execFind(!0,!0)}}),toggleOption&&iSearchHandler.addCommands([optionCommand("regex","r"),optionCommand("matchCase","i|c"),optionCommand("wholeWords","w|b"),optionCommand("preserveCase","a")]),
iSearchHandler.handleKeyboard=function(data,hashId,keyString,keyCode){if("\0"!=keyString){var command=this.findKeyCommand(hashId,keyString),editor=data.editor


if(command){var success=editor.execCommand(command)
return success!==!1?{command:"null"}:void 0}}},txtFind.ace.setKeyboardHandler(iSearchHandler),iSearchHandler

},navigateList:function(type,codebox){var listName=codebox.session.listName,lines=settings.getJson(prefix+listName)||[],value=codebox.getValue()


!value||this.position!=-1&&lines[this.position]==value||(lines=this.saveHistory(value,listName),this.position=0),
void 0===this.position&&(this.position=-1)
var next
"prev"==type?(next=Math.max(0,this.position-1),this.position<=0&&(next=-1)):"next"==type?next=Math.min(lines.length-1,this.position+1):"last"==type?next=Math.max(lines.length-1,0):"first"==type&&(next=0),
(next in lines&&next!=this.position||next==-1)&&(this.keyStroke=type,codebox.setValue(lines[next]||"",!0),
this.keyStroke="",this.position=next)},saveHistory:function(searchTxt,listName){var json=settings.getJson(prefix+listName)||[]


return searchTxt&&json[0]!=searchTxt&&(json.unshift(searchTxt),json.length>200&&json.splice(200,json.length),
settings.setJson(prefix+listName,json)),json},checkRegExp:function(txtFind,tooltip,win){var searchTxt=txtFind.getValue()


try{new RegExp(searchTxt)}catch(e){tooltip.$ext.textContent=e.message.replace(": /"+searchTxt+"/",""),
tooltip.$ext.style.opacity=1
var pos=apf.getAbsolutePosition(win.$ext)
return tooltip.$ext.style.left=pos[0]+txtFind.getLeft()+"px",tooltip.$ext.style.top=pos[1]-16+"px",this.tooltipTimer=setTimeout(function(){
tooltip.$ext.style.display="block"},200),!1}return clearTimeout(this.tooltipTimer),tooltip.$ext.style.display="none",
!0},setReplaceFieldMode:function(txtFind,mode){var session=txtFind.ace.session
if(session.$modeId!=mode){var textMode=new TextMode
textMode.$highlightRules=new textMode.HighlightRules
var rules={literal:[{defaultToken:"text"}],jsOnly:[{token:"constant.language.escape",regex:/\$[\d&\$]|\\[\\nrt]/
}],extended:[{token:"constant.language.escape",regex:/\$\$|\\[\\nrt]/},{token:"string",regex:/\\\d|\$[\d&]/
},{token:"keyword",regex:/\\U/,next:"uppercase"},{token:"keyword",regex:/\\L/,next:"lowercase"},{token:"keyword",
regex:/\\E/,next:"start"},{token:"keyword",regex:/\\[ul]/,next:"uppercase"}],uppercase:[{include:"extended"
},{defaultToken:"uppercase"}],lowercase:[{include:"extended"},{defaultToken:"lowercase"}]}
rules.start=rules[mode]||rules.literal,textMode.$highlightRules.$rules=rules,textMode.$highlightRules.normalizeRules(),
session.setMode(textMode),session.$modeId=mode}},setRegexpMode:function(txtFind,isRegexp){var tokenizer={},_self=this


tokenizer.getLineTokens=isRegexp?function(val){return{tokens:_self.parseRegExp(val),state:""}}:function(val){
return{tokens:[{value:val,type:"text"}],state:""}},txtFind.ace.session.bgTokenizer.tokenizer=tokenizer,
txtFind.ace.session.bgTokenizer.lines=[],txtFind.ace.renderer.updateFull(),this.colorsAdded||(this.colorsAdded=!0,
require("ace/lib/dom").importCssString("                .ace_r_collection {background:#ffc080;color:black}                .ace_r_escaped{color:#cb7824}                .ace_r_subescaped{background:#dbef5c;color:orange}                .ace_r_sub{background:#dbef5c;color:black;}                .ace_r_replace{background:#80c0ff;color:black}                .ace_r_range{background:#80c0ff;color:black}                .ace_r_modifier{background:#80c0ff;color:black}                .ace_r_error{background:red;color:white;","ace_regexps"))

},regexp:{alone:{"^":1,$:1,".":1},rangeStart:{"+":1,"*":1,"?":1,"{":1},replace:/^\\[sSwWbBnrd]/,searches:/^\((?:\?\:|\?\!|\?|\?\=|\?\<\=)/,
range:/^([+*?]|\{(\d+,\d+|\d+,?|,?\d+)\})\??|^[$\^]/},parseRegExp:function(value){for(var l,t,c,re=this.regexp,sub=0,collection=0,out=[],push=function(text,type){
"number"==typeof text&&(text=value.substr(0,text)),out.push(text,type),value=value.substr(text.length)

};value.length;)if("\\"!=(c=value.charAt(0)))if("|"!=c)if("("!=c)if(")"!=c)if("["!=c)if("]"!=c&&"}"!=c)if(re.rangeStart[c]){
var m=value.match(re.range)
if(!m){push(c,"text")
continue}if(push(m[0],"range"),m=value.match(re.range)){push(m[0],"error")
continue}}else if(re.alone[c]){if(push(c,"replace"),"."==c)continue
var m=value.match(re.range)
m&&push(m[0],"error")}else push(c,sub>0?"sub":"text")
else push(c,sub>0?"sub":"text")
else{collection=1
for(var ct,temp=["["],i=1,l=value.length;i<l&&(ct=value.charAt(i),temp.push(ct),"["==ct?collection++:"]"==ct&&collection--,
collection);i++);push(temp.join(""),"collection")}else 0===sub?push(")","error"):(sub--,push(")","sub"))
else{if(sub++,t=value.match(re.searches)){push(t[0],"sub")
continue}push("(","sub")}else push(c,"collection")
else{if(t=value.match(/^\\\\+/g)){var odd=(l=t[0].length)%2
push(l-odd,sub>0?"subescaped":"escaped")
continue}if(t=value.match(re.replace)){push(t[0],"replace")
continue}if(t=value.match(/^\\(?:(u)\d{0,4}|(x)\d{0,2})/)){var isError="u"==t[1]&&6!=t[0].length||"x"==t[1]&&4!=t[0].length


push(t[0],isError?"error":"escaped")
continue}push(2,"escaped")}for(var last="text",res=[],token={type:last,value:""},i=0;i<out.length;i+=2)out[i+1]!=last&&(token.value&&res.push(token),
last=out[i+1],token={type:"r_"+last,value:""}),token.value+=out[i]
return token.value&&res.push(token),res}}}})


define("plugins/c9.ide.find.replace/async_search",[],function(require,exports,module){function getWorker(){
if($worker)return $worker
var blob=new Blob([workerSrc],{type:"application/javascript"}),blobUrl=(window.URL||window.webkitURL).createObjectURL(blob)


return $worker=new Worker(blobUrl),setTimeout(function(){(window.URL||window.webkitURL).revokeObjectURL(blobUrl)

}),$worker.onmessage=onMessage,$worker.onerror=function(e){throw e},$worker}function onMessage(e){var msg=e.data,id=msg.callbackId


$worker.responseTime=Date.now(),id&&callbacks[id]&&(id==callbackId&&callbacks[id](msg),callbacks[id]=null)

}function terminateWorker(){$worker&&$worker.terminate(),$worker=null,callbacks={}}function execFind(session,options,cb){
session.searchTracker||(session.searchTracker=new SearchTracker(session),session.once("change",function(){
session.searchTracker=null}))
var st=session.searchTracker
session.searchTracker.get(options,function(all){if(!all)return cb("waiting")
var offset=options.indexRange?options.indexRange[0]:0
if(options.findAll)return cb({value:st.value,matches:all,offset:offset})
var backwards=options.backwards===!0,skipCurrent=options.skipCurrent!==!1,wrap=options.wrap,range=options.range,start=options.start


start||(start=range?range[backwards?"end":"start"]:session.selection.getRange()),start.start&&(start=start[skipCurrent!=backwards?"end":"start"]),
options.regex||(options.regex=RegExp(options.source,options.flags))
var value=st.value
options.indexRange&&(value=value.slice(offset,options.indexRange[1]))
var match,index=st.session.doc.positionToIndex(start)-offset,i=binIndexOf(all,index),next=i,wrapped=!1,updateWrap=function(){
next>all.length-1?(next=wrap?0:all.length-1,wrapped=wrap):next<0&&(next=wrap?all.length-1:0,wrapped=wrap)

},getMatch=function(){if(void 0!==all[next])return options.regex.lastIndex=all[next],options.regex.exec(value)

}
if(backwards?(match=getMatch(),(!match||all[next]+match[0].length>index)&&(next-=1,updateWrap(),match=getMatch())):(all[i]!=index&&(next+=1),
updateWrap(),match=getMatch()),!match)return cb(null)
start=st.session.doc.indexToPosition(match.index+offset)
var end=st.session.doc.indexToPosition(start.column+match[0].length,start.row)
cb({start:start,end:end,total:all.length,current:next,wrapped:wrapped,value:st.value,startIndex:match.index+offset
})})}function binIndexOf(array,val){for(var low=0,hi=array.length-1;low<=hi;){var mid=low+hi>>1,c=array[mid]


if(val>c)low=mid+1
else{if(!(val<c))return mid
hi=mid-1}}return low-1}function SearchTracker(session){this.value=session.getValue(),this.results=Object.create(null),
this.session=session,this.initWorker()}var $worker=null,workerSrc="("+function(_self){function setValue($str){
str=$str}function findAll(str,regex,cb){for(var m,matches=[],last=regex.lastIndex=0;m=regex.exec(str);)matches.push(last=m.index),
m[0].length||(regex.lastIndex=last+=1,last>=str.length&&matches.pop())
cb({matches:matches})}var str=""
_self.onmessage=function(e){var msg=e.data
if("setValue"==msg.command)setValue(msg.data)
else if("findAll"==msg.command)try{var regex=RegExp(msg.source,msg.flags||"g"),searchStr=str
msg.range&&(searchStr=searchStr.slice(msg.range[0],msg.range[1])),findAll(searchStr,regex,function(r){
r.callbackId=msg.callbackId,postMessage(r)})}catch(e){}else if(msg.eval){try{var r=eval(msg.eval)}catch(e){
r=e.message}postMessage({type:"event",data:r})}}}+")(this)",callbacks={},callbackId=1;(function(){this.rangeToIndex=function(r){
var start=this.session.doc.positionToIndex(r.start),end=start-r.start.column+this.session.doc.positionToIndex(r.end,r.start.row)


return[start,end]},this.get=function(re,cb){re.id||(re.id=re.source+"|"+re.flags+(re.range||"")),re.range&&!re.indexRange&&(re.indexRange=this.rangeToIndex(re.range)),
clearTimeout(this.crashTimer)
var all=this.results[re.id]
all?cb(all):(this.getMatchOffsets(re,function(data){clearTimeout(this.crashTimer),this.results[re.id]=data.matches,
cb(data.matches)}.bind(this)),this.crashTimer=setTimeout(function(){cb()},500))},this.getMatchOffsets=function(re,cb){
var worker=this.initWorker(),now=Date.now()
!worker.responseTime&&worker.requestTime&&now-worker.requestTime>1e3&&(terminateWorker(),worker=this.initWorker()),
callbackId+=1
var id=callbackId
worker.responseTime=null,worker.requestTime=now,worker.postMessage({source:re.source,flags:re.flags,range:re.indexRange,
callbackId:callbackId,command:"findAll"}),callbacks[id]=cb},this.initWorker=function(){var worker=getWorker()


return worker.value!=this.value&&(worker.postMessage({command:"setValue",data:this.value}),worker.value=this.value),
worker}}).call(SearchTracker.prototype),exports.terminateWorker=terminateWorker,exports.execFind=execFind

})


define("plugins/c9.ide.find.replace/findreplace",[],function(require,exports,module){"use strict"
function main(options,imports,register){function toggleOption(){var ch
switch(this.name){case"regex":ch=chk.regEx
break
case"wholeWords":ch=chk.wholeWords
break
case"matchCase":ch=chk.matchCase}ch.change(!ch.checked,!0),execFind()}function load(){function isSupported(editor){
return apf.activeElement===txtFind||apf.activeElement===txtReplace||editor&&editor.ace}function isSupportedRW(editor){
var ace=isSupported(editor)
return ace!==!0&&ace?!ace.getOption("readOnly"):ace}return!loaded&&(loaded=!0,commands.addCommands({replace:{
bindKey:{mac:"Option-Command-F",win:"Alt-Shift-F|Ctrl-H"},hint:"search for a string inside the active document and replace it",
isAvailable:isSupportedRW,exec:function(env,args,request){toggleDialog(1,!0)}},replaceall:{bindKey:{mac:"",
win:""},hint:"search for a string inside the active document and replace all",isAvailable:isSupportedRW,
exec:function(env,args,request){replaceAll()}},replacenext:{isAvailable:isSupportedRW,exec:function(env,args,request){
replace()}},replaceprevious:{isAvailable:isSupportedRW,exec:function(env,args,request){replace(!0)}},
findAll:{isAvailable:isSupported,bindKey:{mac:"Ctrl-Alt-G",win:"Ctrl-Alt-K"},exec:function(editor){findAgain(editor.ace,0)

}},findnext:{isAvailable:isSupported,bindKey:{mac:"Command-G",win:"Ctrl-K"},exec:function(editor){findAgain(editor.ace,1)

}},findprevious:{isAvailable:isSupported,bindKey:{mac:"Command-Shift-G",win:"Ctrl-Shift-K"},exec:function(editor){
findAgain(editor.ace,-1)}},find:{hint:"open the quicksearch dialog to quickly search for a phrase",bindKey:{
mac:"Command-F",win:"Ctrl-F"},isAvailable:isSupported,exec:function(env,args,request){toggleDialog(1,!1)

}},hidesearchreplace:{bindKey:{mac:"ESC",win:"ESC"},isAvailable:function(editor){return winSearchReplace&&winSearchReplace.visible

},exec:function(env,args,request){toggleDialog(-1)}}},plugin),menus.addItemByPath("Find/Find...",new ui.item({
command:"find"}),100,plugin),menus.addItemByPath("Find/Find Next",new ui.item({command:"findnext"}),200,plugin),
menus.addItemByPath("Find/Find Previous",new ui.item({command:"findprevious"}),300,plugin),menus.addItemByPath("Find/~",new ui.divider,400,plugin),
menus.addItemByPath("Find/Replace...",new ui.item({command:"replace"}),500,plugin),menus.addItemByPath("Find/Replace Next",new ui.item({
command:"replacenext"}),600,plugin),menus.addItemByPath("Find/Replace Previous",new ui.item({command:"replaceprevious"
}),700,plugin),menus.addItemByPath("Find/Replace All",new ui.item({command:"replaceall"}),800,plugin),
void tabs.on("focus",function(e){winSearchReplace&&winSearchReplace.visible&&(e.tab&&e.tab.editor.ace?(winSearchReplace.enable(),
execFind(!1,"highlight")):(winSearchReplace.disable(),btnCollapse.enable(),updateCounter()))}))}function draw(){
function resize(){if(!(first++<2)){var h=winSearchReplace.$ext.scrollHeight
Math.abs(winSearchReplace.height-h)<1||(winSearchReplace.setHeight(h),winSearchReplace.$ext.style.height="",
ui.layout.forceResize(null,!0))}}if(!drawn){drawn=!0,ui.insertCss(css,options.staticPrefix,plugin),ui.insertSkin({
name:"searchreplace",data:skin,"media-path":options.staticPrefix+"/images/","icon-path":options.staticPrefix+"/icons/"
},plugin),searchRow=layout.findParent(plugin),ui.insertMarkup(null,markup,plugin),txtFind=plugin.getElement("txtFind"),
winSearchReplace=plugin.getElement("winSearchReplace"),txtReplace=plugin.getElement("txtReplace"),tooltipSearchReplace=plugin.getElement("tooltipSearchReplace"),
chk.searchSelection=plugin.getElement("chkSearchSelection"),divSearchCount=plugin.getElement("divSearchCount"),
hbox=plugin.getElement("hbox"),chk.regEx=plugin.getElement("chkRegEx"),chk.wrapAround=plugin.getElement("chkWrapAround"),
chk.matchCase=plugin.getElement("chkMatchCase"),chk.wholeWords=plugin.getElement("chkWholeWords"),chk.preserveCase=plugin.getElement("chkPreserveCase"),
btnPrev=plugin.getElement("btnPrev"),btnNext=plugin.getElement("btnNext"),btnReplace=plugin.getElement("btnReplace"),
btnReplaceAll=plugin.getElement("btnReplaceAll"),btnCollapse=plugin.getElement("btnCollapse"),btnNext.on("click",function(){
findNext(!1)}),btnPrev.on("click",function(){findNext(!0)}),btnReplace.on("click",function(){replace()

}),btnReplaceAll.on("click",function(){replaceAll()}),btnCollapse.on("click",function(){toggleDialog(-1)

}),txtFind.$ext.appendChild(divSearchCount.$ext),txtFind.$ext.appendChild(btnPrev.$ext),txtFind.$ext.appendChild(btnNext.$ext)


var first=0
txtFind.ace.renderer.on("autosize",resize),txtReplace.ace.renderer.on("autosize",resize)
var timer,control
txtReplace.on("focus",function(){control&&control.stop(),control={},apf.tween.single(txtReplace.$ext.parentNode,{
type:"boxFlex",from:txtReplace.$ext.parentNode.style[apf.CSS_FLEX_PROP]||1,to:3,anim:apf.tween.easeOutCubic,
control:control,steps:15,interval:1,onfinish:function(){ui.layout.forceResize(null,!0)}})}),txtReplace.on("blur",function(){
txtReplace.getValue()||(control&&control.stop(),control={},apf.tween.single(txtReplace.$ext.parentNode,{
type:"boxFlex",from:txtReplace.$ext.parentNode.style[apf.CSSPREFIX+"BoxFlex"]||3,to:1,anim:apf.tween.easeOutCubic,
control:control,steps:15,interval:1,onfinish:function(){ui.layout.forceResize(null,!0)}}))}),settings.on("read",function(e){
settings.setDefaults("state/ace/search",[["regex","false"],["matchcase","false"],["wholeword","false"],["backwards","false"],["wraparound","true"],["highlightmatches","true"],["preservecase","false"]])

},plugin)
var kb=libsearch.addSearchKeyboardHandler(txtReplace,"replace")
kb.bindKeys({Return:function(codebox){replace()},"Shift-Return":function(codebox){replace(!0)}}),document.body.appendChild(tooltipSearchReplace.$ext),
chk.regEx.on("prop.value",function(e){libsearch.setRegexpMode(txtFind,ui.isTrue(e.value))}),libsearch.setRegexpMode(txtFind,chk.regEx.checked),
libsearch.setReplaceFieldMode(txtReplace,"extended"),decorateCheckboxes(hbox),[txtReplace].forEach(function(node){
tooltip.add(node.$ext,{message:node.label,width:"auto",timeout:0,tooltip:tooltipSearchReplace.$ext,animate:!1,
getPosition:function(){var pos=ui.getAbsolutePosition(winSearchReplace.$ext),pos2=ui.getAbsolutePosition(node.$ext,winSearchReplace.$ext),left=pos[0]+pos2[0],top=pos[1]


return[left,top-16]}},plugin)}),libsearch.addSearchKeyboardHandler(txtFind,"search"),txtFind.ace.session.on("change",function(e){
clearTimeout(timer)
var find=!libsearch.keyStroke
timer=setTimeout(function(){execFind(!1,!find&&"highlight")},20)}),txtFind.ace.commands.on("exec",function(e){
/centerselection|fold|comment/i.test(e.command.name)&&(getAce().execCommand(e.command.name),e.preventDefault(),
e.stopPropagation())}),initFindInRange(),emit("draw")}}function decorateCheckboxes(parent){var cbs=parent.selectNodes("//a:checkbox")


cbs.forEach(function(cb){cb.on("click",function(e){"chkSearchSelection"==this.name&&(chk.searchSelection.checked&&!txtReplace.ace.isFocused()&&txtFind.focus(),
updateFindInRangeMarker(e)),execFind(void 0,"highlight")}),tooltip.add(cb.$ext,{message:cb.label,width:"auto",
timeout:0,tooltip:tooltipSearchReplace.$ext,animate:!1,getPosition:function(){var pos=ui.getAbsolutePosition(winSearchReplace.$ext),left=cb.$ext.getBoundingClientRect().left,top=pos[1]


return[left,top-16]}},plugin)})}function updateCounter(total,current,msg,wrapped){var oIter=divSearchCount.$ext


if(oIter){msg=msg||""
var color=wrapped?"blue":""
"number"==typeof total&&"number"==typeof current&&(total?current=getOptions().backwards?total-current:current+1:(current=0,
color="red"),msg=current+" of "+total+msg),oIter.style.color=color,oIter.textContent=msg}}function setStartPos(ace,force){
if(startPos.range&&!force||(startPos.range=ace.getSelectionRange()),chk.searchSelection.checked){var range=ace.getSelectionRange(),isValid=ace.session.getTextRange(range).length>100

;(!isValid||currentRange&&range.isEqual(currentRange))&&(range=null),(marker||!range&&startPos.id==getSessionId(ace.session))&&(range=startPos.searchRange),
range&&!range.isEmpty()?startPos.searchRange=range:startPos.searchRange=null}startPos.scrollTop=ace.session.getScrollTop(),
startPos.scrollLeft=ace.session.getScrollLeft(),startPos.id=getSessionId(ace.session)}function initFromEditor(ace){
ace.selection.isEmpty()||ace.selection.isMultiLine()||txtFind.setValue(ace.getCopyText())}function toggleDialog(force,isReplace,noselect,callback){
var tab=tabs.focussedTab,editor=tab&&tab.editor
if(draw(),tooltipSearchReplace.$ext.style.display="none",!force&&!winSearchReplace.visible||force>0){
if(!editor||!editor.ace)return
winSearchReplace.enable()
var ace=getAce(),fromEditor=ace&&editor&&editor.ace==ace
fromEditor&&(isReplace||initFromEditor(ace),setStartPos(ace,ace.selection.isEmpty())),winSearchReplace.visible||showUi(callback)


var input=isReplace?txtReplace:txtFind
input.focus(),input.select()}else winSearchReplace.visible?(txtFind.ace.saveHistory(),noselect||tabs.focusTab(tab),
hideUi(null,callback)):callback&&callback()
return!1}function showUi(callback){btnReplaceAll.setCaption(searchRow.getWidth()<800?"All":"Replace All"),
layout.setFindArea(winSearchReplace,{},callback),btnCollapse.setValue(1)}function hideUi(animate,callback){
layout.setFindArea(null,{},callback),btnCollapse.setValue(0)}function restore(){if(!startPos)return!1


var editor=getAce()
editor.selection.setSelectionRange(startPos.range||startPos.searchRange),editor.session.setScrollTop(startPos.scrollTop),
editor.session.setScrollLeft(startPos.scrollLeft)}function getOptions(){var options={backwards:!1,wrap:chk.wrapAround.checked,
caseSensitive:chk.matchCase.checked,wholeWord:chk.wholeWords.checked,regExp:chk.regEx.checked},ace=getAce()


chk.searchSelection.checked?options.range=startPos.searchRange:options.range=null
var newLineMode=ace.session.getNewLineMode()
return txtFind.ace.session.setNewLineMode(newLineMode),txtReplace.ace.session.setNewLineMode(newLineMode),
options}function findNext(backwards){execFind(backwards,!0)}function execFind(reverseBackwards,type,options,callback){
function selectAll(result){var indexArray=result.matches,value=result.value,startIndex=result.offset,re=options.re


if(indexArray.length){for(var doc=ace.session.doc,ranges=[],startPos={row:0,column:0},endPos={row:0,column:0
},start=0,end=0,offset=0,i=0;i<indexArray.length;i++){var index=indexArray[i]+startIndex
re.lastIndex=index
var match=re.exec(value),txt=match[0],len=txt.length
startPos=doc.indexToPosition(index+offset-start+startPos.column,startPos.row),start=index+offset,end=index+len+offset,
endPos=doc.indexToPosition(end-start+startPos.column,startPos.row),ranges.push(Range.fromPoints(startPos,endPos))

}ace.selection.fromJSON(ranges)}}var ace=getAce()
if(ace&&txtFind){timer&&(timer=clearTimeout(timer))
var searchTxt=txtFind.getValue()
options||(options=getOptions()),reverseBackwards&&(options.backwards=!options.backwards),options.regExp&&libsearch.checkRegExp(txtFind,tooltipSearchReplace,winSearchReplace)


var range=ace.selection.getRange()
type===!0&&(type="next"),"next"==type&&txtFind.ace.saveHistory(),"next"!=type&&currentRange||(currentRange=range),
options.skipCurrent="next"==type,options.start=currentRange,options.needle=searchTxt,options.range&&"highlight"!=type?addFindInRangeMarker(options.range,ace.session):options.range||removeFindInRangeMarker()


var re=ace.$search.$assembleRegExp(options,!0)
if(!re){if(updateCounter(),"highlight"!=type){var pos=options.start[options.backwards?"end":"start"],newRange=options.range||Range.fromPoints(pos,pos)


ace.revealRange(newRange)}return callback&&callback()}"highlight"!=type&&(lastSearchOptions=options),
options.re=re,options.source=re.source,options.flags=re.ignoreCase?"igm":"gm",asyncSearch.execFind(ace.session,options,function(result){
if("waiting"==result)return updateCounter("...")
result=result||{total:0,current:0},updateCounter(result.total,result.current,null,result.wrapped),result.start&&result.end||(result.start=result.end=range[options.backwards?"end":"start"])


var newRange=Range.fromPoints(result.start,result.end)
options.range&&newRange.isEmpty()&&(newRange=options.range),"next"==type&&(currentRange=newRange),"highlight"!=type&&ace.revealRange(newRange),
options.findAll?selectAll(result):(ace.session.highlight(re),ace.session._signal("changeBackMarker")),
callback&&callback(result)})}}function findAgain(ace,direction){if(!ace.selection.isEmpty()&&lastSearchOptions){
var text=ace.session.getTextRange(),match=lastSearchOptions.re&&lastSearchOptions.re.exec(text)
match&&match[0]==text||(lastSearchOptions=null)}lastSearchOptions?(chk.searchSelection.checked&&(chk.searchSelection.uncheck(),
removeFindInRangeMarker(!0),delete lastSearchOptions.range,delete lastSearchOptions.indexRange,marker=null),
lastSearchOptions.backwards=direction==-1,lastSearchOptions.findAll=0==direction,execFind(null,!0,lastSearchOptions)):direction==-1?ace.findPrevious():1==direction?ace.findNext():0==direction&&ace.findAll()

}function replace(backwards){var ace=getAce()
if(ace){var options=getOptions()
options.needle=txtFind.getValue()
var re=ace.$search.$assembleRegExp(options,!0),replaceFn=getReplaceFunction(options),range=ace.selection.getRange()


execFind(backwards,!1,options,function(result){if(ace.selection.getRange().isEqual(range)){if(result&&result.total){
re.lastIndex=result.startIndex
var match=re.exec(result.value),replacement=match&&replaceFn(match)
match[0]!=replacement&&(range.end=ace.session.replace(range,replacement)),options.backwards?range.end=range.start:range.start=range.end,
ace.selection.setRange(range)}findNext(backwards)}}),txtReplace.ace.saveHistory()}}function replaceAll(cb){
var ace=getAce()
if(ace){var options=getOptions()
options.needle=txtFind.getValue()
var re=ace.$search.$assembleRegExp(options,!0)
if(!re)return updateCounter()
options.re=re,options.source=re.source,options.flags=re.ignoreCase?"igm":"gm",options.findAll=!0
var replaceFn=getReplaceFunction(options)
ace.$search.set({preserveCase:chk.preserveCase.checked}),asyncSearch.execFind(ace.session,options,function(result){
var replaced=0,indexArray=result.matches,value=result.value,startIndex=result.offset,re=options.re
if(!indexArray.length)return replaced
for(var doc=ace.session.doc,startPos={row:0,column:0},endPos={row:0,column:0},start=0,end=0,offset=0,range=new Range,i=0;i<indexArray.length;i++){
var index=indexArray[i]+startIndex
re.lastIndex=index
var match=re.exec(value),txt=match[0],len=txt.length
startPos=doc.indexToPosition(index+offset-start+startPos.column,startPos.row),start=index+offset,end=index+len+offset,
endPos=doc.indexToPosition(end-start+startPos.column,startPos.row),range.start=startPos,range.end=endPos


var replacement=replaceFn(match)
txt!=replacement&&(doc.replace(range,replacement),offset+=replacement.length-txt.length)}updateCounter(),
cb&&cb()}),txtReplace.ace.saveHistory()}}function getReplaceFunction(options){function add(p){var last=fmtParts.length-1


p&&"string"==typeof p&&"string"==typeof fmtParts[last]?fmtParts[last]+=p:("number"==typeof p||p)&&fmtParts.push(p)

}var val=txtReplace.getValue()
if(options.preserveCase=chk.preserveCase.checked,"literal"==options.replaceMode)return function(){return val

}
for(var m,fmtParts=[],lut={n:"\n",t:"\t",r:"\r","&":0,U:-1,L:-2,E:-3,u:-4,l:-5},re=/\$([\$&\d])|\\([\\ULulEntr\d])/g,index=0;m=re.exec(val);){
add(val.substring(index,m.index)),index=re.lastIndex
var part=m[1]||m[2];/\d/.test(part)?part=options.regExp?parseInt(part,10):part:part in lut&&(part=lut[part]),
add(part)}return add(val.substr(index)),1!=fmtParts.length||"string"!=typeof fmtParts[0]||options.preserveCase?function(match){
for(var gChangeCase=0,changeCase=0,result="",i=0;i<fmtParts.length;i++){var ch=fmtParts[i]
if("number"==typeof ch){if(ch<0){switch(ch){case-1:gChangeCase=1
break
case-2:gChangeCase=2
break
case-3:gChangeCase=0
break
case-4:changeCase=1
break
case-5:changeCase=2}continue}ch=match[ch]||""}gChangeCase&&(ch=1===gChangeCase?ch.toUpperCase():ch.toLowerCase()),
changeCase&&ch&&(result+=1===changeCase?ch[0].toUpperCase():ch[0].toLowerCase(),ch=ch.substr(1),changeCase=0),
result+=ch}if(options.preserveCase){for(var input=match[0],replacement=result.split(""),i=Math.min(input.length,replacement.length);i--;){
var ch=input[i]
ch&&ch.toLowerCase()!=ch?replacement[i]=replacement[i].toUpperCase():replacement[i]=replacement[i].toLowerCase()

}result=replacement.join("")}return result}:function(){return fmtParts[0]}}function getAce(){var tab=tabs.focussedTab,editor=tab&&tab.editor


return editor&&editor.ace}function getSessionId(session){return(session.c9doc||session.c9session).name

}function addFindInRangeMarker(range,session){if(removeFindInRangeMarker(),range&&session&&!range.isEmpty()){
var start=new Range(0,0,range.start.row,range.start.column),end=new Range(range.end.row,range.end.column,Number.MAX_VALUE,Number.MAX_VALUE)


return start.id=session.addMarker(start,"findInRangeMarker",!0,"line",!0),end.id=session.addMarker(end,"findInRangeMarker",!0,"line",!0),
range.start=start.end=session.doc.createAnchor(start.end.row,start.end.column),range.end=end.start=session.doc.createAnchor(end.start.row,end.start.column),
marker={start:start,end:end,session:session}}}function removeFindInRangeMarker(reset){if(marker){var session=marker.session


session.removeMarker(marker.start.id),session.removeMarker(marker.end.id),marker.start.end.detach(),marker.end.start.detach(),
marker=null}}function updateFindInRangeMarker(e){var changeFocusInside=!1,isBlur="blur"==e.name,target=isBlur?e.toElement:e.fromElement


if(target&&target.$ext&&(changeFocusInside=winSearchReplace.$ext.contains(target.$ext)),!changeFocusInside){
var ace=getAce()
if(isBlur||!ace)return removeFindInRangeMarker()
e.fromElement&&e.fromElement.editor&&(e.fromElement.editor.ace==ace&&setStartPos(ace),execFind(!1,"highlight")),
startPos.searchRange&&startPos.id===getSessionId(ace.session)&&"click"!=e.name||setStartPos(ace),chk.searchSelection.checked?addFindInRangeMarker(getOptions().range,ace.session):removeFindInRangeMarker(),
e.name&&(currentRange=null)}}function initFindInRange(){winSearchReplace.addEventListener("focus",updateFindInRangeMarker),
winSearchReplace.addEventListener("blur",updateFindInRangeMarker)}var searchRow,txtFind,winSearchReplace,txtReplace,tooltipSearchReplace,divSearchCount,btnPrev,btnNext,btnReplace,btnReplaceAll,hbox,btnCollapse,currentRange,lastSearchOptions,timer,marker,Plugin=imports.Plugin,settings=imports.settings,ui=imports.ui,menus=imports.menus,layout=imports.layout,commands=imports.commands,tooltip=imports.tooltip,tabs=imports.tabManager,apf=imports.apf,css=require("text!./findreplace.css"),skin=require("text!./skin.xml"),markup=require("text!./findreplace.xml"),lib=require("plugins/c9.ide.find.replace/libsearch"),asyncSearch=require("./async_search"),Range=require("ace/range").Range,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),libsearch=lib(settings,execFind,toggleDialog,restore,toggleOption),chk={},startPos={},loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,asyncSearch.terminateWorker(),searchRow=txtFind=winSearchReplace=txtReplace=null,
tooltipSearchReplace=divSearchCount=null,btnPrev=btnNext=btnReplace=btnReplaceAll=hbox=btnCollapse=null,
currentRange=lastSearchOptions=timer=null,startPos={}}),plugin.freezePublicAPI({get aml(){return winSearchReplace

},toggle:toggleDialog,restore:restore,findNext:findNext,replace:replace,replaceAll:replaceAll}),register(null,{
findreplace:plugin})}return main.consumes=["Plugin","settings","ui","layout","menus","tabManager","commands","tooltip","apf"],
main.provides=["findreplace"],main})


define("text!plugins/c9.ide.find.infiles/findinfiles.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:label id="tooltipSearchInFiles" skin="tooltipLabel" visible="false" />\n    <a:bar id="winSearchInFiles" skinset="searchreplace" focussable="container" zindex="1000" minheight="0" visible="false" height="0">\n        <a:hbox class="find-and-replace" padding="5" edge="5">\n            <a:hbox class="grouped_checkbox_holder" align="start" height="27">\n                <a:checkbox id="chkSFRegEx" value="state/findinfiles/@regex" class="chkRegEx" label="Regular Expressions" skin="grouped_checkbox" width="27" />\n                <a:checkbox id="chkSFMatchCase" value="state/findinfiles/@matchcase" class="chkMatchCase" label="Match Case" skin="grouped_checkbox" width="27" />\n                <a:checkbox id="chkSFWholeWords" value="state/findinfiles/@wholeword" class="chkWholeWords" label="Whole Words" skin="grouped_checkbox" width="27" />\n            </a:hbox>\n            <a:hbox class="grouped_checkbox_holder" align="start" height="27">\n                <a:checkbox id="chkSFConsole" value="state/findinfiles/@console" class="chkConsole" label="Show in Console" skin="grouped_checkbox" width="28" />\n            </a:hbox>\n            <a:codebox id="txtSFFind" tabindex="1000" flex="3" skin="searchbox" initial-message="Find in Files" focusselect="true" />\n            <a:button id="btnSFFind" focussable="false" skin="blackbutton" width="50" height="27">Find</a:button>\n              \n            <a:codebox id="txtSFPatterns" tabindex="1001" skin="searchbox" width="80" initial-message="*.*, -.*" label="Wildcards accepted. Prefix with - to exclude a pattern. Use , to split patterns" focusselect="true"/>\n            <a:dropdown id="ddSFSelection" skin="dropdown-dark-glossy" height="27" minwidth="80" value="selection" maxitems="10">\n                <a:item caption="Workspace" value="workspace" />\n                <a:item caption="Project" value="project" />\n                <a:item caption="Selection" value="selection" />\n                <a:item caption="Favorites" value="favorites" />\n                <a:item caption="Active File" value="active" />\n                <a:item caption="Open Files" value="open" />\n            </a:dropdown>\n              \n            <a:codebox id="txtSFReplace" tabindex="1002" skin="searchbox" flex="1" initial-message="Replace With" focusselect="true" label="$0-9 will insert the text of your capturing groups." />\n            <a:button id="btnSFReplaceAll" focussable="false" skin="blackbutton" width="80" height="27">Replace</a:button>\n            <a:button id="btnCollapse" skin="btn_console_open"  state="true" height="27" />\n        </a:hbox>\n    </a:bar>\n</a:application>')


define("ace/mode/c9search_highlight_rules",[],function(require,exports,module){"use strict"
function safeCreateRegexp(source,flag){try{return new RegExp(source,flag)}catch(e){}}var oop=require("../lib/oop"),lang=require("../lib/lang"),TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,C9SearchHighlightRules=function(){
this.$rules={start:[{tokenNames:["c9searchresults.constant.numeric","c9searchresults.text","c9searchresults.text","c9searchresults.keyword"],
regex:/(^\s+[0-9]+)(:)(\d*\s?)([^\r\n]+)/,onMatch:function(val,state,stack){var values=this.splitRegex.exec(val),types=this.tokenNames,tokens=[{
type:types[0],value:values[1]},{type:types[1],value:values[2]}]
values[3]&&(" "==values[3]?tokens[1]={type:types[1],value:values[2]+" "}:tokens.push({type:types[1],value:values[3]
}))
var m,regex=stack[1],str=values[4],last=0
if(regex&&regex.exec)for(regex.lastIndex=0;m=regex.exec(str);){var skipped=str.substring(last,m.index)


if(last=regex.lastIndex,skipped&&tokens.push({type:types[2],value:skipped}),m[0])tokens.push({type:types[3],
value:m[0]})
else if(!skipped)break}return last<str.length&&tokens.push({type:types[2],value:str.substr(last)}),tokens

}},{regex:"^Searching for [^\\r\\n]*$",onMatch:function(val,state,stack){var parts=val.split("")
if(parts.length<3)return"text"
var options,search,replace,i=0,tokens=[{value:parts[i++]+"'",type:"text"},{value:search=parts[i++],type:"text"
},{value:"'"+parts[i++],type:"text"}]
for(" in"!==parts[2]&&(replace=parts[i],tokens.push({value:"'"+parts[i++]+"'",type:"text"},{value:parts[i++],
type:"text"})),tokens.push({value:" "+parts[i++]+" ",type:"text"}),parts[i+1]?(options=parts[i+1],tokens.push({
value:"("+parts[i+1]+")",type:"text"}),i+=1):i-=1;i++<parts.length;)parts[i]&&tokens.push({value:parts[i],
type:"text"})
search&&(/regex/.test(options)||(search=lang.escapeRegExp(search)),/whole/.test(options)&&(search="\\b"+search+"\\b"))


var regex=search&&safeCreateRegexp("("+search+")",/ sensitive/.test(options)?"g":"ig")
return regex&&(stack[0]=state,stack[1]=regex),tokens}},{regex:"^(?=Found \\d+ matches)",token:"text",
next:"numbers"},{token:"string",regex:"^\\S:?[^:]+",next:"numbers"}],numbers:[{regex:"\\d+",token:"constant.numeric"
},{regex:"$",token:"text",next:"start"}]},this.normalizeRules()}
oop.inherits(C9SearchHighlightRules,TextHighlightRules),exports.C9SearchHighlightRules=C9SearchHighlightRules

})


define("ace/mode/matching_brace_outdent",[],function(require,exports,module){"use strict"
var Range=require("../range").Range,MatchingBraceOutdent=function(){};(function(){this.checkOutdent=function(line,input){
return!!/^\s+$/.test(line)&&/^\s*\}/.test(input)},this.autoOutdent=function(doc,row){var line=doc.getLine(row),match=line.match(/^(\s*\})/)


if(!match)return 0
var column=match[1].length,openBracePos=doc.findMatchingBracket({row:row,column:column})
if(!openBracePos||openBracePos.row==row)return 0
var indent=this.$getIndent(doc.getLine(openBracePos.row))
doc.replace(new Range(row,0,row,column-1),indent)},this.$getIndent=function(line){return line.match(/^\s*/)[0]

}}).call(MatchingBraceOutdent.prototype),exports.MatchingBraceOutdent=MatchingBraceOutdent})


define("ace/mode/folding/fold_mode",[],function(require,exports,module){"use strict"
var Range=require("../../range").Range,FoldMode=exports.FoldMode=function(){};(function(){this.foldingStartMarker=null,
this.foldingStopMarker=null,this.getFoldWidget=function(session,foldStyle,row){var line=session.getLine(row)


return this.foldingStartMarker.test(line)?"start":"markbeginend"==foldStyle&&this.foldingStopMarker&&this.foldingStopMarker.test(line)?"end":""

},this.getFoldWidgetRange=function(session,foldStyle,row){return null},this.indentationBlock=function(session,row,column){
var re=/\S/,line=session.getLine(row),startLevel=line.search(re)
if(startLevel!=-1){for(var startColumn=column||line.length,maxRow=session.getLength(),startRow=row,endRow=row;++row<maxRow;){
var level=session.getLine(row).search(re)
if(level!=-1){if(level<=startLevel)break
endRow=row}}if(endRow>startRow){var endColumn=session.getLine(endRow).length
return new Range(startRow,startColumn,endRow,endColumn)}}},this.openingBracketBlock=function(session,bracket,row,column,typeRe){
var start={row:row,column:column+1},end=session.$findClosingBracket(bracket,start,typeRe)
if(end){var fw=session.foldWidgets[end.row]
return null==fw&&(fw=session.getFoldWidget(end.row)),"start"==fw&&end.row>start.row&&(end.row--,end.column=session.getLine(end.row).length),
Range.fromPoints(start,end)}},this.closingBracketBlock=function(session,bracket,row,column,typeRe){var end={
row:row,column:column},start=session.$findOpeningBracket(bracket,end)
if(start)return start.column++,end.column--,Range.fromPoints(start,end)}}).call(FoldMode.prototype)})


define("ace/mode/folding/c9search",[],function(require,exports,module){"use strict"
var oop=require("../../lib/oop"),Range=require("../../range").Range,BaseFoldMode=require("./fold_mode").FoldMode,FoldMode=exports.FoldMode=function(){}


oop.inherits(FoldMode,BaseFoldMode),function(){this.foldingStartMarker=/^(\S.*:|Searching for.*)$/,this.foldingStopMarker=/^(\s+|Found.*)$/,
this.getFoldWidgetRange=function(session,foldStyle,row){var lines=session.doc.getAllLines(row),line=lines[row],level1=/^(Found.*|Searching for.*)$/,level2=/^(\S.*:|\s*)$/,re=level1.test(line)?level1:level2,startRow=row,endRow=row


if(this.foldingStartMarker.test(line)){for(var i=row+1,l=session.getLength();i<l&&!re.test(lines[i]);i++);
endRow=i}else if(this.foldingStopMarker.test(line)){for(var i=row-1;i>=0&&(line=lines[i],!re.test(line));i--);
startRow=i}if(startRow!=endRow){var col=line.length
return re===level1&&(col=line.search(/\(Found[^)]+\)$|$/)),new Range(startRow,col,endRow,0)}}}.call(FoldMode.prototype)

})


define("ace/mode/c9search",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),TextMode=require("./text").Mode,C9SearchHighlightRules=require("./c9search_highlight_rules").C9SearchHighlightRules,MatchingBraceOutdent=require("./matching_brace_outdent").MatchingBraceOutdent,C9StyleFoldMode=require("./folding/c9search").FoldMode,Mode=function(){
this.HighlightRules=C9SearchHighlightRules,this.$outdent=new MatchingBraceOutdent,this.foldingRules=new C9StyleFoldMode

}
oop.inherits(Mode,TextMode),function(){this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line)


return indent},this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)

},this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)},this.$id="ace/mode/c9search"

}.call(Mode.prototype),exports.Mode=Mode})


define("plugins/c9.ide.find.infiles/findinfiles",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0,commands.addCommand({name:"searchinfiles",hint:"search for a string through all files in the current workspace",
bindKey:{mac:"Shift-Command-F",win:"Ctrl-Shift-F"},exec:function(){toggleDialog(1)}},plugin),menus.addItemByPath("Find/~",new ui.divider,1e4,plugin),
menus.addItemByPath("Find/Find in Files...",new ui.item({command:"searchinfiles"}),2e4,plugin),settings.on("read",function(e){
settings.setDefaults("state/findinfiles",[["regex","false"],["matchcase","false"],["wholeword","false"],["console","true"],["scope","selection"]]),
settings.setDefaults("user/findinfiles",[["consolelaunch","false"],["fullpath","false"],["scrolldown","false"],["project","/"],["clear","true"]])

},plugin),prefs.add({General:{"Find in Files":{position:30,"Search In This Path When 'Project' Is Selected":{
type:"textbox",position:100,path:"user/findinfiles/@project"},"Show Full Path in Results":{type:"checkbox",
position:100,path:"user/findinfiles/@fullpath"},"Clear Results Before Each Search":{type:"checkbox",position:100,
path:"user/findinfiles/@clear"},"Scroll Down as Search Results Come In":{type:"checkbox",position:100,
path:"user/findinfiles/@scrolldown"},"Open Files when Navigating Results with \u2193 \u2191":{type:"checkbox",position:100,
path:"user/findinfiles/@consolelaunch"}}}},plugin),tabs.on("focus",function(e){"ace"!=e.tab.editor.type||e.tab.document.meta.searchResults||(lastActiveAce=e.tab)

},plugin)
var tab=tabs.focussedTab
lastActiveAce=tab&&"ace"==tab.editor.type?tab:null,tree.getElement("mnuCtxTree",function(mnuCtxTree){
menus.addItemToMenu(mnuCtxTree,new ui.item({match:"file|folder|project",command:"searchinfiles",caption:"Search In This Folder",
onclick:function(){draw(),ddSFSelection.setAttribute("value","selection")}}),1030,plugin)}),SearchMode.prototype.attachToSession=initC9SearchSession

}function draw(){function resize(){if(!(first++<2)){var h=winSearchInFiles.$ext.scrollHeight
Math.abs(winSearchInFiles.height-h)<1||(winSearchInFiles.setHeight(h),winSearchInFiles.$ext.style.height="",
ui.layout.forceResize(null,!0))}}function animate(e){control&&control.stop&&control.stop(),"focus"==e.name?(e.fromElement!=control.toShrink&&(control.toShrink=null),
control.toGrow=e.currentTarget):(control.toShrink=e.currentTarget,control.toGrow=null),control.toShrink!=control.toGrow&&(control.timer=control.timer||setTimeout(function(){
control.timer=null,startAnimation()}))}function startAnimation(){function applyTween(amlNode,grow){if(amlNode){
var domNode=amlNode.$ext,value=grow?3:1,type="boxFlex"
amlNode!=txtSFPatterns?domNode=domNode.parentNode:(value=1==value?0:value,value||(domNode.style.flexBasis="auto"),
type="boxFlexGrow"),apf.tween.single(domNode,{type:type,from:domNode.style[apf.CSS_FLEX_PROP]||(grow?1:3),
to:value,anim:apf.tween.easeOutCubic,control:control,steps:15,interval:1,onfinish:function(){ui.layout.forceResize(null,!0)

}})}}applyTween(control.toGrow,!0),applyTween(control.toShrink,!1)}if(!drawn){drawn=!0,searchRow=layout.findParent(plugin),
ui.insertMarkup(null,markup,plugin),txtSFFind=plugin.getElement("txtSFFind"),txtSFPatterns=plugin.getElement("txtSFPatterns"),
chkSFMatchCase=plugin.getElement("chkSFMatchCase"),chkSFRegEx=plugin.getElement("chkSFRegEx"),txtSFReplace=plugin.getElement("txtSFReplace"),
chkSFWholeWords=plugin.getElement("chkSFWholeWords"),chkSFConsole=plugin.getElement("chkSFConsole"),ddSFSelection=plugin.getElement("ddSFSelection"),
btnSFFind=plugin.getElement("btnSFFind"),winSearchInFiles=plugin.getElement("winSearchInFiles"),btnSFReplaceAll=plugin.getElement("btnSFReplaceAll"),
btnCollapse=plugin.getElement("btnCollapse"),tooltipSearchInFiles=plugin.getElement("tooltipSearchInFiles"),
btnSFFind.on("click",function(){execFind()}),btnSFReplaceAll.on("click",function(){execReplace()}),btnCollapse.on("click",function(){
toggleDialog(-1)})
var first=0
txtSFFind.ace.renderer.on("autosize",resize),txtSFReplace.ace.renderer.on("autosize",resize)
var control={}
txtSFReplace.on("focus",animate),txtSFReplace.on("blur",animate),txtSFPatterns.on("focus",animate),txtSFPatterns.on("blur",animate),
commands.addCommand({name:"hidesearchinfiles",bindKey:{mac:"ESC",win:"ESC"},isAvailable:function(editor){
return winSearchInFiles.visible},exec:function(env,args,request){toggleDialog(-1)}},plugin),winSearchInFiles.on("prop.visible",function(e){
e.value?(tree.on("select",setSearchSelection),setSearchSelection()):tree&&tree.off("select",setSearchSelection)

}),txtSFFind.ace.session.on("change",function(){chkSFRegEx.checked&&libsearch.checkRegExp(txtSFFind,tooltipSearchInFiles,winSearchInFiles)

}),libsearch.addSearchKeyboardHandler(txtSFFind,"searchfiles")
var kb=libsearch.addSearchKeyboardHandler(txtSFReplace,"replacefiles")
kb.bindKeys({"Return|Shift-Return":function(){execReplace()}}),kb=libsearch.addSearchKeyboardHandler(txtSFPatterns,"searchwhere")


var tt=document.body.appendChild(tooltipSearchInFiles.$ext)
chkSFRegEx.on("prop.value",function(e){libsearch.setRegexpMode(txtSFFind,ui.isTrue(e.value))}),libsearch.setRegexpMode(txtSFFind,chkSFRegEx.checked),
libsearch.setReplaceFieldMode(txtSFReplace,"jsOnly")
var cbs=winSearchInFiles.selectNodes("//a:checkbox")
cbs.forEach(function(cb){tooltip.add(cb.$ext,{message:cb.label,width:"auto",timeout:0,tooltip:tt,animate:!1,
getPosition:function(){var pos=ui.getAbsolutePosition(winSearchInFiles.$ext),left=cb.$ext.getBoundingClientRect().left,top=pos[1]


return[left,top-16]}},plugin)}),[txtSFReplace,txtSFPatterns].forEach(function(node){tooltip.add(node.$ext,{
message:node.label,width:"auto",timeout:0,tooltip:tt,animate:!1,getPosition:function(){var pos=ui.getAbsolutePosition(winSearchInFiles.$ext),left=node.$ext.getBoundingClientRect().left,top=pos[1]


return[left,top-16]}},plugin)}),ddSFSelection.setAttribute("value",settings.get("state/findinfiles/@scope")),
ddSFSelection.on("afterselect",function(){settings.set("state/findinfiles/@scope",ddSFSelection.value)

}),c9.on("stateChange",function(e){e.state&c9.STORAGE?winSearchInFiles.enable():(winSearchInFiles.disable(),
btnCollapse.enable())},plugin),emit("draw")}}function setSearchSelection(e){var path,node,name,parts
tree.selected?(node=e&&e.nodes[0]||tree.selectedNode,parts=node.path.split("/"),name="",name=node.isFolder?parts[parts.length-1]:parts[parts.length-2],
name.length>25&&(name=name.substr(0,22)+"...")):(path=settings.get("user/tree_selection/@path")||"/",
parts=path.split("/"),(name=parts.pop()).indexOf(".")>-1&&(name=parts.pop())),ddSFSelection.childNodes[1].setAttribute("caption","Project (excludes .gitignore'd)"),
ddSFSelection.childNodes[2].setAttribute("caption","Selection: "+(name||"/")),"selection"==ddSFSelection.value&&(ddSFSelection.setAttribute("value",""),
ddSFSelection.setAttribute("value","selection"))}function getSelectedTreePath(){var node=tree.selectedNode


return node.isFolder||(node=node.parent||node),node.path}function toggleDialog(force,isReplace,noselect,callback){
if(draw(),tooltipSearchInFiles.$ext.style.display="none",!force&&!winSearchInFiles.visible||force>0){
var tab=tabs.focussedTab,editor=tab&&tab.editor
if(editor&&"ace"==editor.type){var ace=editor.ace
ace.selection.isEmpty()||ace.selection.isMultiLine()||txtSFFind.setValue(ace.getCopyText())}if(winSearchInFiles.visible&&2!=force)return txtSFFind.focus(),
void txtSFFind.select()
layout.setFindArea(winSearchInFiles,{},callback),position=-1,txtSFFind.focus(),txtSFFind.select(),btnCollapse.setValue(1)

}else winSearchInFiles.visible&&(txtSFFind.getValue()&&libsearch.saveHistory(txtSFFind.getValue(),"searchfiles"),
!noselect&&tabs.focussedTab&&tabs.focusTab(tabs.focussedTab),layout.setFindArea(null,{},callback),btnCollapse.setValue(0))


return!1}function shouldSearchVCSIgnores(){return"project"!=ddSFSelection.value}function getOptions(){
return{query:txtSFFind.getValue().replace(/\\n/g,"\n"),pattern:txtSFPatterns.getValue(),casesensitive:chkSFMatchCase.checked,
regexp:chkSFRegEx.checked,replaceAll:!1,replacement:txtSFReplace.getValue(),wholeword:chkSFWholeWords.checked,
path:getTargetFolderPath(),addVCSIgnores:!shouldSearchVCSIgnores()}}function getTargetFolderPath(){var path


if("selection"==ddSFSelection.value){if(!tree.selected){var paths=settings.getJson("user/tree_selection")


paths&&(path=paths[0])||(path="/")}path||(path=getSelectedTreePath())}else path="project"==ddSFSelection.value?settings.get("user/findinfiles/@project")||"/":"/"


return path}function execReplace(options){return options?(options.replaceAll=!0,void save.saveAll({skipNewFiles:!0
},function(){execFind(options)})):(options=getOptions(),void(options.replacement||txtSFReplace.ace.isFocused()?execReplace(options):question("Replace in files","Replace all occurrences of "+options.query+" in "+options.path,"Do you want continue? (This change cannot be undone)",function(all){
execReplace(options)},function(all,cancel){},{all:!1,yes:"Replace Text",no:"Cancel"})))}function execFind(options,cb){
cb&&"function"!=typeof cb&&(cb=void 0),options=options||getOptions(),makeSearchResultsPanel(function(err,tab){
if(err)return console.error("Error creating search panel")
var session=tab.document.getSession(),acesession=session.session,doc=acesession.getDocument()
if(acesession.mergeUndoDeltas=!1,settings.getBool("user/findinfiles/@clear")&&doc.setValue(""),appendLines(doc,messageHeader(options.path,options)),
doc.lastHeaderRow=doc.getLength()-3,"selection"==ddSFSelection.value){var selection=tree.selection
selection.length>1&&(options.startPaths=selection,options.path="")}else if("active"==ddSFSelection.value){
var filename=lastActiveAce&&lastActiveAce.isActive()&&lastActiveAce.path
if(!filename)return void appendLines(doc,"Error: There is no active file. Focus the editor you want to search and try again.\n")


options.startPaths=[filename]}else if("open"==ddSFSelection.value){var files=[]
if(tabs.getTabs().forEach(function(tab){var path=tab.path
path&&"/.c9/searchresults"!=path&&files.push(path)}),files.length<1)return void appendLines(doc,"Error: There are no open files. Open some files and try again.\n")


options.startPaths=files}else if("favorites"==ddSFSelection.value&&(options.startPaths=favs.getFavoritePaths(),
!options.startPaths.length))return void appendLines(doc,"Error: There are no favorites. Add a favorite folder and try again.\n")


tab.classList.remove("changed"),tab.classList.remove("error"),tab.classList.add("loading")
var reBase=!settings.getBool("user/findinfiles/@fullpath")&&new RegExp("^"+util.escapeRegExp(find.basePath),"gm")


currentProcess&&(currentProcess.kill(),currentProcess.stdout.removeAllListeners("data"),currentProcess.stdout.removeAllListeners("end")),
find.findFiles(options,function(err,stream,process){if(err)return acesession.mergeUndoDeltas=!0,appendLines(doc,"Error executing search: "+err.message),
tab.classList.remove("loading"),tab.classList.add("error"),cb&&cb(err)
currentProcess=process
var firstRun=!0
stream.on("data",function(chunk){if(firstRun&&!settings.getBool("user/findinfiles/@scrolldown")){var currLength=doc.getLength()-3


doc.ace.scrollToLine(currLength,!1,!0),firstRun=!1}acesession.mergeUndoDeltas=!0,appendLines(doc,reBase?chunk.replace(reBase,""):chunk)

}),stream.on("end",function(data){appendLines(doc,"\n",tab),tab.classList.remove("loading"),tab.classList.add("changed"),
currentProcess=null
for(var endRow=doc.getLength(),i=1;i<5;i++){var line=doc.getLine(endRow-i)
if(line&&/Found \d+/.test(line)){var headerRow=doc.lastHeaderRow
acesession.mergeUndoDeltas=!0,doc.insertInLine({row:headerRow,column:doc.getLine(headerRow).length}," ("+line.trim()+")")


break}}cb&&cb()})}),libsearch.saveHistory(options.query,"searchfiles"),position=0})}function initC9SearchSession(acesession){
if(!acesession.searchInited){var doc=acesession.doc
acesession.searchInited=!0
var dblclick=function(){launchFileFromSearch(doc.ace)},onEnter=function(e){13==e.keyCode&&(e.altKey===!1?launchFileFromSearch(doc.ace,!e.shiftKey):doc.ace.insert("\n"),
e.preventDefault(),e.stopPropagation())},onKeyup=function(e){if(e.keyCode>=37&&e.keyCode<=40&&settings.getBool("user/findinfiles/@consolelaunch"))return launchFileFromSearch(doc.ace,!1),
!1},updateEditorEventListeners=function(e){e.oldEditor&&(e.oldEditor.container.removeEventListener("dblclick",dblclick),
e.oldEditor.container.removeEventListener("keydown",onEnter),e.oldEditor.container.removeEventListener("keyup",onKeyup)),
e.editor&&(e.editor.container.addEventListener("keydown",onEnter),e.editor.container.addEventListener("keyup",onKeyup),
e.editor.container.addEventListener("dblclick",dblclick),doc.ace=e.editor)}
acesession.on("changeEditor",updateEditorEventListeners)
var e=acesession.c9doc?acesession.c9doc.tab.editor:doc
e&&e.ace&&e.ace.session===acesession&&updateEditorEventListeners({editor:e.ace})}}function launchFileFromSearch(editor,focus){
void 0===focus&&(focus=!0)
for(var session=editor.getSession(),currRow=editor.getCursorPosition().row,pathRow=currRow+1;pathRow-- >0;){
var token=session.getTokenAt(pathRow,0)
if(token&&token.type.indexOf("string")!=-1)break}var path=editor.getSession().getLine(pathRow)
if(":"===path.charAt(path.length-1)&&(path=path.slice(0,-1).replace(/[\\\/]+/g,"/").replace(reBasePath,"").replace(reHome,"~"),
/[\/~]/.test(path.charAt(0))||(path="/"+path),path)){var jump=session.getLine(currRow).match(/\s+(\d+):(\d*)/)


if(jump){var row=parseInt(jump[1],10)-1
if(jump[2])jump={row:row,column:parseInt(jump[2],10)-1}
else{var range=editor.getSelectionRange(),offset=jump[0].length+1
jump={row:row,column:range.start.column-offset,select:{row:row,column:range.end.column-offset}}}}tabs.open({
path:path,active:!0,focus:focus,document:{ace:{jump:jump}}},function(err,tab){if(err)return console.error(err)

})}}function appendLines(doc,content){content&&(content.length||content.count)&&("string"!=typeof content&&(content=content.join("\n")),
content.length>0&&doc.insert({row:doc.getLength(),column:0},content))}function messageHeader(path,options){
var optionsDesc=[]
options.regexp===!0&&optionsDesc.push("regexp"),options.casesensitive===!0&&optionsDesc.push("case sensitive"),
options.wholeword===!0&&optionsDesc.push("whole word"),optionsDesc=optionsDesc.length>0?""+optionsDesc.join(", ")+"":""


var replacement=""
return options.replaceAll&&(replacement=", replaced as "+trim(options.replacement)),"workspace"==ddSFSelection.value&&(path="your entire workspace"),
"project"==ddSFSelection.value?path="project files (excludes .gitignore'd files)":"active"==ddSFSelection.value?path="the active file":"open"==ddSFSelection.value?path="all open files":"favorites"==ddSFSelection.value&&(path="all favorite folders"),
"Searching for "+trim(options.query)+replacement+" in"+path+""+optionsDesc+"\n\n"}function trim(str){
return/.*/.exec(str)[0]}function makeSearchResultsPanel(callback){var tab=tabs.findTab("/.c9/searchresults")


if(tab)tabs.focusTab(tab),callback(null,tab)
else{var root=chkSFConsole.checked?c9console:tabs
root.open({path:"/.c9/searchresults",focus:!0,document:{title:"Search Results",meta:{searchResults:!0,
ignoreSave:!0,newfile:!0},ace:{customSyntax:"c9search",options:{}}},editorType:"ace",name:"searchResults"
},function(err,tab,done){tab.on("unload",function(){currentProcess&&currentProcess.kill()}),tab.document.value=" ",
callback(err,tab),"function"==typeof done&&done()})}}var c9=imports.c9,util=imports.util,Plugin=imports.Plugin,settings=imports.settings,ui=imports.ui,menus=(imports.anims,
imports.menus),commands=imports.commands,favs=imports["tree.favorites"],c9console=imports.console,layout=imports.layout,tooltip=imports.tooltip,tabs=imports.tabManager,tree=imports.tree,prefs=imports.preferences,find=imports.find,save=imports.save,question=imports["dialog.question"].show,apf=imports.apf,markup=require("text!./findinfiles.xml"),lib=require("plugins/c9.ide.find.replace/libsearch"),SearchMode=require("ace/mode/c9search").Mode,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),libsearch=lib(settings,execFind,toggleDialog,function(){})


lib.findinfiles=plugin
var position,lastActiveAce,txtSFFind,txtSFPatterns,chkSFMatchCase,chkSFRegEx,txtSFReplace,chkSFWholeWords,searchRow,chkSFConsole,winSearchInFiles,ddSFSelection,tooltipSearchInFiles,btnSFFind,btnSFReplaceAll,btnCollapse,currentProcess,loaded=!1,drawn=!1,basePath=find.basePath.replace(/[\\\/]+/g,"/"),reBasePath=new RegExp("^"+util.escapeRegExp(basePath)),reHome=new RegExp("^"+util.escapeRegExp(c9.home))


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({get aml(){return winSearchInFiles},
toggle:toggleDialog,execFind:execFind}),register(null,{findinfiles:plugin})}return main.consumes=["Plugin","c9","util","settings","ui","layout","find","anims","menus","tabManager","commands","tooltip","tree","apf","console","preferences","dialog.question","tree.favorites","save"],
main.provides=["findinfiles"],main})


define("text!plugins/c9.ide.find/nakignore-template",[],"*~backup-*\n.c9revisions\n.c9\n.git\n.svn\n.DS_Store\n.bzr\n.cdv\n~.dep\n~.dot\n~.nib\n~.plst\n.hg\n.pc\n*.min.js\n.nakignore\n/dev")


define("plugins/c9.ide.find/install",[],function(require,exports,module){module.exports=function(session,options){
session.install({name:"Nak",description:"Fast file searches for Cloud9",cwd:"~/.c9"},{npm:"https://github.com/c9/nak/tarball/c9"
}),session.start()},module.exports.version=1})


define("plugins/c9.ide.find/find.nak",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(callback){loaded||(loaded=!0,prefs.add({Project:{
"Find in Files":{position:300,"Ignore these files":{name:"txtPref",type:"textarea",width:150,height:130,
rowheight:155,position:1e3},"Maximum number of files to search (in 1000)":{type:"spinner",path:"project/find.nak/@searchLimit",
min:"20",max:"500",position:10500}}}},plugin),settings.on("read",function(){settings.getBool("state/nak/@installed")||fs.writeFile(MAIN_IGNORE,TEMPLATE,function(){
settings.set("state/nak/@installed",!0)}),settings.migrate("user/find.nak","project/find.nak"),settings.setDefaults("project/find.nak",[["searchLimit",100]])

}),plugin.getElement("txtPref",function(txtPref){var ta=txtPref.lastChild
ta.on("afterchange",function(e){fs.writeFile(MAIN_IGNORE,e.value,function(){})}),fs.readFile(MAIN_IGNORE,function(err,data){
return err&&(data=TEMPLATE),ta.setValue(data),!1})},plugin))}function addLimit(args,options){args.limit=options.limit||1e3*settings.getNumber("project/find.nak/@searchLimit")

}function resolvePaths(args){if(args.startPaths.length){args.path=args.path.replace(/\/?$/,"/"),args.startPaths=args.startPaths.map(function(p){
return p.replace(/^~?\//,function(m){return 2===m.length?c9.home:args.path})}),"/"!=args.path&&(args.path="/")


var re=new RegExp("^("+args.startPaths.map(util.escapeRegExp).join("|")+").+$")
args.startPaths=args.startPaths.filter(function(p){return!re.test(p)})}}function assembleFilelistCommand(options){
var args={list:!0}
return args.pathToNakignore=options.local?MAIN_IGNORE:join(options.base,MAIN_IGNORE),options.hidden&&(args.hidden=!0),
args.path=options.normalizedPath,args.follow=!0,options.startPaths&&(args.startPaths=options.startPaths,
resolvePaths(args)),addLimit(args,options),options.useHttp?args:["--json",JSON.stringify(args)]}function assembleSearchCommand(options){
var args={}
args.pathToNakignore=options.local?MAIN_IGNORE:join(options.base,MAIN_IGNORE),options.casesensitive||(args.ignoreCase=!0),
options.wholeword&&(args.wordRegexp=!0),options.hidden&&(args.hidden=!0),options.regexp||(args.literal=!0),
options.addVCSIgnores&&(args.addVCSIgnores=!0)
var includes=[],excludes=[]
return options.pattern&&options.pattern.split(",").forEach(function(p){p=p.trim(),/^\-/.test(p)?excludes.push(p.substring(1)):includes.push(p)

}),IGNORE&&excludes.push(IGNORE),includes.length&&(args.pathInclude=includes.join(", ")),excludes.length&&(args.ignore=excludes.join(", ")),
args.query=options.query,options.replaceAll&&(args.replacement=options.replacement),args.path=options.normalizedPath,
args.follow=!0,options.startPaths&&(args.startPaths=options.startPaths,resolvePaths(args)),addLimit(args,options),
["--json",JSON.stringify(args)]}function list(options,callback){if(installer.isInstalled("c9.ide.find",function(){
list(options,callback)})){if(options.uri=options.path||"",options.normalizedPath="~"==options.path.charAt(0)?options.path.replace(/^~/,c9.home):join(options.base||"",options.path||""),
options.useHttp=USEHTTP&&options.buffer,!options.normalizedPath)return callback(new Error("Invalid Path"))


var args=assembleFilelistCommand(options)
return args?void(options.useHttp?(delete args.list,delete args.follow,vfs.rest("~/.c9/file.listing",{
method:"GET",query:args,timeout:12e4},function(err,data,res){err&&412==err.code&&commands.exec("showinstaller",null,{
packages:["c9.ide.find"]}),callback(err,data)})):execute(args,function(err,stdout,stderr,process){callback(err,stdout,stderr,process)

})):callback(new Error("Invalid Arguments"))}}function find(options,callback){if(installer.isInstalled("c9.ide.find",function(){
find(options,callback)})){if(options.path||(options.path=""),options.uri=options.path,options.normalizedPath="~"==options.path.charAt(0)?options.path.replace(/^~/,c9.home):join(options.base||"",options.path||""),
!options.normalizedPath)return callback(new Error("Invalid Path"))
var args=assembleSearchCommand(options)
return args?void execute(args,function(err,stdout,stderr,process){callback(err,stdout,stderr,process)

}):callback(new Error("Invalid Arguments"))}}function execute(args,callback){NODE&&args.unshift(NAK),
proc.spawn(NODE||NAK,{args:args},function(err,process){return err?callback(err):void callback(null,process.stdout,process.stderr,process)

})}var Plugin=imports.Plugin,settings=imports.settings,installer=imports.installer,prefs=imports.preferences,proc=imports.proc,vfs=imports.vfs,fs=imports.fs,c9=imports.c9,util=imports.util,commands=imports.commands,join=require("path").join,plugin=new Plugin("Ajax.org",main.consumes),USEHTTP=options.useHttp,IGNORE=options.ignore,MAIN_IGNORE=(options.local?options.installPath:"/.c9")+"/.nakignore",TEMPLATE=require("text!./nakignore-template")+"\n"+(options.ignore||""),NAK=options.nak||"~/.c9/node_modules/nak/bin/nak",NODE=options.node


NODE&&Array.isArray(NODE)&&(NODE=NODE[0]),installer.createSession("c9.ide.find",require("./install"))


var loaded=!1
plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({
find:find,list:list}),register(null,{finder:plugin})}return main.consumes=["Plugin","preferences","ext","fs","proc","settings","vfs","c9","util","installer","commands"],
main.provides=["finder"],main})


define("plugins/c9.ide.find/find",[],function(require,exports,module){function main(options,imports,register){
function getFileList(options,callback){options.base||(options.base=basePath)
var index=(options.base?options.base+"/":"")+options.path
state[index]||(state[index]={queue:[],cached:"",cacheTime:null,retrieving:!1})
var _=state[index]
if(_.cached&&!options.nocache&&new Date-_.cacheTime<36e5)return callback(null,_.cached)
if(_.queue.push([options,callback]),!_.retrieving){if(emit("fileList",options)===!1)return callback(new Error("Cancelled"))


_.cached="",_.retrieving=!0,finder.list(options,function(err,stdout,stderr,process){function done(err,data){
if(_.retrieving=!1,_.cached=data,options.base&&"/"!=options.base){var rgx=new RegExp("^"+util.escapeRegExp(options.base),"gm")


_.cached=_.cached.replace(rgx,"")}else"/"==options.base&&"/"!=_.cached[0]&&(_.cached=_.cached.trim().replace(/^\/*/gm,"/"))


needsBuffer.forEach(function(cb){cb(err,_.cached)})}err||(_.cacheTime=new Date)
var needsBuffer=[]
if(_.queue.forEach(function(iter){err||!iter[0].buffer?iter[1](err,stderr):needsBuffer.push(iter[1])}),
_.queue=[],"string"==typeof stdout)return void done(err,stdout)
if(!err&&needsBuffer){_.cached="",stdout.on("data",function(lines){_.cached+=lines})
var errCached=""
stderr.on("data",function(lines){errCached+=lines}),process.on("exit",function(code){done(code?"Error "+code+"\n"+errCached:null,_.cached)

})}})}}function findFiles(options,callback){options.base||(options.base=basePath),finder.find(options,function(err,stdout,stderr,process){
if(err||!options.buffer)return callback(err,stdout,process)
var buffer=""
stdout.on("data",function(lines){buffer+=lines})
var stderrBuffer=""
stderr.on("data",function(lines){stderrBuffer+=lines}),process.on("exit",function(code){if(options.base&&"/"!=options.base){
var rgx=new RegExp(util.escapeRegExp(options.base),"g")
buffer=buffer.replace(rgx,"").replace(/\\/g,"/")}callback(code?"Error "+code+"\n"+stderrBuffer:null,buffer)

})})}var Plugin=imports.Plugin,finder=imports.finder,util=imports.util,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),basePath=options.basePath,state={}


plugin.on("load",function(){}),plugin.on("unload",function(){}),plugin.freezePublicAPI({get basePath(){
return basePath},findFiles:findFiles,getFileList:getFileList}),register(null,{find:plugin})}return main.consumes=["Plugin","finder","util"],
main.provides=["find"],main})


define("ace/ext/emmet",[],function(require,exports,module){"use strict"
function AceEmmetEditor(){}var emmet,emmetPath,HashHandler=require("ace/keyboard/hash_handler").HashHandler,Editor=require("ace/editor").Editor,snippetManager=require("ace/snippets").snippetManager,Range=require("ace/range").Range


AceEmmetEditor.prototype={setupContext:function(editor){this.ace=editor,this.indentation=editor.session.getTabString(),
emmet||(emmet=window.emmet)
var resources=emmet.resources||emmet.require("resources")
resources.setVariable("indentation",this.indentation),this.$syntax=null,this.$syntax=this.getSyntax()

},getSelectionRange:function(){var range=this.ace.getSelectionRange(),doc=this.ace.session.doc
return{start:doc.positionToIndex(range.start),end:doc.positionToIndex(range.end)}},createSelection:function(start,end){
var doc=this.ace.session.doc
this.ace.selection.setRange({start:doc.indexToPosition(start),end:doc.indexToPosition(end)})},getCurrentLineRange:function(){
var ace=this.ace,row=ace.getCursorPosition().row,lineLength=ace.session.getLine(row).length,index=ace.session.doc.positionToIndex({
row:row,column:0})
return{start:index,end:index+lineLength}},getCaretPos:function(){var pos=this.ace.getCursorPosition()


return this.ace.session.doc.positionToIndex(pos)},setCaretPos:function(index){var pos=this.ace.session.doc.indexToPosition(index)


this.ace.selection.moveToPosition(pos)},getCurrentLine:function(){var row=this.ace.getCursorPosition().row


return this.ace.session.getLine(row)},replaceContent:function(value,start,end,noIndent){null==end&&(end=null==start?this.getContent().length:start),
null==start&&(start=0)
var editor=this.ace,doc=editor.session.doc,range=Range.fromPoints(doc.indexToPosition(start),doc.indexToPosition(end))


editor.session.remove(range),range.end=range.start,value=this.$updateTabstops(value),snippetManager.insertSnippet(editor,value)

},getContent:function(){return this.ace.getValue()},getSyntax:function(){if(this.$syntax)return this.$syntax


var syntax=this.ace.session.$modeId.split("/").pop()
if("html"==syntax||"php"==syntax){var cursor=this.ace.getCursorPosition(),state=this.ace.session.getState(cursor.row)


"string"!=typeof state&&(state=state[0]),state&&(state=state.split("-"),state.length>1?syntax=state[0]:"php"==syntax&&(syntax="html"))

}return syntax},getProfileName:function(){var resources=emmet.resources||emmet.require("resources")
switch(this.getSyntax()){case"css":return"css"
case"xml":case"xsl":return"xml"
case"html":var profile=resources.getVariable("profile")
return profile||(profile=this.ace.session.getLines(0,2).join("").search(/<!DOCTYPE[^>]+XHTML/i)!=-1?"xhtml":"html"),
profile
default:var mode=this.ace.session.$mode
return mode.emmetConfig&&mode.emmetConfig.profile||"xhtml"}},prompt:function(title){return prompt(title)

},getSelection:function(){return this.ace.session.getTextRange()},getFilePath:function(){return""},$updateTabstops:function(value){
var base=1e3,zeroBase=0,lastZero=null,ts=emmet.tabStops||emmet.require("tabStops"),resources=emmet.resources||emmet.require("resources"),settings=resources.getVocabulary("user"),tabstopOptions={
tabstop:function(data){var group=parseInt(data.group,10),isZero=0===group
isZero?group=++zeroBase:group+=base
var placeholder=data.placeholder
placeholder&&(placeholder=ts.processText(placeholder,tabstopOptions))
var result="${"+group+(placeholder?":"+placeholder:"")+"}"
return isZero&&(lastZero=[data.start,result]),result},escape:function(ch){return"$"==ch?"\\$":"\\"==ch?"\\\\":ch

}}
if(value=ts.processText(value,tabstopOptions),settings.variables.insert_final_tabstop&&!/\$\{0\}$/.test(value))value+="${0}"
else if(lastZero){var common=emmet.utils?emmet.utils.common:emmet.require("utils")
value=common.replaceSubstring(value,"${0}",lastZero[0],lastZero[1])}return value}}
var keymap={expand_abbreviation:{mac:"ctrl+alt+e",win:"alt+e"},match_pair_outward:{mac:"ctrl+d",win:"ctrl+,"
},match_pair_inward:{mac:"ctrl+j",win:"ctrl+shift+0"},matching_pair:{mac:"ctrl+alt+j",win:"alt+j"},next_edit_point:"alt+right",
prev_edit_point:"alt+left",toggle_comment:{mac:"command+/",win:"ctrl+/"},split_join_tag:{mac:"shift+command+'",
win:"shift+ctrl+`"},remove_tag:{mac:"command+'",win:"shift+ctrl+;"},evaluate_math_expression:{mac:"shift+command+y",
win:"shift+ctrl+y"},increment_number_by_1:"ctrl+up",decrement_number_by_1:"ctrl+down",increment_number_by_01:"alt+up",
decrement_number_by_01:"alt+down",increment_number_by_10:{mac:"alt+command+up",win:"shift+alt+up"},decrement_number_by_10:{
mac:"alt+command+down",win:"shift+alt+down"},select_next_item:{mac:"shift+command+.",win:"shift+ctrl+."
},select_previous_item:{mac:"shift+command+,",win:"shift+ctrl+,"},reflect_css_value:{mac:"shift+command+r",
win:"shift+ctrl+r"},encode_decode_data_url:{mac:"shift+ctrl+d",win:"ctrl+'"},expand_abbreviation_with_tab:"Tab",
wrap_with_abbreviation:{mac:"shift+ctrl+a",win:"shift+ctrl+a"}},editorProxy=new AceEmmetEditor
exports.commands=new HashHandler,exports.runEmmetCommand=function runEmmetCommand(editor){try{editorProxy.setupContext(editor)


var actions=emmet.actions||emmet.require("actions")
if("expand_abbreviation_with_tab"==this.action){if(!editor.selection.isEmpty())return!1
var pos=editor.selection.lead,token=editor.session.getTokenAt(pos.row,pos.column)
if(token&&/\btag\b/.test(token.type))return!1}if("wrap_with_abbreviation"==this.action)return setTimeout(function(){
actions.run("wrap_with_abbreviation",editorProxy)},0)
var result=actions.run(this.action,editorProxy)}catch(e){if(!emmet)return load(runEmmetCommand.bind(this,editor)),
!0
editor._signal("changeStatus","string"==typeof e?e:e.message),console.log(e),result=!1}return result}


for(var command in keymap)exports.commands.addCommand({name:"emmet:"+command,action:command,bindKey:keymap[command],
exec:exports.runEmmetCommand,multiSelectAction:"forEach"})
exports.updateCommands=function(editor,enabled){enabled?editor.keyBinding.addKeyboardHandler(exports.commands):editor.keyBinding.removeKeyboardHandler(exports.commands)

},exports.isSupportedMode=function(mode){if(!mode)return!1
if(mode.emmetConfig)return!0
var id=mode.$id||mode
return/css|less|scss|sass|stylus|html|php|twig|ejs|handlebars/.test(id)},exports.isAvailable=function(editor,command){
if(/(evaluate_math_expression|expand_abbreviation)$/.test(command))return!0
var mode=editor.session.$mode,isSupported=exports.isSupportedMode(mode)
if(isSupported&&mode.$modes)try{editorProxy.setupContext(editor),/^(js|php)/.test(editorProxy.getSyntax())&&(isSupported=!1)

}catch(e){}return isSupported}
var onChangeMode=function(e,target){var editor=target
if(editor){var enabled=exports.isSupportedMode(editor.session.$mode)
e.enableEmmet===!1&&(enabled=!1),enabled&&load(),exports.updateCommands(editor,enabled)}},load=function(cb){
"string"==typeof emmetPath&&require("ace/config").loadModule(emmetPath,function(){emmetPath=null,cb&&cb()

})}
exports.AceEmmetEditor=AceEmmetEditor,require("ace/config").defineOptions(Editor.prototype,"editor",{
enableEmmet:{set:function(val){this[val?"on":"removeListener"]("changeMode",onChangeMode),onChangeMode({
enableEmmet:!!val},this)},value:!0}}),exports.setCore=function(e){"string"==typeof e?emmetPath=e:emmet=e

}})


define("plugins/c9.ide.ace.emmet/emmet",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){if(loaded)return!1
loaded=!0
var keymap={expand_abbreviation:{mac:"ctrl+alt+e",win:"ctrl+alt+e"},match_pair_outward:{},match_pair_inward:{},
matching_pair:{},next_edit_point:{},prev_edit_point:{},toggle_comment:{},split_join_tag:{},remove_tag:{},
evaluate_math_expression:{mac:"shift+command+y",win:"shift+ctrl+y"},increment_number_by_1:{},decrement_number_by_1:{},
increment_number_by_01:{},decrement_number_by_01:{},increment_number_by_10:{},decrement_number_by_10:{},
select_next_item:{mac:"shift+command+.",win:"shift+ctrl+."},select_previous_item:{mac:"shift+command+,",
win:"shift+ctrl+,"},reflect_css_value:{},expand_abbreviation_with_tab:{mac:"Tab",win:"Tab"},wrap_with_abbreviation:{
mac:"shift+ctrl+a",win:"shift+ctrl+a"}}
for(var i in keymap)commands.addCommand({name:"emmet_"+i,action:i,group:"emmet",bindKey:keymap[i],exec:emmetExt.runEmmetCommand,
isAvailable:isAvailable,findEditor:findEditor},plugin)}function isAvailable(editor,args,event){return!(!editor||!editor.ace)&&(!(event instanceof KeyboardEvent&&!editor.ace.isFocused())&&emmetExt.isAvailable(editor.ace,this.name))

}function findEditor(editor){return editor&&editor.ace?editor.ace:editor}var Plugin=imports.Plugin,commands=imports.commands,emmetExt=(imports.menus,
require("ace/ext/emmet"))
emmetExt.setCore("lib/emmet/emmet"),emmetExt.updateCommands=function(){}
var plugin=new Plugin("Ajax.org",main.consumes),loaded=(plugin.getEmitter(),!1),drawn=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({}),register(null,{emmet:plugin
})}return main.consumes=["Plugin","commands","menus","ace"],main.provides=["emmet"],main})


define("plugins/c9.ide.ace.keymaps/cli",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&void(loaded=!0)}function draw(){drawn||(drawn=!0,cmdLine=new apf.codebox,
layout.findParent(plugin).appendChild(cmdLine),cmdLine.setHeight(23),cmdLine.$ext.className="searchbox tb_console vimInput",
updateTheme(),initCmdLine(cmdLine.ace),ace.on("themeChange",updateTheme,plugin),emit("draw"))}function updateTheme(){
if(cmdLine){var activeTheme=ace.theme
if(activeTheme){cmdLine.ace.setTheme(activeTheme)
var htmlNode=cmdLine.ace.container.parentNode,style=htmlNode.style
style.background=activeTheme.bg,activeTheme.isDark?ui.setStyleClass(htmlNode,"dark"):ui.setStyleClass(htmlNode,"",["dark"])

}}}function show(){draw(),layout.setFindArea(cmdLine,{isDefault:!0})}function hide(){cmdLine&&layout.setFindArea(null,{
isDefault:!0})}function toggle(force,a,b,callback){force==-1?hide():show(),callback&&callback()}function parseOption(optValue){
return/^\d+$/.test(optValue)&&(optValue=parseInt(optValue,10)),/^[\d.\^e]+$/.test(optValue)?optValue=parseFloat(optValue):/^(true|false)$/i.test(optValue)&&(optValue=optValue.length=4),
optValue}function getCompletions(command){return command?command.getCompletions?command.getCompletions()||[]:command.commands?Object.keys(command.commands):[]:(allCommands||(allCommands=Object.keys(commands.commands).concat(Object.keys(cliCmds))),
allCommands)}function getCommand(name,root){return root&&root.commands&&root.commands[name]?root.commands[name]:root?root:cliCmds[name]||commands.commands[name]

}function getActiveEditor(){var tab=tabManager.focussedTab
if(tab&&"ace"==tab.editorType)return tab.editor.ace}function processCommandParts(ed,tokens,text){for(var i=0;i<tokens.length;i++){
var tok=tokens[i],cmd=tok.command
if(cmd){if(cmd.name!==tok.value){var next=tokens[i+1]
if(!next||"invisible"!==next.type)continue}if(cmd.cliExec)return cmd.cliExec(ed,text,tokens)
if(cmd.exec)return cmd.exec(ed,{argv:text.split(/\s+/),text:text,tokens:tokens})}}}function endCommandInput(cmdLine){
cmdLine.addToHistory(),cmdLine.setValue("")
var editor=getActiveEditor()
editor&&editor.focus()}function initCmdLine(cmdLine){function tabCycle(ed,dir){var session=ed.session,range=ed.getSelectionRange(),line=session.getLine(0),len=line.length


if(range.end.column!=len||!range.isEmpty())return void ed.navigateLineEnd()
if(!ed.$tabCycle){var tok=session.getTokenAt(0,len)||{value:"",type:""},matches=session.getState(0)
if("start"==matches&&(matches=getCompletions()),!matches)return
if(1==matches.length&&tok.value==matches[0]&&(tok.command&&(matches=getCompletions(tok.command),tok={
value:"",type:""}),!matches))return
ed.$tabCycle={matches:matches,index:tok.value==matches[0]?0:-1,start:len-tok.value.length},ed.commands.on("exec",function onExec(e){
var name=e.command&&e.command.name
"tabNext"!==name&&"tabPrevious"!==name&&(ed.$tabCycle=null,ed.commands.removeListener("exec",onExec))

})}var matches=ed.$tabCycle.matches,index=ed.$tabCycle.index,start=ed.$tabCycle.start
index+=dir,index%=matches.length,index<0&&(index=matches.length+index),ed.$tabCycle.index=index
var match=matches[index]
if(match){for(var i=0;match[i]&&match[i]==line[start+i];)i++
start+=i,match=match.substr(i),0===i&&/\w/.test(match[0])&&/\w/.test(line[start-1])&&(match=" "+match),
/\w$/.test(match)&&(match+=" "),range.start.column=start,range.end.column=len,session.replace(range,match),
1==ed.$tabCycle.matches.length&&(ed.$tabCycle=null)}}function matchCommand(line,names){var matches=[]


return names.forEach(function(name){if(name.length<line.length){var isMatch=0===line.lastIndexOf(name,0)


isMatch&&/\w/.test(name[name.length-1])&&(isMatch=!/\w/.test(line[name.length]))}else var isMatch=0===name.lastIndexOf(line,0)


isMatch&&matches.push(name)}),matches}cmdLine.commands.addCommands([{bindKey:"Shift-Return|Ctrl-Return|Alt-Return",
name:"insertNewLine",exec:function(cmdLine){cmdLine.insert("\n")}},{bindKey:"Esc|Shift-Esc|Ctrl-[",name:"cancel",
exec:function(cmdLine){endCommandInput(cmdLine)}},{bindKey:"Return",name:"run",exec:function(cmdLine){
var editor=cmdLine.editor||getActiveEditor(),tokens=cmdLine.session.getTokens(0)
editor&&(editor.cmdLine=cmdLine),processCommandParts(editor,tokens,cmdLine.getValue()),endCommandInput(cmdLine)

}},{bindKey:"Tab",name:"tabNext",exec:function(ed){tabCycle(ed,1)}},{bindKey:"Shift-Tab",name:"tabPrevious",
exec:function(ed){tabCycle(ed,-1)}},{bindKey:"Right",name:"arrowCompleteRight",exec:function(ed){var session=ed.session,col=ed.selection.isEmpty()?ed.selection.lead.column:-1


ed.navigateRight()
var tok=session.getTokenAt(0,col+1)
col==ed.selection.lead.column&&tok&&"invisible"==tok.type&&session.doc.insertInLine({row:0,column:col
},tok.value)}},{bindKey:"Up",name:"Up",exec:function(cmdLine){cmdLine.navigateHistory(-1)}},{bindKey:"Down",
name:"Down",exec:function(cmdLine){cmdLine.navigateHistory(1)}},{bindKey:"Ctrl-Home|PageUp",name:"firstInHistory",
exec:function(cmdLine){cmdLine.navigateHistory(0)}},{bindKey:"Ctrl-End|PageDown",name:"lastInHistory",
exec:function(cmdLine){cmdLine.navigateHistory()}}]),cmdLine.history=[],cmdLine.navigateHistory=function(dir){
var cliCmd=this.getCurrentCommandWithHistory()||{},history=cliCmd.history||this.history,index=history.index,cmd=history[index]||""


0===dir?index=0:null===dir?index=history.length:"number"==typeof dir&&(index+=dir,index<0&&(index=0),
index>history.length&&(index=history.length)),cmd=history[index]||"",cliCmd.history&&cliCmd.name&&(cmd=cliCmd.name+cmd),
this.setValue(cmd,1),history.index=index},cmdLine.addToHistory=function(val){var cliCmd=this.getCurrentCommandWithHistory()||{},history=cliCmd.history||this.history


val=val||this.getValue(),cliCmd.name&&cliCmd.history&&(val=val.substr(cliCmd.name.length)),val&&val!=history[history.index]&&(history.push(val),
history.index=history.length)},cmdLine.getCurrentCommand=function(){var tokens=this.session.getTokens(0),tok=tokens[tokens.length-1]


return tok&&tok.command},cmdLine.getCurrentCommandWithHistory=function(){for(var tokens=this.session.getTokens(0),i=tokens.length;i--;){
var tok=tokens[i]
if(tok&&tok.command&&tok.command.history)return tok.command}},cmdLine.on("blur",function(){cmdLine.renderer.$cursorLayer.element.style.opacity=0,
cmdLine.getValue()||(cmdLine.renderer.content.style.visibility="hidden",cmdLine.$messageNode.style.display="",
cmdLine.$inMessageMode=!0,cmdLine.$messageNode.textContent=cmdLine.$message||"")}),cmdLine.on("focus",function(){
cmdLine.renderer.$cursorLayer.element.style.opacity="",cmdLine.renderer.content.style.visibility="",cmdLine.$messageNode.style.display="none",
cmdLine.$inMessageMode=!1}),cmdLine.commands.on("exec",function(e){e.command&&("insertstring"==e.command.name,
cmdLine.commands.lastCommandName=e.command.name)}),cmdLine.session.bgTokenizer.$tokenizeRow=function(row){
function add(type,value){tokens.push({type:type,value:value,command:command})}for(var line=this.doc.getLine(row),command=null,tokens=[];line.length;){
var names=getCompletions(command),matches=matchCommand(line,names)
if(!matches.length){add("text",line)
break}var cur=matches[0]
command=getCommand(cur,command),cur.length>=line.length?(add("keyword",line),add("invisible",cur.substring(line.length))):add("keyword",cur),
line=line.substr(cur.length)
var i=line.search(/\S|$/)
i>0&&(add("text",line.substring(0,i)),line=line.substr(i),line.length||(matches=getCompletions(command)))

}return this.lines[row]=tokens,this.states[row]=matches,tokens},cmdLine.$messageNode=document.createElement("div"),
cmdLine.$messageNode.style.cssText="position:absolute;opacity:0.8;padding:0 5px;top:0;font-size:11px",
cmdLine.container.appendChild(cmdLine.$messageNode),cmdLine.$clearMessageDelayed=lang.delayedCall(function(){
cmdLine.setMessage("")}),cmdLine.setTimedMessage=function(text,timeout){this.setMessage(text),this.once("setMessage",function(){
cmdLine.$clearMessageDelayed.cancel()}),cmdLine.$clearMessageDelayed.schedule(timeout||2e3)},cmdLine.setMessage=function(text,from){
this._signal("setMessage",text),this.$message=text,this.$inMessageMode&&(this.$messageNode.textContent=text)

},cmdLine.isFocused()||cmdLine._emit("blur"),cmdLine.commands.removeCommands(["find","gotoline","findall","replace","replaceall"])

}var cmdLine,Plugin=imports.Plugin,ui=imports.ui,commands=imports.commands,layout=imports.layout,fs=imports.fs,navigate=imports.navigate,save=imports.save,tabbehavior=imports.tabbehavior,tabManager=imports.tabManager,ace=imports.ace,Editor=require("ace/editor").Editor,lang=require("ace/lib/lang"),pathLib=require("path"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),searchStore={
current:"",options:{needle:"",backwards:!1,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!1}},loaded=!1,drawn=!1,cliCmds={}


cliCmds.ascii={name:"ascii",description:"",exec:function(editor){var onSelectionChange=lang.delayedCall(function(e){
var c=editor.getCursorPosition(),ch=editor.session.getLine(c.row)[c.column-1]||"\n",code=ch.charCodeAt(0),msg=JSON.stringify(ch).slice(1,-1)+"= ",str=code.toString(16)


str=[,"\\x0","\\x","\\u0","\\u"][str.length]+str,msg+=str+" ",msg+="\\"+code.toString(8)+" ",msg+="&#"+code+";",
editor.cmdLine.setMessage(msg),clear.delay(2e3)}),clear=lang.delayedCall(function(e){editor.removeListener(editor.asciiMessageListener),
editor.asciiMessageListener=null,editor.cmdLine.setMessage("")})
return editor.asciiMessageListener?clear.call():(editor.on("changeSelection",editor.asciiMessageListener=function(){
onSelectionChange.schedule(200)}),void onSelectionChange.call())}},cliCmds.set={name:"set",description:"set editor option",
exec:function(editor,args){var cmd=args.text.split(" "),optName=cmd[1],optValue=parseOption(cmd[2])
editor.setOption(optName,optValue)},getCompletions:function(){return Object.keys(Editor.prototype.$options)

}},cliCmds["/"]={name:"/",history:[],cliExec:function(ed,data){}},cliCmds["?"]={name:"?",history:cliCmds["/"].history,
cliExec:cliCmds["/"].cliExec},cliCmds[":"]={name:":",history:[],getCompletions:function(){return Object.keys(this.commands).concat(Object.keys(commands.commands))

}},cliCmds[":"].commands={w:function(editor,data,callback){var tab=tabManager.focussedTab
if(tab&&tab.path){var lines=editor.session.getLength()
if(2===data.argv.length&&data.argv[1]){var path=pathLib.join(pathLib.dirname(tab.path),data.argv[1])
save.save(tab,{path:path},function(err){err||editor.cmdLine.setTimedMessage(path+" [New] "+lines+"L, ##C written to "),
callback&&callback()})}else save.save(tab,{},function(err){err||editor.cmdLine.setTimedMessage(tab.path+" "+lines+"L, ##C written"),
callback&&callback()})}},e:function(editor,data){var path=data.argv[1]
if(!path)return navigate.show(),!1
var currentPath=tabManager.focussedTab&&tabManager.focussedTab.path||"/"
path=pathLib.join(pathLib.dirname(currentPath),data.argv[1]),fs.exists(path,function(exists){exists?tabManager.openFile(path,{
focus:!0},function(){}):tabManager.open({path:path,focus:!0,document:{meta:{newfile:!0,cli:!0}}})})},
x:function(editor,data){var page=tabManager.focussedTab
if(page)return page.document.changed?void cliCmds[":"].commands.wq(editor,data):void cliCmds[":"].commands.q()

},wq:function(editor,data){cliCmds[":"].commands.w(editor,data,function(){cliCmds[":"].commands.q()})

},wa:function(editor,data){commands.exec("saveall")},q:function(editor,data){var page=tabManager.focussedTab


page&&(data&&data.force&&page.document.undoManager.bookmark(),page.close())},"q!":function(){cliCmds[":"].commands.q(null,{
force:!0})},tabn:"gototabright",tabp:"gototableft",tabfirst:function(){tabbehavior.cycleTab("first",{
editorType:"ace"})},tablast:function(){tabbehavior.cycleTab("last",{editorType:"ace"})},tabnew:function(editor,data){
var path=data.argv[1]
path?cliCmds[":"].commands.e(editor,data):tabManager.open({path:"",document:{meta:{newfile:!0}},focus:!0
})},tabclose:"closetab",tabmove:function(editor,data){},ascii:cliCmds.ascii,sort:function(editor,data){
commands.exec("sortlines")}},cliCmds[":"].commands["tab drop"]=cliCmds[":"].commands.e,cliCmds[":"].commands.write=cliCmds[":"].commands.w,
cliCmds[":"].commands.tabNext=cliCmds[":"].commands.tabn,cliCmds[":"].commands.tabPrevious=cliCmds[":"].commands.tabp,
cliCmds[":"].commands.tabc=cliCmds[":"].commands.tabclose,cliCmds[":"].commands.set={vimOpts:["cursorline","cul","nocursorline","nocul","expandtab","et","noexpandtab","noet","number","nu","nonumber","nonu"],
exec:function(ed,args){var optName=args.argv[1],optval="no"!=optName.slice(0,2)
if("!"==optName[optName.length-1]){var toggle=!0
optName=optName.slice(0,-1)}var i=this.vimOpts.indexOf(optName)
return i==-1?void ed.cmdLine.setTimedMessage("Unrecognised option '"+optName+"'.",1500):(i<4?optName="highlightActiveLine":i<8?optName="useSoftTabs":i<12&&(optName="showGutter"),
toggle&&(optval=!ed.getOption(optName)),void ed.setOption(optName,optval))},getCompletions:function(e){
return this.vimOpts}},cliCmds[":"].commands.syntax=commands.commands.syntax,cliCmds[":"].cliExec=function(ed,cmd,tokens){
var last=tokens[tokens.length-1]
last&&"invisible"==last.type&&(cmd+=last.value),cmd=cmd.substr(1).trim()
var args=cmd.split(/\s+/)
if(cmd=args[0],this.commands[cmd]){if(cmd=this.commands[cmd],"string"==typeof cmd)return commands.exec(cmd,null,{
argv:args})
if("function"==typeof cmd)return cmd(ed,{argv:args})
if(cmd.exec)return cmd.exec(ed,{argv:args})}else commands.commands[cmd]?commands.exec(cmd,null,{argv:args
}):/^\d+$/.test(cmd)?ed.gotoLine(cmd,0,!0):ed.cmdLine.setTimedMessage("Vim command '"+cmd+"' not implemented.",1500)

}
var allCommands
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({searchStore:searchStore,get aml(){return cmdLine

},get ace(){return cmdLine.ace},show:show,hide:hide,toggle:toggle}),register(null,{"vim.cli":plugin})

}return main.consumes=["Plugin","ui","layout","commands","fs","navigate","save","tabbehavior","ace","commands","tabManager"],
main.provides=["vim.cli"],main})


define("plugins/c9.ide.ace.keymaps/keymaps",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0
var mnuKbModes=new ui.menu({"onprop.visible":function(e){if(e.value){var value=settings.get("user/ace/@keyboardmode")


mnuKbModes.select(null,value)}}})
menus.addItemByPath("Edit/~",new ui.divider,650,plugin),menus.addItemByPath("Edit/Keyboard Mode/",mnuKbModes,660,plugin)


var c=1e3;["Default","Vim","Emacs","Sublime"].forEach(function(label){menus.addItemByPath("Edit/Keyboard Mode/"+label,new ui.item({
type:"radio",value:label.toLowerCase(),onclick:function(e){setMode(mnuKbModes.getValue())}}),c+=100,plugin)

}),settings.on("read",function(){settings.setDefaults("user/ace",[["keyboardmode","default"]])
var mode=settings.get("user/ace/@keyboardmode")
mode&&"default"!=mode&&setMode(mode)},plugin),settings.on("user/ace",function(){var mode=settings.get("user/ace/@keyboardmode")


currentMode!=mode&&setMode(mode)},plugin),ace.on("create",function(e){setMode(null,e)},plugin),setTimeout(checkHostileExtensions,1e3)

}function setMode(mode,tab){function setKeymap(keymap){keymap.showCli?cli.show():cli.hide(),(tab?[tab]:tabManager.getTabs()).forEach(function(tab){
if(tab.editor&&"ace"==tab.editor.type){var editor=tab.editor.ace
editor.setKeyboardHandler(keymap.aceKeyboardHandler),editor.showCommandLine=showCommandLine}}),activeMode!=mode&&(updateIdeKeymap(mode),
activeMode=mode)}settings.model.loaded&&(mode?currentMode!=mode&&(currentMode=mode,settings.set("user/ace/@keyboardmode",mode)):mode=settings.get("user/ace/@keyboardmode"),
mode="emacs"==mode||"vim"==mode||"sublime"==mode?"plugins/c9.ide.ace.keymaps/"+mode+"/keymap":null,mode?require([mode],setKeymap):setKeymap({}))

}function updateIdeKeymap(path){tree.once("ready",function(){var kb=path?require(path):{}
tree.tree.keyBinding.setKeyboardHandler(kb.treeKeyboardHandler)}),c9.once("ready",function(){function bindKey(x){
var cmd=allCommands[x.name]
cmd&&x.bindKey&&(x.bindKey.mac=normalize(x.bindKey.mac),x.bindKey.win=normalize(x.bindKey.win),cmd.bindKey=x.bindKey)

}function normalize(str){return str&&str.replace(/(^|-| )(\w)/g,function(_,a,b){return a+b.toUpperCase()

})}var allCommands=commands.commands
Object.keys(allCommands).forEach(function(name){var cmd=allCommands[name]
cmd&&cmd.originalBindKey&&(cmd.bindKey=cmd.originalBindKey)})
var kb=path?require(path):{}
"execIdeCommand"in kb&&(kb.execIdeCommand=commands.exec),"tabbehavior"in kb&&(kb.tabbehavior=tabbehavior),
kb.ideCommands&&kb.ideCommands.forEach(function(x){commands.addCommand(x,plugin)}),kb.editorCommands&&kb.editorCommands.forEach(function(x){
x.findEditor=findEditor,x.isAvailable=isAvailableAce,commands.addCommand(x,plugin)}),kb.ideKeymap&&kb.ideKeymap.forEach(bindKey),
kb.editorKeymap&&kb.editorKeymap.forEach(bindKey),commands.reset()})}function showCommandLine(val,options){
options||(options={}),cli.show(),this.cmdLine=cli.ace,this.cmdLine.editor=this,options.focus!==!1&&cli.aml.focus(),
null!=options.message&&(options.timeout?cli.ace.setTimedMessage(options.message,options.timeout):cli.ace.setMessage(options.message)),
"string"==typeof val&&this.cmdLine.setValue(val,1)}function isAvailableAce(editor,args,event){return!(!editor||!editor.ace)&&!(event instanceof KeyboardEvent&&!editor.ace.isFocused())

}function findEditor(editor){return editor&&editor.ace||editor}function checkHostileExtensions(){var messages=[]


try{var d=document.body.nextSibling
d&&d.shadowRoot&&d.shadowRoot.querySelector&&d.shadowRoot.querySelector("[class*=vimium]")&&messages.push("Vimium breaks cloud9 keyboard shortcuts, please disable it on this site.")

}catch(e){}messages.length&&showError(messages.join("\n"))}var currentMode,activeMode,Plugin=imports.Plugin,ui=imports.ui,ace=imports.ace,menus=imports.menus,commands=imports.commands,tabManager=imports.tabManager,settings=imports.settings,cli=imports["vim.cli"],c9=imports.c9,tree=imports.tree,showError=imports["dialog.error"].show,tabbehavior=imports.tabbehavior,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){currentMode=activeMode=null,loaded=!1}),plugin.freezePublicAPI({}),register(null,{
keymaps:plugin})}return main.consumes=["Plugin","ui","ace","menus","settings","vim.cli","tabManager","commands","c9","tree","dialog.error","tabbehavior"],
main.provides=["keymaps"],main})


define("text!plugins/c9.ide.ace.statusbar/skin.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:bar name="bar-status">\n        <a:style><![CDATA[]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class="bar-status">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    <a:button name="btn-statusbar-icon">\n        <a:style><![CDATA[]]></a:style>\n\n        <a:presentation>\n            <a:main\n              caption      = "text()"\n              background = "."\n              icon       = ".">\n                <div class="btn-statusbar-icon"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>')


define("text!plugins/c9.ide.ace.statusbar/statusbar.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="bar" \n      skin    = "bar-status" \n      skinset = "c9statusbar"\n      class   = ""\n      zindex  = "10000"\n      style   = "position:absolute;right:5px;bottom:3px;"\n      height  = "23">\n        <a:label id="lblSelectionLength" \n          caption = "" \n          style   = "cursor:pointer"\n          margin  = "1 10 4 3" />\n        <a:label id="lblRowCol"\n          class   = "lbl_row_col"\n          style   = "cursor:pointer"\n          margin  = "1 10 4 3" />\n        <a:label id="lblEditorStatus" \n          caption = "" \n          class   = "nounderline"\n          margin  = "1 10 4 3"  />\n        <a:button id="lblSyntax" \n          skin    = "label"\n          style   = "cursor:pointer"\n          caption = "" \n          margin  = "1 10 4 3"\n          submenudir = "up" />\n        <a:button id="lblTabs" \n          skin    = "label"\n          style   = "cursor:pointer"\n          caption = "" \n          margin  = "1 10 4 3"\n          submenudir = "up" />\n        <a:button id="btnSbPrefs"\n          skin    = "btn-statusbar-icon" \n          skinset = "c9statusbar"\n          height  = "23"\n          icon    = "pref-ico.png" \n          submenudir = "up" />\n    </a:bar>\n</a:application>')


define("text!plugins/c9.ide.ace.statusbar/menu.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:menu id="menu"\n      class  = "mnuSbPrefs"\n      sticky = "false"\n      render = "runtime">\n        <a:item type="check" caption="Show Invisibles" checked="user/ace/@showInvisibles" />\n        <a:item type="check" caption="Show Gutter" checked="user/ace/@showGutter" />\n        <a:item type="check" caption="Auto-pair Brackets, Quotes, etc." checked="user/ace/@behavioursEnabled" />\n        <a:item type="check" caption="Wrap Lines" id="itmSbWrap" />\n        <a:item type="check" style="margin-left:18px;position:relative" caption="&#8627; to Print Margin" id="itmSbWrapPM" />\n        <a:divider />\n        <a:hbox edge="0 5 2 23" align="center">\n            <a:label flex="1" style="padding: 2px 2px 2px 0">Font Size</a:label>\n            <a:spinner value="user/ace/@fontSize" realtime="true" min="1" max="72" width="50" />\n        </a:hbox>\n    </a:menu>\n    \n    <a:menu id="menuTabs" render="runtime" class="mnuSbPrefs">\n        <a:item type="check" caption="Soft Tabs (spaces)" />\n        <a:divider />\n        <a:item disabled="true">Tab Size</a:item>\n        <a:item type="radio" caption="2" style="padding-left:35px" />\n        <a:item type="radio" caption="3" style="padding-left:35px" />\n        <a:item type="radio" caption="4" style="padding-left:35px" />\n        <a:item type="radio" caption="8" style="padding-left:35px" />\n        <a:divider />\n        <a:hbox edge="0 10 2 23" align="center">\n            <a:label style="padding: 2px 10px 2px 3px;flex:1 1 50px;">Other</a:label>\n            <a:spinner id="itmTabSize" realtime="true" min="1" max="64" width="50" />\n        </a:hbox>\n        <a:divider />\n        <a:item caption="Guess Tab Size" />\n        <a:divider />\n        <a:item caption="Convert to Spaces" />\n        <a:item caption="Convert to Tabs" />\n    </a:menu>\n</a:application>')


define("ace/ext/whitespace",[],function(require,exports,module){"use strict"
var lang=require("../lib/lang")
exports.$detectIndentation=function(lines,fallback){function getScore(indent){for(var score=0,i=indent;i<stats.length;i+=indent)score+=stats[i]||0


return score}for(var stats=[],changes=[],tabIndents=0,prevSpaces=0,max=Math.min(lines.length,1e3),i=0;i<max;i++){
var line=lines[i]
if(/^\s*[^*+\-\s]/.test(line)){if("\t"==line[0])tabIndents++,prevSpaces=-Number.MAX_VALUE
else{var spaces=line.match(/^ */)[0].length
if(spaces&&"\t"!=line[spaces]){var diff=spaces-prevSpaces
!(diff>0)||prevSpaces%diff||spaces%diff||(changes[diff]=(changes[diff]||0)+1),stats[spaces]=(stats[spaces]||0)+1

}prevSpaces=spaces}for(;i<max&&"\\"==line[line.length-1];)line=lines[i++]}}for(var changesTotal=changes.reduce(function(a,b){
return a+b},0),first={score:0,length:0},spaceIndents=0,i=1;i<12;i++){var score=getScore(i)
1==i?(spaceIndents=score,score=stats[1]?.9:.8,stats.length||(score=0)):score/=spaceIndents,changes[i]&&(score+=changes[i]/changesTotal),
score>first.score&&(first={score:score,length:i})}if(first.score&&first.score>1.4)var tabLength=first.length


return tabIndents>spaceIndents+1?((1==tabLength||spaceIndents<tabIndents/4||first.score<1.8)&&(tabLength=void 0),
{ch:"\t",length:tabLength}):spaceIndents>tabIndents+1?{ch:" ",length:tabLength}:void 0},exports.detectIndentation=function(session){
var lines=session.getLines(0,1e3),indent=exports.$detectIndentation(lines)||{}
return indent.ch&&session.setUseSoftTabs(" "==indent.ch),indent.length&&session.setTabSize(indent.length),
indent},exports.trimTrailingSpace=function(session,options){var doc=session.getDocument(),lines=doc.getAllLines(),min=options&&options.trimEmpty?-1:0,cursors=[],ci=-1


options&&options.keepCursorPosition&&(session.selection.rangeCount?session.selection.rangeList.ranges.forEach(function(x,i,ranges){
var next=ranges[i+1]
next&&next.cursor.row==x.cursor.row||cursors.push(x.cursor)}):cursors.push(session.selection.getCursor()),
ci=0)
for(var cursorRow=cursors[ci]&&cursors[ci].row,i=0,l=lines.length;i<l;i++){var line=lines[i],index=line.search(/\s+$/)


i==cursorRow&&(index<cursors[ci].column&&index>min&&(index=cursors[ci].column),ci++,cursorRow=cursors[ci]?cursors[ci].row:-1),
index>min&&doc.removeInLine(i,index,line.length)}},exports.convertIndentation=function(session,ch,len){
var oldCh=session.getTabString()[0],oldLen=session.getTabSize()
len||(len=oldLen),ch||(ch=oldCh)
for(var tab="\t"==ch?ch:lang.stringRepeat(ch,len),doc=session.doc,lines=doc.getAllLines(),cache={},spaceCache={},i=0,l=lines.length;i<l;i++){
var line=lines[i],match=line.match(/^\s*/)[0]
if(match){var w=session.$getStringScreenWidth(match)[0],tabCount=Math.floor(w/oldLen),reminder=w%oldLen,toInsert=cache[tabCount]||(cache[tabCount]=lang.stringRepeat(tab,tabCount))


toInsert+=spaceCache[reminder]||(spaceCache[reminder]=lang.stringRepeat(" ",reminder)),toInsert!=match&&(doc.removeInLine(i,0,match.length),
doc.insertInLine({row:i,column:0},toInsert))}}session.setTabSize(len),session.setUseSoftTabs(" "==ch)

},exports.$parseStringArg=function(text){var indent={};/t/.test(text)?indent.ch="\t":/s/.test(text)&&(indent.ch=" ")


var m=text.match(/\d+/)
return m&&(indent.length=parseInt(m[0],10)),indent},exports.$parseArg=function(arg){return arg?"string"==typeof arg?exports.$parseStringArg(arg):"string"==typeof arg.text?exports.$parseStringArg(arg.text):arg:{}

},exports.commands=[{name:"detectIndentation",exec:function(editor){exports.detectIndentation(editor.session)

}},{name:"trimTrailingSpace",exec:function(editor){exports.trimTrailingSpace(editor.session)}},{name:"convertIndentation",
exec:function(editor,arg){var indent=exports.$parseArg(arg)
exports.convertIndentation(editor.session,indent.ch,indent.length)}},{name:"setIndentation",exec:function(editor,arg){
var indent=exports.$parseArg(arg)
indent.length&&editor.session.setTabSize(indent.length),indent.ch&&editor.session.setUseSoftTabs(" "==indent.ch)

}}]})


define("plugins/c9.ide.ace.statusbar/statusbar",[],function(require,exports,module){function main(options,imports,register){
function draw(){drawn||(drawn=!0,ui.insertSkin({name:"c9statusbar",data:skin,"media-path":options.staticPrefix+"/images/",
"icon-path":options.staticPrefix+"/icons/"},handle))}function getStatusbar(editor){return statusbars[editor.name]

}function show(){settings.set("user/ace/statusbar/@show","true")}function hide(){settings.set("user/ace/statusbar/@show","false")

}function Statusbar(editor){function load(){function updateBarVisible(){settings.getBool("user/ace/statusbar/@show")?(draw(),
bar.show(),menuItem.enable()):(bar&&bar.hide(),menuItem.enable())}return!loaded&&(loaded=!0,settings.on("user/ace/statusbar",updateBarVisible,plugin),
settings.getBool("user/ace/statusbar/@show")&&draw(),editor.on("documentLoad",function(e){var doc=e.doc,session=doc.getSession()


session.statusBar=plugin,session.session.on("changeMode",function(e){statusUpdate.schedule()}),doc.hasValue()||doc.once("setValue",function(){
statusUpdate.schedule()},doc)},plugin),editor.on("documentActivate",function(e){statusUpdate.schedule()

},plugin),void editor.on("documentUnload",function(e){delete e.doc.getSession().statusBar},plugin))}function draw(){
function setTheme(e){var theme=e.theme
if(theme){var cssClass=theme.cssClass,isDark=theme.isDark,bg=ui.getStyleRule("."+cssClass,"backgroundColor")


bar.setAttribute("class",isDark?"ace_dark":""),bg&&(bar.$ext.style.backgroundColor=bg)}}if(!drawn){drawn=!0,
handle.draw()
var htmlNode=editor.aml
ui.insertMarkup(htmlNode,markup,plugin),editor.on("themeChange",setTheme),bar=plugin.getElement("bar"),
lblSelection=plugin.getElement("lblSelectionLength"),lblStatus=plugin.getElement("lblEditorStatus"),lblRowCol=plugin.getElement("lblRowCol"),
lblTabs=plugin.getElement("lblTabs"),lblSyntax=plugin.getElement("lblSyntax"),bar.editor=editor
var button=plugin.getElement("btnSbPrefs")
button.setAttribute("submenu",menu),lblTabs.setAttribute("submenu",menuTabs)
var mnuSyntax=menus.get("View/Syntax").menu
lblSyntax.setAttribute("submenu",mnuSyntax),lblSyntax.on("mousedown",function(){editor.activeDocument&&tabs.focusTab(editor.activeDocument.tab)

}),lblSelection.on("click",function(){showRange=!showRange,updateStatus()}),lblRowCol.on("click",function(){
gotoline.gotoline(null,null,!0)})
var ace=editor.ace
if(!ace.$hasStatusBar){ace.on("changeSelection",function(){selStatusUpdate.schedule()}),ace.on("changeStatus",function(){
statusUpdate.schedule()}),ace.on("keyboardActivity",function(){statusUpdate.schedule()}),ace.renderer.on("scrollbarVisibilityChanged",function(e,renderer){
bar.$ext.style.right=renderer.scrollBarV.getWidth()+5+"px",bar.$ext.style.bottom=renderer.scrollBarH.getHeight()+3+"px"

})(null,ace.renderer),ace.$hasStatusBar=!0
var theme=editor.theme
setTheme({theme:theme})}updateStatus(),emit("draw")}}function updateSelStatus(){var ace=editor.ace
if(ace&&drawn&&ace.selection){var selLen
if(!ace.selection.isEmpty()){var range=ace.getSelectionRange()
selLen=showRange?"("+(range.end.row-range.start.row)+":"+(range.end.column-range.start.column)+")":"("+ace.session.getTextRange(range).length+" Bytes)"

}setCaption(lblSelection,selLen)
var cursor=ace.selection.lead,columnText=cursor.row+1+":"+(cursor.column+1)
ace.selection.rangeCount&&(columnText+=" [\u202f"+ace.selection.rangeCount+"\u202f]"),setCaption(lblRowCol,columnText)

}}function updateStatus(){var ace=editor.ace
if(ace&&drawn){updateSelStatus(),setCaption(lblTabs,(ace.getOption("useSoftTabs")?"Spaces":"Tabs")+": "+ace.getOption("tabSize"))


var status=ace.keyBinding.getStatusText()||""
ace.commands.recording&&(status="REC"),setCaption(lblStatus,status)
var caption=aceHandle.getSyntaxCaption(ace.session.syntax)
setCaption(lblSyntax,caption)}}function setCaption(lbl,value){if(lbl){if(!value)return lbl.hide()
lbl.visible||lbl.show(),lbl.setAttribute("caption",value)}}var showRange,bar,lblSelection,lblStatus,lblRowCol,lblTabs,lblSyntax,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


statusbars[editor.name]=plugin
var loaded=!1,drawn=!1,selStatusUpdate=lang.delayedCall(updateSelStatus,10),statusUpdate=lang.delayedCall(updateStatus,10)


return plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({update:updateStatus}),plugin.load(null,"acestatus"),
plugin}var menuItem,menu,menuTabs,Plugin=(imports.c9,imports.Plugin),settings=imports.settings,ui=imports.ui,tabs=imports.tabManager,menus=imports.menus,gotoline=imports["ace.gotoline"],aceHandle=imports.ace,skin=require("text!./skin.xml"),markup=require("text!./statusbar.xml"),menuAml=require("text!./menu.xml"),aceWhitespace=require("ace/ext/whitespace"),lang=require("ace/lib/lang"),handle=new Plugin("Ajax.org",main.consumes),statusbars={}


handle.on("load",function(){function setCurrentSession(menu){for(var node=menu.opener;node&&"tab"!=node.localName;)node=node.parentNode


if(node){var tab=node.cloud9pane.getTab()
currentSession=tab.document.getSession()}}function setOption(name,value){currentSession&&(currentSession.setOption&&currentSession.setOption(name,value),
currentSession.statusBar.update())}function getOption(name){return currentSession&&currentSession.session.getOption(name)

}settings.on("read",function(e){settings.setDefaults("user/ace/statusbar",[["show","true"]])},handle),
menuItem=new ui.item({test:"1",type:"check",checked:"user/ace/statusbar/@show"}),menus.addItemByPath("View/Status Bar",menuItem,600,handle),
aceHandle.on("create",function(e){if("ace"==e.editor.type){var statusbar,editor=e.editor
editor.once("draw",function(){statusbar=new Statusbar(editor)},editor),editor.once("unload",function(){
statusbar&&statusbar.unload()},editor)}}),ui.insertMarkup(null,menuAml,handle),menu=handle.getElement("menu"),
menuTabs=handle.getElement("menuTabs")
var currentSession
menu.on("afterrender",function(e){function update(e){if(!e||e.value){setCurrentSession(menu)
var wrap=getOption("wrap")
itmSbWrap.setAttribute("checked",!ui.isFalse(wrap)),itmSbWrapPM.setAttribute("checked","printMargin"==wrap)

}}var itmSbWrap=handle.getElement("itmSbWrap"),itmSbWrapPM=handle.getElement("itmSbWrapPM")
itmSbWrap.on("click",function(){setOption("wrap",!!itmSbWrap.checked&&(!itmSbWrapPM.checked||"printMargin"))

}),itmSbWrapPM.on("click",function(){setOption("wrap",itmSbWrapPM.checked?"printMargin":itmSbWrap.checked)

}),menu.on("prop.visible",update),update()})
var handlers=[function(){setOption("useSoftTabs",this.checked)},function(){},function(){setOption("tabSize",2)

},function(){setOption("tabSize",3)},function(){setOption("tabSize",4)},function(){setOption("tabSize",8)

},function(){currentSession&&(aceWhitespace.detectIndentation(currentSession.session),currentSession.setOption("guessTabSize",!0),
currentSession.statusBar.update())},function(){currentSession&&(aceWhitespace.convertIndentation(currentSession.session," "),
currentSession.statusBar.update())},function(){currentSession&&(aceWhitespace.convertIndentation(currentSession.session,"\t"),
currentSession.statusBar.update())}]
menuTabs.on("afterrender",function(e){function update(e){if(!e||e.value){setCurrentSession(menuTabs),
items[0].setAttribute("checked",getOption("useSoftTabs"))
var tabSize=getOption("tabSize")||1
items.forEach(function(node,idx){node.setAttribute("selected","false")}),lut[tabSize]&&items[lut[tabSize]].setAttribute("selected","true"),
itmTabSize.setAttribute("value",getOption("tabSize"))}}var items=menuTabs.selectNodes("a:item")
items.forEach(function(node,idx){node.on("click",handlers[idx])})
var itmTabSize=handle.getElement("itmTabSize")
itmTabSize.on("afterchange",function(){setOption("tabSize",this.value),update()})
var lut=[0,0,2,3,4,0,0,0,5]
menuTabs.on("prop.visible",update),update()})}),handle.on("unload",function(){drawn=!1,Object.keys(statusbars).forEach(function(name){
statusbars[name].unload()}),statusbars={},menuItem=null,menu=null,menuTabs=null})
var drawn=!1
handle.freezePublicAPI({show:show,hide:hide,getStatusbar:getStatusbar,draw:draw}),register(null,{"ace.status":handle
})}return main.consumes=["Plugin","c9","settings","ui","menus","ace","ace.gotoline","tabManager"],main.provides=["ace.status"],
main})


define("text!plugins/c9.ide.ace.gotoline/skin.xml",[],'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:list name="list">\n        <a:style><![CDATA[]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class=\'gotolinelist\'>\n                </div>\n            </a:main>\n            <a:item\n            class     = "."\n            container = "."\n            caption   = "."\n            select    = "."\n        >\n                <div> </div>\n            </a:item>\n            <a:empty caption=".">\n                <div class="message">-</div>\n            </a:empty>\n        </a:presentation>\n    </a:list>\n    <a:bar name="bar">\n        <a:style><![CDATA[]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="barGotoline">\n                    <div class="brGtlTop"></div>\n                    <div class="brGtlBottom"></div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    <a:textbox name="textbox">\n        <a:style><![CDATA[]]></a:style>\n\n        <a:presentation>\n            <a:main input="div[1]/input">\n                <div class="tbGotoline">\n                    <div class="sbtb_middle">\n                        <input type="text" />\n                    </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:textbox>\n</a:skin>\n')


define("text!plugins/c9.ide.ace.gotoline/gotoline.xml",[],'<?xml version=\'1.0\'?>\n<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="window"\n      skinset = "gotoline"\n      visible = "false"\n      width   = "60"\n      height  = "90"\n      left    = "0"\n      zindex  = "100000"\n      style   = "overflow:hidden">\n        <a:vbox top="0" right="0" bottom="0" width="61" padding="0" edge="5">\n            <a:textbox id="input" focusselect="true" />\n            <a:list id="list"\n              flex    = "1" />\n        </a:vbox>\n    </a:bar>\n</a:application>\n')


define("plugins/c9.ide.ace.gotoline/gotoline",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,menus.addItemByPath("Goto/Goto Line...",new ui.item({caption:"Goto Line...",
hint:"enter a line number and jump to it in the active document",command:"gotoline"}),200,plugin),commands.addCommand({
name:"gotoline",bindKey:{mac:"Command-L",win:"Ctrl-G"},isAvailable:function(editor){return editor&&"ace"==editor.type

},exec:function(){gotoline()}},plugin),commands.addCommand({name:"hideGotoLine",group:"ignore",bindKey:{
mac:"ESC",win:"ESC"},isAvailable:function(editor){return win&&win.visible},exec:function(){hide()
var tab=tabs.focussedTab
tab&&tabs.focusTab(tab),originalLine&&(execGotoLine(originalLine,originalColumn,!0),originalPath=originalColumn=originalLine=void 0)

}},plugin),settings.on("read",function(){lines=settings.getJson("state/gotoline")||[],Array.isArray(lines)||(lines=[])

},plugin),void settings.on("write",function(){changed&&(settings.setJson("state/gotoline",lines),changed=!1)

},plugin))}function draw(){drawn||(drawn=!0,ui.insertSkin({name:"gotoline",data:skin,"media-path":options.staticPrefix+"/images/"
},plugin),ui.insertMarkup(null,markup,plugin),win=plugin.getElement("window"),input=plugin.getElement("input"),
list=plugin.getElement("list"),list.$ext.textContent="",list.drawContents=function(){for(var ch=list.$ext.children,i=0;i<lines.length;i++){
var el=ch[i]
el||(el=document.createElement("div")),el.setAttribute("index",i),el.textContent=lines[i],el.className=i==list.selected?"selected":"",
el.parentNode!=list.$ext&&list.$ext.appendChild(el)}for(;ch.length>lines.length;)ch[lines.length].remove()

},list.selected=-1,list.$ext.addEventListener("mouseup",function(e){var i=parseInt(e.target.getAttribute("index"),10)


i>=0&&(list.selected=i,input.setValue(lines[list.selected]),list.drawContents(),execGotoLine(null,null,1==e.detail),
1!=e.detail&&hide())}),list.$altExt.addEventListener("mousedown",function(e){input.focus(),e.preventDefault(),
e.stopPropagation()}),input.addEventListener("keydown",function(e){var NotANumber=(e.keyCode>57||32==e.keyCode)&&(e.keyCode<96||e.keyCode>105)


if(13==e.keyCode)return execGotoLine(),!1
if(40==e.keyCode)list.selected==-1&&(list.cache=input.getValue()),list.selected<lines.length-1&&list.selected++,
input.setValue(lines[list.selected]),list.drawContents()
else if(38==e.keyCode)list.selected>-1&&list.selected--,input.setValue(lines[list.selected]||list.cache),
list.drawContents()
else if(NotANumber&&!e.metaKey&&!e.ctrlKey&&!e.altKey)return!1
NotANumber&&(!e.metaKey&&!e.ctrlKey||86!=e.keyCode&&88!=e.keyCode)||setTimeout(function(){execGotoLine(null,null,!0)

},10)}),win.addEventListener("blur",function(e){ui.isChildOf(win,e.toElement)||hide()}),input.addEventListener("blur",function(e){
ui.isChildOf(win,e.toElement)||hide()}),emit("draw"))}function show(noanim){var tab=tabs.focussedTab,editor=tab&&tab.editor


if(editor&&"ace"==editor.type){var ace=editor.ace,aceHtml=ace.container,cursor=ace.getCursorPosition()


originalLine=cursor.row+1,originalColumn=cursor.column,originalPath=tab.path,input.setValue(input.getValue()||cursor.row+1),
list.drawContents()
var pos=ace.renderer.textToScreenCoordinates(cursor.row,cursor.column),epos=ui.getAbsolutePosition(aceHtml.parentNode),maxTop=aceHtml.offsetHeight-100,top=Math.max(0,Math.min(maxTop,pos.pageY-epos[1]-5)),left=0


ace.container.parentNode.appendChild(win.$ext),win.show(),win.$ext.style.top=top+"px",!noanim&&settings.getBool("user/general/@animateui")?(win.setWidth(0),
anims.animate(win,{width:"60px",duration:.15,timingFunction:"cubic-bezier(.11, .93, .84, 1)"},function(){
win.$ext.style.left=left+"px"})):win.setWidth(60),input.focus()}}function hide(){nohide||(settings.getBool("user/general/@animateui")?anims.animate(win,{
width:"0px",duration:.15,timingFunction:"cubic-bezier(.10, .10, .25, .90)"},function(){win.hide()}):win.hide())

}function gotoline(force){draw(),control&&control.stop&&control.stop()
var tab=tabs.focussedTab,editor=tab&&tab.editor
if(editor&&"ace"==editor.type)return 2!=force&&!win.visible||1==force?show():hide(),!1}function execGotoLine(line,column,preview){
var tab=tabs.focussedTab&&tabs.focussedTab,editor=tab&&tab.editor
if(editor&&"ace"==editor.type){var ace=editor.ace,aceHtml=ace.container
if("number"!=typeof line&&(line=parseInt(input.getValue(),10)||0),ace.gotoLine(line,column),lastLine=line,
"undefined"!=typeof preview){var animate=settings.getBool("user/ace/@animatedScroll")
if(!animate)return
var cursor=ace.getCursorPosition(),renderer=ace.renderer,pos=renderer.textToScreenCoordinates(cursor.row,cursor.column),maxTop=renderer.$size.height-win.getHeight()-10,epos=ui.getAbsolutePosition(aceHtml),sm=renderer.scrollMargin,scrollTop=ace.session.getScrollTop()


scrollTop=Math.max(-sm.top,Math.min(scrollTop,renderer.layerConfig.maxHeight-renderer.$size.scrollerHeight+sm.v))


var top=Math.min(pos.pageY-epos[1]-2+renderer.scrollTop-scrollTop,maxTop)
lineControl&&lineControl.stop(),anims.animate(win,{top:top+"px",duration:.25,timingFunction:"cubic-bezier(.11, .93, .84, 1)"
},function(){win.$ext.style.left="0px"})}else{hide()
var i=lines.indexOf(line)
i!=-1&&lines.splice(i,1),i&&(lines.unshift(line),changed=!0,settings.save()),tabs.focusTab(tab)}}}var originalLine,originalColumn,control,lastLine,lineControl,nohide,originalPath,win,input,list,lines,Plugin=(imports.c9,
imports.Plugin),settings=imports.settings,ui=imports.ui,anims=imports.anims,menus=imports.menus,commands=imports.commands,tabs=imports.tabManager,skin=require("text!./skin.xml"),markup=require("text!./gotoline.xml"),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),loaded=!1,changed=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({gotoline:function(line,column,preview){
return gotoline(1),execGotoLine(line,column,preview)},show:function(){gotoline(1)},hide:function(){gotoline(2)

}}),register(null,{"ace.gotoline":plugin})}return main.consumes=["Plugin","c9","settings","ui","anims","menus","commands","util","tabManager"],
main.provides=["ace.gotoline"],main})


define("plugins/c9.ide.ace.repl/editor",[],function(require,exports,module){function main(options,imports,register){
function ReplEditor(){var currentSession,ace,Baseclass=editors.findEditor("ace"),plugin=new Baseclass((!0),[])


return plugin.on("draw",function(e){ace=plugin.ace,currentSession&&currentSession.repl.attach(ace)}),
plugin.on("load",function(){}),plugin.on("documentLoad",function(e){var session=e.doc.getSession()
session.repl||(session.repl=new Repl(session.session,{mode:e.state.mode,evaluator:e.state.evaluator,message:e.state.message
}))}),plugin.on("documentActivate",function(e){currentSession=e.doc.getSession(),ace&&currentSession.repl.attach(ace)

}),plugin.on("documentUnload",function(e){var session=e.doc.getSession()
session.repl.detach(),delete session.repl}),plugin.on("getState",function(e){}),plugin.on("setState",function(e){}),
plugin.on("clear",function(){}),plugin.on("focus",function(){}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){}),plugin.freezePublicAPI({}),plugin.load(null,"ace.repl"),plugin}var editors=imports.editors,Repl=require("./repl").Repl,extensions=[]


register(null,{"ace.repl":editors.register("ace.repl","Ace REPL",ReplEditor,extensions)})}return main.consumes=["editors"],
main.provides=["ace.repl"],main})


define("plugins/c9.ide.ace.stripws/stripws",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,commands.addCommand({name:"stripws",hint:"strip whitespace at the end of each line",
exec:function(){stripws()},isAvailable:function(editor){return editor&&tabs.focussedTab&&"string"==typeof tabs.focussedTab.path

}},plugin),menus.addItemByPath("Tools/Strip Trailing Space",new ui.item({command:"stripws"}),100,plugin),
menus.addItemByPath("Tools/~",new ui.divider,200,plugin),save.on("beforeSave",function(e){var shouldStrip=settings.getBool("project/general/@stripws")


if(shouldStrip&&!e.options.silentsave){var keepCursorPosition=settings.getBool("user/general/@stripwsKeepCursorPosition")


stripws(e.document.tab,{keepCursorPosition:keepCursorPosition})}},plugin),settings.on("read",function(e){
settings.setDefaults("project/general",[["stripws",!!settings.getBool("user/general/@stripws")]])},plugin),
void prefs.add({Project:{position:150,"Code Editor (Ace)":{"On Save, Strip Whitespace":{type:"checkbox",
position:900,path:"project/general/@stripws"}}}},plugin))}function stripws(tab,options){if(tab=tab||tabs.focussedTab,
tab&&tab.path&&!disabled){options=options||{},options.trimEmpty=!0
var session=tab.document.getSession().session
whitespaceUtil.trimTrailingSpace(session,options),session.$syncInformUndoManager()}}var Plugin=imports.Plugin,menus=imports.menus,commands=imports.commands,tabs=imports.tabManager,settings=imports.settings,prefs=imports.preferences,save=imports.save,ui=imports.ui,whitespaceUtil=require("ace/ext/whitespace"),plugin=new Plugin("Ajax.org",main.consumes),disabled=!1,loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){disabled=!1}),plugin.on("disable",function(){
disabled=!0}),plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({strpws:stripws}),register(null,{
"ace.stripws":plugin})}return main.consumes=["Plugin","menus","commands","tabManager","settings","preferences","save","ui"],
main.provides=["ace.stripws"],main})


define("plugins/c9.ide.ace/themes",[],function(require,exports,module){function main(options,imports,register){
function load(){function update(){if(drawn){var list=getThemes()
plugin.form.update([{id:"syntax",items:list}])}}return!loaded&&(loaded=!0,ace.on("addTheme",update),void ace.on("removeTheme",update))

}function draw(e){if(!drawn){drawn=!0
var rb1,rb2,rb5,rb6,list=getThemes(),flatThemes=[]
rb6=new ui.radiobutton({group:"theme-color","class":"themepicker",style:"background:#252525;",value:"flat-dark"
}),rb5=new ui.radiobutton({group:"theme-color","class":"themepicker",style:"background:#dcdbdb;",value:"flat-light"
}),FLATDARK&&flatThemes.push(rb6),flatThemes.push(rb5),plugin.form.add([{type:"custom",title:"Introduction",
position:1,node:intro=new ui.bar({height:124,"class":"intro",style:"padding:12px;position:relative;"})
},{type:"custom",title:"Flat Theme",position:1,node:new ui.hsplitbox({height:49,edge:"10 10 10 10",style:"white-space:nowrap",
childNodes:[new ui.label({width:150,caption:"Flat Theme:",style:"padding-top:5px"}),new ui.bar({childNodes:flatThemes
})]})},{type:"custom",title:"Classic Theme",position:1,node:new ui.hsplitbox({height:49,edge:"10 10 10 10",
style:"white-space:nowrap",childNodes:[new ui.label({width:150,caption:"Classic Theme:",style:"padding-top:5px"
}),new ui.bar({childNodes:[rb1=new ui.radiobutton({group:"theme-color","class":"themepicker",style:"background:#252525;",
value:"dark"}),rb2=new ui.radiobutton({group:"theme-color","class":"themepicker",style:"background:#3f3f3f;",
value:"dark-gray"})]})]})},{title:"Syntax Theme",type:"dropdown",path:"user/ace/@theme",name:"syntax",
width:165,onchange:function(e){ace.setTheme(e.value)},items:list,position:200}],plugin)
var change=function(e){settings.set("user/general/@skin",e.value)},setTheme=function(e){[rb1,rb2,rb5,rb6].some(function(rb){
if(rb.value==e.value)return rb.select(),!0})}
settings.on("user/general/@skin",setTheme),setTheme({value:settings.get("user/general/@skin")}),rb1.$group.on("afterchange",change),
ui.buildDom([["h1",null,"Themes"],["p",null,"You can also style Cloud9 by editing ",["a",{href:"javascript:void(0)",
onclick:function(){configure.editStylesCss()}},"your stylesheet"]],["p",{"class":"hint"},"Set all the colors free!"]],intro.$int)

}}function getThemes(){var list=[],themes=ace.themes
for(var base in themes)themes[base]instanceof Array?themes[base].forEach(function(n){var themeprop=Object.keys(n)[0]


list.push({caption:themeprop,value:n[themeprop]})}):list.push({caption:base,value:themes[base]})
return list}var intro,drawn,PreferencePanel=imports.PreferencePanel,ui=imports.ui,ace=imports.ace,configure=imports.configure,settings=imports.settings,experimental=imports["preferences.experimental"],FLATDARK=experimental.addExperiment("flat-dark",!1,"UI/Flat Dark Theme"),plugin=new PreferencePanel("Ajax.org",main.consumes,{
caption:"Themes",className:"flatform",form:!0,noscroll:!0,colwidth:150,index:300}),loaded=!1
plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("unload",function(){
loaded=!1,drawn=!1}),plugin.freezePublicAPI({}),register(null,{"preferences.themes":plugin})}return main.consumes=["PreferencePanel","ace","ui","configure","settings","preferences.experimental"],
main.provides=["preferences.themes"],main})


define("text!plugins/c9.ide.ace/style.less",[],"")


define("text!plugins/c9.ide.ace/themes.json",[],'{\n    "Ambiance" : "ace/theme/ambiance",\n    "Chrome" : "ace/theme/chrome",\n    "Cloud9" : [\n                   {"Cloud9 Day" : "ace/theme/cloud9_day"},\n                   {"Cloud9 Night" : "ace/theme/cloud9_night"},\n                   {"Cloud9 Night Low-Color" : "ace/theme/cloud9_night_low_color"}\n               ],\n    "Clouds" : [\n                   {"Clouds" : "ace/theme/clouds"},\n                   {"Clouds Midnight" : "ace/theme/clouds_midnight"}\n               ],\n    "Cobalt" : "ace/theme/cobalt",\n    "Crimson Editor" : "ace/theme/crimson_editor",\n    "Dawn" : "ace/theme/dawn",\n    "Dreamweaver" : "ace/theme/dreamweaver",\n    "Eclipse" : "ace/theme/eclipse",\n    "GitHub" : "ace/theme/github",\n    "Idle Fingers" : "ace/theme/idle_fingers",\n    "Kr Theme" : "ace/theme/kr_theme",\n    "Merbivore" : [\n                      {"Merbivore" : "ace/theme/merbivore"},\n                      {"Merbivore Soft" : "ace/theme/merbivore_soft"}\n                  ],\n    "Mono Industrial" : "ace/theme/mono_industrial",\n    "Monokai" : "ace/theme/monokai",\n    "Pastel On Dark" : "ace/theme/pastel_on_dark",\n    "Solarized" : [\n                    {"Solarized Dark" : "ace/theme/solarized_dark"},\n                    {"Solarized Light" : "ace/theme/solarized_light"}\n                  ],\n    "TextMate" : "ace/theme/textmate",\n    "Tomorrow" :  [\n                    {"Tomorrow" : "ace/theme/tomorrow"},\n                    {"Tomorrow Night" : "ace/theme/tomorrow_night"},\n                    {"Tomorrow Night Blue" : "ace/theme/tomorrow_night_blue"},\n                    {"Tomorrow Night Bright" : "ace/theme/tomorrow_night_bright"},\n                    {"Tomorrow Night Eighties" : "ace/theme/tomorrow_night_eighties"}\n                 ],\n    "Twilight" : "ace/theme/twilight",\n    "Vibrant Ink" : "ace/theme/vibrant_ink",\n    "Xcode" : "ace/theme/xcode"\n}')


define("plugins/c9.ide.ace/modes",[],function(require,exports,module){var modesByName=require("ace/ext/modelist").modesByName


modesByName.javascript.extensions+="|run|build|outline"
var primaryModes=["c_cpp","clojure","coffee","csharp","css","dart","golang","html","jade","java","javascript","json","less","lua","perl","php","python","ruby","scala","scss","sh","stylus","sql","text","typescript","xml","xquery","yaml"],hiddenModes=["text","snippets"],fileExtensions=Object.create(null),modesByCaption=Object.create(null),customExtensions=Object.create(null)


Object.keys(modesByName).forEach(function(name){var mode=modesByName[name]
modesByCaption[mode.caption]=mode,mode.id=name,primaryModes.indexOf(mode.name)!=-1?mode.order=1e5:hiddenModes.indexOf(mode.name)!=-1?mode.order=-1:mode.order=0,
mode.extensions.split("|").forEach(function(ext){fileExtensions[ext]||(fileExtensions[ext]=name)})}),
module.exports={byName:modesByName,extensions:fileExtensions,customExtensions:customExtensions,byCaption:modesByCaption
}})


define("plugins/c9.ide.ace/scrollbar",[],function(require,exports,module){var dom=require("ace/lib/dom")


dom.scrollbarWidth(document)&&dom.importCssString("::-webkit-scrollbar {   background: none;   width: 16px;   height: 16px;}::-webkit-scrollbar-thumb {    border: solid 0 rgba(0, 0, 0, 0);    border-right-width: 4px;    border-left-width: 4px;    -webkit-border-radius: 9px 4px;    -webkit-box-shadow: inset 0 0 0 1px rgba(128, 128, 128, 0.2), inset 0 0 0 4px rgba(128, 128, 128, 0.2);}::-webkit-scrollbar-track-piece {    margin: 4px 0;}::-webkit-scrollbar-thumb:horizontal {    border-right-width: 0;    border-left-width: 0;    border-top-width: 4px;    border-bottom-width: 4px;    -webkit-border-radius: 4px 9px;}::-webkit-scrollbar-thumb:hover {    -webkit-box-shadow:      inset 0 0 0 1px rgba(128,128,128,0.9),      inset 0 0 0 4px rgba(128,128,128,0.9);}::-webkit-scrollbar-corner {    background: transparent;}.ace_scrollbar-h{margin: 0 2px}")

})


define("ace/ext/error_marker",[],function(require,exports,module){"use strict"
function binarySearch(array,needle,comparator){for(var first=0,last=array.length-1;first<=last;){var mid=first+last>>1,c=comparator(needle,array[mid])


if(c>0)first=mid+1
else{if(!(c<0))return mid
last=mid-1}}return-(first+1)}function findAnnotations(session,row,dir){var annotations=session.getAnnotations().sort(Range.comparePoints)


if(annotations.length){var i=binarySearch(annotations,{row:row,column:-1},Range.comparePoints)
i<0&&(i=-i-1),i>=annotations.length?i=dir>0?0:annotations.length-1:0===i&&dir<0&&(i=annotations.length-1)


var annotation=annotations[i]
if(annotation&&dir){if(annotation.row===row){do annotation=annotations[i+=dir]
while(annotation&&annotation.row===row)
if(!annotation)return annotations.slice()}var matched=[]
row=annotation.row
do matched[dir<0?"unshift":"push"](annotation),annotation=annotations[i+=dir]
while(annotation&&annotation.row==row)
return matched.length&&matched}}}var LineWidgets=require("../line_widgets").LineWidgets,dom=require("../lib/dom"),Range=require("../range").Range


exports.showErrorMarker=function(editor,dir){var session=editor.session
session.widgetManager||(session.widgetManager=new LineWidgets(session),session.widgetManager.attach(editor))


var pos=editor.getCursorPosition(),row=pos.row,oldWidget=session.widgetManager.getWidgetsAtRow(row).filter(function(w){
return"errorMarker"==w.type})[0]
oldWidget?oldWidget.destroy():row-=dir
var gutterAnno,annotations=findAnnotations(session,row,dir)
if(annotations){var annotation=annotations[0]
pos.column=(annotation.pos&&"number"!=typeof annotation.column?annotation.pos.sc:annotation.column)||0,
pos.row=annotation.row,gutterAnno=editor.renderer.$gutterLayer.$annotations[pos.row]}else{if(oldWidget)return


gutterAnno={text:["Looks good!"],className:"ace_ok"}}editor.session.unfold(pos.row),editor.selection.moveToPosition(pos)


var w={row:pos.row,fixedWidth:!0,coverGutter:!0,el:dom.createElement("div"),type:"errorMarker"},el=w.el.appendChild(dom.createElement("div")),arrow=w.el.appendChild(dom.createElement("div"))


arrow.className="error_widget_arrow "+gutterAnno.className
var left=editor.renderer.$cursorLayer.getPixelPosition(pos).left
arrow.style.left=left+editor.renderer.gutterWidth-5+"px",w.el.className="error_widget_wrapper",el.className="error_widget "+gutterAnno.className,
el.innerHTML=gutterAnno.text.join("<br>"),el.appendChild(dom.createElement("div"))
var kb=function(_,hashId,keyString){if(0===hashId&&("esc"===keyString||"return"===keyString))return w.destroy(),
{command:"null"}}
w.destroy=function(){editor.$mouseHandler.isMousePressed||(editor.keyBinding.removeKeyboardHandler(kb),
session.widgetManager.removeLineWidget(w),editor.off("changeSelection",w.destroy),editor.off("changeSession",w.destroy),
editor.off("mouseup",w.destroy),editor.off("change",w.destroy))},editor.keyBinding.addKeyboardHandler(kb),
editor.on("changeSelection",w.destroy),editor.on("changeSession",w.destroy),editor.on("mouseup",w.destroy),
editor.on("change",w.destroy),editor.session.widgetManager.addLineWidget(w),w.el.onmousedown=editor.focus.bind(editor),
editor.renderer.scrollCursorIntoView(null,.5,{bottom:w.el.offsetHeight})},dom.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")

})


define("ace/mode/doc_comment_highlight_rules",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,DocCommentHighlightRules=function(){
this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},DocCommentHighlightRules.getTagRule(),{
defaultToken:"comment.doc",caseInsensitive:!0}]}}
oop.inherits(DocCommentHighlightRules,TextHighlightRules),DocCommentHighlightRules.getTagRule=function(start){
return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},DocCommentHighlightRules.getStartRule=function(start){
return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:start}},DocCommentHighlightRules.getEndRule=function(start){
return{token:"comment.doc",regex:"\\*\\/",next:start}},exports.DocCommentHighlightRules=DocCommentHighlightRules

})


define("ace/mode/javascript_highlight_rules",[],function(require,exports,module){"use strict"
function JSX(){var tagRegex=identifierRe.replace("\\d","\\d\\-"),jsxTag={onMatch:function(val,state,stack){
var offset="/"==val.charAt(1)?2:1
return 1==offset?(state!=this.nextState?stack.unshift(this.next,this.nextState,0):stack.unshift(this.next),
stack[2]++):2==offset&&state==this.nextState&&(stack[1]--,(!stack[1]||stack[1]<0)&&(stack.shift(),stack.shift())),
[{type:"meta.tag.punctuation."+(1==offset?"":"end-")+"tag-open.xml",value:val.slice(0,offset)},{type:"meta.tag.tag-name.xml",
value:val.substr(offset)}]},regex:"</?"+tagRegex,next:"jsxAttributes",nextState:"jsx"}
this.$rules.start.unshift(jsxTag)
var jsxJsRule={regex:"{",token:"paren.quasi.start",push:"start"}
this.$rules.jsx=[jsxJsRule,jsxTag,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{
token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(value,currentState,stack){return currentState==stack[0]&&stack.shift(),
2==value.length&&(stack[0]==this.nextState&&stack[1]--,(!stack[1]||stack[1]<0)&&stack.splice(0,2)),this.next=stack[0]||"start",
[{type:this.token,value:value}]},nextState:"jsx"},jsxJsRule,comments("jsxAttributes"),{token:"entity.other.attribute-name.xml",
regex:tagRegex},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",
regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",
regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",
regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"
},{defaultToken:"string.attribute-value.xml"}]},jsxTag],this.$rules.reference=[{token:"constant.language.escape.reference.xml",
regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function comments(next){return[{
token:"comment",regex:/\/\*/,next:[DocCommentHighlightRules.getTagRule(),{token:"comment",regex:"\\*\\/",
next:next||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[DocCommentHighlightRules.getTagRule(),{
token:"comment",regex:"$|^",next:next||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}var oop=require("../lib/oop"),DocCommentHighlightRules=require("./doc_comment_highlight_rules").DocCommentHighlightRules,TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,identifierRe="[a-zA-Z\\$_\xa1-\uffff][a-zA-Z\\d\\$_\xa1-\uffff]*",JavaScriptHighlightRules=function(options){
var keywordMapper=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",
keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static",
"storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert",
"constant.language.boolean":"true|false"},"identifier"),kwBeforeRe="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",escapedRe="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)"


this.$rules={no_regex:[DocCommentHighlightRules.getStartRule("doc-start"),comments("no_regex"),{token:"string",
regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",
regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/
},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],
regex:"("+identifierRe+")(\\.)(prototype)(\\.)("+identifierRe+")(\\s*)(=)",next:"function_arguments"},{
token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],
regex:"("+identifierRe+")(\\.)("+identifierRe+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"
},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],
regex:"("+identifierRe+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],
regex:"("+identifierRe+")(\\.)("+identifierRe+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"
},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+identifierRe+")(\\s*)(\\()",
next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],
regex:"("+identifierRe+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],
regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"from(?=\\s*('|\"))"
},{token:"keyword",regex:"(?:"+kwBeforeRe+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/
},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/
},{token:keywordMapper,regex:identifierRe},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"
},{token:"storage.type",regex:/=>/},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,
next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,
next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",
regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],
regex:"("+identifierRe+")(\\.)("+identifierRe+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",
next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",
regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/
},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/
},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/
},{token:"identifier",regex:identifierRe},{regex:"",token:"empty",next:"no_regex"}],start:[DocCommentHighlightRules.getStartRule("doc-start"),comments("start"),{
token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",
regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"
},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/
},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",
regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",
regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",
regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"
},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"
}],function_arguments:[{token:"variable.parameter",regex:identifierRe},{token:"punctuation.operator",
regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{
token:"constant.language.escape",regex:escapedRe},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",
regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:escapedRe
},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"
}]},options&&options.noES6||(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(val,state,stack){
if(this.next="{"==val?this.nextState:"","{"==val&&stack.length)stack.unshift("start",state)
else if("}"==val&&stack.length&&(stack.shift(),this.next=stack.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end"


return"{"==val?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,
push:[{token:"constant.language.escape",regex:escapedRe},{token:"paren.quasi.start",regex:/\${/,push:"start"
},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),options&&0==options.jsx||JSX.call(this)),
this.embedRules(DocCommentHighlightRules,"doc-",[DocCommentHighlightRules.getEndRule("no_regex")]),this.normalizeRules()

}
oop.inherits(JavaScriptHighlightRules,TextHighlightRules),exports.JavaScriptHighlightRules=JavaScriptHighlightRules

})


define("ace/mode/folding/cstyle",[],function(require,exports,module){"use strict"
var oop=require("../../lib/oop"),Range=require("../../range").Range,BaseFoldMode=require("./fold_mode").FoldMode,FoldMode=exports.FoldMode=function(commentRegex){
commentRegex&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+commentRegex.start)),
this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+commentRegex.end)))

}
oop.inherits(FoldMode,BaseFoldMode),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,
this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,
this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,
this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(session,foldStyle,row){var line=session.getLine(row)


if(this.singleLineBlockCommentRe.test(line)&&!this.startRegionRe.test(line)&&!this.tripleStarBlockCommentRe.test(line))return""


var fw=this._getFoldWidgetBase(session,foldStyle,row)
return!fw&&this.startRegionRe.test(line)?"start":fw},this.getFoldWidgetRange=function(session,foldStyle,row,forceMultiline){
var line=session.getLine(row)
if(this.startRegionRe.test(line))return this.getCommentRegionBlock(session,line,row)
var match=line.match(this.foldingStartMarker)
if(match){var i=match.index
if(match[1])return this.openingBracketBlock(session,match[1],row,i)
var range=session.getCommentFoldRange(row,i+match[0].length,1)
return range&&!range.isMultiLine()&&(forceMultiline?range=this.getSectionRange(session,row):"all"!=foldStyle&&(range=null)),
range}if("markbegin"!==foldStyle){var match=line.match(this.foldingStopMarker)
if(match){var i=match.index+match[0].length
return match[1]?this.closingBracketBlock(session,match[1],row,i):session.getCommentFoldRange(row,i,-1)

}}},this.getSectionRange=function(session,row){var line=session.getLine(row),startIndent=line.search(/\S/),startRow=row,startColumn=line.length


row+=1
for(var endRow=row,maxRow=session.getLength();++row<maxRow;){line=session.getLine(row)
var indent=line.search(/\S/)
if(indent!==-1){if(startIndent>indent)break
var subRange=this.getFoldWidgetRange(session,"all",row)
if(subRange){if(subRange.start.row<=startRow)break
if(subRange.isMultiLine())row=subRange.end.row
else if(startIndent==indent)break}endRow=row}}return new Range(startRow,startColumn,endRow,session.getLine(endRow).length)

},this.getCommentRegionBlock=function(session,line,row){for(var startColumn=line.search(/\s*$/),maxRow=session.getLength(),startRow=row,re=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,depth=1;++row<maxRow;){
line=session.getLine(row)
var m=re.exec(line)
if(m&&(m[1]?depth--:depth++,!depth))break}var endRow=row
if(endRow>startRow)return new Range(startRow,startColumn,endRow,line.length)}}.call(FoldMode.prototype)

})


define("ace/mode/javascript",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),TextMode=require("./text").Mode,JavaScriptHighlightRules=require("./javascript_highlight_rules").JavaScriptHighlightRules,MatchingBraceOutdent=require("./matching_brace_outdent").MatchingBraceOutdent,WorkerClient=require("../worker/worker_client").WorkerClient,CstyleBehaviour=require("./behaviour/cstyle").CstyleBehaviour,CStyleFoldMode=require("./folding/cstyle").FoldMode,Mode=function(){
this.HighlightRules=JavaScriptHighlightRules,this.$outdent=new MatchingBraceOutdent,this.$behaviour=new CstyleBehaviour,
this.foldingRules=new CStyleFoldMode}
oop.inherits(Mode,TextMode),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"
},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line),tokenizedLine=this.getTokenizer().getLineTokens(line,state),tokens=tokenizedLine.tokens,endState=tokenizedLine.state


if(tokens.length&&"comment"==tokens[tokens.length-1].type)return indent
if("start"==state||"no_regex"==state){var match=line.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/)
match&&(indent+=tab)}else if("doc-start"==state){if("start"==endState||"no_regex"==endState)return""
var match=line.match(/^\s*(\/?)\*/)
match&&(match[1]&&(indent+=" "),indent+="* ")}return indent},this.checkOutdent=function(state,line,input){
return this.$outdent.checkOutdent(line,input)},this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)

},this.createWorker=function(session){var worker=new WorkerClient(["ace"],"ace/mode/javascript_worker","JavaScriptWorker")


return worker.attachToDocument(session.getDocument()),worker.on("annotate",function(results){session.setAnnotations(results.data)

}),worker.on("terminate",function(){session.clearAnnotations()}),worker},this.$id="ace/mode/javascript"

}.call(Mode.prototype),exports.Mode=Mode})


define("ace/mode/css_highlight_rules",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),TextHighlightRules=(require("../lib/lang"),require("./text_highlight_rules").TextHighlightRules),supportType=exports.supportType="align-content|align-items|align-self|all|animation|animation-delay|animation-direction|animation-duration|animation-fill-mode|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|backface-visibility|background|background-attachment|background-blend-mode|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|border|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|bottom|box-shadow|box-sizing|caption-side|clear|clip|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|cursor|direction|display|empty-cells|filter|flex|flex-basis|flex-direction|flex-flow|flex-grow|flex-shrink|flex-wrap|float|font|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|hanging-punctuation|height|justify-content|left|letter-spacing|line-height|list-style|list-style-image|list-style-position|list-style-type|margin|margin-bottom|margin-left|margin-right|margin-top|max-height|max-width|min-height|min-width|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|order|outline|outline-color|outline-offset|outline-style|outline-width|overflow|overflow-x|overflow-y|padding|padding-bottom|padding-left|padding-right|padding-top|page-break-after|page-break-before|page-break-inside|perspective|perspective-origin|position|quotes|resize|right|tab-size|table-layout|text-align|text-align-last|text-decoration|text-decoration-color|text-decoration-line|text-decoration-style|text-indent|text-justify|text-overflow|text-shadow|text-transform|top|transform|transform-origin|transform-style|transition|transition-delay|transition-duration|transition-property|transition-timing-function|unicode-bidi|vertical-align|visibility|white-space|width|word-break|word-spacing|word-wrap|z-index",supportFunction=exports.supportFunction="rgb|rgba|url|attr|counter|counters",supportConstant=exports.supportConstant="absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero",supportConstantColor=exports.supportConstantColor="aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen",supportConstantFonts=exports.supportConstantFonts="arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace",numRe=exports.numRe="\\-?(?:(?:[0-9]+(?:\\.[0-9]+)?)|(?:\\.[0-9]+))",pseudoElements=exports.pseudoElements="(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b",pseudoClasses=exports.pseudoClasses="(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b",CssHighlightRules=function(){
var keywordMapper=this.createKeywordMapper({"support.function":supportFunction,"support.constant":supportConstant,
"support.type":supportType,"support.constant.color":supportConstantColor,"support.constant.fonts":supportConstantFonts
},"text",!0)
this.$rules={start:[{include:["strings","url","comments"]},{token:"paren.lparen",regex:"\\{",next:"ruleset"
},{token:"paren.rparen",regex:"\\}"},{token:"string",regex:"@",next:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"
},{token:"keyword",regex:"%"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"
},{token:"constant.numeric",regex:numRe},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:!0}],
media:[{include:["strings","url","comments"]},{token:"paren.lparen",regex:"\\{",next:"start"},{token:"paren.rparen",
regex:"\\}",next:"start"},{token:"string",regex:";",next:"start"},{token:"keyword",regex:"(?:media|supports|document|charset|import|namespace|media|supports|document|page|font|keyframes|viewport|counter-style|font-feature-values|swash|ornaments|annotation|stylistic|styleset|character-variant)"
}],comments:[{token:"comment",regex:"\\/\\*",push:[{token:"comment",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"
}]}],ruleset:[{regex:"-(webkit|ms|moz|o)-",token:"text"},{token:"paren.rparen",regex:"\\}",next:"start"
},{include:["strings","url","comments"]},{token:["constant.numeric","keyword"],regex:"("+numRe+")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vm|vw|%)"
},{token:"constant.numeric",regex:numRe},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",
regex:"#[a-f0-9]{3}"},{token:["punctuation","entity.other.attribute-name.pseudo-element.css"],regex:pseudoElements
},{token:["punctuation","entity.other.attribute-name.pseudo-class.css"],regex:pseudoClasses},{include:"url"
},{token:keywordMapper,regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"},{caseInsensitive:!0}],url:[{token:"support.function",
regex:"(?:url(:?-prefix)?|domain|regexp)\\(",push:[{token:"support.function",regex:"\\)",next:"pop"},{
defaultToken:"string"}]}],strings:[{token:"string.start",regex:"'",push:[{token:"string.end",regex:"'|$",
next:"pop"},{include:"escapes"},{token:"constant.language.escape",regex:/\\$/,consumeLineEnd:!0},{defaultToken:"string"
}]},{token:"string.start",regex:'"',push:[{token:"string.end",regex:'"|$',next:"pop"},{include:"escapes"
},{token:"constant.language.escape",regex:/\\$/,consumeLineEnd:!0},{defaultToken:"string"}]}],escapes:[{
token:"constant.language.escape",regex:/\\([a-fA-F\d]{1,6}|[^a-fA-F\d])/}]},this.normalizeRules()}
oop.inherits(CssHighlightRules,TextHighlightRules),exports.CssHighlightRules=CssHighlightRules})


define("ace/mode/behaviour/css",[],function(require,exports,module){"use strict"
var oop=require("../../lib/oop"),CstyleBehaviour=(require("../behaviour").Behaviour,require("./cstyle").CstyleBehaviour),TokenIterator=require("../../token_iterator").TokenIterator,CssBehaviour=function(){
this.inherit(CstyleBehaviour),this.add("colon","insertion",function(state,action,editor,session,text){
if(":"===text){var cursor=editor.getCursorPosition(),iterator=new TokenIterator(session,cursor.row,cursor.column),token=iterator.getCurrentToken()


if(token&&token.value.match(/\s+/)&&(token=iterator.stepBackward()),token&&"support.type"===token.type){
var line=session.doc.getLine(cursor.row),rightChar=line.substring(cursor.column,cursor.column+1)
if(":"===rightChar)return{text:"",selection:[1,1]}
if(!line.substring(cursor.column).match(/^\s*;/))return{text:":;",selection:[1,1]}}}}),this.add("colon","deletion",function(state,action,editor,session,range){
var selected=session.doc.getTextRange(range)
if(!range.isMultiLine()&&":"===selected){var cursor=editor.getCursorPosition(),iterator=new TokenIterator(session,cursor.row,cursor.column),token=iterator.getCurrentToken()


if(token&&token.value.match(/\s+/)&&(token=iterator.stepBackward()),token&&"support.type"===token.type){
var line=session.doc.getLine(range.start.row),rightChar=line.substring(range.end.column,range.end.column+1)


if(";"===rightChar)return range.end.column++,range}}}),this.add("semicolon","insertion",function(state,action,editor,session,text){
if(";"===text){var cursor=editor.getCursorPosition(),line=session.doc.getLine(cursor.row),rightChar=line.substring(cursor.column,cursor.column+1)


if(";"===rightChar)return{text:"",selection:[1,1]}}})}
oop.inherits(CssBehaviour,CstyleBehaviour),exports.CssBehaviour=CssBehaviour})


define("ace/mode/css",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),TextMode=require("./text").Mode,CssHighlightRules=require("./css_highlight_rules").CssHighlightRules,MatchingBraceOutdent=require("./matching_brace_outdent").MatchingBraceOutdent,WorkerClient=require("../worker/worker_client").WorkerClient,CssBehaviour=require("./behaviour/css").CssBehaviour,CStyleFoldMode=require("./folding/cstyle").FoldMode,Mode=function(){
this.HighlightRules=CssHighlightRules,this.$outdent=new MatchingBraceOutdent,this.$behaviour=new CssBehaviour,
this.foldingRules=new CStyleFoldMode}
oop.inherits(Mode,TextMode),function(){this.foldingRules="cStyle",this.blockComment={start:"/*",end:"*/"
},this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line),tokens=this.getTokenizer().getLineTokens(line,state).tokens


if(tokens.length&&"comment"==tokens[tokens.length-1].type)return indent
var match=line.match(/^.*\{\s*$/)
return match&&(indent+=tab),indent},this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)

},this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)},this.getCompletions=function(state,session,pos,prefix){
return this.$completer.getCompletions(state,session,pos,prefix)},this.createWorker=function(session){
var worker=new WorkerClient(["ace"],"ace/mode/css_worker","Worker")
return worker.attachToDocument(session.getDocument()),worker.on("annotate",function(e){session.setAnnotations(e.data)

}),worker.on("terminate",function(){session.clearAnnotations()}),worker},this.$id="ace/mode/css"}.call(Mode.prototype),
exports.Mode=Mode})


define("ace/mode/xml_highlight_rules",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),TextHighlightRules=require("./text_highlight_rules").TextHighlightRules,XmlHighlightRules=function(normalize){
var tagRegex="[_:a-zA-Z\xc0-\uffff][-_:.a-zA-Z0-9\xc0-\uffff]*"
this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.instruction.xml","keyword.instruction.xml"],
regex:"(<\\?)("+tagRegex+")",next:"processing_instruction"},{token:"comment.start.xml",regex:"<\\!--",
next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",
caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",
regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],processing_instruction:[{token:"entity.other.attribute-name.decl-attribute-name.xml",
regex:tagRegex},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{
include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],doctype:[{include:"whitespace"
},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"
},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"
},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],
regex:"(<\\!)("+tagRegex+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",
next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",
regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.end.xml",regex:"-->",
next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",
regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",
regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],
regex:"(?:(<)|(</))((?:"+tagRegex+":)?"+tagRegex+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",
regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{
token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",
regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",
regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",
regex:tagRegex},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{
include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",
regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",
regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{
defaultToken:"string.attribute-value.xml"}]}]},this.constructor===XmlHighlightRules&&this.normalizeRules()

};(function(){this.embedTagRules=function(HighlightRules,prefix,tag){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+tag+".tag-name.xml"],
regex:"(<)("+tag+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",
regex:"/?>",next:prefix+"start"}]}),this.$rules[tag+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",
regex:"/?>",next:"start",onMatch:function(value,currentState,stack){return stack.splice(0),this.token

}}],this.embedRules(HighlightRules,prefix,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+tag+".tag-name.xml"],
regex:"(</)("+tag+"(?=\\s|>|$))",next:tag+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{
token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(TextHighlightRules.prototype),oop.inherits(XmlHighlightRules,TextHighlightRules),
exports.XmlHighlightRules=XmlHighlightRules})


define("ace/mode/html_highlight_rules",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),lang=require("../lib/lang"),CssHighlightRules=require("./css_highlight_rules").CssHighlightRules,JavaScriptHighlightRules=require("./javascript_highlight_rules").JavaScriptHighlightRules,XmlHighlightRules=require("./xml_highlight_rules").XmlHighlightRules,tagMap=lang.createMap({
a:"anchor",button:"form",form:"form",img:"image",input:"form",label:"form",option:"form",script:"script",
select:"form",textarea:"form",style:"style",table:"table",tbody:"table",td:"table",tfoot:"table",th:"table",
tr:"table"}),HtmlHighlightRules=function(){XmlHighlightRules.call(this),this.addRules({attributes:[{include:"tag_whitespace"
},{token:"entity.other.attribute-name.xml",regex:"[-_a-zA-Z0-9:.]+"},{token:"keyword.operator.attribute-equals.xml",
regex:"=",push:[{include:"tag_whitespace"},{token:"string.unquoted.attribute-value.html",regex:"[^<>='\"`\\s]+",
next:"pop"},{token:"empty",regex:"",next:"pop"}]},{include:"attribute_value"}],tag:[{token:function(start,tag){
var group=tagMap[tag]
return["meta.tag.punctuation."+("<"==start?"":"end-")+"tag-open.xml","meta.tag"+(group?"."+group:"")+".tag-name.xml"]

},regex:"(</?)([-_a-zA-Z0-9:.]+)",next:"tag_stuff"}],tag_stuff:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",
regex:"/?>",next:"start"}]}),this.embedTagRules(CssHighlightRules,"css-","style"),this.embedTagRules(new JavaScriptHighlightRules({
jsx:!1}).getRules(),"js-","script"),this.constructor===HtmlHighlightRules&&this.normalizeRules()}
oop.inherits(HtmlHighlightRules,XmlHighlightRules),exports.HtmlHighlightRules=HtmlHighlightRules})


define("ace/mode/behaviour/xml",[],function(require,exports,module){"use strict"
function is(token,type){return token.type.lastIndexOf(type+".xml")>-1}var oop=require("../../lib/oop"),Behaviour=require("../behaviour").Behaviour,TokenIterator=require("../../token_iterator").TokenIterator,XmlBehaviour=(require("../../lib/lang"),
function(){this.add("string_dquotes","insertion",function(state,action,editor,session,text){if('"'==text||"'"==text){
var quote=text,selected=session.doc.getTextRange(editor.getSelectionRange())
if(""!==selected&&"'"!==selected&&'"'!=selected&&editor.getWrapBehavioursEnabled())return{text:quote+selected+quote,
selection:!1}
var cursor=editor.getCursorPosition(),line=session.doc.getLine(cursor.row),rightChar=line.substring(cursor.column,cursor.column+1),iterator=new TokenIterator(session,cursor.row,cursor.column),token=iterator.getCurrentToken()


if(rightChar==quote&&(is(token,"attribute-value")||is(token,"string")))return{text:"",selection:[1,1]
}
if(token||(token=iterator.stepBackward()),!token)return
for(;is(token,"tag-whitespace")||is(token,"whitespace");)token=iterator.stepBackward()
var rightSpace=!rightChar||rightChar.match(/\s/)
if(is(token,"attribute-equals")&&(rightSpace||">"==rightChar)||is(token,"decl-attribute-equals")&&(rightSpace||"?"==rightChar))return{
text:quote+quote,selection:[1,1]}}}),this.add("string_dquotes","deletion",function(state,action,editor,session,range){
var selected=session.doc.getTextRange(range)
if(!range.isMultiLine()&&('"'==selected||"'"==selected)){var line=session.doc.getLine(range.start.row),rightChar=line.substring(range.start.column+1,range.start.column+2)


if(rightChar==selected)return range.end.column++,range}}),this.add("autoclosing","insertion",function(state,action,editor,session,text){
if(">"==text){var position=editor.getSelectionRange().start,iterator=new TokenIterator(session,position.row,position.column),token=iterator.getCurrentToken()||iterator.stepBackward()


if(!token||!(is(token,"tag-name")||is(token,"tag-whitespace")||is(token,"attribute-name")||is(token,"attribute-equals")||is(token,"attribute-value")))return


if(is(token,"reference.attribute-value"))return
if(is(token,"attribute-value")){var firstChar=token.value.charAt(0)
if('"'==firstChar||"'"==firstChar){var lastChar=token.value.charAt(token.value.length-1),tokenEnd=iterator.getCurrentTokenColumn()+token.value.length


if(tokenEnd>position.column||tokenEnd==position.column&&firstChar!=lastChar)return}}for(;!is(token,"tag-name");)if(token=iterator.stepBackward(),
"<"==token.value){token=iterator.stepForward()
break}var tokenRow=iterator.getCurrentTokenRow(),tokenColumn=iterator.getCurrentTokenColumn()
if(is(iterator.stepBackward(),"end-tag-open"))return
var element=token.value
if(tokenRow==position.row&&(element=element.substring(0,position.column-tokenColumn)),this.voidElements.hasOwnProperty(element.toLowerCase()))return


return{text:"></"+element+">",selection:[1,1]}}}),this.add("autoindent","insertion",function(state,action,editor,session,text){
if("\n"==text){var cursor=editor.getCursorPosition(),line=session.getLine(cursor.row),iterator=new TokenIterator(session,cursor.row,cursor.column),token=iterator.getCurrentToken()


if(token&&token.type.indexOf("tag-close")!==-1){if("/>"==token.value)return
for(;token&&token.type.indexOf("tag-name")===-1;)token=iterator.stepBackward()
if(!token)return
var tag=token.value,row=iterator.getCurrentTokenRow()
if(token=iterator.stepBackward(),!token||token.type.indexOf("end-tag")!==-1)return
if(this.voidElements&&!this.voidElements[tag]){var nextToken=session.getTokenAt(cursor.row,cursor.column+1),line=session.getLine(row),nextIndent=this.$getIndent(line),indent=nextIndent+session.getTabString()


return nextToken&&"</"===nextToken.value?{text:"\n"+indent+"\n"+nextIndent,selection:[1,indent.length,1,indent.length]
}:{text:"\n"+indent}}}}})})
oop.inherits(XmlBehaviour,Behaviour),exports.XmlBehaviour=XmlBehaviour})


define("ace/mode/folding/mixed",[],function(require,exports,module){"use strict"
var oop=require("../../lib/oop"),BaseFoldMode=require("./fold_mode").FoldMode,FoldMode=exports.FoldMode=function(defaultMode,subModes){
this.defaultMode=defaultMode,this.subModes=subModes}
oop.inherits(FoldMode,BaseFoldMode),function(){this.$getMode=function(state){"string"!=typeof state&&(state=state[0])


for(var key in this.subModes)if(0===state.indexOf(key))return this.subModes[key]
return null},this.$tryMode=function(state,session,foldStyle,row){var mode=this.$getMode(state)
return mode?mode.getFoldWidget(session,foldStyle,row):""},this.getFoldWidget=function(session,foldStyle,row){
return this.$tryMode(session.getState(row-1),session,foldStyle,row)||this.$tryMode(session.getState(row),session,foldStyle,row)||this.defaultMode.getFoldWidget(session,foldStyle,row)

},this.getFoldWidgetRange=function(session,foldStyle,row){var mode=this.$getMode(session.getState(row-1))


return mode&&mode.getFoldWidget(session,foldStyle,row)||(mode=this.$getMode(session.getState(row))),mode&&mode.getFoldWidget(session,foldStyle,row)||(mode=this.defaultMode),
mode.getFoldWidgetRange(session,foldStyle,row)}}.call(FoldMode.prototype)})


define("ace/mode/folding/xml",[],function(require,exports,module){"use strict"
function is(token,type){return token.type.lastIndexOf(type+".xml")>-1}var oop=require("../../lib/oop"),Range=(require("../../lib/lang"),
require("../../range").Range),BaseFoldMode=require("./fold_mode").FoldMode,TokenIterator=require("../../token_iterator").TokenIterator,FoldMode=exports.FoldMode=function(voidElements,optionalEndTags){
BaseFoldMode.call(this),this.voidElements=voidElements||{},this.optionalEndTags=oop.mixin({},this.voidElements),
optionalEndTags&&oop.mixin(this.optionalEndTags,optionalEndTags)}
oop.inherits(FoldMode,BaseFoldMode)
var Tag=function(){this.tagName="",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={
row:0,column:0}};(function(){this.getFoldWidget=function(session,foldStyle,row){var tag=this._getFirstTagInLine(session,row)


return tag?tag.closing||!tag.tagName&&tag.selfClosing?"markbeginend"==foldStyle?"end":"":!tag.tagName||tag.selfClosing||this.voidElements.hasOwnProperty(tag.tagName.toLowerCase())?"":this._findEndTagInLine(session,row,tag.tagName,tag.end.column)?"":"start":this.getCommentFoldWidget(session,row)

},this.getCommentFoldWidget=function(session,row){return/comment/.test(session.getState(row))&&/<!-/.test(session.getLine(row))?"start":""

},this._getFirstTagInLine=function(session,row){for(var tokens=session.getTokens(row),tag=new Tag,i=0;i<tokens.length;i++){
var token=tokens[i]
if(is(token,"tag-open")){if(tag.end.column=tag.start.column+token.value.length,tag.closing=is(token,"end-tag-open"),
token=tokens[++i],!token)return null
for(tag.tagName=token.value,tag.end.column+=token.value.length,i++;i<tokens.length;i++)if(token=tokens[i],
tag.end.column+=token.value.length,is(token,"tag-close")){tag.selfClosing="/>"==token.value
break}return tag}if(is(token,"tag-close"))return tag.selfClosing="/>"==token.value,tag
tag.start.column+=token.value.length}return null},this._findEndTagInLine=function(session,row,tagName,startColumn){
for(var tokens=session.getTokens(row),column=0,i=0;i<tokens.length;i++){var token=tokens[i]
if(column+=token.value.length,!(column<startColumn)&&is(token,"end-tag-open")&&(token=tokens[i+1],token&&token.value==tagName))return!0

}return!1},this._readTagForward=function(iterator){var token=iterator.getCurrentToken()
if(!token)return null
var tag=new Tag
do if(is(token,"tag-open"))tag.closing=is(token,"end-tag-open"),tag.start.row=iterator.getCurrentTokenRow(),
tag.start.column=iterator.getCurrentTokenColumn()
else if(is(token,"tag-name"))tag.tagName=token.value
else if(is(token,"tag-close"))return tag.selfClosing="/>"==token.value,tag.end.row=iterator.getCurrentTokenRow(),
tag.end.column=iterator.getCurrentTokenColumn()+token.value.length,iterator.stepForward(),tag
while(token=iterator.stepForward())
return null},this._readTagBackward=function(iterator){var token=iterator.getCurrentToken()
if(!token)return null
var tag=new Tag
do{if(is(token,"tag-open"))return tag.closing=is(token,"end-tag-open"),tag.start.row=iterator.getCurrentTokenRow(),
tag.start.column=iterator.getCurrentTokenColumn(),iterator.stepBackward(),tag
is(token,"tag-name")?tag.tagName=token.value:is(token,"tag-close")&&(tag.selfClosing="/>"==token.value,
tag.end.row=iterator.getCurrentTokenRow(),tag.end.column=iterator.getCurrentTokenColumn()+token.value.length)

}while(token=iterator.stepBackward())
return null},this._pop=function(stack,tag){for(;stack.length;){var top=stack[stack.length-1]
if(tag&&top.tagName!=tag.tagName){if(this.optionalEndTags.hasOwnProperty(top.tagName)){stack.pop()
continue}return null}return stack.pop()}},this.getFoldWidgetRange=function(session,foldStyle,row){var firstTag=this._getFirstTagInLine(session,row)


if(!firstTag)return this.getCommentFoldWidget(session,row)&&session.getCommentFoldRange(row,session.getLine(row).length)


var tag,isBackward=firstTag.closing||firstTag.selfClosing,stack=[]
if(isBackward)for(var iterator=new TokenIterator(session,row,firstTag.end.column),end={row:row,column:firstTag.start.column
};tag=this._readTagBackward(iterator);){if(tag.selfClosing){if(stack.length)continue
return tag.start.column+=tag.tagName.length+2,tag.end.column-=2,Range.fromPoints(tag.start,tag.end)}if(tag.closing)stack.push(tag)
else if(this._pop(stack,tag),0==stack.length)return tag.start.column+=tag.tagName.length+2,tag.start.row==tag.end.row&&tag.start.column<tag.end.column&&(tag.start.column=tag.end.column),
Range.fromPoints(tag.start,end)}else{var iterator=new TokenIterator(session,row,firstTag.start.column),start={
row:row,column:firstTag.start.column+firstTag.tagName.length+2}
for(firstTag.start.row==firstTag.end.row&&(start.column=firstTag.end.column);tag=this._readTagForward(iterator);){
if(tag.selfClosing){if(stack.length)continue
return tag.start.column+=tag.tagName.length+2,tag.end.column-=2,Range.fromPoints(tag.start,tag.end)}if(tag.closing){
if(this._pop(stack,tag),0==stack.length)return Range.fromPoints(start,tag.start)}else stack.push(tag)

}}}}).call(FoldMode.prototype)})


define("ace/mode/folding/html",[],function(require,exports,module){"use strict"
var oop=require("../../lib/oop"),MixedFoldMode=require("./mixed").FoldMode,XmlFoldMode=require("./xml").FoldMode,CStyleFoldMode=require("./cstyle").FoldMode,FoldMode=exports.FoldMode=function(voidElements,optionalTags){
MixedFoldMode.call(this,new XmlFoldMode(voidElements,optionalTags),{"js-":new CStyleFoldMode,"css-":new CStyleFoldMode
})}
oop.inherits(FoldMode,MixedFoldMode)})


define("ace/mode/html",[],function(require,exports,module){"use strict"
var oop=require("../lib/oop"),lang=require("../lib/lang"),TextMode=require("./text").Mode,JavaScriptMode=require("./javascript").Mode,CssMode=require("./css").Mode,HtmlHighlightRules=require("./html_highlight_rules").HtmlHighlightRules,XmlBehaviour=require("./behaviour/xml").XmlBehaviour,HtmlFoldMode=require("./folding/html").FoldMode,WorkerClient=require("../worker/worker_client").WorkerClient,voidElements=["area","base","br","col","embed","hr","img","input","keygen","link","meta","menuitem","param","source","track","wbr"],optionalEndTags=["li","dt","dd","p","rt","rp","optgroup","option","colgroup","td","th"],Mode=function(options){
this.fragmentContext=options&&options.fragmentContext,this.HighlightRules=HtmlHighlightRules,this.$behaviour=new XmlBehaviour,
this.createModeDelegates({"js-":JavaScriptMode,"css-":CssMode}),this.foldingRules=new HtmlFoldMode(this.voidElements,lang.arrayToMap(optionalEndTags))

}
oop.inherits(Mode,TextMode),function(){this.blockComment={start:"<!--",end:"-->"},this.voidElements=lang.arrayToMap(voidElements),
this.getNextLineIndent=function(state,line,tab){return this.$getIndent(line)},this.checkOutdent=function(state,line,input){
return!1},this.getCompletions=function(state,session,pos,prefix){return this.$completer.getCompletions(state,session,pos,prefix)

},this.createWorker=function(session){if(this.constructor==Mode){var worker=new WorkerClient(["ace"],"ace/mode/html_worker","Worker")


return worker.attachToDocument(session.getDocument()),this.fragmentContext&&worker.call("setOptions",[{
context:this.fragmentContext}]),worker.on("error",function(e){session.setAnnotations(e.data)}),worker.on("terminate",function(){
session.clearAnnotations()}),worker}},this.$id="ace/mode/html"}.call(Mode.prototype),exports.Mode=Mode

})


define("plugins/c9.ide.ace/ace",[],function(require,exports,module){"use strict"
function main(options,imports,register){function addCorner(ace){if(!isMinimal){var shadow=document.createElement("div")


shadow.className="scroll_shadow"
var corner=document.createElement("div")
corner.className="ace_corner",shadow.appendChild(corner),ace.renderer.scroller.appendChild(shadow)}}function addCornerStyles(theme){
var sheet=document.getElementById(theme.cssClass).sheet
sheet.insertRule("."+theme.cssClass+" .ace_corner{background: radial-gradient(at 5px 5px, "+(theme.isDark?"rgba(0,0,0,0)":"rgba(250,250,250,0)")+"5.5px,"+theme.bg+"6px)}",sheet.cssRules.length)

}function setTheme(path,isPreview,fromServer,$err){if(theme=fromServer,/custom_themes/.test(path)){if(theme=themes[path],
!theme)return
dom.importCssString(theme.cssText,theme.cssClass)}if(!theme)return $err||config.loadModule(path,function(m){
setTheme(path,isPreview,m,!0)})
if(!isPreview&&settings.get("user/ace/@theme")!=path){settings.set("user/ace/@theme",path),settings.set("user/ace/@customTheme",theme.customCss)


var style=theme.isDark?"dark":"light"
settings.get("user/general/@skin").indexOf(style)==-1&&layout.proposeLayoutChange(style,!1,"ace")}if(lastTheme!=theme){
if(isMinimal)return void(themeLoaded[path]||(themeLoaded[path]=!0,handleEmit("themeInit",{theme:theme,
path:path})))
if(!themeLoaded[path]){themeLoaded[path]=!0
var cssClass=theme.cssClass,div=ui.buildDom(["div",{"class":cssClass},["span",{"class":"ace_gutter"}]],document.body)


theme.bg=ui.getStyle(div.firstChild,"backgroundColor"),theme.fg=ui.getStyle(div.firstChild,"color"),theme.path=path,
document.body.removeChild(div),addCornerStyles(theme),handleEmit("themeInit",{theme:theme,path:path})

}tabs.containers.forEach(function(container){theme.isDark?ui.setStyleClass(container,"dark"):ui.setStyleClass(container,"",["dark"])

})
var lTheme=lastTheme
lastTheme=theme,handleEmit("themeChange",{lastTheme:lTheme,theme:theme,path:path})}}function AceUndoManager(undoManager,session){
var state=undoManager.getState()
this.$session=session,this.$undo=undoManager,this.$aceUndo=new UndoManager,this.$aceUndo.c9UndoProxy=undoManager,
undoManager.$aceUndo=this.$aceUndo,undoManager.add=this.add,undoManager.addSelection=this.addSelection,
undoManager.undo=this.undo,undoManager.redo=this.redo,undoManager.reset=this.reset,undoManager.canUndo=this.canUndo,
undoManager.canRedo=this.canRedo,undoManager.getState=this.getState,undoManager.setState=this.setState,
undoManager.bookmark=this.bookmarkPosition,undoManager.isAtBookmark=this.isAtBookmark,undoManager.__defineGetter__("position",this.getPosition),
undoManager.__defineGetter__("length",this.getLength),undoManager._emit=this._emit=undoManager.getEmitter(),
this.deleyedEmit=lang.delayedCall(this._emit.bind(null,"change")).schedule.bind(null,0),this.setState(state,!0)

}function updateDeltas(deltas){if(deltas[0]&&deltas[0].deltas){var oldDeltas=deltas.slice()
deltas.length=0,oldDeltas.forEach(function(x){deltas.push.apply(deltas,x.deltas)})}return deltas}function setFontSmoothing(){
var fstyle=settings.getBool("user/ace/@antialiasedfonts")
ui.setStyleRule(".ace_editor",apf.isChrome?"WebkitFontSmoothing":"MozOSXFontSmoothing",fstyle&&(apf.isChrome?"antialiased":"grayscale")||"auto")

}function draw(){drawn||(drawn=!0,mnuAce=new Menu({id:"menu",items:[new MenuItem({position:10,command:"cut",
caption:"Cut"},handle),new MenuItem({position:20,command:"copy",caption:"Copy"},handle),new MenuItem({
position:30,command:"paste",caption:"Paste"},handle),new Divider({position:40},handle),new MenuItem({
position:50,command:"selectall",caption:"Select All"},handle),new Divider({position:60},handle)]},handle),
menus.addItemByPath("context/ace/",mnuAce,0,handle),menus.addItemByPath("context/ace-gutter/",mnuGutter=new Menu({
id:"menuGutter",items:[new Divider({position:1e3},handle)]},handle),0,handle),menus.addItemByPath("context/ace-gutter/Gutter Options/",new ui.menu({}),1100,handle),
menus.addItemByPath("context/ace-gutter/Gutter Options/Show Line Numbers",new ui.item({caption:"Show Line Numbers",
type:"check",checked:"user/ace/@showLineNumbers"},handle),100,handle),menus.addItemByPath("context/ace-gutter/Gutter Options/Show Fold Widgets",new ui.item({
caption:"Show Fold Widgets",type:"check",checked:"user/ace/@showFoldWidgets"},handle),200,handle),mnuGutter.on("show",function(e){
var ace=tabs.focussedTab.editor.ace,region=ace.renderer.$gutterLayer.getRegion(e),line=ace.renderer.screenToTextCoordinates(e.x,e.y).row,className=ace.session.getBreakpoints()[line]||""


mnuGutter.meta.ace=ace,mnuGutter.meta.line=line,mnuGutter.meta.region=region,mnuGutter.meta.className=className

}),handleEmit("draw"))}function setCommands(){function isAce(editor,allowBlured){return!(!editor||!editor.ace)&&(allowBlured||editor.ace.isFocused())

}function fnWrap(command){command.group="Code Editor",command.readOnly=command.readOnly||!1,command.focusContext=!0


var isAvailable=command.isAvailable
return command.isAvailable=function(editor,args,event){return event instanceof KeyboardEvent&&!isAce(editor)&&(editor=apf.activeElement),
!!isAce(editor,!0)&&(!(!editor.ace.commands.byName[command.name]&&!command.shared)&&(!isAvailable||isAvailable(editor.ace)))

},command.findEditor=function(editor,e){return e&&apf.activeElement&&apf.activeElement.ace&&apf.activeElement.ace.isFocused()?apf.activeElement.ace:editor&&editor.ace||editor

},command}function sharedCommand(command){return command.isAvailable=function(editor){return editor&&"ace"==editor.type

},command.group="Code Editor",command}defaultCommands.wrapped||(defaultCommands.push.apply(defaultCommands,whitespaceUtil.commands),
defaultCommands.forEach(fnWrap,defaultCommands),Object.defineProperty(defaultCommands,"wrapped",{value:!0,
configurable:!0})),multiSelectCommands.wrapped||(multiSelectCommands.forEach(fnWrap,multiSelectCommands),
Object.defineProperty(multiSelectCommands,"wrapped",{value:!0,configurable:!0})),commands.addCommands(defaultCommands,handle,!0),
commands.addCommands(multiSelectCommands,handle,!0),commands.commands.togglerecording.bindKey={mac:"Command-Shift-R",
win:"Alt-Shift-R"},commands.commands.replaymacro.bindKey={mac:"Command-Ctrl-R",win:"Alt-R"},commands.commands.findnext.hint="search for the next occurrence of the search query your entered last",
commands.commands.findnext.msg="Navigating to next match.",commands.commands.findprevious.hint="search for the previous occurrence of the search query your entered last",
commands.commands.findprevious.msg="Navigating to previous match.",commands.addCommand(commands.commands.togglerecording,handle),
commands.addCommand(commands.commands.replaymacro,handle),commands.addCommand(fnWrap({name:"cancelBrowserUndoInAce",
bindKey:{mac:"Cmd-Z|Cmd-Shift-Z|Cmd-Y",win:"Ctrl-Z|Ctrl-Shift-Z|Ctrl-Y",position:-1e4},group:"ignore",
exec:function(e){},readOnly:!0,shared:!0}),handle),commands.addCommand(sharedCommand({name:"syntax",exec:function(_,syntax){
"object"==typeof syntax&&(syntax=syntax.argv&&syntax.argv[1]||""),syntax=modes.caption[syntax]||modes.extensions[syntax]||syntax


var tab=tabs.focussedTab
tab&&tab.editor.setOption("syntax",syntax)},commands:modes.caption}),handle),commands.addCommand(sharedCommand({
name:"largerfont",bindKey:{mac:"Command-+|Command-=",win:"Ctrl-+|Ctrl-="},exec:function(e){var currSize=settings.get("user/ace/@fontSize")


settings.set("user/ace/@fontSize",++currSize>72?72:currSize)}}),handle),commands.addCommand(sharedCommand({
name:"smallerfont",bindKey:{mac:"Command--",win:"Ctrl--"},exec:function(e){var currSize=settings.get("user/ace/@fontSize")


settings.set("user/ace/@fontSize",--currSize<1?1:currSize)}}),handle),commands.addCommand(sharedCommand({
name:"toggleWordWrap",bindKey:{win:"Ctrl-Q",mac:"Ctrl-W"},exec:function(editor){editor.setOption("wrap","off"==editor.getOption("wrap"))

}}),handle)}function setPreferences(){prefs.add({Project:{position:10,"Code Editor (Ace)":{position:100,
"Soft Tabs":{type:"checked-spinner",checkboxPath:"project/ace/@useSoftTabs",path:"project/ace/@tabSize",
min:"1",max:"64",position:100},"Autodetect Tab Size on Load":{type:"checkbox",path:"project/ace/@guessTabSize",
position:150},"New File Line Endings":{type:"dropdown",path:"project/ace/@newLineMode",width:130,items:[{
caption:"Windows (CRLF)",value:"windows"},{caption:"Unix (LF)",value:"unix"}],position:200}}}},handle),
prefs.add({Editors:{position:400,"Code Editor (Ace)":{position:200,"Auto-pair Brackets, Quotes, etc.":{
type:"checkbox",position:1e3,path:"user/ace/@behavioursEnabled"},"Wrap Selection with Brackets, Quotes, etc.":{
type:"checkbox",position:1001,path:"user/ace/@wrapBehavioursEnabled"},"Code Folding":{type:"checkbox",
position:2e3,path:"user/ace/@showFoldWidgets"},"Fade Fold Widgets":{type:"checkbox",position:2500,path:"user/ace/@fadeFoldWidgets"
},"Full Line Selection":{type:"checkbox",position:3e3,path:"user/ace/@selectionStyle",values:"line|text"
},"Highlight Active Line":{type:"checkbox",position:4e3,path:"user/ace/@highlightActiveLine"},"Highlight Gutter Line":{
type:"checkbox",position:4e3,path:"user/ace/@highlightGutterLine"},"Show Invisible Characters":{type:"checkbox",
position:5e3,path:"user/ace/@showInvisibles"},"Show Gutter":{type:"checkbox",position:6e3,path:"user/ace/@showGutter"
},"Show Line Numbers":{type:"dropdown",width:150,path:"user/ace/@showLineNumbers",items:[{caption:"Normal",
value:!0},{caption:"Relative",value:"relative"},{caption:"None",value:!1}],position:6250},"Show Indent Guides":{
type:"checkbox",position:6500,path:"user/ace/@displayIndentGuides"},"Highlight Selected Word":{type:"checkbox",
position:7e3,path:"user/ace/@highlightSelectedWord"},"Scroll Past the End of the Document":{type:"dropdown",
width:150,path:"user/ace/@scrollPastEnd",items:[{caption:"Off",value:"0"},{caption:"Half Editor Height",
value:"0.5"},{caption:"Full Editor Height",value:"1"}],position:8e3},"Animate Scrolling":{type:"checkbox",
path:"user/ace/@animatedScroll",position:9e3},"Font Family":{type:"textbox",path:"user/ace/@fontFamily",
position:1e4},"Font Size":{type:"spinner",path:"user/ace/@fontSize",min:"1",max:"72",position:10500},
"Antialiased Fonts":{type:"checkbox",path:"user/ace/@antialiasedfonts",position:10600},"Show Print Margin":{
type:"checked-spinner",checkboxPath:"user/ace/@showPrintMargin",path:"user/ace/@printMarginColumn",min:"1",
max:"200",position:11e3},"Mouse Scroll Speed":{type:"spinner",path:"user/ace/@scrollSpeed",min:"1",max:"8",
position:13e3},"Cursor Style":{type:"dropdown",path:"user/ace/@cursorStyle",items:[{caption:"Ace",value:"ace"
},{caption:"Slim",value:"slim"},{caption:"Smooth",value:"smooth"},{caption:"Smooth And Slim",value:"smooth slim"
},{caption:"Wide",value:"wide"}],position:13500},"Merge Undo Deltas":{type:"dropdown",path:"user/ace/@mergeUndoDeltas",
items:[{caption:"Always",value:"always"},{caption:"Never",value:"off"},{caption:"Timed",value:"true"}],
position:14e3},"Enable Wrapping For New Documents":{type:"checkbox",path:"user/ace/@useWrapMode"}}}},handle)

}function setMenus(){function addEditorMenu(path,commandName){return menus.addItemByPath(path,new ui.item({
command:commandName}),c+=100,handle)}var c=2e4
addEditorMenu("Tools/Toggle Macro Recording","togglerecording"),addEditorMenu("Tools/Play Macro","replaymacro"),
c=600,menus.addItemByPath("Edit/~",new ui.divider,c+=100,handle),menus.addItemByPath("Edit/Selection/",null,c+=100,handle),
menus.addItemByPath("Edit/Line/",null,c+=100,handle),menus.addItemByPath("Edit/Text/",null,c+=100,handle),
menus.addItemByPath("Edit/Comment/",null,c+=100,handle),menus.addItemByPath("Edit/Code Folding/",null,c+=100,handle),
c=0,addEditorMenu("Edit/Line/Indent","indent"),addEditorMenu("Edit/Line/Outdent","outdent"),addEditorMenu("Edit/Line/Move Line Up","movelinesup"),
addEditorMenu("Edit/Line/Move Line Down","movelinesdown"),menus.addItemByPath("Edit/Line/~",new ui.divider,c+=100,handle),
addEditorMenu("Edit/Line/Copy Lines Up","copylinesup"),addEditorMenu("Edit/Line/Copy Lines Down","copylinesdown"),
menus.addItemByPath("Edit/Line/~",new ui.divider,c+=100,handle),addEditorMenu("Edit/Line/Remove Line","removeline"),
addEditorMenu("Edit/Line/Remove to Line End","removetolineend"),addEditorMenu("Edit/Line/Remove to Line Start","removetolinestart"),
menus.addItemByPath("Edit/Line/~",new ui.divider,c+=100,handle),addEditorMenu("Edit/Line/Split Line","splitline"),
c=0,addEditorMenu("Edit/Comment/Toggle Comment","togglecomment"),c=0,addEditorMenu("Edit/Text/Remove Word Right","removewordright"),
addEditorMenu("Edit/Text/Remove Word Left","removewordleft"),menus.addItemByPath("Edit/Text/~",new ui.divider,c+=100,handle),
addEditorMenu("Edit/Text/Align","alignCursors"),addEditorMenu("Edit/Text/Transpose Letters","transposeletters"),
menus.addItemByPath("Edit/Text/~",new ui.divider,c+=100,handle),addEditorMenu("Edit/Text/To Upper Case","touppercase"),
addEditorMenu("Edit/Text/To Lower Case","tolowercase"),c=0,addEditorMenu("Edit/Code Folding/Toggle Fold","toggleFoldWidget"),
addEditorMenu("Edit/Code Folding/Unfold","unfold"),menus.addItemByPath("Edit/Code Folding/~",new ui.divider,c+=100,handle),
addEditorMenu("Edit/Code Folding/Fold Other","foldOther"),addEditorMenu("Edit/Code Folding/Fold All","foldall"),
addEditorMenu("Edit/Code Folding/Unfold All","unfoldall"),c=0,addEditorMenu("Edit/Selection/Select All","selectall"),
addEditorMenu("Edit/Selection/Split Into Lines","splitIntoLines"),addEditorMenu("Edit/Selection/Single Selection","singleSelection"),
menus.addItemByPath("Edit/Selection/~",new ui.divider,c+=100,handle),menus.addItemByPath("Edit/Selection/Multiple Selections/",null,c+=100,handle),
menus.addItemByPath("Edit/Selection/~",new ui.divider,c+=100,handle),addEditorMenu("Edit/Selection/Select Word Right","selectwordright"),
addEditorMenu("Edit/Selection/Select Word Left","selectwordleft"),menus.addItemByPath("Edit/Selection/~",new ui.divider,c+=100,handle),
addEditorMenu("Edit/Selection/Select to Line End","selecttolineend"),addEditorMenu("Edit/Selection/Select to Line Start","selecttolinestart"),
menus.addItemByPath("Edit/Selection/~",new ui.divider,c+=100,handle),addEditorMenu("Edit/Selection/Select to Document End","selecttoend"),
addEditorMenu("Edit/Selection/Select to Document Start","selecttostart"),c=0,addEditorMenu("Edit/Selection/Multiple Selections/Add Cursor Up","addCursorAbove"),
addEditorMenu("Edit/Selection/Multiple Selections/Add Cursor Down","addCursorBelow"),addEditorMenu("Edit/Selection/Multiple Selections/Move Active Cursor Up","addCursorAboveSkipCurrent"),
addEditorMenu("Edit/Selection/Multiple Selections/Move Active Cursor Down","addCursorBelowSkipCurrent"),
menus.addItemByPath("Edit/Selection/Multiple Selections/~",new ui.divider,c+=100,handle),addEditorMenu("Edit/Selection/Multiple Selections/Add Next Selection Match","selectMoreAfter"),
addEditorMenu("Edit/Selection/Multiple Selections/Add Previous Selection Match","selectMoreBefore"),menus.addItemByPath("Edit/Selection/Multiple Selections/~",new ui.divider,c+=100,handle),
addEditorMenu("Edit/Selection/Multiple Selections/Merge Selection Range","splitIntoLines"),menus.addItemByPath("View/~",new ui.divider,29e4,handle),
menus.addItemByPath("View/Font Size/",null,290001,handle),c=0,addEditorMenu("View/Font Size/Increase Font Size","largerfont"),
addEditorMenu("View/Font Size/Decrease Font Size","smallerfont"),menus.addItemByPath("View/Gutter",new ui.item({
type:"check",checked:"user/ace/@showGutter"}),500,handle)
var grpNewline=new ui.group
menus.addItemByPath("File/~",new ui.divider,1400,handle),menus.addItemByPath("File/Line Endings/",new ui.menu({
"onprop.visible":function(e){if(e.value){var tab=tabs.focussedTab,ace=tab&&tab.editor&&tab.editor.ace


if(ace&&"ace"==tab.editor.type){this.enable()
var mode=ace.session.doc.getNewLineMode()
grpNewline.setValue(mode)}else this.disable()}},onitemclick:function(e){var tab=tabs.focussedTab,ace=tab&&tab.editor&&tab.editor.ace


ace&&"ace"==tab.editor.type&&(ace.session.doc.setNewLineMode(e.value),tab.document.undoManager.bookmark(-2))

}}),1500,handle),menus.addItemByPath("File/Line Endings/Windows (CRLF)",new ui.item({type:"radio",value:"windows",
group:grpNewline}),200,handle),menus.addItemByPath("File/Line Endings/Unix (LF)",new ui.item({type:"radio",
value:"unix",group:grpNewline}),300,handle),menus.addItemByPath("View/Syntax/",new ui.menu({"onprop.visible":function(e){
if(e.value){this.childNodes.length||rebuildSyntaxMenu(),this.$initChildren()
var tab=tabs.focussedTab,c9Session=tab&&tab.editor&&tab.document.getSession()
if(c9Session&&c9Session.session){this.enable()
var val=c9Session.session.syntax||c9Session.session.customSyntax||"auto"
this.select(grpSyntax,val)}else this.disable()}},onitemclick:function(e){var tab=tabs.focussedTab
if(tab){var session=tab.document.getSession()
setSyntax(session,e.value)}}}),3e5,handle),menus.addItemByPath("View/~",new ui.divider,4e5,handle)
var wrapToggle=function(e){var tab=tabs.focussedTab,editor=tab&&tab.editor,mnuWrap=handle.getElement("mnuWrap"),mnuWrapPM=handle.getElement("mnuWrapPrintMargin")


mnuWrapPM.setAttribute("disabled",!mnuWrap.checked)
var wrap=mnuWrap.checked
mnuWrapPM.checked&&(wrap||e.currentTarget==mnuWrapPM)&&(wrap="printMargin"),editor.setOption("wrap",wrap)

}
menus.addItemByPath("View/Wrap Lines",new ui.item({id:"mnuWrap",type:"check",onclick:wrapToggle,isAvailable:function(editor){
if(!editor||"ace"!=editor.type)return!1
var mnuWrap=handle.getElement("mnuWrap"),mnuWrapPrintMargin=handle.getElement("mnuWrapPrintMargin"),wrap=editor.getOption("wrap")


return mnuWrap.setAttribute("checked",!ui.isFalse(wrap)),mnuWrapPrintMargin.setAttribute("checked","printMargin"==wrap),
!0}}),5e5,handle),menus.addItemByPath("View/Wrap To Print Margin",new ui.item({id:"mnuWrapPrintMargin",
type:"check",onclick:wrapToggle,isAvailable:function(editor){return editor&&"ace"==editor.type}}),6e5,handle),
c=0,menus.addItemByPath("Goto/~",new ui.divider,c=399,handle),addEditorMenu("Goto/Next Error","goToNextError"),
addEditorMenu("Goto/Previous Error","goToPreviousError"),menus.addItemByPath("Goto/~",new ui.divider,c+=200,handle),
addEditorMenu("Goto/Word Right","gotowordright"),addEditorMenu("Goto/Word Left","gotowordleft"),menus.addItemByPath("Goto/~",new ui.divider,c+=100,handle),
addEditorMenu("Goto/Line End","gotolineend"),addEditorMenu("Goto/Line Start","gotolinestart"),menus.addItemByPath("Goto/~",new ui.divider,c+=100,handle),
addEditorMenu("Goto/Jump to Matching Brace","jumptomatching"),menus.addItemByPath("Goto/~",new ui.divider,c+=100,handle),
addEditorMenu("Goto/Scroll to Selection","centerselection"),tabs.on("focus",function(e){var action="ace"!=e.tab.editor.type?"disable":"enable"

;["Edit/Comment","Edit/Text","Edit/Code Folding","Edit/Convert Case","Edit/Line","Edit/Selection","View/Syntax","View/Font Size","View/Syntax/Other","View/Syntax","File/Line Endings"].forEach(function(path){
var menu=menus.get(path).menu
menu&&menu[action]()})}),grpThemes=new ui.group,menus.addItemByPath("View/Themes/",new ui.menu({"onprop.visible":function(e){
e.value&&grpThemes.setValue(settings.get("user/ace/@theme"))}}),35e4,handle)
for(var name in themes)themes[name]instanceof Array?(menus.addItemByPath("View/Themes/"+name+"/",null,themeCounter++,handle),
themes[name].forEach(function(n){var themeprop=Object.keys(n)[0]
addThemeMenu(name+"/"+themeprop,n[themeprop],-1)})):addThemeMenu(name,null,themeCounter++)
grpSyntax=new ui.group,handle.addElement(grpNewline,grpSyntax,grpThemes)}function setMenuTheme(path,isPreview){
setTheme(path||settings.get("user/ace/@theme"),isPreview)}function addThemeMenu(name,path,index,plugin){
menus.addItemByPath("View/Themes/"+name,new ui.item({type:"radio",value:path||themes[name],group:grpThemes,
onmouseover:function(e){preview=this.value,setMenuThemeDelayed.schedule()},onmouseout:function(e){preview=null,
setMenuThemeDelayed.schedule()},onclick:function(e){setMenuTheme(e.currentTarget.value)}}),index==-1?void 0:index||themeCounter++,plugin||handle)

}function addTheme(css,plugin){var theme={cssText:css},firstLine=css.split("\n",1)[0].replace(/\/\*|\*\//g,"").trim()


firstLine.split(";").forEach(function(n){if(n){var info=n.split(":")
theme[info[0].trim()]=info[1].trim()}}),theme.isDark="true"==theme.isDark,theme.id="custom_themes/"+theme.name,
theme.customCss=css,define.undef(theme.id),define(theme.id,[],theme),themes[theme.id]=theme,addThemeMenu(theme.name,theme.id,null,plugin),
handleEmit("addTheme",theme),settings.get("user/ace/@theme")==theme.id&&setTheme(theme.id),plugin.addOther(function(){
removeTheme(theme,!0)})}function removeTheme(theme,silent){var el=document.getElementById(theme.cssClass)


el&&el.remove(),delete themes[theme.name],silent||handleEmit("removeTheme")}function rebuildSyntaxMenu(){
menus.remove("View/Syntax/")
var c=0
menus.addItemByPath("View/Syntax/Auto-Select",new ui.item({type:"radio",value:"auto",group:grpSyntax}),c+=100,handle),
menus.addItemByPath("View/Syntax/Plain Text",new ui.item({type:"radio",value:"text",group:grpSyntax}),c+=100,handle),
menus.addItemByPath("View/Syntax/~",new ui.divider,c+=100,handle)
for(var modeList=Object.keys(modes.byName).map(function(x){return modes.byName[x]}).sort(function(m1,m2){
return m2.order-m1.order||m1.caption.localeCompare(m2.caption)}),groupNum=modeList[0]&&modeList[0].order,i=0;i<modeList.length;i++){
var mode=modeList[i]
if(mode.order<0)break
mode.order<groupNum&&(groupNum=Math.min(mode.order,groupNum/1e3),menus.addItemByPath("View/Syntax/~",new ui.divider,c+=100,handle)),
menus.addItemByPath("View/Syntax/"+mode.caption,new ui.item({type:"radio",value:mode.name,group:grpSyntax
}),c+=100,handle)}}function defineSyntax(opts){if(!opts.name||!opts.caption)throw new Error("malformed syntax definition")


var name=opts.name
modes.byCaption[opts.caption]=opts,modes.byName[name]=opts,opts.order=opts.order||0,opts.extensions||(opts.extensions=""),
opts.extensions.split("|").forEach(function(ext){modes.extensions[ext]=name}),updateSyntaxMenu.schedule()

}function getExtOrName(path){var fileName=path.substr(path.lastIndexOf("/")+1),extPos=fileName.lastIndexOf(".")+1


return extPos?fileName.substr(extPos).toLowerCase():(/^Untitled\d+$/.test(fileName)&&(fileName=fileName.replace(/\d+/,"")),
"^"+fileName)}function getSyntaxForPath(path){var ext=getExtOrName(path),modeName=modes.customExtensions[ext]||modes.extensions[ext]


return modes.byName[modeName]?modeName:""}function setSyntaxForPath(path,syntax,noOverwrite){if(!path)return!1


syntax=modes.byName[syntax]?syntax:""
var changed,ext=getExtOrName(path)
return syntax?modes.extensions[ext]&&noOverwrite||(modes.customExtensions[ext]=syntax,changed=!0):modes.customExtensions[ext]&&(delete modes.customExtensions[ext],
changed=!0),changed&&settings.setJson("user/ace/custom-types",modes.customExtensions),changed}function getMode(syntax){
return syntax=(syntax||settings.get("project/ace/@defaultSyntax")||"text").toLowerCase(),syntax.indexOf("/")==-1&&(syntax="ace/mode/"+syntax),
syntax}function loadCustomExtensions(){var custom=settings.getJson("user/ace/custom-types")
custom&&Object.keys(custom).forEach(function(ext){var mode=custom[ext]
modes.byName[mode]&&(modes.customExtensions[ext]=mode)})}function detectSyntax(c9Session,path){if(c9Session.session&&c9Session.session.getLine){
var firstLine=c9Session.session.getLine(0),syntax=""
if(firstLine){if(/^#!/.test(firstLine)){var match=firstLine.match(/\b(bash|ksh|node|perl|sh)\b|\b(php|python|ruby)/)


switch(match&&(match[1]||match[2])){case"bash":case"ksh":case"sh":syntax="sh"
break
case"node":syntax="javascript"
break
case"perl":syntax="perl"
break
case"php":syntax="php"
break
case"python":syntax="python"
break
case"ruby":syntax="ruby"
break
default:syntax=""}}else/<\?xml/.test(firstLine)?syntax="xml":/^{\s*("|$)/.test(firstLine)?syntax="json":/^---$/.test(firstLine)?syntax="yaml":/\.(bash|inputrc|profile|zsh)/.test(path)?syntax="sh":/\.(git(attributes|config|ignore)|npmrc)$/.test(path)&&(syntax="ini")


return syntax}}}function getSyntax(c9Session,path){var syntax=c9Session.session.customSyntax||path&&getSyntaxForPath(path)||detectSyntax(c9Session,path)


return modes.byName[syntax]?syntax:""}function setSyntax(c9Session,syntax,forThisOnly){var c9doc=c9Session.session.c9doc


syntax=modes.byName[syntax]?syntax:""
var path=c9doc.tab.path
forThisOnly||setSyntaxForPath(path,syntax,!0)||(c9Session.session.customSyntax=syntax),c9doc.editor.setOption("syntax",syntax||getSyntax(c9Session,path),c9Session)

}function cloneSession(session,undoManager){var s=new EditSession(session.getDocument(),session.getMode())


undoManager||(undoManager=session.getUndoManager()),undoManager&&s.setUndoManager(undoManager),s.$informUndoManager=lang.delayedCall(function(){
s.$deltas=[]}),s.setOptions(session.getOptions()),s.$foldData=session.$cloneFoldData()
var ignore=!1,changeAnnotation=function(){ignore||(ignore=!0,s.setAnnotations(session.getAnnotations()),
ignore=!1)},changeMode=function(e){s.setMode(session.getMode())},changeBreakpoint=function(){s.$breakpoints=session.$breakpoints,
s._emit("changeBreakpoint",{})},setWrap=function(e){s.setOption("wrap",e.value)}
return session.on("changeAnnotation",changeAnnotation)(),session.on("changeMode",changeMode),session.on("changeBreakpoint",changeBreakpoint)(),
session.on("setWrap",setWrap),s.on("changeAnnotation",function(){ignore||(ignore=!0,session.setAnnotations(s.getAnnotations()),
ignore=!1)})(),s.cleanup=function(){session.removeListener("changeAnnotation",changeAnnotation),session.removeListener("changeMode",changeMode),
session.removeListener("changeBreakpoint",changeBreakpoint),session.removeListener("setWrap",setWrap)

},s.c9doc=session.c9doc,s.cloned=!0,s}function Ace(isBaseclass,exts){function addEditor(ace){emit("createAce",ace)

}function focus(){container&&(ui.addClass(container,"aceFocus"),plugin.ace.focus())}function blur(){container&&(ui.removeClass(container,"aceFocus"),
ace.blur())}function resize(e){var renderer=ace&&ace.renderer
if(renderer&&currentDocument)if("anim"==e.type){var htmlNode=ace.container
if(!htmlNode)return
if(e.vertical){var size=0===e.current?Math.abs(e.delta)-5-currentDocument.tab.pane.aml.$buttons.offsetHeight:htmlNode.offsetHeight+e.delta


renderer.onResize(!0,null,null,size)}else renderer.onResize(!0,null,htmlNode.offsetWidth+e.delta)
afterAnim=!0}else"afteranim"==e.type&&afterAnim?afterAnim=!1:(afterAnim=!1,renderer.$updateSizeAsync())

}function getState(doc,state,filter){if(!filter){var session=doc.getSession().session
if(session){state.folds=session.getAllFolds().map(function(fold){return{start:fold.start,end:fold.end,
placeholder:fold.placeholder}})
var options={}
docSettings.forEach(function(setting){var name=setting[0]
options[name]=getOption(name,{session:session})}),options.guessTabSize&&(delete options.tabSize,delete options.useSoftTabs),
session.customSyntax&&(state.customSyntax=session.customSyntax),state.scrolltop=session.getScrollTop(),
state.scrollleft=session.getScrollLeft(),state.selection=session.selection.toJSON(),state.options=options


var row=doc.editor.ace?doc.editor.ace.renderer.getFirstVisibleRow():0
state.firstLineState=row&&session.bgTokenizer&&{row:row-1,state:session.bgTokenizer.states[row-1],mode:session.$mode.$id
}}}}function setState(doc,state){function updateSession(){if(state.options&&state.options.guessTabSize&&(delete state.options.tabSize,
delete state.options.useSoftTabs),setOptions(state.options,c9Session),state.jump){var row=state.jump.row,column=state.jump.column


"number"==typeof row&&(scrollTo(row,column,state.jump.select,session),state.scrolltop=state.scrollleft=void 0)

}else state.selection&&session.selection.fromJSON(state.selection)
state.scrolltop&&session.setScrollTop(state.scrolltop),state.scrollleft&&session.setScrollLeft(state.scrollleft)

}var c9Session=doc.getSession(),session=c9Session.session
if(session){if(state.cleansed&&(state.firstLineState=state.folds=null),state.customSyntax&&(session.customSyntax=state.customSyntax,
setSyntax(c9Session,session.customSyntax)),state.folds)try{state.folds.forEach(function(fold){session.addFold(fold.placeholder,Range.fromPoints(fold.start,fold.end))

})}catch(e){state.folds=null}if(state.firstLineState&&session.bgTokenizer){var firstLineState=state.firstLineState,updateFirstLineState=function(){
session.bgTokenizer.states[firstLineState.row]=firstLineState.state}
session.$mode.$id==state.firstLineState.mode?updateFirstLineState():session.once("changeMode",updateFirstLineState)

}if(ace.session==session)updateSession()
else{var clean=function(){ace.off("changeSession",listen),session.off("unload",clean)},listen=function(e){
e.session==session&&(updateSession(),clean())}
ace.on("changeSession",listen),session.on("unload",clean)}}}function scrollTo(row,column,select,session){
if(void 0!==row){(currentSession&&currentSession.session||session).unfold({row:row,column:column||0}),
ace.selection.clearSelection(),ace.moveCursorTo(row,column||0),select&&session.getSelection().selectToPosition(select)


var range=ace.selection.getRange(),initialScroll=ace.renderer.scrollTop
ace.renderer.scrollSelectionIntoView(range.start,range.end,.5),ace.renderer.animateScrolling(initialScroll)

}}function changeTheme(){if(!immutableSkin&&currentSession){var theme=handle.theme
if(handle.theme&&currentSession.cssClass!=theme.cssClass){var tab=currentDocument.tab,html=plugin.aml.$int


theme.isDark?(tab.classList.add("dark"),html.style.boxShadow=""):(tab.classList.remove("dark"),html.style.boxShadow=skin.indexOf("flat")==-1?"0 1px 0 0 rgba(255, 255, 255, .3) inset":""),
html.style.backgroundColor=theme.bg,tab.backgroundColor=theme.bg,currentSession.isDark=theme.isDark}}
}function getOption(name,c9Session){var session=(c9Session||currentSession).session
return"syntax"==name?session&&session.syntax:"useWrapMode"==name?session&&"off"!==session.getOption("wrap"):"wrapToView"==name?session&&"printMargin"!==session.getOption("wrap"):"guessTabSize"==name?session&&session.$guessTabSize:(session.$options[name]?session:ace).getOption(name)

}function setOptions(options,c9Session){for(var prop in options)setOption(prop,options[prop],c9Session)

}function setOption(name,value,c9Session){c9Session||(c9Session=currentSession)
var session=(c9Session||{}).session
switch(docLut[name]&&c9Session&&(c9Session.options[name]=value),ui.isFalse(value)&&(value=!1),name){case"theme":
return void ace.setTheme(value)
case"syntax":if(session){var mode=getMode(value)
session.syntax=value,session.setMode(mode)}return
case"antialiasedfonts":return
case"useWrapMode":case"wrapToView":var useWrapMode,wrapToView
if(!session)return
"useWrapMode"!=name?(wrapToView=value,useWrapMode="off"!=session.getOption("wrap")):(useWrapMode=value,
wrapToView="free"==session.getOption("wrap")),value=!!useWrapMode&&(wrapToView||"printMargin")
case"wrap":return session._emit("setWrap",{value:value}),void session.setOption("wrap",value)
case"guessTabSize":return void(session&&(session.$guessTabSize=value))
case"tabSize":case"useSoftTabs":session&&(session.$guessTabSize=!1)
break
case"showLineNumbers":var renderer=ace.renderer,gutterRenderer=renderer.$gutterLayer.$renderer
return gutterRenderer&&gutterRenderer.detach&&gutterRenderer.detach(ace),gutterRenderer="relative"==value?relativeNumbers:value?null:noNumbers,
dom.setCssClass(renderer.$gutter,"ace_gutter-compact",!value),renderer.$gutterLayer.$renderer=gutterRenderer,
gutterRenderer&&gutterRenderer.attach&&gutterRenderer.attach(ace),void renderer.$loop.schedule(renderer.CHANGE_GUTTER)

}session&&docLut[name]?session.setOption(name,value):ace.setOption(name,value)}function createProgressIndicator(parent){
var background=parent.appendChild(document.createElement("div"))
background.style.cssText="background: inherit;position:absolute;top:0;bottom:0;left:0;right:0;",background.style.zIndex=2e4,
background.style.transitionProperty="opacity",background.style.display="none",progress=background.appendChild(document.createElement("div")),
progress.className="ace_progress",progress.innerHTML="<div></div>",progress.background=background}function hideProgress(){
function hide(){style.display="none",style.transitionDuration=0,progress.firstChild.style.width="0%"}
if(ace){var style=progress.background.style
ace.renderer.$frozen&&ace.renderer.$changes?(ace.renderer.once("afterRender",hide),ace.renderer.$loop.schedule(ace.renderer.$changes)):hide(),
style.transitionDelay=0,style.opacity=0,ace.renderer.unfreeze()}}function showProgress(value,upload,t){
upload||ace.renderer.freeze()
var growT=200
if(progress.t&&t&&progress.t-t){var vTotal=value/t,vLast=progress.value/progress.t,v=.6*vTotal+.4*vLast


growT=Math.max((value-progress.value)/v,0)||200}if(upload){if(0===value)return void(progress.start=t)


if(t-progress.start<100)return}void 0===value&&(value=0),progress.value=value,progress.t=t,progress.firstChild.style.width=value+"%",
progress.firstChild.style.transition="width "+growT+"ms",progress.className="ace_progress"+(upload?" upload":"")


var bgStyle=progress.background.style
progress.noFadeIn||upload?(bgStyle.display="block",bgStyle.opacity=1):"block"!==bgStyle.display&&(bgStyle.display="block",
bgStyle.transitionDuration=Math.max(150-(t||0),0)+"ms",bgStyle.transitionDelay=Math.max(100-(t||0),0)+"ms",
progress.forcedTransition=progress.background.clientHeight,bgStyle.opacity=1),bgStyle.bottom=upload?"":0

}function detectSettingsOnLoad(c9Session,doc){var session=c9Session.session
if(settings.get("project/ace/@guessTabSize")&&whitespaceUtil.detectIndentation(session),!session.syntax){
var syntax=detectSyntax(c9Session,doc&&doc.tab&&doc.tab.path)
syntax&&setSyntax(c9Session,syntax,!0)}var newLineMode=session.doc.getNewLineMode()
if("auto"===newLineMode){var autoNewLine=session.doc.$autoNewLine
newLineMode="\r\n"==autoNewLine?"windows":"\n"==autoNewLine?"unix":settings.get("project/ace/@newLineMode"),
session.doc.setNewLineMode(newLineMode)}}exts||(exts=[])
var plugin=new Editor("Ajax.org",main.consumes,exts&&exts.concat(extensions)||extensions),emit=plugin.getEmitter()


isBaseclass&&plugin.freezePublicAPI.baseclass()
var ace,currentSession,currentDocument,container,progress,immutableSkin
plugin.on("draw",function(e){container=e.htmlNode.appendChild(document.createElement("div")),container.className="codeditorHolder",
container.style.position="absolute",container.style.left="0px",container.style.right="0px",container.style.top=ui.getStyle(e.htmlNode,"paddingTop"),
container.style.bottom="0px"
var theme=settings.get("user/ace/@theme")
ace=new AceEditor(new VirtualRenderer(container,theme),null),e.tab.$blur=function(e){var ace=plugin.ace


ace&&e&&e.toElement&&"menu"!=e.toElement.tagName&&(ace.isFocused()?ace.textInput.blur():ace.renderer.visualizeBlur())

},ace.on("focus",function(){var page=apf.findHost(container)
apf.activeElement!=page&&page.focus()}),handle.draw(),createProgressIndicator(e.htmlNode)
var tab=e.tab
tab.on("contextmenu",function(e){var target=e.htmlEvent.target,gutter=plugin.ace.container.querySelector(".ace_gutter")


return ui.isChildOf(gutter,target,!0)?mnuGutter.show(e.x,e.y,"context"):mnuAce.show(e.x,e.y,"context"),
!1}),addEditor(ace)}),plugin.on("createAce",function(ace){c9.readonly&&ace.setReadOnly(!0),addCorner(ace),
ace.keyBinding.setDefaultHandler(null),ace.on("gutterclick",function(e){emit("guttermousedown",e)}),ace.on("gutterdblclick",function(e){
emit("gutterdblclick",e)}),handle.on("settingsUpdate",function(e){setOptions(e.options)},plugin),handle.on("themeChange",function(e){
ace.setTheme(e.path),changeTheme(),emit("themeChange",e)},plugin),handle.theme&&ace.setTheme(handle.theme.path)

}),plugin.on("newListener",function(event,listener){"createAce"==event&&ace&&listener(ace)})
var afterAnim
return plugin.on("load",function(){}),plugin.on("documentLoad",function(e){function setTitle(e){var path=doc.tab.path


path&&(doc.title=path.substr(path.lastIndexOf("/")+1),doc.tooltip=path)}var doc=e.doc,c9Session=doc.getSession()


if(progress.noFadeIn=!currentDocument||!currentDocument.tab.active,doc.on("getValue",function(e){var session=c9Session.session


return session?session.doc.getValue(session.doc.$fsNewLine):e.value},c9Session),doc.on("setValue",function(e){
var aceSession=c9Session.session
aceSession&&(aceSession.c9doc.hasValue()?merge.patchAce(e.value||"",aceSession.doc):(aceSession.setValue(e.value||""),
detectSettingsOnLoad(c9Session,doc),hideProgress()),e.state&&setState(doc,e.state),currentDocument===doc&&ace.renderer.unfreeze())

},c9Session),doc.on("mergeState",function(){return!1},c9Session),doc.on("progress",function(e){if(e.complete)c9Session.progress=0
else{var progress=e.loaded/e.total*100||0
progress>=(c9Session.progress||0)||100==c9Session.progress&&!progress?c9Session.progress=progress:c9Session.progress&&e.upload&&errorHandler.reportError("Weird progress value",{
newValue:progress,oldValue:c9Session.progress,upload:e.upload})}c9Session.upload=e.upload,currentSession==c9Session&&(e.complete?doc.hasValue()&&setTimeout(hideProgress,0):showProgress(c9Session.progress,c9Session.upload,e.dt))

},c9Session),doc.on("clone",function(e){var newsession=e.doc.getSession("ace")
newsession.session=cloneSession(c9Session.session),newsession.undoManager=newsession.session.$undoManager

},c9Session),setTitle({path:doc.tab.path||""}),doc.tab.on("setPath",function(e){if(setTitle(e),c9Session.session){
var syntax=getSyntax(c9Session,doc.tab.path)
setOption("syntax",syntax,c9Session)}},c9Session),!c9Session.inited){var aceSession=e.state&&e.state.session||c9Session.session


if(!aceSession){var acedoc=new Document(doc.value||"")
aceSession=e.state.session||new EditSession(acedoc)}c9Session.session=aceSession,c9Session.session.c9doc=doc,
c9Session.options={},c9Session.setOption=function(name,value){setOption(name,value,this)},c9Session.inited=!0,
e.state&&e.state.options||docSettings.forEach(function(setting){var name=setting[0]
setOption(name,setting[1],c9Session)}),e.state&&e.state.customSyntax&&(c9Session.session.customSyntax=e.state.customSyntax)


var syntax=getSyntax(c9Session,doc.tab.path)
setOption("syntax",syntax,c9Session),e.state&&setState(doc,e.state),doc.meta.newfile?(detectSettingsOnLoad(c9Session,doc),
aceSession.on("change",function detectIndentation(){if(aceSession.$guessTabSize){if(aceSession.getLength()<=2)return


whitespaceUtil.detectIndentation(aceSession),doc.editor&&doc.editor.ace&&doc.editor.ace._signal("changeStatus")

}aceSession.off("change",detectIndentation)})):doc.hasValue()&&detectSettingsOnLoad(c9Session,doc),c9Session.undoManager||(c9Session.undoManager=new AceUndoManager(doc.undoManager,c9Session),
c9Session.session.setUndoManager(c9Session.undoManager)),handleEmit("initAceSession",{doc:doc}),c9Session.getEmitter().sticky("init",{
doc:doc,session:c9Session.session}),doc.on("unload",function(){setTimeout(function(){var session=c9Session.session


if(session){if(session.cloned)session.cleanup()
else{var doc=session.doc
doc&&(doc.$lines=[],doc._eventRegistry=null,doc._defaultHandlers=null),session.destroy(),session.bgTokenizer=null,
session.$rowCache=null,session._eventRegistry=session.$mode=null,session.$breakpoints=null,session.$annotations=null,
session.languageAnnos=null,session.c9doc=null}c9Session.session=null,c9Session=null}})})}}),plugin.on("documentActivate",function(e){
currentDocument=e.doc,currentSession=e.doc.getSession()
var options=currentSession.options
docSettings.forEach(function(setting){options[setting[2]]&&setOption(setting[0],options[setting[2]])}),
currentSession.session&&ace.setSession(currentSession.session),currentSession.progress||!e.doc.hasValue()?showProgress(currentSession.progress,currentSession.upload):hideProgress(),
changeTheme()}),plugin.on("documentUnload",function(e){var session=e.doc.getSession()
currentSession==session&&(currentSession=null,currentDocument=null,ace&&(ace.setSession(dummySession),
ace.renderer.freeze()))}),plugin.on("resize",function(e){resize(e)}),plugin.on("getState",function(e){
getState(e.doc,e.state,e.filter)}),plugin.on("setState",function(e){setState(e.doc,e.state)}),plugin.on("clear",function(){
currentSession&&currentSession.session.setValue("")}),plugin.on("cut",function(e){if(!e["native"]){var data=ace.getCopyText()


ace.onCut(),data&&e.clipboardData.setData("text/plain",data)}}),plugin.on("copy",function(e){if(!e["native"]){
var data=ace.getCopyText()
data||document.activeElement==ace.textInput.getElement()||(data=document.getSelection().toString().replace(/\xa0/," ")),
data&&e.clipboardData.setData("text/plain",data)}}),plugin.on("paste",function(e){if(!e["native"]){var data=e.clipboardData.getData("text/plain")


data!==!1&&ace.onPaste(data)}}),plugin.on("blur",function(){blur()}),plugin.on("focus",function(e){e.lost?blur():focus()

}),plugin.on("enable",function(){ui.removeClass(container,"aceDisabled")}),plugin.on("disable",function(){
ui.addClass(container,"aceDisabled")}),plugin.on("unload",function(){ace.destroy(),container.innerHTML="",
ace=null,container=null}),plugin.freezePublicAPI({addEditor:addEditor,get ace(){return emit("getAce")||ace

},get theme(){if(!ace)return""
if(immutableSkin){var path=ace.getTheme()
try{var theme=require(path)}catch(e){}return theme||""}return handle.theme},_events:["guttermousedown","gutterdblclick","themeChange"],
isClipboardAvailable:function(e){return!e.fromKeyboard},getOption:getOption,setOption:setOption,setOptions:setOptions,
scrollTo:scrollTo}),setTimeout(function(){plugin.loaded&&handleEmit.sticky("create",{editor:plugin},plugin)

}),plugin.load(null,"ace"),plugin}var Editor=imports.Editor,editors=imports.editors,commands=imports.commands,menus=imports.menus,settings=imports.settings,layout=imports.layout,c9=imports.c9,ui=imports.ui,util=imports.util,tabs=imports.tabManager,prefs=imports.preferences,Menu=imports.Menu,MenuItem=imports.MenuItem,Divider=imports.Divider,merge=imports.threewaymerge,errorHandler=imports.error_handler,cssString=require("text!./style.less"),themes=JSON.parse(require("text!./themes.json")),modes=require("./modes"),extensions=Object.keys(modes.extensions)


require("./scrollbar")
var dom=require("ace/lib/dom"),lang=require("ace/lib/lang"),Range=require("ace/range").Range,config=require("ace/config"),Document=require("ace/document").Document,AceEditor=require("ace/editor").Editor,EditSession=require("ace/edit_session").EditSession,UndoManager=require("ace/undomanager").UndoManager,whitespaceUtil=require("ace/ext/whitespace"),defaultCommands=require("ace/commands/default_commands").commands,VirtualRenderer=require("ace/virtual_renderer").VirtualRenderer,multiSelectCommands=require("ace/multi_select").commands


require("ace/multi_select"),require("ace/ext/error_marker"),require("ace/mode/html")
var dummySession=new EditSession("")
config.setDefaultValue("session","useWorker",!1),config.setDefaultValue("editor","fixedWidthGutter",!0),
EditSession.prototype.diffAndReplace=function(range,text){var doc=this.doc,start=doc.positionToIndex(range.start),oldText=doc.getTextRange(range)


merge.patchAce(oldText,text,doc,{offset:start,method:"quick"})
var dl=text.replace(/\r\n|\r|\n/g,doc.getNewLineCharacter()).length
return doc.indexToPosition(start+dl)},require("ace/lib/fixoldbrowsers")
var handle=editors.register("ace","Ace",Ace,extensions),handleEmit=handle.getEmitter()
handleEmit.setMaxListeners(1e3)
var mnuAce,mnuGutter,lastTheme,grpSyntax,grpThemes,theme,isMinimal=options.minimal,themeLoaded={},themeCounter=100,skin=settings.get("user/general/@skin"),defaultThemes={
light:"ace/theme/cloud9_day","light-gray":"ace/theme/cloud9_day","flat-light":"ace/theme/cloud9_day",
"flat-dark":"ace/theme/cloud9_night_low_color",dark:"ace/theme/cloud9_night_low_color","dark-gray":"ace/theme/cloud9_night_low_color"
}
defaultThemes[skin]||(settings.set("user/general/@skin","dark"),skin="dark"),isMinimal?defaultThemes[skin]="ace/theme/textmate":require([defaultThemes[skin]],function(){}),
handle.__defineGetter__("theme",function(){return theme}),options.theme&&(ui.insertCss(options.theme.cssText,handle),
define(options.theme.path,[],options.theme),setTheme(options.theme.path,null,options.theme))
var BOOL="getBool",STRING="get",NUMBER="getNumber",font="Monaco, Menlo, Ubuntu Mono, Consolas, source-code-pro, monospace",aceSettings=[["newLineMode","unix",STRING,"newlinemode",1],["tabSize",4,NUMBER,"tabsize",1],["useSoftTabs",!0,BOOL,"softtabs",1],["guessTabSize",!0,BOOL,"guesstabsize",1],["useWrapMode",!1,BOOL,"wrapmode"],["wrapToView",!0,BOOL,"wrapmodeViewport"],["fontSize","12",NUMBER,"fontsize"],["fontFamily",font,STRING,"fontfamily"],["antialiasedfonts",!1,BOOL],["overwrite",!1,BOOL,"overwrite"],["selectionStyle","line",STRING,"selectstyle"],["cursorStyle","ace",STRING,"cursorstyle"],["highlightActiveLine",!0,BOOL,"activeline"],["highlightGutterLine",!0,BOOL,"gutterline"],["showInvisibles",!1,BOOL,"showinvisibles"],["showPrintMargin",!0,BOOL,"showprintmargin"],["displayIndentGuides",!0,BOOL,"showindentguides"],["printMarginColumn","80",NUMBER,"printmargincolumn"],["behavioursEnabled",!0,BOOL,"behaviors"],["wrapBehavioursEnabled",!1,BOOL,"wrapbehaviors"],["scrollSpeed","2",NUMBER,"scrollspeed"],["showGutter",!0,BOOL,"gutter"],["showLineNumbers",!0,STRING],["showFoldWidgets",!0,BOOL,"folding"],["fadeFoldWidgets",!0,BOOL,"fadefoldwidgets"],["highlightSelectedWord",!0,BOOL,"highlightselectedword"],["animatedScroll",!0,BOOL,"animatedscroll"],["scrollPastEnd","0.5",NUMBER],["mergeUndoDeltas","off",STRING],["theme",defaultThemes[skin],STRING,"theme"]],docSettings=aceSettings.slice(1,6),projectSettings=(aceSettings.slice(6),
aceSettings.slice(0,4)),userSettings=aceSettings.slice(4),docLut={}
docSettings.forEach(function(x){docLut[x[0]]=x}),AceUndoManager.prototype={add:function(delta,doc){this.$aceUndo.add(delta,doc),
this._emit("change")},addSelection:function(range,rev){this.$aceUndo.addSelection(range,rev)},undo:function(dontSelect){
this.$aceUndo.undo(dontSelect),this._emit("change")},redo:function(dontSelect){this.$aceUndo.redo(dontSelect),
this._emit("change")},reset:function(){this.$aceUndo.reset(),this._emit("change")},canUndo:function(){
return this.$aceUndo.canUndo()},canRedo:function(){return this.$aceUndo.canRedo()},clearUndo:function(){
this.$aceUndo.$undoStack=[],this._emit("change")},clearRedo:function(){this.$aceUndo.$redoStack=[],this._emit("change")

},startNewGroup:function(){return this.$aceUndo.startNewGroup()},markIgnored:function(from,to){return this.$aceUndo.markIgnored(from,to)

},getState:function(){function transform(deltaSet){if(!deltaSet||!deltaSet.filter)return void errorHandler.reportError("Misformed ace delta",{
delta:deltaSet})
var newDelta=deltaSet.filter(function(d){return d.id==aceMark&&(mark=stack.length),"insert"==d.action||"remove"==d.action

})
newDelta.length&&stack.push(newDelta)}var aceUndo=this.$aceUndo,mark=-2,aceMark=aceUndo.mark,stack=[]


aceUndo.$undoStack.forEach(transform)
var pos=stack.length-1
return pos==-1&&aceUndo.isAtBookmark()&&(mark=pos),aceUndo.$redoStackBaseRev==aceUndo.$rev&&aceUndo.$redoStack.forEach(transform),
{mark:mark,position:pos,stack:stack}},setState:function(e,silent){function check(x){return!!x.length&&(!x[0].id||x[0].id<maxRev?x[0].id=maxRev++:maxRev=x[0].id,
!0)}var aceUndo=this.$aceUndo,stack=e.stack||[],marked=stack[e.mark]&&stack[e.mark][0],pos=e.position+1,undo=stack.slice(0,pos),redo=stack.slice(pos),maxRev=aceUndo.$maxRev


aceUndo.$undoStack=undo.map(updateDeltas).filter(check),aceUndo.$redoStack=redo.map(updateDeltas).filter(check)


var lastDeltaGroup=stack[stack.length-1],lastRev=lastDeltaGroup&&lastDeltaGroup[0]&&lastDeltaGroup[0].id||0


aceUndo.$rev=lastRev,aceUndo.$redoStackBaseRev=aceUndo.$rev,aceUndo.$maxRev=Math.max(maxRev,lastRev)
var markedRev=marked&&marked.id
null!=markedRev?this.$aceUndo.bookmark(markedRev):e.mark==e.position?this.$aceUndo.bookmark():this.$aceUndo.bookmark(-1),
silent||this._emit("change")},isAtBookmark:function(){return this.$aceUndo.isAtBookmark()},bookmark:function(rev){
this.$aceUndo.bookmark(rev),this._emit("change")},bookmarkPosition:function(index){if(index>-1){var stack=this.$aceUndo.$undoStack


index>=stack.length&&(index-=stack.length,stack=this.$aceUndo.$redoStack,index=stack.length-index)
var deltaSet=stack[index],rev=deltaSet&&deltaSet[0]&&deltaSet[0].id
null==rev&&(rev=-1),this.$aceUndo.bookmark(rev)}else index==-1?this.$aceUndo.bookmark(0):this.$aceUndo.bookmark(index)


this._emit("change")},addSession:function(session){this.$aceUndo.addSession(session)},getPosition:function(){
var aceUndo=this.$aceUndo
return aceUndo.$undoStack.length-1},getLength:function(){var aceUndo=this.$aceUndo
return aceUndo.$undoStack.length+aceUndo.$redoStack.length}},handle.on("load",function(){function updateSettings(e,list,prefix){
var options={};(list||aceSettings).forEach(function(setting){options[setting[0]]=settings[setting[2]](prefix+"/ace/@"+setting[0])

}),docSettings.forEach(function(setting){var val=options[setting[0]]
void 0!==val&&(setting[1]=val,delete options[setting[0]])}),handleEmit("settingsUpdate",{options:options
}),options.theme&&setTheme(options.theme),util.extend(lastSettings,options)}isMinimal||(setPreferences(),
setMenus(),c9.on("stateChange",function(e){e.state&c9.NETWORK?menus.enableItem("View/Themes"):menus.disableItem("View/Themes")

},handle)),setCommands()
var lastSettings={}
settings.on("read",function(e){settings.setDefaults("user/ace",userSettings),settings.setDefaults("project/ace",projectSettings)


var customTheme=settings.get("user/ace/@customTheme")
customTheme&&addTheme(customTheme,handle),loadCustomExtensions(),setFontSmoothing(),updateSettings(null,userSettings,"user"),
updateSettings(null,projectSettings,"project")},handle),settings.on("user/ace",function(e){var fstyle=settings.getBool("user/ace/@antialiasedfonts")


ui.setStyleRule(".ace_editor",apf.isChrome?"WebkitFontSmoothing":"MozOSXFontSmoothing",fstyle&&(apf.isChrome?"antialiased":"grayscale")||"auto"),
updateSettings(e,userSettings,"user")},handle),settings.on("project/ace",function(e){updateSettings(e,projectSettings,"project")

},handle),handle.on("newListener",function(event,listener){"settingsUpdate"==event&&listener({options:lastSettings
})}),layout.on("themeChange",function(e){if(setFontSmoothing(),"ace"!==e.type&&settings.get("user/ace/@theme")!=defaultThemes[e.oldTheme])return!1

}),layout.on("themeDefaults",function(e){"ace"!=e.type&&handle.setTheme(defaultThemes[e.theme])},handle),
ui.insertCss(cssString,options.staticPrefix,handle)}),handle.on("unload",function(){drawn=!1})
var drawn,preview,setMenuThemeDelayed=lang.delayedCall(function(){setMenuTheme(preview,!0)},150),updateSyntaxMenu=lang.delayedCall(function(){
rebuildSyntaxMenu(),tabs.getTabs().forEach(function(tab){if("ace"==tab.editorType){var c9Session=tab.document.getSession()


if(c9Session&&c9Session.session){var syntax=getSyntax(c9Session,tab.path)
syntax&&c9Session.setOption("syntax",syntax)}}})},50),relativeNumbers={getText:function(session,row){
return(Math.abs(session.selection.lead.row-row)||row+1+(row<9?"\xb7":""))+""},getWidth:function(session,lastLineNumber,config){
return session.getLength().toString().length*config.characterWidth},update:function(e,editor){editor.renderer.$loop.schedule(editor.renderer.CHANGE_GUTTER)

},attach:function(editor){editor.renderer.$gutterLayer.$renderer=this,editor.on("changeSelection",this.update)

},detach:function(editor){editor.renderer.$gutterLayer.$renderer=null,editor.off("changeSelection",this.update)

}},noNumbers={getText:function(session,row){return""},getWidth:function(session,lastLineNumber,config){
return""},attach:function(editor){},detach:function(editor){}}
handle.freezePublicAPI({get contextMenu(){return draw(),mnuAce},get gutterContextMenu(){return draw(),
mnuGutter},themes:themes,_events:["create","themeInit","themeChange","initAceSession","draw"],setTheme:setTheme,
defineSyntax:defineSyntax,getSyntaxForPath:getSyntaxForPath,getSyntaxCaption:function(syntax){var mode=modes.byName[syntax]


return mode&&mode.caption||"Text"},addTheme:addTheme,draw:draw,cloneSession:cloneSession}),register(null,{
ace:handle})}return main.consumes=["Editor","editors","commands","menus","Menu","MenuItem","Divider","settings","c9","preferences","ui","tabManager","layout","util","threewaymerge","error_handler"],
main.provides=["ace"],main})


define("plugins/c9.ide.keys/editordp",[],function(require,exports,module){var oop=require("ace/lib/oop"),TreeData=require("ace_tree/data_provider"),DataProvider=function(root){
TreeData.call(this,root),this.rowHeight=18}
return oop.inherits(DataProvider,TreeData),function(){this.getChildren=function(node){var children=node.items,ch=children&&children[0]&&children[0]


if(ch){var d=node.$depth+1||0
children.forEach(function(n){n.$depth=d,n.parent=node})}return this.$sortNodes&&!node.$sorted&&children&&this.sort(children),
children},this.getRowIndent=function(){return 0},this.hasChildren=function(node){return node.items&&node.items.length

},this.getCaptionHTML=function(node){return node.name?node.name.replace(this.reKeyword,"<strong>$1</strong>"):""

},this.sort=function(children){var compare=TreeData.alphanumCompare
return children.sort(function(a,b){var aIsSpecial=a.noSelect,bIsSpecial=b.noSelect
return aIsSpecial&&!bIsSpecial?1:!aIsSpecial&&bIsSpecial?-1:aIsSpecial&&bIsSpecial?a.index-b.index:compare(a.name+"",b.name+"")

})},this.updateNode=function(node){var isOpen=node.isOpen
this.close(node,null,!0),isOpen&&this.open(node,null,!0)},this.getClassName=function(node){return node.className||""

}}.call(DataProvider.prototype),DataProvider})


define("plugins/c9.ide.keys/editor",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,settings.on("user/key-bindings",function(){var platform=settings.get("user/key-bindings/@platform")


"auto"==platform&&(platform=apf.isMac?"mac":"win"),commands.platform!=platform&&(commands.changePlatform(platform),
reloadModel())},plugin),settings.on("user/ace/@keyboardmode",function(){var mode=settings.getJson("user/ace/@keyboardmode")


customKeymaps[mode]&&(settings.set("user/ace/@keyboardmode","default"),settings.setJson("user/key-bindings",customKeymaps[mode]),
updateCommandsFromSettings())}),settings.on("read",function(e){updateCommandsFromSettings()},plugin),
commands.on("update",function(){reloading||(changed=!0,updateCommandsFromSettings())},plugin),save.on("beforeSave",function(e){
if(e.document.meta.keybindings){if("~/.c9/keybindings.settings"!=e.path)return void delete e.document.meta.keybindings


var json,value=e.document.value.replace(/\/\/.*/g,"").replace(/("(?:\\.|[^"])")|(?:,\s*)+([\]\}])|(\w+)\s*:|([\]\}]\s*[\[\{])/g,function(_,str,extraComma,noQuote,missingComma){
return missingComma?missingComma[0]+","+missingComma.slice(1):str||extraComma||'"'+noQuote+'":'}).trim()||"[]"


try{if(json=JSON.parse(value),!Array.isArray(json))throw new Error("")}catch(e){return alert("Syntax Error","Found a Syntax Error in Keybindings","Please correct it and try saving again."),
!1}return settings.setJson("user/key-bindings",json),updateCommandsFromSettings(),e.document.undoManager.bookmark(),
!1}},plugin),void menus.addItemByPath("Help/Key Bindings Editor",new ui.item({onclick:function(){commands.exec("openpreferences",null,{
panel:plugin})}}),250,plugin))}function draw(e){function setTheme(e){filterbox.setAttribute("class",e.theme.indexOf("dark")>-1?"dark":"")

}if(!drawn){drawn=!0,model=new TreeData,model.emptyMessage="No keybindings to display",model.columns=[{
caption:"Name",value:"name",width:"150",type:"tree"},{caption:"Keystroke",value:"keys",width:"20%",editor:"textbox"
},{caption:"Description",value:"info",width:"80%"}],layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".bar-preferences .blackdg .tree-row","height"),10)||24


model.rowHeightInner=height,model.rowHeight=height,e.changed&&datagrid.resize(!0)}),reloadModel(),plugin.form.add([{
type:"custom",title:"Introduction",position:1,node:intro=new ui.bar({"class":"intro",style:"padding:12px;position:relative;"
})},{type:"button",title:"Reset to Default Keybindings",caption:"Reset to Defaults",width:140,onclick:function(){
confirm("Reset Settings","Are you sure you want to reset your keybindings?","By resetting your keybindings to their defaults you will lose all custom keybindings.",function(){
settings.setJson("user/key-bindings",[]),settings.set("user/ace/@keyboardmode","default"),settings.set("user/key-bindings/@platform","auto"),
commands.reset(!1,!0)},function(){},{yes:"Reset Settings",no:"Cancel"})},position:90},{title:"Keyboard Mode",
type:"dropdown",path:"user/ace/@keyboardmode",name:"kbmode",items:[{caption:"Default",value:"default"
},{caption:"Vim",value:"vim"},{caption:"Emacs",value:"emacs"},{caption:"Sublime",value:"sublime"}],position:100
},{type:"dropdown",title:"Operating System",path:"user/key-bindings/@platform",items:[{caption:"Auto",
value:"auto"},{caption:"Apple OSX",value:"mac"},{caption:"Windows / Linux",value:"win"}],position:110
},{type:"custom",title:"Keybindings Editor",position:120,node:container=new ui.bar({anchors:"269 0 0 0",
"class":"keybindings",style:"padding:44px 10px 10px 10px"})}],commands),intro.$int.innerHTML='<h1>Keybindings</h1><p>Change these settings to configure how Cloud9 responds to your keyboard commands.</p><p>You can also manually edit <a href="javascript:void(0)" >your keymap file</a>.</p><p class="hint">Hint: Double click on the keystroke cell in the table below to change the keybinding.</p>',
intro.$int.querySelector("a").onclick=function(){editUserKeys()}
var div=container.$ext.appendChild(document.createElement("div"))
div.style.width=div.style.height="100%",datagrid=new Tree(div),datagrid.setTheme({cssClass:"blackdg"}),
datagrid.setDataProvider(model),datagrid.edit=new TreeEditor(datagrid),layout.on("resize",function(){
datagrid.resize()},plugin),filterbox=new apf.codebox({realtime:!0,skin:"codebox","class":"dark",clearbutton:!0,
focusselect:!0,height:27,left:10,top:10,width:250,singleline:!0,"initial-message":"Search Keybindings"
}),container.appendChild(filterbox),layout.on("themeChange",setTheme),setTheme({theme:settings.get("user/general/@skin")
}),filterbox.ace.commands.addCommands([{bindKey:"Enter",exec:function(){}},{bindKey:"Esc",exec:function(ace){
ace.setValue("")}}]),filterbox.ace.on("input",function(e){applyFilter()}),container.on("contextmenu",function(){
return!1})
var lastKey,displayKey
datagrid.on("createEditor",function(e){displayKey=lastKey="",e.ace.keyBinding.addKeyboardHandler(function(data,hashId,keyString,keyCode,e){
var ace=data.editor,disable={command:"null"},mod=keys.KEY_MODS[hashId],isTextInput=1==keyString.length&&(!mod||"shift-"==mod)


if(!(!e||isTextInput||keyCode<=0)){var key=mod.split("-").filter(Boolean)
if(!key.length){if(8==e.keyCode)return ace.setValue(""),lastKey=displayKey="",disable
if(27==e.keyCode)return ace.treeEditor.endRename(!0),disable
if(13==e.keyCode)return key=ace.getValue().split("-"),keyString=key.pop(),setTimeout(function(){ace.treeEditor.endRename(!1)

}),disable}return keyCode>0&&key.push(keys[keys[keyString]]||keyString),displayKey=lastKey=key.map(function(x){
return x.uCaseFirst()}).join("-"),"mac"==commands.platform&&(displayKey=apf.hotkeys.toMacNotation(displayKey)),
ace.setValue(displayKey),disable}})}),datagrid.on("rename",function(e){var node=e.node,name=node.name


node.keys=displayKey,node.actualKeys=lastKey
var used=commands.findKey(lastKey);(used.length>1||used[0]&&used[0].name!=name)&&alert("Notice","There are other commands bound to this key combination","["+used.map(function(x){
return x.name}).join(", ")+"]"),commands.bindKey(lastKey,commands.commands[name])
var keys={}
keys[commands.platform]=(node.actualKeys||node.keys).split("|")
var n={command:node.name,keys:keys},cmds=settings.getJson("user/key-bindings")||[]
cmds.some(function(node,i){if(node.command==n.command)return cmds[i]=n,!0})||cmds.push(n),reloadModel(),
settings.setJson("user/key-bindings",cmds)}),datagrid.once("mousemove",function(){datagrid.resize(!0)

})}}function updateCommandsFromSettings(){c9.once("ready",function(){appliedCustomSets&&reset(!0)
var cmds=settings.getJson("user/key-bindings")
cmds&&(cmds.forEach(function(cmd){if(cmd&&cmd.command){var keys=cmd.keys
"object"==typeof keys&&keys[commands.platform]&&(keys=keys[commands.platform]),Array.isArray(keys)&&(keys=keys.join("|")),
"string"==typeof keys&&commands.bindKey(keys,commands.commands[cmd.command])}}),appliedCustomSets=!0),
reloadModel(),reloading=!0,commands.flushUpdateQueue(),reloading=!1})}function reset(noReload){reloading=!0,
commands.reset(!0),noReload||(settings.setJson("user/key-bindings",[]),reloadModel()),reloading=!1}function reloadModel(){
if(model){var groups={},root=[],platform=commands.platform
Object.keys(commands.commands).forEach(function(name){var item=commands.commands[name]
if(item.name){var groupName=item.group||"General"
if("ignore"!=groupName){var group=groups[groupName]
group||root.push(group=groups[groupName]={items:[],isOpen:!0,className:"group",noSelect:!0,name:groupName
})
var keys=commands.commandManager[item.name]||""
group.items.push({name:item.name,enabled:"true",info:item.hint||"",keys:"mac"==platform?apf.hotkeys.toMacNotation(keys):keys
})}}}),model.cachedRoot={items:root},applyFilter()}}function applyFilter(){if(model.keyword=filterbox&&filterbox.getValue(),
model.keyword){model.reKeyword=new RegExp("("+util.escapeRegExp(model.keyword)+")","i")
var root=search.treeSearch(model.cachedRoot.items,model.keyword,!0)
model.setRoot(root)}else model.reKeyword=null,model.setRoot(model.cachedRoot)}function editUserKeys(tab){
var keys=settings.getJson("user/key-bindings")||[],value="// Edit this keymap file and save to apply.\n[\n"


value+=keys.map(function(key){return"    "+JSON.stringify(key).replace(/":/g,'": ').replace(/,/g,", ").replace(/\{/g,"{ ").replace(/\}/g," }")

}).join(",\n"),keys.length||(value+='    // { "command": "nexttab", "keys": { win: "Ctrl-Tab", mac: "Cmd-Tab" } }'),
value+="\n]",tab?tab.document.value=value:tabManager.open({path:"~/.c9/keybindings.settings",value:value,
active:!0,editorType:"ace",document:{ace:{customSyntax:"javascript"},meta:{keybindings:!0,nofs:!0}}},function(err,tab){})

}function addCustomKeymap(name,keymap,plugin){customKeymaps[name]=keymap,Object.keys(customKeymaps).length||menus.addItemByPath("Edit/Keyboard Mode/~",new ui.divider,1e4,plugin),
menus.addItemByPath("Edit/Keyboard Mode/"+name,new ui.item({type:"radio",value:name.toLowerCase(),onclick:function(e){
settings.set("user/ace/@keyboardmode",name)}}),1e4+Object.keys(customKeymaps).length,plugin),plugin.addOther(function(){
delete customKeymaps[name]}),plugin.visible&&updateKeymaps()}function updateKeymaps(){var items=[{caption:"Default",
value:"default"},{caption:"Vim",value:"vim"},{caption:"Emacs",value:"emacs"},{caption:"Sublime",value:"sublime"
}]
for(var name in customKeymaps)items.push({caption:name,value:name})
plugin.form.update([{id:"kbmode",items:items}])}var model,datagrid,changed,container,filterbox,appliedCustomSets,intro,reloading,drawn,PreferencePanel=imports.PreferencePanel,commands=imports.commands,settings=imports.settings,layout=imports.layout,ui=imports.ui,c9=imports.c9,util=imports.util,save=imports.save,menus=imports.menus,tabManager=imports.tabManager,alert=imports["dialog.alert"].show,confirm=imports["dialog.confirm"].show,search=require("../c9.ide.navigate/search"),keys=require("ace/lib/keys"),Tree=require("ace_tree/tree"),TreeData=require("./editordp"),TreeEditor=require("ace_tree/edit"),plugin=new PreferencePanel("Ajax.org",main.consumes,{
caption:"Keybindings",className:"keybindings flatform",form:!0,noscroll:!0,index:200}),customKeymaps={},loaded=!1


plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("activate",function(e){
drawn&&(datagrid.resize(),updateKeymaps())}),plugin.on("resize",function(e){datagrid&&datagrid.resize()

}),plugin.on("unload",function(){loaded=!1,drawn=!1,model=null,datagrid=null,changed=null,container=null,
filterbox=null,appliedCustomSets=null,intro=null,reloading=null}),plugin.freezePublicAPI({editUserKeys:editUserKeys,
addCustomKeymap:addCustomKeymap}),register(null,{"preferences.keybindings":plugin})}return main.consumes=["PreferencePanel","commands","settings","ui","util","Form","c9","dialog.alert","tabManager","save","dialog.confirm","layout","menus"],
main.provides=["preferences.keybindings"],main})


define("plugins/c9.ide.keys/commands",[],function(require,exports,module){function main(options,imports,register){
function load(){if(loaded)return!1
loaded=!0
var kb=new KeyBinding({commands:commandManager,fake:!0})
event.addCommandKeyListener(document.documentElement,kb.onCommandKey.bind(kb)),event.addListener(document.documentElement,"keyup",function(e){
18===e.keyCode&&e.preventDefault()}),settings.on("read",function(e){settings.setDefaults("user/key-bindings",[["preset","default"],["platform","auto"]])


var platform=settings.get("user/key-bindings/@platform")
platform&&"auto"!=platform&&changePlatform(platform)}),addCommands([{name:"passKeysToBrowser",group:"ignore",
bindKey:{win:"F12|Ctrl-Shift-I",mac:"F12|Cmd-`|Cmd-Option-I|Cmd-H|Cmd-M"},exec:function(){},passEvent:!0,
hint:"Allow keys to be handled by the browser"},{name:"cancelBrowserAction",group:"ignore",bindKey:{mac:"Cmd-S|Cmd-R|Cmd-[|Cmd-]",
win:"Ctrl-S|Ctrl-R|Alt-Left|Alt-Right",position:-1e4},exec:function(){},hint:"This cancels some native browser keybindings that can be annoying if triggered accidentally"
}],plugin)}function changePlatform(value){platform="auto"==value?apf.isMac?"mac":"win":value,commandManager.platform=platform,
Object.keys(commands).forEach(function(name){var command=commands[name],displayKey=command.bindKey||command.nativeKey


displayKey&&plugin.commandManager.setProperty(command.name,displayKey[platform])})}function getHotkey(command){
return commands[command]&&commands[command].bindKey?commands[command].bindKey[platform]:""}function getPrettyHotkey(command){
var key=getHotkey(command)
return"mac"==platform&&(key=apf.hotkeys.toMacNotation(key)),key}function exec(command,editor,args,e){
var sCommand=command
if(editor&&!editor.fake||(editor=emit("getEditor")),Array.isArray(command)){for(var i=command.length;i--;)if(this.exec(command[i],editor,args,e))return!0


return!1}if("string"==typeof command&&(command=commands[command]),!command)return console.warn("Could not find command ",sCommand),
!1
if(!command.isAvailable||command.isAvailable(editor,args,e)){if(command.findEditor&&(editor=command.findEditor(editor,e)),
editor&&editor.$readOnly&&!command.readOnly)return!1
var execEvent={editor:editor,command:command,args:args,sequenceID:++execSequenceID}
emit("beforeExec",execEvent)
var retvalue
return editor&&editor.commands?(retvalue=editor.commands._emit("exec",execEvent),editor.commands._signal("afterExec",execEvent)):retvalue=commandManager._emit("exec",execEvent),
retvalue!==!1&&args&&"undefined"!=typeof apf&&apf.queue.empty(),execEvent.returnValue=retvalue,emit("afterExec",execEvent),
retvalue!==!1}}function addCommand(command,hostPlugin,asDefault){if(!command.name)return console.error("trying to add a command without name",command)


plugin.commandManager[command.name]="",void 0===command.readOnly&&(command.readOnly=!0),"string"==typeof command.bindKey&&(command.bindKey={
win:command.bindKey,mac:command.bindKey}),asDefault&&(command.isDefault=asDefault),commandManager.addCommand.apply(commandManager,arguments)


var displayKey=command.bindKey||command.nativeKey
return displayKey&&plugin.commandManager.setProperty(command.name,displayKey[platform]),command.originalBindKey||(command.originalBindKey=command.bindKey||(command.bindKey={
mac:"",win:""})),hostPlugin.addOther(function(){removeCommand(command)}),markDirty.schedule(),command

}function addCommands(list,hostPlugin,asDefault){list&&Object.keys(list).forEach(function(name){var command=list[name]


return"string"==typeof command?bindKey(command,name,asDefault):("function"==typeof command&&(command={
exec:command}),command.name||(command.name=name),"string"==typeof command.bindKey&&(command.bindKey={
mac:command.bindKey,win:command.bindKey}),void(asDefault&&commands[command.name]||(command.isDefault=asDefault,
addCommand(command,hostPlugin,asDefault))))})}function removeCommands(commands){Object.keys(commands).forEach(function(name){
removeCommand(commands[name])})}function removeCommand(command,context,clean){if(command){var name="string"==typeof command?command:command.name


name&&(plugin.commandManager[name]&&plugin.commandManager.setProperty(name,""),command=commands[name],
clean||delete commands[name]),commandManager.removeCommand(command,clean),markDirty.schedule()}}function setDefault(name,keys){
var command=commands[name]
command&&(plugin.commandManager[name]==command.bindKey[platform]&&bindKey(keys[platform],command),command.bindKey=keys)

}function bindKey(key,command,asDefault){removeCommand(command,null,!0),command&&("string"!=typeof key&&key?command.bindKey=key:(command.bindKey={},
command.bindKey[commandManager.platform]=key),void 0==command.bindKey.position&&(command.bindKey.position=command.originalBindKey.position),
commandManager.bindKey(command.bindKey,command,asDefault),plugin.commandManager.setProperty(command.name,command.bindKey[commandManager.platform]))

}function findKey(key,scope){var commands=commandManager.commandKeyBinding[key]
if(commands||(commands=commandManager.commandKeyBinding[key.toLowerCase()]),!commands)return[]
if(Array.isArray(commands)||(commands=[commands]),"global"==scope){var exceptions=getExceptionList()
commands=commands.filter(function(c){return exceptions.indexOf(c)!=-1})}return commands}function reset(noReload,toDefault){
commandManager.commandKeyBinding={},Object.keys(commands).forEach(function(name){var cmd=commands[name]


bindKey(toDefault?cmd.originalBindKey:cmd.bindKey,cmd)}),noReload?markDirty.cancel():markDirty.schedule()

}function flushUpdateQueue(){markDirty.call()}function getExceptionList(){return[{bindKey:{win:null,mac:"Command-O"
},name:"navigateAlt",passEvent:!0,exec:function(){}},commands.openpreferences,commands.passKeysToBrowser,commands.commands,commands.find,commands.openterminal,commands.navigate,commands.searchinfiles,commands.close_term_pane,commands.closeallbutme,commands.closealltabs,commands.closealltotheleft,commands.closealltotheright,commands.closepane,commands.closetab,commands.gototabright,commands.gototableft,commands.movetabright,commands.movetableft,commands.movetabup,commands.movetabdown,commands.nexttab,commands.previoustab,commands.nextpane,commands.previouspane,commands.exit,commands.toggleconsole,commands.runlast,commands.run,commands.resume,commands.stepinto,commands.stepover,commands.stepout,commands.devtools,commands.open,commands.settings,commands["new"],commands.build,commands.switchterminal,commands.findinfiles,commands.tab1,commands.tab2,commands.tab3,commands.tab4,commands.tab5,commands.tab6,commands.tab7,commands.tab8,commands.tab9,commands.tab0,commands.revealtab,commands.reopenLastTab,commands.gotopaneleft,commands.gotopaneright,commands.gotopaneup,commands.gotopanedown].filter(Boolean)

}function getExceptionBindings(){var list=[]
return getExceptionList().forEach(function(cmd){var m=cmd&&cmd.bindKey&&cmd.bindKey[platform]
m&&list.push.apply(list,m.split("|").map(function(keyPart){var binding=commandManager.parseKeys(keyPart,cmd)


return binding.key=keyUtil[binding.key],{binding:binding,command:cmd.name}}))}),list}var Plugin=imports.Plugin,settings=imports.settings,lang=require("ace/lib/lang"),event=require("ace/lib/event"),keyUtil=require("ace/lib/keys"),KeyBinding=require("ace/keyboard/keybinding").KeyBinding,CommandManager=require("ace/commands/command_manager").CommandManager,nav=navigator.platform.toLowerCase(),platform=nav.indexOf("mac")>-1?"mac":"win",commandManager=new CommandManager(platform),commands=commandManager.commands,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),execSequenceID=0


commandManager.exec=exec
var loaded=!1,markDirty=lang.delayedCall(function(){emit("update")},500)
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({flushUpdateQueue:flushUpdateQueue,get commandKeyBinding(){
commandManager.commandKeyBinding},commandManager:"undefined"!=typeof apf?(new apf.Class).$init():{setProperty:function(x,y){
this[x]=y}},get commands(){return commands},get platform(){return platform},changePlatform:changePlatform,
getHotkey:getHotkey,getPrettyHotkey:getPrettyHotkey,exec:exec,addCommand:addCommand,addCommands:addCommands,
removeCommands:removeCommands,removeCommand:removeCommand,bindKey:bindKey,findKey:findKey,reset:reset,
setDefault:setDefault,getExceptionList:getExceptionList,getExceptionBindings:getExceptionBindings}),register(null,{
commands:plugin})}return main.consumes=["Plugin","settings"],main.provides=["commands"],main})


define("plugins/c9.ide.metrics/metrics",[],function(require,exports,module){"use strict"
function main(options,imports,register){function publishApi(newApi){api=newApi,delayedCalls.forEach(function(args){
var name=args.shift()
api[name].apply(api,args)}),delayedCalls=[]}var api,Plugin=imports.Plugin,plugin=new Plugin("Ajax.org",main.consumes),delayedCalls=[],apiFunction=options.hosted?function(apiName,varArgs){
var args=[].slice.apply(arguments)
if(!api)return arguments[1]&&delayedCalls.push(args)
var name=args.shift()
return api[name].apply(api,args)}:function(){}
plugin.freezePublicAPI({$publishApi:publishApi,$setRequestApi:apiFunction.bind(null,"$setRequestApi"),
increment:apiFunction.bind(null,"increment"),log:apiFunction.bind(null,"log"),getLatest:apiFunction.bind(null,"getLatest"),
getLastPing:apiFunction.bind(null,"getLastPing"),onPingComplete:apiFunction.bind(null,"onPingComplete")
}),register(null,{metrics:plugin})}return main.consumes=["Plugin"],main.provides=["metrics"],main})


define("plugins/c9.ide.openfiles/openfilesdp",[],function(require,exports,module){function DataProvider(root){
BaseClass.call(this,root||{}),this.rowHeight=19,this.rowHeightInner=18}var oop=require("ace/lib/oop"),BaseClass=require("ace_tree/data_provider"),escapeHTML=require("ace/lib/lang").escapeHTML


return oop.inherits(DataProvider,BaseClass),function(){this.$sortNodes=!1,this.getEmptyMessage=function(){
return"No open files"},this.getRowIndent=function(node){return node.$depth?node.$depth-1:0},this.getClassName=function(datarow){
return datarow.className||""},this.getIconHTML=function(datarow){var tab=datarow.tab
if(!tab)return""
var className=tab.document.meta.saving||tab.document.changed&&"changed",html="<strong class='close "+className+"'> </strong>"


return html},this.getCaptionHTML=function(datarow){return escapeHTML(datarow.name)+(datarow.tab?"<span class='extrainfo'> - "+escapeHTML(datarow.path)+"</span>":"")

},this.getTooltipText=function(datarow){return datarow.path||datarow.name}}.call(DataProvider.prototype),
DataProvider})


define("text!plugins/c9.ide.openfiles/openfiles.css",[],"")


define("plugins/c9.ide.openfiles/openfiles",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,tabs.on("focusSync",delayedUpdate),
tabs.on("tabAfterClose",update),tabs.on("tabReparent",delayedUpdate),tabs.on("tabOrder",delayedUpdate),
save.on("tabSavingState",refresh),commands.addCommand({name:"toggleOpenfiles",exec:function(editor,args){
toggleOpenfiles(args&&args.forceOpen)}},plugin),menus.addItemByPath("View/Open Files",new ui.item({type:"check",
checked:"user/openfiles/@show"}),210,plugin),tree.getElement("mnuFilesSettings",function(mnuFilesSettings){
ui.insertByIndex(mnuFilesSettings,new ui.item({caption:"Show Open Files",type:"check",checked:"user/openfiles/@show"
}),190,plugin),ui.insertByIndex(mnuFilesSettings,new ui.divider,185,plugin)}),settings.on("read",function(e){
settings.setDefaults("user/openfiles",[["show",defaultShow],["hidetree","false"]]),showOpenFiles=settings.getBool("user/openfiles/@show"),
updateVisibility(showOpenFiles)},plugin),settings.on("user/openfiles/@show",function(value){showOpenFiles=value,
updateVisibility(showOpenFiles)}),void panels.on("showPanelTree",function(){update()}))}function draw(){
drawn||(drawn=!0,ui.insertCss(require("text!./openfiles.css"),staticPrefix,plugin),tree.getElement("winOpenfiles",function(winOpenfiles){
function updateScrollBarSize(){var w=ofTree.renderer.scrollBarV.getWidth()
ofTree.renderer.scroller.style.right=Math.max(w,10)+"px"}treeParent=winOpenfiles,tree.getElement("winFileTree",function(winFileTreeL){
winFileTree=winFileTreeL})
var div=document.createElement("div")
treeParent.$int.appendChild(div),ofTree=new Tree(div),ofDataProvider=new TreeData,ofTree.renderer.setTheme({
cssClass:"filetree"}),ofTree.setDataProvider(ofDataProvider),ofDataProvider.staticPrefix=staticPrefix,
layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".openfiles .ace_tree .tree-row","height"),10)


ofDataProvider.rowHeightInner=height,ofDataProvider.rowHeight=height,e.changed&&tree.resize(!0)}),ofTree.on("userSelect",function(){
setTimeout(onSelect,40)}),ofTree.renderer.on("scrollbarVisibilityChanged",updateScrollBarSize),ofTree.renderer.on("resize",updateScrollBarSize),
ofTree.on("mousedown",function(e){var domTarget=e.domEvent.target,pos=e.getDocumentPosition(),node=ofDataProvider.findItemAtOffset(pos.y)


if(node.children&&!~domTarget.className.indexOf("toggler"))return void e.preventDefault()
if(node&&node.path&&domTarget&&~domTarget.className.indexOf("close")){var amlTab=node.tab.aml
amlTab.parentNode.remove(amlTab,{})}}),ofTree.focus=function(){},ofTree.renderer.on("autoresize",function(){
updateHeight()}),ofTree.setOption("maxLines",100),ofTree.renderer.getMaxHeight=function(){return Math.floor(.5*treeParent.parentNode.$int.offsetHeight-23)

},mnuFilesSettings=tree.getElement("mnuFilesSettings"),ctxItem=ui.insertByIndex(mnuFilesSettings,new ui.item({
caption:"Hide Workspace Files",type:"check",visible:treeParent.visible,checked:"state/openfiles/@hidetree",
onclick:function(e){hideTree(this.checked)}}),195,plugin),showOpenFiles?(tabs.once("ready",function(){
show()}),settings.getBool("state/openfiles/@hidetree")&&hideTree(!0)):hideOpenFiles(),emit("draw")}))

}function hideTree(state){settings.set("state/openfiles/@hidetree",state),treeParent&&(state?ui.setStyleClass(treeParent.parentNode.$int,"hidetree"):ui.setStyleClass(treeParent.parentNode.$int,"",["hidetree"])),
mnuFilesSettings&&mnuFilesSettings.childNodes.forEach(function(node){node.$position>=200&&node.setAttribute("visible",!state)

}),ofTree&&(ofTree.resize(),tree.resize())}function delayedUpdate(){updateTimer||(updateTimer=setTimeout(function(){
updateTimer=null,update()},10))}function update(){if(showOpenFiles&&panels.isActive("tree")&&(draw(),
ofTree)){preventUpdate=!0
var activePanes=tabs.getPanes(tabs.container),focussedTab=tabs.focussedTab
focussedTab&&activePanes.indexOf(focussedTab.pane)===-1&&activePanes.length&&(focussedTab=activePanes[0].getTab()),
tabs.getTabs().forEach(function(tab){tab.document&&tab.document.off("changed",refresh)})
var selected,root={groups:[]},actualRoot={children:[{name:"open files",path:"!openfiles",isOpen:!0,className:"heading",
isRoot:!0,isFolder:!0,status:"loaded",map:{},children:root.groups,noSelect:!0}]},oldRoot=ofDataProvider&&ofDataProvider.root,existing=oldRoot&&oldRoot.groups||{}


if(root.children=activePanes.map(function(pane,i){var group=existing[i]||{isOpen:!0,className:"group"
}
return"forced"==group.isOpen&&(group.isOpen=!1),root.groups[i]=group,group.children=null,group.children=pane.getTabs().filter(function(tab){
return tab.path&&tab.loaded&&!tab.meta.$closing}).map(function(tab){var node={name:basename(tab.path),
path:tab.path,tab:tab}
return tab==focussedTab&&(selected=node,group.isOpen="forced"),tab.document.on("changed",refresh),node

}),group}).filter(function(pane){return pane.children.length}).map(function(node,i){return node.name="GROUP "+(i+1),
node}),!root.children.length)return preventUpdate=!1,hideOpenFiles()
ui.setStyleClass(treeParent.parentNode.$int,"hasopenfiles"),treeParent.show(),1===root.children.length&&(actualRoot.children[0].children=root.children[0].children),
ofDataProvider.setRoot(actualRoot),ofDataProvider.selection.selectNode(selected),updateHeight()}}function updateHeight(selected){
preventUpdate=!0
var maxHeight=.5*treeParent.parentNode.$int.offsetHeight,treeHeight=ofTree.renderer.desiredHeight+23
treeParent.$int.style.height=dragged?Math.min(treeParent.getHeight(),treeHeight)+"px":Math.min(treeHeight,maxHeight)+"px",
tree.resize(),selected||(selected=ofTree.selectedNode),ofTree.renderer.scrollCaretIntoView(selected,.5),
preventUpdate=!1}function refresh(){showOpenFiles&&ofDataProvider&&ofDataProvider._signal("change")}function onSelect(){
var node=ofTree.selection.getCursor()
node&&tabs.focussedTab&&tabs.focussedTab.path!=node.path&&tabs.focusTab(node.path)}function hideOpenFiles(){
var htmlNode=treeParent&&treeParent.parentNode.$int
htmlNode&&ui.setStyleClass(htmlNode,"",["hasopenfiles"]),treeParent&&treeParent.hide(),tree.resize()}
function toggleOpenfiles(forceOpen){showOpenFiles=null==forceOpen?!showOpenFiles:forceOpen,settings.set("user/openfiles/@show",showOpenFiles),
updateVisibility(showOpenFiles)}function updateVisibility(show){show?(draw(),update(),ctxItem&&ctxItem.show(),
settings.getBool("state/openfiles/@hidetree")&&hideTree(!0),panels.isActive("tree")||(panels.once("showPanelTree",function(){
ofTree.resize(!0),tree.resize(!0)}),panels.activate("tree"))):(hideOpenFiles(),ctxItem&&ctxItem.hide(),
treeParent&&hideTree(!1)),emit("visible",{value:show})}function show(){updateVisibility(!0)}function hide(){
updateVisibility(!1)}var ofDataProvider,ofTree,treeParent,winFileTree,ctxItem,preventUpdate,mnuFilesSettings,updateTimer,Plugin=imports.Plugin,tabs=imports.tabManager,menus=imports.menus,commands=imports.commands,settings=imports.settings,panels=imports.panels,layout=imports.layout,tree=imports.tree,save=imports.save,ui=imports.ui,Tree=require("ace_tree/tree"),TreeData=require("./openfilesdp"),basename=require("path").basename,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),staticPrefix=options.staticPrefix,showOpenFiles=!1,defaultShow=options.defaultShow,dragged=!1,loaded=!1,drawn=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,drawn=!1}),plugin.freezePublicAPI({show:show,hide:hide,update:update,
refresh:refresh,showTree:hideTree.bind(null,!1),hideTree:hideTree.bind(null,!0)}),register(null,{openfiles:plugin
})}return main.consumes=["Plugin","tabManager","menus","commands","settings","tree","save","ui","c9","panels","layout"],
main.provides=["openfiles"],main})


define("plugins/c9.ide.closeconfirmation/closeconfirmation",[],function(require,exports,module){"use strict"


function main(options,imports,register){function load(callback){return!loaded&&(loaded=!0,window.onbeforeunload=onBeforeUnloadHandler,
settings.on("read",function(){settings.setDefaults("user/general",[["confirmexit",defaultValue]])},plugin),
void prefs.add({General:{General:{"Warn Before Exiting":{type:"checkbox",position:8e3,path:"user/general/@confirmexit"
}}}},plugin))}function unload(){window.onbeforeunload===onBeforeUnloadHandler&&(window.onbeforeunload=null)

}function onBeforeUnloadHandler(){var changed=tabs.getTabs().some(function(tab){return tab.document.value&&tab.document.changed

})
emit("exit",{changed:changed})
var confirmExit=settings.getBool("user/general/@confirmexit")&&auth.loggedIn
if(confirmExit)return changed?"You have unsaved changes. Your changes will be lost if you don't save them":"You're about to leave "+ideProviderName+"."

}var Plugin=imports.Plugin,tabs=imports.tabManager,settings=imports.settings,prefs=imports.preferences,auth=imports.auth,ideProviderName=options.ideProviderName||"Cloud9",plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),defaultValue=options.defaultValue,loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){unload(),loaded=!1}),plugin.freezePublicAPI({}),register(null,{closeconfirmation:plugin
})}return main.consumes=["Plugin","tabManager","settings","preferences","auth"],main.provides=["closeconfirmation"],
main})


define("plugins/c9.ide.undo/undo",[],function(require,exports,module){"use strict"
function main(options,imports,register){function canDo(actionName){return function(editor,args,event){
var tab=tabs.focussedTab
if(tab)return!(event instanceof KeyboardEvent&&!tabs.focussed)&&(tab&&tab.document.undoManager[actionName]())

}}function load(callback){return!loaded&&(loaded=!0,commands.addCommand({name:"undo",exec:undo,isAvailable:canUndo,
bindKey:{mac:"Command-Z",win:"Ctrl-Z"}},plugin),commands.addCommand({name:"redo",exec:redo,isAvailable:canRedo,
bindKey:{mac:"Command-Shift-Z|Command-Y",win:"Ctrl-Shift-Z|Ctrl-Y"}},plugin),menus.addItemByPath("Edit/Undo",new apf.item({
command:"undo"}),100,plugin),void menus.addItemByPath("Edit/Redo",new apf.item({command:"redo"}),200,plugin))

}function undo(editor){editor&&editor.ace?editor.ace.execCommand("undo"):canUndo()&&apf.isChildOf(tabs.container,apf.activeElement,!0)&&tabs.focussedTab.document.undoManager.undo()

}function redo(editor){editor&&editor.ace?editor.ace.execCommand("redo"):canRedo()&&apf.isChildOf(tabs.container,apf.activeElement,!0)&&tabs.focussedTab.document.undoManager.redo()

}var Plugin=imports.Plugin,menus=imports.menus,commands=imports.commands,tabs=imports.tabManager,apf=imports.apf,plugin=new Plugin("Ajax.org",main.consumes),canUndo=canDo("canUndo"),canRedo=canDo("canRedo"),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({undo:undo,redo:redo}),register(null,{
undo:plugin})}return main.consumes=["Plugin","menus","tabManager","commands","apf"],main.provides=["undo"],
main})


define("plugins/c9.ide.newresource/open",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,void menus.addItemByPath("File/Open...",new ui.item({command:"navigate"
}),400,plugin))}function open(){commands.exec("navigate")}var Plugin=imports.Plugin,ui=imports.ui,menus=imports.menus,commands=imports.commands,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({open:open}),register(null,{open:plugin
})}return main.consumes=["Plugin","ui","menus","commands"],main.provides=["open"],main})


define("text!plugins/c9.ide.newresource/default.templates",[],"filename .txt\ncaption Text file\nsection General\n\t\nfilename .js\ncaption JavaScript file\nsection General\n\t// JavaScript File\n\nfilename .coffee\nsection General\ncaption CoffeeScript file\n\t\nfilename .html\nsection General\ncaption HTML file\n\t<!DOCTYPE html>\n\t<html>\n\t    <head>\n\t        <title> </title>\n\t    </head>\n\t    <body>\n\t\n\t    </body>\n\t</html>\nfilename .xml\nsection General\ncaption XML file\n\t<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\t<root />\nfilename .xq\nsection Others\ncaption XQuery file\n\txquery version \"1.0\";\n\tlet $message := \"Hello World!\"\n\treturn <results>\n\t  <message>{$message}</message>\n\t</results>\nfilename .css\nsection General\ncaption CSS file\n\t\nfilename .scss\nsection General\ncaption SCSS file\n\t\nfilename .less\nsection General\ncaption LESS file\n\t\nfilename .svg\nsection Others\ncaption SVG file\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\n\t  \n\t</svg>\nfilename .py\nsection General\ncaption Python file\n\t\nfilename .php\nsection General\ncaption PHP file\n\t<?php\n\t\n\t?>\nfilename .rb\nsection General\ncaption Ruby file\n\t\nfilename .mli\nsection Others\ncaption OCaml file\n\t\nfilename .clj\nsection Others\ncaption Clojure file\n\t\nfilename .md\nsection General\ncaption Markdown\n\t# \nfilename .js\nsection Node.js\ncaption Express file\n\t// *******************************************************\n\t// expressjs template\n\t//\n\t// assumes: npm install express\n\t// defaults to jade engine, install others as needed\n\t//\n\t// assumes these subfolders:\n\t//   public/\n\t//   public/javascripts/\n\t//   public/stylesheets/\n\t//   views/\n\t//\n\tvar express = require('express');\n\tvar app = module.exports = express.createServer();\n\tvar viewEngine = 'jade'; // modify for your view engine\n\t// Configuration\n\tapp.configure(function(){\n\t  app.set('views', __dirname + '/views');\n\t  app.set('view engine', viewEngine);\n\t  app.use(express.bodyParser());\n\t  app.use(express.methodOverride());\n\t  app.use(app.router);\n\t  app.use(express.static(__dirname + '/public'));\n\t});\n\tapp.configure('development', function(){\n\t  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\n\t});\n\tapp.configure('production', function(){\n\t  app.use(express.errorHandler());\n\t});\n\t// *******************************************************\nfilename .js\nsection Node.js\ncaption Node.js web server\n\tvar http = require('http');\n\thttp.createServer(function (req, res) {\n\t  res.writeHead(200, {'Content-Type': 'text/plain'});\n\t  res.end('Hello World from Cloud9\\n');\n\t}).listen(process.env.PORT);")


define("plugins/c9.ide.newresource/newresource",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(callback){return!loaded&&(loaded=!0,commands.addCommand({
name:"newfile",hint:"create a new file resource",msg:"New file created.",bindKey:{mac:"Ctrl-N",win:"Alt-N"
},exec:function(){newFile()}},plugin),commands.addCommand({name:"newfolder",hint:"create a new directory resource",
exec:function(){newFolder()}},plugin),menus.addItemByPath("File/New File",new ui.item({disabled:readonly,
command:"newfile"}),100,plugin),menus.addItemByPath("File/New From Template",new ui.item({disabled:readonly
}),200,plugin),void addFileTemplate(templates,plugin))}function getDirPath(){var node=tree.getSelectedNode(),path=node.path||node.getAttribute("path")


return(node.getAttribute?"file"!=node.getAttribute("type")&&"file"!=node.tagName:node.isFolder)||(path=path.replace(/\/[^\/]*$/,"/")),
/\/$/.test(path)||(path+="/"),path}function newFile(type,value,path){if(!readonly){var filePath,name="Untitled",count=1


type=type||"",path=path||getDirPath()
for(var ext=defaultExtension;tabs.findTab(filePath=path+name+(count||"")+type+ext);)count++
tabs.open({path:filePath,value:value||"",focus:!0,document:{meta:{newfile:!0}}},function(err,tab){})}
}function newFolder(path,callback){tree.createFolder(path,!1,callback||function(){})}function parse(data){
var list=[],context={template:[]}
list.push(context)
var restart
return data.split("\n").forEach(function(line){if(/^(?:\t| {4})(.*)/.test(line))return context.template.push(RegExp.$1),
void(restart=!0)
if(restart&&(list.push(context={template:[]}),restart=!1),line){var m=line.match(/^(\w+) (.*)$/)
m&&(context[m[1]]=m[2])}}),list}function addFileTemplate(data,forPlugin){var list=parse(data)
list.forEach(function(item){menus.addItemByPath("File/New From Template/"+item.caption,new ui.item({disabled:readonly,
onclick:function(){newFile(item.filename,item.template.join("\n"))}}),200,forPlugin)})}var Plugin=imports.Plugin,c9=imports.c9,ui=imports.ui,menus=imports.menus,commands=imports.commands,tabs=imports.tabManager,tree=imports.tree,templates=options.templates||require("text!./default.templates"),plugin=new Plugin("Ajax.org",main.consumes),readonly=c9.readonly,defaultExtension="",loaded=!1


plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1,defaultExtension=null}),
plugin.freezePublicAPI({newFile:newFile,newFolder:newFolder,addFileTemplate:addFileTemplate,set defaultExtension(extension){
defaultExtension=extension?"."+extension:"",tree.defaultExtension=extension}}),register(null,{newresource:plugin
})}return main.consumes=["Plugin","c9","ui","menus","tabManager","commands","tree"],main.provides=["newresource"],
main})


define("plugins/c9.ide.editors/undomanager",[],function(require,module,exports){function main(options,imports,register){
function UndoManager(options){function canUndo(){return position>=0}function undo(){if(!canUndo())return!1


var item=stack[position]
item.undo||(item=stack[position]=findItem(item)),position--,item.undo(),emit("change")}function canRedo(){
return position!==stack.length-1}function redo(){if(!canRedo())return!1
position++
var item=stack[position]
item.redo||(item=stack[position]=findItem(item)),item.redo(),emit("change")}function clearUndo(){stack=stack.slice(position-1),
position=0,mark<position&&(mark=-2),emit("change")}function clearRedo(noEvent){stack=stack.slice(0,position+1),
mark>position&&(mark=-2),noEvent||emit("change")}function add(item){if(!item.undo||!item.redo)throw new Error("Missing undo and/or redo method implementation")


clearRedo(!0),stack.push(item),position=stack.length-1,emit("change")}function remove(idx){var item=stack.splice(idx,1)[0]


item.undo||(item=findItem(item)),item.undo(),idx<=position&&position--,mark==idx?mark=-2:mark>idx&&mark--,
emit("change")}function bookmark(index){mark=void 0!==index?index:position,emit("change")}function isAtBookmark(){
return mark==position}function item(idx){return stack[idx]||null}function getState(){return{mark:mark,
position:position,stack:stack.filter(function(item){return item}).map(function(item){return item.getState?item.getState():item

})}}function setState(state){return state&&state.stack.length?(mark=state.mark,position=state.position,
void(state.stack.length&&void 0==state.stack[0]||(stack=state.stack,emit("change")))):reset()}function findItem(compressedItem){
return emit("itemFind",{state:compressedItem})}function reset(){position!=-1&&(position=-1,stack=[],mark=-1,
emit("change"))}var plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),position=-1,mark=-1,stack=[]


return options&&setState(options),plugin.freezePublicAPI.baseclass(),plugin.freezePublicAPI({get length(){
return stack.length},get position(){return position},events:["itemFind","change"],canUndo:canUndo,canRedo:canRedo,
undo:undo,redo:redo,reset:reset,item:item,bookmark:bookmark,isAtBookmark:isAtBookmark,clearUndo:clearUndo,
clearRedo:clearRedo,getState:getState,setState:setState,add:add,remove:remove}),plugin.load(null,"undoManager"),
plugin}var Plugin=imports.Plugin
register(null,{UndoManager:UndoManager})}return main.consumes=["Plugin"],main.provides=["UndoManager"],
main})


define("plugins/c9.ide.editors/pane",[],function(require,module,exports){function main(options,imports,register){
function Pane(options){function load(){var btnPlus,btnMenu,closing=0
meta={},amlPane=new ui.tab({skin:options&&options.skin||"editor_tab",skinset:options&&options.skinset||"default",
style:"height : 100%",width:options&&options.width,height:options&&options.height,activepage:options.preventAutoActivate?-1:0,
minwidth:60,minheight:60,buttons:"close,scale,order",anims:settings.getBool("user/general/@animateui")?"add|remove|sync":"",
onbeforeswitch:function(e){var tab=e.nextPage.cloud9tab,lastTab=e.previousPage&&e.previousPage.cloud9tab


if(e.previousPage){var html=e.previousPage.$button
ui.setStyleClass(html,"notrans"),setTimeout(function(){ui.setStyleClass(html,"",["notrans"])},200)}emit("beforeSwitch",{
tab:tab,lastTab:lastTab,pane:plugin})},onafterswitch:function(e){var tab=e.nextPage.cloud9tab,lastTab=e.previousPage&&e.previousPage.cloud9tab


createEditor(tab.editorType,function(err,editor){editor.loadDocument(tab.document),tab.editor&&tab.editor.resize({
type:"switch"}),emit("afterSwitch",{tab:tab,lastTab:lastTab,pane:plugin})})},onclose:function(e){function closeNow(){
tab.meta.$closeSync?(tab.unload(event),closing--):setTimeout(function(){tab.unload(event),closing--})

}var amlTab=e.page
if(!amlTab.$amlDestroyed){var tab=amlTab.cloud9tab,event={tab:tab,htmlEvent:e.htmlEvent}
if(event.last=amlPane.getPages().length==++closing,emit("beforeClose",event)===!1||tab.beforeClose(event)===!1)return closing--,
!1
tab.meta.$closing=!0,emit("afterClose",event),tab.aml.$amlDestroyed?(tab.unload(event),closing--):tab.meta.$skipAnimation?closeNow():tab.aml.on("afterclose",function(){
closeNow()})}},overactivetab:!0,childNodes:[btnPlus=new ui.button({id:"btnPlus","class":"plus_tab_button",
skin:"c9-simple-btn"}),btnMenu=new apf.button({skin:"c9-simple-btn","class":"tabmenubtn",onmouseover:function(){
this.setAttribute("submenu",menus.get("Window/Tabs").menu)}})]}),plugin.addElement(amlPane),settings.on("user/general/@animateui",function(value){
amlPane.setAttribute("anims",apf.isTrue(value)?"add|remove|sync":"")},plugin),amlPane.cloud9pane=plugin,
amlPane.btnMenu=btnMenu,amlPane.btnPlus=btnPlus,amlPane.on("DOMNodeInsertedIntoDocument",function(){setTimeout(function(){
amlPane.$buttons.appendChild(btnPlus.$ext),amlPane.$buttons.appendChild(btnMenu.$ext),addCustomTooltipHandler(amlPane.$buttons)

})}),amlPane.on("DOMNodeInserted",function(e){var amlNode=e.currentTarget
if(e.$isMoveWithinParent){if("page"!=amlNode.localName||e.relatedNode!=amlPane||1!=amlNode.nodeType)return


settings.save(),emit("tabOrder",{tab:amlNode.cloud9tab,next:(amlNode.nextSibling||1).cloud9tab})}if(e.relatedNode==amlPane&&"page"==amlNode.localName){
for(var pNode=amlNode.parentNode;"bar"!=pNode.localName;)pNode=pNode.parentNode
isFixedHeight=pNode.height&&parseInt(pNode.height,10)==pNode.height,amlPane.$buttons.appendChild(btnPlus.$ext)

}})}function addCustomTooltipHandler(el){function hide(){tooltipTimer&&(tooltipTimer=clearTimeout(tooltipTimer)),
tooltipHideTimer&&(tooltipHideTimer=clearTimeout(tooltipHideTimer)),tooltip&&tooltip.hide(),currentTarget=null

}function findTab(e){var amlTab=apf.findHost(e.target),tab=amlTab&&amlTab.cloud9tab
return tab}function updateTooltip(){if(apf.isMousePressed)return tooltip&&tooltip.hide()
tooltipTimer=clearTimeout(tooltipTimer),tooltipHideTimer=clearTimeout(tooltipHideTimer)
var tab=currentTarget
if(!tab)return hide()
var tooltipTitle=tab.tooltip||tab.title
if(!tooltipTitle)return hide()
tooltip||(tooltip=new Tooltip(document.body))
var activeTab=tab.pane.activeTab||tab
activeTab.classList.contains("dark")?tooltip.getElement().classList.add("ace_dark"):tooltip.getElement().classList.remove("ace_dark")


var rect=tab.aml.$button.getBoundingClientRect(),style=tooltip.getElement().style
style.top=rect.bottom+10+"px",style.textAlign="center",style.minWidth=rect.width+"px",style.maxWidth="40em",
style.whiteSpace="pre-wrap",style.wordWrap="normal",tooltip.setText(tooltipTitle.replace(/[\/.-]/g,"\u200b$&")),
tooltip.show()
var tooltipRect=tooltip.getElement().getBoundingClientRect(),left=rect.left+rect.width/2-tooltipRect.width/2


left+tooltipRect.width>window.innerWidth-2&&(left=Math.max(0,window.innerWidth-2-tooltipRect.width)),
left<2&&(left=2),tooltipRect.width>window.innerWidth-4&&(style.maxWidth=window.innerWidth-4+"px"),style.left=left+"px"

}var tooltipTimer,tooltipHideTimer,currentTarget
el.addEventListener("mousemove",function(e){if(apf.isMousePressed)return tooltip&&tooltip.hide()
var tab=findTab(e)
tooltip&&tooltip.isOpen?(tooltipHideTimer=clearTimeout(tooltipHideTimer),currentTarget!=tab&&(currentTarget=tab,
updateTooltip())):currentTarget==tab&&tooltipTimer||(tooltipTimer=clearTimeout(tooltipTimer),tooltipTimer=setTimeout(updateTooltip,150),
currentTarget=tab)}),el.addEventListener("mouseout",function(e){tooltip&&tooltip.isOpen&&(clearTimeout(tooltipHideTimer),
tooltipHideTimer=setTimeout(hide,100)),tooltipTimer&&(tooltipTimer=clearTimeout(tooltipTimer))}),el.addEventListener("mousedown",hide),
plugin.on("beforeUnload",function(){tooltip&&(hide(),tooltip.destroy(),tooltip=null)})}function createEditor(type,callback){
var tab=amlPane.getPage("editor::"+type)
cancelEditorCreate&&cancelEditorCreate(),tab?callback(null,tab.editor):cancelEditorCreate=editors.createEditor(type,function(err,editor){
editor.attachTo(amlPane.cloud9pane),callback(null,editor),cancelEditorCreate=null})}function getTab(id){
var tab=amlPane.getPage(id)
return tab&&tab.cloud9tab}function getTabs(){return amlPane.getPages().map(function(tab){return tab.cloud9tab

})}function getEditors(){return(amlPane.childNodes||[]).filter(function(p){return"page"==p.localName&&p.$ext

}).map(function(e){return e.editor})}function focus(){amlPane.focus()}function hasFocus(){return ui.isChildOf(apf.document.activeElement,amlPane,1)

}function vsplit(far,v,split){return hsplit(far,!0,split)}function hsplit(far,vertically,split,ignore){
$isValidSplit(split)&&split.parentNode||(split=amlPane),queue=[]
var opt={splitter:!0,padding:1},psize=split.parentNode.$vbox?"height":"width"
opt[psize]=split[psize]
var splitbox=new ui[vertically?"vsplitbox":"hsplitbox"](opt),parent=split.parentNode
parent.insertBefore(splitbox,split),splitbox.appendChild(split),parent.register&&parent.register(splitbox),
split.setAttribute(psize,"")
var ratio=balance(splitbox,vertically,1,ignore),state={},size=vertically?"height":"width"
state[size]=(ratio?100*ratio:50)+"%",state.skinset=split.skinset,state.skin=split.skin
var newtab=options.createPane(state).aml
return far?splitbox.appendChild(newtab):splitbox.insertBefore(newtab,split),split.setAttribute(vertically?"height":"width",""),
queue.push(splitbox),resizeAll(),newtab.cloud9pane}function $isValidSplit(container){for(;container&&"bar"!=container.localName;)container=container.parentNode


return!!container}function resizeAll(){queue.forEach(function(node){("tab"==node.localName?[node]:node.getElementsByTagNameNS(apf.ns.aml,"tab")).forEach(function(n){
var pane=n.cloud9pane
pane.getEditors().forEach(function(editor){editor.resize({type:"split"})})})})}function balance(splitbox,vertically,diff,ignore){
var last,ignoreIsTopLevel,splits=[],type=splitbox.localName,node=splitbox
do splits.push(node),ignoreIsTopLevel||(ignoreIsTopLevel=node.childNodes.indexOf(ignore)>-1),node=(last=node).parentNode
while(node.localName==type)
var total=count(last,type,ignore),igd=ignoreIsTopLevel?1:0,factor=(total+igd)/(total+diff)
if(1==splits.length)return 1/(total+1)
for(var child,split,children,inverse,value,prop=vertically?"height":"width",i=1,l=splits.length;i<l;i++)split=splits[i],
child=splits[i-1],children=split.childNodes.filter(function(x){return"splitter"!=x.localName}),inverse=children[0]==child,
children[0][prop]||!children[1]?node=children[0]:(inverse=!inverse,node=children[1]),value=parseFloat(node[prop]),
node.setAttribute(prop,inverse?value+(100-value)*(1-factor)+"%":value*factor+"%"),queue.push(node)}function count(splitbox,type,ignore){
var total=0
return function walk(node){for(var n,nodes=node.childNodes,i=0,l=nodes.length;i<l;i++)"splitter"!=(n=nodes[i]).localName&&n!=ignore&&("tab"==n.localName||n.localName!=type?total++:walk(n))

}(splitbox),total}function moveTabToSplit(tab,direction,keep){var isEmpty=1==amlPane.getPages().length,parent=amlPane.parentNode,split=config[direction][0],far=config[direction][1],kind=config[direction][2]


if(queue=[],!isEmpty)return tab.attachTo(split(far),null,!0),void tab.activate()
var next,tabs,force,grandpa=parent,node=amlPane
if(grandpa.localName!=kind){for(;grandpa.parentNode.localName!=kind&&"bar"!=grandpa.parentNode.localName;)grandpa=(node=grandpa).parentNode


next=grandpa,force=!0}if(!next)do{if(tabs=grandpa.childNodes.filter(function(x){return"splitter"!=x.localName

}),tabs[far?0:1]==node){next=tabs[far?1:0]
break}node=node.parentNode,grandpa=grandpa.parentNode}while(grandpa&&"bar"!=grandpa.localName)
if(next){if(!$isValidSplit(next))return
if(force||next.parentNode.localName!=amlPane.parentNode.localName){var tosplit=force||"bar"==next.parentNode.localName?next:next.parentNode


tab.attachTo(split(far,null,tosplit),null,!0),tab.activate()
var bparent=tab.pane.aml.parentNode
balance(bparent,"vsplitbox"==bparent.localName,0,amlPane)}else{if("tab"!=next.localName)for(;"tab"!=next.localName;)next=next.childNodes[far?1:2]


tab.attachTo(next.cloud9pane,far?(next.getPages()[0]||1).cloud9tab:null,!0),tab.activate(),balance(amlPane.parentNode,split==vsplit,0,amlPane)

}}else{var type=parent.localName
do parent=parent.parentNode
while(parent.localName==type)
if("bar"==parent.localName)return
tab.attachTo(split(far,null,parent,amlPane),null,!0)}amlPane.cloud9pane.unload(),resizeAll()}function windowResize(){
var tab=getTab()
tab&&tab.editor&&tab.editor.resize({type:"window"})}function splitterResize(e){var parent=e.splitter.parentNode

;(parent.$vbox||e["final"])&&ui.isChildOf(parent,amlPane)&&getTab()&&getTab().editor.resize({type:"splitter",
"final":e["final"]})}var amlPane,queue,cancelEditorCreate,isFixedHeight,meta,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),name=options.name,visible=!0,config={
left:[hsplit,!1,"hsplitbox"],right:[hsplit,!0,"hsplitbox"],up:[vsplit,!1,"vsplitbox"],down:[vsplit,!0,"vsplitbox"]
}
return layout.on("resize",windowResize,plugin),apf.addEventListener("splitter.resize",splitterResize),
plugin.addOther(function(){apf.removeEventListener("splitter.resize",splitterResize)}),anims.on("animate",function(e){
var delta,result,size
if("editor"==e.type?(delta=e.delta,result={delta:delta,vertical:!0}):"splitbox"==e.type&&(void 0!==e.options.height?ui.isChildOf(e.other,amlPane,!0)?(size=e.which.getHeight(),
delta=isFixedHeight?0:size-parseInt(e.options.height,10),result={vertical:!0,own:e.other==amlPane}):ui.isChildOf(e.which,amlPane,!0)&&(size=e.which.getHeight(),
delta=parseInt(e.options.height,10)-size,result={vertical:!0,own:e.which==amlPane}):void 0!==e.options.width&&(ui.isChildOf(e.other,amlPane,!0)?(size=e.which.getWidth(),
delta=size-parseInt(e.options.width,10),result={vertical:!1,own:e.other==amlPane}):ui.isChildOf(e.which,amlPane,!0)&&(size=e.which.getWidth(),
delta=parseInt(e.options.width,10)-size,result={vertical:!1,own:e.which==amlPane})),result&&(result.current=size,
result.delta=delta)),result){if(result&&(result.type="anim"),delta>0){var tab=getTab()
tab&&tab.editor&&tab.editor.resize(result)}e.on("finish",function(){var tab=getTab()
tab&&tab.editor&&tab.editor.resize({type:"afteranim"})})}},plugin),plugin.on("load",function(){load()

}),plugin.on("beforeUnload",function(){var idx,next,last,parent=amlPane.parentNode
if(parent){var nodes=parent.selectNodes("tab|hsplitbox|vsplitbox")
if(nodes.length>1)idx=nodes.indexOf(amlPane),next=last=nodes[0===idx?1:0]
else{var p=parent.parentNode
idx=p.childNodes.indexOf(parent),next=last=nodes[0===idx?1:0]}for(var op=0===idx?"shift":"pop";next&&"tab"!=next.tagName;)next=next.selectNodes("tab|hsplitbox|vsplitbox")[op]()


if(next&&getTabs().forEach(function(tab){tab.attachTo(next.cloud9pane,null,!0)}),amlPane.destroy(!0,!0),
last){var place=parent.nextSibling,grandpa=parent.parentNode
parent.removeChild(last),parent!=options.container&&parent.destroy(!0,!0),grandpa.insertBefore(last,place),
queue=[grandpa]
var size=grandpa.$vbox?"height":"width"
last.setAttribute(size,parent[size]),size=grandpa.$vbox?"width":"height",last.setAttribute(size,"")}else queue=[parent]


last&&"bar"==last.parentNode.localName&&(last.$ext.style.width="100%",last.$ext.style.height="100%"),
resizeAll()}}),plugin.freezePublicAPI({get aml(){return amlPane},get container(){return amlPane.$int},
get group(){var pNode=amlPane.parentNode
if(pNode.localName.indexOf("splitbox")==-1)return!1
var result=[]
return pNode.childNodes.forEach(function(aml){aml.cloud9pane&&result.push(aml.cloud9pane)}),result},get activeTab(){
return getTab()},get width(){return amlPane.width},set width(v){amlPane.setProperty("width",v)},get height(){
return amlPane.height},set height(v){amlPane.setProperty("height",v)},get visible(){return visible},set visible(v){
amlPane.setProperty("visible",v),visible=v},set _visible(v){visible=v},get meta(){return meta},_events:["afterSwitch","beforeSwitch","beforeClose","afterClose","tabOrder"],
getTabs:getTabs,getTab:getTab,getEditors:getEditors,createEditor:createEditor,focus:focus,hasFocus:hasFocus,
vsplit:vsplit,hsplit:hsplit,moveTabToSplit:moveTabToSplit}),plugin.load(name,"pane"),plugin}var tooltip,Plugin=imports.Plugin,ui=imports.ui,settings=imports.settings,menus=imports.menus,layout=imports.layout,editors=imports.editors,anims=imports.anims,apf=imports.apf,Tooltip=require("ace/tooltip").Tooltip


register(null,{Pane:Pane})}return main.consumes=["Plugin","ui","Tab","settings","menus","editors","anims","apf","layout"],
main.provides=["Pane"],main})


define("plugins/c9.ide.editors/metadata",[],function(require,exports,module){function main(options,imports,register){
function load(){function checkChangedTabs(unload){tabs.getPanes().forEach(function(pane){var tab=pane.getTab()


tab&&(changed[tab.name]=tab)})
for(var name in changed)if(check(changed[name],unload)===!1)return
changed={}}return!loaded&&(loaded=!0,tabs.on("tabAfterActivate",function(e){e.lastTab&&(changed[e.lastTab.name]=e.lastTab),
changed[e.tab.name]=e.tab},plugin),tabs.on("tabAfterClose",function(e){var doc=e.tab.document
e.tab.path?doc.meta.newfile||doc.meta.$ignoreSave?fs.unlink(PATH+WORKSPACE+e.tab.path,function(){return!1

}):check(e.tab)!==!1&&(delete changed[e.tab.name],delete cached[e.tab.name]):fs.unlink(PATH+"/"+e.tab.name,function(){
return!1})},plugin),tabs.on("beforeOpen",function(e){if(!(e.tab.path&&e.options.document.filter===!1||!e.tab.path&&!e.options.document.filter||e.options.value)){
e.options.loadFromDisk=e.loadFromDisk&&!e.tab.document.meta.newfile&&!e.tab.document.meta.nofs
var callback=function(err){e.loadFromDisk&&e.callback(err)}
return loadMetadata(e.tab,e.options,callback,e.options.init),!e.loadFromDisk}},plugin),timer=setInterval(function(){
checkChangedTabs()},CHANGE_CHECK_INTERVAL),save.on("saveAs",function(e){e.path!=e.oldPath&&fs.unlink(PATH+WORKSPACE+e.oldPath,function(){
return!1})}),settings.on("read",function(e){settings.setDefaults("user/metadata",[["undolimit","100"]])

},plugin),settings.on("write",function(e){e.unload||checkChangedTabs()},plugin),prefs.add({File:{position:150,
"Meta Data":{position:200,"Maximum of Undo Stack Items in Meta Data":{type:"spinner",path:"user/metadata/@undolimit",
position:200,min:10,max:1e4}}}},plugin),c9.on("beforequit",function(){checkChangedTabs(!0)},plugin),void tabs.getTabs().forEach(function(tab){
var options=tab.getState()
options.loadFromDisk=tab.path&&!tab.document.meta.newfile&&!tab.document.meta.nofs&&(!tab.editor||tab.editor.autoload!==!1),
loadMetadata(tab,options,function(err){return err?(tab.unload(),void showError("File not found '"+tab.path+"'")):void tab.classList.remove("loading")

},!0)}))}function check(tab,forceSync){function write(forceSync){if(!c9.readonly){var limit=settings.getNumber("user/metadata/@undolimit"),undo=state.undoManager


if(undo){var start=Math.max(0,undo.position-limit)
undo.stack.splice(0,start),undo.position-=start,undo.mark-=start}try{var sstate=JSON.stringify(state)

}catch(e){return}if(sstate.length>1048576&&(sstate="",state={}),cached[tab.name]!=sstate)if(cached[tab.name]=sstate,
tab.path){var path=("~"==tab.path.charAt(0)?"/":"")+tab.path
fs.metadata(path,state,forceSync,function(err){})}else fs.metadata("/_/_/"+tab.name,state,forceSync,function(err){
})}}var docChanged=tab.document.changed||tab.document.meta.nofs
if(!c9.has(c9.STORAGE))return!1
if(!tab.meta.$loadingMetadata&&!(!tab.loaded||tab.path&&0===tab.path.indexOf(PATH)||tab.document.meta.preview)){
var state=tab.document.getState()
return state.meta&&(state.timestamp=state.meta.timestamp),delete state.meta,tab.document.meta.$ignoreSave&&(delete state.value,
delete state.changed,delete state.undoManager,docChanged=!0),docChanged||"undefined"==typeof state.value||forceSync?(forceSync&&!docChanged&&state.undoManager.stack.length&&delete state.value,
write(forceSync)):hash(state.value,function(err,hash){err||(delete state.value,delete state.changed,state.hash=hash,
write(forceSync))}),!0}}function merge(from,to){for(var prop in from)to[prop]&&"object"==typeof from[prop]?merge(from[prop],to[prop]):to[prop]=from[prop]

}function loadMetadata(tab,options,callback,init){function progress(loaded,total,complete){var data={
total:total,loaded:loaded,complete:complete,dt:Date.now()-loadStartT}
tab.document.progress(data)}function receive(value,metadata){function done(state,cleansed){var doc=options.document


doc instanceof Plugin&&(doc=doc.getState()),delete doc.fullState,delete doc.value,delete doc.undoManager,
doc.changed||delete doc.changed,cleansed&&(delete state.undoManager,tab.editor&&state[tab.editor.type]&&(state[tab.editor.type].cleansed=!0)),
doc.meta||(doc.meta={}),doc.meta.timestamp=state.timestamp,delete state.timestamp,merge(doc,state),tab.document.hasValue()&&delete state.value,
state.meta.$savedValue=storedValue
var sameValue=state.value===storedValue
options.loadFromDisk&&(sameValue||compareModified)&&fs.stat(tab.path,function(err,stat){function checkChange(){
confirm("File Changed",tab.path+" has been changed on disk.","Would you like to reload this file?",function(){
doc.setBookmarkedValue(storedValue,!0),doc.meta.timestamp=stat.mtime},function(){doc.undoManager.bookmark(-2),
doc.meta.timestamp=stat.mtime},{merge:!1,all:!1})}if(!err)if(compareModified){if(!state.meta||state.meta.timestamp<stat.mtime){
var doc=tab.document
if(state.meta.preview)return void doc.editor.on("focus",function wait(e){doc.editor.activeDocument==doc&&(doc.editor.off("focus",wait),
checkChange())},doc)
checkChange()}}else tab.document.meta.timestamp=stat.mtime}),tab.document.setState(state),delete tab.meta.$loadingMetadata,
callback()}var state
null!==value&&(storedValue=value),metadata&&(storedMetadata=metadata,metadata!=-1&&(cached[tab.name]=metadata.replace(/"timestamp":\d+\,?$/,"")))


var compareModified=!1
if((!tab.path||void 0!==storedValue)&&storedMetadata){try{state=storedMetadata==-1?{}:JSON.parse(storedMetadata)

}catch(e){state={}}if(state.hash&&"string"==typeof storedValue)return state.value=storedValue,void hash(storedValue,function(err,hash){
done(state,state.hash!=hash)})
state.value&&tab.path?state.value!=storedValue&&(compareModified=!0):state.value=storedValue,done(state)

}}var storedValue,storedMetadata,xhr,path=tab.path?PATH+WORKSPACE+("~"==tab.path.charAt(0)?"/":"")+tab.path:PATH+"/"+tab.name


tab.meta.$loadingMetadata=!0,tab.classList.add("loading")
var loadStartT=Date.now()
if(tab.path)if(options.loadFromDisk===!1){if(receive(tab.document.value),!init)return void receive(null,-1)

}else{tab.classList.add("loading")
var cb=function(err,data,metadata,res){return err?callback(err):void receive(data,metadata||-1)}
xhr=emit("beforeReadFile",{tab:tab,path:tab.path,callback:cb,progress:progress}),xhr||(xhr=fs.readFileWithMetadata(tab.path,"utf8",cb,progress))

}xhr||(xhr=fs.readFile(path,"utf8",function(err,data){receive(null,err?-1:data)},progress))
var abort=function(){xhr&&xhr.abort()}
tab.on("close",abort),tabs.on("open",function wait(e){e.tab==tab&&(tab.off("close",abort),tab.off("open",wait))

},tab)}function hash(data,callback){worker||(worker=createWorker((options.staticPrefix||"/static")+"/lib/rusha/rusha.min.js"),
worker.addEventListener("message",function(e){jobs[e.data.id]&&(jobs[e.data.id](null,e.data.hash),delete jobs[e.data.id])

})),worker.postMessage({id:++hash.counter,data:data}),jobs[hash.counter]=callback,3e4===hash.counter&&(hash.counter=0)

}var worker,timer,c9=imports.c9,Plugin=imports.Plugin,fs=imports.fs,settings=imports.settings,save=imports.save,tabs=imports.tabManager,confirm=imports["dialog.question"].show,showError=imports["dialog.error"].show,prefs=imports.preferences,createWorker=require("ace/worker/worker_client").createWorker,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),PATH=options.path||"/.c9/metadata",WORKSPACE="/workspace",jobs={},changed={},cached={},CHANGE_CHECK_INTERVAL=options.changeCheckInterval||3e4,loaded=!1


hash.counter=0,plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,clearInterval(timer)}),plugin.freezePublicAPI({}),register(null,{
metadata:plugin})}return main.consumes=["c9","Plugin","fs","settings","tabManager","dialog.error","dialog.question","preferences","save"],
main.provides=["metadata"],main})


define("plugins/c9.ide.editors/tabmanager",[],function(require,module,exports){function main(options,imports,register){
function load(){function getEditor(){var editor=focussedTab&&focussedTab.editor,subeditor=editor&&editor.focussedWidget


return subeditor&&subeditor.editor||editor}function removeTab(e){if(!e.error){var tab=findTab(e.path)


tab&&tab.unload()}}if(loaded)return!1
loaded=!0,draw(),commands.addCommand({name:"toggleButtons",group:"Tabs",exec:function(e){toggleButtons()

}},plugin),commands.on("getEditor",getEditor,plugin),menus.on("getEditor",getEditor,plugin),menus.addItemByPath("View/Tab Buttons",new apf.item({
type:"check",checked:"user/tabs/@show",command:"toggleButtons"}),300,plugin),menus.on("focusEditor",function(){
focussedTab&&focussedTab.editor.focus()},plugin),fs.on("beforeRename",function(e){var oldPath=e.args[0],newPath=e.args[1],changed=[]


Object.keys(tabs).forEach(function(id){var tab=tabs[id]
if(tab.path&&0===tab.path.indexOf(oldPath)){var char=tab.path.charAt(oldPath.length)
char&&"/"!=char||(tab.path=tab.path.replace(oldPath,newPath),changed.push(tab))}}),changed.length&&(e.revert=function(){
changed.forEach(function(tab){tab.path=tab.path.replace(newPath,oldPath)})})}),fs.on("afterRename",function(e){
e.error&&e.revert&&e.revert()}),fs.on("afterUnlink",removeTab),fs.on("afterRmfile",removeTab),fs.on("afterRmdir",function(e){
var path=e.path
Object.keys(tabs).forEach(function(id){var tab=tabs[id]
tab.path&&0===tab.path.indexOf(path)&&tab.unload()})}),fs.on("error",function(e){if("readFile"==e.name){
var tab=findTab(e.path)
tab&&tab.unload()}},plugin)
var disconnected
c9.on("disconnect",function(e){disconnected=!0}),c9.on("connect",function(e){disconnected&&checkAllTabs(),
disconnected=!1}),editors.on("menuClick",function(e){editors.findEditor(e.value).fileExtensions.length?focussedTab&&switchEditor(focussedTab,e.value,function(){}):openEditor(e.value,!0,function(){})

}),editors.on("menuShow",function(e){var group,editor=focussedTab&&focussedTab.editor
e.menu.childNodes.forEach(function(node){group=node.group
var path=focussedTab&&focussedTab.path||"",type=node.value,isAvailable=editors.editorSupportsFile(type,path)


node.setAttribute("disabled",!isAvailable)}),editor&&group&&group.setValue(editor.type)}),settings.on("read",function(e){
if(settings.setDefaults("user/tabs",[["show","true"],["title","false"],["asterisk","false"]]),settings.setDefaults("state/tabs",[]),
collapsedMenu=settings.getBool("state/menus/@minimized"),e.reset)return void setCornerPadding()
var state=settings.getJson("state/tabs")
setTimeout(function(){2==options.testing||isReady||setState(state,!isReady,function(){emit.sticky("ready")

}),isReady=!0,showTabs=settings.getBool("user/tabs/@show"),toggleButtons(showTabs)},0),settings.getBool("user/tabs/@asterisk")&&ui.setStyleClass(container,"asterisk"),
changed=!1},plugin),settings.on("write",function(e){if(changed||e.unload){if(2!=options.testing){var state=getState(null,!0)


settings.setJson("state/tabs",state)}changed=!1}},plugin),settings.on("user/tabs/@asterisk",function(value){
containers.forEach(function(container){value?ui.setStyleClass(container,"asterisk"):ui.setStyleClass(container,"",["asterisk"])

})})
var CSS1=".editor_tab.morepadding .btnsesssioncontainer",CSS2=".editor_tab .btnsesssioncontainer",clearAnim=function(prop){
setTimeout(function(){ui.setStyleRule(prop,"transition-duration","0")},200)}
menus.on("minimize",function(){collapsedMenu=!0,ui.setStyleRule(CSS1,"transition-duration",".2s"),clearAnim(CSS1),
setCornerPadding()}),menus.on("restore",function(){collapsedMenu=!1,lastCorner&&(ui.setStyleRule(CSS2,"transition-duration",".2s"),
clearAnim(CSS2),ui.setStyleClass(lastCorner.$ext,"",["morepadding"]),lastCorner=null)}),apf.addEventListener("movefocus",function(e){
var iter=e.toElement,list=[],c=0
if(!iter||"menu"!=iter.localName){for(;iter&&containers.indexOf(iter)==-1;)iter=(list[c++]=iter).parentNode


if(!iter)return void(!unfocussed&&focussedTab&&focussedTab.editor&&(focussedTab.editor.focus(!1,!0),unfocussed=!0))


for(var pane,i=list.length-1;i>=0;i--)if("tab"==(pane=list[i]).localName){if(pane.getPages().length<1||!pane.cloud9pane.visible)continue


var newFocus=pane.getPage().cloud9tab
if(newFocus!=focussedTab||unfocussed){var soft=e.toElement!=newFocus.aml?2:0
focusTab(newFocus,soft)}return unfocussed=!1,void(iter.$activePaneName=pane.cloud9pane.name)}focusTab()

}}),c9.local||(plugin.on("focusSync",function(e){updateTitle(e.tab)}),plugin.on("tabDestroy",function(e){
e.last&&updateTitle()}),settings.on("user/tabs",function(){updateTitle(focussedTab)})),emit("ready")}
function draw(){drawn||(drawn=!0,2!=options.testing&&(container=layout.findParent(plugin).appendChild(new ui.bar({
"class":"codeditorHolder",style:"height:100%"})),containers.push(container),plugin.addElement(container)),
mnuEditors=apf.document.documentElement.appendChild(new ui.menu({id:"mnuEditors",style:"margin: 0px 0 0 4px",
"onprop.visible":function(e){e.value&&(mnuEditors.pane=this.opener.parentNode.cloud9pane)}})),plugin.addElement(mnuEditors),
menus.addItemToMenu(mnuEditors,new ui.item({caption:"New File",hotkey:"commands.newfile",onclick:function(e){
e.pane=this.parentNode.pane,plusNewFile(e,!0)},enabled:!c9.readonly}),100,plugin),emit("draw"))}function plusNewFile(e,force){
if(force||emit("plusClick",e)!==!1){var name
do name="/Untitled"+counter++
while(findTab(name))
open({path:name,focus:!0,active:!0,pane:e.pane,value:"",document:{meta:{newfile:!0}}},function(){})}}
function createPane(state){state.createPane=createPane,state.container=container
var pane=new Pane(state)
pane.on("beforeSwitch",onbeforeswitch),pane.on("afterSwitch",onafterswitch)
var btnPlus=pane.getElement("btnPlus")
return btnPlus.setAttribute("submenu",mnuEditors),pane.on("beforeClose",function(e){return emit("tabBeforeClose",e)

}),pane.on("afterClose",function(e){return emit("tabAfterClose",e)}),pane.on("tabOrder",function(e){return changed=!0,
settings.save(),emit("tabOrder",e)}),pane.on("unload",function(){panes.remove(pane),focussedTab&&!focussedTab.isActive()&&(panes.length?focusTab(panes[0].getTab(),!0):(focussedTab=null,
unfocussed=!0)),emit("paneDestroy",{pane:pane}),setCornerPadding(),changed=!0,settings.save()}),panes.push(pane),
pane.aml.once("DOMNodeInsertedIntoDocument",function(){emit.sticky("paneCreate",{pane:pane},pane)}),settings.getBool("user/tabs/@show")||ui.setStyleClass(pane.aml.$ext,"notabs",["notabs"]),
changed=!0,settings.save(),pane}function updateTitle(tab){document.title=tab&&settings.getBool("user/tabs/@title")&&tab.title?tab.title+" - "+ideProviderName:c9.projectName+" - "+ideProviderName

}function setCornerPadding(){if(collapsedMenu&&!c9.local){var tab=function recur(node){return!!node&&("tab"==node.localName?node:recur(node.$vbox?node.getFirstChild():node.getSecondChild()||node.getFirstChild()))

}(container.childNodes[0])
tab&&tab!=lastCorner&&(lastCorner&&ui.setStyleClass(lastCorner.$ext,"",["morepadding"]),ui.setStyleClass(tab.$ext,"morepadding"),
lastCorner=tab)}}function createTab(state){if(!state.pane){if(focussedTab&&ui.isChildOf(container,focussedTab.aml)&&(state.pane=focussedTab.pane),
!state.pane){for(var i=0;panes[i]&&!ui.isChildOf(container,panes[i].aml);)i++
state.pane=panes[i]}if(!state.pane){if(!isReady)throw new Error("Called open too early. Please wait until a pane is available. Use the ready event.")


state.pane=createPane({}),container.appendChild(state.pane.aml)}}var tab=new Tab(state),id=!tab.document.meta.cloned&&tab.path?tab.path:PREFIX+tab.name


if(tabs[id]=tab,tab.on("close",function(e){var id=!tab.document.meta.cloned&&tab.path?tab.path:PREFIX+tab.name


delete tabs[id],tab.path&&watcher.unwatch(tab.path),function(){for(var p in tabs)return!0}()?tab.pane.getTabs().length||panes.every(function(pane){
return!pane.activeTab||!pane.visible||(focusTab(pane.activeTab),!1)})&&focusTab():(focusTab(),focussedTab=null,
unfocussed=!0),tab.document.canUnload()!==!1&&tab.document.unload(),emit("tabDestroy",{tab:tab,last:e.last,
htmlEvent:e.htmlEvent}),changed=!0,settings.save()}),tab.on("setPath",function(e){var meta=tab.document.meta


meta.preview||meta.ignoreState||meta.cloned||(watcher.unwatch(e.oldpath),watcher.watch(e.path)),meta.cloned||(tabs[PREFIX+tab.name]&&delete tabs[PREFIX+tab.name],
delete tabs[e.oldpath],tabs[e.path]=tab),updateTitle(tab),changed=!0,settings.save()}),tab.on("beforeReparent",function(e){
return e.tab=tab,emit("tabBeforeReparent",e)}),tab.on("afterReparent",function(e){e.tab=tab,emit("tabAfterReparent",e)

}),tab.path){var meta=tab.document.meta
meta.newfile?fs.on("afterWriteFile",function startWatch(e){e.path==tab.path&&(watcher.watch(tab.path),
fs.off("afterWriteFile",startWatch))},tab):meta.preview||meta.ignoreState||meta.nofs||meta.cloned?console.warn("[watchers] ignoring preview/ignoreState tab "+tab.path):watcher.watch(tab.path)

}return emit.sticky("tabCreate",{tab:tab},tab),changed=!0,settings.save(),tab}function onbeforeswitch(e){
var amlPane=e.pane.aml,tab=e.tab,editorTab=amlPane.getPage(tab.aml.type)
if(editorTab)return emit("tabBeforeActivate",{tab:tab})!==!1&&void 0}function onafterswitch(e){var tab=e.tab


if(loaded&&!tab.document.meta.preview){var lastTab=focussedTab;(!focussedTab||focussedTab.pane==tab.pane&&focussedTab!=tab)&&focusTab(tab,!0,!0),
emit("tabAfterActivateSync",{lastTab:lastTab,tab:tab}),setTimeout(function(){emit("tabAfterActivate",{
lastTab:lastTab,tab:tab}),changed=!0,settings.save()},500)}}function getState(subcontainer,filter){var state=function recur(node){
if(node){var name=node.localName,isPane="tab"==name
isPane&&(name="pane")
var state={type:name,name:isPane?node.cloud9pane.name:void 0,nodes:node.childNodes.filter(function(child){
if(isPane&&("page"!=child.localName||!child.visible)||"splitter"==child.localName)return!1
var tab=child.cloud9tab
return!tab||!tab.document.meta.preview&&!tab.document.meta.ignoreState}).map(function(child){return isPane?child.cloud9tab.getState(filter):recur(child)

})}
if(node.width&&(state.width=node.width),node.height&&(state.height=node.height),node.skin&&(state.skin=node.skin),
node.skinset&&(state.skinset=node.skinset),isPane&&node.cloud9pane.meta){var meta=node.cloud9pane.meta


for(var prop in meta)"$"!=prop.charAt(0)&&(state.meta||(state.meta={}),state.meta[prop]=meta[prop]&&meta[prop].toJson?meta[prop].toJson():meta[prop])

}return state}}(subcontainer||container.firstChild)
return state&&(state.focus=focussedTab&&(focussedTab.path||focussedTab.name)),state}function setState(state,init,callback){
"function"==typeof init&&(callback=init,init=!1),state||(state={type:"pane",nodes:[]}),init||options.testing||clear(!1,!1,!0)


var count=0
!function recur(parent,list){list.forEach(function(state){var p
if("pane"==state.type)state.preventAutoActivate=state.nodes.length>0,p=createPane(state).aml,parent.appendChild(p)
else if("hsplitbox"==state.type||"vsplitbox"==state.type)p=parent.appendChild(new ui[state.type]({splitter:!0,
padding:1,width:state.width,height:state.height}))
else if("tab"==state.type){var tab=findTab(state.id)
return void(tab?tab.attachTo(parent):(state.pane=parent.cloud9pane,state.init=init,count++,open(state,function(err,tab){
--count||callback()})))}if(recur(p,state.nodes),"pane"==state.type){var pane=p.cloud9pane
if(!pane.activeTab){var next=pane.getTabs()[0]
next&&next.activate()}}})}(state.container||container,[state]),state.focus&&focusTab(findTab(state.focus)),
setCornerPadding(),count||callback()}function clear(soft,clearTabs,silent){for(var list=getPanes(container),i=list.length-1;i>=0;i--){
for(var pane=list[i],nodes=pane.getTabs(),j=nodes.length-1;j>=0;j--){var tab=nodes[j]
soft?(tab.aml.parentNode.removeChild(tab.aml),tab.pane=null):(silent&&(tab.document.meta.$ignoreSave=!0),
tab.meta.$closeSync=!0,tab.unload())}pane.unload()}soft&&!clearTabs||(tabs=[]),panes=[]}function toggleButtons(to){
showTabs=void 0!==to?to:!showTabs,settings.set("user/tabs/@show",showTabs),emit("visible",{value:showTabs
}),getPanes(container).forEach(function(pane){ui.setStyleClass(pane.aml.$ext,showTabs?"":"notabs",["notabs"])

})}function resizePanes(cancel){clearTimeout(closeTimer),cancel||(closeTimer=setTimeout(function(){panes.forEach(function(pane){
pane.aml.$waitForMouseOut=!1,pane.aml.$scaleinit(null,"sync")})},500))}function activateTab(tab){return"string"==typeof tab&&(tab=findTab(tab)),
tab.activate(),tab}function focusTab(tab,soft,async){if("string"==typeof tab&&(tab=findTab(tab)),previewTab&&tab!=previewTab&&preview({
cancel:!0}),tab&&tab.meta&&tab.meta.$closing)return focussedTab&&(!soft||2!==soft&&!unfocussed)&&focussedTab.editor&&(unfocussed=!1,
focussedTab.editor.focus()),tab
if(focussedTab==tab){if(!focussedTab)return
return soft&&(2===soft||unfocussed)||!focussedTab.editor||(unfocussed=!1,focussedTab.editor.focus(!0)),
tab}if(focussedTab){var blurTab=focussedTab,blur=function(){emit("blur",{tab:blurTab}),blurTab.editor&&focussedTab&&blurTab.editor!=focussedTab.editor&&blurTab.editor.blur()

}
blurTab.classList.remove("focus"),blur()}return tab?(focussedTab=tab,tab.activate(),soft&&(2===soft||unfocussed)||!focussedTab.editor||(unfocussed=!1,
focussedTab.editor.focus()),focussedTab&&focussedTab.classList.add("focus"),emit("focusSync",{tab:tab
}),async?setTimeout(function(){emit("focus",{tab:tab})},500):emit("focus",{tab:tab}),tab):(focussedTab=null,
void(unfocussed=!0))}function findTab(path){return tabs[PREFIX+path]||tabs[util.normalizePath(path)]}
function getTabs(container){var result=Object.keys(tabs).map(function(path){return tabs[PREFIX+path]||tabs[path]

})
return container?result.filter(function(tab){return ui.isChildOf(container,tab.aml)}):result}function findPane(name){
for(var i=0;i<panes.length;i++)if(panes[i].name==name)return panes[i]}function getPanes(container){return container?panes.filter(function(pane){
return ui.isChildOf(container,pane.aml)}):panes.slice()}function setLoading(tab){if(tab.classList.add("loading"),
tab.path){var loadStartT=Date.now()
fs.on("downloadProgress",function progress(e){e.path==tab.path&&(e.dt=Date.now()-loadStartT,tab.document.progress(e),
e.complete&&fs.off("downloadProgress",progress))})}}function openFile(path,active,callback){return"function"==typeof active&&(callback=active,
active=!1),open({path:path,active:active},callback)}function openEditor(type,active,callback){return"function"==typeof active&&(callback=active,
active=!1),open({editorType:type,active:active},callback)}function open(options,callback){function done(err,value){
if(tab.classList.remove("loading"),err&&options.newOnError)tab.document.meta.newfile=!0,value=options.value||""
else if(err)return tab.classList.add("error"),tab.document.meta.error=!0,tab.document.meta.closeOnError?(tab.close(),
callback&&callback(err)):void alert("Error opening file","Could not open file: "+tab.path,"ENOENT"==err.code?"The file could not be found on the file system.":"Unknown error: "+(err.message||err.code||err),function(){
tab.close(),callback&&callback(err)})
var doc=tab.document
"string"==typeof value&&(doc.value=value),doc.meta.timestamp||(doc.meta.timestamp=Date.now()-settings.timeOffset),
doc.ready=!0,emit("open",{tab:tab,options:options}),callback&&callback(null,tab)}callback=callback||function(){}


var editor,path=options.path=util.normalizePath(options.path),type=options.editorType,id=!options.forceNew&&!options.init&&path||options.name,tab=options.tab||(id?findTab(id):options.demandExisting&&getTabs().filter(function(t){
return t.editorType===options.editorType&&(!options.title||t.document&&t.document.title===options.title)

})[0])
if(tab||(tab=findTab(path)),((options.document||0).meta||0).cloned){if(!tab){if(options.init)return void plugin.on("open",function wait(e){
e.tab.path==path&&(plugin.off("open",wait),options.tab=e.tab,open(options,callback))},plugin)
throw new Error("Missing tab when cloning")}options.path=path=tab.path,options.editorType=tab.editorType,
options.document=tab.document.clone(),tab.on("unload",function(){tab.unload()},tab.document)}else if(tab)return tab.document.meta.preview&&keepPreview(),
options.active&&tab.activate(),options.focus&&focusTab(tab,options.focus!==!0),options.document&&tab.document.setState(options.document),
callback&&callback(null,tab,null,!0),tab
if(type?editor=editors.findEditor(type):(editor=path&&editors.findEditorByFilename(path)||editors.findEditor(editors.defaultEditor),
type=editor&&editor.type||editors.defaultEditor),"string"!=typeof path&&(options.path=null),options.document||(options.document={}),
path&&!options.document.title&&(options.document.title=basename(path),options.document.tooltip=path),
"string"!=typeof options.value||options.newOnError||(options.document.value=options.value),options.editorType=type,
"none"===editor)return alert("Can't open "+basename(path)+": file format unsupported"),callback(new Error("File not supported"))


tab=createTab(options),options.focus&&focusTab(tab,options.focus!==!0)
var doc=options.document,loadFromDisk=path&&(!doc||void 0===doc.value)&&(void 0===options.value||options.newOnError)&&(!editor||editor.autoload!==!1)


if(loadFilesAtInit===!1&&options.init&&0===emit.listeners("beforeOpen").length)return tab
var event={options:options,tab:tab,loadFromDisk:loadFromDisk,setLoading:setLoading,callback:done}
if(emit("beforeOpen",event)===!1)return tab
if(loadFromDisk=event.options.loadFromDisk=loadFromDisk&&!tab.document.meta.newfile&&!tab.document.meta.nofs,
options.value===-1)setLoading(tab),callback(null,tab,function(){tab.classList.remove("loading"),emit("open",{
tab:tab,options:options})})
else if(loadFromDisk){setLoading(tab)
var xhr=fs.readFile(path,"utf8",done),abort=function(){xhr&&xhr.abort()}
tab.on("close",abort),plugin.on("open",function(e){e.tab==tab&&tab.off("close",abort)})}else setTimeout(function(){
done(null,null)})
return tab}function clone(tab,pane,callback){open({pane:pane,tab:tab,focus:!0,document:{meta:{cloned:!0
}}},function(err,tab){tab&&tab.document.progress({complete:!0}),callback(err,tab)})}function reload(tab,callback){
return tab||(tab=focussedTab),tab&&tab.path?tab.editor.autoload===!1?(tab.document.setBookmarkedValue(tab.document.value),
delete tab.document.meta.error,tab.classList.remove("error"),tab.classList.remove("loading"),emit("reload",{
tab:tab}),callback()):(setLoading(tab),void fs.readFile(tab.path,"utf8",function(err,data){return err?(tab.classList.remove("loading"),
tab.classList.add("error"),tab.document.meta.error=!0,void callback(err)):(tab.document.setBookmarkedValue(data),
tab.document.meta.timestamp=Date.now()-settings.timeOffset,delete tab.document.meta.newfile,delete tab.document.meta.error,
tab.classList.remove("error"),tab.classList.remove("loading"),emit("reload",{tab:tab}),void callback())

})):callback()}function checkAllTabs(){getTabs().forEach(function(tab){var meta=tab.document.meta
!tab.path||meta.newfile||meta.preview||meta.ignoreState||meta.nofs||watcher.check(tab.path,meta.timestamp)

})}function preview(options,callback){var pane
if(options.cancel)return cancelPreview(options.keep)
if(!XPREVIEW.test(options.path)){if(!options.editorType&&previewTab&&previewTab.path===options.path)return previewTab


if(previewTab&&(pane=previewTab.pane,previewTab.document.meta.existing?(delete previewTab.document.meta.preview,
delete previewTab.document.meta.existing,previewTab.classList.remove("preview")):previewTab.unload({animate:!1
})),!options.path&&!options.editorType)throw new Error("No path or editorType specified for preview")


return createPreview(options,pane,callback)}}function createPreview(options,pane,callback){var path=options.path,tab=findTab(path)


if(tab)tab.activate(),clearTimeout(previewTimeout),callback(null,null)
else if(!previewTimeout||options.immediate){var doc=options.document||{}
doc.meta={readonly:!0,preview:!0},previewTab=open({path:path,editorType:options.editorType,active:!0,
pane:pane,noanim:!0,document:doc},function(err,tab){return err||!tab.loaded?callback(new Error("Preview was cancelled")):(tab.activate(),
tab.document.undoManager.on("change",function(){tab.document.undoManager.position>-1&&keepPreview()}),
void callback(null,tab))}),previewTab.classList.add("preview")}else clearTimeout(previewTimeout),previewTimeout=setTimeout(function(){
previewTimeout=null,createPreview({path:options.path,immediate:!0},pane,callback)},200)
return previewTab}function cancelPreview(keep){var lastFocussedTab=focussedTab
if(lastPreviewTab&&(lastPreviewTab.unload(),lastPreviewTab=null),!previewTab)return!1
if(previewTab.classList.remove("preview"),keep)return keepPreview()
if(previewTab.document.meta.existing)delete previewTab.document.meta.preview,delete previewTab.document.meta.existing
else{var tab=previewTab
previewTab=null,tab.unload()}return previewTab=null,lastFocussedTab&&lastFocussedTab.activate(),!1}function keepPreview(){
if(previewTab)return previewTimeout&&(previewTimeout=null,clearTimeout(previewTimeout)),previewTab.loaded?(previewTab.classList.remove("preview"),
previewTab.document.meta.existing?(delete previewTab.document.meta.existing,delete previewTab.document.meta.preview):(delete previewTab.document.meta.readonly,
delete previewTab.document.meta.preview,previewTab.document.undoManager.off("change",keepPreview),emit("open",{
tab:previewTab})),previewTab=null,!0):(previewTab.unload(),previewTab=null,!1)}function switchEditor(tab,type,callback){
tab.switchEditor(type,function(){emit("switchEditor",{tab:tab}),callback.apply(this,arguments)})}function pauseTabResize(){
panes.forEach(function(pane){pane.setAttribute("buttons","close,order")})}function continueTabResize(){
setTimeout(function(){panes.forEach(function(pane){pane.setAttribute("buttons","close,scale,order"),pane.$waitForMouseOut=!1,
pane.$scaleinit(null,"sync")})},300)}var Plugin=imports.Plugin,Tab=imports.Tab,Pane=imports.Pane,ui=imports.ui,fs=imports.fs,c9=imports.c9,settings=imports.settings,util=imports.util,menus=imports.menus,editors=imports.editors,commands=imports.commands,layout=imports.layout,watcher=imports.watcher,focusManager=imports.focusManager,alert=imports["dialog.alert"].show,basename=require("path").basename,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


emit.setMaxListeners(100)
var focussedTab,previewTab,previewTimeout,container,mnuEditors,collapsedMenu,isReady,loadFilesAtInit=options.loadFilesAtInit,ideProviderName=options.ideProviderName||"Cloud9",PREFIX="/////",XPREVIEW=/\.(gz|tar|tgz|zip|rar|jar|exe|pyc|pdf)$/,unfocussed=!0,showTabs=!0,panes=[],tabs={},containers=[],counter=1


focusManager.tabManager=plugin
var lastCorner,closeTimer,lastPreviewTab,loaded=!1,changed=!1,drawn=!1
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){panes=[],tabs=[],loaded=!1,drawn=!1,lastPreviewTab=null}),plugin.freezePublicAPI({
get focussedTab(){return focussedTab||null},get focussed(){return!unfocussed},get previewTab(){return previewTab

},get containers(){return containers},get container(){return container},_events:["focus","focusSync","blur","tabBeforeActivate","tabAfterActivate","tabAfterActivateSync","tabBeforeClose","tabAfterClose","tabCreate","tabDestroy","tabOrder","tabBeforeReparent","tabAfterReparent","paneCreate","paneDestroy","beforeOpen","open","reload","ready","plusClick","draw"],
pauseTabResize:pauseTabResize,continueTabResize:continueTabResize,activateTab:activateTab,focusTab:focusTab,
getState:getState,setState:setState,clear:clear,toggleButtons:toggleButtons,resizePanes:resizePanes,findTab:findTab,
getTabs:getTabs,checkAllTabs:checkAllTabs,findPane:findPane,getPanes:getPanes,open:open,openFile:openFile,
openEditor:openEditor,reload:reload,preview:preview,clone:clone,switchEditor:switchEditor,get isReady(){
return isReady}}),register(null,{tabManager:plugin})}return main.consumes=["Plugin","menus","settings","layout","ui","commands","fs","Tab","editors","Pane","watcher","c9","dialog.alert","focusManager","util"],
main.provides=["tabManager"],main})


define("plugins/c9.ide.editors/tab",[],function(require,module,exports){function main(options,imports,register){
function Tab(options){function initStyleSheet(fg,bg){var cssClass=plugin.name.replace(/[^a-zA-Z0-9\-_\u00A0-\uFFFF]/g,"-")


classList.add(cssClass),rule="."+cssClass+".curbtn .tab_middle, ."+cssClass+".curbtn .tab_middle::after, ."+cssClass+".curbtn .tab_middle::before",
bg||(bg="inherit"),fg||(fg="inherit"),ui.setStyleRule(rule,"background-color",bg,stylesheet)&&ui.setStyleRule(rule,"foreground-color",fg,stylesheet)||ui.importStylesheet([[rule,"background-color:"+bg+";color:"+fg+";"]],window,stylesheet)

}function load(){if(!loaded){loaded=!0,amlTab=new ui.page({id:plugin.name,type:"editor::"+editorType,
autofocus:!1,caption:title,tab:plugin,focussable:!0,$focussable:!0}),classList.names.length&&classList.add(),
plugin.addElement(amlTab)
var activate=amlTab.$activate
amlTab.$activate=function(){activate.apply(amlTab,arguments),emit("activate")}
var deactivate=amlTab.$deactivate
amlTab.$deactivate=function(){deactivate.apply(amlTab,arguments),emit("deactivate")},amlTab.cloud9tab=plugin,
amlPane&&(init&&amlPane.setAttribute("buttons","close"),attachTo(amlPane.cloud9pane,null,options.noanim),
init&&amlPane.setAttribute("buttons","close,scale,order")),active&&(amlPane?amlPane.set(amlTab):amlTab.on("DOMNodeInsertedIntoDocument",function insert(e){
amlTab.parentNode.set(amlTab),amlTab.off("DOMNodeInsertedIntoDocument",insert)})),init=!1,active=!1}}
function getState(filter){var state={type:"tab",name:plugin.name,path:path,className:filterClassNames(classList.names),
document:doc.getState(filter),editorType:editorType,active:isActive()}
return emit("getState",{state:state}),state}function filterClassNames(classNames){return classNames.filter(function(n){
return["error","dark","loading"].indexOf(n)===-1})}function setState(state){if(state.pane&&(amlPane=state.pane.aml),
init=state.init,doc=doc?doc.setState(state.document):state.document instanceof Plugin?state.document:new Document(state.document),
doc.tab=plugin,active=state.active,loaded&&active&&activate(),plugin.editorType=state.editorType,plugin.path=state.path,
plugin.title=doc.title||"",plugin.tooltip=doc.tooltip,state.className&&(classList.names=filterClassNames(state.className),
amlTab&&classList.add()),!docInited){doc.on("setTitle",function(e){plugin.title=e.title},plugin),doc.on("setTooltip",function(e){
plugin.tooltip=e.tooltip},plugin)
var setChanged=function(e){e.changed||doc.meta.newfile?doc.tab.classList.add("changed"):doc.tab.classList.remove("changed")

}
doc.on("changed",setChanged,plugin),setChanged({changed:doc.changed}),docInited=!0}}function isActive(){
return amlPane?amlPane.getPage()==amlTab:options.active}function activate(){amlPane.set(amlTab)}function beforeClose(e){
return emit("beforeClose",e)}function attachTo(t,nextSibling,noAnim){if("tab"!=t.aml.localName)throw new Error("Incorrect Element: "+t.aml.localName)


amlPane=t.aml
var lastPane=amlTab.parentNode
emit("beforeReparent",{lastPane:lastPane&&lastPane.cloud9pane,pane:t})!==!1&&(lastPane!=amlPane&&(amlPane.skipAnimOnce=noAnim),
amlPane.insertBefore(amlTab,nextSibling&&nextSibling.aml),apf.setStyleClass(amlPane.$ext,"",["empty"]),
lastPane&&!lastPane.childNodes.length&&apf.setStyleClass(lastPane.$ext,"empty"),emit("afterReparent",{
lastPane:lastPane&&lastPane.cloud9pane,pane:t}))}function switchEditor(type,callback){editorType!=type&&amlPane.cloud9pane.createEditor(type,function(err,editor){
var info={}
if(editor.isValid(amlTab.cloud9tab.document,info)===!1)return void alert(info.title||"Could not switch editor",info.head||"Could not switch editor because this document is invalid.",info.message||"Please fix the error and try again.")


var currentValue=plugin.document.value
editorType=type,amlTab.setAttribute("type","editor::"+type),amlPane.getPage()==amlTab&&(amlPane.activepage=-1,
amlPane.set(amlTab),plugin.document.value=currentValue),callback()})}function close(noAnim){return!!amlPane.remove&&(amlPane.remove(amlTab,null,noAnim),
!0)}var editorType,doc,path,amlPane,init,active,fg,bg,title,tooltip,amlTab,closed,rule,docInited,loaded,meta={},name=options.name,classList={
names:[],get length(){return classList.names.length},contains:function(name){return classList.names.indexOf(name)>-1

},add:function(name){if(name){var idx=this.names.indexOf(name)
if(idx>-1)return
this.names.push(name)}amlTab&&amlTab.setAttribute("class",this.names.join(" "))},remove:function(){for(var i=0,l=arguments.length;i<l;i++){
var idx=this.names.indexOf(arguments[i])
idx>-1&&this.names.splice(idx,1)}amlTab&&amlTab.setAttribute("class",this.names.join(" "))}},plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


return plugin.on("load",function(){load()}),plugin.on("beforeUnload",function(e){if(!plugin.meta.$closing&&close(e&&e.animate===!1))return!1

}),plugin.on("unload",function(e){closed=!0,rule&&ui.removeStyleRule(rule,stylesheet)
var last=e&&e.last||0===amlPane.getPages().length
last&&apf.setStyleClass(amlPane.$ext,"empty"),loaded=!1,emit("close",{last:last,htmlEvent:e&&e.htmlEvent
})}),plugin.freezePublicAPI({get aml(){return amlTab},get pane(){return amlPane.cloud9pane},get document(){
return doc},get meta(){return meta},get path(){return path||void 0},set path(v){var oldpath=path
path=v,emit("setPath",{path:path,oldpath:oldpath})},get relatedPath(){return(this.editor||1).relatedPath

},get editorType(){return editorType},set editorType(type){editorType=type,amlTab&&amlTab.setProperty("type","editor::"+type)

},get title(){return title},set title(value){title=value,amlTab&&amlTab.setProperty("caption",value)},
get tooltip(){return tooltip},set tooltip(value){tooltip=value},get backgroundColor(){return bg},set backgroundColor(v){
return bg=v||"",rule?void ui.setStyleRule(rule,"background-color",bg,stylesheet):initStyleSheet(fg,bg)

},get foregroundColor(){return bg},set foregroundColor(v){return fg=v,rule?void ui.setStyleRule(rule,"color",fg,stylesheet):initStyleSheet(fg,bg)

},get classList(){return classList},get active(){return amlPane.getPage()==amlTab},get editor(){if(amlPane.$amlDestroyed)return!1


var editorTab=amlPane.getPage("editor::"+editorType)
return!!editorTab&&editorTab.editor},_events:["beforeClose","activate","getState","setPath","beforeReparent","afterReparent","close"],
activate:activate,isActive:isActive,getState:getState,attachTo:attachTo,switchEditor:switchEditor,close:close,
beforeClose:beforeClose}),options&&setState(options),plugin.load(name,"tab"),plugin}var Plugin=imports.Plugin,Document=imports.Document,ui=imports.ui,alert=imports["dialog.alert"].show,stylesheet=ui.createStylesheet()


register(null,{Tab:Tab})}return main.consumes=["Plugin","ui","Document","dialog.alert"],main.provides=["Tab"],
main})


define("plugins/c9.ide.editors/urlview",[],function(require,exports,module){function main(options,imports,register){
function UrlView(){var container,plugin=new Editor("Ajax.org",main.consumes,extensions),counter=0
plugin.on("draw",function(e){container=e.htmlNode}),plugin.on("load",function(){})
var currentDocument
return plugin.on("documentLoad",function(e){var doc=e.doc,session=doc.getSession()
if(doc.on("getValue",function(e){return currentDocument==doc?session.iframe.src:e.value},session),doc.on("setValue",function(e){
currentDocument==doc&&(session.iframe.src=e.value||"about:blank")},session),session.state=e.state||{},
!session.iframe){var div=document.createElement("div"),iframe=document.createElement("iframe")
iframe.setAttribute("nwfaketop",!0),iframe.setAttribute("nwdisable",!0),iframe.style.width="100%",iframe.style.height="100%",
iframe.style.border=0,iframe.src=doc.value||"about:blank",div.style.position="absolute",div.style.left=0,
div.style.top=0,div.style.right=0,div.style.bottom=0,div.appendChild(iframe),session.iframe=iframe,session.div=div

}container.appendChild(session.div),session.iframe.style.backgroundColor=doc.tab.backgroundColor=session.state.backgroundColor||"#222222",
session.state.dark===!1?doc.tab.classList.remove("dark"):doc.tab.classList.add("dark")}),plugin.on("documentActivate",function(e){
currentDocument&&(currentDocument.getSession().div.style.display="none"),currentDocument=e.doc,e.doc.getSession().div.style.display="block"

}),plugin.on("documentUnload",function(e){container.removeChild(e.doc.getSession().div)}),plugin.on("getState",function(e){
var doc=e.doc
e.state.backgroundColor=doc.tab.backgroundColor,e.state.dark=doc.tab.classList.names.indexOf("dark")>-1

}),plugin.on("setState",function(e){e.doc.tab.backgroundColor=e.state.backgroundColor,e.state.dark&&e.doc.tab.classList.add("dark")

}),plugin.on("clear",function(){}),plugin.on("focus",function(){}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){}),plugin.freezePublicAPI({}),plugin.load("urlview"+counter++),plugin}var Editor=imports.Editor,editors=imports.editors,extensions=[]


register(null,{urlview:editors.register("urlview","URL Viewer",UrlView,extensions)})}return main.consumes=["Editor","editors"],
main.provides=["urlview"],main})


define("plugins/c9.ide.imgeditor/lib_pixastic",[],function(require,exports,module){var Pixastic=function(){
function addEvent(el,event,handler){el.addEventListener?el.addEventListener(event,handler,!1):el.attachEvent&&el.attachEvent("on"+event,handler)

}function onready(handler){var handlerDone=!1,execHandler=function(){handlerDone||(handlerDone=!0,handler())

}
document.write('<script defer src="//:" id="__onload_ie_pixastic__"></script>')
var script=document.getElementById("__onload_ie_pixastic__")
script.onreadystatechange=function(){"complete"==script.readyState&&(script.parentNode.removeChild(script),
execHandler())},document.addEventListener&&document.addEventListener("DOMContentLoaded",execHandler,!1),
addEvent(window,"load",execHandler)}function init(){for(var imgEls=getElementsByClass("pixastic",null,"img"),canvasEls=getElementsByClass("pixastic",null,"canvas"),elements=imgEls.concat(canvasEls),i=0;i<elements.length;i++)!function(){
for(var el=elements[i],actions=[],classes=el.className.split(" "),c=0;c<classes.length;c++){var cls=classes[c]


if("pixastic-"==cls.substring(0,9)){var actionName=cls.substring(9)
""!=actionName&&actions.push(actionName)}}if(actions.length)if("img"==el.tagName.toLowerCase()){var dataImg=new Image


if(dataImg.src=el.src,dataImg.complete)for(var a=0;a<actions.length;a++){var res=Pixastic.applyAction(el,el,actions[a],null)


res&&(el=res)}else dataImg.onload=function(){for(var a=0;a<actions.length;a++){var res=Pixastic.applyAction(el,el,actions[a],null)


res&&(el=res)}}}else setTimeout(function(){for(var a=0;a<actions.length;a++){var res=Pixastic.applyAction(el,el,actions[a],null)


res&&(el=res)}},1)}()}function getElementsByClass(searchClass,node,tag){var classElements=new Array
null==node&&(node=document),null==tag&&(tag="*")
var els=node.getElementsByTagName(tag),elsLen=els.length,pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)")


for(i=0,j=0;i<elsLen;i++)pattern.test(els[i].className)&&(classElements[j]=els[i],j++)
return classElements}function writeDebug(text,level){if(Pixastic.debug)try{switch(level){case"warn":console.warn("Pixastic:",text)


break
case"error":console.error("Pixastic:",text)
break
default:console.log("Pixastic:",text)}}catch(e){}}"undefined"!=typeof pixastic_parseonload&&pixastic_parseonload&&onready(init)


var hasCanvas=function(){var c=document.createElement("canvas"),val=!1
try{val=!("function"!=typeof c.getContext||!c.getContext("2d"))}catch(e){}return function(){return val

}}(),hasCanvasImageData=function(){var ctx,c=document.createElement("canvas"),val=!1
try{"function"==typeof c.getContext&&(ctx=c.getContext("2d"))&&(val="function"==typeof ctx.getImageData)

}catch(e){}return function(){return val}}(),hasGlobalAlpha=function(){var hasAlpha=!1,red=document.createElement("canvas")


if(hasCanvas()&&hasCanvasImageData()){red.width=red.height=1
var redctx=red.getContext("2d")
redctx.fillStyle="rgb(255,0,0)",redctx.fillRect(0,0,1,1)
var blue=document.createElement("canvas")
blue.width=blue.height=1
var bluectx=blue.getContext("2d")
bluectx.fillStyle="rgb(0,0,255)",bluectx.fillRect(0,0,1,1),redctx.globalAlpha=.5,redctx.drawImage(blue,0,0)


var reddata=redctx.getImageData(0,0,1,1).data
hasAlpha=255!=reddata[2]}return function(){return hasAlpha}}()
return{parseOnLoad:!1,debug:!1,applyAction:function(img,dataImg,actionName,options){options=options||{}


var imageIsCanvas="canvas"==img.tagName.toLowerCase()
if(imageIsCanvas&&Pixastic.Client.isIE())return Pixastic.debug&&writeDebug("Tried to process a canvas element but browser is IE."),
!1
var canvas,ctx,hasOutputCanvas=!1
Pixastic.Client.hasCanvas()&&(hasOutputCanvas=!!options.resultCanvas,canvas=options.resultCanvas||document.createElement("canvas"),
ctx=canvas.getContext("2d"))
var w=img.offsetWidth,h=img.offsetHeight
if(imageIsCanvas&&(w=img.width,h=img.height),0==w||0==h){if(null!=img.parentNode)return void(Pixastic.debug&&writeDebug("Image has 0 width and/or height."))


var oldpos=img.style.position,oldleft=img.style.left
img.style.position="absolute",img.style.left="-9999px",document.body.appendChild(img),w=img.offsetWidth,
h=img.offsetHeight,document.body.removeChild(img),img.style.position=oldpos,img.style.left=oldleft}if(actionName.indexOf("(")>-1){
var tmp=actionName
actionName=tmp.substr(0,tmp.indexOf("("))
var arg=tmp.match(/\((.*?)\)/)
if(arg[1]){arg=arg[1].split(";")
for(var a=0;a<arg.length;a++)if(thisArg=arg[a].split("="),2==thisArg.length)if("rect"==thisArg[0]){var rectVal=thisArg[1].split(",")


options[thisArg[0]]={left:parseInt(rectVal[0],10)||0,top:parseInt(rectVal[1],10)||0,width:parseInt(rectVal[2],10)||0,
height:parseInt(rectVal[3],10)||0}}else options[thisArg[0]]=thisArg[1]}}options.rect?(options.rect.left=Math.round(options.rect.left),
options.rect.top=Math.round(options.rect.top),options.rect.width=Math.round(options.rect.width),options.rect.height=Math.round(options.rect.height)):options.rect={
left:0,top:0,width:w,height:h}
var validAction=!1
if(Pixastic.Actions[actionName]&&"function"==typeof Pixastic.Actions[actionName].process&&(validAction=!0),
!validAction)return Pixastic.debug&&writeDebug('Invalid action "'+actionName+'". Maybe file not included?'),
!1
if(!Pixastic.Actions[actionName].checkSupport())return Pixastic.debug&&writeDebug('Action "'+actionName+'" not supported by this browser.'),
!1
Pixastic.Client.hasCanvas()?(canvas!==img&&(canvas.width=w,canvas.height=h),hasOutputCanvas||(canvas.style.width=w+"px",
canvas.style.height=h+"px"),ctx.drawImage(dataImg,0,0,w,h),img.__pixastic_org_image?(canvas.__pixastic_org_image=img.__pixastic_org_image,
canvas.__pixastic_org_width=img.__pixastic_org_width,canvas.__pixastic_org_height=img.__pixastic_org_height):(canvas.__pixastic_org_image=img,
canvas.__pixastic_org_width=w,canvas.__pixastic_org_height=h)):Pixastic.Client.isIE()&&"undefined"==typeof img.__pixastic_org_style&&(img.__pixastic_org_style=img.style.cssText)


var params={image:img,canvas:canvas,width:w,height:h,useData:!0,options:options},res=Pixastic.Actions[actionName].process(params)


return!!res&&(Pixastic.Client.hasCanvas()?(params.useData&&Pixastic.Client.hasCanvasImageData()&&(canvas.getContext("2d").putImageData(params.canvasData,options.rect.left,options.rect.top),
canvas.getContext("2d").fillRect(0,0,0,0)),options.leaveDOM||(canvas.title=img.title,canvas.imgsrc=img.imgsrc,
imageIsCanvas||(canvas.alt=img.alt),imageIsCanvas||(canvas.imgsrc=img.src),canvas.className=img.className,
canvas.style.cssText=img.style.cssText,canvas.name=img.name,canvas.tabIndex=img.tabIndex,canvas.id=img.id,
img.parentNode&&img.parentNode.replaceChild&&img.parentNode.replaceChild(canvas,img)),options.resultCanvas=canvas,
canvas):img)},prepareData:function(params,getCopy){var ctx=params.canvas.getContext("2d"),rect=params.options.rect,dataDesc=ctx.getImageData(rect.left,rect.top,rect.width,rect.height),data=dataDesc.data


return getCopy||(params.canvasData=dataDesc),data},process:function(img,actionName,options,callback){
if("img"==img.tagName.toLowerCase()){var dataImg=new Image
if(dataImg.src=img.src,dataImg.complete){var res=Pixastic.applyAction(img,dataImg,actionName,options)


return callback&&callback(res),res}dataImg.onload=function(){var res=Pixastic.applyAction(img,dataImg,actionName,options)


callback&&callback(res)}}if("canvas"==img.tagName.toLowerCase()){var res=Pixastic.applyAction(img,img,actionName,options)


return callback&&callback(res),res}},revert:function(img){if(Pixastic.Client.hasCanvas()){if("canvas"==img.tagName.toLowerCase()&&img.__pixastic_org_image)return img.width=img.__pixastic_org_width,
img.height=img.__pixastic_org_height,img.getContext("2d").drawImage(img.__pixastic_org_image,0,0),img.parentNode&&img.parentNode.replaceChild&&img.parentNode.replaceChild(img.__pixastic_org_image,img),
img}else Pixastic.Client.isIE()&&"undefined"!=typeof img.__pixastic_org_style&&(img.style.cssText=img.__pixastic_org_style)

},Client:{hasCanvas:hasCanvas,hasCanvasImageData:hasCanvasImageData,hasGlobalAlpha:hasGlobalAlpha,isIE:function(){
return!!document.all&&!!window.attachEvent&&!window.opera}},Actions:{}}}()
Pixastic.Actions.crop={process:function(params){if(Pixastic.Client.hasCanvas()){var rect=params.options.rect,width=rect.width,height=rect.height,top=rect.top,left=rect.left


"undefined"!=typeof params.options.left&&(left=parseInt(params.options.left,10)),"undefined"!=typeof params.options.top&&(top=parseInt(params.options.top,10)),
"undefined"!=typeof params.options.height&&(width=parseInt(params.options.width,10)),"undefined"!=typeof params.options.height&&(height=parseInt(params.options.height,10)),
left<0&&(left=0),left>params.width-1&&(left=params.width-1),top<0&&(top=0),top>params.height-1&&(top=params.height-1),
width<1&&(width=1),left+width>params.width&&(width=params.width-left),height<1&&(height=1),top+height>params.height&&(height=params.height-top)


var copy=document.createElement("canvas")
return copy.width=params.width,copy.height=params.height,copy.getContext("2d").drawImage(params.canvas,0,0),
params.canvas.width=width,params.canvas.height=height,params.canvas.getContext("2d").clearRect(0,0,width,height),
params.canvas.getContext("2d").drawImage(copy,left,top,width,height,0,0,width,height),params.useData=!1,
!0}},checkSupport:function(){return Pixastic.Client.hasCanvas()}},Pixastic.Actions.fliph={process:function(params){
if(Pixastic.Client.hasCanvas()){var rect=params.options.rect,copyCanvas=document.createElement("canvas")


copyCanvas.width=rect.width,copyCanvas.height=rect.height,copyCanvas.getContext("2d").drawImage(params.image,rect.left,rect.top,rect.width,rect.height,0,0,rect.width,rect.height)


var ctx=params.canvas.getContext("2d")
return ctx.clearRect(rect.left,rect.top,rect.width,rect.height),ctx.scale(-1,1),ctx.drawImage(copyCanvas,-rect.left-rect.width,rect.top,rect.width,rect.height),
params.useData=!1,!0}if(Pixastic.Client.isIE())return params.image.style.filter+=" fliph",!0},checkSupport:function(){
return Pixastic.Client.hasCanvas()||Pixastic.Client.isIE()}},Pixastic.Actions.flipv={process:function(params){
if(Pixastic.Client.hasCanvas()){var rect=params.options.rect,copyCanvas=document.createElement("canvas")


copyCanvas.width=rect.width,copyCanvas.height=rect.height,copyCanvas.getContext("2d").drawImage(params.image,rect.left,rect.top,rect.width,rect.height,0,0,rect.width,rect.height)


var ctx=params.canvas.getContext("2d")
return ctx.clearRect(rect.left,rect.top,rect.width,rect.height),ctx.scale(1,-1),ctx.drawImage(copyCanvas,rect.left,-rect.top-rect.height,rect.width,rect.height),
params.useData=!1,!0}if(Pixastic.Client.isIE())return params.image.style.filter+=" flipv",!0},checkSupport:function(){
return Pixastic.Client.hasCanvas()||Pixastic.Client.isIE()}},Pixastic.Actions.resize={process:function(params){
if(Pixastic.Client.hasCanvas()){var width=parseInt(params.options.width,10),height=parseInt(params.options.height,10),canvas=params.canvas


width<1&&(width=1),width<2&&(width=2)
var copy=document.createElement("canvas")
return copy.width=width,copy.height=height,copy.getContext("2d").drawImage(canvas,0,0,width,height),canvas.width=width,
canvas.height=height,canvas.getContext("2d").drawImage(copy,0,0),params.useData=!1,!0}},checkSupport:function(){
return Pixastic.Client.hasCanvas()}},Pixastic.Actions.rotate={process:function(params){if(Pixastic.Client.hasCanvas()){
var canvas=params.canvas,width=params.width,height=params.height,copy=document.createElement("canvas")


copy.width=width,copy.height=height,copy.getContext("2d").drawImage(canvas,0,0,width,height)
var angle=-parseFloat(params.options.angle)*Math.PI/180,dimAngle=angle
dimAngle>.5*Math.PI&&(dimAngle=Math.PI-dimAngle),dimAngle<.5*-Math.PI&&(dimAngle=-Math.PI-dimAngle)
var diag=Math.sqrt(width*width+height*height),diagAngle1=Math.abs(dimAngle)-Math.abs(Math.atan2(height,width)),diagAngle2=Math.abs(dimAngle)+Math.abs(Math.atan2(height,width)),newWidth=Math.abs(Math.cos(diagAngle1)*diag),newHeight=Math.abs(Math.sin(diagAngle2)*diag)


canvas.width=newWidth,canvas.height=newHeight
var ctx=canvas.getContext("2d")
return ctx.translate(newWidth/2,newHeight/2),ctx.rotate(angle),ctx.drawImage(copy,-width/2,-height/2),
params.useData=!1,!0}},checkSupport:function(){return Pixastic.Client.hasCanvas()}},module.exports=Pixastic

})


define("text!plugins/c9.ide.imgeditor/style.css",[],"")


define("text!plugins/c9.ide.imgeditor/imgeditor.xml",[],'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:vsplitbox id="parent" anchors="0 0 0 0">\n        <a:bar class="imgtoolbar fakehbox aligncenter padding3" id="barTools" height="30">\n            <a:button skin="c9-toolbarbutton-glossy" id="btn1">Resize</a:button>\n            <a:button skin="c9-toolbarbutton-glossy" id="btn2" disabled="true">Crop</a:button>\n            <a:divider skin="c9-divider" />\n            \n            <a:button skin="c9-toolbarbutton-glossy" id="btn4">Rotate 90&#176; Left</a:button>\n            <a:button skin="c9-toolbarbutton-glossy" id="btn3">Rotate 90&#176; Right</a:button>\n            <a:divider skin="c9-divider" />\n            \n            <a:button skin="c9-toolbarbutton-glossy" id="btn5">FlipH</a:button>\n            <a:button skin="c9-toolbarbutton-glossy" id="btn6">FlipV</a:button>\n            <a:divider skin="c9-divider" />\n\n            <a:dropdown skin="black_dropdown" id="zoom" value="100%" width="70" maxitems="8">\n                <a:item value="10">10%</a:item>\n                <a:item value="25">25%</a:item>\n                <a:item value="50">50%</a:item>\n                <a:item value="75">75%</a:item>\n                <a:item value="100">100%</a:item>\n                <a:item value="200">200%</a:item>\n                <a:item value="400">400%</a:item>\n                <a:item value="800">800%</a:item>\n            </a:dropdown>\n            <a:checkbox skin="checkbox_black" id="smooth" value="false">Smooth</a:checkbox>\n            <a:divider skin="c9-divider" />\n            \n            <a:label id="info" />\n            <a:divider skin="c9-divider" />\n            \n            <a:label>Selection:</a:label>\n            <a:label id="rectinfo" />\n        </a:bar>\n        \n        <a:bar id="imgEditor" flex="1" visible="false" class=\'imgeditor\'>\n            <img style="margin:0 auto;" />\n            <canvas></canvas>\n        </a:bar>\n    </a:vsplitbox>\n    \n    <a:menu id="resize-menu" class="menu-resize">\n        <div class="menu-resize-row-height">\n            <a:label class="resize-label">Width:</a:label>\n            <a:spinner width="50" min="0" max="10000" id="width" />\n        </div>\n        <div class="menu-resize-row-height">\n            <a:label class="resize-label">Height:</a:label>\n            <a:spinner width="50" min="0" max="10000" id="height" />\n        </div>\n        <a:divider />\n        <div class="menu-resize-row-height">\n            <a:checkbox value="true" label="Maintain Aspect Ratio" skin="checkbox_black" id="aspectratio" />\n        </div>\n        <a:divider />\n        <div class="menu-resize-row-height center">\n            <a:button skin="btn-default-css3" margin="2 10 0 10" style="width:50%" caption="Resize" default="1" id="resize-button" />\n        </div>\n    </a:menu>\n</a:application>\n')


define("plugins/c9.ide.imgeditor/imgeditor",[],function(require,exports,module){function main(options,imports,register){
function UndoItem(original,changed,apply){this.getState=function(){},this.undo=function(){apply(original)

},this.redo=function(){apply(changed)}}function ImageEditor(){function setPath(path,doc,callback){if(path){
doc.title=path.substr(path.lastIndexOf("/")+1),doc.tooltip=path
var fullpath=path.match(/^\w+:\/\//)?path:vfs.url(path)
loadCanvas(doc.tab,fullpath,callback)}}function loadCanvas(tab,path,callback){var idx=tab.path,cnvs=canvas(),ctx=cnvs.getContext("2d"),img=editor.$ext.querySelector("img")


if(img){var src=img.src.replace(/\?[^?]+/,"")
if(src==path)return
img.parentNode.removeChild(img)}if(path=path+"?"+Date.now(),img=document.createElement("img"),img.style.margin="0 auto",
editor.$ext.appendChild(img),c9.hosted&&(img.crossOrigin="Anonymous"),path&&!loadedFiles[idx]){tab.classList.add("connecting")


var timer=setTimeout(function(){img._cleanup(),showError("Image loading timed out")},12e4)
img.onload=function(e){var sizeCaption="W:"+img.width+"px, H:"+img.height+"px"
info.setAttribute("caption",sizeCaption),cnvs.width=img.width,cnvs.height=img.height,cnvs.style.display="inline-block",
img.style.display="none",ctx.drawImage(img,0,0),loadedFiles[idx]=cnvs.toDataURL(),tab.classList.remove("connecting"),
img._cleanup(),callback&&callback(loadedFiles[idx])},img.onerror=function(){img._cleanup(),tab.classList.add("error"),
img.src=options.staticPrefix+"/images/sorry.jpg",showError("Invalid or Unsupported Image Format")},img._cleanup=function(){
clearTimeout(timer),img.onerror=img.onload=null,img.parentNode&&img.parentNode.removeChild(img),tab.classList.remove("connecting")

},img.src=path}else{var tempImg=new Image
tempImg.onload=function(){cnvs.width=tempImg.width,cnvs.height=tempImg.height,cnvs.style.display="inline-block",
info.setAttribute("caption","W:"+tempImg.width+"px, H:"+tempImg.height+"px"),ctx.drawImage(tempImg,0,0)

},tempImg.src=loadedFiles[idx],callback&&callback(loadedFiles[idx])}}function startRect(e){function clampX(x){
return Math.min(Math.max(xMin,x),xMax)}function clampY(y){return Math.min(Math.max(yMin,y),yMax)}var moved,scrolled,container=rect.parentNode,pos=container.getBoundingClientRect(),cnvs=canvas(),htmlNode=editor.$ext,cnvsPos=cnvs.getBoundingClientRect(),xMin=cnvsPos.left-pos.left+htmlNode.scrollLeft,yMin=cnvsPos.top-pos.top+htmlNode.scrollTop,xMax=xMin+cnvsPos.width,yMax=yMin+cnvsPos.height,startX=clampX(e.clientX-pos.left+htmlNode.scrollLeft),startY=clampY(e.clientY-pos.top+htmlNode.scrollTop)


event.capture(container,function onMove(e){var scrollLeft=htmlNode.scrollLeft,scrollTop=htmlNode.scrollTop,clientX=e.clientX-pos.left+scrollLeft,clientY=e.clientY-pos.top+scrollTop


if(scrolled&&(clearTimeout(scrolled),scrolled=null),clientX>scrollLeft+pos.width?(scrollLeft+=clientX-scrollLeft-pos.width,
htmlNode.scrollLeft=scrollLeft,scrollLeft<htmlNode.scrollWidth&&(scrolled=!0)):clientX<scrollLeft-5&&(scrollLeft+=clientX-scrollLeft,
htmlNode.scrollLeft=scrollLeft,scrollLeft>0&&(scrolled=!0)),clientY>scrollTop+pos.height?(scrollTop+=clientY-scrollTop-pos.height,
htmlNode.scrollTop=scrollTop,scrollTop<htmlNode.scrollHeight&&(scrolled=!0)):clientY<scrollTop-5&&(scrollTop+=clientY-scrollTop,
htmlNode.scrollTop=scrollTop,scrollTop>0&&(scrolled=!0)),scrolled&&(scrolled=setTimeout(function(){cnvs&&onMove(e)

},20)),clientX=clampX(clientX),clientY=clampY(clientY),!moved){if(!(Math.abs(startX-e.clientX)+Math.abs(startY-e.clientY)>5))return


moved=!0,rect.style.display="block"}startX>clientX?(rect.style.left=clientX+"px",rect.style.width=startX-clientX+"px"):(rect.style.left=startX+"px",
rect.style.width=clientX-startX+"px"),startY>clientY?(rect.style.top=clientY+"px",rect.style.height=startY-clientY+"px"):(rect.style.top=startY+"px",
rect.style.height=clientY-startY+"px")
var zoomLevel=zoom.value/100
rectinfo.setAttribute("caption","L: "+(rect.offsetLeft-cnvs.offsetLeft)/zoomLevel+"px, T: "+(rect.offsetTop-cnvs.offsetTop)/zoomLevel+"px, W: "+rect.offsetWidth/zoomLevel+"px, H: "+rect.offsetHeight/zoomLevel+"px")

},function(){cnvs=null,moved&&parseInt(rect.style.width,10)&&parseInt(rect.style.height,10)?(activeDocument.getSession().rect={
left:rect.style.left,top:rect.style.top,width:rect.style.width,height:rect.style.height},crop.enable()):clearRect()

}),event.stopEvent(e)}function exec(action,options){var cnvs=canvas(),url=cnvs.toDataURL()
if("crop"==action){var zoomLevel=zoom.value/100
options={left:(rect.offsetLeft-cnvs.offsetLeft)/zoomLevel,top:(rect.offsetTop-cnvs.offsetTop)/zoomLevel,
width:rect.offsetWidth/zoomLevel,height:rect.offsetHeight/zoomLevel}}Pixastic.process(cnvs,action,options),
clearRect(),cnvs=canvas(),info.setAttribute("caption","W:"+cnvs.offsetWidth+"px, H:"+cnvs.offsetHeight+"px")


var doc=activeDocument
doc.undoManager.add(new UndoItem(url,canvas().toDataURL(),function(url){loadedFiles[doc.tab.path]=url,
loadCanvas(doc.tab)}))}function clearRect(){rect.style.display="none",delete activeDocument.getSession().rect,
crop.disable()}var canvas,activeDocument,rect,crop,zoom,smooth,info,rectinfo,editor,plugin=new Editor("Ajax.org",main.consumes,extensions),BGCOLOR={
"flat-light":"#F1F1F1","flat-dark":"#3D3D3D",light:"#D3D3D3","light-gray":"#D3D3D3",dark:"#3D3D3D","dark-gray":"#3D3D3D"
}
return plugin.on("draw",function(e){function saveCanvas(path,value,callback){var dataURL=loadedFiles[path],blob=dataUriToBlob(dataURL)


watcher.ignore(path,6e4),vfs.rest(path,{method:"PUT",body:blob},function(err,data,res){callback(err,data),
watcher.ignore(path)})}function dataUriToBlob(dataURI){var byteString
byteString=dataURI.split(",")[0].indexOf("base64")>=0?atob(dataURI.split(",")[1]):unescape(dataURI.split(",")[1])


for(var mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],array=[],i=0;i<byteString.length;i++)array.push(byteString.charCodeAt(i))


return new Blob([new Uint8Array(array)],{type:mimeString})}handle.draw(),ui.insertMarkup(e.tab,require("text!./imgeditor.xml"),plugin)


var btn1=(plugin.getElement("parent"),plugin.getElement("btn1")),btn3=plugin.getElement("btn3"),btn4=plugin.getElement("btn4"),btn5=plugin.getElement("btn5"),btn6=plugin.getElement("btn6")


editor=plugin.getElement("imgEditor"),crop=plugin.getElement("btn2"),zoom=plugin.getElement("zoom"),smooth=plugin.getElement("smooth"),
info=plugin.getElement("info"),rectinfo=plugin.getElement("rectinfo"),rect=document.createElement("div"),
editor.$ext.appendChild(rect),rect.className="imgeditorrect",canvas=function(){return editor.$ext.querySelector("canvas")

}
var mnuResize=plugin.getElement("resize-menu")
btn1.setAttribute("submenu",mnuResize),plugin.addElement(mnuResize)
var tbWidth=plugin.getElement("width"),tbHeight=plugin.getElement("height"),cbAspect=plugin.getElement("aspectratio"),btnResize=plugin.getElement("resize-button")


btnResize.addEventListener("click",function(){tbHeight.getValue()>1&&tbWidth.getValue()>1&&exec("resize",{
width:tbWidth.getValue(),height:tbHeight.getValue()})}),tbWidth.on("blur",function(){cbAspect.checked&&tbHeight.setAttribute("value",Math.round(canvas().offsetHeight*(tbWidth.getValue()/canvas().offsetWidth)))

}),tbHeight.on("blur",function(){cbAspect.checked&&tbWidth.setAttribute("value",Math.round(canvas().offsetWidth*(tbHeight.getValue()/canvas().offsetHeight)))

}),mnuResize.on("prop.visible",function(e){e.value&&(tbWidth.setValue(canvas().offsetWidth),tbHeight.setValue(canvas().offsetHeight))

}),smooth.on("afterchange",function(e){smooth.checked?(ui.setStyleRule(".imgeditor canvas","-ms-interpolation-mode","bicubic"),
ui.setStyleRule(".imgeditor canvas","image-rendering","auto")):(ui.setStyleRule(".imgeditor canvas","-ms-interpolation-mode","nearest-neighbor"),
["-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].map(function(prop){
ui.setStyleRule(".imgeditor canvas","image-rendering",prop)}))
var session=activeDocument.getSession()
session.smooth=smooth.checked,settings.set("user/imgeditor/@smooth",smooth.checked),clearRect()}),zoom.on("afterchange",function(e){
ui.setStyleRule(".imgeditor canvas",apf.CSSPREFIX2+"-transform","scale("+zoom.value/100+")")
var session=activeDocument.getSession()
session.zoom=zoom.value,e.value&&settings.set("user/imgeditor/@zoom",zoom.value),clearRect()}),crop.on("click",function(){
exec("crop")}),btn3.on("click",function(){exec("rotate",{angle:-90})}),btn4.on("click",function(){exec("rotate",{
angle:90})}),btn5.on("click",function(){exec("fliph")}),btn6.on("click",function(){exec("flipv")}),editor.$ext.onmousemove=function(e){
if("none"==rect.style.display){var cnvs=canvas(),pos=cnvs.getBoundingClientRect(),left=e.clientX-pos.left,top=e.clientY-pos.top,zoomLevel=zoom.value/100

;(left<0||top<0||left>pos.width||top>pos.height)&&(left=top=0),rectinfo.setAttribute("caption","L: "+left/zoomLevel+"px, T: "+top/zoomLevel+"px")

}},editor.$ext.onmousedown=function(e){startRect(e)},save.on("beforeSave",function(e){if("imgeditor"==e.document.editor.type){
var path=e.document.tab.path
return!(!e.document.changed&&path==e.path)&&(e.document==activeDocument&&(loadedFiles[e.path]=canvas().toDataURL()),
saveCanvas)}}),editor.focus||(editor.focus=function(){return!1}),editor.show()}),plugin.on("documentLoad",function(e){
function setTheme(e){var tab=doc.tab,isDark="dark"==e.theme
tab.backgroundColor=BGCOLOR[e.theme],isDark?tab.classList.add("dark"):tab.classList.remove("dark")}var doc=e.doc,session=doc.getSession()


doc.tab.on("setPath",function(e){setPath(e.path,doc)},session),doc.on("setValue",function(e){var path=doc.tab.path


if(doc.hasValue()){var lastValue=loadedFiles[path]
delete loadedFiles[path],setPath(path,doc,function(newValue){doc.undoManager.add(new UndoItem(lastValue,canvas().toDataURL(),function(url){
loadedFiles[path]=url,loadCanvas(doc.tab)}))})}else setPath(path,doc)},session),layout.on("themeChange",setTheme,doc),
setTheme({theme:settings.get("user/general/@skin")}),canvas().style.display="none",session.zoom=settings.getNumber("user/imgeditor/@zoom")||100

}),plugin.on("documentActivate",function(e){var doc=e.doc,session=doc.getSession(),path=doc.tab.path
activeDocument=doc,setPath(path,doc),zoom.setValue(session.zoom||100),zoom.dispatchEvent("afterchange"),
smooth.setValue(session.smooth),smooth.dispatchEvent("afterchange"),session.rect?(rect.style.display="block",
rect.style.left=session.rect.left,rect.style.top=session.rect.top,rect.style.width=session.rect.width,
rect.style.height=session.rect.height):rect.style.display="none"}),plugin.on("documentUnload",function(e){
delete loadedFiles[e.doc.tab.path]}),plugin.freezePublicAPI({autoload:!1}),plugin.load(null,"imgeditor"),
plugin}var drawn,ui=imports.ui,c9=imports.c9,vfs=imports.vfs,save=imports.save,layout=imports.layout,watcher=imports.watcher,Editor=imports.Editor,editors=imports.editors,settings=imports.settings,showError=imports["dialog.error"].show,event=require("ace/lib/event"),Pixastic=require("./lib_pixastic"),loadedFiles={},extensions=["bmp","djv","djvu","jpg","jpeg","pbm","pgm","png","pnm","ppm","psd","tiff","xbm","xpm"],handle=editors.register("imgeditor","Image Editor",ImageEditor,extensions)


handle.draw=function(){drawn||(drawn=!0,ui.insertCss(require("text!./style.css"),options.staticPrefix,handle))

},ImageEditor.autoload=!1,register(null,{imgeditor:handle})}return main.consumes=["Editor","editors","ui","save","vfs","layout","watcher","settings","dialog.error","c9"],
main.provides=["imgeditor"],main})


define("plugins/c9.ide.editors/imgview",[],function(require,exports,module){function main(options,imports,register){
function ImageEditor(){function setPath(path,doc){if(path){doc.title=(doc.changed?"*":"")+path.substr(path.lastIndexOf("/")+1),
doc.tooltip=path
var fullpath=path.match(/^\w+:\/\//)?path:vfs.url(path)
editor.setProperty("value",fullpath)}}var editor,plugin=new Editor("Ajax.org",main.consumes,extensions),BGCOLOR="#3D3D3D"


return plugin.on("draw",function(e){editor=e.tab.appendChild(new ui.img({flex:"1",anchors:"0 0 0 0",visible:"false",
style:"background-color:"+BGCOLOR})),plugin.addElement(editor),save.on("beforeSave",function(e){var path=e.document.tab.path


if(path)return editor.value!=path&&void 0},plugin),editor.show()}),plugin.on("documentLoad",function(e){
var doc=e.doc
doc.tab.on("setPath",function(e){setPath(e.path,doc)},doc.getSession()),doc.tab.backgroundColor=BGCOLOR,
doc.tab.classList.add("dark")}),plugin.on("documentActivate",function(e){setPath(e.doc.tab.path||e.doc.value,e.doc)

}),plugin.freezePublicAPI({}),plugin.load(null,"imgview"),plugin}var ui=imports.ui,vfs=imports.vfs,save=imports.save,Editor=imports.Editor,editors=imports.editors,extensions=["gif","ico"]


ImageEditor.autoload=!1,register(null,{imgview:editors.register("imgview","Image Viewer",ImageEditor,extensions)
})}return main.consumes=["Editor","editors","ui","save","vfs"],main.provides=["imgview"],main})


define("plugins/c9.ide.editors/editor",[],function(require,module,exports){function main(options,imports,register){
function Editor(developer,deps,extensions){function unloadDocument(doc,options){options||(options={}),
options.doc=doc,emit("documentUnload",options),doc.getSession().unload()}function loadDocument(doc){var lastEditor=doc.editor


if(lastEditor&&lastEditor!=plugin&&lastEditor.unloadDocument(doc,{toEditor:plugin,fromEditor:lastEditor
}),activeDocument=doc,lastEditor!=plugin){var editor=plugin
doc.editor=plugin
var session=doc.getSession(),state=(doc.lastState||!1)[editor.type]
bufferEvent.call(plugin,"documentLoad",{doc:doc,state:state||{}}),session.loaded||session.load(),doc.meta.$unloadEditor||(doc.meta.$unloadEditor=!0,
doc.on("unload",function(){doc.editor.unloadDocument(doc)})),state&&plugin.setState(doc,state)}bufferEvent.call(plugin,"documentActivate",{
doc:doc})}function bufferEvent(name,event){function listenForEvent(curName,listener){curName==name&&listener(event)

}var _self=plugin
emit(name,event),plugin.on("newListener",listenForEvent),plugin.on("documentUnload",function callee(e){
e.doc==event.doc&&(_self.off("newListener",listenForEvent),_self.off("documentUnload",callee))})}function getState(doc,filter){
var state={}
return emit("getState",{doc:doc,state:state,filter:filter||!1}),state}function setState(doc,state){emit("setState",{
doc:doc,state:state||{}})}function clear(){emit("clear")}function isClipboardAvailable(e){return!0}function cut(e){
emit("cut",e||{clipboardData:clipboard.clipboardData})}function copy(e){emit("copy",e||{clipboardData:clipboard.clipboardData
})}function paste(e){emit("paste",e||{clipboardData:clipboard.clipboardData})}function focus(regain,lost){
!lost&&amlTab&&amlTab.focus(),emit("focus",{regain:regain||!1,lost:lost||!1}),focussed=!lost||0}function blur(){
emit("blur"),focussed=!1}function resize(e){pane&&pane.visible&&emit("resize",e||{})}function isValid(doc,info){
return emit("validate",{document:doc,info:info})}function attachTo(tb){if(amlTab&&!amlTab.$amlDestroyed)throw new Error("Editors should only be attached once")


plugin.addElement(amlTab=new ui.page({id:"editor::"+plugin.type,mimeTypes:extensions,visible:!1,realtime:!1,
focussable:!0,$focussable:!0})),pane=tb,amlTab.editor=this,pane.aml.insertBefore(amlTab,pane.aml.getPage(0))


var event={tab:amlTab,htmlNode:amlTab.$int}
emit.sticky("draw",event)
var editor=this
pane.on("unload",function(){editor.unload()})}function drawOn(htmlNode,pg){amlTab=pg
var event={htmlNode:htmlNode,tab:amlTab}
emit.sticky("draw",event)}var plugin=new Plugin(developer,deps),emit=plugin.getEmitter()
emit.setMaxListeners(1e3)
var amlTab,type,pane,activeDocument,focussed,meta={}
return plugin.baseclass(),plugin.freezePublicAPI({get aml(){return amlTab},get pane(){return pane},get activeDocument(){
return activeDocument},get type(){return type},set type(val){if(type)throw new Error("Plugin Type Exception")


type=val},get meta(){return meta},get fileExtensions(){return extensions},_events:["documentLoad","documentActivate","documentUnload","getState","setState","clear","focus","blur","cut","copy","paste","resize","draw","validate"],
unloadDocument:unloadDocument,loadDocument:loadDocument,getState:getState,setState:setState,clear:clear,
isClipboardAvailable:isClipboardAvailable,cut:cut,copy:copy,paste:paste,focus:focus,blur:blur,resize:resize,
isValid:isValid,attachTo:attachTo,drawOn:drawOn}),plugin}var Plugin=imports.Plugin,clipboard=imports.clipboard,ui=imports.ui


register(null,{Editor:Editor})}return main.consumes=["Plugin","ui","clipboard"],main.provides=["Editor"],
main})


define("plugins/c9.ide.editors/editors",[],function(require,module,exports){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,plugin.addElement(group=new ui.group),menus.addItemByPath("View/Editors/",new ui.menu({
"onprop.visible":function(e){e.value&&emit("menuShow",{menu:this})}}),100,plugin),void menus.addItemByPath("View/~",new ui.divider,200,plugin))

}function findEditor(type,editor){return type&&(editor=editors[type]),editor}function editorSupportsFile(type,path){
var extensions=findEditor(type).fileExtensions,ext=extname(path).substr(1).toLowerCase(),filename=basename(path).toLowerCase()


return!!(~extensions.indexOf(path)||~extensions.indexOf(filename)||~extensions.indexOf(ext))}function findEditorByFilename(fn){
var ext=extname(fn).substr(1).toLowerCase(),filename=basename(fn).toLowerCase(),customEditor=settings.get("user/tabs/editorTypes/@"+ext)


if(customEditor)return customEditor
var editor=fileExtensions[fn]&&fileExtensions[fn][0]||fileExtensions[filename]&&fileExtensions[filename][0]||fileExtensions[ext]&&fileExtensions[ext][0]||defaultEditor


return findEditor(null,editor)}function registerPlugin(type,caption,editor,extensions){editors[type]=editor


var handle=new Plugin("Ajax.org",[])
return handle[type]=editor,handle[caption]=caption,editor.type=type,editor.fileExtensions=extensions,
extensions.length&&menus.addItemByPath("View/Editors/"+caption,new ui.item({type:"radio",value:type,group:group,
onclick:function(){emit("menuClick",{value:this.value})}}),4e4,handle),extensions.forEach(function(ext){
ext=ext.toLowerCase(),(fileExtensions[ext]||(fileExtensions[ext]=[])).unshift(editor)}),editor.type==options.defaultEditor&&(defaultEditor=editor),
emit("register",{editor:editor}),handle.on("load",function(){editors[type]||registerPlugin(type,caption,editor,extensions)

}),handle.on("unload",function(){unregisterPlugin(type,editor,extensions)}),handle}function unregisterPlugin(type,editor,extensions){
delete editors[type],extensions.forEach(function(fe){if(fileExtensions[fe]){var idx=fileExtensions[fe].indexOf(editor)


fileExtensions[fe].splice(idx,1),fileExtensions[fe].length||delete fileExtensions[fe]}}),defaultEditor==editor&&(defaultEditor=null),
emit("unregister",{editor:editor})}function createEditor(type,callback){function create(){if(!cancelled){
var constr=editors[type],editor=!!constr&&new constr
editor.type=type,callback(null,editor),emit("create",{editor:editor})}}type||(type="default")
var cancelled=!1
return editors[type]?void create():(plugin.on("register",function wait(e){e.editor.type==type&&(plugin.off("register",wait),
setTimeout(create))}),function(){cancelled=!0})}var defaultEditor,group,ui=imports.ui,Plugin=imports.Plugin,menus=imports.menus,settings=imports.settings,extname=require("path").extname,basename=require("path").basename,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),fileExtensions={},editors={},loaded=!1


plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1,defaultEditor=null,group=null}),plugin.freezePublicAPI({get defaultEditor(){
return options.defaultEditor},get fileExtensions(){return fileExtensions},_events:["register","unregister"],
register:registerPlugin,unregister:unregisterPlugin,findEditor:findEditor,findEditorByFilename:findEditorByFilename,
editorSupportsFile:editorSupportsFile,createEditor:createEditor}),register(null,{editors:plugin})}return main.consumes=["Plugin","menus","ui","settings"],
main.provides=["editors"],main})


define("plugins/c9.ide.editors/document",[],function(require,module,exports){function main(options,imports,register){
function Document(options){function initUndo(){undoManager.on("change",function(e){var c=!undoManager.isAtBookmark()


changed!==c&&(changed=c,emit("changed",{changed:c}))})}function setBookmarkedValue(value,cleansed){if(plugin.value==value)return recentValue=value,
void undoManager.bookmark()
var state=getState()
plugin.value=value,undoManager.bookmark(),delete state.changed,delete state.value,delete state.meta,state.undoManager=undoManager.getState(),
cleansed&&editor&&state[editor.type]&&(state[editor.type].cleansed=!0),emit("mergeState")!==!1&&setState(state)

}function getState(filter){var state=!editor&&lastState?state=util.extend({},lastState):{}
state.changed=changed,state.meta={},state.filter=filter||!1
for(var prop in meta)"$"!=prop.charAt(0)&&(state.meta[prop]=meta[prop])
title&&(state.title=title),tooltip&&(state.tooltip=tooltip),filter?(delete state.value,delete state.undoManager):(state.value=plugin.value,
state.undoManager=undoManager.getState()),editor&&(state[editor.type]=editor.getState(plugin,filter))


var event={doc:plugin,state:state}
return emit("getState",event),lastState=event.state,event.state}function setState(state){if(state.meta){
for(var prop in meta)"$"==prop.charAt(0)&&(state.meta[prop]=meta[prop])
meta=state.meta}state.title&&(plugin.title=state.title),state.tooltip&&(plugin.tooltip=state.tooltip),
"string"==typeof state.value&&(plugin.value=state.value),!state.undoManager||state.undoManager instanceof Plugin||undoManager.setState(state.undoManager),
state.changed&&state.changed!==changed&&(changed=state.changed,emit("changed",{changed:changed})),editor&&state[editor.type]&&editor.setState(plugin,state[editor.type])


var event={doc:plugin,state:state}
emit("setState",event),lastState=event.state}function getSession(type){var ed=editor||tab&&tab.editor


if(ed&&!type&&(type=ed.type),type){if(sessions[type])return sessions[type]
var session=sessions[type]=new Plugin
return session.load(null,"session"),session}}function progress(options){emit("progress",options)}function clone(){
var state=this.getState()
state.undoManager=undoManager
var newdoc=new Document(state)
return emit("clone",{doc:newdoc}),newdoc.meta.cloned=!0,newdoc}function canUnload(){return emit("canUnload")

}var undoManager,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()
options&&options.undoManager instanceof Plugin?(undoManager=options.undoManager,delete options.undoManager):undoManager=new UndoManager


var tab,lastState,title,tooltip,editor,recentValue,ready,sessions={},value=options&&options.value||"",changed=!1,meta={},hasValue=options&&"string"==typeof options.value


return plugin.on("newListener",function(type,listener){"state.set"==type&&lastState&&listener({doc:plugin,
state:lastState})}),initUndo(),plugin.on("unload",function(){changed=!1,undoManager.unload()
for(var type in sessions)sessions[type].unload()}),plugin.freezePublicAPI({get tab(){return tab},set tab(v){
tab=v},get meta(){return meta},get lastState(){return lastState},get editor(){return editor},set editor(v){
editor=v,emit("setEditor",{editor:v})},get ready(){return ready},set ready(v){var e=new Error("Setting ready on ready document")


ready&&reportError(e,{ready:ready}),ready=e.stack||!0,emit.sticky("ready",{doc:plugin})},get tooltip(){
return tooltip},set tooltip(v){tooltip=v,emit("setTooltip",{tooltip:v})},get title(){return title},set title(v){
title=v,emit("setTitle",{title:v})},get value(){var calculated=emit("getValue",{value:recentValue||value
})
return"string"!=typeof calculated&&(calculated=value),undoManager.isAtBookmark()&&(recentValue=calculated),
calculated},set value(v){value=recentValue=v,emit("setValue",{value:v}),hasValue=!0},get recentValue(){
return recentValue},get changed(){return changed},get undoManager(){return undoManager},set undoManager(newUndo){
undoManager.unload(),undoManager=newUndo,initUndo()},_events:["getState","setState","getValue","setValue","mergeState","setTitle","setTooltip","setEditor","changed","progress","clone","canUnload"],
getSession:getSession,setBookmarkedValue:setBookmarkedValue,getState:getState,setState:setState,progress:progress,
clone:clone,canUnload:canUnload,hasValue:function(){return!!hasValue}}),options&&setState(options),plugin.load(null,"document"),
plugin}var Plugin=imports.Plugin,util=imports.util,UndoManager=imports.UndoManager,reportError=imports.error_handler.reportError


register(null,{Document:Document})}return main.consumes=["Plugin","UndoManager","util","error_handler"],
main.provides=["Document"],main})


define("plugins/c9.core/api",[],function(require,exports,module){"use strict"
function main(options,imports,register){function wrapMethod(urlPrefix,method){return function(url,options,callback){
url=apiUrl+urlPrefix+url,callback||(callback=options,options={})
var headers=options.headers=options.headers||{}
headers.Accept=headers.Accept||"application/json",options.method=method.toUpperCase(),options.timeout||(options.timeout=6e4),
BASICAUTH&&(options.username=BASICAUTH[0],options.password=BASICAUTH[1]),auth.request(url,options,function(err,data,res){
return err?(err=data&&data.error||err,err.message=err.message||String(err),callback(err,data,res)):void callback(err,data,res)

})}}function apiWrapper(urlPrefix){for(var wrappers=REST_METHODS.map(wrapMethod.bind(null,urlPrefix)),wrappedApi={},i=0;i<wrappers.length;i++)wrappedApi[REST_METHODS[i]]=wrappers[i]


return wrappedApi}var BASICAUTH,Plugin=imports.Plugin,auth=imports.auth,plugin=new Plugin("Ajax.org",main.consumes),apiUrl=options.apiUrl||"",pid=options.projectId


imports.ext.api=plugin
var REST_METHODS=["get","post","put","delete","patch"],collab=apiWrapper("/collab/"+pid+"/"),user=apiWrapper("/user/"),preview=apiWrapper("/preview/"),project=apiWrapper("/projects/"+pid+"/"),users=apiWrapper("/users/"),packages=apiWrapper("/packages/"),stats=apiWrapper("/stats/"),settings=apiWrapper("/settings/"),vfs=apiWrapper("/vfs/")


plugin.freezePublicAPI({get apiUrl(){return apiUrl},get basicAuth(){throw new Error("Permission Denied")

},set basicAuth(v){BASICAUTH=v.split(":")},apiWrapper:apiWrapper,collab:collab,user:user,preview:preview,
project:project,users:users,packages:packages,stats:stats,settings:settings,vfs:vfs}),register(null,{
api:plugin})}return main.consumes=["Plugin","auth","ext"],main.provides=["api"],main})


define("plugins/c9.ide.auth/auth",[],function(require,exports,module){"use strict"
function main(options,imports,register){function request(url,options,callback){if(!callback)return request(url,{},options)


if(loggingIn){var onLogin=function(){plugin.off("login",onLogin),request(url,options,callback)}
return plugin.on("login",onLogin),{abort:function(){plugin.off("login",onLogin)}}}return options.query=options.query||{},
accessToken&&(options.query.access_token=accessToken),http.request(url,options,function(err,data,res){
return res&&401==res.status&&!options.noLogin?checkLoop(url)?(plugin.once("login",function(){request(url,options,callback)

}),void login()):(console.trace("Login loop detected for URL "+url),callback(new Error("Login loop detected!"))):void callback(err,data,res)

})}function login(checkLogin){if(loggingIn){if(!checkLogin)return
loggingIn()}emit("loggingin"),loggingIn=_login(function(err,token){loggingIn=!1,accessToken=token,request(apiUrl+"/user",function(err,user){
return err||!user?(options.cli?console.warn("Invalid username or password. Please try again."):console.warn("LOGIN: API /user err",err),
setTimeout(login,1e3)):void(user.id!==ANONYMOUS?(loggedIn=!0,uid!=user.id&&(uid=user.id,emit("relogin",{
uid:user.id})),emit("login",{uid:user.id,oldUid:uid})):(loggedIn=!1,emit("logout",{uid:user.id,newUid:ANONYMOUS
})))})},function(){uid!=ANONYMOUS&&emit("logout",{uid:uid,newUid:ANONYMOUS})})||!0}function logout(redirect){
emit("logout-analytics"),redirect=redirect||window.location.href,window.location.href=ideBaseUrl+"/api/nc/logout?redirect="+encodeURIComponent(redirect)

}function createLoopDetector(count,duration){var log={}
return function(url){var now=Date.now(),calls=log[url]
if(!calls)return log[url]=[now],!0
for(;calls.length&&calls[0]<now-duration;)calls.shift()
return calls.push(now),calls.length<count}}var Plugin=imports.Plugin,http=imports.http,_login=imports["auth.bootstrap"].login,ANONYMOUS=-1,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),accessToken=options.accessToken||"",apiUrl=options.apiUrl||"",ideBaseUrl=options.ideBaseUrl,uid=options.userId,loggedIn=!0,checkLoop=createLoopDetector(3,2e4),loggingIn=!1


plugin.freezePublicAPI({_events:["loggingin","login","logout"],get loggedIn(){return loggedIn},get loggingIn(){
return loggingIn},get accessToken(){return accessToken},set accessToken(v){accessToken=v,loggedIn=!0},
login:login,logout:logout,request:request}),register(null,{auth:plugin})}return main.consumes=["Plugin","http","auth.bootstrap"],
main.provides=["auth"],main})


define("plugins/c9.vfs.client/endpoint",[],function(require,exports,module){"use strict"
function main(options,imports,register){function initDefaultServers(baseURI){function init(){options.getServers=void 0


var loc=require("url").parse(baseURI||document.baseURI||window.location.href),defaultServers=[{url:loc.protocol+"//"+loc.hostname+(loc.port?":"+loc.port:"")+"/vfs",
region:"default"}]
servers=(urlServers||options.servers||defaultServers).map(function(server){return server.url=server.url.replace(/\/*$/,""),
server}),pendingServerReqs.forEach(function(cb){cb(null,servers)})}return options.getServers?options.getServers(init):void init()

}function getServers(callback){if("function"==typeof options.getServers)return pendingServerReqs.push(callback)


if(!options.updateServers)return callback(null,servers)
var _servers=servers
return _servers&&_servers.length?(servers=null,callback(null,_servers)):void api.vfs.get("servers",function(err,servers){
return err?callback(err):callback(null,servers.servers)})}function getVfsEndpoint(version,callback){getServers(function(err,_servers){
err&&("EDISCONNECT"!==err.code&&errorHandler.reportError(new Error("Could not get list of VFS servers"),{
cause:err}),metrics.increment("vfs.failed.connect_getservers",1,!0),initDefaultServers(),_servers=servers),
getVfsUrl(version,_servers,function(err,vfsid,url,region){return err?callback(err):void callback(null,{
url:url,region:region,home:vfsid+"/home",project:vfsid+"/workspace",socket:vfsid+"/socket",ping:vfsid,
serviceUrl:vfsid})})})}function isOnline(callback){http.request("/_ping",{timeout:3e3,headers:{Accept:"application/json"
}},function(err,data,res){callback(err,!err)})}function isServerAlive(url,callback){auth.request(url,{
headers:{Accept:"application/json"}},function(err,data,res){err&&deleteOldVfs(),callback(err,!err)})}
function getVfsUrl(version,vfsServers,callback){function tryNext(i){if(foundServer)return!1
if(i>=servers.length)return metrics.increment("vfs.failed.connect_all",1,!0),callback(new Error("Disconnected: Could not reach your workspace. Please try again later."))


var server=servers[i]
auth.request(server.url+"/"+options.pid,{method:"POST",timeout:12e4,body:{version:version},headers:{Accept:"application/json"
}},function(err,res){if(err&&res&&res.error){if(429==err.code)return void setTimeout(function(){tryNext(i)

},res.error.retryIn||1e4)
if(412==err.code&&res.error&&"protocol_mismatch"==res.error.subtype)return onProtocolChange(callback)


if(412==err.code)return void callback(fatalError(res.error.message,"dashboard"))
if(404==err.code)return void callback(fatalError("This workspace no longer appears to exist or failed to be created.","dashboard"))


if(428===err.code&&res.error)return emit("restore",{projectState:res.error.projectState,premium:res.error.premium,
progress:res.error.progress||{progress:0,nextProgress:0,message:""}}),void setTimeout(function(){tryNext(i)

},res.error.retryIn||1e4)
if(403==err.code)return res.error.blocked&&callback(fatalError(res.error.message,"dashboard")),void setTimeout(function(){
tryNext(i)},1e4)
if(503==err.code)return void setTimeout(function(){tryNext(i)},res.error.retryIn||15e3)
if(500===err.code&&res&&res.error&&res.error.cause)return callback(res.error.cause.message)}if(err)return void setTimeout(function(){
tryNext(++latestServer)},2e3)
if(!foundServer){var vfs=rememberVfs(server,res.vfsid)
callback(null,vfs.vfsid,server.url,server.region)}})}function startParallelSearches(totalRunners){for(var attemptedServers={},s=0;s<servers.length&&s<totalRunners;s++){
latestServer=s
var server=servers[s],serverHostUrl=getHostFromServerUrl(server.url)
attemptedServers[serverHostUrl]||(attemptedServers[serverHostUrl]=!0,tryNext(s))}}var vfs=recallVfs()


if(vfs&&vfs.vfsid)return void auth.request(vfs.vfsid,{method:"GET",headers:{Accept:"application/json"
}},function(err,res){return err?(deleteOldVfs(),getVfsUrl(version,vfsServers,callback)):void callback(null,vfs.vfsid,vfs.url,vfs.region)

})
if(servers=shuffleServers(version,vfsServers),vfsServers.length&&!servers.length)return strictRegion?callback(fatalError("No VFS server(s) found for region "+strictRegion,"reload")):onProtocolChange(callback)


var latestServer=0,foundServer=!1,mainCallback=callback
callback=function(){if(!foundServer){foundServer=!0
var args=Array.prototype.slice.call(arguments)
return mainCallback.apply(this,args)}},startParallelSearches(PARALLEL_SEARCHES)}function getHostFromServerUrl(serverUrl){
var serverHostUrl=serverUrl.replace(/^(https:..[^.]+-\d+)(-\d+)(.*)/,"$1$3")
return serverHostUrl?serverHostUrl:serverUrl}function onProtocolChange(callback){return deleteOldVfs(),
metrics.increment("vfs.failed.protocol_mismatch",1,!0),callback(fatalError("Protocol change detected","reload"))

}function shuffleServers(version,servers){servers=servers.slice(),strictRegion&&(servers=servers.filter(function(s){
return s.region===strictRegion}))
var isBetaClient="beta"===region
return servers=servers.filter(function(s){var isBetaServer="beta"===s.region
return isBetaServer===isBetaClient}),servers=servers.filter(function(s){return ignoreProtocolVersion||void 0==s.version||s.version==version

}),servers.sort(function(a,b){return a.region==b.region?a.load<b.load?-1:1:a.region==region?-1:b.region==region?1:0

})}function rememberVfs(server,vfsid){var vfs={url:server.url,region:server.region,pid:options.pid,vfsid:server.url+"/"+options.pid+"/"+vfsid,
readonly:options.readonly},data=JSON.stringify(vfs),oldData=lastVfs||window.sessionStorage.getItem("vfsid")


return oldData&&oldData!==data&&deleteOldVfs(),lastVfs=data,vfs}function recallVfs(){var vfs
try{vfs=JSON.parse(lastVfs||window.sessionStorage.getItem("vfsid")||null),!lastVfs&&vfs&&(window.sessionStorage.removeItem("vfsid"),
lastVfs=JSON.stringify(vfs))}catch(e){}return vfs?vfs.pid!==options.pid||vfs.readonly!=options.readonly?(deleteOldVfs(),
null):vfs:null}function deleteOldVfs(){var vfs
try{vfs=JSON.parse(lastVfs||window.sessionStorage.getItem("vfsid"))}catch(e){}window.sessionStorage.removeItem("vfsid"),
lastVfs=null,vfs&&auth.request(vfs.vfsid,{method:"DELETE",headers:{Accept:"application/json"}},function(err){
err&&console.error(vfs.vfsid,"deleted",err)})}function fatalError(msg,action){var err=new Error(msg)
return err.fatal=!0,err.action=action||"reload",err}function saveToSessionStorage(){try{window.sessionStorage.setItem("vfsid",lastVfs)

}catch(e){}}var urlServers,lastVfs,Plugin=imports.Plugin,auth=imports.auth,http=imports.http,api=imports.api,errorHandler=imports.error_handler,metrics=imports.metrics,PARALLEL_SEARCHES=2,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter(),query=require("url").parse(document.location.href,!0).query


if(query.vfs&&(query.vfs.match(/^https:\/\/.*\/vfs$/)||alert("Bad VFS URL passed, expected: https://host/vfs"),
urlServers=[{url:query.vfs,region:"url"}]),query.vfs||query.region){var vfs=recallVfs()
vfs&&(query.vfs&&query.vfs!==vfs.url?deleteOldVfs():query.region&&query.region!==vfs.region&&deleteOldVfs())

}query.vfs&&(options.updateServers=!1)
var servers,strictRegion=query.region||options.strictRegion,ignoreProtocolVersion=options.ignoreProtocolVersion,region=strictRegion||options.region,pendingServerReqs=[]


initDefaultServers(),options.pid=options.pid||1,plugin.on("load",function(){window.addEventListener("unload",saveToSessionStorage)

}),plugin.on("unload",function(){window.removeEventListener("unload",saveToSessionStorage)}),plugin.freezePublicAPI({
get:getVfsEndpoint,isOnline:isOnline,clearCache:deleteOldVfs,isServerAlive:isServerAlive}),register(null,{
"vfs.endpoint":plugin})}return main.consumes=["Plugin","auth","http","api","error_handler","metrics"],
main.provides=["vfs.endpoint"],main})


define("engine.io",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e()
else if("function"==typeof define&&define.amd)define([],e)
else{var f
"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),
f.eio=e()}}(function(){var define
return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require


if(!u&&a)return a(o,!0)
if(i)return i(o,!0)
var f=new Error("Cannot find module '"+o+"'")
throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}}
t[o][0].call(l.exports,function(e){var n=t[o][1][e]
return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o])


return s}({1:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":2}],2:[function(_dereq_,module,exports){
module.exports=_dereq_("./socket"),module.exports.parser=_dereq_("engine.io-parser")},{"./socket":3,"engine.io-parser":20
}],3:[function(_dereq_,module,exports){(function(global){function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts)


opts=opts||{},uri&&"object"==typeof uri&&(opts=uri,uri=null),uri?(uri=parseuri(uri),opts.hostname=uri.host,
opts.secure="https"==uri.protocol||"wss"==uri.protocol,opts.port=uri.port,uri.query&&(opts.query=uri.query)):opts.host&&(opts.hostname=parseuri(opts.host).host),
this.secure=null!=opts.secure?opts.secure:global.location&&"https:"==location.protocol,opts.hostname&&!opts.port&&(opts.port=this.secure?"443":"80"),
this.agent=opts.agent||!1,this.hostname=opts.hostname||(global.location?location.hostname:"localhost"),
this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=opts.query||{},
"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==opts.upgrade,this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/",
this.forceJSONP=!!opts.forceJSONP,this.jsonp=!1!==opts.jsonp,this.forceBase64=!!opts.forceBase64,this.enablesXDR=!!opts.enablesXDR,
this.timestampParam=opts.timestampParam||"t",this.timestampRequests=opts.timestampRequests,this.transports=opts.transports||["polling","websocket"],
this.readyState="",this.writeBuffer=[],this.policyPort=opts.policyPort||843,this.rememberUpgrade=opts.rememberUpgrade||!1,
this.binaryType=null,this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades,this.perMessageDeflate=!1!==opts.perMessageDeflate&&(opts.perMessageDeflate||{}),
!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),
this.pfx=opts.pfx||null,this.key=opts.key||null,this.passphrase=opts.passphrase||null,this.cert=opts.cert||null,
this.ca=opts.ca||null,this.ciphers=opts.ciphers||null,this.rejectUnauthorized=void 0===opts.rejectUnauthorized||opts.rejectUnauthorized


var freeGlobal="object"==typeof global&&global
freeGlobal.global===freeGlobal&&opts.extraHeaders&&Object.keys(opts.extraHeaders).length>0&&(this.extraHeaders=opts.extraHeaders),
this.open()}function clone(obj){var o={}
for(var i in obj)obj.hasOwnProperty(i)&&(o[i]=obj[i])
return o}var transports=_dereq_("./transports"),Emitter=_dereq_("component-emitter"),debug=_dereq_("debug")("engine.io-client:socket"),index=_dereq_("indexof"),parser=_dereq_("engine.io-parser"),parseuri=_dereq_("parseuri"),parsejson=_dereq_("parsejson"),parseqs=_dereq_("parseqs")


module.exports=Socket,Socket.priorWebsocketSuccess=!1,Emitter(Socket.prototype),Socket.protocol=parser.protocol,
Socket.Socket=Socket,Socket.Transport=_dereq_("./transport"),Socket.transports=_dereq_("./transports"),
Socket.parser=_dereq_("engine.io-parser"),Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name)


var query=clone(this.query)
query.EIO=parser.protocol,query.transport=name,this.id&&(query.sid=this.id)
var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,
path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,
timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,
socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,
rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders
})
return transport},Socket.prototype.open=function(){var transport
if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)transport="websocket"
else{if(0===this.transports.length){var self=this
return void setTimeout(function(){self.emit("error","No transports available")},0)}transport=this.transports[0]

}this.readyState="opening"
try{transport=this.createTransport(transport)}catch(e){return this.transports.shift(),void this.open()

}transport.open(),this.setTransport(transport)},Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name)


var self=this
this.transport&&(debug("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),
this.transport=transport,transport.on("drain",function(){self.onDrain()}).on("packet",function(packet){
self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")

})},Socket.prototype.probe=function(name){function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary


failed=failed||upgradeLosesBinary}failed||(debug('probe transport "%s" opened',name),transport.send([{
type:"ping",data:"probe"}]),transport.once("packet",function(msg){if(!failed)if("pong"==msg.type&&"probe"==msg.data){
if(debug('probe transport "%s" pong',name),self.upgrading=!0,self.emit("upgrading",transport),!transport)return


Socket.priorWebsocketSuccess="websocket"==transport.name,debug('pausing current transport "%s"',self.transport.name),
self.transport.pause(function(){failed||"closed"!=self.readyState&&(debug("changing transport and sending upgrade packet"),
cleanup(),self.setTransport(transport),transport.send([{type:"upgrade"}]),self.emit("upgrade",transport),
transport=null,self.upgrading=!1,self.flush())})}else{debug('probe transport "%s" failed',name)
var err=new Error("probe error")
err.transport=transport.name,self.emit("upgradeError",err)}}))}function freezeTransport(){failed||(failed=!0,
cleanup(),transport.close(),transport=null)}function onerror(err){var error=new Error("probe error: "+err)


error.transport=transport.name,freezeTransport(),debug('probe transport "%s" failed because of error: %s',name,err),
self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){
onerror("socket closed")}function onupgrade(to){transport&&to.name!=transport.name&&(debug('"%s" works - aborting "%s"',to.name,transport.name),
freezeTransport())}function cleanup(){transport.removeListener("open",onTransportOpen),transport.removeListener("error",onerror),
transport.removeListener("close",onTransportClose),self.removeListener("close",onclose),self.removeListener("upgrading",onupgrade)

}debug('probing transport "%s"',name)
var transport=this.createTransport(name,{probe:1}),failed=!1,self=this
Socket.priorWebsocketSuccess=!1,transport.once("open",onTransportOpen),transport.once("error",onerror),
transport.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),
transport.open()},Socket.prototype.onOpen=function(){if(debug("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"==this.transport.name,
this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes")


for(var i=0,l=this.upgrades.length;i<l;i++)this.probe(this.upgrades[i])}},Socket.prototype.onPacket=function(packet){
if("opening"==this.readyState||"open"==this.readyState)switch(debug('socket receive: type "%s", data "%s"',packet.type,packet.data),
this.emit("packet",packet),this.emit("heartbeat"),packet.type){case"open":this.onHandshake(parsejson(packet.data))


break
case"pong":this.setPing(),this.emit("pong")
break
case"error":var err=new Error("server error")
err.code=packet.data,this.onError(err)
break
case"message":this.emit("data",packet.data),this.emit("message",packet.data)}else debug('packet received with socket readyState "%s"',this.readyState)

},Socket.prototype.onHandshake=function(data){this.emit("handshake",data),this.id=data.sid,this.transport.query.sid=data.sid,
this.upgrades=this.filterUpgrades(data.upgrades),this.pingInterval=data.pingInterval,this.pingTimeout=data.pingTimeout,
this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),
this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer)


var self=this
self.pingTimeoutTimer=setTimeout(function(){"closed"!=self.readyState&&self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)

},Socket.prototype.setPing=function(){var self=this
clearTimeout(self.pingIntervalTimer),self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout),
self.ping(),self.onHeartbeat(self.pingTimeout)},self.pingInterval)},Socket.prototype.ping=function(){
var self=this
this.sendPacket("ping",function(){self.emit("ping")})},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),
this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){
"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug("flushing %d packets in socket",this.writeBuffer.length),
this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},
Socket.prototype.write=Socket.prototype.send=function(msg,options,fn){return this.sendPacket("message",msg,options,fn),
this},Socket.prototype.sendPacket=function(type,data,options,fn){if("function"==typeof data&&(fn=data,
data=void 0),"function"==typeof options&&(fn=options,options=null),"closing"!=this.readyState&&"closed"!=this.readyState){
options=options||{},options.compress=!1!==options.compress
var packet={type:type,data:data,options:options}
this.emit("packetCreate",packet),this.writeBuffer.push(packet),fn&&this.once("flush",fn),this.flush()

}},Socket.prototype.close=function(){function close(){self.onClose("forced close"),debug("socket closing - telling transport to close"),
self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose),self.removeListener("upgradeError",cleanupAndClose),
close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose),self.once("upgradeError",cleanupAndClose)

}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing"
var self=this
this.writeBuffer.length?this.once("drain",function(){this.upgrading?waitForUpgrade():close()}):this.upgrading?waitForUpgrade():close()

}return this},Socket.prototype.onError=function(err){debug("socket error %j",err),Socket.priorWebsocketSuccess=!1,
this.emit("error",err),this.onClose("transport error",err)},Socket.prototype.onClose=function(reason,desc){
if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){debug('socket close with reason: "%s"',reason)


var self=this
clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),
this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",reason,desc),
self.writeBuffer=[],self.prevBufferLen=0}},Socket.prototype.filterUpgrades=function(upgrades){for(var filteredUpgrades=[],i=0,j=upgrades.length;i<j;i++)~index(this.transports,upgrades[i])&&filteredUpgrades.push(upgrades[i])


return filteredUpgrades}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{"./transport":4,"./transports":5,"component-emitter":16,debug:18,"engine.io-parser":20,indexof:24,
parsejson:27,parseqs:28,parseuri:29}],4:[function(_dereq_,module,exports){function Transport(opts){this.path=opts.path,
this.hostname=opts.hostname,this.port=opts.port,this.secure=opts.secure,this.query=opts.query,this.timestampParam=opts.timestampParam,
this.timestampRequests=opts.timestampRequests,this.readyState="",this.agent=opts.agent||!1,this.socket=opts.socket,
this.enablesXDR=opts.enablesXDR,this.pfx=opts.pfx,this.key=opts.key,this.passphrase=opts.passphrase,this.cert=opts.cert,
this.ca=opts.ca,this.ciphers=opts.ciphers,this.rejectUnauthorized=opts.rejectUnauthorized,this.extraHeaders=opts.extraHeaders

}var parser=_dereq_("engine.io-parser"),Emitter=_dereq_("component-emitter")
module.exports=Transport,Emitter(Transport.prototype),Transport.prototype.onError=function(msg,desc){
var err=new Error(msg)
return err.type="TransportError",err.description=desc,this.emit("error",err),this},Transport.prototype.open=function(){
return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},
Transport.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),
this.onClose()),this},Transport.prototype.send=function(packets){if("open"!=this.readyState)throw new Error("Transport not open")


this.write(packets)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")

},Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType)


this.onPacket(packet)},Transport.prototype.onPacket=function(packet){this.emit("packet",packet)},Transport.prototype.onClose=function(){
this.readyState="closed",this.emit("close")}},{"component-emitter":16,"engine.io-parser":20}],5:[function(_dereq_,module,exports){
(function(global){function polling(opts){var xhr,xd=!1,xs=!1,jsonp=!1!==opts.jsonp
if(global.location){var isSSL="https:"==location.protocol,port=location.port
port||(port=isSSL?443:80),xd=opts.hostname!=location.hostname||port!=opts.port,xs=opts.secure!=isSSL}
if(opts.xdomain=xd,opts.xscheme=xs,xhr=new XMLHttpRequest(opts),"open"in xhr&&!opts.forceJSONP)return new XHR(opts)


if(!jsonp)throw new Error("JSONP disabled")
return new JSONP(opts)}var XMLHttpRequest=_dereq_("xmlhttprequest-ssl"),XHR=_dereq_("./polling-xhr"),JSONP=_dereq_("./polling-jsonp"),websocket=_dereq_("./websocket")


exports.polling=polling,exports.websocket=websocket}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(_dereq_,module,exports){
(function(global){function empty(){}function JSONPPolling(opts){Polling.call(this,opts),this.query=this.query||{},
callbacks||(global.___eio||(global.___eio=[]),callbacks=global.___eio),this.index=callbacks.length
var self=this
callbacks.push(function(msg){self.onData(msg)}),this.query.j=this.index,global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){
self.script&&(self.script.onerror=empty)},!1)}var Polling=_dereq_("./polling"),inherit=_dereq_("component-inherit")


module.exports=JSONPPolling
var callbacks,rNewline=/\n/g,rEscapedNewline=/\\n/g
inherit(JSONPPolling,Polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){
this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),
this.form=null,this.iframe=null),Polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){
var self=this,script=document.createElement("script")
this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),script.async=!0,script.src=this.uri(),
script.onerror=function(e){self.onError("jsonp poll error",e)}
var insertAt=document.getElementsByTagName("script")[0]
insertAt?insertAt.parentNode.insertBefore(script,insertAt):(document.head||document.body).appendChild(script),
this.script=script
var isUAgecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)
isUAgecko&&setTimeout(function(){var iframe=document.createElement("iframe")
document.body.appendChild(iframe),document.body.removeChild(iframe)},100)},JSONPPolling.prototype.doWrite=function(data,fn){
function complete(){initIframe(),fn()}function initIframe(){if(self.iframe)try{self.form.removeChild(self.iframe)

}catch(e){self.onError("jsonp polling iframe removal error",e)}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">'


iframe=document.createElement(html)}catch(e){iframe=document.createElement("iframe"),iframe.name=self.iframeId,
iframe.src="javascript:0"}iframe.id=self.iframeId,self.form.appendChild(iframe),self.iframe=iframe}var self=this


if(!this.form){var iframe,form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="eio_iframe_"+this.index


form.className="socketio",form.style.position="absolute",form.style.top="-1000px",form.style.left="-1000px",
form.target=id,form.method="POST",form.setAttribute("accept-charset","utf-8"),area.name="d",form.appendChild(area),
document.body.appendChild(form),this.form=form,this.area=area}this.form.action=this.uri(),initIframe(),
data=data.replace(rEscapedNewline,"\\\n"),this.area.value=data.replace(rNewline,"\\n")
try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==self.iframe.readyState&&complete()

}:this.iframe.onload=complete}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{"./polling":8,"component-inherit":17}],7:[function(_dereq_,module,exports){(function(global){function empty(){}
function XHR(opts){if(Polling.call(this,opts),global.location){var isSSL="https:"==location.protocol,port=location.port


port||(port=isSSL?443:80),this.xd=opts.hostname!=global.location.hostname||port!=opts.port,this.xs=opts.secure!=isSSL

}else this.extraHeaders=opts.extraHeaders}function Request(opts){this.method=opts.method||"GET",this.uri=opts.uri,
this.xd=!!opts.xd,this.xs=!!opts.xs,this.async=!1!==opts.async,this.data=void 0!=opts.data?opts.data:null,
this.agent=opts.agent,this.isBinary=opts.isBinary,this.supportsBinary=opts.supportsBinary,this.enablesXDR=opts.enablesXDR,
this.pfx=opts.pfx,this.key=opts.key,this.passphrase=opts.passphrase,this.cert=opts.cert,this.ca=opts.ca,
this.ciphers=opts.ciphers,this.rejectUnauthorized=opts.rejectUnauthorized,this.extraHeaders=opts.extraHeaders,
this.create()}function unloadHandler(){for(var i in Request.requests)Request.requests.hasOwnProperty(i)&&Request.requests[i].abort()

}var XMLHttpRequest=_dereq_("xmlhttprequest-ssl"),Polling=_dereq_("./polling"),Emitter=_dereq_("component-emitter"),inherit=_dereq_("component-inherit"),debug=_dereq_("debug")("engine.io-client:polling-xhr")


module.exports=XHR,module.exports.Request=Request,inherit(XHR,Polling),XHR.prototype.supportsBinary=!0,
XHR.prototype.request=function(opts){return opts=opts||{},opts.uri=this.uri(),opts.xd=this.xd,opts.xs=this.xs,
opts.agent=this.agent||!1,opts.supportsBinary=this.supportsBinary,opts.enablesXDR=this.enablesXDR,opts.pfx=this.pfx,
opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,
opts.rejectUnauthorized=this.rejectUnauthorized,opts.extraHeaders=this.extraHeaders,new Request(opts)

},XHR.prototype.doWrite=function(data,fn){var isBinary="string"!=typeof data&&void 0!==data,req=this.request({
method:"POST",data:data,isBinary:isBinary}),self=this
req.on("success",fn),req.on("error",function(err){self.onError("xhr post error",err)}),this.sendXhr=req

},XHR.prototype.doPoll=function(){debug("xhr poll")
var req=this.request(),self=this
req.on("data",function(data){self.onData(data)}),req.on("error",function(err){self.onError("xhr poll error",err)

}),this.pollXhr=req},Emitter(Request.prototype),Request.prototype.create=function(){var opts={agent:this.agent,
xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR}
opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,
opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized
var xhr=this.xhr=new XMLHttpRequest(opts),self=this
try{debug("xhr open %s: %s",this.method,this.uri),xhr.open(this.method,this.uri,this.async)
try{if(this.extraHeaders){xhr.setDisableHeaderCheck(!0)
for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&xhr.setRequestHeader(i,this.extraHeaders[i])

}}catch(e){}if(this.supportsBinary&&(xhr.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?xhr.setRequestHeader("Content-type","application/octet-stream"):xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")

}catch(e){}"withCredentials"in xhr&&(xhr.__withCredentials=!0),this.hasXDR()?(xhr.onload=function(){self.onLoad()

},xhr.onerror=function(){self.onError(xhr.responseText)}):xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status||1223==xhr.status?self.onLoad():setTimeout(function(){
self.onError(xhr.status)},0))},debug("xhr data %s",this.data),xhr.send(this.data)}catch(e){return void setTimeout(function(){
self.onError(e)},0)}global.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)

},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(data){
this.emit("data",data),this.onSuccess()},Request.prototype.onError=function(err){this.emit("error",err),
this.cleanup(!0)},Request.prototype.cleanup=function(fromError){if("undefined"!=typeof this.xhr&&null!==this.xhr){
if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,fromError)try{
this.xhr.abort()}catch(e){}global.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){
var data
try{var contentType
try{contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===contentType)data=this.xhr.response
else if(this.supportsBinary)try{data=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))

}catch(e){for(var ui8Arr=new Uint8Array(this.xhr.response),dataArray=[],idx=0,length=ui8Arr.length;idx<length;idx++)dataArray.push(ui8Arr[idx])


data=String.fromCharCode.apply(null,dataArray)}else data=this.xhr.responseText}catch(e){this.onError(e)

}null!=data&&this.onData(data)},Request.prototype.hasXDR=function(){return"undefined"!=typeof global.XDomainRequest&&!this.xs&&this.enablesXDR

},Request.prototype.abort=function(){this.cleanup()},global.document&&(Request.requestsCount=0,Request.requests={},
global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler,!1))

}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{"./polling":8,"component-emitter":16,"component-inherit":17,debug:18,"xmlhttprequest-ssl":10}],8:[function(_dereq_,module,exports){
function Polling(opts){var forceBase64=opts&&opts.forceBase64
hasXHR2&&!forceBase64||(this.supportsBinary=!1),Transport.call(this,opts)}var Transport=_dereq_("../transport"),parseqs=_dereq_("parseqs"),parser=_dereq_("engine.io-parser"),inherit=_dereq_("component-inherit"),yeast=_dereq_("yeast"),debug=_dereq_("debug")("engine.io-client:polling")


module.exports=Polling
var hasXHR2=function(){var XMLHttpRequest=_dereq_("xmlhttprequest-ssl"),xhr=new XMLHttpRequest({xdomain:!1
})
return null!=xhr.responseType}()
inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()

},Polling.prototype.pause=function(onPause){function pause(){debug("paused"),self.readyState="paused",
onPause()}var self=this
if(this.readyState="pausing",this.polling||!this.writable){var total=0
this.polling&&(debug("we are currently polling - waiting to pause"),total++,this.once("pollComplete",function(){
debug("pre-pause polling complete"),--total||pause()})),this.writable||(debug("we are currently writing - waiting to pause"),
total++,this.once("drain",function(){debug("pre-pause writing complete"),--total||pause()}))}else pause()

},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},
Polling.prototype.onData=function(data){var self=this
debug("polling got data %s",data)
var callback=function(packet,index,total){return"opening"==self.readyState&&self.onOpen(),"close"==packet.type?(self.onClose(),
!1):void self.onPacket(packet)}
parser.decodePayload(data,this.socket.binaryType,callback),"closed"!=this.readyState&&(this.polling=!1,
this.emit("pollComplete"),"open"==this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))

},Polling.prototype.doClose=function(){function close(){debug("writing close packet"),self.write([{type:"close"
}])}var self=this
"open"==this.readyState?(debug("transport open - closing"),close()):(debug("transport not open - deferring close"),
this.once("open",close))},Polling.prototype.write=function(packets){var self=this
this.writable=!1
var callbackfn=function(){self.writable=!0,self.emit("drain")},self=this
parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})},Polling.prototype.uri=function(){
var query=this.query||{},schema=this.secure?"https":"http",port=""
!1!==this.timestampRequests&&(query[this.timestampParam]=yeast()),this.supportsBinary||query.sid||(query.b64=1),
query=parseqs.encode(query),this.port&&("https"==schema&&443!=this.port||"http"==schema&&80!=this.port)&&(port=":"+this.port),
query.length&&(query="?"+query)
var ipv6=this.hostname.indexOf(":")!==-1
return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query}},{"../transport":4,
"component-inherit":17,debug:18,"engine.io-parser":20,parseqs:28,"xmlhttprequest-ssl":10,yeast:31}],9:[function(_dereq_,module,exports){
(function(global){function WS(opts){var forceBase64=opts&&opts.forceBase64
forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=opts.perMessageDeflate,Transport.call(this,opts)

}var Transport=_dereq_("../transport"),parser=_dereq_("engine.io-parser"),parseqs=_dereq_("parseqs"),inherit=_dereq_("component-inherit"),yeast=_dereq_("yeast"),debug=_dereq_("debug")("engine.io-client:websocket"),BrowserWebSocket=global.WebSocket||global.MozWebSocket,WebSocket=BrowserWebSocket


if(!WebSocket&&"undefined"==typeof window)try{WebSocket=_dereq_("ws")}catch(e){}module.exports=WS,inherit(WS,Transport),
WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){
var uri=this.uri(),protocols=void 0,opts={agent:this.agent,perMessageDeflate:this.perMessageDeflate}
opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,
opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(opts.headers=this.extraHeaders),
this.ws=BrowserWebSocket?new WebSocket(uri):new WebSocket(uri,protocols,opts),void 0===this.ws.binaryType&&(this.supportsBinary=!1),
this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",
this.addEventListeners()}},WS.prototype.addEventListeners=function(){var self=this
this.ws.onopen=function(){self.onOpen()},this.ws.onclose=function(){self.onClose()},this.ws.onmessage=function(ev){
self.onData(ev.data)},this.ws.onerror=function(e){self.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(WS.prototype.onData=function(data){
var self=this
setTimeout(function(){Transport.prototype.onData.call(self,data)},0)}),WS.prototype.write=function(packets){
function done(){self.emit("flush"),setTimeout(function(){self.writable=!0,self.emit("drain")},0)}var self=this


this.writable=!1
for(var total=packets.length,i=0,l=total;i<l;i++)!function(packet){parser.encodePacket(packet,self.supportsBinary,function(data){
if(!BrowserWebSocket){var opts={}
if(packet.options&&(opts.compress=packet.options.compress),self.perMessageDeflate){var len="string"==typeof data?global.Buffer.byteLength(data):data.length


len<self.perMessageDeflate.threshold&&(opts.compress=!1)}}try{BrowserWebSocket?self.ws.send(data):self.ws.send(data,opts)

}catch(e){debug("websocket closed before onclose event")}--total||done()})}(packets[i])},WS.prototype.onClose=function(){
Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()

},WS.prototype.uri=function(){var query=this.query||{},schema=this.secure?"wss":"ws",port=""
this.port&&("wss"==schema&&443!=this.port||"ws"==schema&&80!=this.port)&&(port=":"+this.port),this.timestampRequests&&(query[this.timestampParam]=yeast()),
this.supportsBinary||(query.b64=1),query=parseqs.encode(query),query.length&&(query="?"+query)
var ipv6=this.hostname.indexOf(":")!==-1
return schema+"://"+(ipv6?"["+this.hostname+"]":this.hostname)+port+this.path+query},WS.prototype.check=function(){
return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{"../transport":4,"component-inherit":17,debug:18,"engine.io-parser":20,parseqs:28,ws:15,yeast:31}],
10:[function(_dereq_,module,exports){var hasCORS=_dereq_("has-cors")
module.exports=function(opts){var xdomain=opts.xdomain,xscheme=opts.xscheme,enablesXDR=opts.enablesXDR


try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS))return new XMLHttpRequest}catch(e){}try{
if("undefined"!=typeof XDomainRequest&&!xscheme&&enablesXDR)return new XDomainRequest}catch(e){}if(!xdomain)try{
return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":23}],11:[function(_dereq_,module,exports){
function after(count,callback,err_cb){function proxy(err,result){if(proxy.count<=0)throw new Error("after called too many times")

;--proxy.count,err?(bail=!0,callback(err),callback=err_cb):0!==proxy.count||bail||callback(null,result)

}var bail=!1
return err_cb=err_cb||noop,proxy.count=count,0===count?callback():proxy}function noop(){}module.exports=after

},{}],12:[function(_dereq_,module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength


if(start=start||0,end=end||bytes,arraybuffer.slice)return arraybuffer.slice(start,end)
if(start<0&&(start+=bytes),end<0&&(end+=bytes),end>bytes&&(end=bytes),start>=bytes||start>=end||0===bytes)return new ArrayBuffer(0)


for(var abv=new Uint8Array(arraybuffer),result=new Uint8Array(end-start),i=start,ii=0;i<end;i++,ii++)result[ii]=abv[i]


return result.buffer}},{}],13:[function(_dereq_,module,exports){!function(chars){"use strict"
exports.encode=function(arraybuffer){var i,bytes=new Uint8Array(arraybuffer),len=bytes.length,base64=""


for(i=0;i<len;i+=3)base64+=chars[bytes[i]>>2],base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4],base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6],
base64+=chars[63&bytes[i+2]]
return len%3===2?base64=base64.substring(0,base64.length-1)+"=":len%3===1&&(base64=base64.substring(0,base64.length-2)+"=="),
base64},exports.decode=function(base64){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*base64.length,len=base64.length,p=0


"="===base64[base64.length-1]&&(bufferLength--,"="===base64[base64.length-2]&&bufferLength--)
var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer)
for(i=0;i<len;i+=4)encoded1=chars.indexOf(base64[i]),encoded2=chars.indexOf(base64[i+1]),encoded3=chars.indexOf(base64[i+2]),
encoded4=chars.indexOf(base64[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,
bytes[p++]=(3&encoded3)<<6|63&encoded4
return arraybuffer}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],14:[function(_dereq_,module,exports){
(function(global){function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i]
if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer
if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength)
copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength)),buf=copy.buffer}ary[i]=buf}}}function BlobBuilderConstructor(ary,options){
options=options||{}
var bb=new BlobBuilder
mapArrayBufferViews(ary)
for(var i=0;i<ary.length;i++)bb.append(ary[i])
return options.type?bb.getBlob(options.type):bb.getBlob()}function BlobConstructor(ary,options){return mapArrayBufferViews(ary),
new Blob(ary,options||{})}var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){
try{var a=new Blob(["hi"])
return 2===a.size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{var b=new Blob([new Uint8Array([1,2])])


return 2===b.size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob


module.exports=function(){return blobSupported?blobSupportsArrayBufferView?global.Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0

}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{}],15:[function(_dereq_,module,exports){},{}],16:[function(_dereq_,module,exports){function Emitter(obj){
if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key]


return obj}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){
return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),
this},Emitter.prototype.once=function(event,fn){function on(){self.off(event,on),fn.apply(this,arguments)

}var self=this
return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){
if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this
var callbacks=this._callbacks[event]
if(!callbacks)return this
if(1==arguments.length)return delete this._callbacks[event],this
for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1)
break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{}
var args=[].slice.call(arguments,1),callbacks=this._callbacks[event]
if(callbacks){callbacks=callbacks.slice(0)
for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){
return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){
return!!this.listeners(event).length}},{}],17:[function(_dereq_,module,exports){module.exports=function(a,b){
var fn=function(){}
fn.prototype=b.prototype,a.prototype=new fn,a.prototype.constructor=a}},{}],18:[function(_dereq_,module,exports){
function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31

}function formatArgs(){var args=arguments,useColors=this.useColors
if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),
!useColors)return args
var c="color: "+this.color
args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1))
var index=0,lastC=0
return args[0].replace(/%[a-z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))

}),args.splice(lastC,0,c),args}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)

}function save(namespaces){try{null==namespaces?exports.storage.removeItem("debug"):exports.storage.debug=namespaces

}catch(e){}}function load(){var r
try{r=exports.storage.debug}catch(e){}return r}function localstorage(){try{return window.localStorage

}catch(e){}}exports=module.exports=_dereq_("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,
exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage(),
exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){
return JSON.stringify(v)},exports.enable(load())},{"./debug":19}],19:[function(_dereq_,module,exports){
function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(namespace){
function disabled(){}function enabled(){var self=enabled,curr=+new Date,ms=curr-(prevTime||curr)
self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,null==self.useColors&&(self.useColors=exports.useColors()),
null==self.color&&self.useColors&&(self.color=selectColor())
var args=Array.prototype.slice.call(arguments)
args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&(args=["%o"].concat(args))
var index=0
args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if("%%"===match)return match
index++
var formatter=exports.formatters[format]
if("function"==typeof formatter){var val=args[index]
match=formatter.call(self,val),args.splice(index,1),index--}return match}),"function"==typeof exports.formatArgs&&(args=exports.formatArgs.apply(self,args))


var logFn=enabled.log||exports.log||console.log.bind(console)
logFn.apply(self,args)}disabled.enabled=!1,enabled.enabled=!0
var fn=exports.enabled(namespace)?enabled:disabled
return fn.namespace=namespace,fn}function enable(namespaces){exports.save(namespaces)
for(var split=(namespaces||"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&(namespaces=split[i].replace(/\*/g,".*?"),
"-"===namespaces[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))

}function disable(){exports.enable("")}function enabled(name){var i,len
for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1
for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0
return!1}function coerce(val){return val instanceof Error?val.stack||val.message:val}exports=module.exports=debug,
exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=_dereq_("ms"),
exports.names=[],exports.skips=[],exports.formatters={}
var prevTime,prevColor=0},{ms:26}],20:[function(_dereq_,module,exports){(function(global){function encodeBase64Object(packet,callback){
var message="b"+exports.packets[packet.type]+packet.data.data
return callback(message)}function encodeArrayBuffer(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback)


var data=packet.data,contentArray=new Uint8Array(data),resultBuffer=new Uint8Array(1+data.byteLength)


resultBuffer[0]=packets[packet.type]
for(var i=0;i<contentArray.length;i++)resultBuffer[i+1]=contentArray[i]
return callback(resultBuffer.buffer)}function encodeBlobAsArrayBuffer(packet,supportsBinary,callback){
if(!supportsBinary)return exports.encodeBase64Packet(packet,callback)
var fr=new FileReader
return fr.onload=function(){packet.data=fr.result,exports.encodePacket(packet,supportsBinary,!0,callback)

},fr.readAsArrayBuffer(packet.data)}function encodeBlob(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback)


if(dontSendBlobs)return encodeBlobAsArrayBuffer(packet,supportsBinary,callback)
var length=new Uint8Array(1)
length[0]=packets[packet.type]
var blob=new Blob([length.buffer,packet.data])
return callback(blob)}function map(ary,each,done){for(var result=new Array(ary.length),next=after(ary.length,done),eachWithIndex=function(i,el,cb){
each(el,function(error,msg){result[i]=msg,cb(error,result)})},i=0;i<ary.length;i++)eachWithIndex(i,ary[i],next)

}var keys=_dereq_("./keys"),hasBinary=_dereq_("has-binary"),sliceBuffer=_dereq_("arraybuffer.slice"),base64encoder=_dereq_("base64-arraybuffer"),after=_dereq_("after"),utf8=_dereq_("utf8"),isAndroid=navigator.userAgent.match(/Android/i),isPhantomJS=/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS


exports.protocol=3
var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=keys(packets),err={
type:"error",data:"parser error"},Blob=_dereq_("blob")
exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){"function"==typeof supportsBinary&&(callback=supportsBinary,
supportsBinary=!1),"function"==typeof utf8encode&&(callback=utf8encode,utf8encode=null)
var data=void 0===packet.data?void 0:packet.data.buffer||packet.data
if(global.ArrayBuffer&&data instanceof ArrayBuffer)return encodeArrayBuffer(packet,supportsBinary,callback)


if(Blob&&data instanceof global.Blob)return encodeBlob(packet,supportsBinary,callback)
if(data&&data.base64)return encodeBase64Object(packet,callback)
var encoded=packets[packet.type]
return void 0!==packet.data&&(encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)),
callback(""+encoded)},exports.encodeBase64Packet=function(packet,callback){var message="b"+exports.packets[packet.type]


if(Blob&&packet.data instanceof global.Blob){var fr=new FileReader
return fr.onload=function(){var b64=fr.result.split(",")[1]
callback(message+b64)},fr.readAsDataURL(packet.data)}var b64data
try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){for(var typed=new Uint8Array(packet.data),basic=new Array(typed.length),i=0;i<typed.length;i++)basic[i]=typed[i]


b64data=String.fromCharCode.apply(null,basic)}return message+=global.btoa(b64data),callback(message)},
exports.decodePacket=function(data,binaryType,utf8decode){if("string"==typeof data||void 0===data){if("b"==data.charAt(0))return exports.decodeBase64Packet(data.substr(1),binaryType)


if(utf8decode)try{data=utf8.decode(data)}catch(e){return err}var type=data.charAt(0)
return Number(type)==type&&packetslist[type]?data.length>1?{type:packetslist[type],data:data.substring(1)
}:{type:packetslist[type]}:err}var asArray=new Uint8Array(data),type=asArray[0],rest=sliceBuffer(data,1)


return Blob&&"blob"===binaryType&&(rest=new Blob([rest])),{type:packetslist[type],data:rest}},exports.decodeBase64Packet=function(msg,binaryType){
var type=packetslist[msg.charAt(0)]
if(!global.ArrayBuffer)return{type:type,data:{base64:!0,data:msg.substr(1)}}
var data=base64encoder.decode(msg.substr(1))
return"blob"===binaryType&&Blob&&(data=new Blob([data])),{type:type,data:data}},exports.encodePayload=function(packets,supportsBinary,callback){
function setLengthHeader(message){return message.length+":"+message}function encodeOne(packet,doneCallback){
exports.encodePacket(packet,!!isBinary&&supportsBinary,!0,function(message){doneCallback(null,setLengthHeader(message))

})}"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=null)
var isBinary=hasBinary(packets)
return supportsBinary&&isBinary?Blob&&!dontSendBlobs?exports.encodePayloadAsBlob(packets,callback):exports.encodePayloadAsArrayBuffer(packets,callback):packets.length?void map(packets,encodeOne,function(err,results){
return callback(results.join(""))}):callback("0:")},exports.decodePayload=function(data,binaryType,callback){
if("string"!=typeof data)return exports.decodePayloadAsBinary(data,binaryType,callback)
"function"==typeof binaryType&&(callback=binaryType,binaryType=null)
var packet
if(""==data)return callback(err,0,1)
for(var n,msg,length="",i=0,l=data.length;i<l;i++){var chr=data.charAt(i)
if(":"!=chr)length+=chr
else{if(""==length||length!=(n=Number(length)))return callback(err,0,1)
if(msg=data.substr(i+1,n),length!=msg.length)return callback(err,0,1)
if(msg.length){if(packet=exports.decodePacket(msg,binaryType,!0),err.type==packet.type&&err.data==packet.data)return callback(err,0,1)


var ret=callback(packet,i+n,l)
if(!1===ret)return}i+=n,length=""}}return""!=length?callback(err,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(packets,callback){
function encodeOne(packet,doneCallback){exports.encodePacket(packet,!0,!0,function(data){return doneCallback(null,data)

})}return packets.length?void map(packets,encodeOne,function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){
var len
return len="string"==typeof p?p.length:p.byteLength,acc+len.toString().length+len+2},0),resultArray=new Uint8Array(totalLength),bufferIndex=0


return encodedPackets.forEach(function(p){var isString="string"==typeof p,ab=p
if(isString){for(var view=new Uint8Array(p.length),i=0;i<p.length;i++)view[i]=p.charCodeAt(i)
ab=view.buffer}isString?resultArray[bufferIndex++]=0:resultArray[bufferIndex++]=1
for(var lenStr=ab.byteLength.toString(),i=0;i<lenStr.length;i++)resultArray[bufferIndex++]=parseInt(lenStr[i])


resultArray[bufferIndex++]=255
for(var view=new Uint8Array(ab),i=0;i<view.length;i++)resultArray[bufferIndex++]=view[i]}),callback(resultArray.buffer)

}):callback(new ArrayBuffer(0))},exports.encodePayloadAsBlob=function(packets,callback){function encodeOne(packet,doneCallback){
exports.encodePacket(packet,!0,!0,function(encoded){var binaryIdentifier=new Uint8Array(1)
if(binaryIdentifier[0]=1,"string"==typeof encoded){for(var view=new Uint8Array(encoded.length),i=0;i<encoded.length;i++)view[i]=encoded.charCodeAt(i)


encoded=view.buffer,binaryIdentifier[0]=0}for(var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size,lenStr=len.toString(),lengthAry=new Uint8Array(lenStr.length+1),i=0;i<lenStr.length;i++)lengthAry[i]=parseInt(lenStr[i])


if(lengthAry[lenStr.length]=255,Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded])


doneCallback(null,blob)}})}map(packets,encodeOne,function(err,results){return callback(new Blob(results))

})},exports.decodePayloadAsBinary=function(data,binaryType,callback){"function"==typeof binaryType&&(callback=binaryType,
binaryType=null)
for(var bufferTail=data,buffers=[],numberTooLong=!1;bufferTail.byteLength>0;){for(var tailArray=new Uint8Array(bufferTail),isString=0===tailArray[0],msgLength="",i=1;255!=tailArray[i];i++){
if(msgLength.length>310){numberTooLong=!0
break}msgLength+=tailArray[i]}if(numberTooLong)return callback(err,0,1)
bufferTail=sliceBuffer(bufferTail,2+msgLength.length),msgLength=parseInt(msgLength)
var msg=sliceBuffer(bufferTail,0,msgLength)
if(isString)try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg)


msg=""
for(var i=0;i<typed.length;i++)msg+=String.fromCharCode(typed[i])}buffers.push(msg),bufferTail=sliceBuffer(bufferTail,msgLength)

}var total=buffers.length
buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,!0),i,total)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{"./keys":21,after:11,"arraybuffer.slice":12,"base64-arraybuffer":13,blob:14,"has-binary":22,utf8:30
}],21:[function(_dereq_,module,exports){module.exports=Object.keys||function(obj){var arr=[],has=Object.prototype.hasOwnProperty


for(var i in obj)has.call(obj,i)&&arr.push(i)
return arr}},{}],22:[function(_dereq_,module,exports){(function(global){function hasBinary(data){function _hasBinary(obj){
if(!obj)return!1
if(global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File)return!0


if(isArray(obj)){for(var i=0;i<obj.length;i++)if(_hasBinary(obj[i]))return!0}else if(obj&&"object"==typeof obj){
obj.toJSON&&(obj=obj.toJSON())
for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key]))return!0}return!1

}return _hasBinary(data)}var isArray=_dereq_("isarray")
module.exports=hasBinary}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{isarray:25}],23:[function(_dereq_,module,exports){try{module.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest

}catch(err){module.exports=!1}},{}],24:[function(_dereq_,module,exports){var indexOf=[].indexOf
module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj)
for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i
return-1}},{}],25:[function(_dereq_,module,exports){module.exports=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)

}},{}],26:[function(_dereq_,module,exports){function parse(str){if(str=""+str,!(str.length>1e4)){var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str)


if(match){var n=parseFloat(match[1]),type=(match[2]||"ms").toLowerCase()
switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y
case"days":case"day":case"d":return n*d
case"hours":case"hour":case"hrs":case"hr":case"h":return n*h
case"minutes":case"minute":case"mins":case"min":case"m":return n*m
case"seconds":case"second":case"secs":case"sec":case"s":return n*s
case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function short(ms){return ms>=d?Math.round(ms/d)+"d":ms>=h?Math.round(ms/h)+"h":ms>=m?Math.round(ms/m)+"m":ms>=s?Math.round(ms/s)+"s":ms+"ms"

}function long(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"

}function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"

}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d
module.exports=function(val,options){return options=options||{},"string"==typeof val?parse(val):options["long"]?long(val):short(val)

}},{}],27:[function(_dereq_,module,exports){(function(global){var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/


module.exports=function(data){return"string"==typeof data&&data?(data=data.replace(rtrimLeft,"").replace(rtrimRight,""),
global.JSON&&JSON.parse?JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void 0):null

}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{}],28:[function(_dereq_,module,exports){exports.encode=function(obj){var str=""
for(var i in obj)obj.hasOwnProperty(i)&&(str.length&&(str+="&"),str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i]))


return str},exports.decode=function(qs){for(var qry={},pairs=qs.split("&"),i=0,l=pairs.length;i<l;i++){
var pair=pairs[i].split("=")
qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},{}],29:[function(_dereq_,module,exports){
var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"]


module.exports=function(str){var src=str,b=str.indexOf("["),e=str.indexOf("]")
b!=-1&&e!=-1&&(str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length))


for(var m=re.exec(str||""),uri={},i=14;i--;)uri[parts[i]]=m[i]||""
return b!=-1&&e!=-1&&(uri.source=src,uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":"),
uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":"),uri.ipv6uri=!0),uri}},{}],
30:[function(_dereq_,module,exports){(function(global){!function(root){function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)value=string.charCodeAt(counter++),
value>=55296&&value<=56319&&counter<length?(extra=string.charCodeAt(counter++),56320==(64512&extra)?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),
counter--)):output.push(value)
return output}function ucs2encode(array){for(var value,length=array.length,index=-1,output="";++index<length;)value=array[index],
value>65535&&(value-=65536,output+=stringFromCharCode(value>>>10&1023|55296),value=56320|1023&value),
output+=stringFromCharCode(value)
return output}function checkScalarValue(codePoint){if(codePoint>=55296&&codePoint<=57343)throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value")

}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){
if(0==(4294967168&codePoint))return stringFromCharCode(codePoint)
var symbol=""
return 0==(4294965248&codePoint)?symbol=stringFromCharCode(codePoint>>6&31|192):0==(4294901760&codePoint)?(checkScalarValue(codePoint),
symbol=stringFromCharCode(codePoint>>12&15|224),symbol+=createByte(codePoint,6)):0==(4292870144&codePoint)&&(symbol=stringFromCharCode(codePoint>>18&7|240),
symbol+=createByte(codePoint,12),symbol+=createByte(codePoint,6)),symbol+=stringFromCharCode(63&codePoint|128)

}function utf8encode(string){for(var codePoint,codePoints=ucs2decode(string),length=codePoints.length,index=-1,byteString="";++index<length;)codePoint=codePoints[index],
byteString+=encodeCodePoint(codePoint)
return byteString}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index")


var continuationByte=255&byteArray[byteIndex]
if(byteIndex++,128==(192&continuationByte))return 63&continuationByte
throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1,byte2,byte3,byte4,codePoint


if(byteIndex>byteCount)throw Error("Invalid byte index")
if(byteIndex==byteCount)return!1
if(byte1=255&byteArray[byteIndex],byteIndex++,0==(128&byte1))return byte1
if(192==(224&byte1)){var byte2=readContinuationByte()
if(codePoint=(31&byte1)<<6|byte2,codePoint>=128)return codePoint
throw Error("Invalid continuation byte")}if(224==(240&byte1)){if(byte2=readContinuationByte(),byte3=readContinuationByte(),
codePoint=(15&byte1)<<12|byte2<<6|byte3,codePoint>=2048)return checkScalarValue(codePoint),codePoint
throw Error("Invalid continuation byte")}if(240==(248&byte1)&&(byte2=readContinuationByte(),byte3=readContinuationByte(),
byte4=readContinuationByte(),codePoint=(15&byte1)<<18|byte2<<12|byte3<<6|byte4,codePoint>=65536&&codePoint<=1114111))return codePoint


throw Error("Invalid UTF-8 detected")}function utf8decode(byteString){byteArray=ucs2decode(byteString),
byteCount=byteArray.length,byteIndex=0
for(var tmp,codePoints=[];(tmp=decodeSymbol())!==!1;)codePoints.push(tmp)
return ucs2encode(codePoints)}var freeExports="object"==typeof exports&&exports,freeModule="object"==typeof module&&module&&module.exports==freeExports&&module,freeGlobal="object"==typeof global&&global


freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal)
var byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode,utf8={version:"2.0.0",encode:utf8encode,
decode:utf8decode}
if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return utf8})
else if(freeExports&&!freeExports.nodeType)if(freeModule)freeModule.exports=utf8
else{var object={},hasOwnProperty=object.hasOwnProperty
for(var key in utf8)hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key])}else root.utf8=utf8}(this)

}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{})

},{}],31:[function(_dereq_,module,exports){"use strict"
function encode(num){var encoded=""
do encoded=alphabet[num%length]+encoded,num=Math.floor(num/length)
while(num>0)
return encoded}function decode(str){var decoded=0
for(i=0;i<str.length;i++)decoded=decoded*length+map[str.charAt(i)]
return decoded}function yeast(){var now=encode(+new Date)
return now!==prev?(seed=0,prev=now):now+"."+encode(seed++)}for(var prev,alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0;i<length;i++)map[alphabet[i]]=i


yeast.encode=encode,yeast.decode=decode,module.exports=yeast},{}]},{},[1])(1)})})


define("msgpack-js",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,("function"==typeof define?function(m){define("msgpack-js",m)

}:"object"==typeof exports?function(m){module.exports=m()}:function(m){this.msgpack=m()})(function(){
"use strict"
function inspect(buffer){if(void 0===buffer)return"undefined"
var view,type
if(buffer instanceof ArrayBuffer?(type="ArrayBuffer",view=new DataView(buffer)):buffer instanceof DataView&&(type="DataView",
view=buffer),!view)return JSON.stringify(buffer)
for(var bytes=[],i=0;i<buffer.byteLength;i++){if(i>20){bytes.push("...")
break}var byte=view.getUint8(i).toString(16)
1===byte.length&&(byte="0"+byte),bytes.push(byte)}return"<"+type+" "+bytes.join(" ")+">"}function utf8Write(view,offset,string){
for(var i=(view.byteLength,0),l=string.length;i<l;i++){var codePoint=string.charCodeAt(i)
if(codePoint<128)view.setUint8(offset++,codePoint>>>0&127|0)
else if(codePoint<2048)view.setUint8(offset++,codePoint>>>6&31|192),view.setUint8(offset++,codePoint>>>0&63|128)
else if(codePoint<65536)view.setUint8(offset++,codePoint>>>12&15|224),view.setUint8(offset++,codePoint>>>6&63|128),
view.setUint8(offset++,codePoint>>>0&63|128)
else{if(!(codePoint<1114112))throw new Error("bad codepoint "+codePoint)
view.setUint8(offset++,codePoint>>>18&7|240),view.setUint8(offset++,codePoint>>>12&63|128),view.setUint8(offset++,codePoint>>>6&63|128),
view.setUint8(offset++,codePoint>>>0&63|128)}}}function utf8Read(view,offset,length){for(var string="",i=offset,end=offset+length;i<end;i++){
var byte=view.getUint8(i)
if(0!==(128&byte))if(192!==(224&byte))if(224!==(240&byte)){if(240!==(248&byte))throw new Error("Invalid byte "+byte.toString(16))


string+=String.fromCharCode((7&byte)<<18|(63&view.getUint8(++i))<<12|(63&view.getUint8(++i))<<6|(63&view.getUint8(++i))<<0)

}else string+=String.fromCharCode((15&byte)<<12|(63&view.getUint8(++i))<<6|(63&view.getUint8(++i))<<0)
else string+=String.fromCharCode((15&byte)<<6|63&view.getUint8(++i))
else string+=String.fromCharCode(byte)}return string}function utf8ByteCount(string){for(var count=0,i=0,l=string.length;i<l;i++){
var codePoint=string.charCodeAt(i)
if(codePoint<128)count+=1
else if(codePoint<2048)count+=2
else if(codePoint<65536)count+=3
else{if(!(codePoint<1114112))throw new Error("bad codepoint "+codePoint)
count+=4}}return count}function Decoder(view,offset){this.offset=offset||0,this.view=view}function decode(buffer){
var view=new DataView(buffer),decoder=new Decoder(view),value=decoder.parse()
if(decoder.offset!==buffer.byteLength)throw new Error(buffer.byteLength-decoder.offset+" trailing bytes")


return value}function encode(value,view,offset){var type=typeof value
if("string"===type){var length=utf8ByteCount(value)
if(length<32)return view.setUint8(offset,160|length),utf8Write(view,offset+1,value),1+length
if(length<65536)return view.setUint8(offset,218),view.setUint16(offset+1,length),utf8Write(view,offset+3,value),
3+length
if(length<4294967296)return view.setUint8(offset,219),view.setUint32(offset+1,length),utf8Write(view,offset+5,value),
5+length}if(value instanceof ArrayBuffer){var length=value.byteLength
if(length<65536)return view.setUint8(offset,216),view.setUint16(offset+1,length),new Uint8Array(view.buffer).set(new Uint8Array(value),offset+3),
3+length
if(length<4294967296)return view.setUint8(offset,217),view.setUint32(offset+1,length),new Uint8Array(view.buffer).set(new Uint8Array(value),offset+5),
5+length}if("number"===type){if(value<<0!==value)return view.setUint8(offset,203),view.setFloat64(offset+1,value),
9
if(value>=0){if(value<128)return view.setUint8(offset,value),1
if(value<256)return view.setUint8(offset,204),view.setUint8(offset+1,value),2
if(value<65536)return view.setUint8(offset,205),view.setUint16(offset+1,value),3
if(value<4294967296)return view.setUint8(offset,206),view.setUint32(offset+1,value),5
throw new Error("Number too big 0x"+value.toString(16))}if(value>=-32)return view.setInt8(offset,value),
1
if(value>=-128)return view.setUint8(offset,208),view.setInt8(offset+1,value),2
if(value>=-32768)return view.setUint8(offset,209),view.setInt16(offset+1,value),3
if(value>=-2147483648)return view.setUint8(offset,210),view.setInt32(offset+1,value),5
throw new Error("Number too small -0x"+(-value).toString(16).substr(1))}if("undefined"===type)return view.setUint8(offset,196),
1
if(null===value)return view.setUint8(offset,192),1
if("boolean"===type)return view.setUint8(offset,value?195:194),1
if("object"===type){var length,size=0,isArray=Array.isArray(value)
if(isArray)length=value.length
else{var keys=Object.keys(value)
length=keys.length}var size
if(length<16?(view.setUint8(offset,length|(isArray?144:128)),size=1):length<65536?(view.setUint8(offset,isArray?220:222),
view.setUint16(offset+1,length),size=3):length<4294967296&&(view.setUint8(offset,isArray?221:223),view.setUint32(offset+1,length),
size=5),isArray)for(var i=0;i<length;i++)size+=encode(value[i],view,offset+size)
else for(var i=0;i<length;i++){var key=keys[i]
size+=encode(key,view,offset+size),size+=encode(value[key],view,offset+size)}return size}throw new Error("Unknown type "+type)

}function sizeof(value){var type=typeof value
if("string"===type){var length=utf8ByteCount(value)
if(length<32)return 1+length
if(length<65536)return 3+length
if(length<4294967296)return 5+length}if(value instanceof ArrayBuffer){var length=value.byteLength
if(length<65536)return 3+length
if(length<4294967296)return 5+length}if("number"===type){if(value<<0!==value)return 9
if(value>=0){if(value<128)return 1
if(value<256)return 2
if(value<65536)return 3
if(value<4294967296)return 5
if(value<0x10000000000000000)return 9
throw new Error("Number too big 0x"+value.toString(16))}if(value>=-32)return 1
if(value>=-128)return 2
if(value>=-32768)return 3
if(value>=-2147483648)return 5
if(value>=-0x8000000000000000)return 9
throw new Error("Number too small -0x"+value.toString(16).substr(1))}if("boolean"===type||"undefined"===type||null===value)return 1


if("object"===type){var length,size=0
if(Array.isArray(value)){length=value.length
for(var i=0;i<length;i++)size+=sizeof(value[i])}else{var keys=Object.keys(value)
length=keys.length
for(var i=0;i<length;i++){var key=keys[i]
size+=sizeof(key)+sizeof(value[key])}}if(length<16)return 1+size
if(length<65536)return 3+size
if(length<4294967296)return 5+size
throw new Error("Array or object too long 0x"+length.toString(16))}throw new Error("Unknown type "+type)

}var exports={}
return exports.inspect=inspect,exports.utf8Write=utf8Write,exports.utf8Read=utf8Read,exports.utf8ByteCount=utf8ByteCount,
exports.encode=function(value){var buffer=new ArrayBuffer(sizeof(value)),view=new DataView(buffer)
return encode(value,view,0),buffer},exports.decode=decode,Decoder.prototype.map=function(length){for(var value={},i=0;i<length;i++){
var key=this.parse()
value[key]=this.parse()}return value},Decoder.prototype.buf=function(length){var value=new ArrayBuffer(length)


return new Uint8Array(value).set(new Uint8Array(this.view.buffer,this.offset,length),0),this.offset+=length,
value},Decoder.prototype.raw=function(length){var value=utf8Read(this.view,this.offset,length)
return this.offset+=length,value},Decoder.prototype.array=function(length){for(var value=new Array(length),i=0;i<length;i++)value[i]=this.parse()


return value},Decoder.prototype.parse=function(){var value,length,type=this.view.getUint8(this.offset)


if(160===(224&type))return length=31&type,this.offset++,this.raw(length)
if(128===(240&type))return length=15&type,this.offset++,this.map(length)
if(144===(240&type))return length=15&type,this.offset++,this.array(length)
if(0===(128&type))return this.offset++,type
if(224===(224&type))return value=this.view.getInt8(this.offset),this.offset++,value
switch(type){case 218:return length=this.view.getUint16(this.offset+1),this.offset+=3,this.raw(length)


case 219:return length=this.view.getUint32(this.offset+1),this.offset+=5,this.raw(length)
case 192:return this.offset++,null
case 194:return this.offset++,!1
case 195:return this.offset++,!0
case 196:return void this.offset++
case 204:return value=this.view.getUint8(this.offset+1),this.offset+=2,value
case 205:return value=this.view.getUint16(this.offset+1),this.offset+=3,value
case 206:return value=this.view.getUint32(this.offset+1),this.offset+=5,value
case 208:return value=this.view.getInt8(this.offset+1),this.offset+=2,value
case 209:return value=this.view.getInt16(this.offset+1),this.offset+=3,value
case 210:return value=this.view.getInt32(this.offset+1),this.offset+=5,value
case 222:return length=this.view.getUint16(this.offset+1),this.offset+=3,this.map(length)
case 223:return length=this.view.getUint32(this.offset+1),this.offset+=5,this.map(length)
case 220:return length=this.view.getUint16(this.offset+1),this.offset+=3,this.array(length)
case 221:return length=this.view.getUint32(this.offset+1),this.offset+=5,this.array(length)
case 216:return length=this.view.getUint16(this.offset+1),this.offset+=3,this.buf(length)
case 217:return length=this.view.getUint32(this.offset+1),this.offset+=5,this.buf(length)
case 202:return value=this.view.getFloat32(this.offset+1),this.offset+=5,value
case 203:return value=this.view.getFloat64(this.offset+1),this.offset+=9,value}throw new Error("Unknown type 0x"+type.toString(16))

},exports})})


define("smith",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,("undefined"!=typeof module&&function(m){module.exports=m(require("events"),require("msgpack-js"))

}||"function"==typeof define&&function(m){define("smith",["events","msgpack-js"],m)}||function(m){window.smith=m(window.events,window.msgpack)

})(function(events,msgpack){"use strict"
function inherits(Child,Parent){Child.prototype=Object.create(Parent.prototype,{constructor:{value:Child
}})}function Transport(input){function onData(chunk){parse(chunk)}function onDrain(){self.emit("drain")

}function onError(err){self.emit("error",err)}function onDisconnect(){input.removeListener("data",onData),
input.removeListener("end",onDisconnect),input.removeListener("timeout",onDisconnect),input.removeListener("close",onDisconnect),
output.removeListener("drain",onDrain),input.destroy&&input.destroy(),input!==output&&(output.removeListener("end",onDisconnect),
output.removeListener("timeout",onDisconnect),output.removeListener("close",onDisconnect),output.destroy&&output!==process.stdout&&output.destroy()),
self.emit("disconnect")}var output,self=this
if(Array.isArray(input)?(output=input[1],input=input[0]):output=input,this.input=input,this.output=output,
!input.readable)throw new Error("Input is not readable")
if(!output.writable)throw new Error("Output is not writable")
input.on("data",onData),input.on("end",onDisconnect),input.on("timeout",onDisconnect),input.on("close",onDisconnect),
input.on("error",onError),output.on("drain",onDrain),output!==input&&(output.on("end",onDisconnect),output.on("timeout",onDisconnect),
output.on("close",onDisconnect),output.on("error",onError))
var parse=deFramer(function(err,frame){if(err)return self.emit("error",err)
var message
try{message=msgpack.decode(frame)}catch(err){return self.emit("error",err)}exports.debug&&console.log(process.pid+" <- "+require("util").inspect(message,!1,2,!0)),
self.emit("message",message)})
this.disconnect=onDisconnect}function deFramer(onFrame){var buffer,offset,state=0,length=0,expected_hash=0,hash=0


return function(chunk){for(var i=0,l=chunk.length;i<l;i++){switch(state){case 0:length|=chunk[i]<<24,
expected_hash=0,state=1
break
case 1:length|=chunk[i]<<16,state=2
break
case 2:length|=chunk[i]<<8,state=3
break
case 3:length|=chunk[i],expected_hash+=chunk[i],expected_hash+=expected_hash<<10,expected_hash+=expected_hash>>6,
expected_hash+=expected_hash<<3,expected_hash^=expected_hash>>11,expected_hash+=expected_hash<<15,expected_hash|=0,
hash=0,state=4
break
case 4:hash|=chunk[i]<<24,state=5
break
case 5:hash|=chunk[i]<<16,state=6
break
case 6:hash|=chunk[i]<<8,state=7
break
case 7:if(hash|=chunk[i],state=8,hash!==expected_hash)return onFrame(new Error("Hash mismatch, expected: "+expected_hash+" got: "+hash+", chunk: "+chunk))


if(length>104857600)return onFrame(new Error("Too big buffer "+length+", chunk: "+chunk))
buffer=new Buffer(length),offset=0,state=9
break
case 9:state=10
break
case 10:state=11
break
case 11:var len=l-i,emit=!1
len+offset>=length&&(emit=!0,len=length-offset),chunk.copy(buffer,offset,i,i+len),offset+=len,i+=len-1,
emit&&(onFrame(null,buffer),state=0,length=0,buffer=void 0,offset=void 0)}state<=3&&!emit&&(expected_hash+=chunk[i],
expected_hash+=expected_hash<<10,expected_hash+=expected_hash>>6),emit=!1}}}function Agent(api){if(!this instanceof Agent)throw new Error("Forgot to use new with Agent constructor")


this.api=api||{},this.disconnect=this.disconnect.bind(this),this._onMessage=this._onMessage.bind(this),
this._onDrain=this._onDrain.bind(this),this._onReady=this._onReady.bind(this),this._getFunction=this._getFunction.bind(this),
this._storeFunction=this._storeFunction.bind(this),this.remoteApi={},this.transport=void 0,this.callbacks=void 0,
this.nextKey=void 0}function freeze(value,storeFunction){function find(value,path){var type=getType(value)


if("function"!==type&&"object"!==type&&"array"!==type&&"date"!==type)return value
var index=seen.indexOf(value)
if(index>=0)return{$:paths[index]}
index=seen.length,seen[index]=value,paths[index]=path
var o
return"function"===type&&(o=storeFunction(value)),"date"===type&&(o={d:value.getTime()}),o?{$:o}:map(value,function(sub,key){
return find(sub,path.concat([key]))},null,function(key){return"$"===key[0]?"$"+key:key})}var seen=[],paths=[]


return find(value,[])}function liven(message,getFunction){function find(value,parent,key){var type=getType(value)


if("$"===key[0]&&(key=key.substr(1)),"function"!==type&&"object"!==type&&"array"!==type)return parent[key]=value,
value
if(value.hasOwnProperty("$")){var special=value.$
return Array.isArray(special)?(parent[key]=get(obj.root,special),parent[key]):"object"==typeof special?(parent[key]=new Date(special.d),
parent[key]):(parent[key]=getFunction(special),parent[key])}var o=Array.isArray(value)?[]:{}
return parent[key]=o,forEach(value,function(sub,key){find(sub,o,key)}),obj}var obj={}
return find(message,obj,"root"),obj.root}function getType(value){return null===value?"null":Array.isArray(value)?"array":"undefined"!=typeof Buffer&&Buffer.isBuffer(value)?"buffer":value instanceof Date?"date":typeof value

}function get(root,path){for(var target=root,i=0,l=path.length;i<l;i++)target=target[path[i]]
return target}function forEach(value,callback,thisp){if("function"==typeof value.forEach)return value.forEach.call(value,callback,thisp)


for(var keys=Object.keys(value),i=0,l=keys.length;i<l;i++){var key=keys[i]
callback.call(thisp,value[key],key,value)}}function map(value,callback,thisp,keyMap){if("function"==typeof value.map)return value.map.call(value,callback,thisp)


for(var obj={},keys=Object.keys(value),i=0,l=keys.length;i<l;i++){var key=keys[i]
obj[keyMap?keyMap(key):key]=callback.call(thisp,value[key],key,value)}return obj}function WebSocketTransport(socket){
function onError(err){self.emit("error",err)}function onMessage(data){var message
try{message=msgpack.decode(data)}catch(err){return onError(err)}exports.debug&&console.log(process.pid+" <- "+require("util").inspect(message,!1,2,!0)),
self.emit("message",message)}function onDisconnect(){socket.removeListener("message",onMessage),socket.removeListener("close",onDisconnect),
self.emit("disconnect")}this.socket=socket
var self=this
socket.on("message",onMessage),socket.on("close",onDisconnect),socket.on("error",onError),this.disconnect=onDisconnect

}function BrowserTransport(websocket){function onError(err){self.emit("error",err)}function onDisconnect(){
delete websocket.onmessage,delete websocket.onclose,self.emit("disconnect")}this.websocket=websocket
var self=this
websocket.binaryType="arraybuffer",websocket.onmessage=function(evt){var message
try{message=msgpack.decode(evt.data)}catch(err){return onError(err)}exports.debug&&console.log("<-",message),
self.emit("message",message)},websocket.onclose=function(evt){},websocket.onerror=function(evt){onError(new Error(evt.data))

},this.disconnect=onDisconnect}function EngineIoTransport(socket){function onError(err){self.emit("error",err)

}function onMessage(message){Array.isArray(message)?(exports.debug&&console.log("<-",message),self.emit("message",message)):self.emit("legacy",message)

}function onClose(reason){self.emit("disconnect",reason),cleanup()}function onDrain(){self.emit("drain")

}function onDisconnect(err){self.emit("disconnect",err),cleanup()}function cleanup(){socket.removeListener("error",onError),
socket.removeListener("message",onMessage),socket.removeListener("close",onClose),socket.removeListener("drain",onDrain),
socket.removeListener("disconnect",onDisconnect)}var self=this
this.socket=socket,socket.on("error",onError),socket.on("message",onMessage),socket.on("close",onClose),
socket.on("drain",onDrain),socket.on("disconnect",onDisconnect),this.disconnect=function(){socket.close()

},this.send=function(message){return exports.debug&&Array.isArray(message)&&console.log("->",message),
socket.send(message)}}var EventEmitter=events.EventEmitter,exports={}
return exports.msgpack=msgpack,exports.Agent=Agent,exports.Transport=Transport,exports.deFramer=deFramer,
exports.liven=liven,exports.freeze=freeze,exports.getType=getType,inherits(Transport,EventEmitter),Transport.prototype.send=function(message){
exports.debug&&console.log(process.pid+" -> "+require("util").inspect(message,!1,2,!0))
var frame=msgpack.encode(message),header=new Buffer(10)
header.writeUInt32BE(frame.length,0)
var a=frame.length>>24,b=frame.length>>16&255,c=frame.length>>8&255,d=255&frame.length,hash=0
return hash+=a,hash+=hash<<10,hash+=hash>>6,hash+=b,hash+=hash<<10,hash+=hash>>6,hash+=c,hash+=hash<<10,
hash+=hash>>6,hash+=d,hash+=hash<<10,hash+=hash>>6,hash+=hash<<3,hash^=hash>>11,hash+=hash<<15,hash|=0,
header.writeInt32BE(hash,4,!0),header.writeUInt16BE(0,8),this.output.write(header),this.output.write(frame)

},inherits(Agent,EventEmitter),Agent.prototype.connectionTimeout=1e4,Agent.prototype.connect=function(transport,callback){
function onConnect(api){reset(),callback&&callback(null,api)}function onDisconnect(err){onError(err||new Error("EDISCONNECT: Agent disconnected"))

}function onError(err){reset(),callback?callback(err):self.emit("error",err)}function onTimeout(){reset()


var err=new Error("ETIMEDOUT: Timeout while waiting for Agent agent to connect.")
err.code="ETIMEDOUT",self.emit("error",err)}function reset(){self.removeListener("connect",onConnect),
self.removeListener("disconnect",onDisconnect),self.removeListener("error",onError),clearTimeout(timeout)

}transport instanceof Transport||(transport=new Transport(transport)),this.transport=transport,this.callbacks={},
this.nextKey=1,transport.on("error",this.disconnect),transport.on("disconnect",this.disconnect),transport.on("message",this._onMessage),
transport.on("drain",this._onDrain),this.send(["ready",this._onReady]),this.on("connect",onConnect),this.on("disconnect",onDisconnect),
this.on("error",onError)
var timeout
this.connectionTimeout&&(timeout=setTimeout(onTimeout,this.connectionTimeout))
var self=this},Agent.prototype.send=function(message){if(message=freeze(message,this._storeFunction),
!this.transport)return console.log("smith can't send:"),console.dir(message),void console.trace()
try{var result=this.transport.send(message)}catch(e){console.error("Agent Smith Could not send message: ",e.stack,e.message)

}return result},Agent.prototype._onReady=function(names,env){if(Array.isArray(names)){var self=this
names.forEach(function(name){self.remoteApi.hasOwnProperty(name)||(self.remoteApi[name]=function(){if(!self.transport){
var callback=arguments[arguments.length-1]
return void("function"==typeof callback&&setTimeout(function(){var err=new Error("ENOTCONNECTED: Agent is offline, try again later")


err.code="ENOTCONNECTED",callback(err)},10))}var args=[name]
return args.push.apply(args,arguments),self.send(args)})}),this.remoteEnv=env,this._emitConnect()}},Agent.prototype._emitConnect=function(){
this.emit("connect",this.remoteApi)},Agent.prototype.disconnect=function(err){if(this.transport){var cerr=err


if(cerr||(cerr=new Error("EDISCONNECT: Agent disconnected"),cerr.code="EDISCONNECT"),this.callbacks){
var callbacks=this.callbacks
this.callbacks=void 0,forEach(callbacks,function(callback){callback(cerr)})}this.transport&&(this.transport.removeListener("error",this.disconnect),
this.transport.removeListener("disconnect",this.disconnect),this.transport.removeListener("message",this._onMessage),
this.transport.removeListener("drain",this._onDrain),this.transport.disconnect(),this.transport=void 0),
this.emit("disconnect",err),this.nextKey=void 0}},Agent.prototype._onDrain=function(){this.emit("drain")

},Agent.prototype._onMessage=function(message){if(!Array.isArray(message)||!message.length)return this.emit("error",new Error("Message should be an array"))


message=liven(message,this._getFunction)
var fn,id=message[0]
if("ready"===id){var keys=Object.keys(this.api),env="undefined"!=typeof process&&process.env
fn=function(callback){callback(keys,env)}}else fn="string"==typeof id?this.api[id]:this.callbacks[id],
fn||console.log("MISSING ID",id)
return"function"!=typeof fn?this.emit("error",new Error("Should be function")):void fn.apply(this,message.slice(1))

},Agent.prototype._getFunction=function(key){var _self=this
return function(){var args=[key]
return args.push.apply(args,arguments),_self.send(args)}},Agent.prototype._storeFunction=function(fn){
if(!this.callbacks)return new Error("Agent disconnected")
for(var key=this.nextKey;this.callbacks.hasOwnProperty(key);)if(key=key+1>>0,key===this.nextKey)throw new Error("Ran out of keys!!")


this.nextKey=key+1>>0
var callbacks=this.callbacks,self=this
return callbacks[key]=function(){return delete callbacks[key],self.nextKey=key,fn.apply(this,arguments)

},key},exports.WebSocketTransport=WebSocketTransport,inherits(WebSocketTransport,Transport),WebSocketTransport.prototype.send=function(message){
exports.debug&&console.log(process.pid+" -> "+require("util").inspect(message,!1,2,!0))
var data
try{data=msgpack.encode(message)}catch(err){return this.emit("error",err)}this.socket.send(data,{binary:!0
})},exports.BrowserTransport=BrowserTransport,inherits(BrowserTransport,Transport),BrowserTransport.prototype.send=function(message){
exports.debug&&console.log("->",message)
var data
try{data=msgpack.encode(message)}catch(err){return this.emit("error",err)}this.websocket.send(data)},
exports.EngineIoTransport=EngineIoTransport,inherits(EngineIoTransport,Transport),exports})})


define("vfs-socket/consumer",[],function(require,exports,module){function define(name,deps,m){"function"==typeof name&&(m=name,
deps=["require","exports","module"],name=$build_deps$.module.id),"string"!=typeof name&&(m=deps,deps=name,
name=$build_deps$.module.id),m||(m=deps,deps=[])
var ret="function"==typeof m?m.apply($build_deps$.module,deps.map(function(n){return $build_deps$[n]||require(n)

})):m
void 0!=ret&&($build_deps$.module.exports=ret),name!=$build_deps$.module.id&&$build_deps$.module.define&&$build_deps$.module.define(name,[],function(){
return $build_deps$.module.exports})}var $build_deps$={require:require,exports:exports,module:module}


exports=void 0,module=void 0,define.amd=!0,("undefined"!=typeof module&&function(m){module.exports=m(require("stream"),require("events"),require("smith"))

}||"function"==typeof define&&function(m){define(["stream","events","smith"],m)}||function(m){window.consumer=m(window.stream,window.events,window.smith)

})(function(stream,events,smith){"use strict"
function inherits(Child,Parent){Child.super_=Parent,Child.prototype=Object.create(Parent.prototype,{constructor:{
value:Child}})}function Consumer(){function storeStream(stream){for(nextStreamID=(nextStreamID+1)%1e4;streams.hasOwnProperty(nextStreamID);)nextStreamID=(nextStreamID+1)%1e4


var id=nextStreamID
streams[id]=stream,stream.id=id,stream.readable&&(stream.on("data",function(chunk){remote.onData(id,chunk)===!1&&stream.pause&&stream.pause()

}),stream.on("end",function(chunk){delete streams[id],remote.onEnd(id,chunk)})),stream.on("close",function(){
delete streams[id],remote.onClose(id)})
var token={id:id}
return stream.hasOwnProperty("readable")&&(token.readable=stream.readable),stream.hasOwnProperty("writable")&&(token.writable=stream.writable),
token}function makeStreamProxy(token){var stream=new Stream,id=token.id
return stream.id=id,proxyStreams[id]=stream,token.hasOwnProperty("readable")&&(stream.readable=token.readable),
token.hasOwnProperty("writable")&&(stream.writable=token.writable),stream.writable&&(stream.write=function(chunk){
return remote.write(id,chunk)},stream.end=function(chunk){chunk?remote.end(id,chunk):remote.end(id)}),
stream.readable&&(stream.destroy=function(){remote.destroy(id)},stream.pause=function(){remote.pause(id)

},stream.resume=function(){remote.resume(id)}),stream}function makeProcessProxy(token){var process=new EventEmitter,pid=token.pid


return process.pid=pid,proxyProcesses[pid]=process,process.stdout=makeStreamProxy(token.stdout),process.stderr=makeStreamProxy(token.stderr),
process.stdin=makeStreamProxy(token.stdin),process.kill=function(signal){remote.kill(pid,signal)},process.unref=function(){
remote.unref(pid)},process}function makePtyProxy(token){var pid=token.pid
if(proxyProcesses[pid])return proxyProcesses[pid]
var pty=makeStreamProxy(token)
return pty.pid=pid,proxyProcesses[pid]=pty,pty.kill=function(signal){remote.kill(pid,signal)},pty.resize=function(cols,rows){
remote.resize(pid,cols,rows)},pty.acknowledge=function(timeout,callback){remote.acknowledgeWrite(timeout,callback)

},pty}function makeWatcherProxy(token){var watcher=new EventEmitter,id=token.id
return watcher.id=id,proxyWatchers[id]=watcher,watcher.close=function(){remote.close(id),delete proxyWatchers[id]

},watcher}function makeApiProxy(token){var name=token.name,api=proxyApis[name]=new EventEmitter
return api.name=token.name,api.names=token.names,token.names.forEach(function(functionName){api[functionName]=function(){
var args=Array.prototype.slice.call(arguments)
if("function"==typeof args[args.length-1]){var callback=args[args.length-1]
args[args.length-1]=function(err,meta){return processCallback(err,meta,callback)}}remote.call(name,functionName,args)

}}),api}function onExit(pid,code,signal){var process=proxyProcesses[pid]
process&&(process.closed&&delete proxyProcesses[pid],process.exited=!0,process.emit("exit",code,signal))

}function onProcessClose(pid,code,signal){var process=proxyProcesses[pid]
process&&(process.exited&&delete proxyProcesses[pid],process.closed=!0,process.emit("close",code,signal))

}function onPtyKill(pid){var process=proxyProcesses[pid]
process&&process.emit("kill")}function onData(id,chunk){var stream=proxyStreams[id]
stream&&stream.emit("data",chunk)}function onEnd(id,chunk){var stream=proxyStreams[id]
stream&&(delete proxyStreams[id],stream.emit("end",chunk))}function onClose(id){var stream=proxyStreams[id]


stream&&(delete proxyStreams[id],stream.emit("close"))}function onError(id,err){var stream=proxyStreams[id]


stream&&(delete proxyStreams[id],stream.emit("error",err))}function onChange(id,event,filename,stat,files){
var watcher=proxyWatchers[id]
watcher&&watcher.emit("change",event,filename,stat,files)}function onEvent(name,value){var list=handlers[name]


if(list)for(var i=0,l=list.length;i<l;i++)list[i](value)}function write(id,chunk){var stream=streams[id]


stream&&stream.write(chunk)}function destroy(id){var stream=streams[id]
stream&&(stream.destroy(),delete streams[id])}function pause(id){var stream=streams[id]
stream&&stream.pause&&stream.pause()}function resume(id){var stream=streams[id]
stream&&stream.resume&&stream.resume()}function end(id,chunk){var stream=streams[id]
stream&&(delete streams[id],chunk?stream.end(chunk):stream.end())}function on(name,handler,callback){
if(handlers[name])return handlers[name].push(handler),pendingOn[name]?(callback&&pendingOn[name].push(callback),
callback()):callback()
handlers[name]=[handler]
var pending=pendingOn[name]=[]
return callback&&pending.push(callback),remote.subscribe(name,function(err){for(var i=0,l=pending.length;i<l;i++)pending[i](err)


delete pendingOn[name]})}function off(name,handler,callback){var list=handlers[name]
if(!list)return callback()
var index=list.indexOf(handler)
return index<0?callback():(list.splice(index,1),list.length>0?callback():(delete handlers[name],void remote.unsubscribe(name,callback)))

}function emit(){remote.emit.apply(remote,arguments)}function processCallback(err,meta,callback){return meta&&"object"==typeof meta?(meta.stream&&(meta.stream=makeStreamProxy(meta.stream)),
meta.process&&(meta.process=makeProcessProxy(meta.process)),meta.pty&&(meta.pty=makePtyProxy(meta.pty)),
meta.watcher&&(meta.watcher=makeWatcherProxy(meta.watcher)),meta.api&&(meta.api=makeApiProxy(meta.api)),
callback(err,meta)):callback(err,meta)}function route(name){return function(path,options,callback){if(!callback)throw new Error("Forgot to pass in callback for "+name)


return options.stream&&(options.stream=storeStream(options.stream)),remote[name].call(this,path,options,function(err,meta){
processCallback(err,meta,callback)})}}function ping(callback){return remote.ping(callback)}Agent.call(this,{
onData:onData,onEnd:onEnd,onClose:onClose,onError:onError,write:write,end:end,destroy:destroy,resume:resume,
pause:pause,onExit:onExit,onProcessClose:onProcessClose,onPtyKill:onPtyKill,onChange:onChange,onEvent:onEvent
})
var streams={},proxyStreams={},proxyProcesses={},proxyWatchers={},proxyApis={},handlers={},pendingOn={}


this.vfs={ping:ping,resolve:route("resolve"),stat:route("stat"),metadata:route("metadata"),readfile:route("readfile"),
readdir:route("readdir"),mkfile:route("mkfile"),mkdir:route("mkdir"),mkdirP:route("mkdirP"),appendfile:route("appendfile"),
rmfile:route("rmfile"),rmdir:route("rmdir"),rename:route("rename"),copy:route("copy"),chmod:route("chmod"),
symlink:route("symlink"),watch:route("watch"),connect:route("connect"),spawn:route("spawn"),killtree:route("killtree"),
pty:route("pty"),tmux:route("tmux"),execFile:route("execFile"),extend:route("extend"),unextend:route("unextend"),
use:route("use"),emit:emit,on:on,off:off}
var remote=this.remoteApi
this.on("drain",function(){Object.keys(streams).forEach(function(id){var stream=streams[id]
stream.readable&&stream.resume&&stream.resume()}),Object.keys(proxyStreams).forEach(function(id){var stream=proxyStreams[id]


stream.writable&&stream.emit("drain")})}),this.on("disconnect",function(err){err||(err=new Error("EDISCONNECT: vfs socket disconnected"),
err.code="EDISCONNECT"),Object.keys(proxyProcesses).forEach(function(pid){var proxyProcess=proxyProcesses[pid]


delete proxyProcesses[pid],proxyProcess.emit("exit",1)}),Object.keys(streams).forEach(function(id){var stream=streams[id]


stream.emit("close")}),Object.keys(proxyStreams).forEach(onClose),Object.keys(proxyWatchers).forEach(function(id){
var proxyWatcher=proxyWatchers[id]
delete proxyWatchers[id],proxyWatcher.emit("error2",err)}),Object.keys(proxyApis).forEach(function(name){
var proxyApi=proxyApis[name]
delete proxyApis[name],proxyApi.emit("error2",err)})}),this.on("error",function(err){console.error(err)

})
var nextStreamID=1}var exports={},Stream=stream.Stream,EventEmitter=events.EventEmitter,Agent=smith.Agent


return exports.smith=smith,exports.Consumer=Consumer,inherits(Consumer,Agent),Consumer.prototype._emitConnect=function(){
this.vfs.env=this.remoteEnv,this.emit("connect",this.vfs)},exports})})


define("kaefer/util",[],function(require,exports,module){exports.inherits=function(Child,Parent){Child.prototype=Object.create(Parent.prototype,{
constructor:{value:Child}})}})


define("kaefer/reliable_socket",[],function(require,exports,module){"use strict"
function utf8escape(str){return str.replace(/[\ud799-\uDFFF]/g,function(x){return"\ud799"+String.fromCharCode(x.charCodeAt(0)-55040)

})}function utf8unescape(str){return str.replace(/\ud799./g,function(x){return String.fromCharCode(x.charCodeAt(1)+55040)

})}var util=require("./util"),EventEmitter=require("events").EventEmitter,ReliableSocket=module.exports=function(socket,options){
EventEmitter.call(this),this.socket=socket,options=options||{},this.options=options,this.initialCongestionWindowSize=5,
this.congestionWindowSize=this.initialCongestionWindowSize,this.slowStartThreshold=options.slowStartThreshold||300,
this.ackTimeout=options.ackTimeout||200,this.disconnectTimeout=options.disconnectTimeout||1e4,this.retransmissionTimeout=3e3,
this.maxRtt=options.maxRtt||1e4,this.minRtt=options.minRtt||2e3,this.duplicateCount=0,this.missCount=0,
this.connectTs=0,this.debug=options.debug||!1,this.seq=options.seq||1,this.recId=-1,this.connected=!1,
this.buffer=[],this.unacked={},socket.on("message",this.onMessage.bind(this)),socket.on("away",this.onAway.bind(this)),
socket.on("back",this.onBack.bind(this)),this.on("stats",this.onStats.bind(this)),this.on("stats_reply",this.onStatsReply.bind(this)),
socket.on("error",function(e){console.error(e.message)})}
util.inherits(ReliableSocket,EventEmitter),Object.defineProperty(ReliableSocket.prototype,"readyState",{
get:function(){return this.socket.readyState}}),ReliableSocket.prototype.onMessage=function(msg){if("string"==typeof msg)try{
msg=JSON.parse(utf8unescape(msg))}catch(e){}if(this.debug&&console.log("on message",msg,this.seq),msg&&msg.ack){
var ack=msg.ack
for(var key in this.unacked){var unacked=this.unacked[key]
unacked.seq<=ack&&unacked.acknowledge()}Object.keys(this.unacked).length<this.congestionWindowSize&&this._flush()


var recId=msg.seq
if(recId){var expectedId=this.recId+1
if(recId!=expectedId&&this.recId!=-1)return recId<expectedId?(this.debug&&console.log("dupe",recId,expectedId),
this.duplicateCount+=1,void this._ack()):(this.debug&&console.log("miss",recId,expectedId),this.missCount+=1,
void this._ack())
this.recId=recId,this._delayedAck()}msg.t?this.emit(msg.t,msg):msg.d&&this.emit("message",msg.d)}},ReliableSocket.prototype.onStats=function(msg){
var data=msg.d||{}
data.remote=this._getStats(),this.send(data,"stats_reply")},ReliableSocket.prototype.onStatsReply=function(msg){
var data=msg.d||{}
data.localEnd=this._getStats()
var id=data.id
this.statsCallbacks[id]&&(this.statsCallbacks[id](null,data),delete this.statsCallbacks[id])},ReliableSocket.prototype.stats=function(callback){
this.statsCallbacks||(this.statsCallbacks={})
var id=this.seq
this.statsCallbacks[id]=callback
var data={id:id,localStart:this._getStats()}
this.send(data,"stats")},ReliableSocket.prototype._getStats=function(){var wsBuffer=-1
try{this.socket.socket.transport.ws?wsBuffer=this.socket.socket.transport.ws.bufferedAmount:this.socket.socket.transport.socket&&(wsBuffer=this.socket.socket.transport.socket._socket.bufferSize)

}catch(e){}return{livetime:Date.now()-this.connectTs,ts:Date.now(),retransmissionTimeout:this.retransmissionTimeout,
congestionWindowSize:this.congestionWindowSize,srtt:this.srtt,rttVar:this.rttVar,duplicateCount:this.duplicateCount,
missCount:this.missCount,buffered:this.buffer.length,unacked:Object.keys(this.unacked).length,eioBuffer:this.socket.socket.writeBuffer.length,
wsBuffer:wsBuffer}},ReliableSocket.prototype.onAway=function(){this.debug&&console.log("away"),this._scheduleDisconnect("client connection went away"),
this.emit("away")},ReliableSocket.prototype.onBack=function(){this.debug&&console.log("back"),this._cancelDisconnect(),
this.connectTs=Date.now(),this.connected||(this.connected=!0,this.emit("connect")),this.emit("back"),
this.buffer.length?this._flush():this._ack()},ReliableSocket.prototype._scheduleDisconnect=function(reason){
var that=this
this._cancelDisconnect(),this.debug&&console.log("schedule disconnect"),this._disconnectTimer=setTimeout(function(){
that.disconnect(reason)},this.disconnectTimeout)},ReliableSocket.prototype._cancelDisconnect=function(){
this.debug&&console.log("cancel disconnect"),clearTimeout(this._disconnectTimer)},ReliableSocket.prototype._delayedAck=function(){
var that=this
this._cancelDelayedAck(),this._ackTimer=setTimeout(function(){that._ack()},this.ackTimeout)},ReliableSocket.prototype._cancelDelayedAck=function(){
clearTimeout(this._ackTimer)},ReliableSocket.prototype._ack=function(){"open"==this.socket.readyState&&(this.debug&&console.log("send ack",this.recId),
this.socket.send(utf8escape(JSON.stringify({ack:this.recId}))))},ReliableSocket.prototype._flush=function(){
if("open"==this.socket.readyState&&this.buffer.length){var toSend=Math.min(this.congestionWindowSize-Object.keys(this.unacked).length,this.buffer.length)


this.debug&&console.log("flush",toSend,"messages")
for(var i=0;i<toSend;i++){var msg=this.buffer.shift()
this._sendMessage(msg[0],msg[1])}this.buffer.length||this.emit("drain")}},ReliableSocket.prototype.disconnect=function(reason){
this.debug&&console.log("disconnect"),this.connected=!1,this.recId=-1,this.duplicateCount=0,this.missCount=0,
this.buffer=[]
for(var key in this.unacked)this.unacked[key].abort()
this.unacked={},this.close(),this.emit("away")
var err=new Error("EDISCONNECT: "+(reason||"Client disconnected?"))
err.code="EDISCONNECT",this.emit("disconnect",err)},ReliableSocket.prototype.close=function(){return this.socket.close()

},ReliableSocket.prototype.send=function(msg,type){return this._cancelDelayedAck(),"open"==this.socket.readyState&&Object.keys(this.unacked).length<this.congestionWindowSize?(this._sendMessage(msg,type),
!0):(this.debug&&console.log("buffer"),this.buffer.push([msg,type]),!1)},ReliableSocket.prototype._sendMessage=function(data,type){
var that=this,msg={seq:++this.seq,ts:Date.now(),tries:0,send:function(){msg.abort(),that.unacked[msg.seq]=msg,
msg.retransmissionTimer=setTimeout(function(){msg.tries+=1,that.debug&&console.log("timeout",msg.seq),
that._updateRetransmissionTimeout(0),that._updateCongestionWindowSize(!0),msg.send()},that.retransmissionTimeout),
that.socket.send(msg.serialize())},abort:function(){delete that.unacked[msg.seq],clearTimeout(msg.retransmissionTimer)

},acknowledge:function(){msg.abort(),msg.tries>0&&that.debug&&console.log("retry",msg.seq,that.congestionWindowSize,that.retransmissionTimeout),
that._updateCongestionWindowSize(!1),msg.tries||that._updateRetransmissionTimeout(Date.now()-msg.ts)},
serialize:function(){return utf8escape(JSON.stringify({ack:that.recId,seq:msg.seq,d:data,t:type}))}}
msg.send()},ReliableSocket.prototype._updateCongestionWindowSize=function(timeout){timeout?(this.slowStartThreshold=Math.max(Math.floor(this.congestionWindowSize/2),50),
this.congestionWindowSize=this.initialCongestionWindowSize):this.congestionWindowSize>this.slowStartThreshold?this.congestionWindowSize+=1:this.congestionWindowSize*=2

},ReliableSocket.prototype._updateRetransmissionTimeout=function(rtt){if(rtt)if(this.srtt){var alpha=1/8,beta=.25


this.srtt=(1-alpha)*this.srtt+alpha*rtt,this.rttVar=(1-beta)*this.rttVar+beta*Math.abs(this.srtt-rtt),
this.retransmissionTimeout=this.srtt+4*this.rttVar}else this.srtt=rtt,this.rttVar=.5*rtt,this.retransmissionTimeout=rtt*this.rttVar
else this.retransmissionTimeout=Math.min(2*this.retransmissionTimeout,this.maxRtt),this.srtt=null
this.retransmissionTimeout=Math.min(Math.max(this.retransmissionTimeout,this.minRtt),this.maxRtt)}})


define("kaefer/reconnect_socket",[],function(require,exports,module){"use strict"
var util=require("./util"),EventEmitter=require("events").EventEmitter,ReconnectSocket=module.exports=function(socket){
EventEmitter.call(this),this.listeners={close:this.onClose.bind(this),message:this.onMessage.bind(this),
drain:this.onDrain.bind(this)},socket&&this.setSocket(socket)}
util.inherits(ReconnectSocket,EventEmitter),ReconnectSocket.prototype.setSocket=function(socket){if((this.socket||socket)&&this.socket!=socket){
var that=this
if(this.socket){for(var type in this.listeners)this.socket.removeListener(type,this.listeners[type])
this.socket.close()}if(socket)for(var type in this.listeners)socket.on(type,this.listeners[type])
this.socket=socket,this.socket?"open"==socket.readyState?this.emit("back"):socket.on("open",function(){
that.emit("back")}):this.emit("away")}},ReconnectSocket.prototype.send=function(msg){if(this.socket&&"open"===this.socket.readyState)try{
this.socket.send(msg)}catch(e){this.setSocket(null),this.emit("error",e)}},Object.defineProperty(ReconnectSocket.prototype,"readyState",{
get:function(){return this.socket?"open"==this.socket.readyState?"open":"reconnecting":"away"}}),ReconnectSocket.prototype.close=function(){
this.setSocket(null)},ReconnectSocket.prototype.onClose=function(){this.setSocket(null)},ReconnectSocket.prototype.onMessage=function(message){
this.emit("message",message)},ReconnectSocket.prototype.onDrain=function(){this.emit("drain")}})


define("kaefer/version",[],function(require,exports,module){exports.protocol=13})


define("kaefer",[],function(require,exports,module){"use strict"
var ReliableSocket=require("./reliable_socket"),ReconnectSocket=require("./reconnect_socket"),version=require("./version").protocol


module.exports=function(connectEio,options){function connect(){return"away"!==reconnectSocket.readyState?void setTimeout(function(){
0===connectAttempts&&"away"===reconnectSocket.readyState&&connect()},250):void preConnectCheck(function(err,shouldConnect){
if(err||!shouldConnect)return reconnect()
reconnectSocket.setSocket(null)
var eioSocket=connectEio()
eioSocket.on("open",function(){eioSocket.send(JSON.stringify({type:"handshake",session:socket.id,seq:socket.seq,
version:version}))}),eioSocket.on("message",function handshakeReply(msg){if(!reconnectSocket.destroying){
if(reconnectSocket.socket&&reconnectSocket.socket!=eioSocket)return console.error("reconenct for detached socket")


try{msg=JSON.parse(msg)}catch(e){}if("handshake reply"!==msg.type||!msg.seq)return socket.close(),reconnect()


socket.id&&socket.id!==msg.session&&socket.disconnect(),socket.id=msg.session,eioSocket.off("message",handshakeReply),
connectAttempts=0,socket.recId==-1&&(socket.recId=msg.seq),reconnectSocket.setSocket(eioSocket)}}),eioSocket.on("error",function(e){
if(!reconnectSocket.destroying){if(reconnectSocket.socket&&reconnectSocket.socket!=eioSocket)return console.error("reconenct for detached socket")


console.error("Socket error; reconnecting:",e),eioSocket.close(),reconnect()}}),eioSocket.on("close",function(e){
if(!reconnectSocket.destroying){if(reconnectSocket.socket&&reconnectSocket.socket!=eioSocket)return console.error("reconenct for detached socket")


console.error("Socket close; reconnecting:",e),reconnect()}})})}function reconnect(delay){isReconnecting&&"number"!=typeof delay||(reconnectSocket.setSocket(null),
connectAttempts+=1,"number"!=typeof delay&&(delay=connectAttempts<10?250:Math.min(6e4,250*Math.pow(2,connectAttempts-10))),
isReconnecting=!0,console.log("Schedule re-connect in: "+delay),socket.emit("reconnectDelay",{delay:delay
}),clearTimeout(timer),timer=setTimeout(function(){isReconnecting=!1,connect()},delay))}var reconnectSocket=new ReconnectSocket


options=options||{},options.seq=options.seq||2e4
var socket=new ReliableSocket(reconnectSocket,options)
socket.on("disconnect",function(){socket.id=null})
var timer,connectAttempts=0,isReconnecting=!1,preConnectCheck=options.preConnectCheck||function(cb){cb(null,!0)

}
return socket.connect=connect,socket.reconnect=reconnect,socket}})


define("plugins/c9.vfs.client/vfs_client",[],function(require,exports,module){"use strict"
function main(options,imports,register){function emptyBuffer(){var b=buffer
buffer=[],b.forEach(function(item){if(item){var xhr=rest.apply(null,item)
item.length>3&&(item[3].abort=xhr.abort.bind(xhr))}})}function load(){function connectEngine(){return auth.accessToken&&(eioOptions.query={
access_token:auth.accessToken}),eio(eioOptions)}function preConnectCheck(callback){function disconnect(){
pingUrl=null,reconnect(function(err){err&&err.fatal||callback(err,!err)})}emit.sticky("preConnectCheckStart"),
vfsEndpoint.isOnline(function(err,isOnline){return err||!isOnline?callback(null,!1):eioOptions&&pingUrl?void vfsEndpoint.isServerAlive(pingUrl,function(err,isAlive){
return!err&&isAlive?(emit("preConnectCheckEnd"),callback(null,!0)):void disconnect()}):disconnect()})

}return!loaded&&(loaded=!0,emit("loaded"),smith.debug=DEBUG,emit.sticky("connectClient"),connection=connectClient(connectEngine,{
preConnectCheck:preConnectCheck,debug:DEBUG}),connection.on("away",emit.bind(null,"away")),connection.on("back",function(e){
emit("back"),emptyBuffer()}),connection.on("disconnect",onDisconnect),connection.on("connect",onConnect),
reconnectNow(),void plugin.once("connect",warnBrokenSafariVersion))}function join(a,b){return(a||"").replace(/\/?$/,"/")+(b||"").replace(/^\//,"")

}function vfsUrl(path){return"~"==path.charAt(0)?join(homeUrl,escape(path.slice(1))):join(projectUrl,escape(path))

}function rest(path,options,callback){if(!vfs||!connection||"open"!=connection.readyState){var stub={
abort:function(){buffer[this.id]=null}}
return stub.id=buffer.push([path,options,callback,stub])-1,stub}var url=vfsUrl(path)
return options.overrideMimeType=options.contentType||"text/plain",options.contentType=options.contentType||"text/plain",
auth.request(url,options,function(err,data,res){var reErrorCode=/(ENOENT|EISDIR|ENOTDIR|EEXIST|EACCES|ENOTCONNECTED)/


if(err){var isConnected=!connection||"open"==connection.readyState
if(499===err.code||0===err.code&&!isConnected)return void(isConnected?buffer.push([path,options,callback]):rest(path,options,callback))


if(!res)return callback(err)
var message=(res.body||"").replace(/^Error:\s+/,""),code=0===res.status?"ENOTCONNECTED":message.match(reErrorCode)&&RegExp.$1


return err=new Error(res.body),err.code=code||void 0,err.status=res.status,callback(err)}callback(null,data,res)

})}function download(path,filename,isfile){var extraPaths=""
Array.isArray(path)&&(extraPaths=path,path=path[0],extraPaths=","+extraPaths.map(function(p){return p[0]==path[0]&&p!=path?escape(p):""

}).filter(Boolean).join(",")),window.open(vfsUrl(path)+extraPaths+"?download"+(filename?"="+escape(filename):"").replace(/\+/g,"%2B")+(isfile?"&isfile=1":""))

}function reconnectNow(){reconnect(function(_err){connection&&connection.connect()})}function reconnect(callback){
connection&&(connection.socket.setSocket(null),vfsEndpoint.get(protocolVersion,function(err,urls){if(err)return metrics.increment("vfs.failed.connect",1,!0),
showErrorTimer||(showErrorTimer=setTimeout(function(){showVfsError(showErrorTimerMessage)},err.fatal?0:2e4)),
showErrorTimerMessage=err,callback(err)
lastError&&hideError(lastError),region=urls.region,vfsBaseUrl=urls.url,homeUrl=urls.home,projectUrl=urls.project,
pingUrl=urls.ping,serviceUrl=urls.serviceUrl,id=pingUrl.split("/").pop()
var parsedSocket=URL.parse(urls.socket)
eioOptions={path:parsedSocket.path,host:parsedSocket.host,port:parsedSocket.port||("https:"==parsedSocket.protocol?"443":null),
secure:!parsedSocket.protocol||"https:"==parsedSocket.protocol,rejectUnauthorized:options.rejectUnauthorized
},callback()}))}function showVfsError(err){switch(err.action){case"dashboard":return/Permission denied \(public key/.test(err.message)&&(err.message="SSH permission denied. Please review your workspace configuration."),
showAlert("Workspace Error","Unable to access your workspace",err.message,function(){window.location=dashboardUrl

},{yes:"Return to dashboard"})
case"reload":lastError=showError(err.message+". Please reload this window.",-1),setTimeout(function(){
window.location.reload()},8*Math.random()+12e4)
break
default:lastError=showError(err,-1)}err.fatal&&console.error("Fatal connection error:",err)}function warnBrokenSafariVersion(){
apf.isSafari&&"10.1"==apf.versionSafari&&showAlert("Broken Browser Version Detected","Websockets are broken in Safari version 10.1.","Due to https://bugs.webkit.org/show_bug.cgi?id=170463, websockets do not work well on this browser version which may result in frequent disconnects from the service. Please use Chrome, 'Safari Technology Preview' or another browser  until the Safari updates to version 10.2.")

}function onDisconnect(){vfs=null,emit("disconnect")}function onConnect(){var transport=new smith.EngineIoTransport(connection)


emit("onConnect"),consumer&&consumer.disconnect(),clearTimeout(showErrorTimer),showErrorTimer=null,consumer=new Consumer,
consumer.connectionTimeout=5e3,consumer.connect(transport,function(err,_vfs){function callback(shouldReconnect){
return shouldReconnect?(vfsEndpoint.clearCache(),void reconnectNow()):(vfs=_vfs,bufferedVfsCalls.forEach(vfsCall),
bufferedVfsCalls=[],emit("connect"),void emptyBuffer())}return err?(errorHandler.reportError(new Error("Error connecting to VFS",{
err:err})),void console.error("error connecting to VFS",err)):void(emit("beforeConnect",{done:callback,
vfs:_vfs})!==!1&&callback())}),consumer.on("error",function(err){connection.disconnect()})}function vfsCall(method,path,options,callback){
return Array.isArray(method)?vfsCall.apply(null,method):vfs?vfs[method](path,options,callback):void bufferedVfsCalls.push([method,path,options,callback])

}function isIdle(){return!(!connection||!consumer)&&(!Object.keys(connection.unacked).length&&!Object.keys(consumer.callbacks||{}).length)

}var id,Plugin=imports.Plugin,auth=imports.auth,vfsEndpoint=imports["vfs.endpoint"],errorDialog=imports["dialog.error"],showError=errorDialog.show,hideError=errorDialog.hide,showAlert=imports["dialog.alert"].show,errorHandler=imports.error_handler,metrics=imports.metrics,apf=imports.apf,eio=require("engine.io"),Consumer=require("vfs-socket/consumer").Consumer,connectClient=require("kaefer"),protocolVersion=require("kaefer/version").protocol,smith=require("smith"),URL=require("url"),DEBUG=options.debug&&("undefined"==typeof location||location.href.indexOf("debug=3")>-1),plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


errorDialog.vfs=plugin
var region,vfsBaseUrl,homeUrl,projectUrl,pingUrl,serviceUrl,eioOptions,connection,consumer,vfs,showErrorTimer,showErrorTimerMessage,lastError,buffer=[],dashboardUrl=options.dashboardUrl,loaded=!1,bufferedVfsCalls=[]


plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1,connection&&connection.socket&&(connection.socket.destroying=!0),
consumer&&consumer.disconnect(),connection&&connection.disconnect(),id=null,buffer=[],region=null,vfsBaseUrl=null,
homeUrl=null,projectUrl=null,pingUrl=null,serviceUrl=null,eioOptions=null,consumer=null,connection=null,
vfs=null,showErrorTimer=null,showErrorTimerMessage=null,lastError=null}),plugin.freezePublicAPI({get connection(){
return connection},get connecting(){return!connection||"reconnecting"==connection.readyState},get connected(){
return!!vfs&&"open"==connection.readyState},get previewUrl(){throw new Error("gone")},get serviceUrl(){
return serviceUrl},get id(){return id},get baseUrl(){return vfsBaseUrl},get region(){return region},rest:rest,
download:download,url:vfsUrl,reconnect:reconnectNow,resolve:vfsCall.bind(null,"resolve"),stat:vfsCall.bind(null,"stat"),
readfile:vfsCall.bind(null,"readfile"),readdir:vfsCall.bind(null,"readdir"),mkfile:vfsCall.bind(null,"mkfile"),
mkdir:vfsCall.bind(null,"mkdir"),mkdirP:vfsCall.bind(null,"mkdirP"),appendfile:vfsCall.bind(null,"appendfile"),
rmfile:vfsCall.bind(null,"rmfile"),rmdir:vfsCall.bind(null,"rmdir"),rename:vfsCall.bind(null,"rename"),
copy:vfsCall.bind(null,"copy"),chmod:vfsCall.bind(null,"chmod"),symlink:vfsCall.bind(null,"symlink"),
metadata:vfsCall.bind(null,"metadata"),watch:vfsCall.bind(null,"watch"),connect:vfsCall.bind(null,"connect"),
spawn:vfsCall.bind(null,"spawn"),pty:vfsCall.bind(null,"pty"),tmux:vfsCall.bind(null,"tmux"),execFile:vfsCall.bind(null,"execFile"),
killtree:vfsCall.bind(null,"killtree"),use:vfsCall.bind(null,"use"),extend:vfsCall.bind(null,"extend"),
unextend:vfsCall.bind(null,"unextend"),isIdle:isIdle}),register(null,{vfs:plugin})}return main.consumes=["Plugin","auth","vfs.endpoint","dialog.error","dialog.alert","error_handler","metrics","apf"],
main.provides=["vfs"],main})


define("text!plugins/c9.vfs.client/log-service.js",[],"module.exports = function(vfs, options, register) {\n    register(null, {\n        log: function (message, callback) {\n            callback = callback || function() {};\n            \n            console.log(message);\n            callback();\n        }\n    });\n};")


define("plugins/c9.vfs.client/vfs.log",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(){return!loaded&&(loaded=!0,!c9.readonly&&(ext.loadRemotePlugin("log",{
code:require("text!./log-service.js"),redefine:!0},function(err,remote){return err?console.error(err):void(server=remote)

}),void c9.on("stateChange",function(e){e.state&c9.NETWORK?load():(loaded=!1,server=null)},plugin)))}
function log(){if(!server)return console.error("Cannot log, client is offline")
var callback=function(){},args=Array.prototype.slice.call(arguments)
"function"==typeof args[args.length-1]&&(callback=args.splice(args.length-1,1))
var message=""
args.forEach(function(arg){return"object"==typeof arg?message+=JSON.stringify(arg):void(message+=arg)

}),server.log(message,callback)}var Plugin=imports.Plugin,c9=imports.c9,ext=imports.ext,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1,server=null


plugin.on("load",function(){load()}),plugin.on("unload",function(){loaded=!1,server=null}),plugin.freezePublicAPI({
log:log}),register(null,{"vfs.log":plugin})}return main.consumes=["Plugin","ext","c9"],main.provides=["vfs.log"],
main})


define("text!plugins/c9.vfs.client/ping-service.js",[],"module.exports = function(vfs, options, register) {\n    register(null, {\n        ping: function (payload, callback) {\n            callback(null, payload);\n        }\n    });\n};\n")


define("plugins/c9.vfs.client/vfs.ping",[],function(require,exports,module){"use strict"
function main(options,imports,register){function load(oldVfs){loaded&&!oldVfs||(loaded=!0,ext.loadRemotePlugin("ping",{
file:oldVfs?void 0:"c9.vfs.client/ping-service.js",code:oldVfs?require("text!./ping-service.js"):void 0
},function(err,remote){return remote||oldVfs?remote?void(api=remote):console.error(err):load(!0)}),c9.on("stateChange",function(e){
e.state&c9.NETWORK?load():(loaded=!1,api=null)},plugin))}function ping(callback){if(callback||(callback=function(err,result){
return err?console.error(err):void console.log("ping took",result,"ms")}),!api||!vfs.connection)return callback(new Error("Client is offline"))


if(!vfs.isIdle())return vfs.connection.once("message",ping.bind(null,callback))
var start=Date.now()
api.ping("serverTime",function(err,response){return err?callback(err):void callback(null,{serverTime:response.serverTime,
total:Date.now()-start})})}var api,Plugin=imports.Plugin,c9=imports.c9,ext=imports.ext,vfs=imports.vfs,plugin=new Plugin("Ajax.org",main.consumes),loaded=!1


plugin.on("load",function(){load()}),window.ping=ping,plugin.freezePublicAPI({ping:ping}),register(null,{
"vfs.ping":plugin})}return main.consumes=["Plugin","ext","c9","vfs"],main.provides=["vfs.ping"],main})


define("plugins/c9.ide.plugins/managerdp",[],function(require,exports,module){var oop=require("ace/lib/oop"),TreeData=require("ace_tree/data_provider"),DataProvider=function(root){
TreeData.call(this,root),this.rowHeight=18}
return oop.inherits(DataProvider,TreeData),function(){this.getCaptionHTML=function(node){return node.name?node.name.replace(this.reKeyword,"<strong>$1</strong>"):""

},this.sort=function(children){var compare=TreeData.alphanumCompare
return children.sort(function(a,b){var aIsSpecial=a.noSelect,bIsSpecial=b.noSelect
return aIsSpecial&&!bIsSpecial?1:!aIsSpecial&&bIsSpecial?-1:aIsSpecial&&bIsSpecial?a.index-b.index:compare(a.name+"",b.name+"")

})},this.updateNode=function(node){var isOpen=node.isOpen
this.close(node,null,!0),isOpen&&this.open(node,null,!0)},this.getClassName=function(node){return node.className||""

}}.call(DataProvider.prototype),DataProvider})


define("text!plugins/c9.ide.plugins/style.css",[],"")


define("plugins/c9.ide.plugins/gui",[],function(require,exports,module){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,menus.addItemByPath("Tools/~",new ui.divider,1e5,plugin),menus.addItemByPath("Tools/Developer",null,100100,plugin),
DEBUG||menus.addItemByPath("Tools/Developer/Start in Debug Mode",new ui.item({onclick:function(){var url=location.href+(location.href.indexOf("?")>-1?"&debug=2":"?debug=2")


util.openNewWindow(url)}}),900,plugin),void(ENABLED&&(commands.addCommand({name:"openPluginManager",group:"Plugins",
exec:function(){commands.exec("openpreferences",null,{panel:plugin})}},plugin),menus.addItemByPath("Tools/Developer/Open Plugin Explorer",new ui.item({
command:"openPluginManager"}),1100,plugin),DEBUG&&(notify("<div class='c9-readonly'>You are in <span style='color:rgb(245, 234, 15)'>Debug</span> Mode. <button id='.pm_btn1'>Open Plugin Explorer</button><button id='.pm_btn2' style='float:right'>Reload last Plugin</button>",!1),
document.getElementById(".pm_btn1").onclick=function(){commands.exec("openPluginManager")},btnReloadLast=document.getElementById(".pm_btn2"),
btnReloadLast.onclick=function(){commands.exec("reloadLastPlugin")},updateReloadLastButton(),pluginManager.readAvailablePlugins(function(err,available){
if(err)return console.error(err)
localPlugins=available,reloadModel(),sessionStorage.localPackages&&pluginManager.loadPackage(util.safeParseJson(sessionStorage.localPackages)||[])


var updateSessionStorage=function(){var packages=pluginManager.packages
sessionStorage.localPackages=JSON.stringify(Object.keys(packages).map(function(x){if(packages[x]&&packages[x].fromVfs&&packages[x].enabled)return packages[x].filePath

}).filter(Boolean))}
pluginManager.on("enablePackage",updateSessionStorage),pluginManager.on("disablePackage",updateSessionStorage)

}),commands.addCommand({name:"reloadLastPlugin",bindKey:{mac:"F4",win:"F4"},hint:"reload plugin last reloaded in plugin manager",
exec:function(){var names=getLastReloaded()
return names?void reload(names):commands.exec("openPluginManager",null,{panel:plugin})}},plugin),menus.addItemByPath("Tools/Developer/Reload Last Plugin",new ui.item({
command:"reloadLastPlugin",isAvailable:getLastReloaded}),1300,plugin)),menus.addItemByPath("File/New Plugin",null,210,plugin),
Object.keys(TEMPLATES).forEach(function(name){menus.addItemByPath("File/New Plugin/"+TEMPLATES[name],new ui.item({
onclick:function(){pluginManager.createNewPlugin(name)}}),210,plugin)}))))}function draw(e){function scheduleReloadModel(){
scheduleReloadModel.timer||(scheduleReloadModel.timer=setTimeout(function(){scheduleReloadModel.timer=null,
reloadModel()}))}function setTheme(e){filterbox.setAttribute("class",e.theme.indexOf("dark")>-1?"dark":"")

}function renderDetails(){var items=datagrid.selection.getSelectedNodes(),hasEnabled=0,hasDisabled=0
if(items.forEach(function(x){0!=x.enabled&&(hasEnabled=!0),1!=x.enabled&&(hasDisabled=!0)}),btnUninstall.setProperty("visible",hasEnabled),
btnInstall.setProperty("visible",hasDisabled),"services"==mode?(renderServiceDetails(items),btnServices.$ext.classList.add("serviceButtonActive"),
btnReadme.$ext.classList.remove("serviceButtonActive")):"readme"==mode?(renderReadmeDetails(items),btnReadme.$ext.classList.add("serviceButtonActive"),
btnServices.$ext.classList.remove("serviceButtonActive")):(descriptionBar.$ext.innerHTML="",btnReadme.$ext.classList.remove("serviceButtonActive"),
btnServices.$ext.classList.remove("serviceButtonActive")),1==items.length&&items[0].__error){var errorContainer=document.createElement("div")


errorContainer.style.cssText="padding: 5px; white-space: pre-wrap",errorContainer.textContent=items[0].__error.message,
descriptionBar.$ext.insertBefore(errorContainer,descriptionBar.$ext.firstChild)}}function renderReadmeDetails(items){
if(items.length>1)return void(descriptionBar.$ext.textContent="Multipe items selected.")
for(var item=items[0];item&&!item.packageConfig;)item=item.parent
if(!item)return void(descriptionBar.$ext.textContent="Readme is not available.")
if(readmeCache[item.name]){var div=document.createElement("div")
return div.textContent=readmeCache[item.name],div.style.cssText="padding: 5px; white-space: pre-wrap",
descriptionBar.$ext.textContent="",void descriptionBar.$ext.appendChild(div)}if(descriptionBar.$ext.textContent="Loading...",
item.packageConfig.filePath){var parts=item.packageConfig.filePath.split("/")
parts.pop(),parts.push("README.md")
var path=parts.join("/")
fs.readFile(path,function(e,v){return e?readmeCache[item.name]="Readme is not available.":(readmeCache[item.name]=v,
void renderDetails())})}}function renderServiceDetails(items){function addUnique(item,array){array.indexOf(item)==-1&&array.push(item)

}function splitToGroups(list,map){var groups=[]
return list.forEach(function(n){var level=Math.abs(map[n])
groups[level]||(groups[level]=[]),groups[level].push(n)}),groups=groups.filter(Boolean).slice(1)}function formatServices(list,style){
return"["+list.map(function(x){return'<span class="serviceButton">'+escapeHTML(x)+"</span>"}).join(", ")+"]"

}var provided=[]
items.forEach(function addProvides(x){x.map&&Object.keys(x.map).forEach(function(n){addProvides(x.map[n])

}),x.provides&&x.provides.forEach(function(p){addUnique(p,provided)})})
var consumedMap=Object.create(null)
provided.forEach(function(service){consumedMap[service]=0}),pluginManager.addAllProviders(consumedMap)


var consumedList=Object.keys(consumedMap),consumedGroups=splitToGroups(consumedList,consumedMap),dependents=Object.create(null)


provided.forEach(function(service){dependents[service]=0}),pluginManager.addAllDependents(dependents)


var depList=Object.keys(dependents),depGroups=splitToGroups(depList,dependents)
descriptionBar.$ext.style.overflow="auto"
var serviceDesc='<h1 class="pluginManagerHeader">Provided services ['+provided.length+']</h1>                    <p type="provided">'+(provided.length?formatServices(provided):"")+'</p>                    <h1 class="pluginManagerHeader">Consumed services ['+(consumedList.length-provided.length)+']</h1>                    <p type="consumed">'+consumedGroups.map(formatServices).join("<br/>")+'</p>                    <h1 class="pluginManagerHeader">Dependent services ['+(depList.length-provided.length)+']</h1>                    <p type="dependent">'+depGroups.map(formatServices).join("<br/>")+"</p>                    <br/>"


descriptionBar.$ext.innerHTML='<div class="basic intro"                     style="padding:12px 0 12px 12px;white-space:pre-line">                    <p>'+(1==items.length?'<span class="serviceButton">'+escapeHTML(items[0].path)+"</span>":(items.length||"no")+" plugins selected")+"</p>                    <hr></hr>"+(items.length?serviceDesc:"")+"</div>"

}function updateHighlights(){if(hoverDetails.hovered!=hoverDetails.highlighted){var serviceToPlugin=architectApp.serviceToPlugin


if(serviceToPlugin){var nodes=descriptionBar.$ext.querySelectorAll(".serviceButton"),deps=Object.create(null)


deps[hoverDetails.hovered]=0,pluginManager.addAllDependents(deps),pluginManager.addAllProviders(deps)


for(var i=0;i<nodes.length;i++){var node=nodes[i],val=node.textContent,highlight1=!1,highlight2=!1
"dependent"==hoverDetails.type?hoverDetails.parent!=node.parentNode&&"provided"!=node.parentNode.getAttribute("type")||(highlight1=deps[val]<0,
highlight2=deps[val]>0):"consumed"==hoverDetails.type&&(hoverDetails.parent!=node.parentNode&&"provided"!=node.parentNode.getAttribute("type")||(highlight1=deps[val]>0,
highlight2=deps[val]<0)),nodes[i].style.borderBottom=highlight1?"1px solid":"",highlight1||(nodes[i].style.borderBottom=highlight2?"1px dashed rgba(125, 125, 125, 0.9)":"")

}hoverDetails.highlighted=hoverDetails.hovered}}}function scheduleRedraw(){window.requestAnimationFrame(renderDetails)

}function updateScrollBarSize(){var scrollBarV=datagrid.renderer.scrollBarV,w=scrollBarV.isVisible?scrollBarV.getWidth():0


btnSettings.$ext.style.marginRight=Math.max(w-2,0)+"px"}if(!drawn){drawn=!0,ext.on("register",scheduleReloadModel),
pluginManager.on("change",scheduleReloadModel),pluginManager.on("enablePackage",scheduleReloadModel),
pluginManager.on("disablePackage",scheduleReloadModel),ui.insertCss(require("text!./style.css"),plugin),
model=new TreeData,model.emptyMessage="No plugins found",model.columns=[{caption:"Name",value:"name",
width:"250",type:"tree"},{caption:"Startup Time",width:"100",getText:function(p){function recur(p){return void 0!=p.time?total+=p.time:void(p.items&&p.items.forEach(recur))

}if(void 0!==p.time)return(p.time||0)+"ms"
var total=0
return recur(p),(p.time=total)+"ms"}},{caption:"Enabled",value:"enabled",width:"100"}],model.columns=null,
layout.on("eachTheme",function(e){var height=parseInt(ui.getStyleRule(".bar-preferences .blackdg .tree-row","height"),10)||24


model.rowHeightInner=height,model.rowHeight=height,e.changed&&datagrid.resize(!0)}),architectApp.on("ready-additional",function(){
reloadModel()}),reloadModel()
var treeBar,descriptionBar,hboxInner=(new ui.hbox({htmlNode:e.html,padding:5,edge:"10 10 0 10",childNodes:[filterbox=new apf.codebox({
realtime:!0,skin:"codebox","class":"dark",clearbutton:!0,focusselect:!0,height:27,width:250,singleline:!0,
"initial-message":"Search installed plugins"}),btnReadme=new ui.button({skin:"c9-toolbarbutton-glossy",
caption:"Readme","class":"serviceButton",onclick:function(){mode="readme",scheduleRedraw()}}),btnServices=new ui.button({
skin:"c9-toolbarbutton-glossy",caption:"services","class":"serviceButton",onclick:function(){mode="services",
scheduleRedraw()}}),new ui.filler({}),btnInstall=new ui.button({skin:"c9-toolbarbutton-glossy",caption:"Enable",
"class":"btn-red",onclick:function(){reloadGridSelection(!0)}}),btnUninstall=new ui.button({skin:"c9-toolbarbutton-glossy",
caption:"Disable","class":"btn-red",onclick:function(){reloadGridSelection(!1)}}),new ui.button({skin:"c9-toolbarbutton-glossy",
caption:"Reload",onclick:function(){reloadGridSelection()}})]}),new ui.hsplitbox({anchor:"0 0 0 0",htmlNode:e.html,
"class":"bar-preferences",splitter:!0,childNodes:[treeBar=new ui.bar({width:250}),descriptionBar=new ui.bar({
textselect:!0})]})),div=treeBar.$ext.appendChild(document.createElement("div"))
div.style.position="absolute",div.style.left="0px",div.style.right="0px",div.style.bottom="0px",div.style.top="0px",
hboxInner.$ext.style.position="absolute",hboxInner.$ext.style.left="10px",hboxInner.$ext.style.right="10px",
hboxInner.$ext.style.bottom="10px",hboxInner.$ext.style.top="50px",datagrid=new Tree(div),datagrid.setTheme({
cssClass:"blackdg"}),datagrid.setDataProvider(model),layout.on("resize",function(){datagrid.resize()},plugin),
layout.on("themeChange",setTheme),setTheme({theme:settings.get("user/general/@skin")}),filterbox.ace.commands.addCommands([{
bindKey:"Enter",exec:function(){}},{bindKey:"Esc",exec:function(ace){ace.setValue("")}}]),filterbox.ace.on("input",function(e){
applyFilter()}),datagrid.once("mousemove",function(){datagrid.resize(!0)}),datagrid.on("changeSelection",scheduleRedraw),
model.on("change",scheduleRedraw),plugin.on("reloadModel",scheduleRedraw),model.getCheckboxHTML=function(node){
var enabled=node.enabled
return null==enabled||node.isGroup?"":"<span class='checkbox "+(node.loading?"loading":"")+(enabled==-1?"half-checked ":enabled?"checked ":"")+"'></span>"

}
var mode="services",readmeCache={}
descriptionBar.$ext.addEventListener("click",function(e){if(!e.button){var el=e.target,isButton=el.classList.contains("serviceButton"),text=el.textContent,serviceToPlugin=architectApp.serviceToPlugin


if(1==e.detail&&isButton&&text){var path=serviceToPlugin[text]?serviceToPlugin[text].packagePath:text,node=function search(node){
if(node.path==path)return node
if(node.items)for(var i=0;i<node.items.length;i++){var result=search(node.items[i])
if(result)return result}}(model.cachedRoot)
node&&datagrid.reveal(node)}}})
var hoverDetails={hovered:"",highlighted:""}
descriptionBar.$ext.addEventListener("mousemove",function(e){if(!e.button){var el=e.target,isButton=el.classList.contains("serviceButton"),text=el.textContent


hoverDetails.parent=el.parentNode,hoverDetails.hovered=isButton?text:"",hoverDetails.type=isButton?el.parentNode.getAttribute("type"):"",
hoverDetails.hovered!=hoverDetails.highlighted&&requestAnimationFrame(updateHighlights)}})
var mnuCtxTree=new ui.menu({id:"mnuChat"},plugin)
menus.decorate(mnuCtxTree),plugin.addElement(mnuCtxTree),btnSettings=new ui.button({skin:"header-btn",
"class":"panel-settings",submenu:mnuCtxTree}),treeBar.appendChild(btnSettings),datagrid.renderer.on("scrollbarVisibilityChanged",updateScrollBarSize),
menus.addItemByPath("context/pluginManager/",mnuCtxTree,0,plugin),menus.addItemByPath("context/pluginManager/Reveal in File Tree",new ui.item({
isAvailable:function(){var selected=datagrid.selection.getCursor()
return selected&&selected.packageConfig&&selected.packageConfig.filePath||c9.sourceDir&&selected&&selected.path

},onclick:function(){var selected=datagrid.selection.getCursor(),tabbehavior=architectApp.services.tabbehavior,filePath=selected.packageConfig&&selected.packageConfig.filePath


!filePath&&c9.sourceDir&&(filePath=c9.sourceDir+"/"+selected.path+(selected.items?"":".js")),filePath?tabbehavior.revealtab({
path:util.normalizePath(filePath)}):showInfo("Path is not available.")}}),plugin),menus.addItemByPath("context/pluginManager/Refresh List",new ui.item({
onclick:function(){pluginManager.readAvailablePlugins(function(err,available){return err?console.error(err):(localPlugins=available,
void reloadModel())})}}),plugin),menus.addItemByPath("context/pluginManager/~",new ui.divider({}),plugin),
menus.addItemByPath("context/pluginManager/Disable",new ui.item({isAvailable:function(){var selected=datagrid.selection.getCursor()


return selected&&0!=selected.enabled},onclick:function(){reloadGridSelection(!1)}}),plugin),menus.addItemByPath("context/pluginManager/Enable",new ui.item({
isAvailable:function(){var selected=datagrid.selection.getCursor()
return selected&&1!=selected.enabled},onclick:function(){reloadGridSelection(!0)}}),plugin),menus.addItemByPath("context/pluginManager/Reload",new ui.item({
isAvailable:function(){var selected=datagrid.selection.getCursor()
return selected},onclick:function(){reloadGridSelection()}}),plugin),treeBar.setAttribute("contextmenu",mnuCtxTree),
model.on("toggleCheckbox",function(e){reloadGridSelection(!e.target.enabled,e.selectedNodes||[e.target])

})}}function reloadModel(){function addPlugin(plugin,node){if(plugin.provides&&plugin.consumes&&plugin.packagePath){
var parts=plugin.packagePath.split("/"),path=parts.shift()
parts.forEach(function(p,i){if(path=path+"/"+p,node.map||(node.map=Object.create(null)),node.map[p]||(node.map[p]={
path:path,parent:node}),node.map[p].name=p,i==parts.length-1){var enabled=1
node.map[p].provides=plugin.provides,plugin.provides.forEach(function(x){var service=architectApp.services[x]

;(!service||!service.loaded&&service.unload)&&(enabled=0)}),node.map[p].enabled=enabled}node=node.map[p],
node.className=plugin.__error?"load-error":"",node.__error=plugin.__error})}}function addPackage(name){
var pkg=packages[name],parent=pkg.filePath?groups.vfs:groups.remote,node=parent.map[name]=parent.map[name]||{
path:"plugins/"+name,name:name,enabled:0,parent:parent}
node.packageConfig=pkg,node.className=pkg.__error?"load-error":"",node.__error=pkg.__error,node.loading=pkg.loading

}function flatten(node,index){if(node.map&&(node.items=node.children=Object.keys(node.map).map(function(x){
return node.map[x]})),node.items){if(node.items.forEach(flatten),1==node.items.length&&!node.isGroup){
var other=node.items[0]
node.parent&&node.parent.items[index]==node&&(node.parent.items[index]=other,other.name=node.name+"/"+other.name,
other.packageConfig=node.packageConfig,other.filePath=node.filePath,other.url=node.url,other.loading=node.loading)

}node.isGroup||(node.enabled=null,node.items.some(function(i){if(null==node.enabled&&(node.enabled=i.enabled),
i.enabled!=node.enabled)return node.enabled=-1,!0}))}}if(model){var packages=pluginManager.packages
CORE.pluginManagerUi||(CORE.pluginManagerUi=1,pluginManager.addAllProviders(CORE),Object.keys(CORE).forEach(function(n){
architectApp.serviceToPlugin[n]&&(CORE[architectApp.serviceToPlugin[n].packagePath]=1)}))
var GROUPS={remote:"Remote Plugins",vfs:"Locally Installed Plugins",pre:"Pre-installed Plugins",core:"Core Plugins"
},groups=model.groups||Object.create(null)
if(!model.groups){var root=[]
model.cachedRoot={items:root},model.groups=groups,Object.keys(GROUPS).forEach(function(name){root.push(groups[name]={
map:Object.create(null),isOpen:"runtime"!=name,className:"group",isGroup:!0,isType:name,noSelect:!0,name:GROUPS[name]
})})}architectApp.config.forEach(function(plugin){var node=CORE[plugin.packagePath]?groups.core:groups.pre


addPlugin(plugin,node)}),localPlugins&&localPlugins.forEach(function(name){packages[name]||(packages[name]={
name:name,filePath:"~/.c9/plugins/"+name+"/package.json"})}),Object.keys(packages).forEach(function(n){
var pkg=packages[n],node=pkg.filePath?groups.vfs:groups.remote
addPackage(n),pkg.c9&&pkg.c9.plugins&&pkg.c9.plugins.forEach(function(plugin){addPlugin(plugin,node)})

}),flatten(model.cachedRoot),applyFilter(),emit("reloadModel")}}function applyFilter(){if(model.keyword=filterbox&&filterbox.getValue(),
model.keyword){model.reKeyword=new RegExp("("+util.escapeRegExp(model.keyword)+")","i")
var root=search.treeSearch(model.cachedRoot.items,model.keyword,!0)
model.setRoot(root)}else model.reKeyword=null,model.setRoot(model.cachedRoot)}function reload(names){
var nodes=names.split(/\s*,\s*/).map(function(name){return pluginManager.packages[name]?{packageConfig:pluginManager.packages[name]
}:{path:name}})
reloadGridSelection(null,nodes)}function reloadGridSelection(mode,nodes){nodes||(nodes=datagrid.selection.getSelectedNodes())


var reloadLast=pluginManager.reload(nodes,mode)
if(reloadLast.length){var href=document.location.href.replace(/[?&]reload=[^&]+/,"")
href+=(href.match(/\?/)?"&":"?")+"reload="+reloadLast.join(","),window.history.replaceState(window.history.state,null,href),
mode!==!1&&(showReloadTip(reloadLast.join(","),mode),updateReloadLastButton())}}function updateReloadLastButton(){
if(btnReloadLast){var last=getLastReloaded()
last?(btnReloadLast.visible=!0,btnReloadLast.textContent="Reload "+last):btnReloadLast.visible=!1}}function showReloadTip(name,mode){
if(options.devel){var key=commands.getPrettyHotkey("reloadLastPlugin")
if(!getLastReloaded())return void showInfo("Loaded "+name+". Press "+key+" to reload again.",3e3)}showInfo("Loaded "+name+" for the duration of current browser session.",3e3)

}function getLastReloaded(){return qs.parse(document.location.search.substr(1)).reload}var model,datagrid,filterbox,btnInstall,btnUninstall,btnServices,btnReadme,btnReloadLast,localPlugins,btnSettings,drawn,PreferencePanel=imports.PreferencePanel,settings=imports.settings,layout=imports.layout,commands=imports.commands,menus=imports.menus,ui=imports.ui,c9=imports.c9,fs=imports.fs,ext=imports.ext,util=imports.util,apf=imports.apf,showInfo=(imports["dialog.error"].show,
imports["dialog.info"].show),notify=imports["dialog.notification"].show,experimental=imports["preferences.experimental"],pluginManager=imports.pluginManager,architectApp=imports.app,search=require("../c9.ide.navigate/search"),Tree=require("ace_tree/tree"),TreeData=require("./managerdp"),qs=require("querystring"),escapeHTML=require("ace/lib/lang").escapeHTML,CORE={},TEMPLATES={
"plugin.simple":"Empty Plugin","plugin.default":"Full Plugin","plugin.installer":"Installer Plugin","plugin.bundle":"Cloud9 Bundle"
},DEBUG=c9.location.indexOf("debug=2")>-1,ENABLED=DEBUG||experimental.addExperiment("plugin-manager",options.devel,"SDK/Plugin Manager"),plugin=new PreferencePanel("Ajax.org",main.consumes,{
caption:"Plugin Explorer",className:"plugins",form:!1,noscroll:!0,index:200,visible:ENABLED}),emit=plugin.getEmitter(),loaded=!1


plugin.on("load",function(){load()}),plugin.on("draw",function(e){draw(e)}),plugin.on("activate",function(e){
datagrid&&datagrid.resize()}),plugin.on("resize",function(e){datagrid&&datagrid.resize()}),plugin.on("enable",function(){}),
plugin.on("disable",function(){}),plugin.on("unload",function(){loaded=!1,drawn=!1,btnServices=null,btnReadme=null,
btnReloadLast=null,model=null,datagrid=null,filterbox=null,btnInstall=null,btnUninstall=null,localPlugins=null

}),plugin.freezePublicAPI({get datagrid(){return datagrid}}),register(null,{pluginManagerUi:plugin})}
return main.consumes=["app","ext","c9","PreferencePanel","settings","ui","util","layout","menus","commands","pluginManager","dialog.error","dialog.info","tree.favorites","fs","tree","vfs","preferences.experimental","apf","dialog.notification"],
main.provides=["pluginManagerUi"],main})


define("plugins/c9.ide.plugins/manager",[],function(require,exports,module){function main(options,imports,register){
function load(){function loadDefaultPlugins(){setTimeout(function(){loadPackage(options.loadFromDisk,function(err){
if(err)return showError(err)})})}options.loadFromDisk&&(vfs.connected?loadDefaultPlugins():vfs.once("connect",loadDefaultPlugins))

}function readAvailablePlugins(callback){fs.readdir("~/.c9/plugins",function(err,list){if(err)return callback&&callback(err)


var available=[]
list.forEach(function(stat){var name=stat.name;/(directory|folder)$/.test(stat.mime)&&(/[._]/.test(name[0])||available.push(name))

}),callback&&callback(null,available)})}function createNewPlugin(template){function getPath(callback,i){
i=i||0
var path=join("~",".c9/plugins/",template+(i?"."+i:""))
fs.exists(path,function(exists){return exists?getPath(callback,i+1):void callback(null,path)})}function handleError(err){
showError("Could not create plugin."),console.error(err)}template||(template="c9.ide.default")
var tarSourcePath=join("templates",template+".tar.gz"),url=staticPrefix+"/"+tarSourcePath
url.match(/^http/)||(url=location.origin+url),getPath(function(err,path){if(err)return handleError(err)


var pluginsDir=join("~",".c9/plugins/_/"),pluginsDirAbsolute=pluginsDir.replace(/^~/,c9.home),tarPath=join(pluginsDir,template+".tar.gz"),tarPathAbsolute=tarPath.replace(/^~/,c9.home)


proc.execFile("bash",{args:["-c",["mkdir","-p",util.escapeShell(dirname(tarPathAbsolute)),";"].concat(c9.sourceDir?["cp",util.escapeShell(c9.sourceDir+"/plugins/c9.ide.plugins/"+tarSourcePath),util.escapeShell(tarPathAbsolute)]:["curl","-L",architectApp.services.onlinedev_helper?"-k":"",util.escapeShell(url),"-o",util.escapeShell(tarPathAbsolute)].filter(Boolean)).join(" ")]
},function(err,stderr,stdout){return err?handleError(err):void proc.execFile("bash",{args:["-c",["tar","-zxvf",util.escapeShell(tarPath),"-C",util.escapeShell(pluginsDirAbsolute)].join(" ")]
},function(err,stderr,stdout){if(err)return handleError(err)
var dirPath=join(dirname(tarPath),template)
fs.rename(dirPath,path,function(err){return err?handleError(err):void fs.unlink(tarPath,function(){var tree=architectApp.services.tree,favs=architectApp.services["tree.favorites"]


favs.addFavorite(dirname(pluginsDir),"plugins"),tree.expandAndSelect(path),readAvailablePlugins(function(e){
emit("change")})})})})})})}function reload(nodes,mode){var reloadLast=[]
return nodes.forEach(function(node){var id
if(node.packageConfig){var config=node.packageConfig
mode||unloadPackage(config.name),0!=mode&&loadPackage(config.filePath||config.url),id=config.name}else mode||unloadPlugins({
path:node.path}),0!=mode&&loadPlugins({path:node.path}),id=node.path
reloadLast.push(id),0==mode?disabledPlugins[id]=!0:delete disabledPlugins[id]}),reloadLast}function checkPluginsWithMissingDependencies(){
var services=architectApp.services,plugins=[]
getAllPlugins().forEach(function(p){if(p.provides.length){var packagePath=p.packagePath,isDisabled=p.provides.every(function(name){
return!services[name]||(!services[name].loaded&&"function"==typeof services[name].load||void 0)})
if(isDisabled&&packagePath){var packageName=packagePath.split("/")[1]
if(disabledPlugins[packageName])return
for(;packagePath&&!disabledPlugins[packagePath];){var i=packagePath.lastIndexOf("/")
packagePath=packagePath.slice(0,i>0?i:0)}packagePath||plugins.push(p)}}}),plugins.length&&architectApp.loadAdditionalPlugins(plugins,function(err){
if(err)return showError(err)})}function getAllPlugins(includeDisabled){var config=architectApp.config


return Object.keys(packages).forEach(function(n){packages[n]&&packages[n].c9&&packages[n].c9.plugins&&(config=config.concat(packages[n].c9.plugins))

}),includeDisabled?config:config.filter(function(x){return x.consumes&&x.provides})}function addAllDependents(plugins){
var config=getAllPlugins(),level=0
do{level++
var changed=!1,packageNames=Object.keys(plugins)
config.forEach(function(x){packageNames.forEach(function(p){x.consumes.indexOf(p)!=-1&&x.provides.forEach(function(name){
null==plugins[name]&&(changed=!0,plugins[name]=level)})})})}while(changed)
return plugins}function addAllProviders(plugins){var serviceToPlugin=architectApp.serviceToPlugin,level=0


do{level--
var changed=!1,packageNames=Object.keys(plugins)
packageNames.forEach(function(p){var service=serviceToPlugin[p]
service&&service.consumes&&service.consumes.forEach(function(name){null==plugins[name]&&(changed=!0,plugins[name]=level)

})})}while(changed)
return plugins}function unloadPackage(options,callback){if(Array.isArray(options))return async.map(options,unloadPackage,callback||function(){})


var name="object"==typeof options?options.name:options
packages[name]&&(packages[name].enabled=!1,unloadPlugins(packages[name].path),emit("disablePackage"))

}function loadPackage(options,callback){function addError(message,err){packages[name]||(packages[name]={}),
packages[name].filePath=options.path,packages[name].url=url,packages[name].__error=new Error(message+"\n"+err.message),
packages[name].loading=!1,emit("change"),callback&&callback(err)}function getPluginsFromPackage(json,callback){
var plugins=[]
json.name!=name&&(json.name=name)
var unhandledPlugins=json.c9&&json.c9.plugins||json.plugins
unhandledPlugins&&Object.keys(unhandledPlugins).forEach(function(name){var plugin=unhandledPlugins[name]


"string"==typeof plugin&&(plugin={packagePath:plugin}),plugin.packagePath||(plugin.packagePath=id+"/"+name),
plugin.staticPrefix=options.url,plugins.push(plugin)}),packages[json.name]=json,json.filePath=options.path,
json.url=url,json.c9||(json.c9={}),json.c9.plugins=plugins,json.enabled=!0,json.path=id,emit("enablePackage",json),
loadPlugins(plugins,function(err,result){return err?addError("Error loading plugins",err):(packages[name]&&(packages[name].loading=!1),
emit("change"),void(callback&&callback(err,result)))})}function loadBundleFiles(json,options,callback){
var cwd=dirname(options.path),resourceHolder=new Plugin
fs.readdir(cwd,function(err,files){function forEachFile(dir,fn){fs.readdir(dir,function(err,files){return err?callback&&callback(err):void files.forEach(function(stat){
fs.readFile(dir+"/"+stat.name,function(err,value){return err?callback&&callback(err):void fn(stat.name,value)

})})})}function parseHeader(data,filename){var firstLine=data.split("\n",1)[0].replace(/\/\*|\*\//g,"").trim(),info={}


return firstLine.split(";").forEach(function(n){var key=n.split(":")
return 2!=key.length?console.error("Ignoring invalid key "+n+" in "+filename):void(info[key[0].trim()]=key[1].trim())

}),info.data=firstLine,info}function addResource(type){forEachFile(cwd+"/"+type,function(filename,data){
addStaticPlugin(type,options.name,filename,data,plugin)})}function addMode(type){forEachFile(cwd+"/modes",function(filename,data){
if(!/(?:_highlight_rules|_test|_worker|_fold|_behaviou?r)\.js$/.test(filename)&&/\.js$/.test(filename)){
var info=parseHeader(data,cwd+"/modes/"+filename)
info.caption||(info.caption=filename),info.type="modes",info.filename=filename,addStaticPlugin(type,options.name,filename,data,plugin)

}})}if(err)return callback&&callback(err)
var handlers={templates:addResource,snippets:addResource,builders:addResource,keymaps:addResource,outline:addResource,
runners:addResource,themes:addResource,modes:addMode}
files.forEach(function(stat){var type=stat.name
handlers.hasOwnProperty(type)&&handlers[type](type)})
var name=options.name+".bundle",bundle={packagePath:id+"/"+name,consumes:[],provides:[name],setup:function(imports,options,register){
var ret={}
ret[name]=resourceHolder,register(null,ret)}}
json.c9.plugins.push(bundle),architectApp.loadAdditionalPlugins([bundle],function(){})})}if(Array.isArray(options))return async.map(options,loadPackage,callback||function(){})


"string"==typeof options&&(/^https?:/.test(options)?options={url:options}:/^[~\/]/.test(options)?options={
path:options}:/^[~\/]/.test(options)&&(options={url:require.toUrl(options)}))
var url=options.url
if(!options.url&&options.path){if(!vfs.connected)return vfs.once("connect",function(){loadPackage(options,callback)

})
options.url=vfs.url(options.path)}var parts=options.url.split("/"),root=parts.pop()
options.url=parts.join("/"),options.name||(options.name=/^package\.(.*)\.js$|$/.exec(root)[1],options.name&&"json"!=options.name||(options.name=parts[parts.length-1]),
/^(.?build|master|c9build)/.test(options.name)&&(options.name=parts[parts.length-2]),options.name=options.name.replace(/@.*$/,"")),
options.packageName||(options.packageName=root.replace(/\.js$/,"")),options.rootDir||(options.rootDir="plugins")


var name=options.name,id=options.rootDir+"/"+name,pathMappings={}
packages[name]&&(packages[name].loading=!0),unloadPlugins("plugins/"+options.name),pathMappings[id]=options.url,
requirejs.config({paths:pathMappings}),requirejs.undef(id+"/",!0),/\.js$/.test(root)?require([options.url+"/"+root],function(json){
if(json=json||require(id+"/"+options.packageName),!json){var err=new Error("Didn't provide "+id+"/"+options.packageName)


return addError("Error loading plugin",err)}Array.isArray(json)&&(json={plugins:json}),json.name&&json.name!=name&&(name=json.name),
getPluginsFromPackage(json,callback)},function(err){addError("Error loading plugin",err)}):options.path&&/\.json$/.test(root)?fs.readFile(options.path,function(err,value){
if(err)return addError("Error reading "+options.path,err)
try{var json=JSON.parse(value)}catch(e){return addError("Error parsing package.json",e)}json.fromVfs=!0,
json.c9||loadBundleFiles(json,options),getPluginsFromPackage(json,callback)}):options.url&&/\.json$/.test(root)?require(["text!"+options.id+"/"+root],function(value){
try{var json=JSON.parse(value)}catch(e){return addError("Error parsing package.json",e)}getPluginsFromPackage(json,callback)

},function(err){addError("Error loading plugin",err)}):callback&&callback(new Error("Missing path and url"))

}function loadPlugins(plugins,callback){Array.isArray(plugins)||(options=plugins,plugins=[],Object.keys(getServiceNamesByPath(options)).forEach(function(n){
var plugin=architectApp.serviceToPlugin[n]
plugin&&plugin.packagePath&&(unloadPluginConfig(plugin),plugins.push(plugin))})),architectApp.loadAdditionalPlugins(plugins,function(err){
setTimeout(checkPluginsWithMissingDependencies),callback&&callback&&callback(err)})}function getServiceNamesByPath(options){
function addPath(path){config.forEach(function(p){p.packagePath&&p.packagePath.startsWith(path)&&p.provides.forEach(function(name){
toUnload[name]=0})})}var toUnload=Object.create(null),config=getAllPlugins()
return options?("string"==typeof options&&addPath(options),options.path&&addPath(options.path),options.paths&&options.path.forEach(addPath),
options.services&&options.services.forEach(function(name){toUnload[name]=0}),toUnload):toUnload}function unloadPlugins(options,callback){
function recurUnload(name){var service=services[name]
if(service&&service.loaded){var deps=ext.getDependents(service.name)
deps.forEach(function(name){recurUnload(name)}),console.log(name),service.unload()
var pluginConfig=serviceToPlugin[name]
pluginConfig&&0==toUnload[name]&&(pluginConfig.__userDisabled=!0)}}var toUnload=getServiceNamesByPath(options)


addAllDependents(toUnload)
var services=architectApp.services,serviceToPlugin=architectApp.serviceToPlugin
Object.keys(toUnload).forEach(function(name){recurUnload(name)}),emit("change")}function unloadPluginConfig(plugin){
var url=requirejs.toUrl(plugin.packagePath,".js")
return!!define.fetchedUrls[url]&&(delete plugin.provides,delete plugin.consumes,delete plugin.setup,requirejs.undef(plugin.packagePath),
!0)}function addStaticPlugin(type,pluginName,filename,data,plugin){var services=architectApp.services,path="plugins/"+pluginName+"/"+("installer"==type?"":type+"/")+filename.replace(/\.js$/,"")


switch(type){case"builders":if(data=util.safeParseJson(data,function(){}),!data)return
if(!services.build.addBuilder)return
services.build.addBuilder(filename,data,plugin)
break
case"keymaps":if(data=util.safeParseJson(data,function(){}),!data)return
if(!services["preferences.keybindings"].addCustomKeymap)return
services["preferences.keybindings"].addCustomKeymap(filename,data,plugin)
break
case"modes":if(!services.ace)return
var mode={},firstLine=data.split("\n",1)[0].replace(/\/\*|\*\//g,"").trim()
firstLine.split(";").forEach(function(n){var info=n.split(":")
2==info.length&&(mode[info[0].trim()]=info[1].trim())}),services.ace.defineSyntax({name:path,caption:mode.caption||filename,
extensions:(mode.extensions||"").trim().replace(/\s*,\s*/g,"|").replace(/(^|\|)\./g,"$1")})
break
case"outline":if(!data)return
if(!services.outline.addOutlinePlugin)return
services.outline.addOutlinePlugin(path,data,plugin)
break
case"runners":if(data=util.safeParseJson(data,function(){}),!data)return
services.run.addRunner(data.caption||filename,data,plugin)
break
case"snippets":services["language.complete"].addSnippet(data,plugin)
break
case"themes":services.ace.addTheme(data,plugin)
break
case"templates":services.newresource.addFileTemplate(data,plugin)
break
case"installer":data?services.installer.createSession(pluginName,data,function(v,o){require([path],function(fn){
fn(v,o)})}):require([path],function(fn){services.installer.createSession(pluginName,fn.version,function(v,o){
fn(v,o)})})
default:console.error("Unsupported type",type)}}var c9=imports.c9,fs=imports.fs,ext=imports.ext,proc=imports.proc,Plugin=imports.Plugin,util=imports.util,vfs=imports.vfs,showError=imports["dialog.error"].show,architectApp=imports.app,join=require("path").join,dirname=(require("path").basename,
require("path").dirname),async=require("async"),staticPrefix=options.staticPrefix,plugin=new Plugin,emit=plugin.getEmitter(),disabledPlugins=Object.create(null),packages=Object.create(null)


plugin.on("load",function(){load()}),plugin.on("unload",function(){disabledPlugins=null,plugin=null}),
plugin.freezePublicAPI({readAvailablePlugins:readAvailablePlugins,createNewPlugin:createNewPlugin,getAllPlugins:getAllPlugins,
addAllDependents:addAllDependents,addAllProviders:addAllProviders,unloadPackage:unloadPackage,loadPackage:loadPackage,
loadPlugins:loadPlugins,reload:reload,getServiceNamesByPath:getServiceNamesByPath,unloadPlugins:unloadPlugins,
unloadPluginConfig:unloadPluginConfig,addStaticPlugin:addStaticPlugin,get packages(){return packages},
get disabledPlugins(){return disabledPlugins}})
var shim=new Plugin
shim.addStaticPlugin=addStaticPlugin,register(null,{pluginManager:plugin,"plugin.manager":shim,"plugin.debug":shim
})}return main.consumes=["app","ext","c9","Plugin","proc","fs","vfs","dialog.error","util"],main.provides=["pluginManager","plugin.manager","plugin.debug"],
main})


define("plugins/c9.core/util",[],function(require,exports,module){function main(options,imports,register){
function isMd5String(str){return/^[0-9a-f]{32}$/.test(str)}var c9=imports.c9,Plugin=imports.Plugin,normalize=require("path").normalize,plugin=new Plugin("Ajax.org",main.consumes)


plugin.escapeXpathString=function(name){if(!name)return""
if(name.indexOf('"')>-1){var out=[],parts=name.split('"')
return parts.each(function(part){out.push(""===part?"'\"'":'"'+part+'"')}),"concat("+out.join(", ")+")"

}return'"'+name+'"'},plugin.openNewWindow=function(url){var a=document.createElement("a")
a.rel="noreferrer",a.target="_blank",a.href=url,document.body.appendChild(a),a.click(),setTimeout(function(){
a.remove()})}
var SupportedIcons=function(){var extToClass=Object.create(null),classToExt={page_white_magnify:"c9search",
page_white_code:["clj","go","js","json","ml","mli","py","ts","xq"],page_white_code_red:["jsx","tsx","xml"],
css:["css","less","sass","scss"],page_white_picture:"svg",page_white_php:["php","phtml"],html:["html","xhtml"],
page_white_cup:["coffee","java"],logiql:"logic",page_white_ruby:["gemspec","rake","rb","ru"],page_white_c:["c","cc","cxx"],
page_white_cplusplus:"cpp",page_white_h:["h","hh","hpp"],image:["bmp","djv","djvu","gif","ico","jpeg","jpg","pbm","pgm","png","pnm","ppm","psd","svgz","tif","tiff","xbm","xpm"],
page_white_acrobat:"pdf",page_white_coldfusion:"cfm",page_white_database:["db","sql"],page_white_wrench:["bash","sh"],
page_white_zip:["bz","gz","tar","xz","zip"],page_white_compressed:"rar",page_white_swoosh:["exe","lnk","o","bin","class"],
page_white_text:"txt",page_white_gear:["bashrc","build","gitignore","profile","run","settings"]}
return Object.keys(classToExt).forEach(function(k){var exts=classToExt[k]
"string"==typeof exts&&(exts=[exts]),exts.forEach(function(ext){extToClass[ext]=k})}),extToClass}()
plugin.getFileIcon=function(name){var ext,icon="page_white_text"
return name&&(ext=name.split(".").pop().toLowerCase(),icon=SupportedIcons[ext]||"page_white_text"),icon

},plugin.getFileIconCss=function(staticPrefix){function iconCss(name,icon){return".filetree-icon."+name+'{background-image:url("'+staticPrefix+"/icons/"+(icon||name)+'.png")}'

}var css="",added={}
for(var i in SupportedIcons){var icon=SupportedIcons[i]
added[icon]||(css+=iconCss(icon)+"\n",added[icon]=!0)}return css},plugin.getContentType=function(filename){
return console.warn("util content type is deprecated"),"text/plain"},plugin.escapeRegExp=function(str){
return str.replace(/[-[\]{}()*+?.,\\^$|#\s"']/g,"\\$&")},plugin.escapeXml=window.apf?apf.escapeXML:function(){
alert("oops! apf needed for this")},plugin.replaceStaticPrefix=function(string){return string.replace(new RegExp("{c9.staticPrefix}","g"),c9.staticUrl)

},plugin.linkify=function(){var k="[a-z\\d.-]+://",h="(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])",c="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",n="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",f="(?:"+c+n+"|"+h+")",o="(?:[;/][^#?<>\\s]*)?",e="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",d="\\b"+k+"[^<>\\s]+",a="\\b"+f+o+e+"(?!\\w)",m="mailto:",j="(?:"+m+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+f+e+"(?!\\w)",l=new RegExp("(?:"+d+"|"+a+"|"+j+")","ig"),g=new RegExp("^"+k,"i"),b={
"'":"`",">":"<",")":"(","]":"[","}":"{","B;":"B+","b:":"b9"},i={callback:function(q,p){return p?'<a href="'+p+'" title="'+p+'">'+q+"</a>":q

},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/}
return function(u,z){z=z||{}
var w,v,A,p,s,E,C,y,q,D,B,r,x="",t=[]
for(v in i)void 0===z[v]&&(z[v]=i[v])
for(;w=l.exec(u);)if(A=w[0],E=l.lastIndex,C=E-A.length,!/[\/:]/.test(u.charAt(C-1))){do y=A,r=A.substr(-1),
B=b[r],B&&(q=A.match(new RegExp("\\"+B+"(?!$)","g")),D=A.match(new RegExp("\\"+r,"g")),(q?q.length:0)<(D?D.length:0)&&(A=A.substr(0,A.length-1),
E--)),z.punct_regexp&&(A=A.replace(z.punct_regexp,function(F){return E-=F.length,""}))
while(A.length&&A!==y)
p=A,g.test(p)||(p=(p.indexOf("@")!==-1?p.indexOf(m)?m:"":p.indexOf("irc.")?p.indexOf("ftp.")?"http://":"ftp://":"irc://")+p),
s!=C&&(t.push([u.slice(s,C)]),s=E),t.push([A,p])}for(t.push([u.substr(s)]),v=0;v<t.length;v++)x+=z.callback.apply(window,t[v])


return x||u}}(),plugin.stableStringify=function(obj,replacer,spaces){var sortByKeys=function(obj){if(!obj||"object"!=typeof obj||Array.isArray(obj))return obj


var sorted={}
return Object.keys(obj).sort().forEach(function(key){sorted[key]=sortByKeys(obj[key])}),sorted}
return JSON.stringify(sortByKeys(obj),replacer,spaces)},plugin.safeParseJson=function(strJson,cb){var data=strJson.replace(/(^|\n)\s*\/\/.*/g,"")


try{return JSON.parse(data)}catch(e){return cb&&cb(e),!1}},plugin.extend=function(dest,src){var prop,i,x=!dest.notNull


if(2==arguments.length){for(prop in src)(x||src[prop])&&(dest[prop]=src[prop])
return dest}for(i=1;i<arguments.length;i++){src=arguments[i]
for(prop in src)(x||src[prop])&&(dest[prop]=src[prop])}return dest},plugin.isEqual=function(o1,o2){for(var prop in o1)if(o1[prop]!=o2[prop])return!1


for(var prop in o2)if(o1[prop]!=o2[prop])return!1
return!0},plugin.toXmlTag=function(tag,attrs,noclose){return"<"+tag+" "+plugin.toXmlAttributes(attrs)+(noclose?">":" />")

},plugin.getGravatarUrl=function(email,size,defaultImage){var md5Email=email
return isMd5String(md5Email)||(md5Email=apf.crypto.MD5.hex_md5((email||"").trim().toLowerCase())),"https://secure.gravatar.com/avatar/"+md5Email+"?s="+size+"&d="+(defaultImage||"retro")

}
var reHome,reWorkspace,homeSub
plugin.$initPaths=function(home,workspaceDir){var pre="win32"==c9.platform?"/?":""
reHome=new RegExp("^"+pre+plugin.escapeRegExp(home)+"(/|/?$)")
var wd=workspaceDir.replace(/\/?$/,"")
reWorkspace=new RegExp("^"+pre+plugin.escapeRegExp(wd)+"(/|/?$)"),homeSub="~/",home==workspaceDir?(reHome=new RegExp("^("+pre+plugin.escapeRegExp(home)+"|~)(/|/?$)"),
homeSub="/",reWorkspace=null):reHome.test(workspaceDir)?reWorkspace=new RegExp("^"+pre+plugin.escapeRegExp(workspaceDir.replace(reHome,"~/"))+"(/|/?$)"):reWorkspace.test(home)&&(reHome=new RegExp("^("+pre+plugin.escapeRegExp(home)+"|~)(/|/?$)"),
homeSub=home.replace(reWorkspace,"/").replace(/\/?$/,"/"),reWorkspace=null)},plugin.$initPaths(c9.home||"/home/ubuntu",c9.workspaceDir||"/"),
plugin.normalizePath=function(path){return path?(path=normalize(path),reHome&&(path=path.replace(reHome,homeSub),
reWorkspace&&(path=path.replace(reWorkspace,"/"))),path):""},plugin.toXmlAttributes=function(obj){var xml=Object.keys(obj).map(function(k){
return k+'="'+apf.escapeXML(obj[k])+'"'}).join(" ")
return xml},plugin.shadeColor=function(base,factor){var m=base.match(/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/)


if(!m){if(m=base.match(/(\w\w)(\w\w)(\w\w)/),!m){if(m=base.match(/(\w)(\w)(\w)/),!m)return base
m=[0,m[1]+m[1],m[2]+m[2],m[3]+m[3]]}m=[0,parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16)]}var R=m[1],G=m[2],B=m[3]


return{isLight:.2126*R+.7152*G+.0722*B>150,color:"rgb("+parseInt(R*factor,10)+", "+parseInt(G*factor,10)+", "+parseInt(B*factor,10)+")"
}},plugin.getBox=function(value,base){if(base||(base=0),null===value||!parseInt(value,10)&&0!==parseInt(value,10))return[0,0,0,0]


for(var x=String(value).split(/\s* \s*/),i=0;i<x.length;i++)x[i]=parseInt(x[i],10)||0
switch(x.length){case 1:x[1]=x[0],x[2]=x[0],x[3]=x[0]
break
case 2:x[2]=x[0],x[3]=x[1]
break
case 3:x[3]=x[1]}return x},plugin.escapeShell=function(cmd){var re=/([\#\&\;\`\|\*\?<>\^\(\)\[\]\{\}\$\,\x0A\xFF\' \"\\])/g


return cmd.replace(re,"\\$1")}
var cloneObject=plugin.cloneObject=function(obj,shallow){if(null===obj||"object"!=typeof obj)return obj


var copy=Array.isArray(obj)?[]:{}
return Object.keys(obj).forEach(function(k){copy[k]=shallow?obj[k]:cloneObject(obj[k])}),copy}
plugin.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,
plugin.nextFrame?plugin.nextFrame=plugin.nextFrame.bind(window):plugin.nextFrame=function(callback){setTimeout(callback,17)

},plugin.freezePublicAPI({get supportedIcons(){return SupportedIcons},set supportedIcons(value){SupportedIcons=value

}}),register(null,{util:plugin})}return main.consumes=["c9","Plugin"],main.provides=["util"],main})


define("plugins/c9.core/http-xhr",[],function(require,module,exports){"use strict"
function main(options,imports,register){function request(url,options,callback){function done(err,data,res){
timer&&clearTimeout(timer),called||(called=!0,callback(err,data,res))}if(!callback)return request(url,{},options)


if("string"==typeof options)return request(url,{method:options},callback)
var method=options.method||"GET",headers=options.headers||{},body=options.body||"",contentType=options.contentType||"application/x-www-form-urlencoded; charset=UTF-8",timeout=options.hasOwnProperty("timeout")?options.timeout:1e4,async=options.sync!==!0,parsedUrl=parseUrl(url,options.query)


"application/json"===contentType&&(headers.Accept=headers.Accept||"application/json"),options.username&&(headers.Authorization="Basic "+btoa(options.username+":"+options.password))


var xhr=new XHR
if(options.overrideMimeType&&(xhr.overrideMimeType=options.overrideMimeType),options.progress){var obj="PUT"==method?xhr.upload:xhr


obj.onprogress=function(e){e.lengthComputable&&options.progress(e.loaded,e.total)}}xhr.open(method,URL.format(parsedUrl),async),
headers["Content-Type"]=contentType
for(var header in headers)xhr.setRequestHeader(header,headers[header])
if("object"==typeof body)if(0===contentType.indexOf("application/json"))try{body=JSON.stringify(body)

}catch(e){return done(new Error("Could not serialize body as json"))}else 0===contentType.indexOf("application/x-www-form-urlencoded")?body=qs.stringify(body):["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(body))>-1?xhr.overrideMimeType=body.type:body=body.toString()


options.withCredentials&&(xhr.withCredentials=!0)
var timer
timeout&&(timer=setTimeout(function(){xhr.abort()
var err=new Error("Timeout")
err.code="ETIMEOUT",err.data={url:url,query:options.query,timeout:timeout},done(err)},timeout)),xhr.send(body||"")


var abort=xhr.abort
xhr.abort=function(){clearTimeout(timer),abort.call(xhr)},xhr.onload=function(e){var res={body:xhr.responseText,
status:xhr.status,headers:parseHeaders(xhr.getAllResponseHeaders()),$reqHeaders:headers},data=xhr.responseText,contentType=options.overrideMimeType||res.headers["content-type"]||""


if(0===contentType.indexOf("application/json"))try{data=JSON.parse(data)}catch(e){return done(e)}if(xhr.status>299||"text/x-error"==res.headers["content-type"]){
var err=new Error(xhr.responseText)
return err.code=xhr.status,debug&&xhr.status>299&&console.error("HTTP error "+xhr.status+": "+xhr.responseText),
done(err,data,res)}done(null,data,res)},xhr.onerror=function(e){if("function"==typeof XMLHttpRequestProgressEvent&&e instanceof XMLHttpRequestProgressEvent){
var err=new Error("Failed to retrieve resource from "+parsedUrl.host)
return err.cause=e,err.code=e.target.status,done(err)}e.code=e.target.status,done(e)}
var called=!1
return xhr}function jsonP(url,options,callback){if(!callback)return jsonP(url,{},options)
var cbName="__josnpcallback"+callbackId++,callbackParam=options.callbackParam||"callback",parsedUrl=parseUrl(url,options.query)


parsedUrl.query[callbackParam]=cbName,window[cbName]=function(json){delete window.cbName,callback(json)

}
var head=document.getElementsByTagName("head")[0]||document.documentElement,s=document.createElement("script")


s.src=URL.format(parsedUrl),head.appendChild(s),s.onload=s.onreadystatechange=function(_,isAbort){!isAbort&&s.readyState&&"loaded"!=s.readyState&&"complete"!=s.readyState||(head.removeChild(s),
s=s.onload=s.onreadystatechange=null)}}function parseUrl(url,query){query=query||{}
var parsedUrl=URL.parse(url,!0)
for(var key in query)parsedUrl.query[key]=query[key]
return delete parsedUrl.search,parsedUrl}function parseHeaders(headerString){return headerString.split("\r\n").reduce(function(headers,headerPair){
var index=headerPair.indexOf(": ")
if(index>0){var key=headerPair.substring(0,index).toLowerCase(),val=headerPair.substring(index+2)
headers[key]=val}return headers},{})}var URL=require("url"),qs=require("querystring"),plugin=new imports.Plugin("Ajax.org",main.consumes),debug=options.debug!==!1,callbackId=1


plugin.freezePublicAPI({request:request,jsonP:jsonP}),register(null,{http:plugin})}var XHR=XMLHttpRequest


return main.consumes=["Plugin"],main.provides=["http"],main})


define("plugins/c9.core/ext",[],function(require,exports,module){function main(options,imports,register){
function uid(type,name){for(;!name||lut[name];)counters[type]||(counters[type]=0),name=type+counters[type]++


return settings&&counters[type]&&settings.set("state/ext/counters/@"+type,counters[type]),name}function registerPlugin(plugin,loaded){
plugins.indexOf(plugin)==-1&&plugins.push(plugin),lut[plugin.name]=plugin,loaded(!0)
var deps=plugin.deps
deps&&deps.forEach(function(dep){(dependencies[dep]||(dependencies[dep]={}))[plugin.name]=1}),emit("register",{
plugin:plugin})}function unregisterPlugin(plugin,loaded,ignoreDeps,keep){if(plugin.registered){if(!ignoreDeps&&getDependents(plugin.name).length)return!1


keep||plugins.splice(plugins.indexOf(plugin),1),delete lut[plugin.name],loaded(!1,0)
var deps=plugin.deps
deps&&dependencies&&deps.forEach(function(dep){delete dependencies[dep][plugin.name]}),emit("unregister",{
plugin:plugin})}}function getDependents(pluginName){var usedBy=[]
if(dependencies){var deps=dependencies[pluginName]
deps&&Object.keys(deps).forEach(function(name){usedBy.push(name)})}return usedBy}function unloadAllPlugins(exclude){
function unload(plugin){if(!(!plugin||exclude&&exclude[plugin.name])){var deps=dependencies[plugin.name]


deps&&Object.keys(deps).forEach(function(name){unload(lut[name])}),plugin.unload(null,!0)}}lut.settings&&lut.settings.unload(null,!0)


for(var list=plugins.slice(0),i=list.length-1;i>=0;i--){var plugin=list[i]
plugin.loaded&&(plugin.unload?unload(plugin):console.warn("Ignoring not a plugin: "+plugin.name))}}function loadRemotePlugin(id,options,callback){
var vfs=architectApp.services.vfs
vfs.extend(id,options,function(err,meta){callback(err,meta&&meta.api)})}function fetchRemoteApi(id,callback){
var vfs=architectApp.services.vfs
vfs.use(id,{},function(err,meta){callback(err,meta&&meta.api)})}function unloadRemotePlugin(id,options,callback){
"function"==typeof options&&(callback=options,options={}),vfs.unextend(id,options,callback)}function enablePlugin(name){
if(!lut[name]&&!manuallyDisabled[name])throw new Error("Could not find plugin: "+name);(lut[name]||manuallyDisabled[name]).load(name)

}function disablePlugin(name){if(!lut[name])throw new Error("Could not find plugin: "+name)
var plugin=lut[name]
if(plugin.unload({keep:!0})===!1)throw new Error("Failed unloading plugin: "+name)
manuallyDisabled[name]=plugin}function Plugin(developer,deps){function init(reg){registered=reg}function getElement(name,callback){
if(!callback){if("undefined"==typeof apf)return{}
if(!names[name])throw new Error("Could not find AML element by name '"+name+"'")
return names[name]}names[name]?callback(names[name]):(waiting[name]||(waiting[name]=[])).push(callback)

}function addElement(){function recur(node){(node.childNodes||[]).forEach(recur)
var id=node.id
id&&(delete window[id],names[id]=node,"page"!=node.localName&&(node.id="element"+node.$uniqueId,apf.nameserver.lookup.all[node.id]=node),
waiting[id]&&(waiting[id].forEach(function(callback){callback(node)}),delete waiting[id]))}for(var i=0;i<arguments.length;i++){
var node=arguments[i]
elements.push(node),recur(node)}return arguments[0]}function addEvent(emitter,type,listener){listener.listenerId||(listener.listenerId=$id++),
events.push([emitter.name,type,listener.listenerId])}function addOther(o){other.push(o)}function initLoad(type,listener){
"load"==type&&listener()}function load(nm,type){var dt=Date.now()
type&&(nm=uid(type,nm)),nm&&!name&&(name=nm),event.name=name,eventRegistry[name]=event,registerPlugin(this,init),
loaded=!0,event.emit("load"),event.on("newListener",initLoad),time=Date.now()-dt}function enable(){emit("enablePlugin",{
plugin:this}),event.emit("enable"),disabled=!1}function disable(){emit("disablePlugin",{plugin:this}),
event.emit("disable"),disabled=!0}function unload(e,ignoreDeps){if(loaded){if(event.emit("beforeUnload",e)===!1)return!1


if(unregisterPlugin(this,init,ignoreDeps,e&&e.keep)===!1)return!1
loaded=!1,event.emit("unload",e),this.cleanUp(),event.off("newListener",initLoad),setTimeout(function(){
eventRegistry[name]!=event||loaded||delete eventRegistry[name]})}}function cleanUp(what,otherPlugin){
what&&!~what.indexOf("elements")||(elements.forEach(function(element){element.destroy(!0,!0)}),elements=[],
names={},waiting=[]),what&&!~what.indexOf("events")||(events.forEach(function(eventRecord){var event=eventRegistry[eventRecord[0]]


if(event&&(!otherPlugin||otherPlugin.name==event.name)){var type=eventRecord[1],id=eventRecord[2],_events=event._events,eventList=_events&&_events[type]


"function"==typeof eventList?eventList.listenerId==id&&event.off(type,eventList):Array.isArray(eventList)&&eventList.some(function(listener){
if(listener.listenerId==id)return event.off(type,listener),!0})}}),events=[],onNewEvents={}),what&&!~what.indexOf("other")||(other.forEach(function(o){
o()}),other=[])}var elements=[],names={},waiting={},events=[],other=[],name="",time=0,registered=!1,loaded=!1,event=new Emitter,disabled=!1,onNewEvents={},declaredEvents=[]


this.deps=deps,this.developer=developer,event.on("newListener",function(type,listener){if(type in onNewEvents){
var data=onNewEvents[type]
data===-1?event.emit("$event."+type,listener):(listener(onNewEvents[type]),event.listeners(type).indexOf(listener)>-1&&console.trace("Used 'on' instead of 'once' to listen to sticky event "+name+"."+type))

}}),this.getEmitter=function(){function unsticky(name,e){delete onNewEvents[name]}var emit=event.emit.bind(event),_self=this,sticky=function(name,e,plugin){
return plugin?(_self.on("$event."+name,function(listener){listener(e)},plugin),onNewEvents[name]=-1):onNewEvents[name]=e,
emit(name,e)}
return emit.listeners=event.listeners.bind(event),emit.setMaxListeners=event.setMaxListeners.bind(event),
emit.sticky=sticky,emit.unsticky=unsticky,emit},this.freezePublicAPI=function(api){return api._events&&(api._events.forEach(function(name){
declaredEvents[name]=!0}),delete api._events),Object.keys(api).forEach(function(key){var d=Object.getOwnPropertyDescriptor(api,key)


Object.defineProperty(this,key,d)},this),baseclass||(delete this.baseclass,delete this.freezePublicAPI.baseclass,
delete this.freezePublicAPI,delete this.setAPIKey,delete this.getEmitter,Object.freeze(this)),baseclass=!1,
this}
var baseclass
this.baseclass=this.freezePublicAPI.baseclass=function(){baseclass=!0},this.baseclass(),this.freezePublicAPI({
_events:["load","beforeUnload","unload","enable","disable","newListener","removeListener"],get registered(){
return registered},get time(){return time},get enabled(){return!disabled},get loaded(){return loaded},
get name(){return name},set name(val){if(name!=val){if(name)throw new Error("Plugin Name Exception")
name=val,this.load()}},getElement:getElement,addElement:addElement,addEvent:addEvent,addOther:addOther,
load:load,enable:enable,disable:disable,unload:unload,cleanUp:cleanUp,on:function(eventName,callback,plugin){
event.on(eventName,callback,plugin)},once:function(eventName,callback){event.once(eventName,callback)

},off:event.removeListener.bind(event),listeners:event.listeners.bind(event)})}var settings,api,Emitter=require("events").EventEmitter,architectApp=imports.app,plugins=[],lut={},manuallyDisabled={},dependencies={},counters={},$id=1,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


plugin.__defineSetter__("settings",function(remote){settings=remote,settings.on("read",function(){var s=settings.getNode("state/ext/counters")


for(var type in s)counters[type]=s[type.substr(1)]}),delete plugin.settings}),plugin.__defineSetter__("api",function(remote){
api=remote,delete plugin.api})
var eventRegistry=Object.create(null)
plugin.freezePublicAPI({get plugins(){return plugins.slice(0)},get named(){var named=Object.create(lut)


for(var name in manuallyDisabled)lut[name]||(lut[name]=manuallyDisabled[name])
return named},_events:["register","unregister"],loadRemotePlugin:loadRemotePlugin,fetchRemoteApi:fetchRemoteApi,
unloadRemotePlugin:unloadRemotePlugin,unloadAllPlugins:unloadAllPlugins,getDependents:getDependents,enablePlugin:enablePlugin,
disablePlugin:disablePlugin}),register(null,{ext:plugin,Plugin:Plugin})}return main.consumes=["app"],
main.provides=["ext","Plugin"],main})


define("plugins/c9.core/settings",[],function(require,exports,module){function main(options,imports,register){
function loadSettings(json){if(!json){if("defaults"==options.settings||testing)json=TEMPLATE
else if(options.settings){json=options.settings,debugMode&&(json.state=localStorage["debugState"+c9.projectName])


for(var type in json)if("string"==typeof json[type])try{json[type]=JSON.parse(json[type])}catch(e){json[type]=TEMPLATE[type]

}}var count=KEYS.length
if(KEYS.forEach(function(type){return!skipCloud[type]&&json?--count:void fs.readFile(PATH[type],function(err,data){
json||(json={})
try{json[type]=err?{}:JSON.parse(data)}catch(e){console.error("Invalid Settings Read for ",type,": ",data),
json[type]={}}0===--count&&loadSettings(json)})}),count>0)return}read(json),events(),resetSettings&&saveToFile(),
KEYS.forEach(function(type){var node=model[type]
node&&(cache[type]=JSON.stringify(node))}),model.loaded=!0}function checkSave(){dirty&&saveToFile()}function startTimer(){
c9.readonly||(clearInterval(timer),timer=setInterval(checkSave,INTERVAL))}function save(force,sync){dirty=!0,
force&&(saveToFile(),startTimer())}function saveToFile(sync){if(!c9.readonly&&plugin.loaded)return c9.debug&&console.log("Saving Settings..."),
emit("write",{model:model}),model.time=(new Date).getTime(),develMode?void(dirty=!1):void saveModel(sync)

}function saveModel(forceSync){!c9.readonly&&c9.has(c9.NETWORK)&&(model.loaded&&!testing&&KEYS.forEach(function(type){
var node=model[type]
if(node){var json=util.stableStringify(node,null,"state"==type?"":4)
if(cache[type]!=json){if(cache[type]=json,debugMode&&"state"==type)return void(localStorage["debugState"+c9.projectName]=json)


var standalone=!options.hosted
if(!((standalone||"project"==type||skipCloud[type])&&(fs.writeFile(PATH[type],json,forceSync,function(err){}),
standalone&&!saveToCloud[type]||skipCloud[type]))){var addPid="user"!==type?"/"+info.getWorkspace().id:""


api.settings.put(type+addPid,{body:{settings:json},sync:forceSync},function(err){})}}}}),dirty=!1)}function read(json,isReset){
try{if(testing)throw"testing"
if(KEYS.forEach(function(type){json[type]&&(model[type]=json[type])}),resetSettings){var query=(1==resetSettings?"user|state":resetSettings).split("|")


query.forEach(function(type){model[type]=TEMPLATE[type]})}}catch(e){KEYS.forEach(function(type){model[type]=TEMPLATE[type]

})}if(c9.debug||testing)emit("read",{model:model,ext:plugin,reset:isReset})
else try{emit("read",{model:model,ext:plugin,reset:isReset})}catch(e){console.error("Error loading settings, reseting to defaults"),
console.error(e),fs.writeFile(PATH.project+".broken",JSON.stringify(json),function(){}),KEYS.forEach(function(type){
model[type]=TEMPLATE[type]}),emit("read",{model:model,ext:plugin,reset:isReset})}inited||(inited=!0,plugin.on("newListener",function(type,cb){
if("read"==type)if(c9.debug||debug)cb({model:model,ext:plugin})
else try{cb({model:model,ext:plugin})}catch(e){console.error(e.message,e.stack)}}))}function events(){
hasSetEvents||(hasSetEvents=!0,startTimer(),c9.on("beforequit",function(){emit("write",{model:model,unload:!0
}),saveModel(!0)},plugin),c9.on("stateChange",function(e){e.state|c9.NETWORK&&e.last|c9.NETWORK&&saveToFile()

},plugin))}function migrate(pathFrom,pathTo){var idx=pathFrom.lastIndexOf("/"),nodeParent=getNode(pathFrom.substr(0,idx)),name=pathFrom.substr(idx+1),nodeFrom=nodeParent&&nodeParent[name]


if(nodeFrom){delete nodeParent[name]
var nodeTo=getNode(pathTo)||setNode(pathTo,{})&&getNode(pathTo)
for(var prop in nodeFrom)nodeTo[prop]=nodeFrom[prop]}}function setDefaults(path,attr){var changed,node=getNode(path)||set(path,{},!0,!0)&&getNode(path)


attr.forEach(function(a){var name="@"+a[0]
node.hasOwnProperty(name)||(node[name]=a[1],emit(path+"/"+name,a[1]),changed=!0)}),changed&&emit(path)

}function update(type,json,ud){userData=ud,function recur(source,target,base){for(var prop in source)"json()"==prop?target&&isEqual(source[prop],target[prop])||setJson(base,source[prop]):"object"==typeof source[prop]?(target[prop]||(target[prop]={}),
recur(source[prop],target[prop],join(base,prop))):source[prop]!=target[prop]&&set(join(base,prop),source[prop])

}(json,model[type],type),userData=null}function isEqual(a,b){var typeA=typeof a,typeB=typeof b
if(typeA!=typeB)return!1
if(!a||"object"!==typeA)return a===b
if(Array.isArray(a)){if(!Array.isArray(b))return!1
if(a.length!=b.length)return!1
for(var i=0;i<a.length;i++)if(!isEqual(a[i],b[i]))return!1}else{var aKeys=Object.keys(a),bKeys=Object.keys(b)


if(aKeys.length!=bKeys.length)return!1
for(var i=0;i<aKeys.length;i++)if(!isEqual(a[aKeys[i]],b[aKeys[i]]))return!1}return!0}function setNode(query,value){
return set(query,value,!0)}function set(query,value,isNode,isDefault,checkDefined){if(!inited&&!isDefault)return!1


var parts=query.split("/"),key=parts.pop()
isNode||"@"===key.charAt(0)||(parts.push(key),key="json()")
var hash=model
if(!parts.every(function(part){return!(!hash[part]&&checkDefined)&&(hash=hash[part]||(hash[part]={}))

}))return console.warn("Setting non defined query: ",query),!1
if(hash[key]!==value){var oldValue=hash[key]
return hash[key]=value,emit(parts.join("/"),value,oldValue),emit(query,value,oldValue),scheduleAnnounce(parts[0],userData),
dirty=!0,!0}}function scheduleAnnounce(type,userData){clearTimeout(timers[type]),timers[type]=setTimeout(function(){
emit("change:"+type,{data:model[type],userData:userData})})}function setJson(query,value){return set(query,value)

}function getJson(query){var json=get(query,!0)
if(query.indexOf("@")==-1&&query.indexOf("json()")==-1&&(json=json["json()"]),"object"==typeof json)return JSON.parse(JSON.stringify(json))


if("string"==typeof json)try{return JSON.parse(json)}catch(e){}return!1}function getBool(query){var bool=get(query)


return ui.isTrue(bool)||!ui.isFalse(bool)&&void 0}function getNumber(query){var double=get(query)
return parseFloat(double)}function getNode(query){return get(query,!0)}function get(query,isNode){var parts=query.split("/")


isNode||"@"===parts[parts.length-1].charAt(0)||parts.push("json()")
var hash=model
return parts.every(function(part){return hash=hash[part]}),void 0===hash?"":hash}function exist(query){
var parts=query.split("/"),hash=model
return parts.every(function(part){return hash=hash[part]})}function reset(query){query||(query="user|state")


var info={}
query.split("|").forEach(function(type){info[type]=TEMPLATE[type]}),read(model,!0),saveToFile()}var c9=imports.c9,ext=imports.ext,ui=imports.ui,Plugin=imports.Plugin,fs=imports.fs,proc=imports.proc,api=imports.api,info=imports.info,util=imports.util,join=require("path").join,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


info.settings=plugin,ext.settings=plugin,emit.setMaxListeners(1e4)
var resetSettings=options.reset||c9.location.match(/reset=([\w\|]*)/)&&RegExp.$1,develMode=c9.location.indexOf("devel=1")>-1,debugMode=c9.location.indexOf("debug=2")>-1,testing=options.testing,debug=options.debug


resetSettings&&window.history&&window.history.pushState(null,null,location.href.replace(/reset=([\w\|]*)/,""))


var userData,TEMPLATE=options.template||{user:{},project:{},state:{}},INTERVAL=1e3,PATH={project:util.normalizePath(c9.toInternalPath(options.projectConfigPath||"/.c9"))+"/project.settings",
user:util.normalizePath(c9.toInternalPath(options.userConfigPath||"~/.c9"))+"/user.settings",state:util.normalizePath(c9.toInternalPath(options.stateConfigFilePath||(options.stateConfigPath||"/.c9")+"/state.settings"))
},KEYS=Object.keys(PATH),saveToCloud={},model={},cache={},diff=0,skipCloud={}
c9.location.replace(/[&?](state|project|user)=([\w]+)/g,function(_,type,val){val&&(PATH[type]=PATH[type].replace(/.settings$/,function(){
return"."+val+".settings"}),skipCloud[type]=!0)})
var dirty,timer,hasSetEvents,inited=!1,timers={}
plugin.on("load",function(){ui.settings=plugin,proc.execFile("node",{args:["-e","console.log(Date.now())"]
},function(err,stdout,stderr){if(!err&&!stderr){var time=parseInt(stdout,10)
diff=Date.now()-time}})}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),plugin.on("unload",function(){
dirty=!1,diff=0,userData=null,inited=!1,clearInterval(timer)}),plugin.freezePublicAPI({model:model,get inited(){
return inited},get timeOffset(){return diff},get paths(){return PATH},get saveToCloud(){return saveToCloud

},_events:["read","write"],save:save,read:read,set:set,setJson:setJson,get:get,getJson:getJson,getBool:getBool,
getNumber:getNumber,getNode:getNode,exist:exist,setDefaults:setDefaults,migrate:migrate,reset:reset,update:update
}),c9.connected||options.settings?loadSettings():c9.once("connect",loadSettings),register(null,{settings:plugin
})}return main.consumes=["c9","ui","Plugin","fs","proc","api","info","ext","util"],main.provides=["settings"],
main})


define("plugins/c9.core/c9",[],function(require,module,exports){function main(options,imports,register){
function load(){return!loaded&&(loaded=!0,loggedIn=parseInt(plugin.uid,10)>0,vfs.connection&&setStatus(state|STORAGE|PROCESS),
vfs.connected&&setStatus(state|NETWORK),plugin.local&&setStatus(state|LOCAL),vfs.on("connecting",function(){
emit("connecting")},plugin),vfs.on("disconnect",function(reason){setStatus(state&~STORAGE&~PROCESS&~NETWORK),
emit("disconnect")},plugin),vfs.on("connect",function(){setStatus(state|NETWORK|STORAGE|PROCESS),emit("connect")

},plugin),vfs.on("error",function(message){setStatus(state&~STORAGE&~PROCESS),emit("showerrormessage",message)!==!1&&console.error("Error on server","Received following error from server:",JSON.stringify(message.message))

},plugin),vfs.on("message",function(message){emit("message",message)},plugin),vfs.on("away",function(){
emit("away")},plugin),vfs.on("back",function(){emit("back")},plugin),window.addEventListener("beforeunload",beforequit),
void window.addEventListener("unload",quit))}function setStatus(s){state=s,emit("stateChange",{state:s,
last:state})}function has(check){return!!(state&check)}function ready(){isReady=!0,emit.sticky("ready")

}function beforequit(){emit("beforequit")}function quit(){emit("quit")}function toExternalPath(path,sep){
return"win32"==plugin.platform&&(path=path.replace(/^[\/]+/,"").replace(/[\/]+/g,sep||"\\")),path}function toInternalPath(path){
return"win32"==plugin.platform&&(path=path.replace(/[\\/]+/g,"/"),path=path.replace(/^\/*(\w):/,function(_,a){
return"/"+a.toUpperCase()+":"})),path}var Plugin=imports.Plugin,vfs=imports.vfs,plugin=new Plugin("Ajax.org",main.consumes),emit=plugin.getEmitter()


emit.setMaxListeners(500)
var loaded=!1,loggedIn=!1,isReady=!1,state=0,STORAGE=2,NETWORK=4,PROCESS=8,LOCAL=16,skipProps={consumes:1,
provides:1,install:1,name:1}
for(var prop in options)skipProps[prop]||(plugin[prop]=options[prop])
var totalLoadTime,startLoadTime
plugin.on("load",function(){load()}),plugin.on("enable",function(){}),plugin.on("disable",function(){}),
plugin.on("unload",function(){loaded=!1}),plugin.freezePublicAPI({STORAGE:STORAGE,NETWORK:NETWORK,PROCESS:PROCESS,
LOCAL:LOCAL,get loggedIn(){return loggedIn},get connection(){return vfs.connection},get connected(){return vfs.connected

},get status(){return state},get location(){return location&&location.href||""},get totalLoadTime(){return totalLoadTime

},set totalLoadTime(v){totalLoadTime=v},get startLoadTime(){return startLoadTime},set startLoadTime(v){
startLoadTime=v},get isReady(){return isReady},_events:["error","connecting","connect","disconnect","message","away","back","showerrormessage","ready","beforequit"],
send:vfs.send,setStatus:setStatus,has:has,ready:ready,beforequit:beforequit,quit:quit,toInternalPath:toInternalPath,
toExternalPath:toExternalPath}),register(null,{c9:plugin})}return main.consumes=["Plugin","vfs"],main.provides=["c9"],
main})

